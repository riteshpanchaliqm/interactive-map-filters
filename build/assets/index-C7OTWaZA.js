function c3(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const m=Object.getOwnPropertyDescriptor(a,u);m&&Object.defineProperty(e,u,m.get?m:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const m of u)if(m.type==="childList")for(const p of m.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(u){const m={};return u.integrity&&(m.integrity=u.integrity),u.referrerPolicy&&(m.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?m.credentials="include":u.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function a(u){if(u.ep)return;u.ep=!0;const m=i(u);fetch(u.href,m)}})();var Py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n0={exports:{}},Mm={},i0={exports:{}},Fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $P;function u3(){if($P)return Fr;$P=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),p=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),k=Symbol.iterator;function D(Ae){return Ae===null||typeof Ae!="object"?null:(Ae=k&&Ae[k]||Ae["@@iterator"],typeof Ae=="function"?Ae:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,U={};function F(Ae,qe,yt){this.props=Ae,this.context=qe,this.refs=U,this.updater=yt||j}F.prototype.isReactComponent={},F.prototype.setState=function(Ae,qe){if(typeof Ae!="object"&&typeof Ae!="function"&&Ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ae,qe,"setState")},F.prototype.forceUpdate=function(Ae){this.updater.enqueueForceUpdate(this,Ae,"forceUpdate")};function X(){}X.prototype=F.prototype;function J(Ae,qe,yt){this.props=Ae,this.context=qe,this.refs=U,this.updater=yt||j}var te=J.prototype=new X;te.constructor=J,G(te,F.prototype),te.isPureReactComponent=!0;var le=Array.isArray,Y=Object.prototype.hasOwnProperty,re={current:null},de={key:!0,ref:!0,__self:!0,__source:!0};function ge(Ae,qe,yt){var Rt,$t={},Wt=null,er=null;if(qe!=null)for(Rt in qe.ref!==void 0&&(er=qe.ref),qe.key!==void 0&&(Wt=""+qe.key),qe)Y.call(qe,Rt)&&!de.hasOwnProperty(Rt)&&($t[Rt]=qe[Rt]);var tr=arguments.length-2;if(tr===1)$t.children=yt;else if(1<tr){for(var vt=Array(tr),Ft=0;Ft<tr;Ft++)vt[Ft]=arguments[Ft+2];$t.children=vt}if(Ae&&Ae.defaultProps)for(Rt in tr=Ae.defaultProps,tr)$t[Rt]===void 0&&($t[Rt]=tr[Rt]);return{$$typeof:e,type:Ae,key:Wt,ref:er,props:$t,_owner:re.current}}function Ie(Ae,qe){return{$$typeof:e,type:Ae.type,key:qe,ref:Ae.ref,props:Ae.props,_owner:Ae._owner}}function We(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===e}function Oe(Ae){var qe={"=":"=0",":":"=2"};return"$"+Ae.replace(/[=:]/g,function(yt){return qe[yt]})}var Ve=/\/+/g;function Ke(Ae,qe){return typeof Ae=="object"&&Ae!==null&&Ae.key!=null?Oe(""+Ae.key):qe.toString(36)}function ot(Ae,qe,yt,Rt,$t){var Wt=typeof Ae;(Wt==="undefined"||Wt==="boolean")&&(Ae=null);var er=!1;if(Ae===null)er=!0;else switch(Wt){case"string":case"number":er=!0;break;case"object":switch(Ae.$$typeof){case e:case t:er=!0}}if(er)return er=Ae,$t=$t(er),Ae=Rt===""?"."+Ke(er,0):Rt,le($t)?(yt="",Ae!=null&&(yt=Ae.replace(Ve,"$&/")+"/"),ot($t,qe,yt,"",function(Ft){return Ft})):$t!=null&&(We($t)&&($t=Ie($t,yt+(!$t.key||er&&er.key===$t.key?"":(""+$t.key).replace(Ve,"$&/")+"/")+Ae)),qe.push($t)),1;if(er=0,Rt=Rt===""?".":Rt+":",le(Ae))for(var tr=0;tr<Ae.length;tr++){Wt=Ae[tr];var vt=Rt+Ke(Wt,tr);er+=ot(Wt,qe,yt,vt,$t)}else if(vt=D(Ae),typeof vt=="function")for(Ae=vt.call(Ae),tr=0;!(Wt=Ae.next()).done;)Wt=Wt.value,vt=Rt+Ke(Wt,tr++),er+=ot(Wt,qe,yt,vt,$t);else if(Wt==="object")throw qe=String(Ae),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.");return er}function at(Ae,qe,yt){if(Ae==null)return Ae;var Rt=[],$t=0;return ot(Ae,Rt,"","",function(Wt){return qe.call(yt,Wt,$t++)}),Rt}function st(Ae){if(Ae._status===-1){var qe=Ae._result;qe=qe(),qe.then(function(yt){(Ae._status===0||Ae._status===-1)&&(Ae._status=1,Ae._result=yt)},function(yt){(Ae._status===0||Ae._status===-1)&&(Ae._status=2,Ae._result=yt)}),Ae._status===-1&&(Ae._status=0,Ae._result=qe)}if(Ae._status===1)return Ae._result.default;throw Ae._result}var lt={current:null},Le={transition:null},tt={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Le,ReactCurrentOwner:re};function ut(){throw Error("act(...) is not supported in production builds of React.")}return Fr.Children={map:at,forEach:function(Ae,qe,yt){at(Ae,function(){qe.apply(this,arguments)},yt)},count:function(Ae){var qe=0;return at(Ae,function(){qe++}),qe},toArray:function(Ae){return at(Ae,function(qe){return qe})||[]},only:function(Ae){if(!We(Ae))throw Error("React.Children.only expected to receive a single React element child.");return Ae}},Fr.Component=F,Fr.Fragment=i,Fr.Profiler=u,Fr.PureComponent=J,Fr.StrictMode=a,Fr.Suspense=P,Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tt,Fr.act=ut,Fr.cloneElement=function(Ae,qe,yt){if(Ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ae+".");var Rt=G({},Ae.props),$t=Ae.key,Wt=Ae.ref,er=Ae._owner;if(qe!=null){if(qe.ref!==void 0&&(Wt=qe.ref,er=re.current),qe.key!==void 0&&($t=""+qe.key),Ae.type&&Ae.type.defaultProps)var tr=Ae.type.defaultProps;for(vt in qe)Y.call(qe,vt)&&!de.hasOwnProperty(vt)&&(Rt[vt]=qe[vt]===void 0&&tr!==void 0?tr[vt]:qe[vt])}var vt=arguments.length-2;if(vt===1)Rt.children=yt;else if(1<vt){tr=Array(vt);for(var Ft=0;Ft<vt;Ft++)tr[Ft]=arguments[Ft+2];Rt.children=tr}return{$$typeof:e,type:Ae.type,key:$t,ref:Wt,props:Rt,_owner:er}},Fr.createContext=function(Ae){return Ae={$$typeof:p,_currentValue:Ae,_currentValue2:Ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ae.Provider={$$typeof:m,_context:Ae},Ae.Consumer=Ae},Fr.createElement=ge,Fr.createFactory=function(Ae){var qe=ge.bind(null,Ae);return qe.type=Ae,qe},Fr.createRef=function(){return{current:null}},Fr.forwardRef=function(Ae){return{$$typeof:l,render:Ae}},Fr.isValidElement=We,Fr.lazy=function(Ae){return{$$typeof:E,_payload:{_status:-1,_result:Ae},_init:st}},Fr.memo=function(Ae,qe){return{$$typeof:A,type:Ae,compare:qe===void 0?null:qe}},Fr.startTransition=function(Ae){var qe=Le.transition;Le.transition={};try{Ae()}finally{Le.transition=qe}},Fr.unstable_act=ut,Fr.useCallback=function(Ae,qe){return lt.current.useCallback(Ae,qe)},Fr.useContext=function(Ae){return lt.current.useContext(Ae)},Fr.useDebugValue=function(){},Fr.useDeferredValue=function(Ae){return lt.current.useDeferredValue(Ae)},Fr.useEffect=function(Ae,qe){return lt.current.useEffect(Ae,qe)},Fr.useId=function(){return lt.current.useId()},Fr.useImperativeHandle=function(Ae,qe,yt){return lt.current.useImperativeHandle(Ae,qe,yt)},Fr.useInsertionEffect=function(Ae,qe){return lt.current.useInsertionEffect(Ae,qe)},Fr.useLayoutEffect=function(Ae,qe){return lt.current.useLayoutEffect(Ae,qe)},Fr.useMemo=function(Ae,qe){return lt.current.useMemo(Ae,qe)},Fr.useReducer=function(Ae,qe,yt){return lt.current.useReducer(Ae,qe,yt)},Fr.useRef=function(Ae){return lt.current.useRef(Ae)},Fr.useState=function(Ae){return lt.current.useState(Ae)},Fr.useSyncExternalStore=function(Ae,qe,yt){return lt.current.useSyncExternalStore(Ae,qe,yt)},Fr.useTransition=function(){return lt.current.useTransition()},Fr.version="18.3.1",Fr}var UP;function $S(){return UP||(UP=1,i0.exports=u3()),i0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP;function h3(){if(VP)return Mm;VP=1;var e=$S(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function p(l,P,A){var E,k={},D=null,j=null;A!==void 0&&(D=""+A),P.key!==void 0&&(D=""+P.key),P.ref!==void 0&&(j=P.ref);for(E in P)a.call(P,E)&&!m.hasOwnProperty(E)&&(k[E]=P[E]);if(l&&l.defaultProps)for(E in P=l.defaultProps,P)k[E]===void 0&&(k[E]=P[E]);return{$$typeof:t,type:l,key:D,ref:j,props:k,_owner:u.current}}return Mm.Fragment=i,Mm.jsx=p,Mm.jsxs=p,Mm}var qP;function d3(){return qP||(qP=1,n0.exports=h3()),n0.exports}var ce=d3(),Ty={},a0={exports:{}},wo={},o0={exports:{}},s0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GP;function f3(){return GP||(GP=1,(function(e){function t(Le,tt){var ut=Le.length;Le.push(tt);e:for(;0<ut;){var Ae=ut-1>>>1,qe=Le[Ae];if(0<u(qe,tt))Le[Ae]=tt,Le[ut]=qe,ut=Ae;else break e}}function i(Le){return Le.length===0?null:Le[0]}function a(Le){if(Le.length===0)return null;var tt=Le[0],ut=Le.pop();if(ut!==tt){Le[0]=ut;e:for(var Ae=0,qe=Le.length,yt=qe>>>1;Ae<yt;){var Rt=2*(Ae+1)-1,$t=Le[Rt],Wt=Rt+1,er=Le[Wt];if(0>u($t,ut))Wt<qe&&0>u(er,$t)?(Le[Ae]=er,Le[Wt]=ut,Ae=Wt):(Le[Ae]=$t,Le[Rt]=ut,Ae=Rt);else if(Wt<qe&&0>u(er,ut))Le[Ae]=er,Le[Wt]=ut,Ae=Wt;else break e}}return tt}function u(Le,tt){var ut=Le.sortIndex-tt.sortIndex;return ut!==0?ut:Le.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var p=Date,l=p.now();e.unstable_now=function(){return p.now()-l}}var P=[],A=[],E=1,k=null,D=3,j=!1,G=!1,U=!1,F=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Le){for(var tt=i(A);tt!==null;){if(tt.callback===null)a(A);else if(tt.startTime<=Le)a(A),tt.sortIndex=tt.expirationTime,t(P,tt);else break;tt=i(A)}}function le(Le){if(U=!1,te(Le),!G)if(i(P)!==null)G=!0,st(Y);else{var tt=i(A);tt!==null&&lt(le,tt.startTime-Le)}}function Y(Le,tt){G=!1,U&&(U=!1,X(ge),ge=-1),j=!0;var ut=D;try{for(te(tt),k=i(P);k!==null&&(!(k.expirationTime>tt)||Le&&!Oe());){var Ae=k.callback;if(typeof Ae=="function"){k.callback=null,D=k.priorityLevel;var qe=Ae(k.expirationTime<=tt);tt=e.unstable_now(),typeof qe=="function"?k.callback=qe:k===i(P)&&a(P),te(tt)}else a(P);k=i(P)}if(k!==null)var yt=!0;else{var Rt=i(A);Rt!==null&&lt(le,Rt.startTime-tt),yt=!1}return yt}finally{k=null,D=ut,j=!1}}var re=!1,de=null,ge=-1,Ie=5,We=-1;function Oe(){return!(e.unstable_now()-We<Ie)}function Ve(){if(de!==null){var Le=e.unstable_now();We=Le;var tt=!0;try{tt=de(!0,Le)}finally{tt?Ke():(re=!1,de=null)}}else re=!1}var Ke;if(typeof J=="function")Ke=function(){J(Ve)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,at=ot.port2;ot.port1.onmessage=Ve,Ke=function(){at.postMessage(null)}}else Ke=function(){F(Ve,0)};function st(Le){de=Le,re||(re=!0,Ke())}function lt(Le,tt){ge=F(function(){Le(e.unstable_now())},tt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_continueExecution=function(){G||j||(G=!0,st(Y))},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return i(P)},e.unstable_next=function(Le){switch(D){case 1:case 2:case 3:var tt=3;break;default:tt=D}var ut=D;D=tt;try{return Le()}finally{D=ut}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Le,tt){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var ut=D;D=Le;try{return tt()}finally{D=ut}},e.unstable_scheduleCallback=function(Le,tt,ut){var Ae=e.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Ae+ut:Ae):ut=Ae,Le){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=ut+qe,Le={id:E++,callback:tt,priorityLevel:Le,startTime:ut,expirationTime:qe,sortIndex:-1},ut>Ae?(Le.sortIndex=ut,t(A,Le),i(P)===null&&Le===i(A)&&(U?(X(ge),ge=-1):U=!0,lt(le,ut-Ae))):(Le.sortIndex=qe,t(P,Le),G||j||(G=!0,st(Y))),Le},e.unstable_shouldYield=Oe,e.unstable_wrapCallback=function(Le){var tt=D;return function(){var ut=D;D=tt;try{return Le.apply(this,arguments)}finally{D=ut}}}})(s0)),s0}var WP;function p3(){return WP||(WP=1,o0.exports=f3()),o0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZP;function m3(){if(ZP)return wo;ZP=1;var e=$S(),t=p3();function i(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,S=1;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function m(h,g){p(h,g),p(h+"Capture",g)}function p(h,g){for(u[h]=g,h=0;h<g.length;h++)a.add(g[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},k={};function D(h){return P.call(k,h)?!0:P.call(E,h)?!1:A.test(h)?k[h]=!0:(E[h]=!0,!1)}function j(h,g,S,M){if(S!==null&&S.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return M?!1:S!==null?!S.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function G(h,g,S,M){if(g===null||typeof g>"u"||j(h,g,S,M))return!0;if(M)return!1;if(S!==null)switch(S.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function U(h,g,S,M,B,q,oe){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=M,this.attributeNamespace=B,this.mustUseProperty=S,this.propertyName=h,this.type=g,this.sanitizeURL=q,this.removeEmptyString=oe}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){F[h]=new U(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var g=h[0];F[g]=new U(g,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){F[h]=new U(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){F[h]=new U(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){F[h]=new U(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){F[h]=new U(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){F[h]=new U(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){F[h]=new U(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){F[h]=new U(h,5,!1,h.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function J(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var g=h.replace(X,J);F[g]=new U(g,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var g=h.replace(X,J);F[g]=new U(g,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var g=h.replace(X,J);F[g]=new U(g,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){F[h]=new U(h,1,!1,h.toLowerCase(),null,!1,!1)}),F.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){F[h]=new U(h,1,!1,h.toLowerCase(),null,!0,!0)});function te(h,g,S,M){var B=F.hasOwnProperty(g)?F[g]:null;(B!==null?B.type!==0:M||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(G(g,S,B,M)&&(S=null),M||B===null?D(g)&&(S===null?h.removeAttribute(g):h.setAttribute(g,""+S)):B.mustUseProperty?h[B.propertyName]=S===null?B.type===3?!1:"":S:(g=B.attributeName,M=B.attributeNamespace,S===null?h.removeAttribute(g):(B=B.type,S=B===3||B===4&&S===!0?"":""+S,M?h.setAttributeNS(M,g,S):h.setAttribute(g,S))))}var le=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),re=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),We=Symbol.for("react.provider"),Oe=Symbol.for("react.context"),Ve=Symbol.for("react.forward_ref"),Ke=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),lt=Symbol.for("react.offscreen"),Le=Symbol.iterator;function tt(h){return h===null||typeof h!="object"?null:(h=Le&&h[Le]||h["@@iterator"],typeof h=="function"?h:null)}var ut=Object.assign,Ae;function qe(h){if(Ae===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);Ae=g&&g[1]||""}return`
`+Ae+h}var yt=!1;function Rt(h,g){if(!h||yt)return"";yt=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(it){var M=it}Reflect.construct(h,[],g)}else{try{g.call()}catch(it){M=it}h.call(g.prototype)}else{try{throw Error()}catch(it){M=it}h()}}catch(it){if(it&&M&&typeof it.stack=="string"){for(var B=it.stack.split(`
`),q=M.stack.split(`
`),oe=B.length-1,Pe=q.length-1;1<=oe&&0<=Pe&&B[oe]!==q[Pe];)Pe--;for(;1<=oe&&0<=Pe;oe--,Pe--)if(B[oe]!==q[Pe]){if(oe!==1||Pe!==1)do if(oe--,Pe--,0>Pe||B[oe]!==q[Pe]){var De=`
`+B[oe].replace(" at new "," at ");return h.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",h.displayName)),De}while(1<=oe&&0<=Pe);break}}}finally{yt=!1,Error.prepareStackTrace=S}return(h=h?h.displayName||h.name:"")?qe(h):""}function $t(h){switch(h.tag){case 5:return qe(h.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return h=Rt(h.type,!1),h;case 11:return h=Rt(h.type.render,!1),h;case 1:return h=Rt(h.type,!0),h;default:return""}}function Wt(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case de:return"Fragment";case re:return"Portal";case Ie:return"Profiler";case ge:return"StrictMode";case Ke:return"Suspense";case ot:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Oe:return(h.displayName||"Context")+".Consumer";case We:return(h._context.displayName||"Context")+".Provider";case Ve:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case at:return g=h.displayName||null,g!==null?g:Wt(h.type)||"Memo";case st:g=h._payload,h=h._init;try{return Wt(h(g))}catch{}}return null}function er(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wt(g);case 8:return g===ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function tr(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function vt(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ft(h){var g=vt(h)?"checked":"value",S=Object.getOwnPropertyDescriptor(h.constructor.prototype,g),M=""+h[g];if(!h.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var B=S.get,q=S.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return B.call(this)},set:function(oe){M=""+oe,q.call(this,oe)}}),Object.defineProperty(h,g,{enumerable:S.enumerable}),{getValue:function(){return M},setValue:function(oe){M=""+oe},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function ir(h){h._valueTracker||(h._valueTracker=Ft(h))}function pt(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var S=g.getValue(),M="";return h&&(M=vt(h)?h.checked?"true":"false":h.value),h=M,h!==S?(g.setValue(h),!0):!1}function dr(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function rr(h,g){var S=g.checked;return ut({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??h._wrapperState.initialChecked})}function qr(h,g){var S=g.defaultValue==null?"":g.defaultValue,M=g.checked!=null?g.checked:g.defaultChecked;S=tr(g.value!=null?g.value:S),h._wrapperState={initialChecked:M,initialValue:S,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function Zr(h,g){g=g.checked,g!=null&&te(h,"checked",g,!1)}function vn(h,g){Zr(h,g);var S=tr(g.value),M=g.type;if(S!=null)M==="number"?(S===0&&h.value===""||h.value!=S)&&(h.value=""+S):h.value!==""+S&&(h.value=""+S);else if(M==="submit"||M==="reset"){h.removeAttribute("value");return}g.hasOwnProperty("value")?Kn(h,g.type,S):g.hasOwnProperty("defaultValue")&&Kn(h,g.type,tr(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(h.defaultChecked=!!g.defaultChecked)}function qn(h,g,S){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var M=g.type;if(!(M!=="submit"&&M!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+h._wrapperState.initialValue,S||g===h.value||(h.value=g),h.defaultValue=g}S=h.name,S!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,S!==""&&(h.name=S)}function Kn(h,g,S){(g!=="number"||dr(h.ownerDocument)!==h)&&(S==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+S&&(h.defaultValue=""+S))}var ki=Array.isArray;function On(h,g,S,M){if(h=h.options,g){g={};for(var B=0;B<S.length;B++)g["$"+S[B]]=!0;for(S=0;S<h.length;S++)B=g.hasOwnProperty("$"+h[S].value),h[S].selected!==B&&(h[S].selected=B),B&&M&&(h[S].defaultSelected=!0)}else{for(S=""+tr(S),g=null,B=0;B<h.length;B++){if(h[B].value===S){h[B].selected=!0,M&&(h[B].defaultSelected=!0);return}g!==null||h[B].disabled||(g=h[B])}g!==null&&(g.selected=!0)}}function ni(h,g){if(g.dangerouslySetInnerHTML!=null)throw Error(i(91));return ut({},g,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function oa(h,g){var S=g.value;if(S==null){if(S=g.children,g=g.defaultValue,S!=null){if(g!=null)throw Error(i(92));if(ki(S)){if(1<S.length)throw Error(i(93));S=S[0]}g=S}g==null&&(g=""),S=g}h._wrapperState={initialValue:tr(S)}}function Ba(h,g){var S=tr(g.value),M=tr(g.defaultValue);S!=null&&(S=""+S,S!==h.value&&(h.value=S),g.defaultValue==null&&h.defaultValue!==S&&(h.defaultValue=S)),M!=null&&(h.defaultValue=""+M)}function Sa(h){var g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function Ao(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ao(h,g){return h==null||h==="http://www.w3.org/1999/xhtml"?Ao(g):h==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Co,ze=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,S,M,B){MSApp.execUnsafeLocalFunction(function(){return h(g,S,M,B)})}:h})(function(h,g){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=g;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Co.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;g.firstChild;)h.appendChild(g.firstChild)}});function ie(h,g){if(g){var S=h.firstChild;if(S&&S===h.lastChild&&S.nodeType===3){S.nodeValue=g;return}}h.textContent=g}var ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];Object.keys(ae).forEach(function(h){he.forEach(function(g){g=g+h.charAt(0).toUpperCase()+h.substring(1),ae[g]=ae[h]})});function we(h,g,S){return g==null||typeof g=="boolean"||g===""?"":S||typeof g!="number"||g===0||ae.hasOwnProperty(h)&&ae[h]?(""+g).trim():g+"px"}function Ce(h,g){h=h.style;for(var S in g)if(g.hasOwnProperty(S)){var M=S.indexOf("--")===0,B=we(S,g[S],M);S==="float"&&(S="cssFloat"),M?h.setProperty(S,B):h[S]=B}}var je=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xe(h,g){if(g){if(je[h]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(i(137,h));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(i(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(i(61))}if(g.style!=null&&typeof g.style!="object")throw Error(i(62))}}function Fe(h,g){if(h.indexOf("-")===-1)return typeof g.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nt=null;function gt(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var ct=null,zt=null,Ne=null;function sr(h){if(h=nl(h)){if(typeof ct!="function")throw Error(i(280));var g=h.stateNode;g&&(g=ru(g),ct(h.stateNode,h.type,g))}}function Cr(h){zt?Ne?Ne.push(h):Ne=[h]:zt=h}function Ut(){if(zt){var h=zt,g=Ne;if(Ne=zt=null,sr(h),g)for(h=0;h<g.length;h++)sr(g[h])}}function pr(h,g){return h(g)}function en(){}var Rn=!1;function Gn(h,g,S){if(Rn)return h(g,S);Rn=!0;try{return pr(h,g,S)}finally{Rn=!1,(zt!==null||Ne!==null)&&(en(),Ut())}}function gn(h,g){var S=h.stateNode;if(S===null)return null;var M=ru(S);if(M===null)return null;S=M[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(h=h.type,M=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!M;break e;default:h=!1}if(h)return null;if(S&&typeof S!="function")throw Error(i(231,g,typeof S));return S}var br=!1;if(l)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){br=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{br=!1}function Wn(h,g,S,M,B,q,oe,Pe,De){var it=Array.prototype.slice.call(arguments,3);try{g.apply(S,it)}catch(bt){this.onError(bt)}}var _t=!1,Xn=null,ln=!1,oo=null,Ol={onError:function(h){_t=!0,Xn=h}};function Ot(h,g,S,M,B,q,oe,Pe,De){_t=!1,Xn=null,Wn.apply(Ol,arguments)}function Mr(h,g,S,M,B,q,oe,Pe,De){if(Ot.apply(this,arguments),_t){if(_t){var it=Xn;_t=!1,Xn=null}else throw Error(i(198));ln||(ln=!0,oo=it)}}function cr(h){var g=h,S=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(S=g.return),h=g.return;while(h)}return g.tag===3?S:null}function ii(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function is(h){if(cr(h)!==h)throw Error(i(188))}function as(h){var g=h.alternate;if(!g){if(g=cr(h),g===null)throw Error(i(188));return g!==h?null:h}for(var S=h,M=g;;){var B=S.return;if(B===null)break;var q=B.alternate;if(q===null){if(M=B.return,M!==null){S=M;continue}break}if(B.child===q.child){for(q=B.child;q;){if(q===S)return is(B),h;if(q===M)return is(B),g;q=q.sibling}throw Error(i(188))}if(S.return!==M.return)S=B,M=q;else{for(var oe=!1,Pe=B.child;Pe;){if(Pe===S){oe=!0,S=B,M=q;break}if(Pe===M){oe=!0,M=B,S=q;break}Pe=Pe.sibling}if(!oe){for(Pe=q.child;Pe;){if(Pe===S){oe=!0,S=q,M=B;break}if(Pe===M){oe=!0,M=q,S=B;break}Pe=Pe.sibling}if(!oe)throw Error(i(189))}}if(S.alternate!==M)throw Error(i(190))}if(S.tag!==3)throw Error(i(188));return S.stateNode.current===S?h:g}function gr(h){return h=as(h),h!==null?kc(h):null}function kc(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=kc(h);if(g!==null)return g;h=h.sibling}return null}var Eo=t.unstable_scheduleCallback,Ic=t.unstable_cancelCallback,so=t.unstable_shouldYield,Rl=t.unstable_requestPaint,wr=t.unstable_now,Nu=t.unstable_getCurrentPriorityLevel,mi=t.unstable_ImmediatePriority,Xr=t.unstable_UserBlockingPriority,Oc=t.unstable_NormalPriority,Rc=t.unstable_LowPriority,Bu=t.unstable_IdlePriority,Fa=null,ui=null;function Rh(h){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(Fa,h,void 0,(h.current.flags&128)===128)}catch{}}var Pa=Math.clz32?Math.clz32:Jd,Yd=Math.log,Dl=Math.LN2;function Jd(h){return h>>>=0,h===0?32:31-(Yd(h)/Dl|0)|0}var Fu=64,$u=4194304;function Dc(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function zl(h,g){var S=h.pendingLanes;if(S===0)return 0;var M=0,B=h.suspendedLanes,q=h.pingedLanes,oe=S&268435455;if(oe!==0){var Pe=oe&~B;Pe!==0?M=Dc(Pe):(q&=oe,q!==0&&(M=Dc(q)))}else oe=S&~B,oe!==0?M=Dc(oe):q!==0&&(M=Dc(q));if(M===0)return 0;if(g!==0&&g!==M&&(g&B)===0&&(B=M&-M,q=g&-g,B>=q||B===16&&(q&4194240)!==0))return g;if((M&4)!==0&&(M|=S&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=M;0<g;)S=31-Pa(g),B=1<<S,M|=h[S],g&=~B;return M}function jl(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dh(h,g){for(var S=h.suspendedLanes,M=h.pingedLanes,B=h.expirationTimes,q=h.pendingLanes;0<q;){var oe=31-Pa(q),Pe=1<<oe,De=B[oe];De===-1?((Pe&S)===0||(Pe&M)!==0)&&(B[oe]=jl(Pe,g)):De<=g&&(h.expiredLanes|=Pe),q&=~Pe}}function zc(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Us(){var h=Fu;return Fu<<=1,(Fu&4194240)===0&&(Fu=64),h}function jc(h){for(var g=[],S=0;31>S;S++)g.push(h);return g}function Vs(h,g,S){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-Pa(g),h[g]=S}function Gp(h,g){var S=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var M=h.eventTimes;for(h=h.expirationTimes;0<S;){var B=31-Pa(S),q=1<<B;g[B]=0,M[B]=-1,h[B]=-1,S&=~q}}function os(h,g){var S=h.entangledLanes|=g;for(h=h.entanglements;S;){var M=31-Pa(S),B=1<<M;B&g|h[M]&g&&(h[M]|=g),S&=~B}}var $r=0;function Ta(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Sr,Mo,ko,lo,ss,_r=!1,co=[],$a=null,Ua=null,Sn=null,Pn=new Map,Yn=new Map,on=[],tn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zh(h,g){switch(h){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Pn.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(g.pointerId)}}function Jn(h,g,S,M,B,q){return h===null||h.nativeEvent!==q?(h={blockedOn:g,domEventName:S,eventSystemFlags:M,nativeEvent:q,targetContainers:[B]},g!==null&&(g=nl(g),g!==null&&Mo(g)),h):(h.eventSystemFlags|=M,g=h.targetContainers,B!==null&&g.indexOf(B)===-1&&g.push(B),h)}function sa(h,g,S,M,B){switch(g){case"focusin":return $a=Jn($a,h,g,S,M,B),!0;case"dragenter":return Ua=Jn(Ua,h,g,S,M,B),!0;case"mouseover":return Sn=Jn(Sn,h,g,S,M,B),!0;case"pointerover":var q=B.pointerId;return Pn.set(q,Jn(Pn.get(q)||null,h,g,S,M,B)),!0;case"gotpointercapture":return q=B.pointerId,Yn.set(q,Jn(Yn.get(q)||null,h,g,S,M,B)),!0}return!1}function hi(h){var g=Ha(h.target);if(g!==null){var S=cr(g);if(S!==null){if(g=S.tag,g===13){if(g=ii(S),g!==null){h.blockedOn=g,ss(h.priority,function(){ko(S)});return}}else if(g===3&&S.stateNode.current.memoizedState.isDehydrated){h.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Yr(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var S=cs(h.domEventName,h.eventSystemFlags,g[0],h.nativeEvent);if(S===null){S=h.nativeEvent;var M=new S.constructor(S.type,S);nt=M,S.target.dispatchEvent(M),nt=null}else return g=nl(S),g!==null&&Mo(g),h.blockedOn=S,!1;g.shift()}return!0}function ls(h,g,S){Yr(h)&&S.delete(g)}function nr(){_r=!1,$a!==null&&Yr($a)&&($a=null),Ua!==null&&Yr(Ua)&&(Ua=null),Sn!==null&&Yr(Sn)&&(Sn=null),Pn.forEach(ls),Yn.forEach(ls)}function lr(h,g){h.blockedOn===g&&(h.blockedOn=null,_r||(_r=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nr)))}function la(h){function g(B){return lr(B,h)}if(0<co.length){lr(co[0],h);for(var S=1;S<co.length;S++){var M=co[S];M.blockedOn===h&&(M.blockedOn=null)}}for($a!==null&&lr($a,h),Ua!==null&&lr(Ua,h),Sn!==null&&lr(Sn,h),Pn.forEach(g),Yn.forEach(g),S=0;S<on.length;S++)M=on[S],M.blockedOn===h&&(M.blockedOn=null);for(;0<on.length&&(S=on[0],S.blockedOn===null);)hi(S),S.blockedOn===null&&on.shift()}var Pr=le.ReactCurrentBatchConfig,gi=!0;function uo(h,g,S,M){var B=$r,q=Pr.transition;Pr.transition=null;try{$r=1,Ll(h,g,S,M)}finally{$r=B,Pr.transition=q}}function ho(h,g,S,M){var B=$r,q=Pr.transition;Pr.transition=null;try{$r=4,Ll(h,g,S,M)}finally{$r=B,Pr.transition=q}}function Ll(h,g,S,M){if(gi){var B=cs(h,g,S,M);if(B===null)Ys(h,g,M,Nl,S),zh(h,M);else if(sa(B,h,g,S,M))M.stopPropagation();else if(zh(h,M),g&4&&-1<tn.indexOf(h)){for(;B!==null;){var q=nl(B);if(q!==null&&Sr(q),q=cs(h,g,S,M),q===null&&Ys(h,g,M,Nl,S),q===B)break;B=q}B!==null&&M.stopPropagation()}else Ys(h,g,M,null,S)}}var Nl=null;function cs(h,g,S,M){if(Nl=null,h=gt(M),h=Ha(h),h!==null)if(g=cr(h),g===null)h=null;else if(S=g.tag,S===13){if(h=ii(g),h!==null)return h;h=null}else if(S===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null);return Nl=h,null}function Bl(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nu()){case mi:return 1;case Xr:return 4;case Oc:case Rc:return 16;case Bu:return 536870912;default:return 16}default:return 16}}var Va=null,Fl=null,qs=null;function Aa(){if(qs)return qs;var h,g=Fl,S=g.length,M,B="value"in Va?Va.value:Va.textContent,q=B.length;for(h=0;h<S&&g[h]===B[h];h++);var oe=S-h;for(M=1;M<=oe&&g[S-M]===B[q-M];M++);return qs=B.slice(h,1<M?1-M:void 0)}function Dn(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function Io(){return!0}function $l(){return!1}function Qn(h){function g(S,M,B,q,oe){this._reactName=S,this._targetInst=B,this.type=M,this.nativeEvent=q,this.target=oe,this.currentTarget=null;for(var Pe in h)h.hasOwnProperty(Pe)&&(S=h[Pe],this[Pe]=S?S(q):q[Pe]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Io:$l,this.isPropagationStopped=$l,this}return ut(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),g}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=Qn(sn),Oo=ut({},sn,{view:0,detail:0}),jh=Qn(Oo),Lh,us,zn,hs=ut({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==zn&&(zn&&h.type==="mousemove"?(Lh=h.screenX-zn.screenX,us=h.screenY-zn.screenY):us=Lh=0,zn=h),Lh)},movementY:function(h){return"movementY"in h?h.movementY:us}}),qa=Qn(hs),Lc=ut({},hs,{dataTransfer:0}),Nc=Qn(Lc),Bc=ut({},Oo,{relatedTarget:0}),ai=Qn(Bc),Qd=ut({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vu=Qn(Qd),Wp=ut({},sn,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Nh=Qn(Wp),Zp=ut({},sn,{data:0}),ef=Qn(Zp),qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fh(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=Gs[h])?!!g[h]:!1}function Ul(){return Fh}var Ga=ut({},Oo,{key:function(h){if(h.key){var g=qu[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=Dn(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Bh[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(h){return h.type==="keypress"?Dn(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Dn(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Hp=Qn(Ga),Gu=ut({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=Qn(Gu),Fc=ut({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),Kp=Qn(Fc),Wu=ut({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xp=Qn(Wu),Ws=ut({},hs,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),tf=Qn(Ws),$h=[9,13,27,32],Uh=l&&"CompositionEvent"in window,ql=null;l&&"documentMode"in document&&(ql=document.documentMode);var Vh=l&&"TextEvent"in window&&!ql,qh=l&&(!Uh||ql&&8<ql&&11>=ql),$c=" ",Gh=!1;function Wh(h,g){switch(h){case"keyup":return $h.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ds(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var fs=!1;function Zh(h,g){switch(h){case"compositionend":return ds(g);case"keypress":return g.which!==32?null:(Gh=!0,$c);case"textInput":return h=g.data,h===$c&&Gh?null:h;default:return null}}function Uc(h,g){if(fs)return h==="compositionend"||!Uh&&Wh(h,g)?(h=Aa(),qs=Fl=Va=null,fs=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return qh&&g.locale!=="ko"?null:g.data;default:return null}}var Yp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gl(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!Yp[h.type]:g==="textarea"}function Hh(h,g,S,M){Cr(M),g=Yc(g,"onChange"),0<g.length&&(S=new Uu("onChange","change",null,S,M),h.push({event:S,listeners:g}))}var Vc=null,Wl=null;function rf(h){sf(h,0)}function Zl(h){var g=il(h);if(pt(g))return h}function Kh(h,g){if(h==="change")return g}var Xh=!1;if(l){var Hl;if(l){var Wa="oninput"in document;if(!Wa){var zr=document.createElement("div");zr.setAttribute("oninput","return;"),Wa=typeof zr.oninput=="function"}Hl=Wa}else Hl=!1;Xh=Hl&&(!document.documentMode||9<document.documentMode)}function Zu(){Vc&&(Vc.detachEvent("onpropertychange",Hu),Wl=Vc=null)}function Hu(h){if(h.propertyName==="value"&&Zl(Wl)){var g=[];Hh(g,Wl,h,gt(h)),Gn(rf,g)}}function nf(h,g,S){h==="focusin"?(Zu(),Vc=g,Wl=S,Vc.attachEvent("onpropertychange",Hu)):h==="focusout"&&Zu()}function Yh(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Zl(Wl)}function Zs(h,g){if(h==="click")return Zl(g)}function Jh(h,g){if(h==="input"||h==="change")return Zl(g)}function Jp(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var Za=typeof Object.is=="function"?Object.is:Jp;function qc(h,g){if(Za(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var S=Object.keys(h),M=Object.keys(g);if(S.length!==M.length)return!1;for(M=0;M<S.length;M++){var B=S[M];if(!P.call(g,B)||!Za(h[B],g[B]))return!1}return!0}function af(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Qh(h,g){var S=af(h);h=0;for(var M;S;){if(S.nodeType===3){if(M=h+S.textContent.length,h<=g&&M>=g)return{node:S,offset:g-h};h=M}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=af(S)}}function of(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?of(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function ed(){for(var h=window,g=dr();g instanceof h.HTMLIFrameElement;){try{var S=typeof g.contentWindow.location.href=="string"}catch{S=!1}if(S)h=g.contentWindow;else break;g=dr(h.document)}return g}function Kl(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}function Ku(h){var g=ed(),S=h.focusedElem,M=h.selectionRange;if(g!==S&&S&&S.ownerDocument&&of(S.ownerDocument.documentElement,S)){if(M!==null&&Kl(S)){if(g=M.start,h=M.end,h===void 0&&(h=g),"selectionStart"in S)S.selectionStart=g,S.selectionEnd=Math.min(h,S.value.length);else if(h=(g=S.ownerDocument||document)&&g.defaultView||window,h.getSelection){h=h.getSelection();var B=S.textContent.length,q=Math.min(M.start,B);M=M.end===void 0?q:Math.min(M.end,B),!h.extend&&q>M&&(B=M,M=q,q=B),B=Qh(S,q);var oe=Qh(S,M);B&&oe&&(h.rangeCount!==1||h.anchorNode!==B.node||h.anchorOffset!==B.offset||h.focusNode!==oe.node||h.focusOffset!==oe.offset)&&(g=g.createRange(),g.setStart(B.node,B.offset),h.removeAllRanges(),q>M?(h.addRange(g),h.extend(oe.node,oe.offset)):(g.setEnd(oe.node,oe.offset),h.addRange(g)))}}for(g=[],h=S;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<g.length;S++)h=g[S],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Xu=l&&"documentMode"in document&&11>=document.documentMode,ps=null,Ro=null,Do=null,ms=!1;function ca(h,g,S){var M=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;ms||ps==null||ps!==dr(M)||(M=ps,"selectionStart"in M&&Kl(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Do&&qc(Do,M)||(Do=M,M=Yc(Ro,"onSelect"),0<M.length&&(g=new Uu("onSelect","select",null,g,S),h.push({event:g,listeners:M}),g.target=ps)))}function Gc(h,g){var S={};return S[h.toLowerCase()]=g.toLowerCase(),S["Webkit"+h]="webkit"+g,S["Moz"+h]="moz"+g,S}var Hs={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},Wc={},gs={};l&&(gs=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function Ks(h){if(Wc[h])return Wc[h];if(!Hs[h])return h;var g=Hs[h],S;for(S in g)if(g.hasOwnProperty(S)&&S in gs)return Wc[h]=g[S];return h}var Zc=Ks("animationend"),Xl=Ks("animationiteration"),Hc=Ks("animationstart"),td=Ks("transitionend"),Xs=new Map,zo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(h,g){Xs.set(h,g),m(g,[h])}for(var Kc=0;Kc<zo.length;Kc++){var Tr=zo[Kc],Xc=Tr.toLowerCase(),Qp=Tr[0].toUpperCase()+Tr.slice(1);jo(Xc,"on"+Qp)}jo(Zc,"onAnimationEnd"),jo(Xl,"onAnimationIteration"),jo(Hc,"onAnimationStart"),jo("dblclick","onDoubleClick"),jo("focusin","onFocus"),jo("focusout","onBlur"),jo(td,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ys=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yl));function rd(h,g,S){var M=h.type||"unknown-event";h.currentTarget=S,Mr(M,g,void 0,h),h.currentTarget=null}function sf(h,g){g=(g&4)!==0;for(var S=0;S<h.length;S++){var M=h[S],B=M.event;M=M.listeners;e:{var q=void 0;if(g)for(var oe=M.length-1;0<=oe;oe--){var Pe=M[oe],De=Pe.instance,it=Pe.currentTarget;if(Pe=Pe.listener,De!==q&&B.isPropagationStopped())break e;rd(B,Pe,it),q=De}else for(oe=0;oe<M.length;oe++){if(Pe=M[oe],De=Pe.instance,it=Pe.currentTarget,Pe=Pe.listener,De!==q&&B.isPropagationStopped())break e;rd(B,Pe,it),q=De}}}if(ln)throw h=oo,ln=!1,oo=null,h}function cn(h,g){var S=g[tu];S===void 0&&(S=g[tu]=new Set);var M=h+"__bubble";S.has(M)||(Ql(g,h,2,!1),S.add(M))}function nd(h,g,S){var M=0;g&&(M|=4),Ql(S,h,M,g)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function vs(h){if(!h[Jl]){h[Jl]=!0,a.forEach(function(S){S!=="selectionchange"&&(ys.has(S)||nd(S,!1,h),nd(S,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[Jl]||(g[Jl]=!0,nd("selectionchange",!1,g))}}function Ql(h,g,S,M){switch(Bl(g)){case 1:var B=uo;break;case 4:B=ho;break;default:B=Ll}S=B.bind(null,g,S,h),B=void 0,!br||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(B=!0),M?B!==void 0?h.addEventListener(g,S,{capture:!0,passive:B}):h.addEventListener(g,S,!0):B!==void 0?h.addEventListener(g,S,{passive:B}):h.addEventListener(g,S,!1)}function Ys(h,g,S,M,B){var q=M;if((g&1)===0&&(g&2)===0&&M!==null)e:for(;;){if(M===null)return;var oe=M.tag;if(oe===3||oe===4){var Pe=M.stateNode.containerInfo;if(Pe===B||Pe.nodeType===8&&Pe.parentNode===B)break;if(oe===4)for(oe=M.return;oe!==null;){var De=oe.tag;if((De===3||De===4)&&(De=oe.stateNode.containerInfo,De===B||De.nodeType===8&&De.parentNode===B))return;oe=oe.return}for(;Pe!==null;){if(oe=Ha(Pe),oe===null)return;if(De=oe.tag,De===5||De===6){M=q=oe;continue e}Pe=Pe.parentNode}}M=M.return}Gn(function(){var it=q,bt=gt(S),Tt=[];e:{var xt=Xs.get(h);if(xt!==void 0){var Nt=Uu,Zt=h;switch(h){case"keypress":if(Dn(S)===0)break e;case"keydown":case"keyup":Nt=Hp;break;case"focusin":Zt="focus",Nt=ai;break;case"focusout":Zt="blur",Nt=ai;break;case"beforeblur":case"afterblur":Nt=ai;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=qa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=Nc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=Kp;break;case Zc:case Xl:case Hc:Nt=Vu;break;case td:Nt=Xp;break;case"scroll":Nt=jh;break;case"wheel":Nt=tf;break;case"copy":case"cut":case"paste":Nt=Nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Vl}var Kt=(g&4)!==0,Zn=!Kt&&h==="scroll",Je=Kt?xt!==null?xt+"Capture":null:xt;Kt=[];for(var Be=it,Qe;Be!==null;){Qe=Be;var kt=Qe.stateNode;if(Qe.tag===5&&kt!==null&&(Qe=kt,Je!==null&&(kt=gn(Be,Je),kt!=null&&Kt.push(Js(Be,kt,Qe)))),Zn)break;Be=Be.return}0<Kt.length&&(xt=new Nt(xt,Zt,null,S,bt),Tt.push({event:xt,listeners:Kt}))}}if((g&7)===0){e:{if(xt=h==="mouseover"||h==="pointerover",Nt=h==="mouseout"||h==="pointerout",xt&&S!==nt&&(Zt=S.relatedTarget||S.fromElement)&&(Ha(Zt)||Zt[Ea]))break e;if((Nt||xt)&&(xt=bt.window===bt?bt:(xt=bt.ownerDocument)?xt.defaultView||xt.parentWindow:window,Nt?(Zt=S.relatedTarget||S.toElement,Nt=it,Zt=Zt?Ha(Zt):null,Zt!==null&&(Zn=cr(Zt),Zt!==Zn||Zt.tag!==5&&Zt.tag!==6)&&(Zt=null)):(Nt=null,Zt=it),Nt!==Zt)){if(Kt=qa,kt="onMouseLeave",Je="onMouseEnter",Be="mouse",(h==="pointerout"||h==="pointerover")&&(Kt=Vl,kt="onPointerLeave",Je="onPointerEnter",Be="pointer"),Zn=Nt==null?xt:il(Nt),Qe=Zt==null?xt:il(Zt),xt=new Kt(kt,Be+"leave",Nt,S,bt),xt.target=Zn,xt.relatedTarget=Qe,kt=null,Ha(bt)===it&&(Kt=new Kt(Je,Be+"enter",Zt,S,bt),Kt.target=Qe,Kt.relatedTarget=Zn,kt=Kt),Zn=kt,Nt&&Zt)t:{for(Kt=Nt,Je=Zt,Be=0,Qe=Kt;Qe;Qe=fo(Qe))Be++;for(Qe=0,kt=Je;kt;kt=fo(kt))Qe++;for(;0<Be-Qe;)Kt=fo(Kt),Be--;for(;0<Qe-Be;)Je=fo(Je),Qe--;for(;Be--;){if(Kt===Je||Je!==null&&Kt===Je.alternate)break t;Kt=fo(Kt),Je=fo(Je)}Kt=null}else Kt=null;Nt!==null&&ec(Tt,xt,Nt,Kt,!1),Zt!==null&&Zn!==null&&ec(Tt,Zn,Zt,Kt,!0)}}e:{if(xt=it?il(it):window,Nt=xt.nodeName&&xt.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&xt.type==="file")var Xt=Kh;else if(Gl(xt))if(Xh)Xt=Jh;else{Xt=Yh;var ur=nf}else(Nt=xt.nodeName)&&Nt.toLowerCase()==="input"&&(xt.type==="checkbox"||xt.type==="radio")&&(Xt=Zs);if(Xt&&(Xt=Xt(h,it))){Hh(Tt,Xt,S,bt);break e}ur&&ur(h,xt,it),h==="focusout"&&(ur=xt._wrapperState)&&ur.controlled&&xt.type==="number"&&Kn(xt,"number",xt.value)}switch(ur=it?il(it):window,h){case"focusin":(Gl(ur)||ur.contentEditable==="true")&&(ps=ur,Ro=it,Do=null);break;case"focusout":Do=Ro=ps=null;break;case"mousedown":ms=!0;break;case"contextmenu":case"mouseup":case"dragend":ms=!1,ca(Tt,S,bt);break;case"selectionchange":if(Xu)break;case"keydown":case"keyup":ca(Tt,S,bt)}var ar;if(Uh)e:{switch(h){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else fs?Wh(h,S)&&(mr="onCompositionEnd"):h==="keydown"&&S.keyCode===229&&(mr="onCompositionStart");mr&&(qh&&S.locale!=="ko"&&(fs||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&fs&&(ar=Aa()):(Va=bt,Fl="value"in Va?Va.value:Va.textContent,fs=!0)),ur=Yc(it,mr),0<ur.length&&(mr=new ef(mr,h,null,S,bt),Tt.push({event:mr,listeners:ur}),ar?mr.data=ar:(ar=ds(S),ar!==null&&(mr.data=ar)))),(ar=Vh?Zh(h,S):Uc(h,S))&&(it=Yc(it,"onBeforeInput"),0<it.length&&(bt=new ef("onBeforeInput","beforeinput",null,S,bt),Tt.push({event:bt,listeners:it}),bt.data=ar))}sf(Tt,g)})}function Js(h,g,S){return{instance:h,listener:g,currentTarget:S}}function Yc(h,g){for(var S=g+"Capture",M=[];h!==null;){var B=h,q=B.stateNode;B.tag===5&&q!==null&&(B=q,q=gn(h,S),q!=null&&M.unshift(Js(h,q,B)),q=gn(h,g),q!=null&&M.push(Js(h,q,B))),h=h.return}return M}function fo(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function ec(h,g,S,M,B){for(var q=g._reactName,oe=[];S!==null&&S!==M;){var Pe=S,De=Pe.alternate,it=Pe.stateNode;if(De!==null&&De===M)break;Pe.tag===5&&it!==null&&(Pe=it,B?(De=gn(S,q),De!=null&&oe.unshift(Js(S,De,Pe))):B||(De=gn(S,q),De!=null&&oe.push(Js(S,De,Pe)))),S=S.return}oe.length!==0&&h.push({event:g,listeners:oe})}var Jc=/\r\n?/g,Qs=/\u0000|\uFFFD/g;function tc(h){return(typeof h=="string"?h:""+h).replace(Jc,`
`).replace(Qs,"")}function rc(h,g,S){if(g=tc(g),tc(h)!==g&&S)throw Error(i(425))}function po(){}var Qc=null,el=null;function nc(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var eu=typeof setTimeout=="function"?setTimeout:void 0,lf=typeof clearTimeout=="function"?clearTimeout:void 0,id=typeof Promise=="function"?Promise:void 0,Yu=typeof queueMicrotask=="function"?queueMicrotask:typeof id<"u"?function(h){return id.resolve(null).then(h).catch(ad)}:eu;function ad(h){setTimeout(function(){throw h})}function Ju(h,g){var S=g,M=0;do{var B=S.nextSibling;if(h.removeChild(S),B&&B.nodeType===8)if(S=B.data,S==="/$"){if(M===0){h.removeChild(B),la(g);return}M--}else S!=="$"&&S!=="$?"&&S!=="$!"||M++;S=B}while(S);la(g)}function mo(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return h}function un(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var S=h.data;if(S==="$"||S==="$!"||S==="$?"){if(g===0)return h;g--}else S==="/$"&&g++}h=h.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Ca,_s="__reactProps$"+Ca,Ea="__reactContainer$"+Ca,tu="__reactEvents$"+Ca,tl="__reactListeners$"+Ca,rl="__reactHandles$"+Ca;function Ha(h){var g=h[Tn];if(g)return g;for(var S=h.parentNode;S;){if(g=S[Ea]||S[Tn]){if(S=g.alternate,g.child!==null||S!==null&&S.child!==null)for(h=un(h);h!==null;){if(S=h[Tn])return S;h=un(h)}return g}h=S,S=h.parentNode}return null}function nl(h){return h=h[Tn]||h[Ea],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function il(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(i(33))}function ru(h){return h[_s]||null}var Qu=[],al=-1;function ua(h){return{current:h}}function jr(h){0>al||(h.current=Qu[al],Qu[al]=null,al--)}function Ir(h,g){al++,Qu[al]=h.current,h.current=g}var ha={},oi=ua(ha),Ii=ua(!1),xs=ha;function Ka(h,g){var S=h.type.contextTypes;if(!S)return ha;var M=h.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===g)return M.__reactInternalMemoizedMaskedChildContext;var B={},q;for(q in S)B[q]=g[q];return M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=B),B}function yi(h){return h=h.childContextTypes,h!=null}function ol(){jr(Ii),jr(oi)}function nu(h,g,S){if(oi.current!==ha)throw Error(i(168));Ir(oi,g),Ir(Ii,S)}function iu(h,g,S){var M=h.stateNode;if(g=g.childContextTypes,typeof M.getChildContext!="function")return S;M=M.getChildContext();for(var B in M)if(!(B in g))throw Error(i(108,er(h)||"Unknown",B));return ut({},S,M)}function Oi(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||ha,xs=oi.current,Ir(oi,h),Ir(Ii,Ii.current),!0}function vi(h,g,S){var M=h.stateNode;if(!M)throw Error(i(169));S?(h=iu(h,g,xs),M.__reactInternalMemoizedMergedChildContext=h,jr(Ii),jr(oi),Ir(oi,h)):jr(Ii),Ir(Ii,S)}var go=null,Ki=!1,bs=!1;function ic(h){go===null?go=[h]:go.push(h)}function em(h){Ki=!0,ic(h)}function ws(){if(!bs&&go!==null){bs=!0;var h=0,g=$r;try{var S=go;for($r=1;h<S.length;h++){var M=S[h];do M=M(!0);while(M!==null)}go=null,Ki=!1}catch(B){throw go!==null&&(go=go.slice(h+1)),Eo(mi,ws),B}finally{$r=g,bs=!1}}return null}var Lo=[],sl=0,yo=null,Ri=0,At=[],Xi=0,vo=null,Xa=1,Di="";function Ma(h,g){Lo[sl++]=Ri,Lo[sl++]=yo,yo=h,Ri=g}function eh(h,g,S){At[Xi++]=Xa,At[Xi++]=Di,At[Xi++]=vo,vo=h;var M=Xa;h=Di;var B=32-Pa(M)-1;M&=~(1<<B),S+=1;var q=32-Pa(g)+B;if(30<q){var oe=B-B%5;q=(M&(1<<oe)-1).toString(32),M>>=oe,B-=oe,Xa=1<<32-Pa(g)+B|S<<B|M,Di=q+h}else Xa=1<<q|S<<B|M,Di=h}function Ar(h){h.return!==null&&(Ma(h,1),eh(h,1,0))}function au(h){for(;h===yo;)yo=Lo[--sl],Lo[sl]=null,Ri=Lo[--sl],Lo[sl]=null;for(;h===vo;)vo=At[--Xi],At[Xi]=null,Di=At[--Xi],At[Xi]=null,Xa=At[--Xi],At[Xi]=null}var Yi=null,zi=null,yn=!1,ka=null;function od(h,g){var S=Ja(5,null,null,0);S.elementType="DELETED",S.stateNode=g,S.return=h,g=h.deletions,g===null?(h.deletions=[S],h.flags|=16):g.push(S)}function th(h,g){switch(h.tag){case 5:var S=h.type;return g=g.nodeType!==1||S.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(h.stateNode=g,Yi=h,zi=mo(g.firstChild),!0):!1;case 6:return g=h.pendingProps===""||g.nodeType!==3?null:g,g!==null?(h.stateNode=g,Yi=h,zi=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(S=vo!==null?{id:Xa,overflow:Di}:null,h.memoizedState={dehydrated:g,treeContext:S,retryLane:1073741824},S=Ja(18,null,null,0),S.stateNode=g,S.return=h,h.child=S,Yi=h,zi=null,!0):!1;default:return!1}}function ou(h){return(h.mode&1)!==0&&(h.flags&128)===0}function rh(h){if(yn){var g=zi;if(g){var S=g;if(!th(h,g)){if(ou(h))throw Error(i(418));g=mo(S.nextSibling);var M=Yi;g&&th(h,g)?od(M,S):(h.flags=h.flags&-4097|2,yn=!1,Yi=h)}}else{if(ou(h))throw Error(i(418));h.flags=h.flags&-4097|2,yn=!1,Yi=h}}}function nh(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Yi=h}function su(h){if(h!==Yi)return!1;if(!yn)return nh(h),yn=!0,!1;var g;if((g=h.tag!==3)&&!(g=h.tag!==5)&&(g=h.type,g=g!=="head"&&g!=="body"&&!nc(h.type,h.memoizedProps)),g&&(g=zi)){if(ou(h))throw lu(),Error(i(418));for(;g;)od(h,g),g=mo(g.nextSibling)}if(nh(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));e:{for(h=h.nextSibling,g=0;h;){if(h.nodeType===8){var S=h.data;if(S==="/$"){if(g===0){zi=mo(h.nextSibling);break e}g--}else S!=="$"&&S!=="$!"&&S!=="$?"||g++}h=h.nextSibling}zi=null}}else zi=Yi?mo(h.stateNode.nextSibling):null;return!0}function lu(){for(var h=zi;h;)h=mo(h.nextSibling)}function da(){zi=Yi=null,yn=!1}function Gr(h){ka===null?ka=[h]:ka.push(h)}var tm=le.ReactCurrentBatchConfig;function Ss(h,g,S){if(h=S.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(i(309));var M=S.stateNode}if(!M)throw Error(i(147,h));var B=M,q=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===q?g.ref:(g=function(oe){var Pe=B.refs;oe===null?delete Pe[q]:Pe[q]=oe},g._stringRef=q,g)}if(typeof h!="string")throw Error(i(284));if(!S._owner)throw Error(i(290,h))}return h}function ll(h,g){throw h=Object.prototype.toString.call(g),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function ih(h){var g=h._init;return g(h._payload)}function ah(h){function g(Je,Be){if(h){var Qe=Je.deletions;Qe===null?(Je.deletions=[Be],Je.flags|=16):Qe.push(Be)}}function S(Je,Be){if(!h)return null;for(;Be!==null;)g(Je,Be),Be=Be.sibling;return null}function M(Je,Be){for(Je=new Map;Be!==null;)Be.key!==null?Je.set(Be.key,Be):Je.set(Be.index,Be),Be=Be.sibling;return Je}function B(Je,Be){return Je=bo(Je,Be),Je.index=0,Je.sibling=null,Je}function q(Je,Be,Qe){return Je.index=Qe,h?(Qe=Je.alternate,Qe!==null?(Qe=Qe.index,Qe<Be?(Je.flags|=2,Be):Qe):(Je.flags|=2,Be)):(Je.flags|=1048576,Be)}function oe(Je){return h&&Je.alternate===null&&(Je.flags|=2),Je}function Pe(Je,Be,Qe,kt){return Be===null||Be.tag!==6?(Be=Ef(Qe,Je.mode,kt),Be.return=Je,Be):(Be=B(Be,Qe),Be.return=Je,Be)}function De(Je,Be,Qe,kt){var Xt=Qe.type;return Xt===de?bt(Je,Be,Qe.props.children,kt,Qe.key):Be!==null&&(Be.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===st&&ih(Xt)===Be.type)?(kt=B(Be,Qe.props),kt.ref=Ss(Je,Be,Qe),kt.return=Je,kt):(kt=$n(Qe.type,Qe.key,Qe.props,null,Je.mode,kt),kt.ref=Ss(Je,Be,Qe),kt.return=Je,kt)}function it(Je,Be,Qe,kt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Qe.containerInfo||Be.stateNode.implementation!==Qe.implementation?(Be=_d(Qe,Je.mode,kt),Be.return=Je,Be):(Be=B(Be,Qe.children||[]),Be.return=Je,Be)}function bt(Je,Be,Qe,kt,Xt){return Be===null||Be.tag!==7?(Be=xl(Qe,Je.mode,kt,Xt),Be.return=Je,Be):(Be=B(Be,Qe),Be.return=Je,Be)}function Tt(Je,Be,Qe){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return Be=Ef(""+Be,Je.mode,Qe),Be.return=Je,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case Y:return Qe=$n(Be.type,Be.key,Be.props,null,Je.mode,Qe),Qe.ref=Ss(Je,null,Be),Qe.return=Je,Qe;case re:return Be=_d(Be,Je.mode,Qe),Be.return=Je,Be;case st:var kt=Be._init;return Tt(Je,kt(Be._payload),Qe)}if(ki(Be)||tt(Be))return Be=xl(Be,Je.mode,Qe,null),Be.return=Je,Be;ll(Je,Be)}return null}function xt(Je,Be,Qe,kt){var Xt=Be!==null?Be.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Xt!==null?null:Pe(Je,Be,""+Qe,kt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case Y:return Qe.key===Xt?De(Je,Be,Qe,kt):null;case re:return Qe.key===Xt?it(Je,Be,Qe,kt):null;case st:return Xt=Qe._init,xt(Je,Be,Xt(Qe._payload),kt)}if(ki(Qe)||tt(Qe))return Xt!==null?null:bt(Je,Be,Qe,kt,null);ll(Je,Qe)}return null}function Nt(Je,Be,Qe,kt,Xt){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return Je=Je.get(Qe)||null,Pe(Be,Je,""+kt,Xt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case Y:return Je=Je.get(kt.key===null?Qe:kt.key)||null,De(Be,Je,kt,Xt);case re:return Je=Je.get(kt.key===null?Qe:kt.key)||null,it(Be,Je,kt,Xt);case st:var ur=kt._init;return Nt(Je,Be,Qe,ur(kt._payload),Xt)}if(ki(kt)||tt(kt))return Je=Je.get(Qe)||null,bt(Be,Je,kt,Xt,null);ll(Be,kt)}return null}function Zt(Je,Be,Qe,kt){for(var Xt=null,ur=null,ar=Be,mr=Be=0,Si=null;ar!==null&&mr<Qe.length;mr++){ar.index>mr?(Si=ar,ar=null):Si=ar.sibling;var Wr=xt(Je,ar,Qe[mr],kt);if(Wr===null){ar===null&&(ar=Si);break}h&&ar&&Wr.alternate===null&&g(Je,ar),Be=q(Wr,Be,mr),ur===null?Xt=Wr:ur.sibling=Wr,ur=Wr,ar=Si}if(mr===Qe.length)return S(Je,ar),yn&&Ma(Je,mr),Xt;if(ar===null){for(;mr<Qe.length;mr++)ar=Tt(Je,Qe[mr],kt),ar!==null&&(Be=q(ar,Be,mr),ur===null?Xt=ar:ur.sibling=ar,ur=ar);return yn&&Ma(Je,mr),Xt}for(ar=M(Je,ar);mr<Qe.length;mr++)Si=Nt(ar,Je,mr,Qe[mr],kt),Si!==null&&(h&&Si.alternate!==null&&ar.delete(Si.key===null?mr:Si.key),Be=q(Si,Be,mr),ur===null?Xt=Si:ur.sibling=Si,ur=Si);return h&&ar.forEach(function(Ds){return g(Je,Ds)}),yn&&Ma(Je,mr),Xt}function Kt(Je,Be,Qe,kt){var Xt=tt(Qe);if(typeof Xt!="function")throw Error(i(150));if(Qe=Xt.call(Qe),Qe==null)throw Error(i(151));for(var ur=Xt=null,ar=Be,mr=Be=0,Si=null,Wr=Qe.next();ar!==null&&!Wr.done;mr++,Wr=Qe.next()){ar.index>mr?(Si=ar,ar=null):Si=ar.sibling;var Ds=xt(Je,ar,Wr.value,kt);if(Ds===null){ar===null&&(ar=Si);break}h&&ar&&Ds.alternate===null&&g(Je,ar),Be=q(Ds,Be,mr),ur===null?Xt=Ds:ur.sibling=Ds,ur=Ds,ar=Si}if(Wr.done)return S(Je,ar),yn&&Ma(Je,mr),Xt;if(ar===null){for(;!Wr.done;mr++,Wr=Qe.next())Wr=Tt(Je,Wr.value,kt),Wr!==null&&(Be=q(Wr,Be,mr),ur===null?Xt=Wr:ur.sibling=Wr,ur=Wr);return yn&&Ma(Je,mr),Xt}for(ar=M(Je,ar);!Wr.done;mr++,Wr=Qe.next())Wr=Nt(ar,Je,mr,Wr.value,kt),Wr!==null&&(h&&Wr.alternate!==null&&ar.delete(Wr.key===null?mr:Wr.key),Be=q(Wr,Be,mr),ur===null?Xt=Wr:ur.sibling=Wr,ur=Wr);return h&&ar.forEach(function(yh){return g(Je,yh)}),yn&&Ma(Je,mr),Xt}function Zn(Je,Be,Qe,kt){if(typeof Qe=="object"&&Qe!==null&&Qe.type===de&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case Y:e:{for(var Xt=Qe.key,ur=Be;ur!==null;){if(ur.key===Xt){if(Xt=Qe.type,Xt===de){if(ur.tag===7){S(Je,ur.sibling),Be=B(ur,Qe.props.children),Be.return=Je,Je=Be;break e}}else if(ur.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===st&&ih(Xt)===ur.type){S(Je,ur.sibling),Be=B(ur,Qe.props),Be.ref=Ss(Je,ur,Qe),Be.return=Je,Je=Be;break e}S(Je,ur);break}else g(Je,ur);ur=ur.sibling}Qe.type===de?(Be=xl(Qe.props.children,Je.mode,kt,Qe.key),Be.return=Je,Je=Be):(kt=$n(Qe.type,Qe.key,Qe.props,null,Je.mode,kt),kt.ref=Ss(Je,Be,Qe),kt.return=Je,Je=kt)}return oe(Je);case re:e:{for(ur=Qe.key;Be!==null;){if(Be.key===ur)if(Be.tag===4&&Be.stateNode.containerInfo===Qe.containerInfo&&Be.stateNode.implementation===Qe.implementation){S(Je,Be.sibling),Be=B(Be,Qe.children||[]),Be.return=Je,Je=Be;break e}else{S(Je,Be);break}else g(Je,Be);Be=Be.sibling}Be=_d(Qe,Je.mode,kt),Be.return=Je,Je=Be}return oe(Je);case st:return ur=Qe._init,Zn(Je,Be,ur(Qe._payload),kt)}if(ki(Qe))return Zt(Je,Be,Qe,kt);if(tt(Qe))return Kt(Je,Be,Qe,kt);ll(Je,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"?(Qe=""+Qe,Be!==null&&Be.tag===6?(S(Je,Be.sibling),Be=B(Be,Qe),Be.return=Je,Je=Be):(S(Je,Be),Be=Ef(Qe,Je.mode,kt),Be.return=Je,Je=Be),oe(Je)):S(Je,Be)}return Zn}var cl=ah(!0),cf=ah(!1),fa=ua(null),ul=null,jt=null,Vt=null;function ac(){Vt=jt=ul=null}function cu(h){var g=fa.current;jr(fa),h._currentValue=g}function oc(h,g,S){for(;h!==null;){var M=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,M!==null&&(M.childLanes|=g)):M!==null&&(M.childLanes&g)!==g&&(M.childLanes|=g),h===S)break;h=h.return}}function jn(h,g){ul=h,Vt=jt=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&g)!==0&&(Bi=!0),h.firstContext=null)}function pa(h){var g=h._currentValue;if(Vt!==h)if(h={context:h,memoizedValue:g,next:null},jt===null){if(ul===null)throw Error(i(308));jt=h,ul.dependencies={lanes:0,firstContext:h}}else jt=jt.next=h;return g}var di=null;function No(h){di===null?di=[h]:di.push(h)}function hl(h,g,S,M){var B=g.interleaved;return B===null?(S.next=S,No(g)):(S.next=B.next,B.next=S),g.interleaved=S,Ur(h,M)}function Ur(h,g){h.lanes|=g;var S=h.alternate;for(S!==null&&(S.lanes|=g),S=h,h=h.return;h!==null;)h.childLanes|=g,S=h.alternate,S!==null&&(S.childLanes|=g),S=h,h=h.return;return S.tag===3?S.stateNode:null}var Jr=!1;function sc(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lc(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ji(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function Ji(h,g,S){var M=h.updateQueue;if(M===null)return null;if(M=M.shared,(Br&2)!==0){var B=M.pending;return B===null?g.next=g:(g.next=B.next,B.next=g),M.pending=g,Ur(h,S)}return B=M.interleaved,B===null?(g.next=g,No(M)):(g.next=B.next,B.next=g),M.interleaved=g,Ur(h,S)}function cc(h,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194240)!==0)){var M=g.lanes;M&=h.pendingLanes,S|=M,g.lanes=S,os(h,S)}}function uu(h,g){var S=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,S===M)){var B=null,q=null;if(S=S.firstBaseUpdate,S!==null){do{var oe={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};q===null?B=q=oe:q=q.next=oe,S=S.next}while(S!==null);q===null?B=q=g:q=q.next=g}else B=q=g;S={baseState:M.baseState,firstBaseUpdate:B,lastBaseUpdate:q,shared:M.shared,effects:M.effects},h.updateQueue=S;return}h=S.lastBaseUpdate,h===null?S.firstBaseUpdate=g:h.next=g,S.lastBaseUpdate=g}function Ia(h,g,S,M){var B=h.updateQueue;Jr=!1;var q=B.firstBaseUpdate,oe=B.lastBaseUpdate,Pe=B.shared.pending;if(Pe!==null){B.shared.pending=null;var De=Pe,it=De.next;De.next=null,oe===null?q=it:oe.next=it,oe=De;var bt=h.alternate;bt!==null&&(bt=bt.updateQueue,Pe=bt.lastBaseUpdate,Pe!==oe&&(Pe===null?bt.firstBaseUpdate=it:Pe.next=it,bt.lastBaseUpdate=De))}if(q!==null){var Tt=B.baseState;oe=0,bt=it=De=null,Pe=q;do{var xt=Pe.lane,Nt=Pe.eventTime;if((M&xt)===xt){bt!==null&&(bt=bt.next={eventTime:Nt,lane:0,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null});e:{var Zt=h,Kt=Pe;switch(xt=g,Nt=S,Kt.tag){case 1:if(Zt=Kt.payload,typeof Zt=="function"){Tt=Zt.call(Nt,Tt,xt);break e}Tt=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=Kt.payload,xt=typeof Zt=="function"?Zt.call(Nt,Tt,xt):Zt,xt==null)break e;Tt=ut({},Tt,xt);break e;case 2:Jr=!0}}Pe.callback!==null&&Pe.lane!==0&&(h.flags|=64,xt=B.effects,xt===null?B.effects=[Pe]:xt.push(Pe))}else Nt={eventTime:Nt,lane:xt,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},bt===null?(it=bt=Nt,De=Tt):bt=bt.next=Nt,oe|=xt;if(Pe=Pe.next,Pe===null){if(Pe=B.shared.pending,Pe===null)break;xt=Pe,Pe=xt.next,xt.next=null,B.lastBaseUpdate=xt,B.shared.pending=null}}while(!0);if(bt===null&&(De=Tt),B.baseState=De,B.firstBaseUpdate=it,B.lastBaseUpdate=bt,g=B.shared.interleaved,g!==null){B=g;do oe|=B.lane,B=B.next;while(B!==g)}else q===null&&(B.shared.lanes=0);ks|=oe,h.lanes=oe,h.memoizedState=Tt}}function oh(h,g,S){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var M=h[g],B=M.callback;if(B!==null){if(M.callback=null,M=S,typeof B!="function")throw Error(i(191,B));B.call(M)}}}var dl={},ma=ua(dl),fl=ua(dl),_=ua(dl);function r(h){if(h===dl)throw Error(i(174));return h}function c(h,g){switch(Ir(_,g),Ir(fl,h),Ir(ma,dl),h=g.nodeType,h){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:ao(null,"");break;default:h=h===8?g.parentNode:g,g=h.namespaceURI||null,h=h.tagName,g=ao(g,h)}jr(ma),Ir(ma,g)}function f(){jr(ma),jr(fl),jr(_)}function v(h){r(_.current);var g=r(ma.current),S=ao(g,h.type);g!==S&&(Ir(fl,h),Ir(ma,S))}function b(h){fl.current===h&&(jr(ma),jr(fl))}var T=ua(0);function O(h){for(var g=h;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var R=[];function L(){for(var h=0;h<R.length;h++)R[h]._workInProgressVersionPrimary=null;R.length=0}var $=le.ReactCurrentDispatcher,Z=le.ReactCurrentBatchConfig,W=0,K=null,ne=null,ue=null,pe=!1,me=!1,ye=0,be=0;function ve(){throw Error(i(321))}function Te(h,g){if(g===null)return!1;for(var S=0;S<g.length&&S<h.length;S++)if(!Za(h[S],g[S]))return!1;return!0}function ke(h,g,S,M,B,q){if(W=q,K=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,$.current=h===null||h.memoizedState===null?ei:rm,h=S(M,B),me){q=0;do{if(me=!1,ye=0,25<=q)throw Error(i(301));q+=1,ue=ne=null,g.updateQueue=null,$.current=sd,h=S(M,B)}while(me)}if($.current=bi,g=ne!==null&&ne.next!==null,W=0,ue=ne=K=null,pe=!1,g)throw Error(i(300));return h}function xe(){var h=ye!==0;return ye=0,h}function Re(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?K.memoizedState=ue=h:ue=ue.next=h,ue}function He(){if(ne===null){var h=K.alternate;h=h!==null?h.memoizedState:null}else h=ne.next;var g=ue===null?K.memoizedState:ue.next;if(g!==null)ue=g,ne=h;else{if(h===null)throw Error(i(310));ne=h,h={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},ue===null?K.memoizedState=ue=h:ue=ue.next=h}return ue}function Ge(h,g){return typeof g=="function"?g(h):g}function Ze(h){var g=He(),S=g.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=h;var M=ne,B=M.baseQueue,q=S.pending;if(q!==null){if(B!==null){var oe=B.next;B.next=q.next,q.next=oe}M.baseQueue=B=q,S.pending=null}if(B!==null){q=B.next,M=M.baseState;var Pe=oe=null,De=null,it=q;do{var bt=it.lane;if((W&bt)===bt)De!==null&&(De=De.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),M=it.hasEagerState?it.eagerState:h(M,it.action);else{var Tt={lane:bt,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};De===null?(Pe=De=Tt,oe=M):De=De.next=Tt,K.lanes|=bt,ks|=bt}it=it.next}while(it!==null&&it!==q);De===null?oe=M:De.next=Pe,Za(M,g.memoizedState)||(Bi=!0),g.memoizedState=M,g.baseState=oe,g.baseQueue=De,S.lastRenderedState=M}if(h=S.interleaved,h!==null){B=h;do q=B.lane,K.lanes|=q,ks|=q,B=B.next;while(B!==h)}else B===null&&(S.lanes=0);return[g.memoizedState,S.dispatch]}function et(h){var g=He(),S=g.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=h;var M=S.dispatch,B=S.pending,q=g.memoizedState;if(B!==null){S.pending=null;var oe=B=B.next;do q=h(q,oe.action),oe=oe.next;while(oe!==B);Za(q,g.memoizedState)||(Bi=!0),g.memoizedState=q,g.baseQueue===null&&(g.baseState=q),S.lastRenderedState=q}return[q,M]}function Pt(){}function wt(h,g){var S=K,M=He(),B=g(),q=!Za(M.memoizedState,B);if(q&&(M.memoizedState=B,Bi=!0),M=M.queue,Ln(vr.bind(null,S,M,h),[h]),M.getSnapshot!==g||q||ue!==null&&ue.memoizedState.tag&1){if(S.flags|=2048,Vr(9,Lt.bind(null,S,M,B,g),void 0,null),ti===null)throw Error(i(349));(W&30)!==0||dt(S,g,B)}return B}function dt(h,g,S){h.flags|=16384,h={getSnapshot:g,value:S},g=K.updateQueue,g===null?(g={lastEffect:null,stores:null},K.updateQueue=g,g.stores=[h]):(S=g.stores,S===null?g.stores=[h]:S.push(h))}function Lt(h,g,S,M){g.value=S,g.getSnapshot=M,Nr(g)&&hn(h)}function vr(h,g,S){return S(function(){Nr(g)&&hn(h)})}function Nr(h){var g=h.getSnapshot;h=h.value;try{var S=g();return!Za(h,S)}catch{return!0}}function hn(h){var g=Ur(h,1);g!==null&&xo(g,h,1,-1)}function Qr(h){var g=Re();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ge,lastRenderedState:h},g.queue=h,h=h.dispatch=Uo.bind(null,K,h),[g.memoizedState,h]}function Vr(h,g,S,M){return h={tag:h,create:g,destroy:S,deps:M,next:null},g=K.updateQueue,g===null?(g={lastEffect:null,stores:null},K.updateQueue=g,g.lastEffect=h.next=h):(S=g.lastEffect,S===null?g.lastEffect=h.next=h:(M=S.next,S.next=h,h.next=M,g.lastEffect=h)),h}function dn(){return He().memoizedState}function Kr(h,g,S,M){var B=Re();K.flags|=h,B.memoizedState=Vr(1|g,S,void 0,M===void 0?null:M)}function Hr(h,g,S,M){var B=He();M=M===void 0?null:M;var q=void 0;if(ne!==null){var oe=ne.memoizedState;if(q=oe.destroy,M!==null&&Te(M,oe.deps)){B.memoizedState=Vr(g,S,q,M);return}}K.flags|=h,B.memoizedState=Vr(1|g,S,q,M)}function Rr(h,g){return Kr(8390656,8,h,g)}function Ln(h,g){return Hr(2048,8,h,g)}function Nn(h,g){return Hr(4,2,h,g)}function _i(h,g){return Hr(4,4,h,g)}function Bo(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function Fo(h,g,S){return S=S!=null?S.concat([h]):null,Hr(4,4,Bo.bind(null,g,h),S)}function ga(){}function Ps(h,g){var S=He();g=g===void 0?null:g;var M=S.memoizedState;return M!==null&&g!==null&&Te(g,M[1])?M[0]:(S.memoizedState=[h,g],h)}function uc(h,g){var S=He();g=g===void 0?null:g;var M=S.memoizedState;return M!==null&&g!==null&&Te(g,M[1])?M[0]:(h=h(),S.memoizedState=[h,g],h)}function hu(h,g,S){return(W&21)===0?(h.baseState&&(h.baseState=!1,Bi=!0),h.memoizedState=S):(Za(S,g)||(S=Us(),K.lanes|=S,ks|=S,h.baseState=!0),g)}function Ts(h,g){var S=$r;$r=S!==0&&4>S?S:4,h(!0);var M=Z.transition;Z.transition={};try{h(!1),g()}finally{$r=S,Z.transition=M}}function xi(){return He().memoizedState}function $o(h,g,S){var M=_c(h);if(S={lane:M,action:S,hasEagerState:!1,eagerState:null,next:null},Vo(h))rn(g,S);else if(S=hl(h,g,S,M),S!==null){var B=xa();xo(S,h,M,B),An(S,g,M)}}function Uo(h,g,S){var M=_c(h),B={lane:M,action:S,hasEagerState:!1,eagerState:null,next:null};if(Vo(h))rn(g,B);else{var q=h.alternate;if(h.lanes===0&&(q===null||q.lanes===0)&&(q=g.lastRenderedReducer,q!==null))try{var oe=g.lastRenderedState,Pe=q(oe,S);if(B.hasEagerState=!0,B.eagerState=Pe,Za(Pe,oe)){var De=g.interleaved;De===null?(B.next=B,No(g)):(B.next=De.next,De.next=B),g.interleaved=B;return}}catch{}finally{}S=hl(h,g,B,M),S!==null&&(B=xa(),xo(S,h,M,B),An(S,g,M))}}function Vo(h){var g=h.alternate;return h===K||g!==null&&g===K}function rn(h,g){me=pe=!0;var S=h.pending;S===null?g.next=g:(g.next=S.next,S.next=g),h.pending=g}function An(h,g,S){if((S&4194240)!==0){var M=g.lanes;M&=h.pendingLanes,S|=M,g.lanes=S,os(h,S)}}var bi={readContext:pa,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},ei={readContext:pa,useCallback:function(h,g){return Re().memoizedState=[h,g===void 0?null:g],h},useContext:pa,useEffect:Rr,useImperativeHandle:function(h,g,S){return S=S!=null?S.concat([h]):null,Kr(4194308,4,Bo.bind(null,g,h),S)},useLayoutEffect:function(h,g){return Kr(4194308,4,h,g)},useInsertionEffect:function(h,g){return Kr(4,2,h,g)},useMemo:function(h,g){var S=Re();return g=g===void 0?null:g,h=h(),S.memoizedState=[h,g],h},useReducer:function(h,g,S){var M=Re();return g=S!==void 0?S(g):g,M.memoizedState=M.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},M.queue=h,h=h.dispatch=$o.bind(null,K,h),[M.memoizedState,h]},useRef:function(h){var g=Re();return h={current:h},g.memoizedState=h},useState:Qr,useDebugValue:ga,useDeferredValue:function(h){return Re().memoizedState=h},useTransition:function(){var h=Qr(!1),g=h[0];return h=Ts.bind(null,h[1]),Re().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,S){var M=K,B=Re();if(yn){if(S===void 0)throw Error(i(407));S=S()}else{if(S=g(),ti===null)throw Error(i(349));(W&30)!==0||dt(M,g,S)}B.memoizedState=S;var q={value:S,getSnapshot:g};return B.queue=q,Rr(vr.bind(null,M,q,h),[h]),M.flags|=2048,Vr(9,Lt.bind(null,M,q,S,g),void 0,null),S},useId:function(){var h=Re(),g=ti.identifierPrefix;if(yn){var S=Di,M=Xa;S=(M&~(1<<32-Pa(M)-1)).toString(32)+S,g=":"+g+"R"+S,S=ye++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=be++,g=":"+g+"r"+S.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},rm={readContext:pa,useCallback:Ps,useContext:pa,useEffect:Ln,useImperativeHandle:Fo,useInsertionEffect:Nn,useLayoutEffect:_i,useMemo:uc,useReducer:Ze,useRef:dn,useState:function(){return Ze(Ge)},useDebugValue:ga,useDeferredValue:function(h){var g=He();return hu(g,ne.memoizedState,h)},useTransition:function(){var h=Ze(Ge)[0],g=He().memoizedState;return[h,g]},useMutableSource:Pt,useSyncExternalStore:wt,useId:xi,unstable_isNewReconciler:!1},sd={readContext:pa,useCallback:Ps,useContext:pa,useEffect:Ln,useImperativeHandle:Fo,useInsertionEffect:Nn,useLayoutEffect:_i,useMemo:uc,useReducer:et,useRef:dn,useState:function(){return et(Ge)},useDebugValue:ga,useDeferredValue:function(h){var g=He();return ne===null?g.memoizedState=h:hu(g,ne.memoizedState,h)},useTransition:function(){var h=et(Ge)[0],g=He().memoizedState;return[h,g]},useMutableSource:Pt,useSyncExternalStore:wt,useId:xi,unstable_isNewReconciler:!1};function Li(h,g){if(h&&h.defaultProps){g=ut({},g),h=h.defaultProps;for(var S in h)g[S]===void 0&&(g[S]=h[S]);return g}return g}function As(h,g,S,M){g=h.memoizedState,S=S(M,g),S=S==null?g:ut({},g,S),h.memoizedState=S,h.lanes===0&&(h.updateQueue.baseState=S)}var Oa={isMounted:function(h){return(h=h._reactInternals)?cr(h)===h:!1},enqueueSetState:function(h,g,S){h=h._reactInternals;var M=xa(),B=_c(h),q=ji(M,B);q.payload=g,S!=null&&(q.callback=S),g=Ji(h,q,B),g!==null&&(xo(g,h,B,M),cc(g,h,B))},enqueueReplaceState:function(h,g,S){h=h._reactInternals;var M=xa(),B=_c(h),q=ji(M,B);q.tag=1,q.payload=g,S!=null&&(q.callback=S),g=Ji(h,q,B),g!==null&&(xo(g,h,B,M),cc(g,h,B))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var S=xa(),M=_c(h),B=ji(S,M);B.tag=2,g!=null&&(B.callback=g),g=Ji(h,B,M),g!==null&&(xo(g,h,M,S),cc(g,h,M))}};function Ra(h,g,S,M,B,q,oe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,q,oe):g.prototype&&g.prototype.isPureReactComponent?!qc(S,M)||!qc(B,q):!0}function Ni(h,g,S){var M=!1,B=ha,q=g.contextType;return typeof q=="object"&&q!==null?q=pa(q):(B=yi(g)?xs:oi.current,M=g.contextTypes,q=(M=M!=null)?Ka(h,B):ha),g=new g(S,q),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Oa,h.stateNode=g,g._reactInternals=h,M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=B,h.__reactInternalMemoizedMaskedChildContext=q),g}function sh(h,g,S,M){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,M),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,M),g.state!==h&&Oa.enqueueReplaceState(g,g.state,null)}function _o(h,g,S,M){var B=h.stateNode;B.props=S,B.state=h.memoizedState,B.refs={},sc(h);var q=g.contextType;typeof q=="object"&&q!==null?B.context=pa(q):(q=yi(g)?xs:oi.current,B.context=Ka(h,q)),B.state=h.memoizedState,q=g.getDerivedStateFromProps,typeof q=="function"&&(As(h,g,q,S),B.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(g=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),g!==B.state&&Oa.enqueueReplaceState(B,B.state,null),Ia(h,S,B,M),B.state=h.memoizedState),typeof B.componentDidMount=="function"&&(h.flags|=4194308)}function pl(h,g){try{var S="",M=g;do S+=$t(M),M=M.return;while(M);var B=S}catch(q){B=`
Error generating stack: `+q.message+`
`+q.stack}return{value:h,source:g,stack:B,digest:null}}function hc(h,g,S){return{value:h,source:null,stack:S??null,digest:g??null}}function dc(h,g){try{console.error(g.value)}catch(S){setTimeout(function(){throw S})}}var lh=typeof WeakMap=="function"?WeakMap:Map;function fc(h,g,S){S=ji(-1,S),S.tag=3,S.payload={element:null};var M=g.value;return S.callback=function(){yc||(yc=!0,dd=M),dc(h,g)},S}function pc(h,g,S){S=ji(-1,S),S.tag=3;var M=h.type.getDerivedStateFromError;if(typeof M=="function"){var B=g.value;S.payload=function(){return M(B)},S.callback=function(){dc(h,g)}}var q=h.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(S.callback=function(){dc(h,g),typeof M!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var oe=g.stack;this.componentDidCatch(g.value,{componentStack:oe!==null?oe:""})}),S}function nm(h,g,S){var M=h.pingCache;if(M===null){M=h.pingCache=new lh;var B=new Set;M.set(g,B)}else B=M.get(g),B===void 0&&(B=new Set,M.set(g,B));B.has(S)||(B.add(S),h=j_.bind(null,h,g,S),g.then(h,h))}function Vg(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function uf(h,g,S,M,B){return(h.mode&1)===0?(h===g?h.flags|=65536:(h.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(g=ji(-1,1),g.tag=2,Ji(S,g,1))),S.lanes|=1),h):(h.flags|=65536,h.lanes=B,h)}var qg=le.ReactCurrentOwner,Bi=!1;function Qi(h,g,S,M){g.child=h===null?cf(g,null,S,M):cl(g,h.child,S,M)}function Gg(h,g,S,M,B){S=S.render;var q=g.ref;return jn(g,B),M=ke(h,g,S,M,q,B),S=xe(),h!==null&&!Bi?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~B,ml(h,g,B)):(yn&&S&&Ar(g),g.flags|=1,Qi(h,g,M,B),g.child)}function hf(h,g,S,M,B){if(h===null){var q=S.type;return typeof q=="function"&&!bm(q)&&q.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(g.tag=15,g.type=q,Wg(h,g,q,M,B)):(h=$n(S.type,null,M,g,g.mode,B),h.ref=g.ref,h.return=g,g.child=h)}if(q=h.child,(h.lanes&B)===0){var oe=q.memoizedProps;if(S=S.compare,S=S!==null?S:qc,S(oe,M)&&h.ref===g.ref)return ml(h,g,B)}return g.flags|=1,h=bo(q,M),h.ref=g.ref,h.return=g,g.child=h}function Wg(h,g,S,M,B){if(h!==null){var q=h.memoizedProps;if(qc(q,M)&&h.ref===g.ref)if(Bi=!1,g.pendingProps=M=q,(h.lanes&B)!==0)(h.flags&131072)!==0&&(Bi=!0);else return g.lanes=h.lanes,ml(h,g,B)}return ff(h,g,S,M,B)}function df(h,g,S){var M=g.pendingProps,B=M.children,q=h!==null?h.memoizedState:null;if(M.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ir(Es,Da),Da|=S;else{if((S&1073741824)===0)return h=q!==null?q.baseLanes|S:S,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,Ir(Es,Da),Da|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=q!==null?q.baseLanes:S,Ir(Es,Da),Da|=M}else q!==null?(M=q.baseLanes|S,g.memoizedState=null):M=S,Ir(Es,Da),Da|=M;return Qi(h,g,B,S),g.child}function im(h,g){var S=g.ref;(h===null&&S!==null||h!==null&&h.ref!==S)&&(g.flags|=512,g.flags|=2097152)}function ff(h,g,S,M,B){var q=yi(S)?xs:oi.current;return q=Ka(g,q),jn(g,B),S=ke(h,g,S,M,q,B),M=xe(),h!==null&&!Bi?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~B,ml(h,g,B)):(yn&&M&&Ar(g),g.flags|=1,Qi(h,g,S,B),g.child)}function du(h,g,S,M,B){if(yi(S)){var q=!0;Oi(g)}else q=!1;if(jn(g,B),g.stateNode===null)yf(h,g),Ni(g,S,M),_o(g,S,M,B),M=!0;else if(h===null){var oe=g.stateNode,Pe=g.memoizedProps;oe.props=Pe;var De=oe.context,it=S.contextType;typeof it=="object"&&it!==null?it=pa(it):(it=yi(S)?xs:oi.current,it=Ka(g,it));var bt=S.getDerivedStateFromProps,Tt=typeof bt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";Tt||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Pe!==M||De!==it)&&sh(g,oe,M,it),Jr=!1;var xt=g.memoizedState;oe.state=xt,Ia(g,M,oe,B),De=g.memoizedState,Pe!==M||xt!==De||Ii.current||Jr?(typeof bt=="function"&&(As(g,S,bt,M),De=g.memoizedState),(Pe=Jr||Ra(g,S,Pe,M,xt,De,it))?(Tt||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(g.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=M,g.memoizedState=De),oe.props=M,oe.state=De,oe.context=it,M=Pe):(typeof oe.componentDidMount=="function"&&(g.flags|=4194308),M=!1)}else{oe=g.stateNode,lc(h,g),Pe=g.memoizedProps,it=g.type===g.elementType?Pe:Li(g.type,Pe),oe.props=it,Tt=g.pendingProps,xt=oe.context,De=S.contextType,typeof De=="object"&&De!==null?De=pa(De):(De=yi(S)?xs:oi.current,De=Ka(g,De));var Nt=S.getDerivedStateFromProps;(bt=typeof Nt=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Pe!==Tt||xt!==De)&&sh(g,oe,M,De),Jr=!1,xt=g.memoizedState,oe.state=xt,Ia(g,M,oe,B);var Zt=g.memoizedState;Pe!==Tt||xt!==Zt||Ii.current||Jr?(typeof Nt=="function"&&(As(g,S,Nt,M),Zt=g.memoizedState),(it=Jr||Ra(g,S,it,M,xt,Zt,De)||!1)?(bt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(M,Zt,De),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(M,Zt,De)),typeof oe.componentDidUpdate=="function"&&(g.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Pe===h.memoizedProps&&xt===h.memoizedState||(g.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Pe===h.memoizedProps&&xt===h.memoizedState||(g.flags|=1024),g.memoizedProps=M,g.memoizedState=Zt),oe.props=M,oe.state=Zt,oe.context=De,M=it):(typeof oe.componentDidUpdate!="function"||Pe===h.memoizedProps&&xt===h.memoizedState||(g.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Pe===h.memoizedProps&&xt===h.memoizedState||(g.flags|=1024),M=!1)}return am(h,g,S,M,q,B)}function am(h,g,S,M,B,q){im(h,g);var oe=(g.flags&128)!==0;if(!M&&!oe)return B&&vi(g,S,!1),ml(h,g,q);M=g.stateNode,qg.current=g;var Pe=oe&&typeof S.getDerivedStateFromError!="function"?null:M.render();return g.flags|=1,h!==null&&oe?(g.child=cl(g,h.child,null,q),g.child=cl(g,null,Pe,q)):Qi(h,g,Pe,q),g.memoizedState=M.state,B&&vi(g,S,!0),g.child}function fu(h){var g=h.stateNode;g.pendingContext?nu(h,g.pendingContext,g.pendingContext!==g.context):g.context&&nu(h,g.context,!1),c(h,g.containerInfo)}function ld(h,g,S,M,B){return da(),Gr(B),g.flags|=256,Qi(h,g,S,M),g.child}var ch={dehydrated:null,treeContext:null,retryLane:0};function om(h){return{baseLanes:h,cachePool:null,transitions:null}}function Zg(h,g,S){var M=g.pendingProps,B=T.current,q=!1,oe=(g.flags&128)!==0,Pe;if((Pe=oe)||(Pe=h!==null&&h.memoizedState===null?!1:(B&2)!==0),Pe?(q=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(B|=1),Ir(T,B&1),h===null)return rh(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((g.mode&1)===0?g.lanes=1:h.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(oe=M.children,h=M.fallback,q?(M=g.mode,q=g.child,oe={mode:"hidden",children:oe},(M&1)===0&&q!==null?(q.childLanes=0,q.pendingProps=oe):q=vd(oe,M,0,null),h=xl(h,M,S,null),q.return=g,h.return=g,q.sibling=h,g.child=q,g.child.memoizedState=om(S),g.memoizedState=ch,h):sm(g,oe));if(B=h.memoizedState,B!==null&&(Pe=B.dehydrated,Pe!==null))return Hg(h,g,oe,M,Pe,B,S);if(q){q=M.fallback,oe=g.mode,B=h.child,Pe=B.sibling;var De={mode:"hidden",children:M.children};return(oe&1)===0&&g.child!==B?(M=g.child,M.childLanes=0,M.pendingProps=De,g.deletions=null):(M=bo(B,De),M.subtreeFlags=B.subtreeFlags&14680064),Pe!==null?q=bo(Pe,q):(q=xl(q,oe,S,null),q.flags|=2),q.return=g,M.return=g,M.sibling=q,g.child=M,M=q,q=g.child,oe=h.child.memoizedState,oe=oe===null?om(S):{baseLanes:oe.baseLanes|S,cachePool:null,transitions:oe.transitions},q.memoizedState=oe,q.childLanes=h.childLanes&~S,g.memoizedState=ch,M}return q=h.child,h=q.sibling,M=bo(q,{mode:"visible",children:M.children}),(g.mode&1)===0&&(M.lanes=S),M.return=g,M.sibling=null,h!==null&&(S=g.deletions,S===null?(g.deletions=[h],g.flags|=16):S.push(h)),g.child=M,g.memoizedState=null,M}function sm(h,g){return g=vd({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function pf(h,g,S,M){return M!==null&&Gr(M),cl(g,h.child,null,S),h=sm(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function Hg(h,g,S,M,B,q,oe){if(S)return g.flags&256?(g.flags&=-257,M=hc(Error(i(422))),pf(h,g,oe,M)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(q=M.fallback,B=g.mode,M=vd({mode:"visible",children:M.children},B,0,null),q=xl(q,B,oe,null),q.flags|=2,M.return=g,q.return=g,M.sibling=q,g.child=M,(g.mode&1)!==0&&cl(g,h.child,null,oe),g.child.memoizedState=om(oe),g.memoizedState=ch,q);if((g.mode&1)===0)return pf(h,g,oe,null);if(B.data==="$!"){if(M=B.nextSibling&&B.nextSibling.dataset,M)var Pe=M.dgst;return M=Pe,q=Error(i(419)),M=hc(q,M,void 0),pf(h,g,oe,M)}if(Pe=(oe&h.childLanes)!==0,Bi||Pe){if(M=ti,M!==null){switch(oe&-oe){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=(B&(M.suspendedLanes|oe))!==0?0:B,B!==0&&B!==q.retryLane&&(q.retryLane=B,Ur(h,B),xo(M,h,B,-1))}return Af(),M=hc(Error(i(421))),pf(h,g,oe,M)}return B.data==="$?"?(g.flags|=128,g.child=h.child,g=L_.bind(null,h),B._reactRetry=g,null):(h=q.treeContext,zi=mo(B.nextSibling),Yi=g,yn=!0,ka=null,h!==null&&(At[Xi++]=Xa,At[Xi++]=Di,At[Xi++]=vo,Xa=h.id,Di=h.overflow,vo=g),g=sm(g,M.children),g.flags|=4096,g)}function mf(h,g,S){h.lanes|=g;var M=h.alternate;M!==null&&(M.lanes|=g),oc(h.return,g,S)}function gf(h,g,S,M,B){var q=h.memoizedState;q===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:M,tail:S,tailMode:B}:(q.isBackwards=g,q.rendering=null,q.renderingStartTime=0,q.last=M,q.tail=S,q.tailMode=B)}function lm(h,g,S){var M=g.pendingProps,B=M.revealOrder,q=M.tail;if(Qi(h,g,M.children,S),M=T.current,(M&2)!==0)M=M&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&mf(h,S,g);else if(h.tag===19)mf(h,S,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}M&=1}if(Ir(T,M),(g.mode&1)===0)g.memoizedState=null;else switch(B){case"forwards":for(S=g.child,B=null;S!==null;)h=S.alternate,h!==null&&O(h)===null&&(B=S),S=S.sibling;S=B,S===null?(B=g.child,g.child=null):(B=S.sibling,S.sibling=null),gf(g,!1,B,S,q);break;case"backwards":for(S=null,B=g.child,g.child=null;B!==null;){if(h=B.alternate,h!==null&&O(h)===null){g.child=B;break}h=B.sibling,B.sibling=S,S=B,B=h}gf(g,!0,S,null,q);break;case"together":gf(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function yf(h,g){(g.mode&1)===0&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function ml(h,g,S){if(h!==null&&(g.dependencies=h.dependencies),ks|=g.lanes,(S&g.childLanes)===0)return null;if(h!==null&&g.child!==h.child)throw Error(i(153));if(g.child!==null){for(h=g.child,S=bo(h,h.pendingProps),g.child=S,S.return=g;h.sibling!==null;)h=h.sibling,S=S.sibling=bo(h,h.pendingProps),S.return=g;S.sibling=null}return g.child}function Kg(h,g,S){switch(g.tag){case 3:fu(g),da();break;case 5:v(g);break;case 1:yi(g.type)&&Oi(g);break;case 4:c(g,g.stateNode.containerInfo);break;case 10:var M=g.type._context,B=g.memoizedProps.value;Ir(fa,M._currentValue),M._currentValue=B;break;case 13:if(M=g.memoizedState,M!==null)return M.dehydrated!==null?(Ir(T,T.current&1),g.flags|=128,null):(S&g.child.childLanes)!==0?Zg(h,g,S):(Ir(T,T.current&1),h=ml(h,g,S),h!==null?h.sibling:null);Ir(T,T.current&1);break;case 19:if(M=(S&g.childLanes)!==0,(h.flags&128)!==0){if(M)return lm(h,g,S);g.flags|=128}if(B=g.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Ir(T,T.current),M)break;return null;case 22:case 23:return g.lanes=0,df(h,g,S)}return ml(h,g,S)}var cm,um,vf,hm;cm=function(h,g){for(var S=g.child;S!==null;){if(S.tag===5||S.tag===6)h.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},um=function(){},vf=function(h,g,S,M){var B=h.memoizedProps;if(B!==M){h=g.stateNode,r(ma.current);var q=null;switch(S){case"input":B=rr(h,B),M=rr(h,M),q=[];break;case"select":B=ut({},B,{value:void 0}),M=ut({},M,{value:void 0}),q=[];break;case"textarea":B=ni(h,B),M=ni(h,M),q=[];break;default:typeof B.onClick!="function"&&typeof M.onClick=="function"&&(h.onclick=po)}Xe(S,M);var oe;S=null;for(it in B)if(!M.hasOwnProperty(it)&&B.hasOwnProperty(it)&&B[it]!=null)if(it==="style"){var Pe=B[it];for(oe in Pe)Pe.hasOwnProperty(oe)&&(S||(S={}),S[oe]="")}else it!=="dangerouslySetInnerHTML"&&it!=="children"&&it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(u.hasOwnProperty(it)?q||(q=[]):(q=q||[]).push(it,null));for(it in M){var De=M[it];if(Pe=B?.[it],M.hasOwnProperty(it)&&De!==Pe&&(De!=null||Pe!=null))if(it==="style")if(Pe){for(oe in Pe)!Pe.hasOwnProperty(oe)||De&&De.hasOwnProperty(oe)||(S||(S={}),S[oe]="");for(oe in De)De.hasOwnProperty(oe)&&Pe[oe]!==De[oe]&&(S||(S={}),S[oe]=De[oe])}else S||(q||(q=[]),q.push(it,S)),S=De;else it==="dangerouslySetInnerHTML"?(De=De?De.__html:void 0,Pe=Pe?Pe.__html:void 0,De!=null&&Pe!==De&&(q=q||[]).push(it,De)):it==="children"?typeof De!="string"&&typeof De!="number"||(q=q||[]).push(it,""+De):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&(u.hasOwnProperty(it)?(De!=null&&it==="onScroll"&&cn("scroll",h),q||Pe===De||(q=[])):(q=q||[]).push(it,De))}S&&(q=q||[]).push("style",S);var it=q;(g.updateQueue=it)&&(g.flags|=4)}},hm=function(h,g,S,M){S!==M&&(g.flags|=4)};function pu(h,g){if(!yn)switch(h.tailMode){case"hidden":g=h.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h.tail=null:S.sibling=null;break;case"collapsed":S=h.tail;for(var M=null;S!==null;)S.alternate!==null&&(M=S),S=S.sibling;M===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function si(h){var g=h.alternate!==null&&h.alternate.child===h.child,S=0,M=0;if(g)for(var B=h.child;B!==null;)S|=B.lanes|B.childLanes,M|=B.subtreeFlags&14680064,M|=B.flags&14680064,B.return=h,B=B.sibling;else for(B=h.child;B!==null;)S|=B.lanes|B.childLanes,M|=B.subtreeFlags,M|=B.flags,B.return=h,B=B.sibling;return h.subtreeFlags|=M,h.childLanes=S,g}function ya(h,g,S){var M=g.pendingProps;switch(au(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(g),null;case 1:return yi(g.type)&&ol(),si(g),null;case 3:return M=g.stateNode,f(),jr(Ii),jr(oi),L(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(h===null||h.child===null)&&(su(g)?g.flags|=4:h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,ka!==null&&(md(ka),ka=null))),um(h,g),si(g),null;case 5:b(g);var B=r(_.current);if(S=g.type,h!==null&&g.stateNode!=null)vf(h,g,S,M,B),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!M){if(g.stateNode===null)throw Error(i(166));return si(g),null}if(h=r(ma.current),su(g)){M=g.stateNode,S=g.type;var q=g.memoizedProps;switch(M[Tn]=g,M[_s]=q,h=(g.mode&1)!==0,S){case"dialog":cn("cancel",M),cn("close",M);break;case"iframe":case"object":case"embed":cn("load",M);break;case"video":case"audio":for(B=0;B<Yl.length;B++)cn(Yl[B],M);break;case"source":cn("error",M);break;case"img":case"image":case"link":cn("error",M),cn("load",M);break;case"details":cn("toggle",M);break;case"input":qr(M,q),cn("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!q.multiple},cn("invalid",M);break;case"textarea":oa(M,q),cn("invalid",M)}Xe(S,q),B=null;for(var oe in q)if(q.hasOwnProperty(oe)){var Pe=q[oe];oe==="children"?typeof Pe=="string"?M.textContent!==Pe&&(q.suppressHydrationWarning!==!0&&rc(M.textContent,Pe,h),B=["children",Pe]):typeof Pe=="number"&&M.textContent!==""+Pe&&(q.suppressHydrationWarning!==!0&&rc(M.textContent,Pe,h),B=["children",""+Pe]):u.hasOwnProperty(oe)&&Pe!=null&&oe==="onScroll"&&cn("scroll",M)}switch(S){case"input":ir(M),qn(M,q,!0);break;case"textarea":ir(M),Sa(M);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(M.onclick=po)}M=B,g.updateQueue=M,M!==null&&(g.flags|=4)}else{oe=B.nodeType===9?B:B.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Ao(S)),h==="http://www.w3.org/1999/xhtml"?S==="script"?(h=oe.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof M.is=="string"?h=oe.createElement(S,{is:M.is}):(h=oe.createElement(S),S==="select"&&(oe=h,M.multiple?oe.multiple=!0:M.size&&(oe.size=M.size))):h=oe.createElementNS(h,S),h[Tn]=g,h[_s]=M,cm(h,g,!1,!1),g.stateNode=h;e:{switch(oe=Fe(S,M),S){case"dialog":cn("cancel",h),cn("close",h),B=M;break;case"iframe":case"object":case"embed":cn("load",h),B=M;break;case"video":case"audio":for(B=0;B<Yl.length;B++)cn(Yl[B],h);B=M;break;case"source":cn("error",h),B=M;break;case"img":case"image":case"link":cn("error",h),cn("load",h),B=M;break;case"details":cn("toggle",h),B=M;break;case"input":qr(h,M),B=rr(h,M),cn("invalid",h);break;case"option":B=M;break;case"select":h._wrapperState={wasMultiple:!!M.multiple},B=ut({},M,{value:void 0}),cn("invalid",h);break;case"textarea":oa(h,M),B=ni(h,M),cn("invalid",h);break;default:B=M}Xe(S,B),Pe=B;for(q in Pe)if(Pe.hasOwnProperty(q)){var De=Pe[q];q==="style"?Ce(h,De):q==="dangerouslySetInnerHTML"?(De=De?De.__html:void 0,De!=null&&ze(h,De)):q==="children"?typeof De=="string"?(S!=="textarea"||De!=="")&&ie(h,De):typeof De=="number"&&ie(h,""+De):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(u.hasOwnProperty(q)?De!=null&&q==="onScroll"&&cn("scroll",h):De!=null&&te(h,q,De,oe))}switch(S){case"input":ir(h),qn(h,M,!1);break;case"textarea":ir(h),Sa(h);break;case"option":M.value!=null&&h.setAttribute("value",""+tr(M.value));break;case"select":h.multiple=!!M.multiple,q=M.value,q!=null?On(h,!!M.multiple,q,!1):M.defaultValue!=null&&On(h,!!M.multiple,M.defaultValue,!0);break;default:typeof B.onClick=="function"&&(h.onclick=po)}switch(S){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return si(g),null;case 6:if(h&&g.stateNode!=null)hm(h,g,h.memoizedProps,M);else{if(typeof M!="string"&&g.stateNode===null)throw Error(i(166));if(S=r(_.current),r(ma.current),su(g)){if(M=g.stateNode,S=g.memoizedProps,M[Tn]=g,(q=M.nodeValue!==S)&&(h=Yi,h!==null))switch(h.tag){case 3:rc(M.nodeValue,S,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&rc(M.nodeValue,S,(h.mode&1)!==0)}q&&(g.flags|=4)}else M=(S.nodeType===9?S:S.ownerDocument).createTextNode(M),M[Tn]=g,g.stateNode=M}return si(g),null;case 13:if(jr(T),M=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(yn&&zi!==null&&(g.mode&1)!==0&&(g.flags&128)===0)lu(),da(),g.flags|=98560,q=!1;else if(q=su(g),M!==null&&M.dehydrated!==null){if(h===null){if(!q)throw Error(i(318));if(q=g.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(i(317));q[Tn]=g}else da(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;si(g),q=!1}else ka!==null&&(md(ka),ka=null),q=!0;if(!q)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=S,g):(M=M!==null,M!==(h!==null&&h.memoizedState!==null)&&M&&(g.child.flags|=8192,(g.mode&1)!==0&&(h===null||(T.current&1)!==0?ri===0&&(ri=3):Af())),g.updateQueue!==null&&(g.flags|=4),si(g),null);case 4:return f(),um(h,g),h===null&&vs(g.stateNode.containerInfo),si(g),null;case 10:return cu(g.type._context),si(g),null;case 17:return yi(g.type)&&ol(),si(g),null;case 19:if(jr(T),q=g.memoizedState,q===null)return si(g),null;if(M=(g.flags&128)!==0,oe=q.rendering,oe===null)if(M)pu(q,!1);else{if(ri!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(oe=O(h),oe!==null){for(g.flags|=128,pu(q,!1),M=oe.updateQueue,M!==null&&(g.updateQueue=M,g.flags|=4),g.subtreeFlags=0,M=S,S=g.child;S!==null;)q=S,h=M,q.flags&=14680066,oe=q.alternate,oe===null?(q.childLanes=0,q.lanes=h,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=oe.childLanes,q.lanes=oe.lanes,q.child=oe.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=oe.memoizedProps,q.memoizedState=oe.memoizedState,q.updateQueue=oe.updateQueue,q.type=oe.type,h=oe.dependencies,q.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),S=S.sibling;return Ir(T,T.current&1|2),g.child}h=h.sibling}q.tail!==null&&wr()>ph&&(g.flags|=128,M=!0,pu(q,!1),g.lanes=4194304)}else{if(!M)if(h=O(oe),h!==null){if(g.flags|=128,M=!0,S=h.updateQueue,S!==null&&(g.updateQueue=S,g.flags|=4),pu(q,!0),q.tail===null&&q.tailMode==="hidden"&&!oe.alternate&&!yn)return si(g),null}else 2*wr()-q.renderingStartTime>ph&&S!==1073741824&&(g.flags|=128,M=!0,pu(q,!1),g.lanes=4194304);q.isBackwards?(oe.sibling=g.child,g.child=oe):(S=q.last,S!==null?S.sibling=oe:g.child=oe,q.last=oe)}return q.tail!==null?(g=q.tail,q.rendering=g,q.tail=g.sibling,q.renderingStartTime=wr(),g.sibling=null,S=T.current,Ir(T,M?S&1|2:S&1),g):(si(g),null);case 22:case 23:return Tf(),M=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==M&&(g.flags|=8192),M&&(g.mode&1)!==0?(Da&1073741824)!==0&&(si(g),g.subtreeFlags&6&&(g.flags|=8192)):si(g),null;case 24:return null;case 25:return null}throw Error(i(156,g.tag))}function Xg(h,g){switch(au(g),g.tag){case 1:return yi(g.type)&&ol(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return f(),jr(Ii),jr(oi),L(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 5:return b(g),null;case 13:if(jr(T),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(i(340));da()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return jr(T),null;case 4:return f(),null;case 10:return cu(g.type._context),null;case 22:case 23:return Tf(),null;case 24:return null;default:return null}}var uh=!1,ea=!1,Yg=typeof WeakSet=="function"?WeakSet:Set,qt=null;function hh(h,g){var S=h.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(M){Fn(h,g,M)}else S.current=null}function _f(h,g,S){try{S()}catch(M){Fn(h,g,M)}}var Jg=!1;function dm(h,g){if(Qc=gi,h=ed(),Kl(h)){if("selectionStart"in h)var S={start:h.selectionStart,end:h.selectionEnd};else e:{S=(S=h.ownerDocument)&&S.defaultView||window;var M=S.getSelection&&S.getSelection();if(M&&M.rangeCount!==0){S=M.anchorNode;var B=M.anchorOffset,q=M.focusNode;M=M.focusOffset;try{S.nodeType,q.nodeType}catch{S=null;break e}var oe=0,Pe=-1,De=-1,it=0,bt=0,Tt=h,xt=null;t:for(;;){for(var Nt;Tt!==S||B!==0&&Tt.nodeType!==3||(Pe=oe+B),Tt!==q||M!==0&&Tt.nodeType!==3||(De=oe+M),Tt.nodeType===3&&(oe+=Tt.nodeValue.length),(Nt=Tt.firstChild)!==null;)xt=Tt,Tt=Nt;for(;;){if(Tt===h)break t;if(xt===S&&++it===B&&(Pe=oe),xt===q&&++bt===M&&(De=oe),(Nt=Tt.nextSibling)!==null)break;Tt=xt,xt=Tt.parentNode}Tt=Nt}S=Pe===-1||De===-1?null:{start:Pe,end:De}}else S=null}S=S||{start:0,end:0}}else S=null;for(el={focusedElem:h,selectionRange:S},gi=!1,qt=g;qt!==null;)if(g=qt,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,qt=h;else for(;qt!==null;){g=qt;try{var Zt=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Zt!==null){var Kt=Zt.memoizedProps,Zn=Zt.memoizedState,Je=g.stateNode,Be=Je.getSnapshotBeforeUpdate(g.elementType===g.type?Kt:Li(g.type,Kt),Zn);Je.__reactInternalSnapshotBeforeUpdate=Be}break;case 3:var Qe=g.stateNode.containerInfo;Qe.nodeType===1?Qe.textContent="":Qe.nodeType===9&&Qe.documentElement&&Qe.removeChild(Qe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(kt){Fn(g,g.return,kt)}if(h=g.sibling,h!==null){h.return=g.return,qt=h;break}qt=g.return}return Zt=Jg,Jg=!1,Zt}function dh(h,g,S){var M=g.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var B=M=M.next;do{if((B.tag&h)===h){var q=B.destroy;B.destroy=void 0,q!==void 0&&_f(g,S,q)}B=B.next}while(B!==M)}}function cd(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&h)===h){var M=S.create;S.destroy=M()}S=S.next}while(S!==g)}}function fm(h){var g=h.ref;if(g!==null){var S=h.stateNode;switch(h.tag){case 5:h=S;break;default:h=S}typeof g=="function"?g(h):g.current=h}}function Qg(h){var g=h.alternate;g!==null&&(h.alternate=null,Qg(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&(delete g[Tn],delete g[_s],delete g[tu],delete g[tl],delete g[rl])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function ey(h){return h.tag===5||h.tag===3||h.tag===4}function xf(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||ey(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function ud(h,g,S){var M=h.tag;if(M===5||M===6)h=h.stateNode,g?S.nodeType===8?S.parentNode.insertBefore(h,g):S.insertBefore(h,g):(S.nodeType===8?(g=S.parentNode,g.insertBefore(h,S)):(g=S,g.appendChild(h)),S=S._reactRootContainer,S!=null||g.onclick!==null||(g.onclick=po));else if(M!==4&&(h=h.child,h!==null))for(ud(h,g,S),h=h.sibling;h!==null;)ud(h,g,S),h=h.sibling}function bf(h,g,S){var M=h.tag;if(M===5||M===6)h=h.stateNode,g?S.insertBefore(h,g):S.appendChild(h);else if(M!==4&&(h=h.child,h!==null))for(bf(h,g,S),h=h.sibling;h!==null;)bf(h,g,S),h=h.sibling}var Bn=null,va=!1;function mc(h,g,S){for(S=S.child;S!==null;)ty(h,g,S),S=S.sibling}function ty(h,g,S){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(Fa,S)}catch{}switch(S.tag){case 5:ea||hh(S,g);case 6:var M=Bn,B=va;Bn=null,mc(h,g,S),Bn=M,va=B,Bn!==null&&(va?(h=Bn,S=S.stateNode,h.nodeType===8?h.parentNode.removeChild(S):h.removeChild(S)):Bn.removeChild(S.stateNode));break;case 18:Bn!==null&&(va?(h=Bn,S=S.stateNode,h.nodeType===8?Ju(h.parentNode,S):h.nodeType===1&&Ju(h,S),la(h)):Ju(Bn,S.stateNode));break;case 4:M=Bn,B=va,Bn=S.stateNode.containerInfo,va=!0,mc(h,g,S),Bn=M,va=B;break;case 0:case 11:case 14:case 15:if(!ea&&(M=S.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){B=M=M.next;do{var q=B,oe=q.destroy;q=q.tag,oe!==void 0&&((q&2)!==0||(q&4)!==0)&&_f(S,g,oe),B=B.next}while(B!==M)}mc(h,g,S);break;case 1:if(!ea&&(hh(S,g),M=S.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=S.memoizedProps,M.state=S.memoizedState,M.componentWillUnmount()}catch(Pe){Fn(S,g,Pe)}mc(h,g,S);break;case 21:mc(h,g,S);break;case 22:S.mode&1?(ea=(M=ea)||S.memoizedState!==null,mc(h,g,S),ea=M):mc(h,g,S);break;default:mc(h,g,S)}}function ry(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var S=h.stateNode;S===null&&(S=h.stateNode=new Yg),g.forEach(function(M){var B=cy.bind(null,h,M);S.has(M)||(S.add(M),M.then(B,B))})}}function qo(h,g){var S=g.deletions;if(S!==null)for(var M=0;M<S.length;M++){var B=S[M];try{var q=h,oe=g,Pe=oe;e:for(;Pe!==null;){switch(Pe.tag){case 5:Bn=Pe.stateNode,va=!1;break e;case 3:Bn=Pe.stateNode.containerInfo,va=!0;break e;case 4:Bn=Pe.stateNode.containerInfo,va=!0;break e}Pe=Pe.return}if(Bn===null)throw Error(i(160));ty(q,oe,B),Bn=null,va=!1;var De=B.alternate;De!==null&&(De.return=null),B.return=null}catch(it){Fn(B,g,it)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)ny(g,h),g=g.sibling}function ny(h,g){var S=h.alternate,M=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(qo(g,h),Cs(h),M&4){try{dh(3,h,h.return),cd(3,h)}catch(Kt){Fn(h,h.return,Kt)}try{dh(5,h,h.return)}catch(Kt){Fn(h,h.return,Kt)}}break;case 1:qo(g,h),Cs(h),M&512&&S!==null&&hh(S,S.return);break;case 5:if(qo(g,h),Cs(h),M&512&&S!==null&&hh(S,S.return),h.flags&32){var B=h.stateNode;try{ie(B,"")}catch(Kt){Fn(h,h.return,Kt)}}if(M&4&&(B=h.stateNode,B!=null)){var q=h.memoizedProps,oe=S!==null?S.memoizedProps:q,Pe=h.type,De=h.updateQueue;if(h.updateQueue=null,De!==null)try{Pe==="input"&&q.type==="radio"&&q.name!=null&&Zr(B,q),Fe(Pe,oe);var it=Fe(Pe,q);for(oe=0;oe<De.length;oe+=2){var bt=De[oe],Tt=De[oe+1];bt==="style"?Ce(B,Tt):bt==="dangerouslySetInnerHTML"?ze(B,Tt):bt==="children"?ie(B,Tt):te(B,bt,Tt,it)}switch(Pe){case"input":vn(B,q);break;case"textarea":Ba(B,q);break;case"select":var xt=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!q.multiple;var Nt=q.value;Nt!=null?On(B,!!q.multiple,Nt,!1):xt!==!!q.multiple&&(q.defaultValue!=null?On(B,!!q.multiple,q.defaultValue,!0):On(B,!!q.multiple,q.multiple?[]:"",!1))}B[_s]=q}catch(Kt){Fn(h,h.return,Kt)}}break;case 6:if(qo(g,h),Cs(h),M&4){if(h.stateNode===null)throw Error(i(162));B=h.stateNode,q=h.memoizedProps;try{B.nodeValue=q}catch(Kt){Fn(h,h.return,Kt)}}break;case 3:if(qo(g,h),Cs(h),M&4&&S!==null&&S.memoizedState.isDehydrated)try{la(g.containerInfo)}catch(Kt){Fn(h,h.return,Kt)}break;case 4:qo(g,h),Cs(h);break;case 13:qo(g,h),Cs(h),B=h.child,B.flags&8192&&(q=B.memoizedState!==null,B.stateNode.isHidden=q,!q||B.alternate!==null&&B.alternate.memoizedState!==null||(yl=wr())),M&4&&ry(h);break;case 22:if(bt=S!==null&&S.memoizedState!==null,h.mode&1?(ea=(it=ea)||bt,qo(g,h),ea=it):qo(g,h),Cs(h),M&8192){if(it=h.memoizedState!==null,(h.stateNode.isHidden=it)&&!bt&&(h.mode&1)!==0)for(qt=h,bt=h.child;bt!==null;){for(Tt=qt=bt;qt!==null;){switch(xt=qt,Nt=xt.child,xt.tag){case 0:case 11:case 14:case 15:dh(4,xt,xt.return);break;case 1:hh(xt,xt.return);var Zt=xt.stateNode;if(typeof Zt.componentWillUnmount=="function"){M=xt,S=xt.return;try{g=M,Zt.props=g.memoizedProps,Zt.state=g.memoizedState,Zt.componentWillUnmount()}catch(Kt){Fn(M,S,Kt)}}break;case 5:hh(xt,xt.return);break;case 22:if(xt.memoizedState!==null){pm(Tt);continue}}Nt!==null?(Nt.return=xt,qt=Nt):pm(Tt)}bt=bt.sibling}e:for(bt=null,Tt=h;;){if(Tt.tag===5){if(bt===null){bt=Tt;try{B=Tt.stateNode,it?(q=B.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(Pe=Tt.stateNode,De=Tt.memoizedProps.style,oe=De!=null&&De.hasOwnProperty("display")?De.display:null,Pe.style.display=we("display",oe))}catch(Kt){Fn(h,h.return,Kt)}}}else if(Tt.tag===6){if(bt===null)try{Tt.stateNode.nodeValue=it?"":Tt.memoizedProps}catch(Kt){Fn(h,h.return,Kt)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===h)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===h)break e;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===h)break e;bt===Tt&&(bt=null),Tt=Tt.return}bt===Tt&&(bt=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}break;case 19:qo(g,h),Cs(h),M&4&&ry(h);break;case 21:break;default:qo(g,h),Cs(h)}}function Cs(h){var g=h.flags;if(g&2){try{e:{for(var S=h.return;S!==null;){if(ey(S)){var M=S;break e}S=S.return}throw Error(i(160))}switch(M.tag){case 5:var B=M.stateNode;M.flags&32&&(ie(B,""),M.flags&=-33);var q=xf(h);bf(h,q,B);break;case 3:case 4:var oe=M.stateNode.containerInfo,Pe=xf(h);ud(h,Pe,oe);break;default:throw Error(i(161))}}catch(De){Fn(h,h.return,De)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function O_(h,g,S){qt=h,wf(h)}function wf(h,g,S){for(var M=(h.mode&1)!==0;qt!==null;){var B=qt,q=B.child;if(B.tag===22&&M){var oe=B.memoizedState!==null||uh;if(!oe){var Pe=B.alternate,De=Pe!==null&&Pe.memoizedState!==null||ea;Pe=uh;var it=ea;if(uh=oe,(ea=De)&&!it)for(qt=B;qt!==null;)oe=qt,De=oe.child,oe.tag===22&&oe.memoizedState!==null?fh(B):De!==null?(De.return=oe,qt=De):fh(B);for(;q!==null;)qt=q,wf(q),q=q.sibling;qt=B,uh=Pe,ea=it}iy(h)}else(B.subtreeFlags&8772)!==0&&q!==null?(q.return=B,qt=q):iy(h)}}function iy(h){for(;qt!==null;){var g=qt;if((g.flags&8772)!==0){var S=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:ea||cd(5,g);break;case 1:var M=g.stateNode;if(g.flags&4&&!ea)if(S===null)M.componentDidMount();else{var B=g.elementType===g.type?S.memoizedProps:Li(g.type,S.memoizedProps);M.componentDidUpdate(B,S.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var q=g.updateQueue;q!==null&&oh(g,q,M);break;case 3:var oe=g.updateQueue;if(oe!==null){if(S=null,g.child!==null)switch(g.child.tag){case 5:S=g.child.stateNode;break;case 1:S=g.child.stateNode}oh(g,oe,S)}break;case 5:var Pe=g.stateNode;if(S===null&&g.flags&4){S=Pe;var De=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":De.autoFocus&&S.focus();break;case"img":De.src&&(S.src=De.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var it=g.alternate;if(it!==null){var bt=it.memoizedState;if(bt!==null){var Tt=bt.dehydrated;Tt!==null&&la(Tt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}ea||g.flags&512&&fm(g)}catch(xt){Fn(g,g.return,xt)}}if(g===h){qt=null;break}if(S=g.sibling,S!==null){S.return=g.return,qt=S;break}qt=g.return}}function pm(h){for(;qt!==null;){var g=qt;if(g===h){qt=null;break}var S=g.sibling;if(S!==null){S.return=g.return,qt=S;break}qt=g.return}}function fh(h){for(;qt!==null;){var g=qt;try{switch(g.tag){case 0:case 11:case 15:var S=g.return;try{cd(4,g)}catch(De){Fn(g,S,De)}break;case 1:var M=g.stateNode;if(typeof M.componentDidMount=="function"){var B=g.return;try{M.componentDidMount()}catch(De){Fn(g,B,De)}}var q=g.return;try{fm(g)}catch(De){Fn(g,q,De)}break;case 5:var oe=g.return;try{fm(g)}catch(De){Fn(g,oe,De)}}}catch(De){Fn(g,g.return,De)}if(g===h){qt=null;break}var Pe=g.sibling;if(Pe!==null){Pe.return=g.return,qt=Pe;break}qt=g.return}}var R_=Math.ceil,_n=le.ReactCurrentDispatcher,gc=le.ReactCurrentOwner,Ya=le.ReactCurrentBatchConfig,Br=0,ti=null,Cn=null,wi=0,Da=0,Es=ua(0),ri=0,Ms=null,ks=0,gl=0,mu=0,hd=null,_a=null,yl=0,ph=1/0,Is=null,yc=!1,dd=null,vl=null,fd=!1,vc=null,Sf=0,pd=0,mm=null,Pf=-1,_l=0;function xa(){return(Br&6)!==0?wr():Pf!==-1?Pf:Pf=wr()}function _c(h){return(h.mode&1)===0?1:(Br&2)!==0&&wi!==0?wi&-wi:tm.transition!==null?(_l===0&&(_l=Us()),_l):(h=$r,h!==0||(h=window.event,h=h===void 0?16:Bl(h.type)),h)}function xo(h,g,S,M){if(50<pd)throw pd=0,mm=null,Error(i(185));Vs(h,S,M),((Br&2)===0||h!==ti)&&(h===ti&&((Br&2)===0&&(gl|=S),ri===4&&Os(h,wi)),za(h,M),S===1&&Br===0&&(g.mode&1)===0&&(ph=wr()+500,Ki&&ws()))}function za(h,g){var S=h.callbackNode;Dh(h,g);var M=zl(h,h===ti?wi:0);if(M===0)S!==null&&Ic(S),h.callbackNode=null,h.callbackPriority=0;else if(g=M&-M,h.callbackPriority!==g){if(S!=null&&Ic(S),g===1)h.tag===0?em(ay.bind(null,h)):ic(ay.bind(null,h)),Yu(function(){(Br&6)===0&&ws()}),S=null;else{switch(Ta(M)){case 1:S=mi;break;case 4:S=Xr;break;case 16:S=Oc;break;case 536870912:S=Bu;break;default:S=Oc}S=hy(S,gm.bind(null,h))}h.callbackPriority=g,h.callbackNode=S}}function gm(h,g){if(Pf=-1,_l=0,(Br&6)!==0)throw Error(i(327));var S=h.callbackNode;if(yu()&&h.callbackNode!==S)return null;var M=zl(h,h===ti?wi:0);if(M===0)return null;if((M&30)!==0||(M&h.expiredLanes)!==0||g)g=Cf(h,M);else{g=M;var B=Br;Br|=2;var q=mh();(ti!==h||wi!==g)&&(Is=null,ph=wr()+500,gu(h,g));do try{z_();break}catch(Pe){oy(h,Pe)}while(!0);ac(),_n.current=q,Br=B,Cn!==null?g=0:(ti=null,wi=0,g=ri)}if(g!==0){if(g===2&&(B=zc(h),B!==0&&(M=B,g=ym(h,B))),g===1)throw S=Ms,gu(h,0),Os(h,M),za(h,wr()),S;if(g===6)Os(h,M);else{if(B=h.current.alternate,(M&30)===0&&!gd(B)&&(g=Cf(h,M),g===2&&(q=zc(h),q!==0&&(M=q,g=ym(h,q))),g===1))throw S=Ms,gu(h,0),Os(h,M),za(h,wr()),S;switch(h.finishedWork=B,h.finishedLanes=M,g){case 0:case 1:throw Error(i(345));case 2:bc(h,_a,Is);break;case 3:if(Os(h,M),(M&130023424)===M&&(g=yl+500-wr(),10<g)){if(zl(h,0)!==0)break;if(B=h.suspendedLanes,(B&M)!==M){xa(),h.pingedLanes|=h.suspendedLanes&B;break}h.timeoutHandle=eu(bc.bind(null,h,_a,Is),g);break}bc(h,_a,Is);break;case 4:if(Os(h,M),(M&4194240)===M)break;for(g=h.eventTimes,B=-1;0<M;){var oe=31-Pa(M);q=1<<oe,oe=g[oe],oe>B&&(B=oe),M&=~q}if(M=B,M=wr()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*R_(M/1960))-M,10<M){h.timeoutHandle=eu(bc.bind(null,h,_a,Is),M);break}bc(h,_a,Is);break;case 5:bc(h,_a,Is);break;default:throw Error(i(329))}}}return za(h,wr()),h.callbackNode===S?gm.bind(null,h):null}function ym(h,g){var S=hd;return h.current.memoizedState.isDehydrated&&(gu(h,g).flags|=256),h=Cf(h,g),h!==2&&(g=_a,_a=S,g!==null&&md(g)),h}function md(h){_a===null?_a=h:_a.push.apply(_a,h)}function gd(h){for(var g=h;;){if(g.flags&16384){var S=g.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var M=0;M<S.length;M++){var B=S[M],q=B.getSnapshot;B=B.value;try{if(!Za(q(),B))return!1}catch{return!1}}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Os(h,g){for(g&=~mu,g&=~gl,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var S=31-Pa(g),M=1<<S;h[S]=-1,g&=~M}}function ay(h){if((Br&6)!==0)throw Error(i(327));yu();var g=zl(h,0);if((g&1)===0)return za(h,wr()),null;var S=Cf(h,g);if(h.tag!==0&&S===2){var M=zc(h);M!==0&&(g=M,S=ym(h,M))}if(S===1)throw S=Ms,gu(h,0),Os(h,g),za(h,wr()),S;if(S===6)throw Error(i(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,bc(h,_a,Is),za(h,wr()),null}function vm(h,g){var S=Br;Br|=1;try{return h(g)}finally{Br=S,Br===0&&(ph=wr()+500,Ki&&ws())}}function xc(h){vc!==null&&vc.tag===0&&(Br&6)===0&&yu();var g=Br;Br|=1;var S=Ya.transition,M=$r;try{if(Ya.transition=null,$r=1,h)return h()}finally{$r=M,Ya.transition=S,Br=g,(Br&6)===0&&ws()}}function Tf(){Da=Es.current,jr(Es)}function gu(h,g){h.finishedWork=null,h.finishedLanes=0;var S=h.timeoutHandle;if(S!==-1&&(h.timeoutHandle=-1,lf(S)),Cn!==null)for(S=Cn.return;S!==null;){var M=S;switch(au(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&ol();break;case 3:f(),jr(Ii),jr(oi),L();break;case 5:b(M);break;case 4:f();break;case 13:jr(T);break;case 19:jr(T);break;case 10:cu(M.type._context);break;case 22:case 23:Tf()}S=S.return}if(ti=h,Cn=h=bo(h.current,null),wi=Da=g,ri=0,Ms=null,mu=gl=ks=0,_a=hd=null,di!==null){for(g=0;g<di.length;g++)if(S=di[g],M=S.interleaved,M!==null){S.interleaved=null;var B=M.next,q=S.pending;if(q!==null){var oe=q.next;q.next=B,M.next=oe}S.pending=M}di=null}return h}function oy(h,g){do{var S=Cn;try{if(ac(),$.current=bi,pe){for(var M=K.memoizedState;M!==null;){var B=M.queue;B!==null&&(B.pending=null),M=M.next}pe=!1}if(W=0,ue=ne=K=null,me=!1,ye=0,gc.current=null,S===null||S.return===null){ri=1,Ms=g,Cn=null;break}e:{var q=h,oe=S.return,Pe=S,De=g;if(g=wi,Pe.flags|=32768,De!==null&&typeof De=="object"&&typeof De.then=="function"){var it=De,bt=Pe,Tt=bt.tag;if((bt.mode&1)===0&&(Tt===0||Tt===11||Tt===15)){var xt=bt.alternate;xt?(bt.updateQueue=xt.updateQueue,bt.memoizedState=xt.memoizedState,bt.lanes=xt.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var Nt=Vg(oe);if(Nt!==null){Nt.flags&=-257,uf(Nt,oe,Pe,q,g),Nt.mode&1&&nm(q,it,g),g=Nt,De=it;var Zt=g.updateQueue;if(Zt===null){var Kt=new Set;Kt.add(De),g.updateQueue=Kt}else Zt.add(De);break e}else{if((g&1)===0){nm(q,it,g),Af();break e}De=Error(i(426))}}else if(yn&&Pe.mode&1){var Zn=Vg(oe);if(Zn!==null){(Zn.flags&65536)===0&&(Zn.flags|=256),uf(Zn,oe,Pe,q,g),Gr(pl(De,Pe));break e}}q=De=pl(De,Pe),ri!==4&&(ri=2),hd===null?hd=[q]:hd.push(q),q=oe;do{switch(q.tag){case 3:q.flags|=65536,g&=-g,q.lanes|=g;var Je=fc(q,De,g);uu(q,Je);break e;case 1:Pe=De;var Be=q.type,Qe=q.stateNode;if((q.flags&128)===0&&(typeof Be.getDerivedStateFromError=="function"||Qe!==null&&typeof Qe.componentDidCatch=="function"&&(vl===null||!vl.has(Qe)))){q.flags|=65536,g&=-g,q.lanes|=g;var kt=pc(q,Pe,g);uu(q,kt);break e}}q=q.return}while(q!==null)}ly(S)}catch(Xt){g=Xt,Cn===S&&S!==null&&(Cn=S=S.return);continue}break}while(!0)}function mh(){var h=_n.current;return _n.current=bi,h===null?bi:h}function Af(){(ri===0||ri===3||ri===2)&&(ri=4),ti===null||(ks&268435455)===0&&(gl&268435455)===0||Os(ti,wi)}function Cf(h,g){var S=Br;Br|=2;var M=mh();(ti!==h||wi!==g)&&(Is=null,gu(h,g));do try{D_();break}catch(B){oy(h,B)}while(!0);if(ac(),Br=S,_n.current=M,Cn!==null)throw Error(i(261));return ti=null,wi=0,ri}function D_(){for(;Cn!==null;)sy(Cn)}function z_(){for(;Cn!==null&&!so();)sy(Cn)}function sy(h){var g=uy(h.alternate,h,Da);h.memoizedProps=h.pendingProps,g===null?ly(h):Cn=g,gc.current=null}function ly(h){var g=h;do{var S=g.alternate;if(h=g.return,(g.flags&32768)===0){if(S=ya(S,g,Da),S!==null){Cn=S;return}}else{if(S=Xg(S,g),S!==null){S.flags&=32767,Cn=S;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{ri=6,Cn=null;return}}if(g=g.sibling,g!==null){Cn=g;return}Cn=g=h}while(g!==null);ri===0&&(ri=5)}function bc(h,g,S){var M=$r,B=Ya.transition;try{Ya.transition=null,$r=1,_m(h,g,S,M)}finally{Ya.transition=B,$r=M}return null}function _m(h,g,S,M){do yu();while(vc!==null);if((Br&6)!==0)throw Error(i(327));S=h.finishedWork;var B=h.finishedLanes;if(S===null)return null;if(h.finishedWork=null,h.finishedLanes=0,S===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0;var q=S.lanes|S.childLanes;if(Gp(h,q),h===ti&&(Cn=ti=null,wi=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||fd||(fd=!0,hy(Oc,function(){return yu(),null})),q=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||q){q=Ya.transition,Ya.transition=null;var oe=$r;$r=1;var Pe=Br;Br|=4,gc.current=null,dm(h,S),ny(S,h),Ku(el),gi=!!Qc,el=Qc=null,h.current=S,O_(S),Rl(),Br=Pe,$r=oe,Ya.transition=q}else h.current=S;if(fd&&(fd=!1,vc=h,Sf=B),q=h.pendingLanes,q===0&&(vl=null),Rh(S.stateNode),za(h,wr()),g!==null)for(M=h.onRecoverableError,S=0;S<g.length;S++)B=g[S],M(B.value,{componentStack:B.stack,digest:B.digest});if(yc)throw yc=!1,h=dd,dd=null,h;return(Sf&1)!==0&&h.tag!==0&&yu(),q=h.pendingLanes,(q&1)!==0?h===mm?pd++:(pd=0,mm=h):pd=0,ws(),null}function yu(){if(vc!==null){var h=Ta(Sf),g=Ya.transition,S=$r;try{if(Ya.transition=null,$r=16>h?16:h,vc===null)var M=!1;else{if(h=vc,vc=null,Sf=0,(Br&6)!==0)throw Error(i(331));var B=Br;for(Br|=4,qt=h.current;qt!==null;){var q=qt,oe=q.child;if((qt.flags&16)!==0){var Pe=q.deletions;if(Pe!==null){for(var De=0;De<Pe.length;De++){var it=Pe[De];for(qt=it;qt!==null;){var bt=qt;switch(bt.tag){case 0:case 11:case 15:dh(8,bt,q)}var Tt=bt.child;if(Tt!==null)Tt.return=bt,qt=Tt;else for(;qt!==null;){bt=qt;var xt=bt.sibling,Nt=bt.return;if(Qg(bt),bt===it){qt=null;break}if(xt!==null){xt.return=Nt,qt=xt;break}qt=Nt}}}var Zt=q.alternate;if(Zt!==null){var Kt=Zt.child;if(Kt!==null){Zt.child=null;do{var Zn=Kt.sibling;Kt.sibling=null,Kt=Zn}while(Kt!==null)}}qt=q}}if((q.subtreeFlags&2064)!==0&&oe!==null)oe.return=q,qt=oe;else e:for(;qt!==null;){if(q=qt,(q.flags&2048)!==0)switch(q.tag){case 0:case 11:case 15:dh(9,q,q.return)}var Je=q.sibling;if(Je!==null){Je.return=q.return,qt=Je;break e}qt=q.return}}var Be=h.current;for(qt=Be;qt!==null;){oe=qt;var Qe=oe.child;if((oe.subtreeFlags&2064)!==0&&Qe!==null)Qe.return=oe,qt=Qe;else e:for(oe=Be;qt!==null;){if(Pe=qt,(Pe.flags&2048)!==0)try{switch(Pe.tag){case 0:case 11:case 15:cd(9,Pe)}}catch(Xt){Fn(Pe,Pe.return,Xt)}if(Pe===oe){qt=null;break e}var kt=Pe.sibling;if(kt!==null){kt.return=Pe.return,qt=kt;break e}qt=Pe.return}}if(Br=B,ws(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(Fa,h)}catch{}M=!0}return M}finally{$r=S,Ya.transition=g}}return!1}function xm(h,g,S){g=pl(S,g),g=fc(h,g,1),h=Ji(h,g,1),g=xa(),h!==null&&(Vs(h,1,g),za(h,g))}function Fn(h,g,S){if(h.tag===3)xm(h,h,S);else for(;g!==null;){if(g.tag===3){xm(g,h,S);break}else if(g.tag===1){var M=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(vl===null||!vl.has(M))){h=pl(S,h),h=pc(g,h,1),g=Ji(g,h,1),h=xa(),g!==null&&(Vs(g,1,h),za(g,h));break}}g=g.return}}function j_(h,g,S){var M=h.pingCache;M!==null&&M.delete(g),g=xa(),h.pingedLanes|=h.suspendedLanes&S,ti===h&&(wi&S)===S&&(ri===4||ri===3&&(wi&130023424)===wi&&500>wr()-yl?gu(h,0):mu|=S),za(h,g)}function yd(h,g){g===0&&((h.mode&1)===0?g=1:(g=$u,$u<<=1,($u&130023424)===0&&($u=4194304)));var S=xa();h=Ur(h,g),h!==null&&(Vs(h,g,S),za(h,S))}function L_(h){var g=h.memoizedState,S=0;g!==null&&(S=g.retryLane),yd(h,S)}function cy(h,g){var S=0;switch(h.tag){case 13:var M=h.stateNode,B=h.memoizedState;B!==null&&(S=B.retryLane);break;case 19:M=h.stateNode;break;default:throw Error(i(314))}M!==null&&M.delete(g),yd(h,S)}var uy;uy=function(h,g,S){if(h!==null)if(h.memoizedProps!==g.pendingProps||Ii.current)Bi=!0;else{if((h.lanes&S)===0&&(g.flags&128)===0)return Bi=!1,Kg(h,g,S);Bi=(h.flags&131072)!==0}else Bi=!1,yn&&(g.flags&1048576)!==0&&eh(g,Ri,g.index);switch(g.lanes=0,g.tag){case 2:var M=g.type;yf(h,g),h=g.pendingProps;var B=Ka(g,oi.current);jn(g,S),B=ke(null,g,M,h,B,S);var q=xe();return g.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,yi(M)?(q=!0,Oi(g)):q=!1,g.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,sc(g),B.updater=Oa,g.stateNode=B,B._reactInternals=g,_o(g,M,h,S),g=am(null,g,M,!0,q,S)):(g.tag=0,yn&&q&&Ar(g),Qi(null,g,B,S),g=g.child),g;case 16:M=g.elementType;e:{switch(yf(h,g),h=g.pendingProps,B=M._init,M=B(M._payload),g.type=M,B=g.tag=B_(M),h=Li(M,h),B){case 0:g=ff(null,g,M,h,S);break e;case 1:g=du(null,g,M,h,S);break e;case 11:g=Gg(null,g,M,h,S);break e;case 14:g=hf(null,g,M,Li(M.type,h),S);break e}throw Error(i(306,M,""))}return g;case 0:return M=g.type,B=g.pendingProps,B=g.elementType===M?B:Li(M,B),ff(h,g,M,B,S);case 1:return M=g.type,B=g.pendingProps,B=g.elementType===M?B:Li(M,B),du(h,g,M,B,S);case 3:e:{if(fu(g),h===null)throw Error(i(387));M=g.pendingProps,q=g.memoizedState,B=q.element,lc(h,g),Ia(g,M,null,S);var oe=g.memoizedState;if(M=oe.element,q.isDehydrated)if(q={element:M,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},g.updateQueue.baseState=q,g.memoizedState=q,g.flags&256){B=pl(Error(i(423)),g),g=ld(h,g,M,S,B);break e}else if(M!==B){B=pl(Error(i(424)),g),g=ld(h,g,M,S,B);break e}else for(zi=mo(g.stateNode.containerInfo.firstChild),Yi=g,yn=!0,ka=null,S=cf(g,null,M,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(da(),M===B){g=ml(h,g,S);break e}Qi(h,g,M,S)}g=g.child}return g;case 5:return v(g),h===null&&rh(g),M=g.type,B=g.pendingProps,q=h!==null?h.memoizedProps:null,oe=B.children,nc(M,B)?oe=null:q!==null&&nc(M,q)&&(g.flags|=32),im(h,g),Qi(h,g,oe,S),g.child;case 6:return h===null&&rh(g),null;case 13:return Zg(h,g,S);case 4:return c(g,g.stateNode.containerInfo),M=g.pendingProps,h===null?g.child=cl(g,null,M,S):Qi(h,g,M,S),g.child;case 11:return M=g.type,B=g.pendingProps,B=g.elementType===M?B:Li(M,B),Gg(h,g,M,B,S);case 7:return Qi(h,g,g.pendingProps,S),g.child;case 8:return Qi(h,g,g.pendingProps.children,S),g.child;case 12:return Qi(h,g,g.pendingProps.children,S),g.child;case 10:e:{if(M=g.type._context,B=g.pendingProps,q=g.memoizedProps,oe=B.value,Ir(fa,M._currentValue),M._currentValue=oe,q!==null)if(Za(q.value,oe)){if(q.children===B.children&&!Ii.current){g=ml(h,g,S);break e}}else for(q=g.child,q!==null&&(q.return=g);q!==null;){var Pe=q.dependencies;if(Pe!==null){oe=q.child;for(var De=Pe.firstContext;De!==null;){if(De.context===M){if(q.tag===1){De=ji(-1,S&-S),De.tag=2;var it=q.updateQueue;if(it!==null){it=it.shared;var bt=it.pending;bt===null?De.next=De:(De.next=bt.next,bt.next=De),it.pending=De}}q.lanes|=S,De=q.alternate,De!==null&&(De.lanes|=S),oc(q.return,S,g),Pe.lanes|=S;break}De=De.next}}else if(q.tag===10)oe=q.type===g.type?null:q.child;else if(q.tag===18){if(oe=q.return,oe===null)throw Error(i(341));oe.lanes|=S,Pe=oe.alternate,Pe!==null&&(Pe.lanes|=S),oc(oe,S,g),oe=q.sibling}else oe=q.child;if(oe!==null)oe.return=q;else for(oe=q;oe!==null;){if(oe===g){oe=null;break}if(q=oe.sibling,q!==null){q.return=oe.return,oe=q;break}oe=oe.return}q=oe}Qi(h,g,B.children,S),g=g.child}return g;case 9:return B=g.type,M=g.pendingProps.children,jn(g,S),B=pa(B),M=M(B),g.flags|=1,Qi(h,g,M,S),g.child;case 14:return M=g.type,B=Li(M,g.pendingProps),B=Li(M.type,B),hf(h,g,M,B,S);case 15:return Wg(h,g,g.type,g.pendingProps,S);case 17:return M=g.type,B=g.pendingProps,B=g.elementType===M?B:Li(M,B),yf(h,g),g.tag=1,yi(M)?(h=!0,Oi(g)):h=!1,jn(g,S),Ni(g,M,B),_o(g,M,B,S),am(null,g,M,!0,h,S);case 19:return lm(h,g,S);case 22:return df(h,g,S)}throw Error(i(156,g.tag))};function hy(h,g){return Eo(h,g)}function N_(h,g,S,M){this.tag=h,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(h,g,S,M){return new N_(h,g,S,M)}function bm(h){return h=h.prototype,!(!h||!h.isReactComponent)}function B_(h){if(typeof h=="function")return bm(h)?1:0;if(h!=null){if(h=h.$$typeof,h===Ve)return 11;if(h===at)return 14}return 2}function bo(h,g){var S=h.alternate;return S===null?(S=Ja(h.tag,g,h.key,h.mode),S.elementType=h.elementType,S.type=h.type,S.stateNode=h.stateNode,S.alternate=h,h.alternate=S):(S.pendingProps=g,S.type=h.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=h.flags&14680064,S.childLanes=h.childLanes,S.lanes=h.lanes,S.child=h.child,S.memoizedProps=h.memoizedProps,S.memoizedState=h.memoizedState,S.updateQueue=h.updateQueue,g=h.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=h.sibling,S.index=h.index,S.ref=h.ref,S}function $n(h,g,S,M,B,q){var oe=2;if(M=h,typeof h=="function")bm(h)&&(oe=1);else if(typeof h=="string")oe=5;else e:switch(h){case de:return xl(S.children,B,q,g);case ge:oe=8,B|=8;break;case Ie:return h=Ja(12,S,g,B|2),h.elementType=Ie,h.lanes=q,h;case Ke:return h=Ja(13,S,g,B),h.elementType=Ke,h.lanes=q,h;case ot:return h=Ja(19,S,g,B),h.elementType=ot,h.lanes=q,h;case lt:return vd(S,B,q,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case We:oe=10;break e;case Oe:oe=9;break e;case Ve:oe=11;break e;case at:oe=14;break e;case st:oe=16,M=null;break e}throw Error(i(130,h==null?h:typeof h,""))}return g=Ja(oe,S,g,B),g.elementType=h,g.type=M,g.lanes=q,g}function xl(h,g,S,M){return h=Ja(7,h,M,g),h.lanes=S,h}function vd(h,g,S,M){return h=Ja(22,h,M,g),h.elementType=lt,h.lanes=S,h.stateNode={isHidden:!1},h}function Ef(h,g,S){return h=Ja(6,h,null,g),h.lanes=S,h}function _d(h,g,S){return g=Ja(4,h.children!==null?h.children:[],h.key,g),g.lanes=S,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function gh(h,g,S,M,B){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jc(0),this.expirationTimes=jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jc(0),this.identifierPrefix=M,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function Mf(h,g,S,M,B,q,oe,Pe,De){return h=new gh(h,g,S,Pe,De),g===1?(g=1,q===!0&&(g|=8)):g=0,q=Ja(3,null,null,g),h.current=q,q.stateNode=h,q.memoizedState={element:M,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},sc(q),h}function F_(h,g,S){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:M==null?null:""+M,children:h,containerInfo:g,implementation:S}}function dy(h){if(!h)return ha;h=h._reactInternals;e:{if(cr(h)!==h||h.tag!==1)throw Error(i(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(yi(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(i(171))}if(h.tag===1){var S=h.type;if(yi(S))return iu(h,S,g)}return g}function fy(h,g,S,M,B,q,oe,Pe,De){return h=Mf(S,M,!0,h,B,q,oe,Pe,De),h.context=dy(null),S=h.current,M=xa(),B=_c(S),q=ji(M,B),q.callback=g??null,Ji(S,q,B),h.current.lanes=B,Vs(h,B,M),za(h,M),h}function kf(h,g,S,M){var B=g.current,q=xa(),oe=_c(B);return S=dy(S),g.context===null?g.context=S:g.pendingContext=S,g=ji(q,oe),g.payload={element:h},M=M===void 0?null:M,M!==null&&(g.callback=M),h=Ji(B,g,oe),h!==null&&(xo(h,B,oe,q),cc(h,B,oe)),oe}function If(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function py(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var S=h.retryLane;h.retryLane=S!==0&&S<g?S:g}}function wm(h,g){py(h,g),(h=h.alternate)&&py(h,g)}function $_(){return null}var my=typeof reportError=="function"?reportError:function(h){console.error(h)};function Sm(h){this._internalRoot=h}Of.prototype.render=Sm.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(i(409));kf(h,g,null,null)},Of.prototype.unmount=Sm.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;xc(function(){kf(null,h,null,null)}),g[Ea]=null}};function Of(h){this._internalRoot=h}Of.prototype.unstable_scheduleHydration=function(h){if(h){var g=lo();h={blockedOn:null,target:h,priority:g};for(var S=0;S<on.length&&g!==0&&g<on[S].priority;S++);on.splice(S,0,h),S===0&&hi(h)}};function Pm(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function xd(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function Rf(){}function gy(h,g,S,M,B){if(B){if(typeof M=="function"){var q=M;M=function(){var it=If(oe);q.call(it)}}var oe=fy(g,M,h,0,null,!1,!1,"",Rf);return h._reactRootContainer=oe,h[Ea]=oe.current,vs(h.nodeType===8?h.parentNode:h),xc(),oe}for(;B=h.lastChild;)h.removeChild(B);if(typeof M=="function"){var Pe=M;M=function(){var it=If(De);Pe.call(it)}}var De=Mf(h,0,!1,null,null,!1,!1,"",Rf);return h._reactRootContainer=De,h[Ea]=De.current,vs(h.nodeType===8?h.parentNode:h),xc(function(){kf(g,De,S,M)}),De}function Go(h,g,S,M,B){var q=S._reactRootContainer;if(q){var oe=q;if(typeof B=="function"){var Pe=B;B=function(){var De=If(oe);Pe.call(De)}}kf(g,oe,h,B)}else oe=gy(S,g,h,B,M);return If(oe)}Sr=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var S=Dc(g.pendingLanes);S!==0&&(os(g,S|1),za(g,wr()),(Br&6)===0&&(ph=wr()+500,ws()))}break;case 13:xc(function(){var M=Ur(h,1);if(M!==null){var B=xa();xo(M,h,1,B)}}),wm(h,1)}},Mo=function(h){if(h.tag===13){var g=Ur(h,134217728);if(g!==null){var S=xa();xo(g,h,134217728,S)}wm(h,134217728)}},ko=function(h){if(h.tag===13){var g=_c(h),S=Ur(h,g);if(S!==null){var M=xa();xo(S,h,g,M)}wm(h,g)}},lo=function(){return $r},ss=function(h,g){var S=$r;try{return $r=h,g()}finally{$r=S}},ct=function(h,g,S){switch(g){case"input":if(vn(h,S),g=S.name,S.type==="radio"&&g!=null){for(S=h;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<S.length;g++){var M=S[g];if(M!==h&&M.form===h.form){var B=ru(M);if(!B)throw Error(i(90));pt(M),vn(M,B)}}}break;case"textarea":Ba(h,S);break;case"select":g=S.value,g!=null&&On(h,!!S.multiple,g,!1)}},pr=vm,en=xc;var bd={usingClientEntryPoint:!1,Events:[nl,il,ru,Cr,Ut,vm]},Rs={findFiberByHostInstance:Ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Df={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:le.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=gr(h),h===null?null:h.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||$_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{Fa=vu.inject(Df),ui=vu}catch{}}return wo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bd,wo.createPortal=function(h,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pm(g))throw Error(i(200));return F_(h,g,null,S)},wo.createRoot=function(h,g){if(!Pm(h))throw Error(i(299));var S=!1,M="",B=my;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(M=g.identifierPrefix),g.onRecoverableError!==void 0&&(B=g.onRecoverableError)),g=Mf(h,1,!1,null,null,S,!1,M,B),h[Ea]=g.current,vs(h.nodeType===8?h.parentNode:h),new Sm(g)},wo.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=gr(g),h=h===null?null:h.stateNode,h},wo.flushSync=function(h){return xc(h)},wo.hydrate=function(h,g,S){if(!xd(g))throw Error(i(200));return Go(null,h,g,!0,S)},wo.hydrateRoot=function(h,g,S){if(!Pm(h))throw Error(i(405));var M=S!=null&&S.hydratedSources||null,B=!1,q="",oe=my;if(S!=null&&(S.unstable_strictMode===!0&&(B=!0),S.identifierPrefix!==void 0&&(q=S.identifierPrefix),S.onRecoverableError!==void 0&&(oe=S.onRecoverableError)),g=fy(g,null,h,1,S??null,B,!1,q,oe),h[Ea]=g.current,vs(h),M)for(h=0;h<M.length;h++)S=M[h],B=S._getVersion,B=B(S._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[S,B]:g.mutableSourceEagerHydrationData.push(S,B);return new Of(g)},wo.render=function(h,g,S){if(!xd(g))throw Error(i(200));return Go(null,h,g,!1,S)},wo.unmountComponentAtNode=function(h){if(!xd(h))throw Error(i(40));return h._reactRootContainer?(xc(function(){Go(null,null,h,!1,function(){h._reactRootContainer=null,h[Ea]=null})}),!0):!1},wo.unstable_batchedUpdates=vm,wo.unstable_renderSubtreeIntoContainer=function(h,g,S,M){if(!xd(S))throw Error(i(200));if(h==null||h._reactInternals===void 0)throw Error(i(38));return Go(h,g,S,!1,M)},wo.version="18.3.1-next-f1338f8080-20240426",wo}var HP;function cO(){if(HP)return a0.exports;HP=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),a0.exports=m3(),a0.exports}var KP;function g3(){if(KP)return Ty;KP=1;var e=cO();return Ty.createRoot=e.createRoot,Ty.hydrateRoot=e.hydrateRoot,Ty}var y3=g3(),Ue=$S();const Ee=mn(Ue),uO=c3({__proto__:null,default:Ee},[Ue]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_3=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,a)=>a?a.toUpperCase():i.toLowerCase()),XP=e=>{const t=_3(e);return t.charAt(0).toUpperCase()+t.slice(1)},hO=(...e)=>e.filter((t,i,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===i).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=Ue.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:u="",children:m,iconNode:p,...l},P)=>Ue.createElement("svg",{ref:P,...x3,width:t,height:t,stroke:e,strokeWidth:a?Number(i)*24/Number(t):i,className:hO("lucide",u),...l},[...p.map(([A,E])=>Ue.createElement(A,E)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=(e,t)=>{const i=Ue.forwardRef(({className:a,...u},m)=>Ue.createElement(b3,{ref:m,iconNode:t,className:hO(`lucide-${v3(XP(e))}`,`lucide-${e}`,a),...u}));return i.displayName=XP(e),i};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],S3=Op("chart-column",w3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],T3=Op("check",P3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],C3=Op("chevron-down",A3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],M3=Op("funnel",E3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],I3=Op("map",k3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],YP=Op("search",O3);function dO(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(i=dO(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function Or(){for(var e,t,i=0,a="",u=arguments.length;i<u;i++)(e=arguments[i])&&(t=dO(e))&&(a&&(a+=" "),a+=t);return a}const US="-",R3=e=>{const t=z3(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:p=>{const l=p.split(US);return l[0]===""&&l.length!==1&&l.shift(),fO(l,t)||D3(p)},getConflictingClassGroupIds:(p,l)=>{const P=i[p]||[];return l&&a[p]?[...P,...a[p]]:P}}},fO=(e,t)=>{if(e.length===0)return t.classGroupId;const i=e[0],a=t.nextPart.get(i),u=a?fO(e.slice(1),a):void 0;if(u)return u;if(t.validators.length===0)return;const m=e.join(US);return t.validators.find(({validator:p})=>p(m))?.classGroupId},JP=/^\[(.+)\]$/,D3=e=>{if(JP.test(e)){const t=JP.exec(e)[1],i=t?.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},z3=e=>{const{theme:t,classGroups:i}=e,a={nextPart:new Map,validators:[]};for(const u in i)dw(i[u],a,u,t);return a},dw=(e,t,i,a)=>{e.forEach(u=>{if(typeof u=="string"){const m=u===""?t:QP(t,u);m.classGroupId=i;return}if(typeof u=="function"){if(j3(u)){dw(u(a),t,i,a);return}t.validators.push({validator:u,classGroupId:i});return}Object.entries(u).forEach(([m,p])=>{dw(p,QP(t,m),i,a)})})},QP=(e,t)=>{let i=e;return t.split(US).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},j3=e=>e.isThemeGetter,L3=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,a=new Map;const u=(m,p)=>{i.set(m,p),t++,t>e&&(t=0,a=i,i=new Map)};return{get(m){let p=i.get(m);if(p!==void 0)return p;if((p=a.get(m))!==void 0)return u(m,p),p},set(m,p){i.has(m)?i.set(m,p):u(m,p)}}},fw="!",pw=":",N3=pw.length,B3=e=>{const{prefix:t,experimentalParseClassName:i}=e;let a=u=>{const m=[];let p=0,l=0,P=0,A;for(let G=0;G<u.length;G++){let U=u[G];if(p===0&&l===0){if(U===pw){m.push(u.slice(P,G)),P=G+N3;continue}if(U==="/"){A=G;continue}}U==="["?p++:U==="]"?p--:U==="("?l++:U===")"&&l--}const E=m.length===0?u:u.substring(P),k=F3(E),D=k!==E,j=A&&A>P?A-P:void 0;return{modifiers:m,hasImportantModifier:D,baseClassName:k,maybePostfixModifierPosition:j}};if(t){const u=t+pw,m=a;a=p=>p.startsWith(u)?m(p.substring(u.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:p,maybePostfixModifierPosition:void 0}}if(i){const u=a;a=m=>i({className:m,parseClassName:u})}return a},F3=e=>e.endsWith(fw)?e.substring(0,e.length-1):e.startsWith(fw)?e.substring(1):e,$3=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const u=[];let m=[];return a.forEach(p=>{p[0]==="["||t[p]?(u.push(...m.sort(),p),m=[]):m.push(p)}),u.push(...m.sort()),u}},U3=e=>({cache:L3(e.cacheSize),parseClassName:B3(e),sortModifiers:$3(e),...R3(e)}),V3=/\s+/,q3=(e,t)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:u,sortModifiers:m}=t,p=[],l=e.trim().split(V3);let P="";for(let A=l.length-1;A>=0;A-=1){const E=l[A],{isExternal:k,modifiers:D,hasImportantModifier:j,baseClassName:G,maybePostfixModifierPosition:U}=i(E);if(k){P=E+(P.length>0?" "+P:P);continue}let F=!!U,X=a(F?G.substring(0,U):G);if(!X){if(!F){P=E+(P.length>0?" "+P:P);continue}if(X=a(G),!X){P=E+(P.length>0?" "+P:P);continue}F=!1}const J=m(D).join(":"),te=j?J+fw:J,le=te+X;if(p.includes(le))continue;p.push(le);const Y=u(X,F);for(let re=0;re<Y.length;++re){const de=Y[re];p.push(te+de)}P=E+(P.length>0?" "+P:P)}return P};function G3(){let e=0,t,i,a="";for(;e<arguments.length;)(t=arguments[e++])&&(i=pO(t))&&(a&&(a+=" "),a+=i);return a}const pO=e=>{if(typeof e=="string")return e;let t,i="";for(let a=0;a<e.length;a++)e[a]&&(t=pO(e[a]))&&(i&&(i+=" "),i+=t);return i};function W3(e,...t){let i,a,u,m=p;function p(P){const A=t.reduce((E,k)=>k(E),e());return i=U3(A),a=i.cache.get,u=i.cache.set,m=l,l(P)}function l(P){const A=a(P);if(A)return A;const E=q3(P,i);return u(P,E),E}return function(){return m(G3.apply(null,arguments))}}const Vi=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},mO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Z3=/^\d+\/\d+$/,H3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,K3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,X3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Y3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,J3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Uf=e=>Z3.test(e),Lr=e=>!!e&&!Number.isNaN(Number(e)),xh=e=>!!e&&Number.isInteger(Number(e)),l0=e=>e.endsWith("%")&&Lr(e.slice(0,-1)),xu=e=>H3.test(e),Q3=()=>!0,e5=e=>K3.test(e)&&!X3.test(e),yO=()=>!1,t5=e=>Y3.test(e),r5=e=>J3.test(e),n5=e=>!Yt(e)&&!Jt(e),i5=e=>Rp(e,xO,yO),Yt=e=>mO.test(e),Ad=e=>Rp(e,bO,e5),c0=e=>Rp(e,c5,Lr),eT=e=>Rp(e,vO,yO),a5=e=>Rp(e,_O,r5),Ay=e=>Rp(e,wO,t5),Jt=e=>gO.test(e),km=e=>Dp(e,bO),o5=e=>Dp(e,u5),tT=e=>Dp(e,vO),s5=e=>Dp(e,xO),l5=e=>Dp(e,_O),Cy=e=>Dp(e,wO,!0),Rp=(e,t,i)=>{const a=mO.exec(e);return a?a[1]?t(a[1]):i(a[2]):!1},Dp=(e,t,i=!1)=>{const a=gO.exec(e);return a?a[1]?t(a[1]):i:!1},vO=e=>e==="position"||e==="percentage",_O=e=>e==="image"||e==="url",xO=e=>e==="length"||e==="size"||e==="bg-size",bO=e=>e==="length",c5=e=>e==="number",u5=e=>e==="family-name",wO=e=>e==="shadow",h5=()=>{const e=Vi("color"),t=Vi("font"),i=Vi("text"),a=Vi("font-weight"),u=Vi("tracking"),m=Vi("leading"),p=Vi("breakpoint"),l=Vi("container"),P=Vi("spacing"),A=Vi("radius"),E=Vi("shadow"),k=Vi("inset-shadow"),D=Vi("text-shadow"),j=Vi("drop-shadow"),G=Vi("blur"),U=Vi("perspective"),F=Vi("aspect"),X=Vi("ease"),J=Vi("animate"),te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Y=()=>[...le(),Jt,Yt],re=()=>["auto","hidden","clip","visible","scroll"],de=()=>["auto","contain","none"],ge=()=>[Jt,Yt,P],Ie=()=>[Uf,"full","auto",...ge()],We=()=>[xh,"none","subgrid",Jt,Yt],Oe=()=>["auto",{span:["full",xh,Jt,Yt]},xh,Jt,Yt],Ve=()=>[xh,"auto",Jt,Yt],Ke=()=>["auto","min","max","fr",Jt,Yt],ot=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],at=()=>["start","end","center","stretch","center-safe","end-safe"],st=()=>["auto",...ge()],lt=()=>[Uf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ge()],Le=()=>[e,Jt,Yt],tt=()=>[...le(),tT,eT,{position:[Jt,Yt]}],ut=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ae=()=>["auto","cover","contain",s5,i5,{size:[Jt,Yt]}],qe=()=>[l0,km,Ad],yt=()=>["","none","full",A,Jt,Yt],Rt=()=>["",Lr,km,Ad],$t=()=>["solid","dashed","dotted","double"],Wt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],er=()=>[Lr,l0,tT,eT],tr=()=>["","none",G,Jt,Yt],vt=()=>["none",Lr,Jt,Yt],Ft=()=>["none",Lr,Jt,Yt],ir=()=>[Lr,Jt,Yt],pt=()=>[Uf,"full",...ge()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xu],breakpoint:[xu],color:[Q3],container:[xu],"drop-shadow":[xu],ease:["in","out","in-out"],font:[n5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xu],shadow:[xu],spacing:["px",Lr],text:[xu],"text-shadow":[xu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Uf,Yt,Jt,F]}],container:["container"],columns:[{columns:[Lr,Yt,Jt,l]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Y()}],overflow:[{overflow:re()}],"overflow-x":[{"overflow-x":re()}],"overflow-y":[{"overflow-y":re()}],overscroll:[{overscroll:de()}],"overscroll-x":[{"overscroll-x":de()}],"overscroll-y":[{"overscroll-y":de()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Ie()}],"inset-x":[{"inset-x":Ie()}],"inset-y":[{"inset-y":Ie()}],start:[{start:Ie()}],end:[{end:Ie()}],top:[{top:Ie()}],right:[{right:Ie()}],bottom:[{bottom:Ie()}],left:[{left:Ie()}],visibility:["visible","invisible","collapse"],z:[{z:[xh,"auto",Jt,Yt]}],basis:[{basis:[Uf,"full","auto",l,...ge()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Lr,Uf,"auto","initial","none",Yt]}],grow:[{grow:["",Lr,Jt,Yt]}],shrink:[{shrink:["",Lr,Jt,Yt]}],order:[{order:[xh,"first","last","none",Jt,Yt]}],"grid-cols":[{"grid-cols":We()}],"col-start-end":[{col:Oe()}],"col-start":[{"col-start":Ve()}],"col-end":[{"col-end":Ve()}],"grid-rows":[{"grid-rows":We()}],"row-start-end":[{row:Oe()}],"row-start":[{"row-start":Ve()}],"row-end":[{"row-end":Ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ke()}],"auto-rows":[{"auto-rows":Ke()}],gap:[{gap:ge()}],"gap-x":[{"gap-x":ge()}],"gap-y":[{"gap-y":ge()}],"justify-content":[{justify:[...ot(),"normal"]}],"justify-items":[{"justify-items":[...at(),"normal"]}],"justify-self":[{"justify-self":["auto",...at()]}],"align-content":[{content:["normal",...ot()]}],"align-items":[{items:[...at(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...at(),{baseline:["","last"]}]}],"place-content":[{"place-content":ot()}],"place-items":[{"place-items":[...at(),"baseline"]}],"place-self":[{"place-self":["auto",...at()]}],p:[{p:ge()}],px:[{px:ge()}],py:[{py:ge()}],ps:[{ps:ge()}],pe:[{pe:ge()}],pt:[{pt:ge()}],pr:[{pr:ge()}],pb:[{pb:ge()}],pl:[{pl:ge()}],m:[{m:st()}],mx:[{mx:st()}],my:[{my:st()}],ms:[{ms:st()}],me:[{me:st()}],mt:[{mt:st()}],mr:[{mr:st()}],mb:[{mb:st()}],ml:[{ml:st()}],"space-x":[{"space-x":ge()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ge()}],"space-y-reverse":["space-y-reverse"],size:[{size:lt()}],w:[{w:[l,"screen",...lt()]}],"min-w":[{"min-w":[l,"screen","none",...lt()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[p]},...lt()]}],h:[{h:["screen","lh",...lt()]}],"min-h":[{"min-h":["screen","lh","none",...lt()]}],"max-h":[{"max-h":["screen","lh",...lt()]}],"font-size":[{text:["base",i,km,Ad]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Jt,c0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",l0,Yt]}],"font-family":[{font:[o5,Yt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,Jt,Yt]}],"line-clamp":[{"line-clamp":[Lr,"none",Jt,c0]}],leading:[{leading:[m,...ge()]}],"list-image":[{"list-image":["none",Jt,Yt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Jt,Yt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Le()}],"text-color":[{text:Le()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$t(),"wavy"]}],"text-decoration-thickness":[{decoration:[Lr,"from-font","auto",Jt,Ad]}],"text-decoration-color":[{decoration:Le()}],"underline-offset":[{"underline-offset":[Lr,"auto",Jt,Yt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ge()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jt,Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jt,Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:tt()}],"bg-repeat":[{bg:ut()}],"bg-size":[{bg:Ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xh,Jt,Yt],radial:["",Jt,Yt],conic:[xh,Jt,Yt]},l5,a5]}],"bg-color":[{bg:Le()}],"gradient-from-pos":[{from:qe()}],"gradient-via-pos":[{via:qe()}],"gradient-to-pos":[{to:qe()}],"gradient-from":[{from:Le()}],"gradient-via":[{via:Le()}],"gradient-to":[{to:Le()}],rounded:[{rounded:yt()}],"rounded-s":[{"rounded-s":yt()}],"rounded-e":[{"rounded-e":yt()}],"rounded-t":[{"rounded-t":yt()}],"rounded-r":[{"rounded-r":yt()}],"rounded-b":[{"rounded-b":yt()}],"rounded-l":[{"rounded-l":yt()}],"rounded-ss":[{"rounded-ss":yt()}],"rounded-se":[{"rounded-se":yt()}],"rounded-ee":[{"rounded-ee":yt()}],"rounded-es":[{"rounded-es":yt()}],"rounded-tl":[{"rounded-tl":yt()}],"rounded-tr":[{"rounded-tr":yt()}],"rounded-br":[{"rounded-br":yt()}],"rounded-bl":[{"rounded-bl":yt()}],"border-w":[{border:Rt()}],"border-w-x":[{"border-x":Rt()}],"border-w-y":[{"border-y":Rt()}],"border-w-s":[{"border-s":Rt()}],"border-w-e":[{"border-e":Rt()}],"border-w-t":[{"border-t":Rt()}],"border-w-r":[{"border-r":Rt()}],"border-w-b":[{"border-b":Rt()}],"border-w-l":[{"border-l":Rt()}],"divide-x":[{"divide-x":Rt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Rt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...$t(),"hidden","none"]}],"divide-style":[{divide:[...$t(),"hidden","none"]}],"border-color":[{border:Le()}],"border-color-x":[{"border-x":Le()}],"border-color-y":[{"border-y":Le()}],"border-color-s":[{"border-s":Le()}],"border-color-e":[{"border-e":Le()}],"border-color-t":[{"border-t":Le()}],"border-color-r":[{"border-r":Le()}],"border-color-b":[{"border-b":Le()}],"border-color-l":[{"border-l":Le()}],"divide-color":[{divide:Le()}],"outline-style":[{outline:[...$t(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Lr,Jt,Yt]}],"outline-w":[{outline:["",Lr,km,Ad]}],"outline-color":[{outline:Le()}],shadow:[{shadow:["","none",E,Cy,Ay]}],"shadow-color":[{shadow:Le()}],"inset-shadow":[{"inset-shadow":["none",k,Cy,Ay]}],"inset-shadow-color":[{"inset-shadow":Le()}],"ring-w":[{ring:Rt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Le()}],"ring-offset-w":[{"ring-offset":[Lr,Ad]}],"ring-offset-color":[{"ring-offset":Le()}],"inset-ring-w":[{"inset-ring":Rt()}],"inset-ring-color":[{"inset-ring":Le()}],"text-shadow":[{"text-shadow":["none",D,Cy,Ay]}],"text-shadow-color":[{"text-shadow":Le()}],opacity:[{opacity:[Lr,Jt,Yt]}],"mix-blend":[{"mix-blend":[...Wt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Wt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Lr]}],"mask-image-linear-from-pos":[{"mask-linear-from":er()}],"mask-image-linear-to-pos":[{"mask-linear-to":er()}],"mask-image-linear-from-color":[{"mask-linear-from":Le()}],"mask-image-linear-to-color":[{"mask-linear-to":Le()}],"mask-image-t-from-pos":[{"mask-t-from":er()}],"mask-image-t-to-pos":[{"mask-t-to":er()}],"mask-image-t-from-color":[{"mask-t-from":Le()}],"mask-image-t-to-color":[{"mask-t-to":Le()}],"mask-image-r-from-pos":[{"mask-r-from":er()}],"mask-image-r-to-pos":[{"mask-r-to":er()}],"mask-image-r-from-color":[{"mask-r-from":Le()}],"mask-image-r-to-color":[{"mask-r-to":Le()}],"mask-image-b-from-pos":[{"mask-b-from":er()}],"mask-image-b-to-pos":[{"mask-b-to":er()}],"mask-image-b-from-color":[{"mask-b-from":Le()}],"mask-image-b-to-color":[{"mask-b-to":Le()}],"mask-image-l-from-pos":[{"mask-l-from":er()}],"mask-image-l-to-pos":[{"mask-l-to":er()}],"mask-image-l-from-color":[{"mask-l-from":Le()}],"mask-image-l-to-color":[{"mask-l-to":Le()}],"mask-image-x-from-pos":[{"mask-x-from":er()}],"mask-image-x-to-pos":[{"mask-x-to":er()}],"mask-image-x-from-color":[{"mask-x-from":Le()}],"mask-image-x-to-color":[{"mask-x-to":Le()}],"mask-image-y-from-pos":[{"mask-y-from":er()}],"mask-image-y-to-pos":[{"mask-y-to":er()}],"mask-image-y-from-color":[{"mask-y-from":Le()}],"mask-image-y-to-color":[{"mask-y-to":Le()}],"mask-image-radial":[{"mask-radial":[Jt,Yt]}],"mask-image-radial-from-pos":[{"mask-radial-from":er()}],"mask-image-radial-to-pos":[{"mask-radial-to":er()}],"mask-image-radial-from-color":[{"mask-radial-from":Le()}],"mask-image-radial-to-color":[{"mask-radial-to":Le()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":le()}],"mask-image-conic-pos":[{"mask-conic":[Lr]}],"mask-image-conic-from-pos":[{"mask-conic-from":er()}],"mask-image-conic-to-pos":[{"mask-conic-to":er()}],"mask-image-conic-from-color":[{"mask-conic-from":Le()}],"mask-image-conic-to-color":[{"mask-conic-to":Le()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:tt()}],"mask-repeat":[{mask:ut()}],"mask-size":[{mask:Ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Jt,Yt]}],filter:[{filter:["","none",Jt,Yt]}],blur:[{blur:tr()}],brightness:[{brightness:[Lr,Jt,Yt]}],contrast:[{contrast:[Lr,Jt,Yt]}],"drop-shadow":[{"drop-shadow":["","none",j,Cy,Ay]}],"drop-shadow-color":[{"drop-shadow":Le()}],grayscale:[{grayscale:["",Lr,Jt,Yt]}],"hue-rotate":[{"hue-rotate":[Lr,Jt,Yt]}],invert:[{invert:["",Lr,Jt,Yt]}],saturate:[{saturate:[Lr,Jt,Yt]}],sepia:[{sepia:["",Lr,Jt,Yt]}],"backdrop-filter":[{"backdrop-filter":["","none",Jt,Yt]}],"backdrop-blur":[{"backdrop-blur":tr()}],"backdrop-brightness":[{"backdrop-brightness":[Lr,Jt,Yt]}],"backdrop-contrast":[{"backdrop-contrast":[Lr,Jt,Yt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Lr,Jt,Yt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Lr,Jt,Yt]}],"backdrop-invert":[{"backdrop-invert":["",Lr,Jt,Yt]}],"backdrop-opacity":[{"backdrop-opacity":[Lr,Jt,Yt]}],"backdrop-saturate":[{"backdrop-saturate":[Lr,Jt,Yt]}],"backdrop-sepia":[{"backdrop-sepia":["",Lr,Jt,Yt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ge()}],"border-spacing-x":[{"border-spacing-x":ge()}],"border-spacing-y":[{"border-spacing-y":ge()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Jt,Yt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Lr,"initial",Jt,Yt]}],ease:[{ease:["linear","initial",X,Jt,Yt]}],delay:[{delay:[Lr,Jt,Yt]}],animate:[{animate:["none",J,Jt,Yt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[U,Jt,Yt]}],"perspective-origin":[{"perspective-origin":Y()}],rotate:[{rotate:vt()}],"rotate-x":[{"rotate-x":vt()}],"rotate-y":[{"rotate-y":vt()}],"rotate-z":[{"rotate-z":vt()}],scale:[{scale:Ft()}],"scale-x":[{"scale-x":Ft()}],"scale-y":[{"scale-y":Ft()}],"scale-z":[{"scale-z":Ft()}],"scale-3d":["scale-3d"],skew:[{skew:ir()}],"skew-x":[{"skew-x":ir()}],"skew-y":[{"skew-y":ir()}],transform:[{transform:[Jt,Yt,"","none","gpu","cpu"]}],"transform-origin":[{origin:Y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pt()}],"translate-x":[{"translate-x":pt()}],"translate-y":[{"translate-y":pt()}],"translate-z":[{"translate-z":pt()}],"translate-none":["translate-none"],accent:[{accent:Le()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Le()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jt,Yt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ge()}],"scroll-mx":[{"scroll-mx":ge()}],"scroll-my":[{"scroll-my":ge()}],"scroll-ms":[{"scroll-ms":ge()}],"scroll-me":[{"scroll-me":ge()}],"scroll-mt":[{"scroll-mt":ge()}],"scroll-mr":[{"scroll-mr":ge()}],"scroll-mb":[{"scroll-mb":ge()}],"scroll-ml":[{"scroll-ml":ge()}],"scroll-p":[{"scroll-p":ge()}],"scroll-px":[{"scroll-px":ge()}],"scroll-py":[{"scroll-py":ge()}],"scroll-ps":[{"scroll-ps":ge()}],"scroll-pe":[{"scroll-pe":ge()}],"scroll-pt":[{"scroll-pt":ge()}],"scroll-pr":[{"scroll-pr":ge()}],"scroll-pb":[{"scroll-pb":ge()}],"scroll-pl":[{"scroll-pl":ge()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jt,Yt]}],fill:[{fill:["none",...Le()]}],"stroke-w":[{stroke:[Lr,km,Ad,c0]}],stroke:[{stroke:["none",...Le()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},d5=W3(h5);function io(...e){return d5(Or(e))}function rT({className:e,type:t,...i}){return ce.jsx("input",{type:t,"data-slot":"input",className:io("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}function nT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function SO(...e){return t=>{let i=!1;const a=e.map(u=>{const m=nT(u,t);return!i&&typeof m=="function"&&(i=!0),m});if(i)return()=>{for(let u=0;u<a.length;u++){const m=a[u];typeof m=="function"?m():nT(e[u],null)}}}}function Ch(...e){return Ue.useCallback(SO(...e),e)}function Vy(e){const t=f5(e),i=Ue.forwardRef((a,u)=>{const{children:m,...p}=a,l=Ue.Children.toArray(m),P=l.find(m5);if(P){const A=P.props.children,E=l.map(k=>k===P?Ue.Children.count(A)>1?Ue.Children.only(null):Ue.isValidElement(A)?A.props.children:null:k);return ce.jsx(t,{...p,ref:u,children:Ue.isValidElement(A)?Ue.cloneElement(A,void 0,E):null})}return ce.jsx(t,{...p,ref:u,children:m})});return i.displayName=`${e}.Slot`,i}var PO=Vy("Slot");function f5(e){const t=Ue.forwardRef((i,a)=>{const{children:u,...m}=i;if(Ue.isValidElement(u)){const p=y5(u),l=g5(m,u.props);return u.type!==Ue.Fragment&&(l.ref=a?SO(a,p):p),Ue.cloneElement(u,l)}return Ue.Children.count(u)>1?Ue.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var p5=Symbol("radix.slottable");function m5(e){return Ue.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===p5}function g5(e,t){const i={...t};for(const a in t){const u=e[a],m=t[a];/^on[A-Z]/.test(a)?u&&m?i[a]=(...l)=>{const P=m(...l);return u(...l),P}:u&&(i[a]=u):a==="style"?i[a]={...u,...m}:a==="className"&&(i[a]=[u,m].filter(Boolean).join(" "))}return{...e,...i}}function y5(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}const iT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,aT=Or,TO=(e,t)=>i=>{var a;if(t?.variants==null)return aT(e,i?.class,i?.className);const{variants:u,defaultVariants:m}=t,p=Object.keys(u).map(A=>{const E=i?.[A],k=m?.[A];if(E===null)return null;const D=iT(E)||iT(k);return u[A][D]}),l=i&&Object.entries(i).reduce((A,E)=>{let[k,D]=E;return D===void 0||(A[k]=D),A},{}),P=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((A,E)=>{let{class:k,className:D,...j}=E;return Object.entries(j).every(G=>{let[U,F]=G;return Array.isArray(F)?F.includes({...m,...l}[U]):{...m,...l}[U]===F})?[...A,k,D]:A},[]);return aT(e,p,P,i?.class,i?.className)},v5=TO("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Cd({className:e,variant:t,size:i,asChild:a=!1,...u}){const m=a?PO:"button";return ce.jsx(m,{"data-slot":"button",className:io(v5({variant:t,size:i,className:e})),...u})}function zp(e,t=[]){let i=[];function a(m,p){const l=Ue.createContext(p),P=i.length;i=[...i,p];const A=k=>{const{scope:D,children:j,...G}=k,U=D?.[e]?.[P]||l,F=Ue.useMemo(()=>G,Object.values(G));return ce.jsx(U.Provider,{value:F,children:j})};A.displayName=m+"Provider";function E(k,D){const j=D?.[e]?.[P]||l,G=Ue.useContext(j);if(G)return G;if(p!==void 0)return p;throw new Error(`\`${k}\` must be used within \`${m}\``)}return[A,E]}const u=()=>{const m=i.map(p=>Ue.createContext(p));return function(l){const P=l?.[e]||m;return Ue.useMemo(()=>({[`__scope${e}`]:{...l,[e]:P}}),[l,P])}};return u.scopeName=e,[a,_5(u,...t)]}function _5(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const a=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(m){const p=a.reduce((l,{useScope:P,scopeName:A})=>{const k=P(m)[`__scope${A}`];return{...l,...k}},{});return Ue.useMemo(()=>({[`__scope${t.scopeName}`]:p}),[p])}};return i.scopeName=t.scopeName,i}function ts(e,t,{checkForDefaultPrevented:i=!0}={}){return function(u){if(e?.(u),i===!1||!u.defaultPrevented)return t?.(u)}}var ip=globalThis?.document?Ue.useLayoutEffect:()=>{},x5=uO[" useInsertionEffect ".trim().toString()]||ip;function jp({prop:e,defaultProp:t,onChange:i=()=>{},caller:a}){const[u,m,p]=b5({defaultProp:t,onChange:i}),l=e!==void 0,P=l?e:u;{const E=Ue.useRef(e!==void 0);Ue.useEffect(()=>{const k=E.current;k!==l&&console.warn(`${a} is changing from ${k?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),E.current=l},[l,a])}const A=Ue.useCallback(E=>{if(l){const k=w5(E)?E(e):E;k!==e&&p.current?.(k)}else m(E)},[l,e,m,p]);return[P,A]}function b5({defaultProp:e,onChange:t}){const[i,a]=Ue.useState(e),u=Ue.useRef(i),m=Ue.useRef(t);return x5(()=>{m.current=t},[t]),Ue.useEffect(()=>{u.current!==i&&(m.current?.(i),u.current=i)},[i,u]),[i,a,m]}function w5(e){return typeof e=="function"}function S5(e){const t=Ue.useRef({value:e,previous:e});return Ue.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function P5(e){const[t,i]=Ue.useState(void 0);return ip(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const m=u[0];let p,l;if("borderBoxSize"in m){const P=m.borderBoxSize,A=Array.isArray(P)?P[0]:P;p=A.inlineSize,l=A.blockSize}else p=e.offsetWidth,l=e.offsetHeight;i({width:p,height:l})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else i(void 0)},[e]),t}function T5(e,t){return Ue.useReducer((i,a)=>t[i][a]??i,e)}var Vv=e=>{const{present:t,children:i}=e,a=A5(t),u=typeof i=="function"?i({present:a.isPresent}):Ue.Children.only(i),m=Ch(a.ref,C5(u));return typeof i=="function"||a.isPresent?Ue.cloneElement(u,{ref:m}):null};Vv.displayName="Presence";function A5(e){const[t,i]=Ue.useState(),a=Ue.useRef(null),u=Ue.useRef(e),m=Ue.useRef("none"),p=e?"mounted":"unmounted",[l,P]=T5(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Ue.useEffect(()=>{const A=Ey(a.current);m.current=l==="mounted"?A:"none"},[l]),ip(()=>{const A=a.current,E=u.current;if(E!==e){const D=m.current,j=Ey(A);e?P("MOUNT"):j==="none"||A?.display==="none"?P("UNMOUNT"):P(E&&D!==j?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,P]),ip(()=>{if(t){let A;const E=t.ownerDocument.defaultView??window,k=j=>{const U=Ey(a.current).includes(CSS.escape(j.animationName));if(j.target===t&&U&&(P("ANIMATION_END"),!u.current)){const F=t.style.animationFillMode;t.style.animationFillMode="forwards",A=E.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=F)})}},D=j=>{j.target===t&&(m.current=Ey(a.current))};return t.addEventListener("animationstart",D),t.addEventListener("animationcancel",k),t.addEventListener("animationend",k),()=>{E.clearTimeout(A),t.removeEventListener("animationstart",D),t.removeEventListener("animationcancel",k),t.removeEventListener("animationend",k)}}else P("ANIMATION_END")},[t,P]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:Ue.useCallback(A=>{a.current=A?getComputedStyle(A):null,i(A)},[])}}function Ey(e){return e?.animationName||"none"}function C5(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}cO();var E5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Po=E5.reduce((e,t)=>{const i=Vy(`Primitive.${t}`),a=Ue.forwardRef((u,m)=>{const{asChild:p,...l}=u,P=p?i:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ce.jsx(P,{...l,ref:m})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),qv="Checkbox",[M5]=zp(qv),[k5,VS]=M5(qv);function I5(e){const{__scopeCheckbox:t,checked:i,children:a,defaultChecked:u,disabled:m,form:p,name:l,onCheckedChange:P,required:A,value:E="on",internal_do_not_use_render:k}=e,[D,j]=jp({prop:i,defaultProp:u??!1,onChange:P,caller:qv}),[G,U]=Ue.useState(null),[F,X]=Ue.useState(null),J=Ue.useRef(!1),te=G?!!p||!!G.closest("form"):!0,le={checked:D,disabled:m,setChecked:j,control:G,setControl:U,name:l,form:p,value:E,hasConsumerStoppedPropagationRef:J,required:A,defaultChecked:Ph(u)?!1:u,isFormControl:te,bubbleInput:F,setBubbleInput:X};return ce.jsx(k5,{scope:t,...le,children:O5(k)?k(le):a})}var AO="CheckboxTrigger",CO=Ue.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:i,...a},u)=>{const{control:m,value:p,disabled:l,checked:P,required:A,setControl:E,setChecked:k,hasConsumerStoppedPropagationRef:D,isFormControl:j,bubbleInput:G}=VS(AO,e),U=Ch(u,E),F=Ue.useRef(P);return Ue.useEffect(()=>{const X=m?.form;if(X){const J=()=>k(F.current);return X.addEventListener("reset",J),()=>X.removeEventListener("reset",J)}},[m,k]),ce.jsx(Po.button,{type:"button",role:"checkbox","aria-checked":Ph(P)?"mixed":P,"aria-required":A,"data-state":RO(P),"data-disabled":l?"":void 0,disabled:l,value:p,...a,ref:U,onKeyDown:ts(t,X=>{X.key==="Enter"&&X.preventDefault()}),onClick:ts(i,X=>{k(J=>Ph(J)?!0:!J),G&&j&&(D.current=X.isPropagationStopped(),D.current||X.stopPropagation())})})});CO.displayName=AO;var EO=Ue.forwardRef((e,t)=>{const{__scopeCheckbox:i,name:a,checked:u,defaultChecked:m,required:p,disabled:l,value:P,onCheckedChange:A,form:E,...k}=e;return ce.jsx(I5,{__scopeCheckbox:i,checked:u,defaultChecked:m,disabled:l,required:p,onCheckedChange:A,name:a,form:E,value:P,internal_do_not_use_render:({isFormControl:D})=>ce.jsxs(ce.Fragment,{children:[ce.jsx(CO,{...k,ref:t,__scopeCheckbox:i}),D&&ce.jsx(OO,{__scopeCheckbox:i})]})})});EO.displayName=qv;var MO="CheckboxIndicator",kO=Ue.forwardRef((e,t)=>{const{__scopeCheckbox:i,forceMount:a,...u}=e,m=VS(MO,i);return ce.jsx(Vv,{present:a||Ph(m.checked)||m.checked===!0,children:ce.jsx(Po.span,{"data-state":RO(m.checked),"data-disabled":m.disabled?"":void 0,...u,ref:t,style:{pointerEvents:"none",...e.style}})})});kO.displayName=MO;var IO="CheckboxBubbleInput",OO=Ue.forwardRef(({__scopeCheckbox:e,...t},i)=>{const{control:a,hasConsumerStoppedPropagationRef:u,checked:m,defaultChecked:p,required:l,disabled:P,name:A,value:E,form:k,bubbleInput:D,setBubbleInput:j}=VS(IO,e),G=Ch(i,j),U=S5(m),F=P5(a);Ue.useEffect(()=>{const J=D;if(!J)return;const te=window.HTMLInputElement.prototype,Y=Object.getOwnPropertyDescriptor(te,"checked").set,re=!u.current;if(U!==m&&Y){const de=new Event("click",{bubbles:re});J.indeterminate=Ph(m),Y.call(J,Ph(m)?!1:m),J.dispatchEvent(de)}},[D,U,m,u]);const X=Ue.useRef(Ph(m)?!1:m);return ce.jsx(Po.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??X.current,required:l,disabled:P,name:A,value:E,form:k,...t,tabIndex:-1,ref:G,style:{...t.style,...F,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});OO.displayName=IO;function O5(e){return typeof e=="function"}function Ph(e){return e==="indeterminate"}function RO(e){return Ph(e)?"indeterminate":e?"checked":"unchecked"}function R5({className:e,...t}){return ce.jsx(EO,{"data-slot":"checkbox",className:io("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:ce.jsx(kO,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:ce.jsx(T3,{className:"size-3.5"})})})}function DO(e){const t=e+"CollectionProvider",[i,a]=zp(t),[u,m]=i(t,{collectionRef:{current:null},itemMap:new Map}),p=U=>{const{scope:F,children:X}=U,J=Ee.useRef(null),te=Ee.useRef(new Map).current;return ce.jsx(u,{scope:F,itemMap:te,collectionRef:J,children:X})};p.displayName=t;const l=e+"CollectionSlot",P=Vy(l),A=Ee.forwardRef((U,F)=>{const{scope:X,children:J}=U,te=m(l,X),le=Ch(F,te.collectionRef);return ce.jsx(P,{ref:le,children:J})});A.displayName=l;const E=e+"CollectionItemSlot",k="data-radix-collection-item",D=Vy(E),j=Ee.forwardRef((U,F)=>{const{scope:X,children:J,...te}=U,le=Ee.useRef(null),Y=Ch(F,le),re=m(E,X);return Ee.useEffect(()=>(re.itemMap.set(le,{ref:le,...te}),()=>void re.itemMap.delete(le))),ce.jsx(D,{[k]:"",ref:Y,children:J})});j.displayName=E;function G(U){const F=m(e+"CollectionConsumer",U);return Ee.useCallback(()=>{const J=F.collectionRef.current;if(!J)return[];const te=Array.from(J.querySelectorAll(`[${k}]`));return Array.from(F.itemMap.values()).sort((re,de)=>te.indexOf(re.ref.current)-te.indexOf(de.ref.current))},[F.collectionRef,F.itemMap])}return[{Provider:p,Slot:A,ItemSlot:j},G,a]}var D5=uO[" useId ".trim().toString()]||(()=>{}),z5=0;function Gv(e){const[t,i]=Ue.useState(D5());return ip(()=>{i(a=>a??String(z5++))},[e]),t?`radix-${t}`:""}var Wv="Collapsible",[j5,zO]=zp(Wv),[L5,qS]=j5(Wv),jO=Ue.forwardRef((e,t)=>{const{__scopeCollapsible:i,open:a,defaultOpen:u,disabled:m,onOpenChange:p,...l}=e,[P,A]=jp({prop:a,defaultProp:u??!1,onChange:p,caller:Wv});return ce.jsx(L5,{scope:i,disabled:m,contentId:Gv(),open:P,onOpenToggle:Ue.useCallback(()=>A(E=>!E),[A]),children:ce.jsx(Po.div,{"data-state":WS(P),"data-disabled":m?"":void 0,...l,ref:t})})});jO.displayName=Wv;var LO="CollapsibleTrigger",NO=Ue.forwardRef((e,t)=>{const{__scopeCollapsible:i,...a}=e,u=qS(LO,i);return ce.jsx(Po.button,{type:"button","aria-controls":u.contentId,"aria-expanded":u.open||!1,"data-state":WS(u.open),"data-disabled":u.disabled?"":void 0,disabled:u.disabled,...a,ref:t,onClick:ts(e.onClick,u.onOpenToggle)})});NO.displayName=LO;var GS="CollapsibleContent",BO=Ue.forwardRef((e,t)=>{const{forceMount:i,...a}=e,u=qS(GS,e.__scopeCollapsible);return ce.jsx(Vv,{present:i||u.open,children:({present:m})=>ce.jsx(N5,{...a,ref:t,present:m})})});BO.displayName=GS;var N5=Ue.forwardRef((e,t)=>{const{__scopeCollapsible:i,present:a,children:u,...m}=e,p=qS(GS,i),[l,P]=Ue.useState(a),A=Ue.useRef(null),E=Ch(t,A),k=Ue.useRef(0),D=k.current,j=Ue.useRef(0),G=j.current,U=p.open||l,F=Ue.useRef(U),X=Ue.useRef(void 0);return Ue.useEffect(()=>{const J=requestAnimationFrame(()=>F.current=!1);return()=>cancelAnimationFrame(J)},[]),ip(()=>{const J=A.current;if(J){X.current=X.current||{transitionDuration:J.style.transitionDuration,animationName:J.style.animationName},J.style.transitionDuration="0s",J.style.animationName="none";const te=J.getBoundingClientRect();k.current=te.height,j.current=te.width,F.current||(J.style.transitionDuration=X.current.transitionDuration,J.style.animationName=X.current.animationName),P(a)}},[p.open,a]),ce.jsx(Po.div,{"data-state":WS(p.open),"data-disabled":p.disabled?"":void 0,id:p.contentId,hidden:!U,...m,ref:E,style:{"--radix-collapsible-content-height":D?`${D}px`:void 0,"--radix-collapsible-content-width":G?`${G}px`:void 0,...e.style},children:U&&u})});function WS(e){return e?"open":"closed"}var B5=jO,F5=NO,$5=BO,U5=Ue.createContext(void 0);function ZS(e){const t=Ue.useContext(U5);return e||t||"ltr"}var kl="Accordion",V5=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[HS,q5,G5]=DO(kl),[Zv]=zp(kl,[G5,zO]),KS=zO(),FO=Ee.forwardRef((e,t)=>{const{type:i,...a}=e,u=a,m=a;return ce.jsx(HS.Provider,{scope:e.__scopeAccordion,children:i==="multiple"?ce.jsx(K5,{...m,ref:t}):ce.jsx(H5,{...u,ref:t})})});FO.displayName=kl;var[$O,W5]=Zv(kl),[UO,Z5]=Zv(kl,{collapsible:!1}),H5=Ee.forwardRef((e,t)=>{const{value:i,defaultValue:a,onValueChange:u=()=>{},collapsible:m=!1,...p}=e,[l,P]=jp({prop:i,defaultProp:a??"",onChange:u,caller:kl});return ce.jsx($O,{scope:e.__scopeAccordion,value:Ee.useMemo(()=>l?[l]:[],[l]),onItemOpen:P,onItemClose:Ee.useCallback(()=>m&&P(""),[m,P]),children:ce.jsx(UO,{scope:e.__scopeAccordion,collapsible:m,children:ce.jsx(VO,{...p,ref:t})})})}),K5=Ee.forwardRef((e,t)=>{const{value:i,defaultValue:a,onValueChange:u=()=>{},...m}=e,[p,l]=jp({prop:i,defaultProp:a??[],onChange:u,caller:kl}),P=Ee.useCallback(E=>l((k=[])=>[...k,E]),[l]),A=Ee.useCallback(E=>l((k=[])=>k.filter(D=>D!==E)),[l]);return ce.jsx($O,{scope:e.__scopeAccordion,value:p,onItemOpen:P,onItemClose:A,children:ce.jsx(UO,{scope:e.__scopeAccordion,collapsible:!0,children:ce.jsx(VO,{...m,ref:t})})})}),[X5,Hv]=Zv(kl),VO=Ee.forwardRef((e,t)=>{const{__scopeAccordion:i,disabled:a,dir:u,orientation:m="vertical",...p}=e,l=Ee.useRef(null),P=Ch(l,t),A=q5(i),k=ZS(u)==="ltr",D=ts(e.onKeyDown,j=>{if(!V5.includes(j.key))return;const G=j.target,U=A().filter(ge=>!ge.ref.current?.disabled),F=U.findIndex(ge=>ge.ref.current===G),X=U.length;if(F===-1)return;j.preventDefault();let J=F;const te=0,le=X-1,Y=()=>{J=F+1,J>le&&(J=te)},re=()=>{J=F-1,J<te&&(J=le)};switch(j.key){case"Home":J=te;break;case"End":J=le;break;case"ArrowRight":m==="horizontal"&&(k?Y():re());break;case"ArrowDown":m==="vertical"&&Y();break;case"ArrowLeft":m==="horizontal"&&(k?re():Y());break;case"ArrowUp":m==="vertical"&&re();break}const de=J%X;U[de].ref.current?.focus()});return ce.jsx(X5,{scope:i,disabled:a,direction:u,orientation:m,children:ce.jsx(HS.Slot,{scope:i,children:ce.jsx(Po.div,{...p,"data-orientation":m,ref:P,onKeyDown:a?void 0:D})})})}),qy="AccordionItem",[Y5,XS]=Zv(qy),qO=Ee.forwardRef((e,t)=>{const{__scopeAccordion:i,value:a,...u}=e,m=Hv(qy,i),p=W5(qy,i),l=KS(i),P=Gv(),A=a&&p.value.includes(a)||!1,E=m.disabled||e.disabled;return ce.jsx(Y5,{scope:i,open:A,disabled:E,triggerId:P,children:ce.jsx(B5,{"data-orientation":m.orientation,"data-state":XO(A),...l,...u,ref:t,disabled:E,open:A,onOpenChange:k=>{k?p.onItemOpen(a):p.onItemClose(a)}})})});qO.displayName=qy;var GO="AccordionHeader",WO=Ee.forwardRef((e,t)=>{const{__scopeAccordion:i,...a}=e,u=Hv(kl,i),m=XS(GO,i);return ce.jsx(Po.h3,{"data-orientation":u.orientation,"data-state":XO(m.open),"data-disabled":m.disabled?"":void 0,...a,ref:t})});WO.displayName=GO;var mw="AccordionTrigger",ZO=Ee.forwardRef((e,t)=>{const{__scopeAccordion:i,...a}=e,u=Hv(kl,i),m=XS(mw,i),p=Z5(mw,i),l=KS(i);return ce.jsx(HS.ItemSlot,{scope:i,children:ce.jsx(F5,{"aria-disabled":m.open&&!p.collapsible||void 0,"data-orientation":u.orientation,id:m.triggerId,...l,...a,ref:t})})});ZO.displayName=mw;var HO="AccordionContent",KO=Ee.forwardRef((e,t)=>{const{__scopeAccordion:i,...a}=e,u=Hv(kl,i),m=XS(HO,i),p=KS(i);return ce.jsx($5,{role:"region","aria-labelledby":m.triggerId,"data-orientation":u.orientation,...p,...a,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});KO.displayName=HO;function XO(e){return e?"open":"closed"}var J5=FO,Q5=qO,eL=WO,tL=ZO,rL=KO;function nL({...e}){return ce.jsx(J5,{"data-slot":"accordion",...e})}function iL({className:e,...t}){return ce.jsx(Q5,{"data-slot":"accordion-item",className:io("border-b last:border-b-0",e),...t})}function aL({className:e,children:t,...i}){return ce.jsx(eL,{className:"flex",children:ce.jsxs(tL,{"data-slot":"accordion-trigger",className:io("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e),...i,children:[t,ce.jsx(C3,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function oL({className:e,children:t,...i}){return ce.jsx(rL,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...i,children:ce.jsx("div",{className:io("pt-0 pb-4",e),children:t})})}const sL=TO("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Xm({className:e,variant:t,asChild:i=!1,...a}){const u=i?PO:"span";return ce.jsx(u,{"data-slot":"badge",className:io(sL({variant:t}),e),...a})}const oT=[{id:"core-demographics",title:"Core Demographics",icon:"",description:"Basic demographic information including gender, age, and ethnicity",sections:[{title:"Gender",description:"Voter gender distribution",searchable:!0,collapsible:!0,items:[{id:"voters_gender_male",label:"Male Voters (M)",description:"Male voter segments - M = Male",category:"Demographics",taxonomy:"voters_gender",count:0,states:[]},{id:"voters_gender_female",label:"Female Voters (F)",description:"Female voter segments - F = Female",category:"Demographics",taxonomy:"voters_gender",count:0,states:[]}]},{title:"Age Groups",description:"Single age buckets (25, 30, ..., 75). Use combined ranges (e.g., >=45 includes 45, 50, 55...)",searchable:!0,collapsible:!0,items:[{id:"voters_age_25_34",label:"Ages 25-34",description:"Young adult voters (25, 30)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_35_44",label:"Ages 35-44",description:"Middle-aged voters (35, 40)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_45_54",label:"Ages 45-54",description:"Mature voters (45, 50)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_55_64",label:"Ages 55-64",description:"Pre-retirement voters (55, 60)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_65_75",label:"Ages 65-75",description:"Senior voters (65, 70, 75)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_45_plus",label:"Ages 45+",description:"Combined range >=45 (includes 45, 50, 55, 60, 65, 70, 75)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]}]},{title:"Ethnicity",description:"Ethnic and racial demographics - Segments: African American, Hispanic, White, Asian, Other",searchable:!0,collapsible:!0,items:[{id:"ethnic_description_african_american",label:"African American",description:"African American voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_hispanic",label:"Hispanic",description:"Hispanic voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_white",label:"White",description:"White voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_asian",label:"Asian",description:"Asian voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_other",label:"Other",description:"Other ethnicities",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]}]}]},{id:"geography",title:"Geography",icon:"",description:"Geographic districts, ZIP codes, and administrative boundaries",sections:[{title:"State Senate Districts",description:"2010 state senate districts - WY: 01-30, CA: 01-40. Normalize leading zeros (e.g., 01, 09). Always use 2010 version.",searchable:!0,collapsible:!0,items:[{id:"2010_state_senate_district_wy",label:"Wyoming Senate Districts (01-30)",description:"Wyoming state senate districts 01-30 with normalized leading zeros",category:"Geography",taxonomy:"2010_state_senate_district",count:0,states:["WY"]},{id:"2010_state_senate_district_ca",label:"California Senate Districts (01-40)",description:"California state senate districts 01-40 with normalized leading zeros",category:"Geography",taxonomy:"2010_state_senate_district",count:0,states:["CA"]}]},{title:"Congressional Districts",description:"2001 US Congressional districts - CA: 01-53, NY: 01-29. Normalize leading zeros.",searchable:!0,collapsible:!0,items:[{id:"2001_us_congressional_district_ca",label:"California Congressional Districts (01-53)",description:"California US Congressional districts 01-53 with normalized leading zeros",category:"Geography",taxonomy:"2001_us_congressional_district",count:0,states:["CA"]},{id:"2001_us_congressional_district_ny",label:"New York Congressional Districts (01-29)",description:"New York US Congressional districts 01-29 with normalized leading zeros",category:"Geography",taxonomy:"2001_us_congressional_district",count:0,states:["NY"]}]},{title:"ZIP Codes",description:"Standard 5-digit ZIPs (e.g., 90210)",searchable:!0,collapsible:!0,items:[{id:"2001_us_zipcode",label:"ZIP Codes",description:"Standard 5-digit ZIP codes (e.g., 90210)",category:"Geography",taxonomy:"2001_us_zipcode",count:0,states:[]}]}]},{id:"household-income",title:"Household & Income",icon:"",description:"Household composition and income brackets",sections:[{title:"Household Composition",description:"Categories of household types. Always include all variants with children.",searchable:!0,collapsible:!0,items:[{id:"commercialdata_hhcomposition_children",label:"Households with Children",description:"Households with children - Always include all variants with children",category:"Household",taxonomy:"commercialdata_hhcomposition",count:0,states:[]},{id:"commercialdata_hhcomposition_no_children",label:"Households without Children",description:"Households without children",category:"Household",taxonomy:"commercialdata_hhcomposition",count:0,states:[]}]},{title:"Income Brackets",description:"Brackets: <25k, 25-50k, 50-75k, 75-100k, >100k. For estimation, aggregate all 100,001+ ranges.",searchable:!0,collapsible:!0,items:[{id:"commercialdata_estimatedhhincome_under_25k",label:"Under $25,000",description:"Households earning under $25,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_25k_50k",label:"$25,000 - $50,000",description:"Households earning $25,000 - $50,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_50k_75k",label:"$50,000 - $75,000",description:"Households earning $50,000 - $75,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_75k_100k",label:"$75,000 - $100,000",description:"Households earning $75,000 - $100,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_over_100k",label:"Over $100,000",description:"Households earning over $100,000 (aggregate all 100,001+ ranges)",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]}]}]},{id:"consumer-data",title:"Consumer Data",icon:"",description:"Consumer behavior and purchasing patterns",sections:[{title:"Automotive",description:"Car ownership (Ford, Toyota, Kia, Hyundai, etc.). If multiple cars, second taxonomy captures overflow.",searchable:!0,collapsible:!0,items:[{id:"consumerdata_auto_make_1_ford",label:"Ford Owners (Primary)",description:"Ford vehicle owners - Primary car",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_1_toyota",label:"Toyota Owners (Primary)",description:"Toyota vehicle owners - Primary car",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_1_kia",label:"Kia Owners (Primary)",description:"Kia vehicle owners - Primary car",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_1_hyundai",label:"Hyundai Owners (Primary)",description:"Hyundai vehicle owners - Primary car",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_2_ford",label:"Ford Owners (Secondary)",description:"Ford vehicle owners - Secondary car",category:"Consumer",taxonomy:"consumerdata_auto_make_2",count:0,states:[]},{id:"consumerdata_auto_make_2_toyota",label:"Toyota Owners (Secondary)",description:"Toyota vehicle owners - Secondary car",category:"Consumer",taxonomy:"consumerdata_auto_make_2",count:0,states:[]}]}]},{id:"military-family",title:"Military & Family Background",icon:"",description:"Military service and family background",sections:[{title:"Military Service",description:"Military service in household - Segment >65 = Yes, Segment <=65 = No",searchable:!0,collapsible:!0,items:[{id:"hs_military_family_relationship_yes",label:"Military in Household",description:"Military service in household - Segment >65 = Yes (military family present)",category:"Military",taxonomy:"hs_military_family_relationship_yes",count:0,states:[]},{id:"hs_military_family_relationship_no",label:"No Military in Household",description:"No military service in household - Segment <=65 = No (no military family)",category:"Military",taxonomy:"hs_military_family_relationship_no",count:0,states:[]}]}]},{id:"political-views",title:"Political Views & Attitudes",icon:"",description:"All hs_* taxonomies = scaled opinion scores. Rule: >65 = Supporter/Positive, <=65 = Opposer/Negative",sections:[{title:"Israel & Foreign Policy",description:"Views on Israel, military actions, and foreign policy",searchable:!0,collapsible:!0,items:[{id:"hs_israel_military_actions_gop_support",label:"Israel Military Actions GOP Support",description:"Support for GOP stance on Israel military actions (segment >65 = Supporter)",category:"Foreign Policy",taxonomy:"hs_israel_military_actions_gop_support",count:0,states:[]},{id:"hs_ro_khanna_disapproval",label:"Ro Khanna Disapproval",description:"Disapproval of Representative Ro Khanna (segment >65 = Disapprover)",category:"Political Figures",taxonomy:"hs_ro_khanna_disapproval",count:0,states:[]}]},{title:"Ideology & Values",description:"Core ideological beliefs and value systems",searchable:!0,collapsible:!0,items:[{id:"hs_ideology_fiscal_conserv",label:"Fiscal Conservative",description:"Conservative fiscal policy views",category:"Economic Policy",taxonomy:"hs_ideology_fiscal_conserv",count:0,states:[]},{id:"hs_wealth_acquired_hardwork",label:"Wealth Through Hard Work",description:"Belief that wealth is acquired through hard work",category:"Economic Views",taxonomy:"hs_wealth_acquired_hardwork",count:0,states:[]},{id:"hs_wealth_acquired_advantages",label:"Wealth Through Advantages",description:"Belief that wealth comes from advantages",category:"Economic Views",taxonomy:"hs_wealth_acquired_advantages",count:0,states:[]}]},{title:"Voting & Democracy",description:"Views on voting, democracy, and political participation",searchable:!0,collapsible:!0,items:[{id:"hs_voting_fraud_concern_oppression",label:"Voting Fraud Concern",description:"Concern about voting fraud and oppression",category:"Democracy",taxonomy:"hs_voting_fraud_concern_oppression",count:0,states:[]}]}]},{id:"social-issues",title:"Social Issues",icon:"",description:"Social policy positions and community views",sections:[{title:"Gun Control",description:"Views on gun control and firearm regulations",searchable:!0,collapsible:!0,items:[{id:"hs_gun_control_support",label:"Gun Control Support",description:"Support for gun control measures",category:"Public Safety",taxonomy:"hs_gun_control_support",count:0,states:[]}]},{title:"Crime & Safety",description:"Views on crime, safety, and law enforcement",searchable:!0,collapsible:!0,items:[{id:"hs_violent_crime_not_worried",label:"Not Worried About Violent Crime",description:"Not concerned about violent crime",category:"Public Safety",taxonomy:"hs_violent_crime_not_worried",count:0,states:[]}]},{title:"Labor & Unions",description:"Views on labor unions and workers rights",searchable:!0,collapsible:!0,items:[{id:"hs_unions_beneficial",label:"Unions Beneficial",description:"Belief that unions are beneficial",category:"Labor",taxonomy:"hs_unions_beneficial",count:0,states:[]}]}]},{id:"media-trust",title:"Media & Trust",icon:"",description:"Media consumption and trust in information sources",sections:[{title:"News Sources",description:"Preferred news sources and media trust",searchable:!0,collapsible:!0,items:[{id:"hs_tv_most_trusted_news_msnbc",label:"MSNBC Most Trusted News",description:"MSNBC as most trusted news source",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_msnbc",count:0,states:[]}]},{title:"Science Trust",description:"Trust in science and scientific institutions",searchable:!0,collapsible:!0,items:[{id:"hs_trust_science_rarely",label:"Rarely Trust Science",description:"Rarely trust scientific institutions",category:"Science",taxonomy:"hs_trust_science_rarely",count:0,states:[]},{id:"hs_trust_science_always",label:"Always Trust Science",description:"Always trust scientific institutions",category:"Science",taxonomy:"hs_trust_science_always",count:0,states:[]}]}]},{id:"candidates",title:"Candidates & Elections",icon:"",description:"Candidate preferences and electoral choices",sections:[{title:"2024 Election",description:"Views on 2024 presidential candidates",searchable:!0,collapsible:!0,items:[{id:"hs_trump_vs_harris_favor_harris",label:"Favor Harris Over Trump",description:"Prefer Harris over Trump in 2024",category:"2024 Election",taxonomy:"hs_trump_vs_harris_favor_harris",count:0,states:[]}]},{title:"Political Teams",description:"Team affiliation and political identity",searchable:!0,collapsible:!0,items:[{id:"hs_tribalism_team_gop",label:"Team GOP",description:"Identify with GOP team",category:"Political Identity",taxonomy:"hs_tribalism_team_gop",count:0,states:[]},{id:"hs_tribalism_team_dem",label:"Team Democratic",description:"Identify with Democratic team",category:"Political Identity",taxonomy:"hs_tribalism_team_dem",count:0,states:[]}]}]},{id:"conspiracy-theories",title:"Conspiracy Theories",icon:"",description:"Beliefs in conspiracy theories and alternative explanations",sections:[{title:"Government Disclosure",description:"Views on government transparency and disclosure",searchable:!0,collapsible:!0,items:[{id:"hs_aliens_governenment_disclosed_all",label:"Government Disclosed All About Aliens",description:"Belief that government has disclosed all about aliens",category:"Conspiracy Theories",taxonomy:"hs_aliens_governenment_disclosed_all",count:0,states:[]}]}]},{id:"geographic-areas",title:"Geographic Areas",icon:"",description:"Geographic and administrative boundaries",sections:[{title:"Administrative Districts",description:"Various administrative and political districts",searchable:!0,collapsible:!0,items:[{id:"hamlet_community_area",label:"Hamlet Community Area",description:"Hamlet community areas",category:"Administrative",taxonomy:"hamlet_community_area",count:1165,states:[]},{id:"unified_school_district",label:"Unified School District",description:"Unified school districts",category:"Education",taxonomy:"unified_school_district",count:1037,states:[]},{id:"town_district",label:"Town District",description:"Town districts",category:"Administrative",taxonomy:"town_district",count:1035,states:[]},{id:"county_legislative_district",label:"County Legislative District",description:"County legislative districts",category:"Political",taxonomy:"county_legislative_district",count:578,states:[]},{id:"village",label:"Village",description:"Villages",category:"Administrative",taxonomy:"village",count:556,states:[]},{id:"city",label:"City",description:"Cities",category:"Administrative",taxonomy:"city",count:543,states:[]}]}]},{id:"economic-data",title:"Economic Data",icon:"",description:"Economic indicators and income data",sections:[{title:"Income Data",description:"Estimated household income and economic status",searchable:!0,collapsible:!0,items:[{id:"consumerdata_estimated_income_amount",label:"Estimated Income Amount",description:"Consumer data estimated income amount",category:"Income",taxonomy:"consumerdata_estimated_income_amount",count:443,states:[]},{id:"commercialdata_estimatedhhincomeamount",label:"Estimated HH Income Amount",description:"Commercial data estimated household income",category:"Income",taxonomy:"commercialdata_estimatedhhincomeamount",count:443,states:[]},{id:"consumerdata_estimatedareamedianhhincome",label:"Area Median HH Income",description:"Consumer data estimated area median household income",category:"Income",taxonomy:"consumerdata_estimatedareamedianhhincome",count:425,states:[]}]}]},{id:"migration",title:"Migration",icon:"",description:"Coded by origin state (NJ, OH, VA, ...). Summation shows % migrated into given state.",sections:[{title:"Migration Origins",description:"States where voters moved from. Summation shows % migrated into given state.",searchable:!0,collapsible:!0,items:[{id:"voters_movedfrom_state_nj",label:"Moved from New Jersey",description:"Voters who moved from New Jersey",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_oh",label:"Moved from Ohio",description:"Voters who moved from Ohio",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_va",label:"Moved from Virginia",description:"Voters who moved from Virginia",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]}]}]}];async function lL(){try{const i=(await(await fetch("/wycany.csv")).text()).split(`
`),a=[];for(let A=1;A<i.length;A++){const E=i[A].trim();if(!E)continue;const k=E.split(",");if(k.length>=4){const[D,j,G,U]=k;if(D&&j&&G&&U){const F=parseInt(G),X=parseFloat(U);!isNaN(F)&&!isNaN(X)&&a.push({state_code:D.trim(),taxonomy:j.trim(),segment:F,population_pct:X})}}}console.log(`Analyzed ${a.length} records from CSV`);const u=new Map,m=new Map;a.forEach(A=>{u.has(A.taxonomy)||u.set(A.taxonomy,{count:0,states:new Set,segments:new Set,populationPcts:[]});const E=u.get(A.taxonomy);E.count++,E.states.add(A.state_code),E.segments.add(A.segment),E.populationPcts.push(A.population_pct),m.has(A.state_code)||m.set(A.state_code,{totalRecords:0,uniqueTaxonomies:new Set,totalPopulationPct:0});const k=m.get(A.state_code);k.totalRecords++,k.uniqueTaxonomies.add(A.taxonomy),k.totalPopulationPct+=A.population_pct});const p=Array.from(u.entries()).map(([A,E])=>({taxonomy:A,count:E.count,states:Array.from(E.states),segments:Array.from(E.segments),avgPopulationPct:E.populationPcts.reduce((k,D)=>k+D,0)/E.populationPcts.length,maxPopulationPct:Math.max(...E.populationPcts),minPopulationPct:Math.min(...E.populationPcts)})).sort((A,E)=>E.count-A.count),l=Array.from(m.entries()).map(([A,E])=>({state:A,totalRecords:E.totalRecords,uniqueTaxonomies:E.uniqueTaxonomies.size,totalPopulationPct:E.totalPopulationPct})).sort((A,E)=>E.totalRecords-A.totalRecords),P={};return p.forEach(A=>{const E=cL(A.taxonomy);P[E]||(P[E]=[]),P[E].push(A)}),{totalRecords:a.length,uniqueTaxonomies:p.length,states:l,taxonomies:p,taxonomyCategories:P}}catch(e){throw console.error("Error analyzing CSV data:",e),e}}function cL(e){const t=e.toLowerCase();return t.includes("hs_")?t.includes("israel")||t.includes("military")||t.includes("foreign")?"Foreign Policy":t.includes("ideology")||t.includes("fiscal")||t.includes("conserv")?"Political Ideology":t.includes("voting")||t.includes("fraud")||t.includes("democracy")?"Democracy & Voting":t.includes("gun")||t.includes("crime")||t.includes("safety")?"Public Safety":t.includes("union")||t.includes("labor")||t.includes("worker")?"Labor & Unions":t.includes("tv")||t.includes("news")||t.includes("media")?"Media & News":t.includes("science")||t.includes("trust")?"Science & Trust":t.includes("trump")||t.includes("harris")||t.includes("election")?"Elections & Candidates":t.includes("tribalism")||t.includes("team")?"Political Identity":t.includes("wealth")||t.includes("income")||t.includes("economic")?"Economic Views":t.includes("alien")||t.includes("conspiracy")||t.includes("disclosure")?"Conspiracy Theories":"Political Views":t.includes("consumerdata")||t.includes("commercialdata")?"Economic Data":t.includes("hamlet")||t.includes("district")||t.includes("city")||t.includes("village")?"Geographic Areas":"Other"}async function uL(){console.log("Starting data source validation...");const e=await fetch("/wycany.csv");if(!e.ok)throw new Error(`Failed to load CSV: ${e.status} ${e.statusText}`);const i=(await e.text()).split(`
`),a=[];for(let E=1;E<i.length;E++){const k=i[E].trim();if(!k)continue;const D=k.split(",");if(D.length>=4){const[j,G,U,F]=D;if(j&&G&&U&&F){const X=parseFloat(F);if(!isNaN(X)){const J=parseInt(U),te=isNaN(J)?U.trim():J;a.push({state_code:j.trim(),taxonomy:G.trim(),segment:te,population_pct:X})}}}}console.log(`Parsed ${a.length} records for validation`);const u=new Map;a.forEach(E=>{u.has(E.taxonomy)||u.set(E.taxonomy,{segments:{},states:new Set,totalRecords:0});const k=u.get(E.taxonomy),D=E.segment.toString();k.segments[D]=(k.segments[D]||0)+1,k.states.add(E.state_code),k.totalRecords++});const m=Array.from(u.entries()).map(([E,k])=>({taxonomy:E,segments:k.segments,states:Array.from(k.states).sort(),totalRecords:k.totalRecords})),p={};if(u.has("commercialdata_estimatedhhincome")){const E=u.get("commercialdata_estimatedhhincome"),k=Object.keys(E.segments);p.commercialdata_estimatedhhincome={under_25k:k.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j<25e3}),"25k_50k":k.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j>=25e3&&j<5e4}),"50k_75k":k.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j>=5e4&&j<75e3}),"75k_100k":k.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j>=75e3&&j<1e5}),over_100k:k.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j>=1e5})}}if(u.has("voters_age")){const E=u.get("voters_age"),k=Object.keys(E.segments).map(Number).sort((D,j)=>D-j);p.voters_age={"18_34":k.filter(D=>D>=18&&D<=34).map(String),"35_54":k.filter(D=>D>=35&&D<=54).map(String),"55_74":k.filter(D=>D>=55&&D<=74).map(String),"75_plus":k.filter(D=>D>=75).map(String)}}if(u.has("voters_gender")&&(p.voters_gender={male:["M"],female:["F"]}),u.has("ethnic_description")){const E=u.get("ethnic_description"),k=Object.keys(E.segments);p.ethnic_description={african_american:k.filter(D=>D.includes("African")||D.includes("Af-Am")||D.includes("Af-Am")),hispanic:k.filter(D=>D.includes("Hispanic")),white:k.filter(D=>D.includes("White")||D.includes("European")||D.includes("German")||D.includes("Irish")||D.includes("Italian")||D.includes("English")||D.includes("French")||D.includes("Dutch")||D.includes("Swedish")||D.includes("Norwegian")||D.includes("Danish")),asian:k.filter(D=>D.includes("Asian")||D.includes("Chinese")||D.includes("Japanese")||D.includes("Korean")||D.includes("Vietnamese")||D.includes("Filipino")||D.includes("Indian")||D.includes("Pakistani")||D.includes("Bangladeshi"))}}const l=[];["voters_gender","voters_age","ethnic_description","commercialdata_estimatedhhincome","commercialdata_hhcomposition","consumerdata_auto_make_1","consumerdata_auto_make_2","hs_military_family_relationship_yes","hs_military_family_relationship_no","hs_israel_military_actions_gop_support","hs_ro_khanna_disapproval","hs_ideology_fiscal_conserv","hs_ideology_social_liberal","hs_voting_fraud_concern_oppression","hs_gun_control_support","hs_violent_crime_not_worried","hs_unions_beneficial","hs_tv_most_trusted_news_msnbc","hs_trust_science_rarely","hs_trust_science_always","hs_trump_vs_harris_favor_harris","hs_tribalism_team_gop","hs_tribalism_team_dem","hs_aliens_governenment_disclosed_all","voters_movedfrom_state"].forEach(E=>{u.has(E)||l.push(E)});const A={availableTaxonomies:m,missingTaxonomies:l,segmentMappings:p};return console.log("Data validation completed:",A),A}const YO={voters_age_18_34:{filterId:"voters_age_18_34",taxonomy:"voters_age",calculationType:"sum",sourceSegments:[18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34],description:"Sum of ages 18-34"},voters_age_35_54:{filterId:"voters_age_35_54",taxonomy:"voters_age",calculationType:"sum",sourceSegments:[35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54],description:"Sum of ages 35-54"},voters_age_55_74:{filterId:"voters_age_55_74",taxonomy:"voters_age",calculationType:"sum",sourceSegments:[55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],description:"Sum of ages 55-74"},voters_age_75_plus:{filterId:"voters_age_75_plus",taxonomy:"voters_age",calculationType:"sum",sourceSegments:[75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],description:"Sum of ages 75+"},ethnic_description_african_american:{filterId:"ethnic_description_african_american",taxonomy:"ethnic_description",calculationType:"sum",sourceSegments:["African or Af-Am Self Reported","Likely Af-Am (Modeled)"],description:"Sum of African American related ethnicities"},ethnic_description_white:{filterId:"ethnic_description_white",taxonomy:"ethnic_description",calculationType:"sum",sourceSegments:["English/Welsh","German","Irish","Italian","French","Dutch (Netherlands)","Norwegian","Swedish","Danish","Finnish","Polish","Czech","Hungarian","Austrian","Swiss","Scots"],description:"Sum of European descent ethnicities"},ethnic_description_asian:{filterId:"ethnic_description_asian",taxonomy:"ethnic_description",calculationType:"sum",sourceSegments:["Chinese","Japanese","Korean","Vietnamese","Filipino","Indian/Hindu","Pakistani","Bangladeshi","Sri Lankan","Thai","Indonesian","Malay","Myanmar (Burmese)","Laotian","Khmer","Tibetan","Bhutanese","Tonga","Unknown Asian"],description:"Sum of Asian descent ethnicities"},ethnic_description_other:{filterId:"ethnic_description_other",taxonomy:"ethnic_description",calculationType:"sum",sourceSegments:["Native American","Hawaiian","Arab","Armenian","Persian","Turkish","Albanian","Bulgarian","Croatian","Serbian","Slovenian","Slovakian","Romanian","Russian (omitting former Soviet States)","Ukrainian","Byelorussian","Estonian","Latvian","Lithuanian","Georgian","Azerb","Kazak","Uzbek","Turkmenistan","Mongolian","Afghan","Belgian","Greek","Portuguese"],description:"Sum of other ethnicities"},commercialdata_estimatedhhincome_under_25k:{filterId:"commercialdata_estimatedhhincome_under_25k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$1-25000"],description:"Household income under $25,000"},commercialdata_estimatedhhincome_25k_50k:{filterId:"commercialdata_estimatedhhincome_25k_50k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$25001-50000"],description:"Household income $25,000-$50,000"},commercialdata_estimatedhhincome_50k_75k:{filterId:"commercialdata_estimatedhhincome_50k_75k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$50001-75000"],description:"Household income $50,000-$75,000"},commercialdata_estimatedhhincome_75k_100k:{filterId:"commercialdata_estimatedhhincome_75k_100k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$75001-100000"],description:"Household income $75,000-$100,000"},commercialdata_estimatedhhincome_over_100k:{filterId:"commercialdata_estimatedhhincome_over_100k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$100001-125000","$125001-150000","$150001-175000","$175001-200000","$200001-225000","$225001-250000","$250000+"],description:"Household income over $100,000"}};function hL(e){return e in YO}function dL(e){return YO[e]}const fL=[{taxonomy:"voters_gender",rule:"segment_exact",segments:[77,78],description:"Gender segments: M = Male, F = Female"},{taxonomy:"voters_age",rule:"segment_range",range:[25,75],description:"Single age buckets (25, 30, ..., 75). Use combined ranges (e.g., >=45 includes 45, 50, 55...)"},{taxonomy:"ethnic_description",rule:"segment_exact",segments:[],description:"Segments: African American, Hispanic, White, Asian, Other"},{taxonomy:"2010_state_senate_district",rule:"segment_range",range:[1,40],description:"WY: 01-30, CA: 01-40. Normalize leading zeros (e.g., 01, 09). Always use 2010 version."},{taxonomy:"2001_us_congressional_district",rule:"segment_range",range:[1,53],description:"CA: 01-53, NY: 01-29. Normalize leading zeros."},{taxonomy:"2001_us_zipcode",rule:"segment_exact",segments:[],description:"Standard 5-digit ZIPs (e.g., 90210)"},{taxonomy:"commercialdata_hhcomposition",rule:"segment_aggregate",segments:[],description:"Categories of household types. Always include all variants with children."},{taxonomy:"commercialdata_estimatedhhincome",rule:"segment_aggregate",segments:[],description:"Brackets: <25k, 25-50k, 50-75k, 75-100k, >100k. For estimation, aggregate all 100,001+ ranges."},{taxonomy:"consumerdata_auto_make_1",rule:"segment_exact",segments:[],description:"Car ownership (Ford, Toyota, Kia, Hyundai, etc.)"},{taxonomy:"consumerdata_auto_make_2",rule:"segment_exact",segments:[],description:"If multiple cars, second taxonomy captures overflow."},{taxonomy:"hs_military_family_relationship_yes",rule:"segment_threshold",threshold:65,description:"Segment >65 = Yes (military family present)"},{taxonomy:"hs_military_family_relationship_no",rule:"segment_threshold",threshold:65,description:"Segment <=65 = No (no military family)"},{taxonomy:"voters_movedfrom_state",rule:"segment_exact",segments:[],description:"Coded by origin state (NJ, OH, VA, ...). Summation shows % migrated into given state."}],pL={taxonomy:"hs_*",rule:"segment_threshold",threshold:65,description:"All hs_* taxonomies = scaled opinion scores. Rule: >65 = Supporter/Positive, <=65 = Opposer/Negative"},sT={CA:23094847,NY:12363444,WY:342030};async function mL(e,t){if(t.size===0)return{totalPopulation:0,matchingPopulation:0,percentage:0,stateBreakdown:[]};console.log(`Applying estimation logic for ${t.size} selected filters`),console.log("Selected filters:",Array.from(t));const i=await uL();console.log("Validation result loaded:",i),console.log("Segment mappings for voters_gender:",i.segmentMappings.voters_gender);const a=gL(t,i);console.log("Filter combinations:",a);const u=new Map;Object.keys(sT).forEach(E=>{u.set(E,{total:0,matching:0})});const m=a.filter(E=>E.isGeographicFilter),p=a.filter(E=>!E.isGeographicFilter);if(m.length>0){const E=m.map(k=>k.targetState).filter(Boolean);console.log("Geographic filters selected for states:",E),console.log("Data filters to apply:",p.length),u.forEach((k,D)=>{if(E.includes(D)){if(p.length>0){const j=e.filter(U=>U.state_code===D);console.log(`Processing state ${D} with ${j.length} records and ${p.length} data filters`);const G=lT(j,p);k.matching=G,console.log(`State ${D} (selected with data filters): ${k.matching}%`)}else k.matching=100,console.log(`State ${D} (selected, no data filters): 100%`);k.total=100}else k.matching=0,k.total=100,console.log(`State ${D} (not selected): 0%`)})}else u.forEach((E,k)=>{const D=e.filter(G=>G.state_code===k);console.log(`Processing state ${k} with ${D.length} records`);const j=lT(D,a);console.log(`State ${k} intersection: ${j}%`),E.matching=j,E.total=100});const l=[];let P=0,A=0;return u.forEach((E,k)=>{const D=sT[k]||0,j=E.matching/100*D;j>0&&l.push({state:k,population:D,matchingPopulation:j,percentage:E.matching}),P+=D,A+=j}),console.log(`Estimation complete: ${A.toLocaleString()} matching population out of ${P.toLocaleString()} total`),{totalPopulation:P,matchingPopulation:A,percentage:P>0?A/P*100:0,stateBreakdown:l.sort((E,k)=>k.matchingPopulation-E.matchingPopulation)}}function gL(e,t){const i=[];return e.forEach(a=>{if(a.startsWith("state-")){const l=a.replace("state-","");i.push({taxonomy:"geographic_filter",segment:"all",rule:"geographic_filter",isGeographicFilter:!0,targetState:l});return}const u=wL(a);if(!u)return;const m=yL(a,u,t),p=SL(u).rule;console.log(`Creating combination for ${a}: taxonomy=${u}, segment=${m}, rule=${p}`),i.push({taxonomy:u,segment:m,rule:p})}),i}function yL(e,t,i){if(hL(e)){const a=dL(e);if(a)return console.log(`Using calculated filter: ${e} -> ${a.sourceSegments.length} source segments`),a.sourceSegments}if(i&&i.segmentMappings[t]){const a=i.segmentMappings[t];console.log(`Using validation mappings for ${t}:`,a);for(const[u,m]of Object.entries(a))if(console.log(`Checking validation mapping: ${u} against filterId: ${e}`),e.endsWith(`_${u}`))return console.log(`Found validation mapping: ${u} -> ${m}`),m}if(t==="voters_gender"){console.log(`Processing gender filter: ${e}, taxonomy: ${t}`);const a=e.includes("male")?"M":"F";return console.log(`Gender filter ${e} mapped to segment: ${a}`),a}if(t==="2010_state_senate_district")return e.includes("wy")?[1,30]:e.includes("ca")?[1,40]:[1,40];if(t==="2001_us_congressional_district")return e.includes("ca")?[1,53]:e.includes("ny")?[1,29]:[1,53];if(t==="2001_us_zipcode")return"All";if(t==="commercialdata_hhcomposition")return e.includes("children")?"children":"no_children";if(t==="commercialdata_estimatedhhincome")return e.includes("under_25k")?["$1-25000"]:e.includes("25k_50k")?["$25001-50000"]:e.includes("50k_75k")?["$50001-75000"]:e.includes("75k_100k")?["$75001-100000"]:e.includes("over_100k")?["$100001-125000","$125001-150000","$150001-175000","$175001-200000","$200001-225000","$225001-250000","$250000+"]:["$1-25000","$25001-50000","$50001-75000","$75001-100000","$100001-125000","$125001-150000","$150001-175000","$175001-200000","$200001-225000","$225001-250000","$250000+"];if(t==="consumerdata_auto_make_1"||t==="consumerdata_auto_make_2")return console.log(`Processing consumer data filter: ${e}, taxonomy: ${t}`),console.log(`Filter ID includes 'toyota': ${e.includes("toyota")}`),e.includes("ford")?(console.log("Ford filter mapped to segment: Ford"),"Ford"):e.includes("toyota")?(console.log("Toyota filter mapped to segment: Toyota"),"Toyota"):e.includes("honda")?(console.log("Honda filter mapped to segment: Honda"),"Honda"):e.includes("chevrolet")?(console.log("Chevrolet filter mapped to segment: Chevrolet"),"Chevrolet"):e.includes("nissan")?(console.log("Nissan filter mapped to segment: Nissan"),"Nissan"):e.includes("kia")?(console.log("Kia filter mapped to segment: Kia"),"Kia"):e.includes("hyundai")?(console.log("Hyundai filter mapped to segment: Hyundai"),"Hyundai"):e.includes("bmw")?(console.log("BMW filter mapped to segment: BMW"),"BMW"):e.includes("mercedes")?(console.log("Mercedes filter mapped to segment: Mercedes-Benz"),"Mercedes-Benz"):e.includes("audi")?(console.log("Audi filter mapped to segment: Audi"),"Audi"):(console.log(`Consumer data filter ${e} mapped to 'All'`),"All");if(t==="hs_military_family_relationship_yes")return">65";if(t==="hs_military_family_relationship_no")return"<=65";if(t==="ethnic_description"){if(console.log(`Processing ethnicity filter: ${e}, taxonomy: ${t}`),e.includes("african_american")){const a=["African or Af-Am Self Reported","Likely Af-Am (Modeled)"];return console.log(`African American filter mapped to segments: ${a.join(", ")}`),a}if(e.includes("hispanic"))return console.log("Hispanic filter mapped to segment: Hispanic"),"Hispanic";if(e.includes("white")){const a=["English/Welsh","German","Irish","Italian","French","Dutch (Netherlands)","Norwegian","Swedish","Danish","Finnish","Polish","Czech","Hungarian","Austrian","Swiss","Scots"];return console.log(`White filter mapped to ${a.length} segments`),a}if(e.includes("asian")){const a=["Chinese","Japanese","Korean","Vietnamese","Filipino","Indian/Hindu","Pakistani","Bangladeshi","Sri Lankan","Thai","Indonesian","Malay","Myanmar (Burmese)","Laotian","Khmer","Tibetan","Bhutanese","Tonga","Unknown Asian"];return console.log(`Asian filter mapped to ${a.length} segments`),a}if(e.includes("other")){const a=["Native American","Hawaiian","Arab","Armenian","Persian","Turkish","Albanian","Bulgarian","Croatian","Serbian","Slovenian","Slovakian","Romanian","Russian (omitting former Soviet States)","Ukrainian","Byelorussian","Estonian","Latvian","Lithuanian","Georgian","Azerb","Kazak","Uzbek","Turkmenistan","Mongolian","Afghan","Belgian","Greek","Portuguese"];return console.log(`Other ethnicity filter mapped to ${a.length} segments`),a}return console.log(`Ethnicity filter ${e} mapped to 'All'`),"All"}return t==="voters_movedfrom_state"?(console.log(`Processing migration filter: ${e}, taxonomy: ${t}`),e.includes("ca")?(console.log("CA migration filter mapped to segment: CA"),"CA"):e.includes("ny")?(console.log("NY migration filter mapped to segment: NY"),"NY"):e.includes("tx")?(console.log("TX migration filter mapped to segment: TX"),"TX"):e.includes("fl")?(console.log("FL migration filter mapped to segment: FL"),"FL"):e.includes("nj")?(console.log("NJ migration filter mapped to segment: NJ"),"NJ"):e.includes("oh")?(console.log("OH migration filter mapped to segment: OH"),"OH"):e.includes("va")?(console.log("VA migration filter mapped to segment: VA"),"VA"):e.includes("il")?(console.log("IL migration filter mapped to segment: IL"),"IL"):e.includes("pa")?(console.log("PA migration filter mapped to segment: PA"),"PA"):e.includes("ga")?(console.log("GA migration filter mapped to segment: GA"),"GA"):(console.log(`Migration filter ${e} mapped to 'All'`),"All")):t.startsWith("hs_")?e.includes("supporter")?"supporter":e.includes("opposer")?"opposer":"supporter":"All"}function lT(e,t){if(t.length===0)return 0;const i=t.filter(l=>l.isGeographicFilter),a=t.filter(l=>!l.isGeographicFilter);if(i.length>0)if(a.length>0)console.log(`Applying ${a.length} data filters to state data`);else return 100;if(a.length===0)return 0;const u=new Map;a.forEach(l=>{u.has(l.taxonomy)||u.set(l.taxonomy,[]),u.get(l.taxonomy).push(l)});const m=[];if(u.forEach((l,P)=>{if(vL(P)){const A=_L(e,l,P);m.push(A),console.log(`Demographic filter ${P} (UNION): ${A}%`)}else{const A=bL(e,l,P);m.push(A),console.log(`Political filter ${P} (INTERSECTION): ${A}%`)}}),m.length===0)return 0;const p=m.reduce((l,P)=>l*(P/100),100);return console.log(`Final calculation: ${m.join("  ")} = ${p}%`),p}function vL(e){return["voters_gender","voters_age","ethnic_description","commercialdata_estimatedhhincome","consumerdata_auto_make_1","consumerdata_auto_make_2","voters_movedfrom_state"].includes(e)}function _L(e,t,i){if(console.log(`Calculating union for ${i} with filters:`,t),console.log(`Available ${i} data:`,e.filter(m=>m.taxonomy===i).map(m=>({segment:m.segment,pct:m.population_pct}))),i==="voters_age")return console.log(`Using calculated filter logic for age taxonomy: ${i}`),xL(e,t,i);console.log(`Processing union for ${i} with ${t.length} filters:`,t.map(m=>({taxonomy:m.taxonomy,segment:m.segment,rule:m.rule})));const a=e.filter(m=>m.taxonomy===i&&t.some(p=>{const l=JO(m,p);return console.log(`Row ${m.segment} matches filter ${p.segment}: ${l}`),l}));console.log(`Found ${a.length} matching rows for ${i}:`,a),console.log(`All available ${i} rows in data:`,e.filter(m=>m.taxonomy===i));const u=a.reduce((m,p)=>m+p.population_pct,0);return console.log(`Total percentage for ${i}: ${u}%`),u}function xL(e,t,i){console.log(`Calculating percentage for calculated filters in ${i}`);const a=e.filter(m=>m.taxonomy!==i?!1:t.some(p=>Array.isArray(p.segment)?p.segment.includes(m.segment):m.segment===p.segment)),u=a.reduce((m,p)=>m+p.population_pct,0);return console.log(`Calculated filter percentage for ${i}: ${u}% (${a.length} matching rows)`),u}function bL(e,t,i){const a=[];return t.forEach(m=>{const l=e.filter(P=>P.taxonomy===i&&JO(P,m)).reduce((P,A)=>P+A.population_pct,0);a.push(l)}),a.length===0?0:a.reduce((m,p)=>m*(p/100),100)}function JO(e,t){if(t.taxonomy==="2010_state_senate_district"||t.taxonomy==="2001_us_congressional_district"){if(e.segment.toString().padStart(2,"0"),Array.isArray(t.segment)&&t.segment.length===2){const[i,a]=t.segment;if(typeof e.segment=="number")return e.segment>=i&&e.segment<=a}return!1}if(t.taxonomy==="commercialdata_estimatedhhincome"){if(Array.isArray(t.segment)){const i=e.segment.toString(),a=t.segment.includes(i);return console.log(`Checking income segment ${i} against brackets:`,t.segment,"Match:",a),a}return!1}if(t.taxonomy==="commercialdata_hhcomposition")return t.segment==="children";if(t.taxonomy.startsWith("hs_"))return t.segment==="supporter"||t.segment===">65"?typeof e.segment=="number"&&e.segment>65:t.segment==="opposer"||t.segment==="<=65"?typeof e.segment=="number"&&e.segment<=65:!1;if(typeof t.segment=="number")return e.segment===t.segment;if(Array.isArray(t.segment))return t.segment.length>0&&typeof t.segment[0]=="string"?t.segment.includes(e.segment.toString()):t.segment.includes(e.segment);if(typeof t.segment=="string"){const i=e.segment.toString()===t.segment;return console.log(`String matching: row.segment="${e.segment}" vs filter.segment="${t.segment}" = ${i}`),i}return!1}function wL(e){if(e.includes("_")){const t=e.split("_");if(t.length>=2)return e.startsWith("commercialdata_estimatedhhincome_")?"commercialdata_estimatedhhincome":e.startsWith("voters_age_")?"voters_age":e.startsWith("consumerdata_auto_make_")?"consumerdata_auto_make_1":e.startsWith("ethnic_description_")?"ethnic_description":e.startsWith("voters_movedfrom_state_")?"voters_movedfrom_state":t.slice(0,-1).join("_")}return e}function SL(e){const t=fL.find(i=>i.taxonomy===e);return t||(e.startsWith("hs_")?pL:{taxonomy:e,rule:"segment_exact",segments:[],description:"Default rule for unknown taxonomy"})}const PL=[{id:"area-selection",title:"Area Selection",icon:"",description:"Geographic area selection for analysis",sections:[{title:"States",description:"Select states to analyze",searchable:!0,collapsible:!0,items:[{id:"state-CA",label:"California (CA)",description:"California state - 23.1M population",category:"Geographic Areas",taxonomy:"state",count:0,states:["CA"]},{id:"state-NY",label:"New York (NY)",description:"New York state - 20.2M population",category:"Geographic Areas",taxonomy:"state",count:0,states:["NY"]},{id:"state-WY",label:"Wyoming (WY)",description:"Wyoming state - 576K population",category:"Geographic Areas",taxonomy:"state",count:0,states:["WY"]}]}]},{id:"core-demographics",title:"Core Demographics",icon:"",description:"Basic demographic information",sections:[{title:"Gender",description:"Voter gender distribution (6 records)",searchable:!0,collapsible:!0,items:[{id:"voters_gender_male",label:"Male Voters",description:"Male voter segments (M)",category:"Demographics",taxonomy:"voters_gender",count:0,states:[]},{id:"voters_gender_female",label:"Female Voters",description:"Female voter segments (F)",category:"Demographics",taxonomy:"voters_gender",count:0,states:[]}]},{title:"Age Groups",description:"Voter age distribution (243 records, ages 18-100)",searchable:!0,collapsible:!0,items:[{id:"voters_age_18_34",label:"Ages 18-34",description:"Young adult voters (18-34)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_35_54",label:"Ages 35-54",description:"Middle-aged voters (35-54)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_55_74",label:"Ages 55-74",description:"Mature voters (55-74)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_75_plus",label:"Ages 75+",description:"Senior voters (75+)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]}]},{title:"Ethnicity",description:"Ethnic and racial demographics (172 records)",searchable:!0,collapsible:!0,items:[{id:"ethnic_description_african_american",label:"African American",description:"African American voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_hispanic",label:"Hispanic",description:"Hispanic voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_white",label:"White",description:"White voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_asian",label:"Asian",description:"Asian voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]}]}]},{id:"household-income",title:"Household & Income",icon:"",description:"Household composition and income brackets",sections:[{title:"Income Brackets",description:"Household income distribution (32 records)",searchable:!0,collapsible:!0,items:[{id:"commercialdata_estimatedhhincome_under_25k",label:"Under $25,000",description:"Households earning under $25,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_25k_50k",label:"$25,000 - $50,000",description:"Households earning $25,000 - $50,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_50k_75k",label:"$50,000 - $75,000",description:"Households earning $50,000 - $75,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_75k_100k",label:"$75,000 - $100,000",description:"Households earning $75,000 - $100,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_over_100k",label:"Over $100,000",description:"Households earning over $100,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]}]}]},{id:"consumer-data",title:"Consumer Data",icon:"",description:"Consumer behavior and purchasing patterns",sections:[{title:"Automotive",description:"Car ownership and preferences (114 primary, 101 secondary)",searchable:!0,collapsible:!0,items:[{id:"consumerdata_auto_make_ford",label:"Ford Owners",description:"Ford vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_toyota",label:"Toyota Owners",description:"Toyota vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_honda",label:"Honda Owners",description:"Honda vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_chevrolet",label:"Chevrolet Owners",description:"Chevrolet vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_nissan",label:"Nissan Owners",description:"Nissan vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]}]}]},{id:"political-views",title:"Political Views & Attitudes",icon:"",description:"Political opinions, attitudes, and ideological positions (390+ filters)",sections:[{title:"Elections & Candidates",description:"2024 election preferences and candidate views",searchable:!0,collapsible:!0,items:[{id:"hs_trump_vs_harris_favor_harris_supporter",label:"Harris vs Trump (Favor Harris)",description:"Favors Harris in Trump vs Harris matchup (segment >65)",category:"Elections",taxonomy:"hs_trump_vs_harris_favor_harris",count:0,states:[]},{id:"hs_trump_vs_harris_favor_harris_opposer",label:"Harris vs Trump (Oppose Harris)",description:"Opposes Harris in Trump vs Harris matchup (segment 65)",category:"Elections",taxonomy:"hs_trump_vs_harris_favor_harris",count:0,states:[]},{id:"hs_biden_approval_supporter",label:"Biden Approval (Supporter)",description:"Approves of Biden (segment >65)",category:"Elections",taxonomy:"hs_biden_approval",count:0,states:[]},{id:"hs_biden_approval_opposer",label:"Biden Approval (Opposer)",description:"Disapproves of Biden (segment 65)",category:"Elections",taxonomy:"hs_biden_approval",count:0,states:[]},{id:"hs_trump_approval_supporter",label:"Trump Approval (Supporter)",description:"Approves of Trump (segment >65)",category:"Elections",taxonomy:"hs_trump_approval",count:0,states:[]},{id:"hs_trump_approval_opposer",label:"Trump Approval (Opposer)",description:"Disapproves of Trump (segment 65)",category:"Elections",taxonomy:"hs_trump_approval",count:0,states:[]},{id:"hs_harris_approval_supporter",label:"Harris Approval (Supporter)",description:"Approves of Harris (segment >65)",category:"Elections",taxonomy:"hs_harris_approval",count:0,states:[]},{id:"hs_harris_approval_opposer",label:"Harris Approval (Opposer)",description:"Disapproves of Harris (segment 65)",category:"Elections",taxonomy:"hs_harris_approval",count:0,states:[]},{id:"hs_newsom_approval_supporter",label:"Newsom Approval (Supporter)",description:"Approves of Newsom (segment >65)",category:"Elections",taxonomy:"hs_newsom_approval",count:0,states:[]},{id:"hs_newsom_approval_opposer",label:"Newsom Approval (Opposer)",description:"Disapproves of Newsom (segment 65)",category:"Elections",taxonomy:"hs_newsom_approval",count:0,states:[]},{id:"hs_bernie_approval_supporter",label:"Bernie Sanders Approval (Supporter)",description:"Approves of Bernie Sanders (segment >65)",category:"Elections",taxonomy:"hs_bernie_approval",count:0,states:[]},{id:"hs_bernie_approval_opposer",label:"Bernie Sanders Approval (Opposer)",description:"Disapproves of Bernie Sanders (segment 65)",category:"Elections",taxonomy:"hs_bernie_approval",count:0,states:[]},{id:"hs_aoc_approval_supporter",label:"AOC Approval (Supporter)",description:"Approves of Alexandria Ocasio-Cortez (segment >65)",category:"Elections",taxonomy:"hs_aoc_approval",count:0,states:[]},{id:"hs_aoc_approval_opposer",label:"AOC Approval (Opposer)",description:"Disapproves of Alexandria Ocasio-Cortez (segment 65)",category:"Elections",taxonomy:"hs_aoc_approval",count:0,states:[]}]},{title:"Party Affiliation",description:"Political party identification and loyalty",searchable:!0,collapsible:!0,items:[{id:"hs_tribalism_team_dem_supporter",label:"Team Democrat (Supporter)",description:"Strongly identifies with Democratic party (segment >65)",category:"Party Affiliation",taxonomy:"hs_tribalism_team_dem",count:0,states:[]},{id:"hs_tribalism_team_dem_opposer",label:"Team Democrat (Opposer)",description:"Does not identify with Democratic party (segment 65)",category:"Party Affiliation",taxonomy:"hs_tribalism_team_dem",count:0,states:[]},{id:"hs_tribalism_team_gop_supporter",label:"Team GOP (Supporter)",description:"Strongly identifies with Republican party (segment >65)",category:"Party Affiliation",taxonomy:"hs_tribalism_team_gop",count:0,states:[]},{id:"hs_tribalism_team_gop_opposer",label:"Team GOP (Opposer)",description:"Does not identify with Republican party (segment 65)",category:"Party Affiliation",taxonomy:"hs_tribalism_team_gop",count:0,states:[]}]},{title:"Social Issues",description:"Views on social and cultural issues",searchable:!0,collapsible:!0,items:[{id:"hs_gun_control_support_supporter",label:"Gun Control Support (Supporter)",description:"Supports stricter gun control (segment >65)",category:"Social Issues",taxonomy:"hs_gun_control_support",count:0,states:[]},{id:"hs_gun_control_support_opposer",label:"Gun Control Support (Opposer)",description:"Opposes stricter gun control (segment 65)",category:"Social Issues",taxonomy:"hs_gun_control_support",count:0,states:[]},{id:"hs_same_sex_marriage_support_supporter",label:"Same-Sex Marriage Support (Supporter)",description:"Supports same-sex marriage (segment >65)",category:"Social Issues",taxonomy:"hs_same_sex_marriage_support",count:0,states:[]},{id:"hs_same_sex_marriage_support_opposer",label:"Same-Sex Marriage Support (Opposer)",description:"Opposes same-sex marriage (segment 65)",category:"Social Issues",taxonomy:"hs_same_sex_marriage_support",count:0,states:[]}]},{title:"Economic Issues",description:"Views on economic and fiscal policies",searchable:!0,collapsible:!0,items:[{id:"hs_ideology_fiscal_conserv_supporter",label:"Fiscal Conservative (Supporter)",description:"Identifies as fiscally conservative (segment >65)",category:"Economic Issues",taxonomy:"hs_ideology_fiscal_conserv",count:0,states:[]},{id:"hs_ideology_fiscal_conserv_opposer",label:"Fiscal Conservative (Opposer)",description:"Does not identify as fiscally conservative (segment 65)",category:"Economic Issues",taxonomy:"hs_ideology_fiscal_conserv",count:0,states:[]},{id:"hs_medicare_for_all_support_supporter",label:"Medicare for All Support (Supporter)",description:"Supports Medicare for All (segment >65)",category:"Economic Issues",taxonomy:"hs_medicare_for_all_support",count:0,states:[]},{id:"hs_medicare_for_all_support_opposer",label:"Medicare for All Support (Opposer)",description:"Opposes Medicare for All (segment 65)",category:"Economic Issues",taxonomy:"hs_medicare_for_all_support",count:0,states:[]}]},{title:"Foreign Policy",description:"Views on international relations and foreign policy",searchable:!0,collapsible:!0,items:[{id:"hs_israel_military_actions_gop_support_supporter",label:"Israel Military Actions GOP Support (Supporter)",description:"Supports GOP stance on Israel military actions (segment >65)",category:"Foreign Policy",taxonomy:"hs_israel_military_actions_gop_support",count:0,states:[]},{id:"hs_israel_military_actions_gop_support_opposer",label:"Israel Military Actions GOP Support (Opposer)",description:"Opposes GOP stance on Israel military actions (segment 65)",category:"Foreign Policy",taxonomy:"hs_israel_military_actions_gop_support",count:0,states:[]}]},{title:"Economic Policy",description:"Views on economic and fiscal policies",searchable:!0,collapsible:!0,items:[{id:"hs_medicare_for_all_support_supporter",label:"Medicare for All (Supporter)",description:"Supports Medicare for All (segment >65)",category:"Economic Policy",taxonomy:"hs_medicare_for_all_support",count:0,states:[]},{id:"hs_medicare_for_all_support_opposer",label:"Medicare for All (Opposer)",description:"Opposes Medicare for All (segment 65)",category:"Economic Policy",taxonomy:"hs_medicare_for_all_support",count:0,states:[]},{id:"hs_min_wage_15_increase_support_supporter",label:"$15 Minimum Wage (Supporter)",description:"Supports $15 minimum wage increase (segment >65)",category:"Economic Policy",taxonomy:"hs_min_wage_15_increase_support",count:0,states:[]},{id:"hs_min_wage_15_increase_support_opposer",label:"$15 Minimum Wage (Opposer)",description:"Opposes $15 minimum wage increase (segment 65)",category:"Economic Policy",taxonomy:"hs_min_wage_15_increase_support",count:0,states:[]},{id:"hs_tax_cuts_support_supporter",label:"Tax Cuts (Supporter)",description:"Supports tax cuts (segment >65)",category:"Economic Policy",taxonomy:"hs_tax_cuts_support",count:0,states:[]},{id:"hs_tax_cuts_support_opposer",label:"Tax Cuts (Opposer)",description:"Opposes tax cuts (segment 65)",category:"Economic Policy",taxonomy:"hs_tax_cuts_support",count:0,states:[]},{id:"hs_income_inequality_serious_supporter",label:"Income Inequality Serious (Supporter)",description:"Views income inequality as serious (segment >65)",category:"Economic Policy",taxonomy:"hs_income_inequality_serious",count:0,states:[]},{id:"hs_income_inequality_serious_opposer",label:"Income Inequality Serious (Opposer)",description:"Does not view income inequality as serious (segment 65)",category:"Economic Policy",taxonomy:"hs_income_inequality_serious",count:0,states:[]}]},{title:"Environment & Climate",description:"Views on environmental and climate policies",searchable:!0,collapsible:!0,items:[{id:"hs_climate_change_believer_supporter",label:"Climate Change Believer (Supporter)",description:"Believes in climate change (segment >65)",category:"Environment",taxonomy:"hs_climate_change_believer",count:0,states:[]},{id:"hs_climate_change_believer_opposer",label:"Climate Change Believer (Opposer)",description:"Does not believe in climate change (segment 65)",category:"Environment",taxonomy:"hs_climate_change_believer",count:0,states:[]},{id:"hs_green_new_deal_support_supporter",label:"Green New Deal (Supporter)",description:"Supports Green New Deal (segment >65)",category:"Environment",taxonomy:"hs_green_new_deal_support",count:0,states:[]},{id:"hs_green_new_deal_support_opposer",label:"Green New Deal (Opposer)",description:"Opposes Green New Deal (segment 65)",category:"Environment",taxonomy:"hs_green_new_deal_support",count:0,states:[]},{id:"hs_consumer_value_environment_supporter",label:"Environmental Values (Supporter)",description:"Values environmental protection (segment >65)",category:"Environment",taxonomy:"hs_consumer_value_environment",count:0,states:[]},{id:"hs_consumer_value_environment_opposer",label:"Environmental Values (Opposer)",description:"Does not prioritize environmental protection (segment 65)",category:"Environment",taxonomy:"hs_consumer_value_environment",count:0,states:[]}]},{title:"Immigration & Border",description:"Views on immigration and border policies",searchable:!0,collapsible:!0,items:[{id:"hs_immigration_undesirable_supporter",label:"Immigration Undesirable (Supporter)",description:"Views immigration as undesirable (segment >65)",category:"Immigration",taxonomy:"hs_immigration_undesirable",count:0,states:[]},{id:"hs_immigration_undesirable_opposer",label:"Immigration Undesirable (Opposer)",description:"Does not view immigration as undesirable (segment 65)",category:"Immigration",taxonomy:"hs_immigration_undesirable",count:0,states:[]},{id:"hs_mexican_wall_support_supporter",label:"Mexican Wall (Supporter)",description:"Supports Mexican border wall (segment >65)",category:"Immigration",taxonomy:"hs_mexican_wall_support",count:0,states:[]},{id:"hs_mexican_wall_support_opposer",label:"Mexican Wall (Opposer)",description:"Opposes Mexican border wall (segment 65)",category:"Immigration",taxonomy:"hs_mexican_wall_support",count:0,states:[]},{id:"hs_mass_deporations_support_supporter",label:"Mass Deportations (Supporter)",description:"Supports mass deportations (segment >65)",category:"Immigration",taxonomy:"hs_mass_deporations_support",count:0,states:[]},{id:"hs_mass_deporations_support_opposer",label:"Mass Deportations (Opposer)",description:"Opposes mass deportations (segment 65)",category:"Immigration",taxonomy:"hs_mass_deporations_support",count:0,states:[]}]},{title:"Media & Trust",description:"Trust in news sources and information",searchable:!0,collapsible:!0,items:[{id:"hs_tv_most_trusted_news_fox_supporter",label:"Fox News Trusted (Supporter)",description:"Trusts Fox News most (segment >65)",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_fox",count:0,states:[]},{id:"hs_tv_most_trusted_news_fox_opposer",label:"Fox News Trusted (Opposer)",description:"Does not trust Fox News most (segment 65)",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_fox",count:0,states:[]},{id:"hs_tv_most_trusted_news_cnn_supporter",label:"CNN Trusted (Supporter)",description:"Trusts CNN most (segment >65)",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_cnn",count:0,states:[]},{id:"hs_tv_most_trusted_news_cnn_opposer",label:"CNN Trusted (Opposer)",description:"Does not trust CNN most (segment 65)",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_cnn",count:0,states:[]},{id:"hs_trust_science_always_supporter",label:"Always Trusts Science (Supporter)",description:"Always trusts scientific information (segment >65)",category:"Media Trust",taxonomy:"hs_trust_science_always",count:0,states:[]},{id:"hs_trust_science_always_opposer",label:"Always Trusts Science (Opposer)",description:"Does not always trust scientific information (segment 65)",category:"Media Trust",taxonomy:"hs_trust_science_always",count:0,states:[]}]},{title:"Conspiracy Theories",description:"Beliefs in conspiracy theories",searchable:!0,collapsible:!0,items:[{id:"hs_qanon_believer_supporter",label:"QAnon Believer (Supporter)",description:"Believes in QAnon (segment >65)",category:"Conspiracy",taxonomy:"hs_qanon_believer",count:0,states:[]},{id:"hs_qanon_believer_opposer",label:"QAnon Believer (Opposer)",description:"Does not believe in QAnon (segment 65)",category:"Conspiracy",taxonomy:"hs_qanon_believer",count:0,states:[]},{id:"hs_aliens_governenment_hiding_much_supporter",label:"Aliens Government Hiding (Supporter)",description:"Believes government is hiding alien information (segment >65)",category:"Conspiracy",taxonomy:"hs_aliens_governenment_hiding_much",count:0,states:[]},{id:"hs_aliens_governenment_hiding_much_opposer",label:"Aliens Government Hiding (Opposer)",description:"Does not believe government is hiding alien information (segment 65)",category:"Conspiracy",taxonomy:"hs_aliens_governenment_hiding_much",count:0,states:[]},{id:"hs_conspiracy_believer_supporter",label:"Conspiracy Believer (Supporter)",description:"Believes in government conspiracies (segment >65)",category:"Conspiracy",taxonomy:"hs_conspiracy_believer",count:0,states:[]},{id:"hs_conspiracy_believer_opposer",label:"Conspiracy Believer (Opposer)",description:"Does not believe in government conspiracies (segment 65)",category:"Conspiracy",taxonomy:"hs_conspiracy_believer",count:0,states:[]}]}]},{id:"migration",title:"Migration",icon:"",description:"Migration patterns and origins",sections:[{title:"Migration Origins",description:"States where voters moved from (123 records)",searchable:!0,collapsible:!0,items:[{id:"voters_movedfrom_state_ca",label:"Moved from California",description:"Voters who moved from California",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_ny",label:"Moved from New York",description:"Voters who moved from New York",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_tx",label:"Moved from Texas",description:"Voters who moved from Texas",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_fl",label:"Moved from Florida",description:"Voters who moved from Florida",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]}]}]}];function TL(){return PL}const AL={hs_:"Political Attitudes",consumerdata_:"Consumer Data",commercialdata_:"Commercial Data",hamlet_:"Geographic Areas",unified_school_district:"Education",town_district:"Geographic Areas",county_legislative_district:"Political Districts",village:"Geographic Areas",city:"Geographic Areas"};class CL{data=[];taxonomies=[];csvAnalysis=null;debugMode=!0;async loadData(){try{console.log("Loading voter data from CSV...");const t=await fetch("/wycany.csv");if(!t.ok)throw new Error(`Failed to load CSV: ${t.status} ${t.statusText}`);const i=await t.text();console.log("CSV loaded, parsing data..."),this.data=this.parseCSV(i),console.log(`Parsed ${this.data.length} voter data records`),this.taxonomies=this.extractTaxonomies(),console.log(`Extracted ${this.taxonomies.length} taxonomies`),this.csvAnalysis=await lL(),console.log("CSV Analysis completed:",this.csvAnalysis)}catch(t){throw console.error("Error loading voter data:",t),t}}parseCSV(t){const i=t.split(`
`),a=[];console.log(`Processing ${i.length} lines from CSV`);for(let u=1;u<i.length;u++){const m=i[u].trim();if(!m)continue;const p=m.split(",");if(p.length>=4){const[l,P,A,E]=p;if(l&&P&&A&&E){const k=parseFloat(E);if(!isNaN(k)){const D=parseInt(A),j=isNaN(D)?A.trim():D;a.push({state_code:l.trim(),taxonomy:P.trim(),segment:j,population_pct:k})}}}}return console.log(`Successfully parsed ${a.length} valid records`),a}extractTaxonomies(){const t=new Map;return this.data.forEach(i=>{const a=i.taxonomy;t.set(a,(t.get(a)||0)+1)}),Array.from(t.entries()).map(([i,a])=>({name:i,count:a,category:this.getTaxonomyCategory(i)})).sort((i,a)=>a.count-i.count)}getTaxonomyCategory(t){for(const[i,a]of Object.entries(AL))if(t.startsWith(i))return a;return"Other"}getFilterCategories(){return oT}async getEnhancedFilterCategories(){if(!this.csvAnalysis)return console.warn("CSV analysis not available, returning basic catalog"),oT;console.log("Using finalized filter catalog with verified data sources");const i=TL().map(a=>({...a,sections:a.sections.map(u=>({...u,items:u.items.map(m=>{const p=this.csvAnalysis.taxonomies.find(l=>l.taxonomy===m.taxonomy);return{...m,count:p?.count||0,states:p?.states||[]}})}))}));return console.log("Enhanced validated filter catalog created"),i}getCategoryIcon(t){return{"Political Attitudes":"","Consumer Data":"","Commercial Data":"","Geographic Areas":"",Education:"","Political Districts":"",Other:""}[t]||""}getSectionTitle(t){return t.startsWith("hs_")?"Political Attitudes":t.includes("income")?"Income Data":t.includes("district")?"Districts":t.includes("school")?"Education":t.includes("hamlet")||t.includes("city")||t.includes("village")?"Geographic Areas":"Other"}formatTaxonomyLabel(t){return t.replace(/hs_/g,"").replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())}async analyzeFilters(t){if(t.size===0)return{totalPopulation:0,matchingPopulation:0,percentage:0,stateBreakdown:[]};console.log(`Analyzing ${t.size} selected filters using estimation logic`);const i=await mL(this.data,t);return console.log(`Estimation complete: ${i.matchingPopulation.toLocaleString()} matching population out of ${i.totalPopulation.toLocaleString()} total`),i}extractTaxonomyFromFilterId(t){if(t.startsWith("state-"))return null;for(const i of this.getFilterCategories())for(const a of i.sections)for(const u of a.items)if(u.id===t&&u.taxonomy)return u.taxonomy;return null}getData(){return this.data}getTaxonomies(){return this.taxonomies}}const gw=new CL;function EL({selectedFilters:e,onFilterChange:t,onClearAll:i,analysisResult:a}){const[u,m]=Ue.useState(""),[p,l]=Ue.useState({}),[P,A]=Ue.useState([]),[E,k]=Ue.useState(!0);Ue.useEffect(()=>{(async()=>{try{await gw.loadData();const U=await gw.getEnhancedFilterCategories();A(U),k(!1)}catch(U){console.error("Error loading filter categories:",U),k(!1)}})()},[]);const D=(G,U)=>{l(F=>({...F,[G]:U}))},j=P.filter(G=>G.title.toLowerCase().includes(u.toLowerCase())||G.sections.some(U=>U.title.toLowerCase().includes(u.toLowerCase())||U.items.some(F=>F.label.toLowerCase().includes(u.toLowerCase()))));return E?ce.jsx("div",{className:"w-80 bg-white border-r border-border flex flex-col h-full",children:ce.jsxs("div",{className:"p-4 border-b border-border",children:[ce.jsx("h2",{className:"mb-4",children:"Filters"}),ce.jsx("div",{className:"flex items-center justify-center h-32",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),ce.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading voter data..."}),ce.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Parsing 137K+ records"})]})})]})}):ce.jsxs("div",{className:"w-80 bg-white border-r border-border flex flex-col h-screen",children:[ce.jsxs("div",{className:"p-4 border-b border-border",children:[ce.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ce.jsxs("h2",{className:"flex items-center gap-2",children:[ce.jsx(M3,{className:"w-5 h-5"}),"Filters"]}),e.size>0&&ce.jsxs(Xm,{variant:"default",className:"bg-blue-600",children:[e.size," selected"]})]}),ce.jsxs("div",{className:"relative",children:[ce.jsx(YP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),ce.jsx(rT,{placeholder:"Search by Filter Name",value:u,onChange:G=>m(G.target.value),className:"pl-10"})]})]}),ce.jsx("div",{className:"flex-1 overflow-y-auto",children:ce.jsx("div",{className:"p-4",children:ce.jsx(nL,{type:"multiple",className:"space-y-2",children:j.map(G=>ce.jsxs(iL,{value:G.id,className:"border border-border rounded-lg",children:[ce.jsx(aL,{className:"px-4 py-3 hover:no-underline",children:ce.jsxs("div",{className:"flex items-center gap-3",children:[ce.jsx("span",{className:"text-lg",children:G.icon}),ce.jsx("span",{children:G.title}),ce.jsx(Xm,{variant:"secondary",className:"ml-auto",children:G.sections.reduce((U,F)=>U+F.items.length,0)})]})}),ce.jsx(oL,{className:"px-4 pb-4",children:ce.jsx("div",{className:"space-y-4",children:G.sections.map((U,F)=>{const X=`${G.id}-${F}`,J=p[X]||"",te=U.items.filter(le=>le.label.toLowerCase().includes(J.toLowerCase()));return ce.jsxs("div",{className:"space-y-2",children:[ce.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:U.title}),U.searchable&&ce.jsxs("div",{className:"relative",children:[ce.jsx(YP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-3 h-3"}),ce.jsx(rT,{placeholder:`Search ${U.title}`,value:J,onChange:le=>D(X,le.target.value),className:"pl-8 h-8 text-sm"})]}),ce.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:te.map((le,Y)=>{const re=le.id;return ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(R5,{id:re,checked:e.has(re),onCheckedChange:de=>t(re,de)}),ce.jsx("label",{htmlFor:re,className:"text-sm cursor-pointer flex-1",children:le.label})]},Y)})})]},F)})})})]},G.id))})})}),ce.jsxs("div",{className:"p-2 border-t border-border bg-gray-50",children:[ce.jsx("h3",{className:"text-xs font-medium mb-1",children:"Quick Filters"}),ce.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[ce.jsx(Cd,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("hs_gun_control_support_supporter",!0),t("hs_ideology_fiscal_conserv_supporter",!0)},children:" Conservative Voters"}),ce.jsx(Cd,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("commercialdata_estimatedhhincome_over_100k",!0)},children:" High Income Voters"}),ce.jsx(Cd,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("voters_age_18_34",!0)},children:" Young Voters (18-34)"}),ce.jsx(Cd,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("consumerdata_auto_make_toyota",!0)},children:" Toyota Owners"}),ce.jsx(Cd,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("ethnic_description_hispanic",!0)},children:" Hispanic Voters"}),ce.jsx(Cd,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("state-CA",!0)},children:" California Only"}),ce.jsx(Cd,{variant:"destructive",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:i,children:" Clear All Filters"})]})]}),a&&a.totalPopulation>0&&ce.jsxs("div",{className:"p-4 border-t border-border bg-blue-50",children:[ce.jsx("h3",{className:"text-sm font-medium mb-2",children:"Analysis Results"}),ce.jsxs("div",{className:"space-y-1 text-xs",children:[ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"Total Population:"}),ce.jsx("span",{className:"font-medium",children:a.totalPopulation.toLocaleString()})]}),ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"Matching Population:"}),ce.jsx("span",{className:"font-medium text-blue-600",children:a.matchingPopulation.toLocaleString()})]}),ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"Percentage:"}),ce.jsxs("span",{className:"font-medium text-blue-600",children:[a.percentage.toFixed(2),"%"]})]})]})]})]})}function ML(e){const t=Ue.useRef(e);return Ue.useEffect(()=>{t.current=e}),Ue.useMemo(()=>(...i)=>t.current?.(...i),[])}var u0="rovingFocusGroup.onEntryFocus",kL={bubbles:!1,cancelable:!0},Og="RovingFocusGroup",[yw,QO,IL]=DO(Og),[OL,eR]=zp(Og,[IL]),[RL,DL]=OL(Og),tR=Ue.forwardRef((e,t)=>ce.jsx(yw.Provider,{scope:e.__scopeRovingFocusGroup,children:ce.jsx(yw.Slot,{scope:e.__scopeRovingFocusGroup,children:ce.jsx(zL,{...e,ref:t})})}));tR.displayName=Og;var zL=Ue.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:i,orientation:a,loop:u=!1,dir:m,currentTabStopId:p,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:P,onEntryFocus:A,preventScrollOnEntryFocus:E=!1,...k}=e,D=Ue.useRef(null),j=Ch(t,D),G=ZS(m),[U,F]=jp({prop:p,defaultProp:l??null,onChange:P,caller:Og}),[X,J]=Ue.useState(!1),te=ML(A),le=QO(i),Y=Ue.useRef(!1),[re,de]=Ue.useState(0);return Ue.useEffect(()=>{const ge=D.current;if(ge)return ge.addEventListener(u0,te),()=>ge.removeEventListener(u0,te)},[te]),ce.jsx(RL,{scope:i,orientation:a,dir:G,loop:u,currentTabStopId:U,onItemFocus:Ue.useCallback(ge=>F(ge),[F]),onItemShiftTab:Ue.useCallback(()=>J(!0),[]),onFocusableItemAdd:Ue.useCallback(()=>de(ge=>ge+1),[]),onFocusableItemRemove:Ue.useCallback(()=>de(ge=>ge-1),[]),children:ce.jsx(Po.div,{tabIndex:X||re===0?-1:0,"data-orientation":a,...k,ref:j,style:{outline:"none",...e.style},onMouseDown:ts(e.onMouseDown,()=>{Y.current=!0}),onFocus:ts(e.onFocus,ge=>{const Ie=!Y.current;if(ge.target===ge.currentTarget&&Ie&&!X){const We=new CustomEvent(u0,kL);if(ge.currentTarget.dispatchEvent(We),!We.defaultPrevented){const Oe=le().filter(st=>st.focusable),Ve=Oe.find(st=>st.active),Ke=Oe.find(st=>st.id===U),at=[Ve,Ke,...Oe].filter(Boolean).map(st=>st.ref.current);iR(at,E)}}Y.current=!1}),onBlur:ts(e.onBlur,()=>J(!1))})})}),rR="RovingFocusGroupItem",nR=Ue.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:i,focusable:a=!0,active:u=!1,tabStopId:m,children:p,...l}=e,P=Gv(),A=m||P,E=DL(rR,i),k=E.currentTabStopId===A,D=QO(i),{onFocusableItemAdd:j,onFocusableItemRemove:G,currentTabStopId:U}=E;return Ue.useEffect(()=>{if(a)return j(),()=>G()},[a,j,G]),ce.jsx(yw.ItemSlot,{scope:i,id:A,focusable:a,active:u,children:ce.jsx(Po.span,{tabIndex:k?0:-1,"data-orientation":E.orientation,...l,ref:t,onMouseDown:ts(e.onMouseDown,F=>{a?E.onItemFocus(A):F.preventDefault()}),onFocus:ts(e.onFocus,()=>E.onItemFocus(A)),onKeyDown:ts(e.onKeyDown,F=>{if(F.key==="Tab"&&F.shiftKey){E.onItemShiftTab();return}if(F.target!==F.currentTarget)return;const X=NL(F,E.orientation,E.dir);if(X!==void 0){if(F.metaKey||F.ctrlKey||F.altKey||F.shiftKey)return;F.preventDefault();let te=D().filter(le=>le.focusable).map(le=>le.ref.current);if(X==="last")te.reverse();else if(X==="prev"||X==="next"){X==="prev"&&te.reverse();const le=te.indexOf(F.currentTarget);te=E.loop?BL(te,le+1):te.slice(le+1)}setTimeout(()=>iR(te))}}),children:typeof p=="function"?p({isCurrentTabStop:k,hasTabStop:U!=null}):p})})});nR.displayName=rR;var jL={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function LL(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function NL(e,t,i){const a=LL(e.key,i);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return jL[a]}function iR(e,t=!1){const i=document.activeElement;for(const a of e)if(a===i||(a.focus({preventScroll:t}),document.activeElement!==i))return}function BL(e,t){return e.map((i,a)=>e[(t+a)%e.length])}var FL=tR,$L=nR,Kv="Tabs",[UL]=zp(Kv,[eR]),aR=eR(),[VL,YS]=UL(Kv),oR=Ue.forwardRef((e,t)=>{const{__scopeTabs:i,value:a,onValueChange:u,defaultValue:m,orientation:p="horizontal",dir:l,activationMode:P="automatic",...A}=e,E=ZS(l),[k,D]=jp({prop:a,onChange:u,defaultProp:m??"",caller:Kv});return ce.jsx(VL,{scope:i,baseId:Gv(),value:k,onValueChange:D,orientation:p,dir:E,activationMode:P,children:ce.jsx(Po.div,{dir:E,"data-orientation":p,...A,ref:t})})});oR.displayName=Kv;var sR="TabsList",lR=Ue.forwardRef((e,t)=>{const{__scopeTabs:i,loop:a=!0,...u}=e,m=YS(sR,i),p=aR(i);return ce.jsx(FL,{asChild:!0,...p,orientation:m.orientation,dir:m.dir,loop:a,children:ce.jsx(Po.div,{role:"tablist","aria-orientation":m.orientation,...u,ref:t})})});lR.displayName=sR;var cR="TabsTrigger",uR=Ue.forwardRef((e,t)=>{const{__scopeTabs:i,value:a,disabled:u=!1,...m}=e,p=YS(cR,i),l=aR(i),P=fR(p.baseId,a),A=pR(p.baseId,a),E=a===p.value;return ce.jsx($L,{asChild:!0,...l,focusable:!u,active:E,children:ce.jsx(Po.button,{type:"button",role:"tab","aria-selected":E,"aria-controls":A,"data-state":E?"active":"inactive","data-disabled":u?"":void 0,disabled:u,id:P,...m,ref:t,onMouseDown:ts(e.onMouseDown,k=>{!u&&k.button===0&&k.ctrlKey===!1?p.onValueChange(a):k.preventDefault()}),onKeyDown:ts(e.onKeyDown,k=>{[" ","Enter"].includes(k.key)&&p.onValueChange(a)}),onFocus:ts(e.onFocus,()=>{const k=p.activationMode!=="manual";!E&&!u&&k&&p.onValueChange(a)})})})});uR.displayName=cR;var hR="TabsContent",dR=Ue.forwardRef((e,t)=>{const{__scopeTabs:i,value:a,forceMount:u,children:m,...p}=e,l=YS(hR,i),P=fR(l.baseId,a),A=pR(l.baseId,a),E=a===l.value,k=Ue.useRef(E);return Ue.useEffect(()=>{const D=requestAnimationFrame(()=>k.current=!1);return()=>cancelAnimationFrame(D)},[]),ce.jsx(Vv,{present:u||E,children:({present:D})=>ce.jsx(Po.div,{"data-state":E?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":P,hidden:!D,id:A,tabIndex:0,...p,ref:t,style:{...e.style,animationDuration:k.current?"0s":void 0},children:D&&m})})});dR.displayName=hR;function fR(e,t){return`${e}-trigger-${t}`}function pR(e,t){return`${e}-content-${t}`}var qL=oR,GL=lR,WL=uR,ZL=dR;function HL({className:e,...t}){return ce.jsx(qL,{"data-slot":"tabs",className:io("flex flex-col gap-2",e),...t})}function KL({className:e,...t}){return ce.jsx(GL,{"data-slot":"tabs-list",className:io("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function cT({className:e,...t}){return ce.jsx(WL,{"data-slot":"tabs-trigger",className:io("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function uT({className:e,...t}){return ce.jsx(ZL,{"data-slot":"tabs-content",className:io("flex-1 outline-none",e),...t})}const XL="FeatureCollection",YL=[{type:"Feature",id:"06",properties:{name:"California",density:241.7},geometry:{type:"Polygon",coordinates:[[[-123.233256,42.006186],[-122.378853,42.011663],[-121.037003,41.995232],[-120.001861,41.995232],[-119.996384,40.264519],[-120.001861,38.999346],[-118.71478,38.101128],[-117.498899,37.21934],[-116.540435,36.501861],[-115.85034,35.970598],[-114.634459,35.00118],[-114.634459,34.87521],[-114.470151,34.710902],[-114.333228,34.448009],[-114.136058,34.305608],[-114.256551,34.174162],[-114.415382,34.108438],[-114.535874,33.933176],[-114.497536,33.697668],[-114.524921,33.54979],[-114.727567,33.40739],[-114.661844,33.034958],[-114.524921,33.029481],[-114.470151,32.843265],[-114.524921,32.755634],[-114.72209,32.717295],[-116.04751,32.624187],[-117.126467,32.536556],[-117.24696,32.668003],[-117.252437,32.876127],[-117.329114,33.122589],[-117.471515,33.297851],[-117.7837,33.538836],[-118.183517,33.763391],[-118.260194,33.703145],[-118.413548,33.741483],[-118.391641,33.840068],[-118.566903,34.042715],[-118.802411,33.998899],[-119.218659,34.146777],[-119.278905,34.26727],[-119.558229,34.415147],[-119.875891,34.40967],[-120.138784,34.475393],[-120.472878,34.448009],[-120.64814,34.579455],[-120.609801,34.858779],[-120.670048,34.902595],[-120.631709,35.099764],[-120.894602,35.247642],[-120.905556,35.450289],[-121.004141,35.461243],[-121.168449,35.636505],[-121.283465,35.674843],[-121.332757,35.784382],[-121.716143,36.195153],[-121.896882,36.315645],[-121.935221,36.638785],[-121.858544,36.6114],[-121.787344,36.803093],[-121.929744,36.978355],[-122.105006,36.956447],[-122.335038,37.115279],[-122.417192,37.241248],[-122.400761,37.361741],[-122.515777,37.520572],[-122.515777,37.783465],[-122.329561,37.783465],[-122.406238,38.15042],[-122.488392,38.112082],[-122.504823,37.931343],[-122.701993,37.893004],[-122.937501,38.029928],[-122.97584,38.265436],[-123.129194,38.451652],[-123.331841,38.566668],[-123.44138,38.698114],[-123.737134,38.95553],[-123.687842,39.032208],[-123.824765,39.366301],[-123.764519,39.552517],[-123.85215,39.831841],[-124.109566,40.105688],[-124.361506,40.259042],[-124.410798,40.439781],[-124.158859,40.877937],[-124.109566,41.025814],[-124.158859,41.14083],[-124.065751,41.442061],[-124.147905,41.715908],[-124.257444,41.781632],[-124.213628,42.000709],[-123.233256,42.006186]]]}},{type:"Feature",id:"36",properties:{name:"New York",density:412.3},geometry:{type:"Polygon",coordinates:[[[-73.343806,45.013027],[-73.332852,44.804903],[-73.387622,44.618687],[-73.294514,44.437948],[-73.321898,44.246255],[-73.436914,44.043608],[-73.349283,43.769761],[-73.404052,43.687607],[-73.245221,43.523299],[-73.278083,42.833204],[-73.267129,42.745573],[-73.508114,42.08834],[-73.486206,42.050002],[-73.55193,41.294184],[-73.48073,41.21203],[-73.727192,41.102491],[-73.655992,40.987475],[-73.22879,40.905321],[-73.141159,40.965568],[-72.774204,40.965568],[-72.587988,40.998429],[-72.28128,41.157261],[-72.259372,41.042245],[-72.100541,40.992952],[-72.467496,40.845075],[-73.239744,40.625997],[-73.562884,40.582182],[-73.776484,40.593136],[-73.935316,40.543843],[-74.022947,40.708151],[-73.902454,40.998429],[-74.236547,41.14083],[-74.69661,41.359907],[-74.740426,41.431108],[-74.89378,41.436584],[-75.074519,41.60637],[-75.052611,41.754247],[-75.173104,41.869263],[-75.249781,41.863786],[-75.35932,42.000709],[-79.76278,42.000709],[-79.76278,42.252649],[-79.76278,42.269079],[-79.149363,42.55388],[-79.050778,42.690804],[-78.853608,42.783912],[-78.930285,42.953697],[-79.012439,42.986559],[-79.072686,43.260406],[-78.486653,43.375421],[-77.966344,43.369944],[-77.75822,43.34256],[-77.533665,43.233021],[-77.391265,43.276836],[-76.958587,43.271359],[-76.695693,43.34256],[-76.41637,43.523299],[-76.235631,43.528776],[-76.230154,43.802623],[-76.137046,43.961454],[-76.3616,44.070993],[-76.312308,44.196962],[-75.912491,44.366748],[-75.764614,44.514625],[-75.282643,44.848718],[-74.828057,45.018503],[-74.148916,44.991119],[-73.343806,45.013027]]]}},{type:"Feature",id:"56",properties:{name:"Wyoming",density:5.851},geometry:{type:"Polygon",coordinates:[[[-109.080842,45.002073],[-105.91517,45.002073],[-104.058488,44.996596],[-104.053011,43.002989],[-104.053011,41.003906],[-105.728954,40.998429],[-107.919731,41.003906],[-109.04798,40.998429],[-111.047063,40.998429],[-111.047063,42.000709],[-111.047063,44.476286],[-111.05254,45.002073],[-109.080842,45.002073]]]}}],bu={type:XL,features:YL};var $y={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.3/LICENSE.txt
 */var JL=$y.exports,hT;function QL(){return hT||(hT=1,(function(e,t){(function(i,a){e.exports=a()})(JL,(function(){var i={},a={};function u(p,l,P){if(a[p]=P,p==="index"){var A="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",E={};return a.shared(E),a.index(i,E),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([A],{type:"text/javascript"}))),i}}u("shared",["exports"],(function(p){function l(s,n,o,d){return new(o||(o=Promise))((function(y,x){function w(z){try{I(d.next(z))}catch(N){x(N)}}function C(z){try{I(d.throw(z))}catch(N){x(N)}}function I(z){var N;z.done?y(z.value):(N=z.value,N instanceof o?N:new o((function(V){V(N)}))).then(w,C)}I((d=d.apply(s,n||[])).next())}))}function P(s,n){this.x=s,this.y=n}function A(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var E,k;typeof SuppressedError=="function"&&SuppressedError,P.prototype={clone(){return new P(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,n){return this.clone()._rotateAround(s,n)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){const n=s.x-this.x,o=s.y-this.y;return n*n+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult(s){const n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){const s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){const n=Math.cos(s),o=Math.sin(s),d=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=d,this},_rotateAround(s,n){const o=Math.cos(s),d=Math.sin(s),y=n.y+d*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-d*(this.y-n.y),this.y=y,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:P},P.convert=function(s){if(s instanceof P)return s;if(Array.isArray(s))return new P(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new P(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var D=(function(){if(k)return E;function s(n,o,d,y){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(y-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=d,this.p2y=y}return k=1,E=s,s.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,y=0;y<8;y++){var x=this.sampleCurveX(d)-n;if(Math.abs(x)<o)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=x/w}var C=0,I=1;for(d=n,y=0;y<20&&(x=this.sampleCurveX(d),!(Math.abs(x-n)<o));y++)n>x?C=d:I=d,d=.5*(I-C)+C;return d},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},E})(),j=A(D);let G,U;function F(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function X(){if(U==null&&(U=!1,F())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<25;d++){const y=4*d;n.fillStyle=`rgb(${y},${y+1},${y+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}const o=n.getImageData(0,0,5,5).data;for(let d=0;d<100;d++)if(d%4!=3&&o[d]!==d){U=!0;break}}}return U||!1}var J=1e-6,te=typeof Float32Array<"u"?Float32Array:Array;function le(){var s=new te(9);return te!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Y(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function re(){var s=new te(3);return te!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function de(s){var n=s[0],o=s[1],d=s[2];return Math.sqrt(n*n+o*o+d*d)}function ge(s,n,o){var d=new te(3);return d[0]=s,d[1]=n,d[2]=o,d}function Ie(s,n,o){return s[0]=n[0]+o[0],s[1]=n[1]+o[1],s[2]=n[2]+o[2],s}function We(s,n,o){return s[0]=n[0]*o,s[1]=n[1]*o,s[2]=n[2]*o,s}function Oe(s,n,o){var d=n[0],y=n[1],x=n[2],w=o[0],C=o[1],I=o[2];return s[0]=y*I-x*C,s[1]=x*w-d*I,s[2]=d*C-y*w,s}var Ve,Ke=de;function ot(s,n,o){var d=n[0],y=n[1],x=n[2],w=n[3];return s[0]=o[0]*d+o[4]*y+o[8]*x+o[12]*w,s[1]=o[1]*d+o[5]*y+o[9]*x+o[13]*w,s[2]=o[2]*d+o[6]*y+o[10]*x+o[14]*w,s[3]=o[3]*d+o[7]*y+o[11]*x+o[15]*w,s}function at(){var s=new te(4);return te!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function st(s,n,o,d){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;n*=x,d*=x,o*=x;var w=Math.sin(n),C=Math.cos(n),I=Math.sin(o),z=Math.cos(o),N=Math.sin(d),V=Math.cos(d);switch(y){case"xyz":s[0]=w*z*V+C*I*N,s[1]=C*I*V-w*z*N,s[2]=C*z*N+w*I*V,s[3]=C*z*V-w*I*N;break;case"xzy":s[0]=w*z*V-C*I*N,s[1]=C*I*V-w*z*N,s[2]=C*z*N+w*I*V,s[3]=C*z*V+w*I*N;break;case"yxz":s[0]=w*z*V+C*I*N,s[1]=C*I*V-w*z*N,s[2]=C*z*N-w*I*V,s[3]=C*z*V+w*I*N;break;case"yzx":s[0]=w*z*V+C*I*N,s[1]=C*I*V+w*z*N,s[2]=C*z*N-w*I*V,s[3]=C*z*V-w*I*N;break;case"zxy":s[0]=w*z*V-C*I*N,s[1]=C*I*V+w*z*N,s[2]=C*z*N+w*I*V,s[3]=C*z*V-w*I*N;break;case"zyx":s[0]=w*z*V-C*I*N,s[1]=C*I*V+w*z*N,s[2]=C*z*N-w*I*V,s[3]=C*z*V+w*I*N;break;default:throw new Error("Unknown angle order "+y)}return s}function lt(){var s=new te(2);return te!=Float32Array&&(s[0]=0,s[1]=0),s}function Le(s,n){var o=new te(2);return o[0]=s,o[1]=n,o}re(),Ve=new te(4),te!=Float32Array&&(Ve[0]=0,Ve[1]=0,Ve[2]=0,Ve[3]=0),re(),ge(1,0,0),ge(0,1,0),at(),at(),le(),lt();const tt=8192;function ut(s,n,o){return n*(tt/(s.tileSize*Math.pow(2,o-s.tileID.overscaledZ)))}function Ae(s,n){return(s%n+n)%n}function qe(s,n,o){return s*(1-o)+n*o}function yt(s){if(s<=0)return 0;if(s>=1)return 1;const n=s*s,o=n*s;return 4*(s<.5?o:3*(s-n)+o-.75)}function Rt(s,n,o,d){const y=new j(s,n,o,d);return x=>y.solve(x)}const $t=Rt(.25,.1,.25,1);function Wt(s,n,o){return Math.min(o,Math.max(n,s))}function er(s,n,o){const d=o-n,y=((s-n)%d+d)%d+n;return y===n?o:y}function tr(s,...n){for(const o of n)for(const d in o)s[d]=o[d];return s}let vt=1;function Ft(s,n,o){const d={};for(const y in s)d[y]=n.call(this,s[y],y,s);return d}function ir(s,n,o){const d={};for(const y in s)n.call(this,s[y],y,s)&&(d[y]=s[y]);return d}function pt(s){return Array.isArray(s)?s.map(pt):typeof s=="object"&&s?Ft(s,pt):s}const dr={};function rr(s){dr[s]||(typeof console<"u"&&console.warn(s),dr[s]=!0)}function qr(s,n,o){return(o.y-s.y)*(n.x-s.x)>(n.y-s.y)*(o.x-s.x)}function Zr(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let vn=null;function qn(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Kn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ki(s,n,o,d,y){return l(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(s,{timestamp:0});try{const w=x?.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const C=w.startsWith("BGR"),I=new Uint8ClampedArray(d*y*4);if(yield x.copyTo(I,(function(z,N,V,H,Q){const ee=4*Math.max(-N,0),se=(Math.max(0,V)-V)*H*4+ee,fe=4*H,_e=Math.max(0,N),$e=Math.max(0,V);return{rect:{x:_e,y:$e,width:Math.min(z.width,N+H)-_e,height:Math.min(z.height,V+Q)-$e},layout:[{offset:se,stride:fe}]}})(s,n,o,d,y)),C)for(let z=0;z<I.length;z+=4){const N=I[z];I[z]=I[z+2],I[z+2]=N}return I}finally{x.close()}}))}let On,ni;function oa(s,n,o,d){return s.addEventListener(n,o,d),{unsubscribe:()=>{s.removeEventListener(n,o,d)}}}function Ba(s){return s*Math.PI/180}function Sa(s){return s/Math.PI*180}const Ao={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ao={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Co="AbortError";function ze(){return new Error(Co)}const ie={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ae(s){return ie.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const he="global-dispatcher";class we extends Error{constructor(n,o,d,y){super(`AJAXError: ${o} (${n}): ${d}`),this.status=n,this.statusText=o,this.url=d,this.body=y}}const Ce=()=>Zr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,je=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const d=ae(s.url);if(d)return d(s,n);if(Zr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:he},n)}if(!(/^file:/.test(o=s.url)||/^file:/.test(Ce())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(d,y){return l(this,void 0,void 0,(function*(){const x=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Ce(),signal:y.signal});let w,C;d.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{w=yield fetch(x)}catch(z){throw new we(0,z.message,d.url,new Blob)}if(!w.ok){const z=yield w.blob();throw new we(w.status,w.statusText,d.url,z)}C=d.type==="arrayBuffer"||d.type==="image"?w.arrayBuffer():d.type==="json"?w.json():w.text();const I=yield C;if(y.signal.aborted)throw ze();return{data:I,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}}))})(s,n);if(Zr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:he},n)}var o;return(function(d,y){return new Promise(((x,w)=>{var C;const I=new XMLHttpRequest;I.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(I.responseType="arraybuffer");for(const z in d.headers)I.setRequestHeader(z,d.headers[z]);d.type==="json"&&(I.responseType="text",!((C=d.headers)===null||C===void 0)&&C.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=d.credentials==="include",I.onerror=()=>{w(new Error(I.statusText))},I.onload=()=>{if(!y.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let z=I.response;if(d.type==="json")try{z=JSON.parse(I.response)}catch(N){return void w(N)}x({data:z,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const z=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});w(new we(I.status,I.statusText,d.url,z))}},y.signal.addEventListener("abort",(()=>{I.abort(),w(ze())})),I.send(d.body)}))})(s,n)};function Xe(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),o=window.location;return n.protocol===o.protocol&&n.host===o.host}function Fe(s,n,o){o[s]&&o[s].indexOf(n)!==-1||(o[s]=o[s]||[],o[s].push(n))}function nt(s,n,o){if(o&&o[s]){const d=o[s].indexOf(n);d!==-1&&o[s].splice(d,1)}}class gt{constructor(n,o={}){tr(this,o),this.type=n}}class ct extends gt{constructor(n,o={}){super("error",tr({error:n},o))}}class zt{on(n,o){return this._listeners=this._listeners||{},Fe(n,o,this._listeners),{unsubscribe:()=>{this.off(n,o)}}}off(n,o){return nt(n,o,this._listeners),nt(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Fe(n,o,this._oneTimeListeners),this):new Promise((d=>this.once(n,d)))}fire(n,o){typeof n=="string"&&(n=new gt(n,o||{}));const d=n.type;if(this.listens(d)){n.target=this;const y=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const C of y)C.call(this,n);const x=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const C of x)nt(d,C,this._oneTimeListeners),C.call(this,n);const w=this._eventedParent;w&&(tr(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(n))}else n instanceof ct&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var Ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const sr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Cr(s,n){const o={};for(const d in s)d!=="ref"&&(o[d]=s[d]);return sr.forEach((d=>{d in n&&(o[d]=n[d])})),o}function Ut(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let o=0;o<s.length;o++)if(!Ut(s[o],n[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const o in s)if(!Ut(s[o],n[o]))return!1;return!0}return s===n}function pr(s,n){s.push(n)}function en(s,n,o){pr(o,{command:"addSource",args:[s,n[s]]})}function Rn(s,n,o){pr(n,{command:"removeSource",args:[s]}),o[s]=!0}function Gn(s,n,o,d){Rn(s,o,d),en(s,n,o)}function gn(s,n,o){let d;for(d in s[o])if(Object.prototype.hasOwnProperty.call(s[o],d)&&d!=="data"&&!Ut(s[o][d],n[o][d]))return!1;for(d in n[o])if(Object.prototype.hasOwnProperty.call(n[o],d)&&d!=="data"&&!Ut(s[o][d],n[o][d]))return!1;return!0}function br(s,n,o,d,y,x){s=s||{},n=n||{};for(const w in s)Object.prototype.hasOwnProperty.call(s,w)&&(Ut(s[w],n[w])||o.push({command:x,args:[d,w,n[w],y]}));for(const w in n)Object.prototype.hasOwnProperty.call(n,w)&&!Object.prototype.hasOwnProperty.call(s,w)&&(Ut(s[w],n[w])||o.push({command:x,args:[d,w,n[w],y]}))}function Er(s){return s.id}function Wn(s,n){return s[n.id]=n,s}class _t{constructor(n,o,d,y){this.message=(n?`${n}: `:"")+d,y&&(this.identifier=y),o!=null&&o.__line__&&(this.line=o.__line__)}}function Xn(s,...n){for(const o of n)for(const d in o)s[d]=o[d];return s}class ln extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}class oo{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[d,y]of o)this.bindings[d]=y}concat(n){return new oo(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Ol={kind:"null"},Ot={kind:"number"},Mr={kind:"string"},cr={kind:"boolean"},ii={kind:"color"},is={kind:"projectionDefinition"},as={kind:"object"},gr={kind:"value"},kc={kind:"collator"},Eo={kind:"formatted"},Ic={kind:"padding"},so={kind:"colorArray"},Rl={kind:"numberArray"},wr={kind:"resolvedImage"},Nu={kind:"variableAnchorOffsetCollection"};function mi(s,n){return{kind:"array",itemType:s,N:n}}function Xr(s){if(s.kind==="array"){const n=Xr(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const Oc=[Ol,Ot,Mr,cr,ii,is,Eo,as,mi(gr),Ic,Rl,so,wr,Nu];function Rc(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Rc(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const o of Oc)if(!Rc(o,n))return null}}return`Expected ${Xr(s)} but found ${Xr(n)} instead.`}function Bu(s,n){return n.some((o=>o.kind===s.kind))}function Fa(s,n){return n.some((o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s))}function ui(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const Rh=.96422,Pa=.82521,Yd=4/29,Dl=6/29,Jd=3*Dl*Dl,Fu=Dl*Dl*Dl,$u=Math.PI/180,Dc=180/Math.PI;function zl(s){return(s%=360)<0&&(s+=360),s}function jl([s,n,o,d]){let y,x;const w=zc((.2225045*(s=Dh(s))+.7168786*(n=Dh(n))+.0606169*(o=Dh(o)))/1);s===n&&n===o?y=x=w:(y=zc((.4360747*s+.3850649*n+.1430804*o)/Rh),x=zc((.0139322*s+.0971045*n+.7141733*o)/Pa));const C=116*w-16;return[C<0?0:C,500*(y-w),200*(w-x),d]}function Dh(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function zc(s){return s>Fu?Math.pow(s,1/3):s/Jd+Yd}function Us([s,n,o,d]){let y=(s+16)/116,x=isNaN(n)?y:y+n/500,w=isNaN(o)?y:y-o/200;return y=1*Vs(y),x=Rh*Vs(x),w=Pa*Vs(w),[jc(3.1338561*x-1.6168667*y-.4906146*w),jc(-.9787684*x+1.9161415*y+.033454*w),jc(.0719453*x-.2289914*y+1.4052427*w),d]}function jc(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Vs(s){return s>Dl?s*s*s:Jd*(s-Yd)}const Gp=Object.hasOwn||function(s,n){return Object.prototype.hasOwnProperty.call(s,n)};function os(s,n){return Gp(s,n)?s[n]:void 0}function $r(s){return parseInt(s.padEnd(2,s),16)/255}function Ta(s,n){return Sr(n?s/100:s,0,1)}function Sr(s,n,o){return Math.min(Math.max(n,s),o)}function Mo(s){return!s.some(Number.isNaN)}const ko={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function lo(s,n,o){return s+o*(n-s)}function ss(s,n,o){return s.map(((d,y)=>lo(d,n[y],o)))}class _r{constructor(n,o,d,y=1,x=!0){this.r=n,this.g=o,this.b=d,this.a=y,x||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[n,o,d,y]))}static parse(n){if(n instanceof _r)return n;if(typeof n!="string")return;const o=(function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=os(ko,d);if(y){const[w,C,I]=y;return[w/255,C/255,I/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const w=d.length<6?1:2;let C=1;return[$r(d.slice(C,C+=w)),$r(d.slice(C,C+=w)),$r(d.slice(C,C+=w)),$r(d.slice(C,C+w)||"ff")]}if(d.startsWith("rgb")){const w=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[C,I,z,N,V,H,Q,ee,se,fe,_e,$e]=w,Se=[N||" ",Q||" ",fe].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const Me=[z,H,se].join(""),Ye=Me==="%%%"?100:Me===""?255:0;if(Ye){const rt=[Sr(+I/Ye,0,1),Sr(+V/Ye,0,1),Sr(+ee/Ye,0,1),_e?Ta(+_e,$e):1];if(Mo(rt))return rt}}return}}const x=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,C,I,z,N,V,H,Q,ee]=x,se=[I||" ",N||" ",H].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const fe=[+C,Sr(+z,0,100),Sr(+V,0,100),Q?Ta(+Q,ee):1];if(Mo(fe))return(function([_e,$e,Se,Me]){function Ye(rt){const mt=(rt+_e/30)%12,It=$e*Math.min(Se,1-Se);return Se-It*Math.max(-1,Math.min(mt-3,9-mt,1))}return _e=zl(_e),$e/=100,Se/=100,[Ye(0),Ye(8),Ye(4),Me]})(fe)}}})(n);return o?new _r(...o,!1):void 0}get rgb(){const{r:n,g:o,b:d,a:y}=this,x=y||1/0;return this.overwriteGetter("rgb",[n/x,o/x,d/x,y])}get hcl(){return this.overwriteGetter("hcl",(function(n){const[o,d,y,x]=jl(n),w=Math.sqrt(d*d+y*y);return[Math.round(1e4*w)?zl(Math.atan2(y,d)*Dc):NaN,w,o,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",jl(this.rgb))}overwriteGetter(n,o){return Object.defineProperty(this,n,{value:o}),o}toString(){const[n,o,d,y]=this.rgb;return`rgba(${[n,o,d].map((x=>Math.round(255*x))).join(",")},${y})`}static interpolate(n,o,d,y="rgb"){switch(y){case"rgb":{const[x,w,C,I]=ss(n.rgb,o.rgb,d);return new _r(x,w,C,I,!1)}case"hcl":{const[x,w,C,I]=n.hcl,[z,N,V,H]=o.hcl;let Q,ee;if(isNaN(x)||isNaN(z))isNaN(x)?isNaN(z)?Q=NaN:(Q=z,C!==1&&C!==0||(ee=N)):(Q=x,V!==1&&V!==0||(ee=w));else{let Se=z-x;z>x&&Se>180?Se-=360:z<x&&x-z>180&&(Se+=360),Q=x+d*Se}const[se,fe,_e,$e]=(function([Se,Me,Ye,rt]){return Se=isNaN(Se)?0:Se*$u,Us([Ye,Math.cos(Se)*Me,Math.sin(Se)*Me,rt])})([Q,ee??lo(w,N,d),lo(C,V,d),lo(I,H,d)]);return new _r(se,fe,_e,$e,!1)}case"lab":{const[x,w,C,I]=Us(ss(n.lab,o.lab,d));return new _r(x,w,C,I,!1)}}}}_r.black=new _r(0,0,0,1),_r.white=new _r(1,1,1,1),_r.transparent=new _r(0,0,0,0),_r.red=new _r(1,0,0,1);class co{constructor(n,o,d){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const $a=["bottom","center","top"];class Ua{constructor(n,o,d,y,x,w){this.text=n,this.image=o,this.scale=d,this.fontStack=y,this.textColor=x,this.verticalAlign=w}}class Sn{constructor(n){this.sections=n}static fromString(n){return new Sn([new Ua(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((n=>n.text.length!==0||n.image&&n.image.name.length!==0))}static factory(n){return n instanceof Sn?n:Sn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map((n=>n.text)).join("")}}class Pn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Pn)return n;if(typeof n=="number")return new Pn([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const o of n)if(typeof o!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Pn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){return new Pn(ss(n.values,o.values,d))}}class Yn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Yn)return n;if(typeof n=="number")return new Yn([n]);if(Array.isArray(n)){for(const o of n)if(typeof o!="number")return;return new Yn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){return new Yn(ss(n.values,o.values,d))}}class on{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof on)return n;if(typeof n=="string"){const d=_r.parse(n);return d?new on([d]):void 0}if(!Array.isArray(n))return;const o=[];for(const d of n){if(typeof d!="string")return;const y=_r.parse(d);if(!y)return;o.push(y)}return new on(o)}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d,y="rgb"){const x=[];if(n.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let w=0;w<n.values.length;w++)x.push(_r.interpolate(n.values[w],o.values[w],d,y));return new on(x)}}class tn extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}const zh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Jn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Jn)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let o=0;o<n.length;o+=2){const d=n[o],y=n[o+1];if(typeof d!="string"||!zh.has(d)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new Jn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,d){const y=n.values,x=o.values;if(y.length!==x.length)throw new tn(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${o.toString()}`);const w=[];for(let C=0;C<y.length;C+=2){if(y[C]!==x[C])throw new tn(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${y[C]}, to[${C}]: ${x[C]}`);w.push(y[C]);const[I,z]=y[C+1],[N,V]=x[C+1];w.push([lo(I,N,d),lo(z,V,d)])}return new Jn(w)}}class sa{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new sa({name:n,available:!1}):null}}class hi{constructor(n,o,d){this.from=n,this.to=o,this.transition=d}static interpolate(n,o,d){return new hi(n,o,d)}static parse(n){return n instanceof hi?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new hi(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new hi(n.from,n.to,n.transition):typeof n=="string"?new hi(n,n,1):void 0}}function Yr(s,n,o,d){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[s,n,o,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[s,n,o,d]:[s,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ls(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof hi||s instanceof _r||s instanceof co||s instanceof Sn||s instanceof Pn||s instanceof Yn||s instanceof on||s instanceof Jn||s instanceof sa)return!0;if(Array.isArray(s)){for(const n of s)if(!ls(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!ls(s[n]))return!1;return!0}return!1}function nr(s){if(s===null)return Ol;if(typeof s=="string")return Mr;if(typeof s=="boolean")return cr;if(typeof s=="number")return Ot;if(s instanceof _r)return ii;if(s instanceof hi)return is;if(s instanceof co)return kc;if(s instanceof Sn)return Eo;if(s instanceof Pn)return Ic;if(s instanceof Yn)return Rl;if(s instanceof on)return so;if(s instanceof Jn)return Nu;if(s instanceof sa)return wr;if(Array.isArray(s)){const n=s.length;let o;for(const d of s){const y=nr(d);if(o){if(o===y)continue;o=gr;break}o=y}return mi(o||gr,n)}return as}function lr(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof _r||s instanceof hi||s instanceof Sn||s instanceof Pn||s instanceof Yn||s instanceof on||s instanceof Jn||s instanceof sa?s.toString():JSON.stringify(s)}class la{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!ls(n[1]))return o.error("invalid value");const d=n[1];let y=nr(d);const x=o.expectedType;return y.kind!=="array"||y.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(y=x),new la(y,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Pr={string:Mr,number:Ot,boolean:cr,object:as};class gi{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let d,y=1;const x=n[0];if(x==="array"){let C,I;if(n.length>2){const z=n[1];if(typeof z!="string"||!(z in Pr)||z==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);C=Pr[z],y++}else C=gr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);I=n[2],y++}d=mi(C,I)}else{if(!Pr[x])throw new Error(`Types doesn't contain name = ${x}`);d=Pr[x]}const w=[];for(;y<n.length;y++){const C=o.parse(n[y],y,gr);if(!C)return null;w.push(C)}return new gi(d,w)}evaluate(n){for(let o=0;o<this.args.length;o++){const d=this.args[o].evaluate(n);if(!Rc(this.type,nr(d)))return d;if(o===this.args.length-1)throw new tn(`Expected value to be of type ${Xr(this.type)}, but found ${Xr(nr(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const uo={"to-boolean":cr,"to-color":ii,"to-number":Ot,"to-string":Mr};class ho{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const d=n[0];if(!uo[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return o.error("Expected one argument.");const y=uo[d],x=[];for(let w=1;w<n.length;w++){const C=o.parse(n[w],w,gr);if(!C)return null;x.push(C)}return new ho(y,x)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let o,d;for(const y of this.args){if(o=y.evaluate(n),d=null,o instanceof _r)return o;if(typeof o=="string"){const x=n.parseColor(o);if(x)return x}else if(Array.isArray(o)&&(d=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Yr(o[0],o[1],o[2],o[3]),!d))return new _r(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new tn(d||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const d of this.args){o=d.evaluate(n);const y=Pn.parse(o);if(y)return y}throw new tn(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(const d of this.args){o=d.evaluate(n);const y=Yn.parse(o);if(y)return y}throw new tn(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(const d of this.args){o=d.evaluate(n);const y=on.parse(o);if(y)return y}throw new tn(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const d of this.args){o=d.evaluate(n);const y=Jn.parse(o);if(y)return y}throw new tn(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const d of this.args){if(o=d.evaluate(n),o===null)return 0;const y=Number(o);if(!isNaN(y))return y}throw new tn(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Sn.fromString(lr(this.args[0].evaluate(n)));case"resolvedImage":return sa.fromString(lr(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return lr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const Ll=["Unknown","Point","LineString","Polygon"];class Nl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ll[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let o=this._parseColorCache.get(n);return o||(o=_r.parse(n),this._parseColorCache.set(n,o)),o}}class cs{constructor(n,o,d=[],y,x=new oo,w=[]){this.registry=n,this.path=d,this.key=d.map((C=>`[${C}]`)).join(""),this.scope=x,this.errors=w,this.expectedType=y,this._isConstant=o}parse(n,o,d,y,x={}){return o?this.concat(o,d,y)._parse(n,x):this._parse(n,x)}_parse(n,o){function d(y,x,w){return w==="assert"?new gi(x,[y]):w==="coerce"?new ho(x,[y]):y}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=n[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[y];if(x){let w=x.parse(n,this);if(!w)return null;if(this.expectedType){const C=this.expectedType,I=w.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||I.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(I.kind)||C.kind==="colorArray"&&["value","string","array"].includes(I.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))w=d(w,C,o.typeAnnotation||"coerce");else if(this.checkSubtype(C,I))return null}else w=d(w,C,o.typeAnnotation||"assert")}if(!(w instanceof la)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const C=new Nl;try{w=new la(w.type,w.evaluate(C))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,d){const y=typeof n=="number"?this.path.concat(n):this.path,x=d?this.scope.concat(d):this.scope;return new cs(this.registry,this._isConstant,y,o||null,x,this.errors)}error(n,...o){const d=`${this.key}${o.map((y=>`[${y}]`)).join("")}`;this.errors.push(new ln(d,n))}checkSubtype(n,o){const d=Rc(n,o);return d&&this.error(d),d}}class Bl{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let x=1;x<n.length-1;x+=2){const w=n[x];if(typeof w!="string")return o.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return o.error("Variable names must contain only alphanumeric characters or '_'.",x);const C=o.parse(n[x+1],x+1);if(!C)return null;d.push([w,C])}const y=o.parse(n[n.length-1],n.length-1,o.expectedType,d);return y?new Bl(d,y):null}outputDefined(){return this.result.outputDefined()}}class Va{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const d=n[1];return o.scope.has(d)?new Va(d,o.scope.get(d)):o.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Fl{constructor(n,o,d){this.type=n,this.index=o,this.input=d}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,Ot),y=o.parse(n[2],2,mi(o.expectedType||gr));return d&&y?new Fl(y.type.itemType,d,y):null}evaluate(n){const o=this.index.evaluate(n),d=this.input.evaluate(n);if(o<0)throw new tn(`Array index out of bounds: ${o} < 0.`);if(o>=d.length)throw new tn(`Array index out of bounds: ${o} > ${d.length-1}.`);if(o!==Math.floor(o))throw new tn(`Array index must be an integer, but found ${o} instead.`);return d[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class qs{constructor(n,o){this.type=cr,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,gr),y=o.parse(n[2],2,gr);return d&&y?Bu(d.type,[cr,Mr,Ot,Ol,gr])?new qs(d,y):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xr(d.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!Fa(o,["boolean","string","number","null"]))throw new tn(`Expected first argument to be of type boolean, string, number or null, but found ${Xr(nr(o))} instead.`);if(!Fa(d,["string","array"]))throw new tn(`Expected second argument to be of type array or string, but found ${Xr(nr(d))} instead.`);return d.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Aa{constructor(n,o,d){this.type=Ot,this.needle=n,this.haystack=o,this.fromIndex=d}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,gr),y=o.parse(n[2],2,gr);if(!d||!y)return null;if(!Bu(d.type,[cr,Mr,Ot,Ol,gr]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xr(d.type)} instead`);if(n.length===4){const x=o.parse(n[3],3,Ot);return x?new Aa(d,y,x):null}return new Aa(d,y)}evaluate(n){const o=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!Fa(o,["boolean","string","number","null"]))throw new tn(`Expected first argument to be of type boolean, string, number or null, but found ${Xr(nr(o))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(n)),Fa(d,["string"])){const x=d.indexOf(o,y);return x===-1?-1:[...d.slice(0,x)].length}if(Fa(d,["array"]))return d.indexOf(o,y);throw new tn(`Expected second argument to be of type array or string, but found ${Xr(nr(d))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Dn{constructor(n,o,d,y,x,w){this.inputType=n,this.type=o,this.input=d,this.cases=y,this.outputs=x,this.otherwise=w}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let d,y;o.expectedType&&o.expectedType.kind!=="value"&&(y=o.expectedType);const x={},w=[];for(let z=2;z<n.length-1;z+=2){let N=n[z];const V=n[z+1];Array.isArray(N)||(N=[N]);const H=o.concat(z);if(N.length===0)return H.error("Expected at least one branch label.");for(const ee of N){if(typeof ee!="number"&&typeof ee!="string")return H.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return H.error("Numeric branch labels must be integer values.");if(d){if(H.checkSubtype(d,nr(ee)))return null}else d=nr(ee);if(x[String(ee)]!==void 0)return H.error("Branch labels must be unique.");x[String(ee)]=w.length}const Q=o.parse(V,z,y);if(!Q)return null;y=y||Q.type,w.push(Q)}const C=o.parse(n[1],1,gr);if(!C)return null;const I=o.parse(n[n.length-1],n.length-1,y);return I?C.type.kind!=="value"&&o.concat(1).checkSubtype(d,C.type)?null:new Dn(d,y,C,x,w,I):null}evaluate(n){const o=this.input.evaluate(n);return(nr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))&&this.otherwise.outputDefined()}}class Io{constructor(n,o,d){this.type=n,this.branches=o,this.otherwise=d}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);const y=[];for(let w=1;w<n.length-1;w+=2){const C=o.parse(n[w],w,cr);if(!C)return null;const I=o.parse(n[w+1],w+1,d);if(!I)return null;y.push([C,I]),d=d||I.type}const x=o.parse(n[n.length-1],n.length-1,d);if(!x)return null;if(!d)throw new Error("Can't infer output type");return new Io(d,y,x)}evaluate(n){for(const[o,d]of this.branches)if(o.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,d]of this.branches)n(o),n(d);n(this.otherwise)}outputDefined(){return this.branches.every((([n,o])=>o.outputDefined()))&&this.otherwise.outputDefined()}}class $l{constructor(n,o,d,y){this.type=n,this.input=o,this.beginIndex=d,this.endIndex=y}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const d=o.parse(n[1],1,gr),y=o.parse(n[2],2,Ot);if(!d||!y)return null;if(!Bu(d.type,[mi(gr),Mr,gr]))return o.error(`Expected first argument to be of type array or string, but found ${Xr(d.type)} instead`);if(n.length===4){const x=o.parse(n[3],3,Ot);return x?new $l(d.type,d,y,x):null}return new $l(d.type,d,y)}evaluate(n){const o=this.input.evaluate(n),d=this.beginIndex.evaluate(n);let y;if(this.endIndex&&(y=this.endIndex.evaluate(n)),Fa(o,["string"]))return[...o].slice(d,y).join("");if(Fa(o,["array"]))return o.slice(d,y);throw new tn(`Expected first argument to be of type array or string, but found ${Xr(nr(o))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Qn(s,n){const o=s.length-1;let d,y,x=0,w=o,C=0;for(;x<=w;)if(C=Math.floor((x+w)/2),d=s[C],y=s[C+1],d<=n){if(C===o||n<y)return C;x=C+1}else{if(!(d>n))throw new tn("Input is not a number.");w=C-1}return 0}class sn{constructor(n,o,d){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[y,x]of d)this.labels.push(y),this.outputs.push(x)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const d=o.parse(n[1],1,Ot);if(!d)return null;const y=[];let x=null;o.expectedType&&o.expectedType.kind!=="value"&&(x=o.expectedType);for(let w=1;w<n.length;w+=2){const C=w===1?-1/0:n[w],I=n[w+1],z=w,N=w+1;if(typeof C!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(y.length&&y[y.length-1][0]>=C)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const V=o.parse(I,N,x);if(!V)return null;x=x||V.type,y.push([C,V])}return new sn(x,d,y)}evaluate(n){const o=this.labels,d=this.outputs;if(o.length===1)return d[0].evaluate(n);const y=this.input.evaluate(n);if(y<=o[0])return d[0].evaluate(n);const x=o.length;return y>=o[x-1]?d[x-1].evaluate(n):d[Qn(o,y)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function Uu(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Oo,jh,Lh=(function(){if(jh)return Oo;function s(n,o,d,y){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(y-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=d,this.p2y=y}return jh=1,Oo=s,s.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,y=0;y<8;y++){var x=this.sampleCurveX(d)-n;if(Math.abs(x)<o)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=x/w}var C=0,I=1;for(d=n,y=0;y<20&&(x=this.sampleCurveX(d),!(Math.abs(x-n)<o));y++)n>x?C=d:I=d,d=.5*(I-C)+C;return d},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},Oo})(),us=Uu(Lh);class zn{constructor(n,o,d,y,x){this.type=n,this.operator=o,this.interpolation=d,this.input=y,this.labels=[],this.outputs=[];for(const[w,C]of x)this.labels.push(w),this.outputs.push(C)}static interpolationFactor(n,o,d,y){let x=0;if(n.name==="exponential")x=hs(o,n.base,d,y);else if(n.name==="linear")x=hs(o,1,d,y);else if(n.name==="cubic-bezier"){const w=n.controlPoints;x=new us(w[0],w[1],w[2],w[3]).solve(hs(o,1,d,y))}return x}static parse(n,o){let[d,y,x,...w]=n;if(!Array.isArray(y)||y.length===0)return o.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const z=y[1];if(typeof z!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:z}}else{if(y[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const z=y.slice(1);if(z.length!==4||z.some((N=>typeof N!="number"||N<0||N>1)))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:z}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(x=o.parse(x,2,Ot),!x)return null;const C=[];let I=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||o.expectedType==so?o.expectedType&&o.expectedType.kind!=="value"&&(I=o.expectedType):I=ii;for(let z=0;z<w.length;z+=2){const N=w[z],V=w[z+1],H=z+3,Q=z+4;if(typeof N!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(C.length&&C[C.length-1][0]>=N)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const ee=o.parse(V,Q,I);if(!ee)return null;I=I||ee.type,C.push([N,ee])}return ui(I,Ot)||ui(I,is)||ui(I,ii)||ui(I,Ic)||ui(I,Rl)||ui(I,so)||ui(I,Nu)||ui(I,mi(Ot))?new zn(I,d,y,x,C):o.error(`Type ${Xr(I)} is not interpolatable.`)}evaluate(n){const o=this.labels,d=this.outputs;if(o.length===1)return d[0].evaluate(n);const y=this.input.evaluate(n);if(y<=o[0])return d[0].evaluate(n);const x=o.length;if(y>=o[x-1])return d[x-1].evaluate(n);const w=Qn(o,y),C=zn.interpolationFactor(this.interpolation,y,o[w],o[w+1]),I=d[w].evaluate(n),z=d[w+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return lo(I,z,C);case"color":return _r.interpolate(I,z,C);case"padding":return Pn.interpolate(I,z,C);case"colorArray":return on.interpolate(I,z,C);case"numberArray":return Yn.interpolate(I,z,C);case"variableAnchorOffsetCollection":return Jn.interpolate(I,z,C);case"array":return ss(I,z,C);case"projectionDefinition":return hi.interpolate(I,z,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return _r.interpolate(I,z,C,"hcl");case"colorArray":return on.interpolate(I,z,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return _r.interpolate(I,z,C,"lab");case"colorArray":return on.interpolate(I,z,C,"lab")}}}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function hs(s,n,o,d){const y=d-o,x=s-o;return y===0?0:n===1?x/y:(Math.pow(n,x)-1)/(Math.pow(n,y)-1)}const qa={color:_r.interpolate,number:lo,padding:Pn.interpolate,numberArray:Yn.interpolate,colorArray:on.interpolate,variableAnchorOffsetCollection:Jn.interpolate,array:ss};class Lc{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let d=null;const y=o.expectedType;y&&y.kind!=="value"&&(d=y);const x=[];for(const C of n.slice(1)){const I=o.parse(C,1+x.length,d,void 0,{typeAnnotation:"omit"});if(!I)return null;d=d||I.type,x.push(I)}if(!d)throw new Error("No output type");const w=y&&x.some((C=>Rc(y,C.type)));return new Lc(w?gr:d,x)}evaluate(n){let o,d=null,y=0;for(const x of this.args)if(y++,d=x.evaluate(n),d&&d instanceof sa&&!d.available&&(o||(o=d.name),d=null,y===this.args.length&&(d=o)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}function Nc(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Bc(s,n,o,d){return d.compare(n,o)===0}function ai(s,n,o){const d=s!=="=="&&s!=="!=";return class mR{constructor(x,w,C){this.type=cr,this.lhs=x,this.rhs=w,this.collator=C,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const C=x[0];let I=w.parse(x[1],1,gr);if(!I)return null;if(!Nc(C,I.type))return w.concat(1).error(`"${C}" comparisons are not supported for type '${Xr(I.type)}'.`);let z=w.parse(x[2],2,gr);if(!z)return null;if(!Nc(C,z.type))return w.concat(2).error(`"${C}" comparisons are not supported for type '${Xr(z.type)}'.`);if(I.type.kind!==z.type.kind&&I.type.kind!=="value"&&z.type.kind!=="value")return w.error(`Cannot compare types '${Xr(I.type)}' and '${Xr(z.type)}'.`);d&&(I.type.kind==="value"&&z.type.kind!=="value"?I=new gi(z.type,[I]):I.type.kind!=="value"&&z.type.kind==="value"&&(z=new gi(I.type,[z])));let N=null;if(x.length===4){if(I.type.kind!=="string"&&z.type.kind!=="string"&&I.type.kind!=="value"&&z.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(N=w.parse(x[3],3,kc),!N)return null}return new mR(I,z,N)}evaluate(x){const w=this.lhs.evaluate(x),C=this.rhs.evaluate(x);if(d&&this.hasUntypedArgument){const I=nr(w),z=nr(C);if(I.kind!==z.kind||I.kind!=="string"&&I.kind!=="number")throw new tn(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${I.kind}, ${z.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const I=nr(w),z=nr(C);if(I.kind!=="string"||z.kind!=="string")return n(x,w,C)}return this.collator?o(x,w,C,this.collator.evaluate(x)):n(x,w,C)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Qd=ai("==",(function(s,n,o){return n===o}),Bc),Vu=ai("!=",(function(s,n,o){return n!==o}),(function(s,n,o,d){return!Bc(0,n,o,d)})),Wp=ai("<",(function(s,n,o){return n<o}),(function(s,n,o,d){return d.compare(n,o)<0})),Nh=ai(">",(function(s,n,o){return n>o}),(function(s,n,o,d){return d.compare(n,o)>0})),Zp=ai("<=",(function(s,n,o){return n<=o}),(function(s,n,o,d){return d.compare(n,o)<=0})),ef=ai(">=",(function(s,n,o){return n>=o}),(function(s,n,o,d){return d.compare(n,o)>=0}));class qu{constructor(n,o,d){this.type=kc,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return o.error("Collator options argument must be an object.");const y=o.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,cr);if(!y)return null;const x=o.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,cr);if(!x)return null;let w=null;return d.locale&&(w=o.parse(d.locale,1,Mr),!w)?null:new qu(y,x,w)}evaluate(n){return new co(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class Bh{constructor(n,o,d,y,x){this.type=Mr,this.number=n,this.locale=o,this.currency=d,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const d=o.parse(n[1],1,Ot);if(!d)return null;const y=n[2];if(typeof y!="object"||Array.isArray(y))return o.error("NumberFormat options argument must be an object.");let x=null;if(y.locale&&(x=o.parse(y.locale,1,Mr),!x))return null;let w=null;if(y.currency&&(w=o.parse(y.currency,1,Mr),!w))return null;let C=null;if(y["min-fraction-digits"]&&(C=o.parse(y["min-fraction-digits"],1,Ot),!C))return null;let I=null;return y["max-fraction-digits"]&&(I=o.parse(y["max-fraction-digits"],1,Ot),!I)?null:new Bh(d,x,w,C,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Gs{constructor(n){this.type=Eo,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return o.error("First argument must be an image or text section.");const y=[];let x=!1;for(let w=1;w<=n.length-1;++w){const C=n[w];if(x&&typeof C=="object"&&!Array.isArray(C)){x=!1;let I=null;if(C["font-scale"]&&(I=o.parse(C["font-scale"],1,Ot),!I))return null;let z=null;if(C["text-font"]&&(z=o.parse(C["text-font"],1,mi(Mr)),!z))return null;let N=null;if(C["text-color"]&&(N=o.parse(C["text-color"],1,ii),!N))return null;let V=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!$a.includes(C["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(V=o.parse(C["vertical-align"],1,Mr),!V)return null}const H=y[y.length-1];H.scale=I,H.font=z,H.textColor=N,H.verticalAlign=V}else{const I=o.parse(n[w],1,gr);if(!I)return null;const z=I.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,y.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Gs(y)}evaluate(n){return new Sn(this.sections.map((o=>{const d=o.content.evaluate(n);return nr(d)===wr?new Ua("",d,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(n):null):new Ua(lr(d),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null,o.verticalAlign?o.verticalAlign.evaluate(n):null)})))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor),o.verticalAlign&&n(o.verticalAlign)}outputDefined(){return!1}}class Fh{constructor(n){this.type=wr,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const d=o.parse(n[1],1,Mr);return d?new Fh(d):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),d=sa.fromString(o);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(o)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class Ul{constructor(n){this.type=Ot,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=o.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Xr(d.type)} instead.`):new Ul(d):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new tn(`Expected value to be of type string or array, but found ${Xr(nr(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Ga=8192;function Hp(s,n){const o=(180+s[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,y=Math.pow(2,n.z);return[Math.round(o*y*Ga),Math.round(d*y*Ga)]}function Gu(s,n){const o=Math.pow(2,n.z);return[(y=(s[0]/Ga+n.x)/o,360*y-180),(d=(s[1]/Ga+n.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,y}function Vl(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function Fc(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function Kp(s,n,o){const d=s[0]-n[0],y=s[1]-n[1],x=s[0]-o[0],w=s[1]-o[1];return d*w-x*y==0&&d*x<=0&&y*w<=0}function Wu(s,n,o,d){return(y=[d[0]-o[0],d[1]-o[1]])[0]*(x=[n[0]-s[0],n[1]-s[1]])[1]-y[1]*x[0]!=0&&!(!ql(s,n,o,d)||!ql(o,d,s,n));var y,x}function Xp(s,n,o){for(const d of o)for(let y=0;y<d.length-1;++y)if(Wu(s,n,d[y],d[y+1]))return!0;return!1}function Ws(s,n,o=!1){let d=!1;for(const C of n)for(let I=0;I<C.length-1;I++){if(Kp(s,C[I],C[I+1]))return o;(x=C[I])[1]>(y=s)[1]!=(w=C[I+1])[1]>y[1]&&y[0]<(w[0]-x[0])*(y[1]-x[1])/(w[1]-x[1])+x[0]&&(d=!d)}var y,x,w;return d}function tf(s,n){for(const o of n)if(Ws(s,o))return!0;return!1}function $h(s,n){for(const o of s)if(!Ws(o,n))return!1;for(let o=0;o<s.length-1;++o)if(Xp(s[o],s[o+1],n))return!1;return!0}function Uh(s,n){for(const o of n)if($h(s,o))return!0;return!1}function ql(s,n,o,d){const y=d[0]-o[0],x=d[1]-o[1],w=(s[0]-o[0])*x-y*(s[1]-o[1]),C=(n[0]-o[0])*x-y*(n[1]-o[1]);return w>0&&C<0||w<0&&C>0}function Vh(s,n,o){const d=[];for(let y=0;y<s.length;y++){const x=[];for(let w=0;w<s[y].length;w++){const C=Hp(s[y][w],o);Vl(n,C),x.push(C)}d.push(x)}return d}function qh(s,n,o){const d=[];for(let y=0;y<s.length;y++){const x=Vh(s[y],n,o);d.push(x)}return d}function $c(s,n,o,d){if(s[0]<o[0]||s[0]>o[2]){const y=.5*d;let x=s[0]-o[0]>y?-d:o[0]-s[0]>y?d:0;x===0&&(x=s[0]-o[2]>y?-d:o[2]-s[0]>y?d:0),s[0]+=x}Vl(n,s)}function Gh(s,n,o,d){const y=Math.pow(2,d.z)*Ga,x=[d.x*Ga,d.y*Ga],w=[];for(const C of s)for(const I of C){const z=[I.x+x[0],I.y+x[1]];$c(z,n,o,y),w.push(z)}return w}function Wh(s,n,o,d){const y=Math.pow(2,d.z)*Ga,x=[d.x*Ga,d.y*Ga],w=[];for(const I of s){const z=[];for(const N of I){const V=[N.x+x[0],N.y+x[1]];Vl(n,V),z.push(V)}w.push(z)}if(n[2]-n[0]<=y/2){(C=n)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const I of w)for(const z of I)$c(z,n,o,y)}var C;return w}class ds{constructor(n,o){this.type=cr,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ls(n[1])){const d=n[1];if(d.type==="FeatureCollection"){const y=[];for(const x of d.features){const{type:w,coordinates:C}=x.geometry;w==="Polygon"&&y.push(C),w==="MultiPolygon"&&y.push(...C)}if(y.length)return new ds(d,{type:"MultiPolygon",coordinates:y})}else if(d.type==="Feature"){const y=d.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new ds(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ds(d,d)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(o,d){const y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(d.type==="Polygon"){const C=Vh(d.coordinates,x,w),I=Gh(o.geometry(),y,x,w);if(!Fc(y,x))return!1;for(const z of I)if(!Ws(z,C))return!1}if(d.type==="MultiPolygon"){const C=qh(d.coordinates,x,w),I=Gh(o.geometry(),y,x,w);if(!Fc(y,x))return!1;for(const z of I)if(!tf(z,C))return!1}return!0})(n,this.geometries);if(n.geometryType()==="LineString")return(function(o,d){const y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(d.type==="Polygon"){const C=Vh(d.coordinates,x,w),I=Wh(o.geometry(),y,x,w);if(!Fc(y,x))return!1;for(const z of I)if(!$h(z,C))return!1}if(d.type==="MultiPolygon"){const C=qh(d.coordinates,x,w),I=Wh(o.geometry(),y,x,w);if(!Fc(y,x))return!1;for(const z of I)if(!Uh(z,C))return!1}return!0})(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let fs=class{constructor(s=[],n=(o,d)=>o<d?-1:o>d?1:0){if(this.data=s,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:n,compare:o}=this,d=n[s];for(;s>0;){const y=s-1>>1,x=n[y];if(o(d,x)>=0)break;n[s]=x,s=y}n[s]=d}_down(s){const{data:n,compare:o}=this,d=this.length>>1,y=n[s];for(;s<d;){let x=1+(s<<1);const w=x+1;if(w<this.length&&o(n[w],n[x])<0&&(x=w),o(n[x],y)>=0)break;n[s]=n[x],s=x}n[s]=y}};function Zh(s,n,o=0,d=s.length-1,y=Yp){for(;d>o;){if(d-o>600){const I=d-o+1,z=n-o+1,N=Math.log(I),V=.5*Math.exp(2*N/3),H=.5*Math.sqrt(N*V*(I-V)/I)*(z-I/2<0?-1:1);Zh(s,n,Math.max(o,Math.floor(n-z*V/I+H)),Math.min(d,Math.floor(n+(I-z)*V/I+H)),y)}const x=s[n];let w=o,C=d;for(Uc(s,o,n),y(s[d],x)>0&&Uc(s,o,d);w<C;){for(Uc(s,w,C),w++,C--;y(s[w],x)<0;)w++;for(;y(s[C],x)>0;)C--}y(s[o],x)===0?Uc(s,o,C):(C++,Uc(s,C,d)),C<=n&&(o=C+1),n<=C&&(d=C-1)}}function Uc(s,n,o){const d=s[n];s[n]=s[o],s[o]=d}function Yp(s,n){return s<n?-1:s>n?1:0}function Gl(s,n){if(s.length<=1)return[s];const o=[];let d,y;for(const x of s){const w=Vc(x);w!==0&&(x.area=Math.abs(w),y===void 0&&(y=w<0),y===w<0?(d&&o.push(d),d=[x]):d.push(x))}if(d&&o.push(d),n>1)for(let x=0;x<o.length;x++)o[x].length<=n||(Zh(o[x],n,1,o[x].length-1,Hh),o[x]=o[x].slice(0,n));return o}function Hh(s,n){return n.area-s.area}function Vc(s){let n=0;for(let o,d,y=0,x=s.length,w=x-1;y<x;w=y++)o=s[y],d=s[w],n+=(d.x-o.x)*(o.y+d.y);return n}const Wl=1/298.257223563,rf=Wl*(2-Wl),Zl=Math.PI/180;class Kh{constructor(n){const o=6378.137*Zl*1e3,d=Math.cos(n*Zl),y=1/(1-rf*(1-d*d)),x=Math.sqrt(y);this.kx=o*x*d,this.ky=o*x*y*(1-rf)}distance(n,o){const d=this.wrap(n[0]-o[0])*this.kx,y=(n[1]-o[1])*this.ky;return Math.sqrt(d*d+y*y)}pointOnLine(n,o){let d,y,x,w,C=1/0;for(let I=0;I<n.length-1;I++){let z=n[I][0],N=n[I][1],V=this.wrap(n[I+1][0]-z)*this.kx,H=(n[I+1][1]-N)*this.ky,Q=0;V===0&&H===0||(Q=(this.wrap(o[0]-z)*this.kx*V+(o[1]-N)*this.ky*H)/(V*V+H*H),Q>1?(z=n[I+1][0],N=n[I+1][1]):Q>0&&(z+=V/this.kx*Q,N+=H/this.ky*Q)),V=this.wrap(o[0]-z)*this.kx,H=(o[1]-N)*this.ky;const ee=V*V+H*H;ee<C&&(C=ee,d=z,y=N,x=I,w=Q)}return{point:[d,y],index:x,t:Math.max(0,Math.min(1,w))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Xh(s,n){return n[0]-s[0]}function Hl(s){return s[1]-s[0]+1}function Wa(s,n){return s[1]>=s[0]&&s[1]<n}function zr(s,n){if(s[0]>s[1])return[null,null];const o=Hl(s);if(n){if(o===2)return[s,null];const y=Math.floor(o/2);return[[s[0],s[0]+y],[s[0]+y,s[1]]]}if(o===1)return[s,null];const d=Math.floor(o/2)-1;return[[s[0],s[0]+d],[s[0]+d+1,s[1]]]}function Zu(s,n){if(!Wa(n,s.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)Vl(o,s[d]);return o}function Hu(s){const n=[1/0,1/0,-1/0,-1/0];for(const o of s)for(const d of o)Vl(n,d);return n}function nf(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Yh(s,n,o){if(!nf(s)||!nf(n))return NaN;let d=0,y=0;return s[2]<n[0]&&(d=n[0]-s[2]),s[0]>n[2]&&(d=s[0]-n[2]),s[1]>n[3]&&(y=s[1]-n[3]),s[3]<n[1]&&(y=n[1]-s[3]),o.distance([0,0],[d,y])}function Zs(s,n,o){const d=o.pointOnLine(n,s);return o.distance(s,d.point)}function Jh(s,n,o,d,y){const x=Math.min(Zs(s,[o,d],y),Zs(n,[o,d],y)),w=Math.min(Zs(o,[s,n],y),Zs(d,[s,n],y));return Math.min(x,w)}function Jp(s,n,o,d,y){if(!Wa(n,s.length)||!Wa(d,o.length))return 1/0;let x=1/0;for(let w=n[0];w<n[1];++w){const C=s[w],I=s[w+1];for(let z=d[0];z<d[1];++z){const N=o[z],V=o[z+1];if(Wu(C,I,N,V))return 0;x=Math.min(x,Jh(C,I,N,V,y))}}return x}function Za(s,n,o,d,y){if(!Wa(n,s.length)||!Wa(d,o.length))return NaN;let x=1/0;for(let w=n[0];w<=n[1];++w)for(let C=d[0];C<=d[1];++C)if(x=Math.min(x,y.distance(s[w],o[C])),x===0)return x;return x}function qc(s,n,o){if(Ws(s,n,!0))return 0;let d=1/0;for(const y of n){const x=y[0],w=y[y.length-1];if(x!==w&&(d=Math.min(d,Zs(s,[w,x],o)),d===0))return d;const C=o.pointOnLine(y,s);if(d=Math.min(d,o.distance(s,C.point)),d===0)return d}return d}function af(s,n,o,d){if(!Wa(n,s.length))return NaN;for(let x=n[0];x<=n[1];++x)if(Ws(s[x],o,!0))return 0;let y=1/0;for(let x=n[0];x<n[1];++x){const w=s[x],C=s[x+1];for(const I of o)for(let z=0,N=I.length,V=N-1;z<N;V=z++){const H=I[V],Q=I[z];if(Wu(w,C,H,Q))return 0;y=Math.min(y,Jh(w,C,H,Q,d))}}return y}function Qh(s,n){for(const o of s)for(const d of o)if(Ws(d,n,!0))return!0;return!1}function of(s,n,o,d=1/0){const y=Hu(s),x=Hu(n);if(d!==1/0&&Yh(y,x,o)>=d)return d;if(Fc(y,x)){if(Qh(s,n))return 0}else if(Qh(n,s))return 0;let w=1/0;for(const C of s)for(let I=0,z=C.length,N=z-1;I<z;N=I++){const V=C[N],H=C[I];for(const Q of n)for(let ee=0,se=Q.length,fe=se-1;ee<se;fe=ee++){const _e=Q[fe],$e=Q[ee];if(Wu(V,H,_e,$e))return 0;w=Math.min(w,Jh(V,H,_e,$e,o))}}return w}function ed(s,n,o,d,y,x){if(!x)return;const w=Yh(Zu(d,x),y,o);w<n&&s.push([w,x,[0,0]])}function Kl(s,n,o,d,y,x,w){if(!x||!w)return;const C=Yh(Zu(d,x),Zu(y,w),o);C<n&&s.push([C,x,w])}function Ku(s,n,o,d,y=1/0){let x=Math.min(d.distance(s[0],o[0][0]),y);if(x===0)return x;const w=new fs([[0,[0,s.length-1],[0,0]]],Xh),C=Hu(o);for(;w.length>0;){const I=w.pop();if(I[0]>=x)continue;const z=I[1],N=n?50:100;if(Hl(z)<=N){if(!Wa(z,s.length))return NaN;if(n){const V=af(s,z,o,d);if(isNaN(V)||V===0)return V;x=Math.min(x,V)}else for(let V=z[0];V<=z[1];++V){const H=qc(s[V],o,d);if(x=Math.min(x,H),x===0)return 0}}else{const V=zr(z,n);ed(w,x,d,s,C,V[0]),ed(w,x,d,s,C,V[1])}}return x}function Xu(s,n,o,d,y,x=1/0){let w=Math.min(x,y.distance(s[0],o[0]));if(w===0)return w;const C=new fs([[0,[0,s.length-1],[0,o.length-1]]],Xh);for(;C.length>0;){const I=C.pop();if(I[0]>=w)continue;const z=I[1],N=I[2],V=n?50:100,H=d?50:100;if(Hl(z)<=V&&Hl(N)<=H){if(!Wa(z,s.length)&&Wa(N,o.length))return NaN;let Q;if(n&&d)Q=Jp(s,z,o,N,y),w=Math.min(w,Q);else if(n&&!d){const ee=s.slice(z[0],z[1]+1);for(let se=N[0];se<=N[1];++se)if(Q=Zs(o[se],ee,y),w=Math.min(w,Q),w===0)return w}else if(!n&&d){const ee=o.slice(N[0],N[1]+1);for(let se=z[0];se<=z[1];++se)if(Q=Zs(s[se],ee,y),w=Math.min(w,Q),w===0)return w}else Q=Za(s,z,o,N,y),w=Math.min(w,Q)}else{const Q=zr(z,n),ee=zr(N,d);Kl(C,w,y,s,o,Q[0],ee[0]),Kl(C,w,y,s,o,Q[0],ee[1]),Kl(C,w,y,s,o,Q[1],ee[0]),Kl(C,w,y,s,o,Q[1],ee[1])}}return w}function ps(s){return s.type==="MultiPolygon"?s.coordinates.map((n=>({type:"Polygon",coordinates:n}))):s.type==="MultiLineString"?s.coordinates.map((n=>({type:"LineString",coordinates:n}))):s.type==="MultiPoint"?s.coordinates.map((n=>({type:"Point",coordinates:n}))):[s]}class Ro{constructor(n,o){this.type=Ot,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ls(n[1])){const d=n[1];if(d.type==="FeatureCollection")return new Ro(d,d.features.map((y=>ps(y.geometry))).flat());if(d.type==="Feature")return new Ro(d,ps(d.geometry));if("type"in d&&"coordinates"in d)return new Ro(d,ps(d))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(o,d){const y=o.geometry(),x=y.flat().map((I=>Gu([I.x,I.y],o.canonical)));if(y.length===0)return NaN;const w=new Kh(x[0][1]);let C=1/0;for(const I of d){switch(I.type){case"Point":C=Math.min(C,Xu(x,!1,[I.coordinates],!1,w,C));break;case"LineString":C=Math.min(C,Xu(x,!1,I.coordinates,!0,w,C));break;case"Polygon":C=Math.min(C,Ku(x,!1,I.coordinates,w,C))}if(C===0)return C}return C})(n,this.geometries);if(n.geometryType()==="LineString")return(function(o,d){const y=o.geometry(),x=y.flat().map((I=>Gu([I.x,I.y],o.canonical)));if(y.length===0)return NaN;const w=new Kh(x[0][1]);let C=1/0;for(const I of d){switch(I.type){case"Point":C=Math.min(C,Xu(x,!0,[I.coordinates],!1,w,C));break;case"LineString":C=Math.min(C,Xu(x,!0,I.coordinates,!0,w,C));break;case"Polygon":C=Math.min(C,Ku(x,!0,I.coordinates,w,C))}if(C===0)return C}return C})(n,this.geometries);if(n.geometryType()==="Polygon")return(function(o,d){const y=o.geometry();if(y.length===0||y[0].length===0)return NaN;const x=Gl(y,0).map((I=>I.map((z=>z.map((N=>Gu([N.x,N.y],o.canonical))))))),w=new Kh(x[0][0][0][1]);let C=1/0;for(const I of d)for(const z of x){switch(I.type){case"Point":C=Math.min(C,Ku([I.coordinates],!1,z,w,C));break;case"LineString":C=Math.min(C,Ku(I.coordinates,!0,z,w,C));break;case"Polygon":C=Math.min(C,of(z,I.coordinates,w,C))}if(C===0)return C}return C})(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Do{constructor(n){this.type=gr,this.key=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=n[1];return d==null?o.error("Global state property must be defined."):typeof d!="string"?o.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new Do(d)}evaluate(n){var o;const d=(o=n.globals)===null||o===void 0?void 0:o.globalState;return d&&Object.keys(d).length!==0?os(d,this.key):null}eachChild(){}outputDefined(){return!1}}const ms={"==":Qd,"!=":Vu,">":Nh,"<":Wp,">=":ef,"<=":Zp,array:gi,at:Fl,boolean:gi,case:Io,coalesce:Lc,collator:qu,format:Gs,image:Fh,in:qs,"index-of":Aa,interpolate:zn,"interpolate-hcl":zn,"interpolate-lab":zn,length:Ul,let:Bl,literal:la,match:Dn,number:gi,"number-format":Bh,object:gi,slice:$l,step:sn,string:gi,"to-boolean":ho,"to-color":ho,"to-number":ho,"to-string":ho,var:Va,within:ds,distance:Ro,"global-state":Do};class ca{constructor(n,o,d,y){this.name=n,this.type=o,this._evaluate=d,this.args=y}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,o){const d=n[0],y=ca.definitions[d];if(!y)return o.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(y)?y[0]:y.type,w=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,C=w.filter((([z])=>!Array.isArray(z)||z.length===n.length-1));let I=null;for(const[z,N]of C){I=new cs(o.registry,Ks,o.path,null,o.scope);const V=[];let H=!1;for(let Q=1;Q<n.length;Q++){const ee=n[Q],se=Array.isArray(z)?z[Q-1]:z.type,fe=I.parse(ee,1+V.length,se);if(!fe){H=!0;break}V.push(fe)}if(!H)if(Array.isArray(z)&&z.length!==V.length)I.error(`Expected ${z.length} arguments, but found ${V.length} instead.`);else{for(let Q=0;Q<V.length;Q++){const ee=Array.isArray(z)?z[Q]:z.type,se=V[Q];I.concat(Q+1).checkSubtype(ee,se.type)}if(I.errors.length===0)return new ca(d,x,N,V)}}if(C.length===1)o.errors.push(...I.errors);else{const z=(C.length?C:w).map((([V])=>{return H=V,Array.isArray(H)?`(${H.map(Xr).join(", ")})`:`(${Xr(H.type)}...)`;var H})).join(" | "),N=[];for(let V=1;V<n.length;V++){const H=o.parse(n[V],1+N.length);if(!H)return null;N.push(Xr(H.type))}o.error(`Expected arguments of type ${z}, but found (${N.join(", ")}) instead.`)}return null}static register(n,o){ca.definitions=o;for(const d in o)n[d]=ca}}function Gc(s,[n,o,d,y]){n=n.evaluate(s),o=o.evaluate(s),d=d.evaluate(s);const x=y?y.evaluate(s):1,w=Yr(n,o,d,x);if(w)throw new tn(w);return new _r(n/255,o/255,d/255,x,!1)}function Hs(s,n){return s in n}function Wc(s,n){const o=n[s];return o===void 0?null:o}function gs(s){return{type:s}}function Ks(s){if(s instanceof Va)return Ks(s.boundExpression);if(s instanceof ca&&s.name==="error"||s instanceof qu||s instanceof ds||s instanceof Ro||s instanceof Do)return!1;const n=s instanceof ho||s instanceof gi;let o=!0;return s.eachChild((d=>{o=n?o&&Ks(d):o&&d instanceof la})),!!o&&Zc(s)&&Hc(s,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Zc(s){if(s instanceof ca&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof ds||s instanceof Ro)return!1;let n=!0;return s.eachChild((o=>{n&&!Zc(o)&&(n=!1)})),n}function Xl(s){if(s instanceof ca&&s.name==="feature-state")return!1;let n=!0;return s.eachChild((o=>{n&&!Xl(o)&&(n=!1)})),n}function Hc(s,n){if(s instanceof ca&&n.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild((d=>{o&&!Hc(d,n)&&(o=!1)})),o}function td(s){return{result:"success",value:s}}function Xs(s){return{result:"error",value:s}}function zo(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function jo(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Kc(s){return!!s.expression&&s.expression.interpolated}function Tr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Xc(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&nr(s)===as}function Qp(s){return s}function Yl(s,n){const o=s.stops&&typeof s.stops[0][0]=="object",d=o||!(o||s.property!==void 0),y=s.type||(Kc(n)?"exponential":"interval"),x=(function(N){switch(N.type){case"color":return _r.parse;case"padding":return Pn.parse;case"numberArray":return Yn.parse;case"colorArray":return on.parse;default:return null}})(n);if(x&&((s=Xn({},s)).stops&&(s.stops=s.stops.map((N=>[N[0],x(N[1])]))),s.default=x(s.default?s.default:n.default)),s.colorSpace&&(w=s.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var w;const C=(function(N){switch(N){case"exponential":return cn;case"interval":return sf;case"categorical":return rd;case"identity":return nd;default:throw new Error(`Unknown function type "${N}"`)}})(y);let I,z;if(y==="categorical"){I=Object.create(null);for(const N of s.stops)I[N[0]]=N[1];z=typeof s.stops[0][0]}if(o){const N={},V=[];for(let ee=0;ee<s.stops.length;ee++){const se=s.stops[ee],fe=se[0].zoom;N[fe]===void 0&&(N[fe]={zoom:fe,type:s.type,property:s.property,default:s.default,stops:[]},V.push(fe)),N[fe].stops.push([se[0].value,se[1]])}const H=[];for(const ee of V)H.push([N[ee].zoom,Yl(N[ee],n)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:zn.interpolationFactor.bind(void 0,Q),zoomStops:H.map((ee=>ee[0])),evaluate:({zoom:ee},se)=>cn({stops:H,base:s.base},n,ee).evaluate(ee,se)}}if(d){const N=y==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:zn.interpolationFactor.bind(void 0,N),zoomStops:s.stops.map((V=>V[0])),evaluate:({zoom:V})=>C(s,n,V,I,z)}}return{kind:"source",evaluate(N,V){const H=V&&V.properties?V.properties[s.property]:void 0;return H===void 0?ys(s.default,n.default):C(s,n,H,I,z)}}}function ys(s,n,o){return s!==void 0?s:n!==void 0?n:o!==void 0?o:void 0}function rd(s,n,o,d,y){return ys(typeof o===y?d[o]:void 0,s.default,n.default)}function sf(s,n,o){if(Tr(o)!=="number")return ys(s.default,n.default);const d=s.stops.length;if(d===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[d-1][0])return s.stops[d-1][1];const y=Qn(s.stops.map((x=>x[0])),o);return s.stops[y][1]}function cn(s,n,o){const d=s.base!==void 0?s.base:1;if(Tr(o)!=="number")return ys(s.default,n.default);const y=s.stops.length;if(y===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[y-1][0])return s.stops[y-1][1];const x=Qn(s.stops.map((N=>N[0])),o),w=(function(N,V,H,Q){const ee=Q-H,se=N-H;return ee===0?0:V===1?se/ee:(Math.pow(V,se)-1)/(Math.pow(V,ee)-1)})(o,d,s.stops[x][0],s.stops[x+1][0]),C=s.stops[x][1],I=s.stops[x+1][1],z=qa[n.type]||Qp;return typeof C.evaluate=="function"?{evaluate(...N){const V=C.evaluate.apply(void 0,N),H=I.evaluate.apply(void 0,N);if(V!==void 0&&H!==void 0)return z(V,H,w,s.colorSpace)}}:z(C,I,w,s.colorSpace)}function nd(s,n,o){switch(n.type){case"color":o=_r.parse(o);break;case"formatted":o=Sn.fromString(o.toString());break;case"resolvedImage":o=sa.fromString(o.toString());break;case"padding":o=Pn.parse(o);break;case"colorArray":o=on.parse(o);break;case"numberArray":o=Yn.parse(o);break;default:Tr(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0)}return ys(o,s.default,n.default)}ca.register(ms,{error:[{kind:"error"},[Mr],(s,[n])=>{throw new tn(n.evaluate(s))}],typeof:[Mr,[gr],(s,[n])=>Xr(nr(n.evaluate(s)))],"to-rgba":[mi(Ot,4),[ii],(s,[n])=>{const[o,d,y,x]=n.evaluate(s).rgb;return[255*o,255*d,255*y,x]}],rgb:[ii,[Ot,Ot,Ot],Gc],rgba:[ii,[Ot,Ot,Ot,Ot],Gc],has:{type:cr,overloads:[[[Mr],(s,[n])=>Hs(n.evaluate(s),s.properties())],[[Mr,as],(s,[n,o])=>Hs(n.evaluate(s),o.evaluate(s))]]},get:{type:gr,overloads:[[[Mr],(s,[n])=>Wc(n.evaluate(s),s.properties())],[[Mr,as],(s,[n,o])=>Wc(n.evaluate(s),o.evaluate(s))]]},"feature-state":[gr,[Mr],(s,[n])=>Wc(n.evaluate(s),s.featureState||{})],properties:[as,[],s=>s.properties()],"geometry-type":[Mr,[],s=>s.geometryType()],id:[gr,[],s=>s.id()],zoom:[Ot,[],s=>s.globals.zoom],"heatmap-density":[Ot,[],s=>s.globals.heatmapDensity||0],elevation:[Ot,[],s=>s.globals.elevation||0],"line-progress":[Ot,[],s=>s.globals.lineProgress||0],accumulated:[gr,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ot,gs(Ot),(s,n)=>{let o=0;for(const d of n)o+=d.evaluate(s);return o}],"*":[Ot,gs(Ot),(s,n)=>{let o=1;for(const d of n)o*=d.evaluate(s);return o}],"-":{type:Ot,overloads:[[[Ot,Ot],(s,[n,o])=>n.evaluate(s)-o.evaluate(s)],[[Ot],(s,[n])=>-n.evaluate(s)]]},"/":[Ot,[Ot,Ot],(s,[n,o])=>n.evaluate(s)/o.evaluate(s)],"%":[Ot,[Ot,Ot],(s,[n,o])=>n.evaluate(s)%o.evaluate(s)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(s,[n,o])=>Math.pow(n.evaluate(s),o.evaluate(s))],sqrt:[Ot,[Ot],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[Ot,[Ot],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[Ot,[Ot],(s,[n])=>Math.log(n.evaluate(s))],log2:[Ot,[Ot],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[Ot,[Ot],(s,[n])=>Math.sin(n.evaluate(s))],cos:[Ot,[Ot],(s,[n])=>Math.cos(n.evaluate(s))],tan:[Ot,[Ot],(s,[n])=>Math.tan(n.evaluate(s))],asin:[Ot,[Ot],(s,[n])=>Math.asin(n.evaluate(s))],acos:[Ot,[Ot],(s,[n])=>Math.acos(n.evaluate(s))],atan:[Ot,[Ot],(s,[n])=>Math.atan(n.evaluate(s))],min:[Ot,gs(Ot),(s,n)=>Math.min(...n.map((o=>o.evaluate(s))))],max:[Ot,gs(Ot),(s,n)=>Math.max(...n.map((o=>o.evaluate(s))))],abs:[Ot,[Ot],(s,[n])=>Math.abs(n.evaluate(s))],round:[Ot,[Ot],(s,[n])=>{const o=n.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ot,[Ot],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[Ot,[Ot],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[cr,[Mr,gr],(s,[n,o])=>s.properties()[n.value]===o.value],"filter-id-==":[cr,[gr],(s,[n])=>s.id()===n.value],"filter-type-==":[cr,[Mr],(s,[n])=>s.geometryType()===n.value],"filter-<":[cr,[Mr,gr],(s,[n,o])=>{const d=s.properties()[n.value],y=o.value;return typeof d==typeof y&&d<y}],"filter-id-<":[cr,[gr],(s,[n])=>{const o=s.id(),d=n.value;return typeof o==typeof d&&o<d}],"filter->":[cr,[Mr,gr],(s,[n,o])=>{const d=s.properties()[n.value],y=o.value;return typeof d==typeof y&&d>y}],"filter-id->":[cr,[gr],(s,[n])=>{const o=s.id(),d=n.value;return typeof o==typeof d&&o>d}],"filter-<=":[cr,[Mr,gr],(s,[n,o])=>{const d=s.properties()[n.value],y=o.value;return typeof d==typeof y&&d<=y}],"filter-id-<=":[cr,[gr],(s,[n])=>{const o=s.id(),d=n.value;return typeof o==typeof d&&o<=d}],"filter->=":[cr,[Mr,gr],(s,[n,o])=>{const d=s.properties()[n.value],y=o.value;return typeof d==typeof y&&d>=y}],"filter-id->=":[cr,[gr],(s,[n])=>{const o=s.id(),d=n.value;return typeof o==typeof d&&o>=d}],"filter-has":[cr,[gr],(s,[n])=>n.value in s.properties()],"filter-has-id":[cr,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[cr,[mi(Mr)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[cr,[mi(gr)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[cr,[Mr,mi(gr)],(s,[n,o])=>o.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[cr,[Mr,mi(gr)],(s,[n,o])=>(function(d,y,x,w){for(;x<=w;){const C=x+w>>1;if(y[C]===d)return!0;y[C]>d?w=C-1:x=C+1}return!1})(s.properties()[n.value],o.value,0,o.value.length-1)],all:{type:cr,overloads:[[[cr,cr],(s,[n,o])=>n.evaluate(s)&&o.evaluate(s)],[gs(cr),(s,n)=>{for(const o of n)if(!o.evaluate(s))return!1;return!0}]]},any:{type:cr,overloads:[[[cr,cr],(s,[n,o])=>n.evaluate(s)||o.evaluate(s)],[gs(cr),(s,n)=>{for(const o of n)if(o.evaluate(s))return!0;return!1}]]},"!":[cr,[cr],(s,[n])=>!n.evaluate(s)],"is-supported-script":[cr,[Mr],(s,[n])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(n.evaluate(s))}],upcase:[Mr,[Mr],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Mr,[Mr],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Mr,gs(gr),(s,n)=>n.map((o=>lr(o.evaluate(s)))).join("")],"resolved-locale":[Mr,[kc],(s,[n])=>n.evaluate(s).resolvedLocale()]});class Jl{constructor(n,o,d){this.expression=n,this._warningHistory={},this._evaluator=new Nl,this._defaultValue=o?(function(y){if(y.type==="color"&&Xc(y.default))return new _r(0,0,0,0);switch(y.type){case"color":return _r.parse(y.default)||null;case"padding":return Pn.parse(y.default)||null;case"numberArray":return Yn.parse(y.default)||null;case"colorArray":return on.parse(y.default)||null;case"variableAnchorOffsetCollection":return Jn.parse(y.default)||null;case"projectionDefinition":return hi.parse(y.default)||null;default:return y.default===void 0?null:y.default}})(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this._globalState=d}evaluateWithoutErrorHandling(n,o,d,y,x,w){return this._globalState&&(n=Qs(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=d,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(n,o,d,y,x,w){this._globalState&&(n=Qs(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=d||null,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new tn(`Expected value to be one of ${Object.keys(this._enumValues).map((I=>JSON.stringify(I))).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function vs(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in ms}function Ql(s,n,o){const d=new cs(ms,Ks,[],n?(function(x){const w={color:ii,string:Mr,number:Ot,enum:Mr,boolean:cr,formatted:Eo,padding:Ic,numberArray:Rl,colorArray:so,projectionDefinition:is,resolvedImage:wr,variableAnchorOffsetCollection:Nu};return x.type==="array"?mi(w[x.value]||gr,x.length):w[x.type]})(n):void 0),y=d.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?td(new Jl(y,n,o)):Xs(d.errors)}class Ys{constructor(n,o,d){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!Xl(o.expression),this.globalStateRefs=Jc(o.expression),this._globalState=d}evaluateWithoutErrorHandling(n,o,d,y,x,w){return this._globalState&&(n=Qs(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,d,y,x,w)}evaluate(n,o,d,y,x,w){return this._globalState&&(n=Qs(n,this._globalState)),this._styleExpression.evaluate(n,o,d,y,x,w)}}class Js{constructor(n,o,d,y,x){this.kind=n,this.zoomStops=d,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!Xl(o.expression),this.globalStateRefs=Jc(o.expression),this.interpolationType=y,this._globalState=x}evaluateWithoutErrorHandling(n,o,d,y,x,w){return this._globalState&&(n=Qs(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,d,y,x,w)}evaluate(n,o,d,y,x,w){return this._globalState&&(n=Qs(n,this._globalState)),this._styleExpression.evaluate(n,o,d,y,x,w)}interpolationFactor(n,o,d){return this.interpolationType?zn.interpolationFactor(this.interpolationType,n,o,d):0}}function Yc(s,n,o){const d=Ql(s,n,o);if(d.result==="error")return d;const y=d.value.expression,x=Zc(y);if(!x&&!zo(n))return Xs([new ln("","data expressions not supported")]);const w=Hc(y,["zoom"]);if(!w&&!jo(n))return Xs([new ln("","zoom expressions not supported")]);const C=ec(y);return C||w?C instanceof ln?Xs([C]):C instanceof zn&&!Kc(n)?Xs([new ln("",'"interpolate" expressions cannot be used with this property')]):td(C?new Js(x?"camera":"composite",d.value,C.labels,C instanceof zn?C.interpolation:void 0,o):new Ys(x?"constant":"source",d.value,o)):Xs([new ln("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fo{constructor(n,o){this._parameters=n,this._specification=o,Xn(this,Yl(this._parameters,this._specification))}static deserialize(n){return new fo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function ec(s){let n=null;if(s instanceof Bl)n=ec(s.result);else if(s instanceof Lc){for(const o of s.args)if(n=ec(o),n)break}else(s instanceof sn||s instanceof zn)&&s.input instanceof ca&&s.input.name==="zoom"&&(n=s);return n instanceof ln||s.eachChild((o=>{const d=ec(o);d instanceof ln?n=d:!n&&d?n=new ln("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new ln("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function Jc(s,n=new Set){return s instanceof Do&&n.add(s.key),s.eachChild((o=>{Jc(o,n)})),n}function Qs(s,n){const{zoom:o,heatmapDensity:d,elevation:y,lineProgress:x,isSupportedScript:w,accumulated:C}=s??{};return{zoom:o,heatmapDensity:d,elevation:y,lineProgress:x,isSupportedScript:w,accumulated:C,globalState:n}}function tc(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!tc(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const rc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function po(s,n){if(s==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};tc(s)||(s=nc(s));const o=Ql(s,rc,n);if(o.result==="error")throw new Error(o.value.map((d=>`${d.key}: ${d.message}`)).join(", "));return{filter:(d,y,x)=>o.value.evaluate(d,y,{},x),needGeometry:el(s),getGlobalStateRefs:()=>Jc(o.value.expression)}}function Qc(s,n){return s<n?-1:s>n?1:0}function el(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let n=1;n<s.length;n++)if(el(s[n]))return!0;return!1}function nc(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?eu(s[1],s[2],"=="):n==="!="?Yu(eu(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?eu(s[1],s[2],n):n==="any"?(o=s.slice(1),["any"].concat(o.map(nc))):n==="all"?["all"].concat(s.slice(1).map(nc)):n==="none"?["all"].concat(s.slice(1).map(nc).map(Yu)):n==="in"?lf(s[1],s.slice(2)):n==="!in"?Yu(lf(s[1],s.slice(2))):n==="has"?id(s[1]):n!=="!has"||Yu(id(s[1]));var o}function eu(s,n,o){switch(s){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,s,n]}}function lf(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((o=>typeof o!=typeof n[0]))?["filter-in-large",s,["literal",n.sort(Qc)]]:["filter-in-small",s,["literal",n]]}}function id(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Yu(s){return["!",s]}function ad(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let y="[";for(const x of s)y+=`${ad(x)},`;return`${y}]`}const o=Object.keys(s).sort();let d="{";for(let y=0;y<o.length;y++)d+=`${JSON.stringify(o[y])}:${ad(s[o[y]])},`;return`${d}}`}function Ju(s){let n="";for(const o of sr)n+=`/${ad(s[o])}`;return n}function mo(s){const n=s.value;return n?[new _t(s.key,n,"constants have been deprecated as of v8")]:[]}function un(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Ca(s){if(Array.isArray(s))return s.map(Ca);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const o in s)n[o]=Ca(s[o]);return n}return un(s)}function Tn(s){const n=s.key,o=s.value,d=s.valueSpec||{},y=s.objectElementValidators||{},x=s.style,w=s.styleSpec,C=s.validateSpec;let I=[];const z=Tr(o);if(z!=="object")return[new _t(n,o,`object expected, ${z} found`)];for(const N in o){const V=N.split(".")[0],H=os(d,V)||d["*"];let Q;if(os(y,V))Q=y[V];else if(os(d,V))Q=C;else if(y["*"])Q=y["*"];else{if(!d["*"]){I.push(new _t(n,o[N],`unknown property "${N}"`));continue}Q=C}I=I.concat(Q({key:(n&&`${n}.`)+N,value:o[N],valueSpec:H,style:x,styleSpec:w,object:o,objectKey:N,validateSpec:C},o))}for(const N in d)y[N]||d[N].required&&d[N].default===void 0&&o[N]===void 0&&I.push(new _t(n,o,`missing required property "${N}"`));return I}function _s(s){const n=s.value,o=s.valueSpec,d=s.style,y=s.styleSpec,x=s.key,w=s.arrayElementValidator||s.validateSpec;if(Tr(n)!=="array")return[new _t(x,n,`array expected, ${Tr(n)} found`)];if(o.length&&n.length!==o.length)return[new _t(x,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new _t(x,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let C={type:o.value,values:o.values};y.$version<7&&(C.function=o.function),Tr(o.value)==="object"&&(C=o.value);let I=[];for(let z=0;z<n.length;z++)I=I.concat(w({array:n,arrayIndex:z,value:n[z],valueSpec:C,validateSpec:s.validateSpec,style:d,styleSpec:y,key:`${x}[${z}]`}));return I}function Ea(s){const n=s.key,o=s.value,d=s.valueSpec;let y=Tr(o);return y==="number"&&o!=o&&(y="NaN"),y!=="number"?[new _t(n,o,`number expected, ${y} found`)]:"minimum"in d&&o<d.minimum?[new _t(n,o,`${o} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&o>d.maximum?[new _t(n,o,`${o} is greater than the maximum value ${d.maximum}`)]:[]}function tu(s){const n=s.valueSpec,o=un(s.value.type);let d,y,x,w={};const C=o!=="categorical"&&s.value.property===void 0,I=!C,z=Tr(s.value.stops)==="array"&&Tr(s.value.stops[0])==="array"&&Tr(s.value.stops[0][0])==="object",N=Tn({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Q){if(o==="identity")return[new _t(Q.key,Q.value,'identity function may not have a "stops" property')];let ee=[];const se=Q.value;return ee=ee.concat(_s({key:Q.key,value:se,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:V})),Tr(se)==="array"&&se.length===0&&ee.push(new _t(Q.key,se,"array must have at least one stop")),ee},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return o==="identity"&&C&&N.push(new _t(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||N.push(new _t(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!Kc(s.valueSpec)&&N.push(new _t(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(I&&!zo(s.valueSpec)?N.push(new _t(s.key,s.value,"property functions not supported")):C&&!jo(s.valueSpec)&&N.push(new _t(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!z||s.value.property!==void 0||N.push(new _t(s.key,s.value,'"property" property is required')),N;function V(Q){let ee=[];const se=Q.value,fe=Q.key;if(Tr(se)!=="array")return[new _t(fe,se,`array expected, ${Tr(se)} found`)];if(se.length!==2)return[new _t(fe,se,`array length 2 expected, length ${se.length} found`)];if(z){if(Tr(se[0])!=="object")return[new _t(fe,se,`object expected, ${Tr(se[0])} found`)];if(se[0].zoom===void 0)return[new _t(fe,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new _t(fe,se,"object stop key must have value")];if(x&&x>un(se[0].zoom))return[new _t(fe,se[0].zoom,"stop zoom values must appear in ascending order")];un(se[0].zoom)!==x&&(x=un(se[0].zoom),y=void 0,w={}),ee=ee.concat(Tn({key:`${fe}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Ea,value:H}}))}else ee=ee.concat(H({key:`${fe}[0]`,value:se[0],validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},se));return vs(Ca(se[1]))?ee.concat([new _t(`${fe}[1]`,se[1],"expressions are not allowed in function stops.")]):ee.concat(Q.validateSpec({key:`${fe}[1]`,value:se[1],valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function H(Q,ee){const se=Tr(Q.value),fe=un(Q.value),_e=Q.value!==null?Q.value:ee;if(d){if(se!==d)return[new _t(Q.key,_e,`${se} stop domain type must match previous stop domain type ${d}`)]}else d=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new _t(Q.key,_e,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&o!=="categorical"){let $e=`number expected, ${se} found`;return zo(n)&&o===void 0&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _t(Q.key,_e,$e)]}return o!=="categorical"||se!=="number"||isFinite(fe)&&Math.floor(fe)===fe?o!=="categorical"&&se==="number"&&y!==void 0&&fe<y?[new _t(Q.key,_e,"stop domain values must appear in ascending order")]:(y=fe,o==="categorical"&&fe in w?[new _t(Q.key,_e,"stop domain values must be unique")]:(w[fe]=!0,[])):[new _t(Q.key,_e,`integer expected, found ${fe}`)]}}function tl(s){const n=(s.expressionContext==="property"?Yc:Ql)(Ca(s.value),s.valueSpec);if(n.result==="error")return n.value.map((d=>new _t(`${s.key}${d.key}`,s.value,d.message)));const o=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new _t(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Xl(o))return[new _t(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Xl(o))return[new _t(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Hc(o,["zoom","feature-state"]))return[new _t(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Zc(o))return[new _t(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rl(s){const n=s.key,o=s.value,d=Tr(o);return d!=="string"?[new _t(n,o,`color expected, ${d} found`)]:_r.parse(String(o))?[]:[new _t(n,o,`color expected, "${o}" found`)]}function Ha(s){const n=s.key,o=s.value,d=s.valueSpec,y=[];return Array.isArray(d.values)?d.values.indexOf(un(o))===-1&&y.push(new _t(n,o,`expected one of [${d.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(d.values).indexOf(un(o))===-1&&y.push(new _t(n,o,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(o)} found`)),y}function nl(s){return tc(Ca(s.value))?tl(Xn({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):il(s)}function il(s){const n=s.value,o=s.key;if(Tr(n)!=="array")return[new _t(o,n,`array expected, ${Tr(n)} found`)];const d=s.styleSpec;let y,x=[];if(n.length<1)return[new _t(o,n,"filter array must have at least 1 element")];switch(x=x.concat(Ha({key:`${o}[0]`,value:n[0],valueSpec:d.filter_operator,style:s.style,styleSpec:s.styleSpec})),un(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&un(n[1])==="$type"&&x.push(new _t(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&x.push(new _t(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(y=Tr(n[1]),y!=="string"&&x.push(new _t(`${o}[1]`,n[1],`string expected, ${y} found`)));for(let w=2;w<n.length;w++)y=Tr(n[w]),un(n[1])==="$type"?x=x.concat(Ha({key:`${o}[${w}]`,value:n[w],valueSpec:d.geometry_type,style:s.style,styleSpec:s.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&x.push(new _t(`${o}[${w}]`,n[w],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let w=1;w<n.length;w++)x=x.concat(il({key:`${o}[${w}]`,value:n[w],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":y=Tr(n[1]),n.length!==2?x.push(new _t(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="string"&&x.push(new _t(`${o}[1]`,n[1],`string expected, ${y} found`))}return x}function ru(s,n){const o=s.key,d=s.validateSpec,y=s.style,x=s.styleSpec,w=s.value,C=s.objectKey,I=x[`${n}_${s.layerType}`];if(!I)return[];const z=C.match(/^(.*)-transition$/);if(n==="paint"&&z&&I[z[1]]&&I[z[1]].transition)return d({key:o,value:w,valueSpec:x.transition,style:y,styleSpec:x});const N=s.valueSpec||I[C];if(!N)return[new _t(o,w,`unknown property "${C}"`)];let V;if(Tr(w)==="string"&&zo(N)&&!N.tokens&&(V=/^{([^}]+)}$/.exec(w)))return[new _t(o,w,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const H=[];return s.layerType==="symbol"&&(C==="text-field"&&y&&!y.glyphs&&H.push(new _t(o,w,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&Xc(Ca(w))&&un(w.type)==="identity"&&H.push(new _t(o,w,'"text-font" does not support identity functions'))),H.concat(d({key:s.key,value:w,valueSpec:N,style:y,styleSpec:x,expressionContext:"property",propertyType:n,propertyKey:C}))}function Qu(s){return ru(s,"paint")}function al(s){return ru(s,"layout")}function ua(s){let n=[];const o=s.value,d=s.key,y=s.style,x=s.styleSpec;if(Tr(o)!=="object")return[new _t(d,o,`object expected, ${Tr(o)} found`)];o.type||o.ref||n.push(new _t(d,o,'either "type" or "ref" is required'));let w=un(o.type);const C=un(o.ref);if(o.id){const I=un(o.id);for(let z=0;z<s.arrayIndex;z++){const N=y.layers[z];un(N.id)===I&&n.push(new _t(d,o.id,`duplicate layer id "${o.id}", previously used at line ${N.id.__line__}`))}}if("ref"in o){let I;["type","source","source-layer","filter","layout"].forEach((z=>{z in o&&n.push(new _t(d,o[z],`"${z}" is prohibited for ref layers`))})),y.layers.forEach((z=>{un(z.id)===C&&(I=z)})),I?I.ref?n.push(new _t(d,o.ref,"ref cannot reference another ref layer")):w=un(I.type):n.push(new _t(d,o.ref,`ref layer "${C}" not found`))}else if(w!=="background")if(o.source){const I=y.sources&&y.sources[o.source],z=I&&un(I.type);I?z==="vector"&&w==="raster"?n.push(new _t(d,o.source,`layer "${o.id}" requires a raster source`)):z!=="raster-dem"&&w==="hillshade"||z!=="raster-dem"&&w==="color-relief"?n.push(new _t(d,o.source,`layer "${o.id}" requires a raster-dem source`)):z==="raster"&&w!=="raster"?n.push(new _t(d,o.source,`layer "${o.id}" requires a vector source`)):z!=="vector"||o["source-layer"]?z==="raster-dem"&&w!=="hillshade"&&w!=="color-relief"?n.push(new _t(d,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):w!=="line"||!o.paint||!o.paint["line-gradient"]||z==="geojson"&&I.lineMetrics||n.push(new _t(d,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new _t(d,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new _t(d,o.source,`source "${o.source}" not found`))}else n.push(new _t(d,o,'missing required property "source"'));return n=n.concat(Tn({key:d,value:o,valueSpec:x.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${d}.type`,value:o.type,valueSpec:x.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:nl,layout:I=>Tn({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":z=>al(Xn({layerType:w},z))}}),paint:I=>Tn({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":z=>Qu(Xn({layerType:w},z))}})}})),n}function jr(s){const n=s.value,o=s.key,d=Tr(n);return d!=="string"?[new _t(o,n,`string expected, ${d} found`)]:[]}const Ir={promoteId:function({key:s,value:n}){if(Tr(n)==="string")return jr({key:s,value:n});{const o=[];for(const d in n)o.push(...jr({key:`${s}.${d}`,value:n[d]}));return o}}};function ha(s){const n=s.value,o=s.key,d=s.styleSpec,y=s.style,x=s.validateSpec;if(!n.type)return[new _t(o,n,'"type" is required')];const w=un(n.type);let C;switch(w){case"vector":case"raster":return C=Tn({key:o,value:n,valueSpec:d[`source_${w.replace("-","_")}`],style:s.style,styleSpec:d,objectElementValidators:Ir,validateSpec:x}),C;case"raster-dem":return C=(function(I){var z;const N=(z=I.sourceName)!==null&&z!==void 0?z:"",V=I.value,H=I.styleSpec,Q=H.source_raster_dem,ee=I.style;let se=[];const fe=Tr(V);if(V===void 0)return se;if(fe!=="object")return se.push(new _t("source_raster_dem",V,`object expected, ${fe} found`)),se;const _e=un(V.encoding)==="custom",$e=["redFactor","greenFactor","blueFactor","baseShift"],Se=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Me in V)!_e&&$e.includes(Me)?se.push(new _t(Me,V[Me],`In "${N}": "${Me}" is only valid when "encoding" is set to "custom". ${Se} encoding found`)):Q[Me]?se=se.concat(I.validateSpec({key:Me,value:V[Me],valueSpec:Q[Me],validateSpec:I.validateSpec,style:ee,styleSpec:H})):se.push(new _t(Me,V[Me],`unknown property "${Me}"`));return se})({sourceName:o,value:n,style:s.style,styleSpec:d,validateSpec:x}),C;case"geojson":if(C=Tn({key:o,value:n,valueSpec:d.source_geojson,style:y,styleSpec:d,validateSpec:x,objectElementValidators:Ir}),n.cluster)for(const I in n.clusterProperties){const[z,N]=n.clusterProperties[I],V=typeof z=="string"?[z,["accumulated"],["get",I]]:z;C.push(...tl({key:`${o}.${I}.map`,value:N,expressionContext:"cluster-map"})),C.push(...tl({key:`${o}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return C;case"video":return Tn({key:o,value:n,valueSpec:d.source_video,style:y,validateSpec:x,styleSpec:d});case"image":return Tn({key:o,value:n,valueSpec:d.source_image,style:y,validateSpec:x,styleSpec:d});case"canvas":return[new _t(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ha({key:`${o}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function oi(s){const n=s.value,o=s.styleSpec,d=o.light,y=s.style;let x=[];const w=Tr(n);if(n===void 0)return x;if(w!=="object")return x=x.concat([new _t("light",n,`object expected, ${w} found`)]),x;for(const C in n){const I=C.match(/^(.*)-transition$/);x=x.concat(I&&d[I[1]]&&d[I[1]].transition?s.validateSpec({key:C,value:n[C],valueSpec:o.transition,validateSpec:s.validateSpec,style:y,styleSpec:o}):d[C]?s.validateSpec({key:C,value:n[C],valueSpec:d[C],validateSpec:s.validateSpec,style:y,styleSpec:o}):[new _t(C,n[C],`unknown property "${C}"`)])}return x}function Ii(s){const n=s.value,o=s.styleSpec,d=o.sky,y=s.style,x=Tr(n);if(n===void 0)return[];if(x!=="object")return[new _t("sky",n,`object expected, ${x} found`)];let w=[];for(const C in n)w=w.concat(d[C]?s.validateSpec({key:C,value:n[C],valueSpec:d[C],style:y,styleSpec:o}):[new _t(C,n[C],`unknown property "${C}"`)]);return w}function xs(s){const n=s.value,o=s.styleSpec,d=o.terrain,y=s.style;let x=[];const w=Tr(n);if(n===void 0)return x;if(w!=="object")return x=x.concat([new _t("terrain",n,`object expected, ${w} found`)]),x;for(const C in n)x=x.concat(d[C]?s.validateSpec({key:C,value:n[C],valueSpec:d[C],validateSpec:s.validateSpec,style:y,styleSpec:o}):[new _t(C,n[C],`unknown property "${C}"`)]);return x}function Ka(s){let n=[];const o=s.value,d=s.key;if(Array.isArray(o)){const y=[],x=[];for(const w in o)o[w].id&&y.includes(o[w].id)&&n.push(new _t(d,o,`all the sprites' ids must be unique, but ${o[w].id} is duplicated`)),y.push(o[w].id),o[w].url&&x.includes(o[w].url)&&n.push(new _t(d,o,`all the sprites' URLs must be unique, but ${o[w].url} is duplicated`)),x.push(o[w].url),n=n.concat(Tn({key:`${d}[${w}]`,value:o[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return jr({key:d,value:o})}function yi(s){return n=s.value,n&&n.constructor===Object?[]:[new _t(s.key,s.value,`object expected, ${Tr(s.value)} found`)];var n}const ol={"*":()=>[],array:_s,boolean:function(s){const n=s.value,o=s.key,d=Tr(n);return d!=="boolean"?[new _t(o,n,`boolean expected, ${d} found`)]:[]},number:Ea,color:rl,constants:mo,enum:Ha,filter:nl,function:tu,layer:ua,object:Tn,source:ha,light:oi,sky:Ii,terrain:xs,projection:function(s){const n=s.value,o=s.styleSpec,d=o.projection,y=s.style,x=Tr(n);if(n===void 0)return[];if(x!=="object")return[new _t("projection",n,`object expected, ${x} found`)];let w=[];for(const C in n)w=w.concat(d[C]?s.validateSpec({key:C,value:n[C],valueSpec:d[C],style:y,styleSpec:o}):[new _t(C,n[C],`unknown property "${C}"`)]);return w},projectionDefinition:function(s){const n=s.key;let o=s.value;o=o instanceof String?o.valueOf():o;const d=Tr(o);return d!=="array"||(function(y){return Array.isArray(y)&&y.length===3&&typeof y[0]=="string"&&typeof y[1]=="string"&&typeof y[2]=="number"})(o)||(function(y){return!!["interpolate","step","literal"].includes(y[0])})(o)?["array","string"].includes(d)?[]:[new _t(n,o,`projection expected, invalid type "${d}" found`)]:[new _t(n,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:jr,formatted:function(s){return jr(s).length===0?[]:tl(s)},resolvedImage:function(s){return jr(s).length===0?[]:tl(s)},padding:function(s){const n=s.key,o=s.value;if(Tr(o)==="array"){if(o.length<1||o.length>4)return[new _t(n,o,`padding requires 1 to 4 values; ${o.length} values found`)];const d={type:"number"};let y=[];for(let x=0;x<o.length;x++)y=y.concat(s.validateSpec({key:`${n}[${x}]`,value:o[x],validateSpec:s.validateSpec,valueSpec:d}));return y}return Ea({key:n,value:o,valueSpec:{}})},numberArray:function(s){const n=s.key,o=s.value;if(Tr(o)==="array"){const d={type:"number"};if(o.length<1)return[new _t(n,o,"array length at least 1 expected, length 0 found")];let y=[];for(let x=0;x<o.length;x++)y=y.concat(s.validateSpec({key:`${n}[${x}]`,value:o[x],validateSpec:s.validateSpec,valueSpec:d}));return y}return Ea({key:n,value:o,valueSpec:{}})},colorArray:function(s){const n=s.key,o=s.value;if(Tr(o)==="array"){if(o.length<1)return[new _t(n,o,"array length at least 1 expected, length 0 found")];let d=[];for(let y=0;y<o.length;y++)d=d.concat(rl({key:`${n}[${y}]`,value:o[y]}));return d}return rl({key:n,value:o})},variableAnchorOffsetCollection:function(s){const n=s.key,o=s.value,d=Tr(o),y=s.styleSpec;if(d!=="array"||o.length<1||o.length%2!=0)return[new _t(n,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<o.length;w+=2)x=x.concat(Ha({key:`${n}[${w}]`,value:o[w],valueSpec:y.layout_symbol["text-anchor"]})),x=x.concat(_s({key:`${n}[${w+1}]`,value:o[w+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:y}));return x},sprite:Ka,state:yi};function nu(s){const n=s.value,o=s.valueSpec,d=s.styleSpec;return s.validateSpec=nu,o.expression&&Xc(un(n))?tu(s):o.expression&&vs(Ca(n))?tl(s):o.type&&ol[o.type]?ol[o.type](s):Tn(Xn({},s,{valueSpec:o.type?d[o.type]:o}))}function iu(s){const n=s.value,o=s.key,d=jr(s);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new _t(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new _t(o,n,'"glyphs" url must include a "{range}" token'))),d}function Oi(s,n=Ne){let o=[];return o=o.concat(nu({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:nu,objectElementValidators:{glyphs:iu,"*":()=>[]}})),s.constants&&(o=o.concat(mo({key:"constants",value:s.constants}))),go(o)}function vi(s){return function(n){return s({...n,validateSpec:nu})}}function go(s){return[].concat(s).sort(((n,o)=>n.line-o.line))}function Ki(s){return function(...n){return go(s.apply(this,n))}}Oi.source=Ki(vi(ha)),Oi.sprite=Ki(vi(Ka)),Oi.glyphs=Ki(vi(iu)),Oi.light=Ki(vi(oi)),Oi.sky=Ki(vi(Ii)),Oi.terrain=Ki(vi(xs)),Oi.state=Ki(vi(yi)),Oi.layer=Ki(vi(ua)),Oi.filter=Ki(vi(nl)),Oi.paintProperty=Ki(vi(Qu)),Oi.layoutProperty=Ki(vi(al));const bs=Oi,ic=bs.light,em=bs.sky,ws=bs.paintProperty,Lo=bs.layoutProperty;function sl(s,n){let o=!1;if(n&&n.length)for(const d of n)s.fire(new ct(new Error(d.message))),o=!0;return o}class yo{constructor(n,o,d){const y=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const w=new Int32Array(this.arrayBuffer);n=w[0],this.d=(o=w[1])+2*(d=w[2]);for(let I=0;I<this.d*this.d;I++){const z=w[3+I],N=w[3+I+1];y.push(z===N?null:w.subarray(z,N))}const C=w[3+y.length+1];this.keys=w.subarray(w[3+y.length],C),this.bboxes=w.subarray(C),this.insert=this._insertReadonly}else{this.d=o+2*d;for(let w=0;w<this.d*this.d;w++)y.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=d,this.scale=o/n,this.uid=0;const x=d/o*n;this.min=-x,this.max=n+x}insert(n,o,d,y,x){this._forEachCell(o,d,y,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,o,d,y,x,w){this.cells[x].push(w)}query(n,o,d,y,x){const w=this.min,C=this.max;if(n<=w&&o<=w&&C<=d&&C<=y&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,o,d,y,this._queryCell,I,{},x),I}}_queryCell(n,o,d,y,x,w,C,I){const z=this.cells[x];if(z!==null){const N=this.keys,V=this.bboxes;for(let H=0;H<z.length;H++){const Q=z[H];if(C[Q]===void 0){const ee=4*Q;(I?I(V[ee+0],V[ee+1],V[ee+2],V[ee+3]):n<=V[ee+2]&&o<=V[ee+3]&&d>=V[ee+0]&&y>=V[ee+1])?(C[Q]=!0,w.push(N[Q])):C[Q]=!1}}}}_forEachCell(n,o,d,y,x,w,C,I){const z=this._convertToCellCoord(n),N=this._convertToCellCoord(o),V=this._convertToCellCoord(d),H=this._convertToCellCoord(y);for(let Q=z;Q<=V;Q++)for(let ee=N;ee<=H;ee++){const se=this.d*ee+Q;if((!I||I(this._convertFromCellCoord(Q),this._convertFromCellCoord(ee),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ee+1)))&&x.call(this,n,o,d,y,se,w,C,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,o=3+this.cells.length+1+1;let d=0;for(let w=0;w<this.cells.length;w++)d+=this.cells[w].length;const y=new Int32Array(o+d+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let x=o;for(let w=0;w<n.length;w++){const C=n[w];y[3+w]=x,y.set(C,x),x+=C.length}return y[3+n.length]=x,y.set(this.keys,x),x+=this.keys.length,y[3+n.length+1]=x,y.set(this.bboxes,x),x+=this.bboxes.length,y.buffer}static serialize(n,o){const d=n.toArrayBuffer();return o&&o.push(d),{buffer:d}}static deserialize(n){return new yo(n.buffer)}}const Ri={};function At(s,n,o={}){if(Ri[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),Ri[s]={klass:n,omit:o.omit||[],shallow:o.shallow||[]}}At("Object",Object),At("Set",Set),At("TransferableGridIndex",yo),At("Color",_r),At("Error",Error),At("AJAXError",we),At("ResolvedImage",sa),At("StylePropertyFunction",fo),At("StyleExpression",Jl,{omit:["_evaluator"]}),At("ZoomDependentExpression",Js),At("ZoomConstantExpression",Ys),At("CompoundExpression",ca,{omit:["_evaluate"]});for(const s in ms)ms[s]._classRegistryKey||At(`Expression_${s}`,ms[s]);function Xi(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function vo(s){return s.$name||s.constructor._classRegistryKey}function Xa(s){return!(function(n){if(n===null||typeof n!="object")return!1;const o=vo(n);return!(!o||o==="Object")})(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Xi(s)||qn(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Di(s,n){if(Xa(s))return(Xi(s)||qn(s))&&n&&n.push(s),ArrayBuffer.isView(s)&&n&&n.push(s.buffer),s instanceof ImageData&&n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const x=[];for(const w of s)x.push(Di(w,n));return x}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const o=vo(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Ri[o])throw new Error(`${o} is not registered.`);const{klass:d}=Ri[o],y=d.serialize?d.serialize(s,n):{};if(d.serialize){if(n&&y===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in s){if(!s.hasOwnProperty(x)||Ri[o].omit.indexOf(x)>=0)continue;const w=s[x];y[x]=Ri[o].shallow.indexOf(x)>=0?w:Di(w,n)}s instanceof Error&&(y.message=s.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(y.$name=o),y}function Ma(s){if(Xa(s))return s;if(Array.isArray(s))return s.map(Ma);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const n=vo(s)||"Object";if(!Ri[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:o}=Ri[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(s);const d=Object.create(o.prototype);for(const y of Object.keys(s)){if(y==="$name")continue;const x=s[y];d[y]=Ri[n].shallow.indexOf(y)>=0?x:Ma(x)}return d}class eh{constructor(){this.first=!0}update(n,o){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=o),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const Ar={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Hangul Syllables":s=>s>=44032&&s<=55215,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function au(s){for(const n of s)if(th(n.charCodeAt(0)))return!0;return!1}function Yi(s){for(const n of s)if(!ka(n.charCodeAt(0)))return!1;return!0}function zi(s){const n=s.map((o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}})).filter((o=>o));return new RegExp(n.join("|"),"u")}const yn=zi(["Arab","Dupl","Mong","Ougr","Syrc"]);function ka(s){return!yn.test(String.fromCodePoint(s))}const od=zi(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function th(s){return!(s!==746&&s!==747&&(s<4352||!(Ar["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Ar["CJK Compatibility"](s)||Ar["CJK Strokes"](s)||!(!Ar["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Ar["Enclosed CJK Letters and Months"](s)||Ar["Ideographic Description Characters"](s)||Ar.Kanbun(s)||Ar.Katakana(s)&&s!==12540||!(!Ar["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Ar["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Ar["Vertical Forms"](s)||Ar["Yijing Hexagram Symbols"](s)||/\p{sc=Cans}/u.test(String.fromCodePoint(s))||/\p{sc=Hang}/u.test(String.fromCodePoint(s))||od.test(String.fromCodePoint(s)))))}function ou(s){return!(th(s)||(function(n){return!!(Ar["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ar["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ar["Letterlike Symbols"](n)||Ar["Number Forms"](n)||Ar["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ar["Control Pictures"](n)&&n!==9251||Ar["Optical Character Recognition"](n)||Ar["Enclosed Alphanumerics"](n)||Ar["Geometric Shapes"](n)||Ar["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ar["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ar["CJK Symbols and Punctuation"](n)||Ar.Katakana(n)||Ar["Private Use Area"](n)||Ar["CJK Compatibility Forms"](n)||Ar["Small Form Variants"](n)||Ar["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)})(s))}const rh=zi(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function nh(s){return rh.test(String.fromCodePoint(s))}function su(s,n){return!(!n&&nh(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Ar.Khmer(s))}function lu(s){for(const n of s)if(nh(n.charCodeAt(0)))return!0;return!1}const da=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(da.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,n){return l(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const o=s.pluginURL,d=new Promise((x=>{this.loadScriptResolve=x}));n(o);const y=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([d,y]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:o};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)}))}};class Gr{constructor(n,o){this.isSupportedScript=tm,this.zoom=n,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new eh,this.transition=o.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new eh,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,o=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*o}}}function tm(s){return(function(n,o){for(const d of n)if(!su(d.charCodeAt(0),o))return!1;return!0})(s,da.getRTLTextPluginStatus()==="loaded")}class Ss{constructor(n,o,d){this.property=n,this.value=o,this.expression=(function(y,x,w){if(Xc(y))return new fo(y,x);if(vs(y)){const C=Yc(y,x,w);if(C.result==="error")throw new Error(C.value.map((I=>`${I.key}: ${I.message}`)).join(", "));return C.value}{let C=y;return x.type==="color"&&typeof y=="string"?C=_r.parse(y):x.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?x.type!=="numberArray"||typeof y!="number"&&!Array.isArray(y)?x.type!=="colorArray"||typeof y!="string"&&!Array.isArray(y)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(y)?C=Jn.parse(y):x.type==="projectionDefinition"&&typeof y=="string"&&(C=hi.parse(y)):C=on.parse(y):C=Yn.parse(y):C=Pn.parse(y),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>C}}})(o===void 0?n.specification.default:o,n.specification,d)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,o,d){return this.property.possiblyEvaluate(this,n,o,d)}}class ll{constructor(n,o){this.property=n,this.value=new Ss(n,void 0,o)}transitioned(n,o){return new ah(this.property,this.value,o,tr({},n.transition,this.transition),n.now)}untransitioned(){return new ah(this.property,this.value,null,{},0)}}class ih{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._globalState=o}getValue(n){return pt(this._values[n].value.value)}setValue(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ll(this._values[n].property,this._globalState)),this._values[n].value=new Ss(this._values[n].property,o===null?void 0:pt(o),this._globalState)}getTransition(n){return pt(this._values[n].transition)}setTransition(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ll(this._values[n].property,this._globalState)),this._values[n].transition=pt(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const d=this.getValue(o);d!==void 0&&(n[o]=d);const y=this.getTransition(o);y!==void 0&&(n[`${o}-transition`]=y)}return n}transitioned(n,o){const d=new cl(this._properties);for(const y of Object.keys(this._values))d._values[y]=this._values[y].transitioned(n,o._values[y]);return d}untransitioned(){const n=new cl(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class ah{constructor(n,o,d,y,x){this.property=n,this.value=o,this.begin=x+y.delay||0,this.end=this.begin+y.duration||0,n.specification.transition&&(y.delay||y.duration)&&(this.prior=d)}possiblyEvaluate(n,o,d){const y=n.now||0,x=this.value.possiblyEvaluate(n,o,d),w=this.prior;if(w){if(y>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(y<this.begin)return w.possiblyEvaluate(n,o,d);{const C=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(n,o,d),x,yt(C))}}return x}}class cl{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,d){const y=new ul(this._properties);for(const x of Object.keys(this._values))y._values[x]=this._values[x].possiblyEvaluate(n,o,d);return y}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class cf{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState=o}hasValue(n){return this._values[n].value!==void 0}getValue(n){return pt(this._values[n].value)}setValue(n,o){this._values[n]=new Ss(this._values[n].property,o===null?void 0:pt(o),this._globalState)}serialize(){const n={};for(const o of Object.keys(this._values)){const d=this.getValue(o);d!==void 0&&(n[o]=d)}return n}possiblyEvaluate(n,o,d){const y=new ul(this._properties);for(const x of Object.keys(this._values))y._values[x]=this._values[x].possiblyEvaluate(n,o,d);return y}}class fa{constructor(n,o,d){this.property=n,this.value=o,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,d,y){return this.property.evaluate(this.value,this.parameters,n,o,d,y)}}class ul{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class jt{constructor(n){this.specification=n}possiblyEvaluate(n,o){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(o)}interpolate(n,o,d){const y=qa[this.specification.type];return y?y(n,o,d):n}}class Vt{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,d,y){return new fa(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},d,y)}:n.expression,o)}interpolate(n,o,d){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new fa(this,{kind:"constant",value:void 0},n.parameters);const y=qa[this.specification.type];if(y){const x=y(n.value.value,o.value.value,d);return new fa(this,{kind:"constant",value:x},n.parameters)}return n}evaluate(n,o,d,y,x,w){return n.kind==="constant"?n.value:n.evaluate(o,d,y,x,w)}}class ac extends Vt{possiblyEvaluate(n,o,d,y){if(n.value===void 0)return new fa(this,{kind:"constant",value:void 0},o);if(n.expression.kind==="constant"){const x=n.expression.evaluate(o,null,{},d,y),w=n.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(w,w,w,o);return new fa(this,{kind:"constant",value:C},o)}if(n.expression.kind==="camera"){const x=this._calculate(n.expression.evaluate({zoom:o.zoom-1}),n.expression.evaluate({zoom:o.zoom}),n.expression.evaluate({zoom:o.zoom+1}),o);return new fa(this,{kind:"constant",value:x},o)}return new fa(this,n.expression,o)}evaluate(n,o,d,y,x,w){if(n.kind==="source"){const C=n.evaluate(o,d,y,x,w);return this._calculate(C,C,C,o)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(o.zoom)-1},d,y),n.evaluate({zoom:Math.floor(o.zoom)},d,y),n.evaluate({zoom:Math.floor(o.zoom)+1},d,y),o):n.value}_calculate(n,o,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:d,to:o}}interpolate(n){return n}}class cu{constructor(n){this.specification=n}possiblyEvaluate(n,o,d,y){if(n.value!==void 0){if(n.expression.kind==="constant"){const x=n.expression.evaluate(o,null,{},d,y);return this._calculate(x,x,x,o)}return this._calculate(n.expression.evaluate(new Gr(Math.floor(o.zoom-1),o)),n.expression.evaluate(new Gr(Math.floor(o.zoom),o)),n.expression.evaluate(new Gr(Math.floor(o.zoom+1),o)),o)}}_calculate(n,o,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:d,to:o}}interpolate(n){return n}}class oc{constructor(n){this.specification=n}possiblyEvaluate(n,o,d,y){return!!n.expression.evaluate(o,null,{},d,y)}interpolate(){return!1}}class jn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in n){const d=n[o];d.specification.overridable&&this.overridableProperties.push(o);const y=this.defaultPropertyValues[o]=new Ss(d,void 0,void 0),x=this.defaultTransitionablePropertyValues[o]=new ll(d,void 0);this.defaultTransitioningPropertyValues[o]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=y.possiblyEvaluate({})}}}At("DataDrivenProperty",Vt),At("DataConstantProperty",jt),At("CrossFadedDataDrivenProperty",ac),At("CrossFadedProperty",cu),At("ColorRampProperty",oc);const pa="-transition";class di extends zt{constructor(n,o,d){if(super(),this.id=n.id,this.type=n.type,this._globalState=d,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=po(n.filter,d)),o.layout&&(this._unevaluatedLayout=new cf(o.layout,d)),o.paint)){this._transitionablePaint=new ih(o.paint,d);for(const y in n.paint)this.setPaintProperty(y,n.paint[y],{validate:!1});for(const y in n.layout)this.setLayoutProperty(y,n.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ul(o.paint)}}setFilter(n){this.filter=n,this._featureFilter=po(n,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){const n=new Set;if(this._unevaluatedLayout)for(const o in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[o];for(const y of d.getGlobalStateRefs())n.add(y)}for(const o of this._featureFilter.getGlobalStateRefs())n.add(o);return n}getPaintAffectingGlobalStateRefs(){var n;const o=new globalThis.Map;if(this._transitionablePaint)for(const d in this._transitionablePaint._values){const y=this._transitionablePaint._values[d].value;for(const x of y.getGlobalStateRefs()){const w=(n=o.get(x))!==null&&n!==void 0?n:[];w.push({name:d,value:y.value}),o.set(x,w)}}return o}setLayoutProperty(n,o,d={}){o!=null&&this._validate(Lo,`layers.${this.id}.layout.${n}`,n,o,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return n.endsWith(pa)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,d={}){if(o!=null&&this._validate(ws,`layers.${this.id}.paint.${n}`,n,o,d))return!1;if(n.endsWith(pa))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const y=this._transitionablePaint._values[n],x=y.property.specification["property-type"]==="cross-faded-data-driven",w=y.value.isDataDriven(),C=y.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(n,C,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,o,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ir(n,((o,d)=>!(o===void 0||d==="layout"&&!Object.keys(o).length||d==="paint"&&!Object.keys(o).length)))}_validate(n,o,d,y,x={}){return(!x||x.validate!==!1)&&sl(this,n.call(bs,{key:o,layerType:this.type,objectKey:d,value:y,styleSpec:Ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof fa&&zo(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const No={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class hl{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ur{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Jr(s,n=1){let o=0,d=0;return{members:s.map((y=>{const x=No[y.type].BYTES_PER_ELEMENT,w=o=sc(o,Math.max(n,x)),C=y.components||1;return d=Math.max(d,x),o+=x*C,{name:y.name,type:y.type,components:C,offset:w}})),size:sc(o,Math.max(d,n)),alignment:n}}function sc(s,n){return Math.ceil(s/n)*n}class lc extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const y=2*n;return this.int16[y+0]=o,this.int16[y+1]=d,n}}lc.prototype.bytesPerElement=4,At("StructArrayLayout2i4",lc);class ji extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const x=3*n;return this.int16[x+0]=o,this.int16[x+1]=d,this.int16[x+2]=y,n}}ji.prototype.bytesPerElement=6,At("StructArrayLayout3i6",ji);class Ji extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,d,y)}emplace(n,o,d,y,x){const w=4*n;return this.int16[w+0]=o,this.int16[w+1]=d,this.int16[w+2]=y,this.int16[w+3]=x,n}}Ji.prototype.bytesPerElement=8,At("StructArrayLayout4i8",Ji);class cc extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,d,y,x,w)}emplace(n,o,d,y,x,w,C){const I=6*n;return this.int16[I+0]=o,this.int16[I+1]=d,this.int16[I+2]=y,this.int16[I+3]=x,this.int16[I+4]=w,this.int16[I+5]=C,n}}cc.prototype.bytesPerElement=12,At("StructArrayLayout2i4i12",cc);class uu extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,d,y,x,w)}emplace(n,o,d,y,x,w,C){const I=4*n,z=8*n;return this.int16[I+0]=o,this.int16[I+1]=d,this.uint8[z+4]=y,this.uint8[z+5]=x,this.uint8[z+6]=w,this.uint8[z+7]=C,n}}uu.prototype.bytesPerElement=8,At("StructArrayLayout2i4ub8",uu);class Ia extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const y=2*n;return this.float32[y+0]=o,this.float32[y+1]=d,n}}Ia.prototype.bytesPerElement=8,At("StructArrayLayout2f8",Ia);class oh extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w,C,I,z,N){const V=this.length;return this.resize(V+1),this.emplace(V,n,o,d,y,x,w,C,I,z,N)}emplace(n,o,d,y,x,w,C,I,z,N,V){const H=10*n;return this.uint16[H+0]=o,this.uint16[H+1]=d,this.uint16[H+2]=y,this.uint16[H+3]=x,this.uint16[H+4]=w,this.uint16[H+5]=C,this.uint16[H+6]=I,this.uint16[H+7]=z,this.uint16[H+8]=N,this.uint16[H+9]=V,n}}oh.prototype.bytesPerElement=20,At("StructArrayLayout10ui20",oh);class dl extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w,C,I,z,N,V,H){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,o,d,y,x,w,C,I,z,N,V,H)}emplace(n,o,d,y,x,w,C,I,z,N,V,H,Q){const ee=12*n;return this.int16[ee+0]=o,this.int16[ee+1]=d,this.int16[ee+2]=y,this.int16[ee+3]=x,this.uint16[ee+4]=w,this.uint16[ee+5]=C,this.uint16[ee+6]=I,this.uint16[ee+7]=z,this.int16[ee+8]=N,this.int16[ee+9]=V,this.int16[ee+10]=H,this.int16[ee+11]=Q,n}}dl.prototype.bytesPerElement=24,At("StructArrayLayout4i4ui4i24",dl);class ma extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const x=3*n;return this.float32[x+0]=o,this.float32[x+1]=d,this.float32[x+2]=y,n}}ma.prototype.bytesPerElement=12,At("StructArrayLayout3f12",ma);class fl extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}fl.prototype.bytesPerElement=4,At("StructArrayLayout1ul4",fl);class _ extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w,C,I,z){const N=this.length;return this.resize(N+1),this.emplace(N,n,o,d,y,x,w,C,I,z)}emplace(n,o,d,y,x,w,C,I,z,N){const V=10*n,H=5*n;return this.int16[V+0]=o,this.int16[V+1]=d,this.int16[V+2]=y,this.int16[V+3]=x,this.int16[V+4]=w,this.int16[V+5]=C,this.uint32[H+3]=I,this.uint16[V+8]=z,this.uint16[V+9]=N,n}}_.prototype.bytesPerElement=20,At("StructArrayLayout6i1ul2ui20",_);class r extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,d,y,x,w)}emplace(n,o,d,y,x,w,C){const I=6*n;return this.int16[I+0]=o,this.int16[I+1]=d,this.int16[I+2]=y,this.int16[I+3]=x,this.int16[I+4]=w,this.int16[I+5]=C,n}}r.prototype.bytesPerElement=12,At("StructArrayLayout2i2i2i12",r);class c extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,d,y,x)}emplace(n,o,d,y,x,w){const C=4*n,I=8*n;return this.float32[C+0]=o,this.float32[C+1]=d,this.float32[C+2]=y,this.int16[I+6]=x,this.int16[I+7]=w,n}}c.prototype.bytesPerElement=16,At("StructArrayLayout2f1f2i16",c);class f extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,d,y,x,w)}emplace(n,o,d,y,x,w,C){const I=16*n,z=4*n,N=8*n;return this.uint8[I+0]=o,this.uint8[I+1]=d,this.float32[z+1]=y,this.float32[z+2]=x,this.int16[N+6]=w,this.int16[N+7]=C,n}}f.prototype.bytesPerElement=16,At("StructArrayLayout2ub2f2i16",f);class v extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const x=3*n;return this.uint16[x+0]=o,this.uint16[x+1]=d,this.uint16[x+2]=y,n}}v.prototype.bytesPerElement=6,At("StructArrayLayout3ui6",v);class b extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w,C,I,z,N,V,H,Q,ee,se,fe,_e){const $e=this.length;return this.resize($e+1),this.emplace($e,n,o,d,y,x,w,C,I,z,N,V,H,Q,ee,se,fe,_e)}emplace(n,o,d,y,x,w,C,I,z,N,V,H,Q,ee,se,fe,_e,$e){const Se=24*n,Me=12*n,Ye=48*n;return this.int16[Se+0]=o,this.int16[Se+1]=d,this.uint16[Se+2]=y,this.uint16[Se+3]=x,this.uint32[Me+2]=w,this.uint32[Me+3]=C,this.uint32[Me+4]=I,this.uint16[Se+10]=z,this.uint16[Se+11]=N,this.uint16[Se+12]=V,this.float32[Me+7]=H,this.float32[Me+8]=Q,this.uint8[Ye+36]=ee,this.uint8[Ye+37]=se,this.uint8[Ye+38]=fe,this.uint32[Me+10]=_e,this.int16[Se+22]=$e,n}}b.prototype.bytesPerElement=48,At("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",b);class T extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,y,x,w,C,I,z,N,V,H,Q,ee,se,fe,_e,$e,Se,Me,Ye,rt,mt,It,St,Et,Gt,Ct){const Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,n,o,d,y,x,w,C,I,z,N,V,H,Q,ee,se,fe,_e,$e,Se,Me,Ye,rt,mt,It,St,Et,Gt,Ct)}emplace(n,o,d,y,x,w,C,I,z,N,V,H,Q,ee,se,fe,_e,$e,Se,Me,Ye,rt,mt,It,St,Et,Gt,Ct,Mt){const ht=32*n,or=16*n;return this.int16[ht+0]=o,this.int16[ht+1]=d,this.int16[ht+2]=y,this.int16[ht+3]=x,this.int16[ht+4]=w,this.int16[ht+5]=C,this.int16[ht+6]=I,this.int16[ht+7]=z,this.uint16[ht+8]=N,this.uint16[ht+9]=V,this.uint16[ht+10]=H,this.uint16[ht+11]=Q,this.uint16[ht+12]=ee,this.uint16[ht+13]=se,this.uint16[ht+14]=fe,this.uint16[ht+15]=_e,this.uint16[ht+16]=$e,this.uint16[ht+17]=Se,this.uint16[ht+18]=Me,this.uint16[ht+19]=Ye,this.uint16[ht+20]=rt,this.uint16[ht+21]=mt,this.uint16[ht+22]=It,this.uint32[or+12]=St,this.float32[or+13]=Et,this.float32[or+14]=Gt,this.uint16[ht+30]=Ct,this.uint16[ht+31]=Mt,n}}T.prototype.bytesPerElement=64,At("StructArrayLayout8i15ui1ul2f2ui64",T);class O extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}O.prototype.bytesPerElement=4,At("StructArrayLayout1f4",O);class R extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const x=3*n;return this.uint16[6*n+0]=o,this.float32[x+1]=d,this.float32[x+2]=y,n}}R.prototype.bytesPerElement=12,At("StructArrayLayout1ui2f12",R);class L extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,d)}emplace(n,o,d,y){const x=4*n;return this.uint32[2*n+0]=o,this.uint16[x+2]=d,this.uint16[x+3]=y,n}}L.prototype.bytesPerElement=8,At("StructArrayLayout1ul2ui8",L);class $ extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const d=this.length;return this.resize(d+1),this.emplace(d,n,o)}emplace(n,o,d){const y=2*n;return this.uint16[y+0]=o,this.uint16[y+1]=d,n}}$.prototype.bytesPerElement=4,At("StructArrayLayout2ui4",$);class Z extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}Z.prototype.bytesPerElement=2,At("StructArrayLayout1ui2",Z);class W extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,d,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,d,y)}emplace(n,o,d,y,x){const w=4*n;return this.float32[w+0]=o,this.float32[w+1]=d,this.float32[w+2]=y,this.float32[w+3]=x,n}}W.prototype.bytesPerElement=16,At("StructArrayLayout4f16",W);class K extends hl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}K.prototype.size=20;class ne extends _{get(n){return new K(this,n)}}At("CollisionBoxArray",ne);class ue extends hl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ue.prototype.size=48;class pe extends b{get(n){return new ue(this,n)}}At("PlacedSymbolArray",pe);class me extends hl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}me.prototype.size=64;class ye extends T{get(n){return new me(this,n)}}At("SymbolInstanceArray",ye);class be extends O{getoffsetX(n){return this.float32[1*n+0]}}At("GlyphOffsetArray",be);class ve extends ji{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}At("SymbolLineVertexArray",ve);class Te extends hl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Te.prototype.size=12;class ke extends R{get(n){return new Te(this,n)}}At("TextAnchorOffsetArray",ke);class xe extends hl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}xe.prototype.size=8;class Re extends L{get(n){return new xe(this,n)}}At("FeatureIndexArray",Re);class He extends lc{}class Ge extends lc{}class Ze extends lc{}class et extends cc{}class Pt extends uu{}class wt extends Ia{}class dt extends oh{}class Lt extends dl{}class vr extends ma{}class Nr extends fl{}class hn extends r{}class Qr extends f{}class Vr extends v{}class dn extends ${}const Kr=Jr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Hr}=Kr;class Rr{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,o,d,y){const x=this.segments[this.segments.length-1];return n>Rr.MAX_VERTEX_ARRAY_LENGTH&&rr(`Max vertices per segment is ${Rr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Rr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+n>Rr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==y?this.createNewSegment(o,d,y):x}createNewSegment(n,o,d){const y={vertexOffset:n.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(y.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(y),y}getOrCreateLatestSegment(n,o,d){return this.prepareSegment(0,n,o,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,d,y){return new Rr([{vertexOffset:n,primitiveOffset:o,vertexLength:d,primitiveLength:y,vaos:{},sortKey:0}])}}function Ln(s,n){return 256*(s=Wt(Math.floor(s),0,255))+Wt(Math.floor(n),0,255)}Rr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,At("SegmentVector",Rr);const Nn=Jr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var _i,Bo,Fo,ga={exports:{}},Ps={exports:{}},uc={exports:{}},hu=(function(){if(Fo)return ga.exports;Fo=1;var s=(_i||(_i=1,Ps.exports=function(o,d){var y,x,w,C,I,z,N,V;for(x=o.length-(y=3&o.length),w=d,I=3432918353,z=461845907,V=0;V<x;)N=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,w=27492+(65535&(C=5*(65535&(w=(w^=N=(65535&(N=(N=(65535&N)*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*z+(((N>>>16)*z&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(N=0,y){case 3:N^=(255&o.charCodeAt(V+2))<<16;case 2:N^=(255&o.charCodeAt(V+1))<<8;case 1:w^=N=(65535&(N=(N=(65535&(N^=255&o.charCodeAt(V)))*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*z+(((N>>>16)*z&65535)<<16)&4294967295}return w^=o.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),Ps.exports),n=(Bo||(Bo=1,uc.exports=function(o,d){for(var y,x=o.length,w=d^x,C=0;x>=4;)y=1540483477*(65535&(y=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(y>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),x-=4,++C;switch(x){case 3:w^=(255&o.charCodeAt(C+2))<<16;case 2:w^=(255&o.charCodeAt(C+1))<<8;case 1:w=1540483477*(65535&(w^=255&o.charCodeAt(C)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),uc.exports);return ga.exports=s,ga.exports.murmur3=s,ga.exports.murmur2=n,ga.exports})(),Ts=A(hu);class xi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,d,y){this.ids.push($o(n)),this.positions.push(o,d,y)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=$o(n);let d=0,y=this.ids.length-1;for(;d<y;){const w=d+y>>1;this.ids[w]>=o?y=w:d=w+1}const x=[];for(;this.ids[d]===o;)x.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return x}static serialize(n,o){const d=new Float64Array(n.ids),y=new Uint32Array(n.positions);return Uo(d,y,0,d.length-1),o&&o.push(d.buffer,y.buffer),{ids:d,positions:y}}static deserialize(n){const o=new xi;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function $o(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Ts(String(s))}function Uo(s,n,o,d){for(;o<d;){const y=s[o+d>>1];let x=o-1,w=d+1;for(;;){do x++;while(s[x]<y);do w--;while(s[w]>y);if(x>=w)break;Vo(s,x,w),Vo(n,3*x,3*w),Vo(n,3*x+1,3*w+1),Vo(n,3*x+2,3*w+2)}w-o<d-w?(Uo(s,n,o,w),o=w+1):(Uo(s,n,w+1,d),d=w)}}function Vo(s,n,o){const d=s[n];s[n]=s[o],s[o]=d}At("FeaturePositionMap",xi);class rn{constructor(n,o){this.gl=n.gl,this.location=o}}class An extends rn{constructor(n,o){super(n,o),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class bi extends rn{constructor(n,o){super(n,o),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class ei extends rn{constructor(n,o){super(n,o),this.current=_r.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const rm=new Float32Array(16);function sd(s){return[Ln(255*s.r,255*s.g),Ln(255*s.b,255*s.a)]}class Li{constructor(n,o,d){this.value=n,this.uniformNames=o.map((y=>`u_${y}`)),this.type=d}setUniform(n,o,d){n.set(d.constantOr(this.value))}getBinding(n,o,d){return this.type==="color"?new ei(n,o):new An(n,o)}}class As{constructor(n,o){this.uniformNames=o.map((d=>`u_${d}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=n.tlbr}setUniform(n,o,d,y){const x=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&n.set(x)}getBinding(n,o,d){return d.substr(0,9)==="u_pattern"?new bi(n,o):new An(n,o)}}class Oa{constructor(n,o,d,y){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=o.map((x=>({name:`a_${x}`,type:"Float32",components:d==="color"?2:1,offset:0}))),this.paintVertexArray=new y}populatePaintArray(n,o,d){const y=this.paintVertexArray.length,x=this.expression.evaluate(new Gr(0,d),o,{},d.canonical,[],d.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(y,n,x)}updatePaintArray(n,o,d,y,x){const w=this.expression.evaluate(new Gr(0,x),d,y);this._setPaintValue(n,o,w)}_setPaintValue(n,o,d){if(this.type==="color"){const y=sd(d);for(let x=n;x<o;x++)this.paintVertexArray.emplace(x,y[0],y[1])}else{for(let y=n;y<o;y++)this.paintVertexArray.emplace(y,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ra{constructor(n,o,d,y,x,w){this.expression=n,this.uniformNames=o.map((C=>`u_${C}_t`)),this.type=d,this.useIntegerZoom=y,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=o.map((C=>({name:`a_${C}`,type:"Float32",components:d==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(n,o,d){const y=this.expression.evaluate(new Gr(this.zoom,d),o,{},d.canonical,[],d.formattedSection),x=this.expression.evaluate(new Gr(this.zoom+1,d),o,{},d.canonical,[],d.formattedSection),w=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(w,n,y,x)}updatePaintArray(n,o,d,y,x){const w=this.expression.evaluate(new Gr(this.zoom,x),d,y),C=this.expression.evaluate(new Gr(this.zoom+1,x),d,y);this._setPaintValue(n,o,w,C)}_setPaintValue(n,o,d,y){if(this.type==="color"){const x=sd(d),w=sd(y);for(let C=n;C<o;C++)this.paintVertexArray.emplace(C,x[0],x[1],w[0],w[1])}else{for(let x=n;x<o;x++)this.paintVertexArray.emplace(x,d,y);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(y))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o){const d=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,y=Wt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(y)}getBinding(n,o,d){return new An(n,o)}}class Ni{constructor(n,o,d,y,x,w){this.expression=n,this.type=o,this.useIntegerZoom=d,this.zoom=y,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(n,o,d){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(y,n,o.patterns&&o.patterns[this.layerId],d.imagePositions)}updatePaintArray(n,o,d,y,x){this._setPaintValues(n,o,d.patterns&&d.patterns[this.layerId],x.imagePositions)}_setPaintValues(n,o,d,y){if(!y||!d)return;const{min:x,mid:w,max:C}=d,I=y[x],z=y[w],N=y[C];if(I&&z&&N)for(let V=n;V<o;V++)this.zoomInPaintVertexArray.emplace(V,z.tl[0],z.tl[1],z.br[0],z.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],z.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,z.tl[0],z.tl[1],z.br[0],z.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],z.pixelRatio,N.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Nn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Nn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class sh{constructor(n,o,d){this.binders={},this._buffers=[];const y=[];for(const x in n.paint._values){if(!d(x))continue;const w=n.paint.get(x);if(!(w instanceof fa&&zo(w.property.specification)))continue;const C=pl(x,n.type),I=w.value,z=w.property.specification.type,N=w.property.useIntegerZoom,V=w.property.specification["property-type"],H=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=H?new As(I.value,C):new Li(I.value,C,z),y.push(`/u_${x}`);else if(I.kind==="source"||H){const Q=hc(x,z,"source");this.binders[x]=H?new Ni(I,z,N,o,Q,n.id):new Oa(I,C,z,Q),y.push(`/a_${x}`)}else{const Q=hc(x,z,"composite");this.binders[x]=new Ra(I,C,z,N,o,Q),y.push(`/z_${x}`)}}this.cacheKey=y.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof Oa||o instanceof Ra?o.maxValue:0}populatePaintArrays(n,o,d){for(const y in this.binders){const x=this.binders[y];(x instanceof Oa||x instanceof Ra||x instanceof Ni)&&x.populatePaintArray(n,o,d)}}setConstantPatternPositions(n,o){for(const d in this.binders){const y=this.binders[d];y instanceof As&&y.setConstantPatternPositions(n,o)}}updatePaintArrays(n,o,d,y,x){let w=!1;for(const C in n){const I=o.getPositions(C);for(const z of I){const N=d.feature(z.index);for(const V in this.binders){const H=this.binders[V];if((H instanceof Oa||H instanceof Ra||H instanceof Ni)&&H.expression.isStateDependent===!0){const Q=y.paint.get(V);H.expression=Q.value,H.updatePaintArray(z.start,z.end,N,n[C],x),w=!0}}}}return w}defines(){const n=[];for(const o in this.binders){const d=this.binders[o];(d instanceof Li||d instanceof As)&&n.push(...d.uniformNames.map((y=>`#define HAS_UNIFORM_${y}`)))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const d=this.binders[o];if(d instanceof Oa||d instanceof Ra)for(let y=0;y<d.paintVertexAttributes.length;y++)n.push(d.paintVertexAttributes[y].name);else if(d instanceof Ni)for(let y=0;y<Nn.members.length;y++)n.push(Nn.members[y].name)}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const d=this.binders[o];if(d instanceof Li||d instanceof As||d instanceof Ra)for(const y of d.uniformNames)n.push(y)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,o){const d=[];for(const y in this.binders){const x=this.binders[y];if(x instanceof Li||x instanceof As||x instanceof Ra){for(const w of x.uniformNames)if(o[w]){const C=x.getBinding(n,o[w],w);d.push({name:w,property:y,binding:C})}}}return d}setUniforms(n,o,d,y){for(const{name:x,property:w,binding:C}of o)this.binders[w].setUniform(C,y,d.get(w),x)}updatePaintBuffers(n){this._buffers=[];for(const o in this.binders){const d=this.binders[o];if(n&&d instanceof Ni){const y=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(d instanceof Oa||d instanceof Ra)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const o in this.binders){const d=this.binders[o];(d instanceof Oa||d instanceof Ra||d instanceof Ni)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof Oa||o instanceof Ra||o instanceof Ni)&&o.destroy()}}}class _o{constructor(n,o,d=()=>!0){this.programConfigurations={};for(const y of n)this.programConfigurations[y.id]=new sh(y,o,d);this.needsUpload=!1,this._featureMap=new xi,this._bufferOffset=0}populatePaintArrays(n,o,d,y){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(n,o,y);o.id!==void 0&&this._featureMap.add(o.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,d,y){for(const x of d)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(n,this._featureMap,o,x,y)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function pl(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function hc(s,n,o){const d={color:{source:Ia,composite:W},number:{source:O,composite:Ia}},y=(function(x){return{"line-pattern":{source:dt,composite:dt},"fill-pattern":{source:dt,composite:dt},"fill-extrusion-pattern":{source:dt,composite:dt}}[x]})(s);return y&&y[o]||d[n][o]}At("ConstantBinder",Li),At("CrossFadedConstantBinder",As),At("SourceExpressionBinder",Oa),At("CrossFadedCompositeBinder",Ni),At("CompositeExpressionBinder",Ra),At("ProgramConfiguration",sh,{omit:["_buffers"]}),At("ProgramConfigurationSet",_o);const dc=Math.pow(2,14)-1,lh=-dc-1;function fc(s){const n=tt/s.extent,o=s.loadGeometry();for(let d=0;d<o.length;d++){const y=o[d];for(let x=0;x<y.length;x++){const w=y[x],C=Math.round(w.x*n),I=Math.round(w.y*n);w.x=Wt(C,lh,dc),w.y=Wt(I,lh,dc),(C<w.x||C>w.x+1||I<w.y||I>w.y+1)&&rr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function pc(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?fc(s):[]}}const nm=-32768;function Vg(s,n,o,d,y){s.emplaceBack(nm+8*n+d,nm+8*o+y)}class uf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ge,this.indexArray=new Vr,this.segments=new Rr,this.programConfigurations=new _o(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,d){const y=this.layers[0],x=[];let w=null,C=!1,I=y.type==="heatmap";if(y.type==="circle"){const N=y;w=N.layout.get("circle-sort-key"),C=!w.isConstant(),I=I||N.paint.get("circle-pitch-alignment")==="map"}const z=I?o.subdivisionGranularity.circle:1;for(const{feature:N,id:V,index:H,sourceLayerIndex:Q}of n){const ee=this.layers[0]._featureFilter.needGeometry,se=pc(N,ee);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),se,d))continue;const fe=C?w.evaluate(se,{},d):void 0,_e={id:V,properties:N.properties,type:N.type,sourceLayerIndex:Q,index:H,geometry:ee?se.geometry:fc(N),patterns:{},sortKey:fe};x.push(_e)}C&&x.sort(((N,V)=>N.sortKey-V.sortKey));for(const N of x){const{geometry:V,index:H,sourceLayerIndex:Q}=N,ee=n[H].feature;this.addFeature(N,V,H,d,z),o.featureIndex.insert(ee,V,H,Q,this.index)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Hr),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,d,y,x=1){let w;switch(x){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const C=w.length;for(const I of o)for(const z of I){const N=z.x,V=z.y;if(N<0||N>=tt||V<0||V>=tt)continue;const H=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,n.sortKey),Q=H.vertexLength;for(let ee=0;ee<C;ee++)for(let se=0;se<C;se++)Vg(this.layoutVertexArray,N,V,w[se],w[ee]);for(let ee=0;ee<C-1;ee++)for(let se=0;se<C-1;se++){const fe=Q+ee*C+se,_e=Q+(ee+1)*C+se;this.indexArray.emplaceBack(fe,_e+1,fe+1),this.indexArray.emplaceBack(fe,_e,_e+1)}H.vertexLength+=C*C,H.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:{},canonical:y})}}function qg(s,n){for(let o=0;o<s.length;o++)if(du(n,s[o]))return!0;for(let o=0;o<n.length;o++)if(du(s,n[o]))return!0;return!!hf(s,n)}function Bi(s,n,o){return!!du(s,n)||!!df(n,s,o)}function Qi(s,n){if(s.length===1)return ff(n,s[0]);for(let o=0;o<n.length;o++){const d=n[o];for(let y=0;y<d.length;y++)if(du(s,d[y]))return!0}for(let o=0;o<s.length;o++)if(ff(n,s[o]))return!0;for(let o=0;o<n.length;o++)if(hf(s,n[o]))return!0;return!1}function Gg(s,n,o){if(s.length>1){if(hf(s,n))return!0;for(let d=0;d<n.length;d++)if(df(n[d],s,o))return!0}for(let d=0;d<s.length;d++)if(df(s[d],n,o))return!0;return!1}function hf(s,n){if(s.length===0||n.length===0)return!1;for(let o=0;o<s.length-1;o++){const d=s[o],y=s[o+1];for(let x=0;x<n.length-1;x++)if(Wg(d,y,n[x],n[x+1]))return!0}return!1}function Wg(s,n,o,d){return qr(s,o,d)!==qr(n,o,d)&&qr(s,n,o)!==qr(s,n,d)}function df(s,n,o){const d=o*o;if(n.length===1)return s.distSqr(n[0])<d;for(let y=1;y<n.length;y++)if(im(s,n[y-1],n[y])<d)return!0;return!1}function im(s,n,o){const d=n.distSqr(o);if(d===0)return s.distSqr(n);const y=((s.x-n.x)*(o.x-n.x)+(s.y-n.y)*(o.y-n.y))/d;return s.distSqr(y<0?n:y>1?o:o.sub(n)._mult(y)._add(n))}function ff(s,n){let o,d,y,x=!1;for(let w=0;w<s.length;w++){o=s[w];for(let C=0,I=o.length-1;C<o.length;I=C++)d=o[C],y=o[I],d.y>n.y!=y.y>n.y&&n.x<(y.x-d.x)*(n.y-d.y)/(y.y-d.y)+d.x&&(x=!x)}return x}function du(s,n){let o=!1;for(let d=0,y=s.length-1;d<s.length;y=d++){const x=s[d],w=s[y];x.y>n.y!=w.y>n.y&&n.x<(w.x-x.x)*(n.y-x.y)/(w.y-x.y)+x.x&&(o=!o)}return o}function am(s,n,o){const d=o[0],y=o[2];if(s.x<d.x&&n.x<d.x||s.x>y.x&&n.x>y.x||s.y<d.y&&n.y<d.y||s.y>y.y&&n.y>y.y)return!1;const x=qr(s,n,o[0]);return x!==qr(s,n,o[1])||x!==qr(s,n,o[2])||x!==qr(s,n,o[3])}function fu(s,n,o){const d=n.paint.get(s).value;return d.kind==="constant"?d.value:o.programConfigurations.get(n.id).getMaxValue(s)}function ld(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function ch(s,n,o,d,y){if(!n[0]&&!n[1])return s;const x=P.convert(n)._mult(y);o==="viewport"&&x._rotate(-d);const w=[];for(let C=0;C<s.length;C++)w.push(s[C].sub(x));return w}function om({queryGeometry:s,size:n},o){return Bi(s,o,n)}function Zg({queryGeometry:s,size:n,transform:o,unwrappedTileID:d,getElevation:y},x){return Bi(s,x,n*(o.projectTileCoordinates(x.x,x.y,d,y).signedDistanceFromCamera/o.cameraToCenterDistance))}function sm({queryGeometry:s,size:n,transform:o,unwrappedTileID:d,getElevation:y},x){const w=o.projectTileCoordinates(x.x,x.y,d,y).signedDistanceFromCamera,C=n*(o.cameraToCenterDistance/w);return Bi(s,mf(x,o,d,y),C)}function pf({queryGeometry:s,size:n,transform:o,unwrappedTileID:d,getElevation:y},x){return Bi(s,mf(x,o,d,y),n)}function Hg({queryGeometry:s,size:n,transform:o,unwrappedTileID:d,getElevation:y,pitchAlignment:x="map",pitchScale:w="map"},C){const I=x==="map"?w==="map"?om:Zg:w==="map"?sm:pf,z={queryGeometry:s,size:n,transform:o,unwrappedTileID:d,getElevation:y};for(const N of C)for(const V of N)if(I(z,V))return!0;return!1}function mf(s,n,o,d){const y=n.projectTileCoordinates(s.x,s.y,o,d).point;return new P((.5*y.x+.5)*n.width,(.5*-y.y+.5)*n.height)}let gf,lm;At("CircleBucket",uf,{omit:["layers"]});var yf={get paint(){return lm=lm||new jn({"circle-radius":new Vt(Ne.paint_circle["circle-radius"]),"circle-color":new Vt(Ne.paint_circle["circle-color"]),"circle-blur":new Vt(Ne.paint_circle["circle-blur"]),"circle-opacity":new Vt(Ne.paint_circle["circle-opacity"]),"circle-translate":new jt(Ne.paint_circle["circle-translate"]),"circle-translate-anchor":new jt(Ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt(Ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt(Ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vt(Ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vt(Ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vt(Ne.paint_circle["circle-stroke-opacity"])})},get layout(){return gf=gf||new jn({"circle-sort-key":new Vt(Ne.layout_circle["circle-sort-key"])})}};class ml extends di{constructor(n,o){super(n,yf,o)}createBucket(n){return new uf(n)}queryRadius(n){const o=n;return fu("circle-radius",this,o)+fu("circle-stroke-width",this,o)+ld(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:y,transform:x,pixelsToTileUnits:w,unwrappedTileID:C,getElevation:I}){const z=ch(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,w),N=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d),V=this.paint.get("circle-pitch-scale"),H=this.paint.get("circle-pitch-alignment");let Q,ee;return H==="map"?(Q=z,ee=N*w):(Q=(function(se,fe,_e,$e){return se.map((Se=>mf(Se,fe,_e,$e)))})(z,x,C,I),ee=N),Hg({queryGeometry:Q,size:ee,transform:x,unwrappedTileID:C,getElevation:I,pitchAlignment:H,pitchScale:V},y)}}class Kg extends uf{}let cm;At("HeatmapBucket",Kg,{omit:["layers"]});var um={get paint(){return cm=cm||new jn({"heatmap-radius":new Vt(Ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vt(Ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt(Ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oc(Ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt(Ne.paint_heatmap["heatmap-opacity"])})}};function vf(s,{width:n,height:o},d,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==n*o*d)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${n*o*d}`)}else y=new Uint8Array(n*o*d);return s.width=n,s.height=o,s.data=y,s}function hm(s,{width:n,height:o},d){if(n===s.width&&o===s.height)return;const y=vf({},{width:n,height:o},d);pu(s,y,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,o)},d),s.width=n,s.height=o,s.data=y.data}function pu(s,n,o,d,y,x){if(y.width===0||y.height===0)return n;if(y.width>s.width||y.height>s.height||o.x>s.width-y.width||o.y>s.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>n.width||y.height>n.height||d.x>n.width-y.width||d.y>n.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const w=s.data,C=n.data;if(w===C)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<y.height;I++){const z=((o.y+I)*s.width+o.x)*x,N=((d.y+I)*n.width+d.x)*x;for(let V=0;V<y.width*x;V++)C[N+V]=w[z+V]}return n}class si{constructor(n,o){vf(this,n,1,o)}resize(n){hm(this,n,1)}clone(){return new si({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,d,y,x){pu(n,o,d,y,x,1)}}class ya{constructor(n,o){vf(this,n,4,o)}resize(n){hm(this,n,4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ya({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,d,y,x){pu(n,o,d,y,x,4)}setPixel(n,o,d){const y=4*(n*this.width+o);this.data[y+0]=Math.round(255*d.r/d.a),this.data[y+1]=Math.round(255*d.g/d.a),this.data[y+2]=Math.round(255*d.b/d.a),this.data[y+3]=Math.round(255*d.a)}}function Xg(s){const n={},o=s.resolution||256,d=s.clips?s.clips.length:1,y=s.image||new ya({width:o,height:d});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const x=(w,C,I)=>{n[s.evaluationKey]=I;const z=s.expression.evaluate(n);y.setPixel(w/4/o,C/4,z)};if(s.clips)for(let w=0,C=0;w<d;++w,C+=4*o)for(let I=0,z=0;I<o;I++,z+=4){const N=I/(o-1),{start:V,end:H}=s.clips[w];x(C,z,V*(1-N)+H*N)}else for(let w=0,C=0;w<o;w++,C+=4)x(0,C,w/(o-1));return y}At("AlphaImage",si),At("RGBAImage",ya);const uh="big-fb";class ea extends di{createBucket(n){return new Kg(n)}constructor(n,o){super(n,um,o),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Xg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(uh)&&this.heatmapFbos.delete(uh)}queryRadius(n){return fu("heatmap-radius",this,n)}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:y,transform:x,pixelsToTileUnits:w,unwrappedTileID:C,getElevation:I}){return Hg({queryGeometry:n,size:this.paint.get("heatmap-radius").evaluate(o,d)*w,transform:x,unwrappedTileID:C,getElevation:I},y)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Yg;var qt={get paint(){return Yg=Yg||new jn({"hillshade-illumination-direction":new jt(Ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new jt(Ne.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new jt(Ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt(Ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt(Ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt(Ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt(Ne.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new jt(Ne.paint_hillshade["hillshade-method"])})}};class hh extends di{constructor(n,o){super(n,qt,o),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,y=this.paint.get("hillshade-shadow-color").values;const x=Math.max(n.length,o.length,d.length,y.length);n=n.concat(Array(x-n.length).fill(n.at(-1))),o=o.concat(Array(x-o.length).fill(o.at(-1))),d=d.concat(Array(x-d.length).fill(d.at(-1))),y=y.concat(Array(x-y.length).fill(y.at(-1)));const w=o.map(Ba);return{directionRadians:n.map(Ba),altitudeRadians:w,shadowColor:y,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let _f;var Jg={get paint(){return _f=_f||new jn({"color-relief-opacity":new jt(Ne["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new oc(Ne["paint_color-relief"]["color-relief-color"])})}};class dm{constructor(n,o,d,y){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(o,y)}update(n,o,d){const{width:y,height:x}=n,w=!(this.size&&this.size[0]===y&&this.size[1]===x||d),{context:C}=this,{gl:I}=C;if(this.useMipmap=!!(o&&o.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!o||o.premultiply!==!1)),w)this.size=[y,x],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||qn(n)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,n):I.texImage2D(I.TEXTURE_2D,0,this.format,y,x,0,this.format,I.UNSIGNED_BYTE,n.data);else{const{x:z,y:N}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||qn(n)?I.texSubImage2D(I.TEXTURE_2D,0,z,N,I.RGBA,I.UNSIGNED_BYTE,n):I.texSubImage2D(I.TEXTURE_2D,0,z,N,y,x,I.RGBA,I.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,o,d){const{context:y}=this,{gl:x}=y;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),n!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,n),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||n),this.filter=n),o!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class dh{constructor(n,o,d,y=1,x=1,w=1,C=0){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void rr(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const I=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=x,this.blueFactor=w,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<I;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(I,z)]=this.data[this._idx(I-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,I)]=this.data[this._idx(z,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<I;z++)for(let N=0;N<I;N++){const V=this.get(z,N);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(n,o){const d=new Uint8Array(this.data.buffer),y=4*this._idx(n,o);return this.unpack(d[y],d[y+1],d[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}unpack(n,o,d){return n*this.redFactor+o*this.greenFactor+d*this.blueFactor-this.baseShift}pack(n){return cd(n,this.getUnpackVector())}getPixels(){return new ya({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,o,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let y=o*this.dim,x=o*this.dim+this.dim,w=d*this.dim,C=d*this.dim+this.dim;switch(o){case-1:y=x-1;break;case 1:x=y+1}switch(d){case-1:w=C-1;break;case 1:C=w+1}const I=-o*this.dim,z=-d*this.dim;for(let N=w;N<C;N++)for(let V=y;V<x;V++)this.data[this._idx(V,N)]=n.data[this._idx(V+I,N+z)]}}function cd(s,n){const o=n[0],d=n[1],y=n[2],x=n[3],w=Math.min(o,d,y),C=Math.round((s+x)/w);return{r:Math.floor(C*w/o)%256,g:Math.floor(C*w/d)%256,b:Math.floor(C*w/y)%256}}At("DEMData",dh);class fm extends di{constructor(n,o){super(n,Jg,o)}_createColorRamp(n){const o={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof Ys&&d._styleExpression.expression instanceof zn){this.colorRampExpression=d;const w=d._styleExpression.expression;o.elevationStops=w.labels,o.colorStops=[];for(const C of o.elevationStops)o.colorStops.push(w.evaluate({globals:{elevation:C}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[_r.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=n)return o;const y={elevationStops:[],colorStops:[]},x=(o.elevationStops.length-1)/(n-1);for(let w=0;w<o.elevationStops.length-.5;w+=x)y.elevationStops.push(o.elevationStops[Math.round(w)]),y.colorStops.push(o.colorStops[Math.round(w)]);return rr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),y}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,o,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const y=this._createColorRamp(o),x=new ya({width:y.colorStops.length,height:1}),w=new ya({width:y.colorStops.length,height:1});for(let C=0;C<y.elevationStops.length;C++){const I=cd(y.elevationStops[C],d);w.setPixel(0,C,new _r(I.r/255,I.g/255,I.b/255,1)),x.setPixel(0,C,y.colorStops[C])}return this.colorRampTextures={elevationTexture:new dm(n,w,n.gl.RGBA),colorTexture:new dm(n,x,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Qg=Jr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ey}=Qg;function xf(s,n,o){const d=o.patternDependencies;let y=!1;for(const x of n){const w=x.paint.get(`${s}-pattern`);w.isConstant()||(y=!0);const C=w.constantOr(null);C&&(y=!0,d[C.to]=!0,d[C.from]=!0)}return y}function ud(s,n,o,d,y){const{zoom:x}=d,w=y.patternDependencies;for(const C of n){const I=C.paint.get(`${s}-pattern`).value;if(I.kind!=="constant"){let z=I.evaluate({zoom:x-1},o,{},y.availableImages),N=I.evaluate({zoom:x},o,{},y.availableImages),V=I.evaluate({zoom:x+1},o,{},y.availableImages);z=z&&z.name?z.name:z,N=N&&N.name?N.name:N,V=V&&V.name?V.name:V,w[z]=!0,w[N]=!0,w[V]=!0,o.patterns[C.id]={min:z,mid:N,max:V}}}return o}function bf(s,n,o,d,y){let x;if(y===(function(w,C,I,z){let N=0;for(let V=C,H=I-z;V<I;V+=z)N+=(w[H]-w[V])*(w[V+1]+w[H+1]),H=V;return N})(s,n,o,d)>0)for(let w=n;w<o;w+=d)x=Da(w/d|0,s[w],s[w+1],x);else for(let w=o-d;w>=n;w-=d)x=Da(w/d|0,s[w],s[w+1],x);return x&&gc(x,x.next)&&(Es(x),x=x.next),x}function Bn(s,n){if(!s)return s;n||(n=s);let o,d=s;do if(o=!1,d.steiner||!gc(d,d.next)&&_n(d.prev,d,d.next)!==0)d=d.next;else{if(Es(d),d=n=d.prev,d===d.next)break;o=!0}while(o||d!==n);return n}function va(s,n,o,d,y,x,w){if(!s)return;!w&&x&&(function(I,z,N,V){let H=I;do H.z===0&&(H.z=wf(H.x,H.y,z,N,V)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==I);H.prevZ.nextZ=null,H.prevZ=null,(function(Q){let ee,se=1;do{let fe,_e=Q;Q=null;let $e=null;for(ee=0;_e;){ee++;let Se=_e,Me=0;for(let rt=0;rt<se&&(Me++,Se=Se.nextZ,Se);rt++);let Ye=se;for(;Me>0||Ye>0&&Se;)Me!==0&&(Ye===0||!Se||_e.z<=Se.z)?(fe=_e,_e=_e.nextZ,Me--):(fe=Se,Se=Se.nextZ,Ye--),$e?$e.nextZ=fe:Q=fe,fe.prevZ=$e,$e=fe;_e=Se}$e.nextZ=null,se*=2}while(ee>1)})(H)})(s,d,y,x);let C=s;for(;s.prev!==s.next;){const I=s.prev,z=s.next;if(x?ty(s,d,y,x):mc(s))n.push(I.i,s.i,z.i),Es(s),s=z.next,C=z.next;else if((s=z)===C){w?w===1?va(s=ry(Bn(s),n),n,o,d,y,x,2):w===2&&qo(s,n,o,d,y,x):va(Bn(s),n,o,d,y,x,1);break}}}function mc(s){const n=s.prev,o=s,d=s.next;if(_n(n,o,d)>=0)return!1;const y=n.x,x=o.x,w=d.x,C=n.y,I=o.y,z=d.y,N=Math.min(y,x,w),V=Math.min(C,I,z),H=Math.max(y,x,w),Q=Math.max(C,I,z);let ee=d.next;for(;ee!==n;){if(ee.x>=N&&ee.x<=H&&ee.y>=V&&ee.y<=Q&&fh(y,C,x,I,w,z,ee.x,ee.y)&&_n(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function ty(s,n,o,d){const y=s.prev,x=s,w=s.next;if(_n(y,x,w)>=0)return!1;const C=y.x,I=x.x,z=w.x,N=y.y,V=x.y,H=w.y,Q=Math.min(C,I,z),ee=Math.min(N,V,H),se=Math.max(C,I,z),fe=Math.max(N,V,H),_e=wf(Q,ee,n,o,d),$e=wf(se,fe,n,o,d);let Se=s.prevZ,Me=s.nextZ;for(;Se&&Se.z>=_e&&Me&&Me.z<=$e;){if(Se.x>=Q&&Se.x<=se&&Se.y>=ee&&Se.y<=fe&&Se!==y&&Se!==w&&fh(C,N,I,V,z,H,Se.x,Se.y)&&_n(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,Me.x>=Q&&Me.x<=se&&Me.y>=ee&&Me.y<=fe&&Me!==y&&Me!==w&&fh(C,N,I,V,z,H,Me.x,Me.y)&&_n(Me.prev,Me,Me.next)>=0))return!1;Me=Me.nextZ}for(;Se&&Se.z>=_e;){if(Se.x>=Q&&Se.x<=se&&Se.y>=ee&&Se.y<=fe&&Se!==y&&Se!==w&&fh(C,N,I,V,z,H,Se.x,Se.y)&&_n(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;Me&&Me.z<=$e;){if(Me.x>=Q&&Me.x<=se&&Me.y>=ee&&Me.y<=fe&&Me!==y&&Me!==w&&fh(C,N,I,V,z,H,Me.x,Me.y)&&_n(Me.prev,Me,Me.next)>=0)return!1;Me=Me.nextZ}return!0}function ry(s,n){let o=s;do{const d=o.prev,y=o.next.next;!gc(d,y)&&Ya(d,o,o.next,y)&&Cn(d,y)&&Cn(y,d)&&(n.push(d.i,o.i,y.i),Es(o),Es(o.next),o=s=y),o=o.next}while(o!==s);return Bn(o)}function qo(s,n,o,d,y,x){let w=s;do{let C=w.next.next;for(;C!==w.prev;){if(w.i!==C.i&&R_(w,C)){let I=wi(w,C);return w=Bn(w,w.next),I=Bn(I,I.next),va(w,n,o,d,y,x,0),void va(I,n,o,d,y,x,0)}C=C.next}w=w.next}while(w!==s)}function ny(s,n){let o=s.x-n.x;return o===0&&(o=s.y-n.y,o===0)&&(o=(s.next.y-s.y)/(s.next.x-s.x)-(n.next.y-n.y)/(n.next.x-n.x)),o}function Cs(s,n){const o=(function(y,x){let w=x;const C=y.x,I=y.y;let z,N=-1/0;if(gc(y,w))return w;do{if(gc(y,w.next))return w.next;if(I<=w.y&&I>=w.next.y&&w.next.y!==w.y){const se=w.x+(I-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(se<=C&&se>N&&(N=se,z=w.x<w.next.x?w:w.next,se===C))return z}w=w.next}while(w!==x);if(!z)return null;const V=z,H=z.x,Q=z.y;let ee=1/0;w=z;do{if(C>=w.x&&w.x>=H&&C!==w.x&&pm(I<Q?C:N,I,H,Q,I<Q?N:C,I,w.x,w.y)){const se=Math.abs(I-w.y)/(C-w.x);Cn(w,y)&&(se<ee||se===ee&&(w.x>z.x||w.x===z.x&&O_(z,w)))&&(z=w,ee=se)}w=w.next}while(w!==V);return z})(s,n);if(!o)return n;const d=wi(o,s);return Bn(d,d.next),Bn(o,o.next)}function O_(s,n){return _n(s.prev,s,n.prev)<0&&_n(n.next,s,s.next)<0}function wf(s,n,o,d,y){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*y|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function iy(s){let n=s,o=s;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==s);return o}function pm(s,n,o,d,y,x,w,C){return(y-w)*(n-C)>=(s-w)*(x-C)&&(s-w)*(d-C)>=(o-w)*(n-C)&&(o-w)*(x-C)>=(y-w)*(d-C)}function fh(s,n,o,d,y,x,w,C){return!(s===w&&n===C)&&pm(s,n,o,d,y,x,w,C)}function R_(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!(function(o,d){let y=o;do{if(y.i!==o.i&&y.next.i!==o.i&&y.i!==d.i&&y.next.i!==d.i&&Ya(y,y.next,o,d))return!0;y=y.next}while(y!==o);return!1})(s,n)&&(Cn(s,n)&&Cn(n,s)&&(function(o,d){let y=o,x=!1;const w=(o.x+d.x)/2,C=(o.y+d.y)/2;do y.y>C!=y.next.y>C&&y.next.y!==y.y&&w<(y.next.x-y.x)*(C-y.y)/(y.next.y-y.y)+y.x&&(x=!x),y=y.next;while(y!==o);return x})(s,n)&&(_n(s.prev,s,n.prev)||_n(s,n.prev,n))||gc(s,n)&&_n(s.prev,s,s.next)>0&&_n(n.prev,n,n.next)>0)}function _n(s,n,o){return(n.y-s.y)*(o.x-n.x)-(n.x-s.x)*(o.y-n.y)}function gc(s,n){return s.x===n.x&&s.y===n.y}function Ya(s,n,o,d){const y=ti(_n(s,n,o)),x=ti(_n(s,n,d)),w=ti(_n(o,d,s)),C=ti(_n(o,d,n));return y!==x&&w!==C||!(y!==0||!Br(s,o,n))||!(x!==0||!Br(s,d,n))||!(w!==0||!Br(o,s,d))||!(C!==0||!Br(o,n,d))}function Br(s,n,o){return n.x<=Math.max(s.x,o.x)&&n.x>=Math.min(s.x,o.x)&&n.y<=Math.max(s.y,o.y)&&n.y>=Math.min(s.y,o.y)}function ti(s){return s>0?1:s<0?-1:0}function Cn(s,n){return _n(s.prev,s,s.next)<0?_n(s,n,s.next)>=0&&_n(s,s.prev,n)>=0:_n(s,n,s.prev)<0||_n(s,s.next,n)<0}function wi(s,n){const o=ri(s.i,s.x,s.y),d=ri(n.i,n.x,n.y),y=s.next,x=n.prev;return s.next=n,n.prev=s,o.next=y,y.prev=o,d.next=o,o.prev=d,x.next=d,d.prev=x,d}function Da(s,n,o,d){const y=ri(s,n,o);return d?(y.next=d.next,y.prev=d,d.next.prev=y,d.next=y):(y.prev=y,y.next=y),y}function Es(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function ri(s,n,o){return{i:s,x:n,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ms{constructor(n,o){if(o>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=o}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class ks{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}ks.noSubdivision=new ks({fill:new Ms(0,0),line:new Ms(0,0),tile:new Ms(0,0),stencil:new Ms(0,0),circle:1}),At("SubdivisionGranularityExpression",Ms),At("SubdivisionGranularitySetting",ks);const gl=-32768,mu=32767;class hd{constructor(n,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=tt/n,this._canonical=o}_getKey(n,o){return(n+=32768)<<16|o+32768}_vertexToIndex(n,o){if(n<-32768||o<-32768||n>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(n),y=0|Math.round(o),x=this._getKey(d,y);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,w),this._vertexBuffer.push(d,y),w}_subdivideTrianglesScanline(n){if(this._granularity<2)return(function(y,x){const w=[];for(let C=0;C<x.length;C+=3){const I=x[C],z=x[C+1],N=x[C+2],V=y[2*I],H=y[2*I+1];(y[2*z]-V)*(y[2*N+1]-H)-(y[2*z+1]-H)*(y[2*N]-V)>0?(w.push(I),w.push(N),w.push(z)):(w.push(I),w.push(z),w.push(N))}return w})(this._vertexBuffer,n);const o=[],d=n.length;for(let y=0;y<d;y+=3){const x=[n[y+0],n[y+1],n[y+2]],w=[this._vertexBuffer[2*n[y+0]+0],this._vertexBuffer[2*n[y+0]+1],this._vertexBuffer[2*n[y+1]+0],this._vertexBuffer[2*n[y+1]+1],this._vertexBuffer[2*n[y+2]+0],this._vertexBuffer[2*n[y+2]+1]];let C=1/0,I=1/0,z=-1/0,N=-1/0;for(let se=0;se<3;se++){const fe=w[2*se],_e=w[2*se+1];C=Math.min(C,fe),z=Math.max(z,fe),I=Math.min(I,_e),N=Math.max(N,_e)}if(C===z||I===N)continue;const V=Math.floor(C/this._granularityCellSize),H=Math.ceil(z/this._granularityCellSize),Q=Math.floor(I/this._granularityCellSize),ee=Math.ceil(N/this._granularityCellSize);if(V!==H||Q!==ee)for(let se=Q;se<ee;se++){const fe=this._scanlineGenerateVertexRingForCellRow(se,w,x);ph(this._vertexBuffer,fe,o)}else o.push(...x)}return o}_scanlineGenerateVertexRingForCellRow(n,o,d){const y=n*this._granularityCellSize,x=y+this._granularityCellSize,w=[];for(let C=0;C<3;C++){const I=o[2*C],z=o[2*C+1],N=o[2*(C+1)%6],V=o[(2*(C+1)+1)%6],H=o[2*(C+2)%6],Q=o[(2*(C+2)+1)%6],ee=N-I,se=V-z,fe=ee===0,_e=se===0,$e=(y-z)/se,Se=(x-z)/se,Me=Math.min($e,Se),Ye=Math.max($e,Se);if(!_e&&(Me>=1||Ye<=0)||_e&&(z<y||z>x)){V>=y&&V<=x&&w.push(d[(C+1)%3]);continue}!_e&&Me>0&&w.push(this._vertexToIndex(I+ee*Me,z+se*Me));const rt=I+ee*Math.max(Me,0),mt=I+ee*Math.min(Ye,1);fe||this._generateIntraEdgeVertices(w,I,z,N,V,rt,mt),!_e&&Ye<1&&w.push(this._vertexToIndex(I+ee*Ye,z+se*Ye)),(_e||V>=y&&V<=x)&&w.push(d[(C+1)%3]),!_e&&(V<=y||V>=x)&&this._generateInterEdgeVertices(w,I,z,N,V,H,Q,mt,y,x)}return w}_generateIntraEdgeVertices(n,o,d,y,x,w,C){const I=y-o,z=x-d,N=z===0,V=N?Math.min(o,y):Math.min(w,C),H=N?Math.max(o,y):Math.max(w,C),Q=Math.floor(V/this._granularityCellSize)+1,ee=Math.ceil(H/this._granularityCellSize)-1;if(N?o<y:w<C)for(let se=Q;se<=ee;se++){const fe=se*this._granularityCellSize;n.push(this._vertexToIndex(fe,d+z*(fe-o)/I))}else for(let se=ee;se>=Q;se--){const fe=se*this._granularityCellSize;n.push(this._vertexToIndex(fe,d+z*(fe-o)/I))}}_generateInterEdgeVertices(n,o,d,y,x,w,C,I,z,N){const V=x-d,H=w-y,Q=C-x,ee=(z-x)/Q,se=(N-x)/Q,fe=Math.min(ee,se),_e=Math.max(ee,se),$e=y+H*fe;let Se=Math.floor(Math.min($e,I)/this._granularityCellSize)+1,Me=Math.ceil(Math.max($e,I)/this._granularityCellSize)-1,Ye=I<$e;const rt=Q===0;if(rt&&(C===z||C===N))return;if(rt||fe>=1||_e<=0){const It=d-C,St=w+(o-w)*Math.min((z-C)/It,(N-C)/It);Se=Math.floor(Math.min(St,I)/this._granularityCellSize)+1,Me=Math.ceil(Math.max(St,I)/this._granularityCellSize)-1,Ye=I<St}const mt=V>0?N:z;if(Ye)for(let It=Se;It<=Me;It++)n.push(this._vertexToIndex(It*this._granularityCellSize,mt));else for(let It=Me;It>=Se;It--)n.push(this._vertexToIndex(It*this._granularityCellSize,mt))}_generateOutline(n){const o=[];for(const d of n){const y=yl(d,this._granularity,!0),x=this._pointArrayToIndices(y),w=[];for(let C=1;C<x.length;C++)w.push(x[C-1]),w.push(x[C]);o.push(w)}return o}_handlePoles(n){let o=!1,d=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(o||d)&&this._fillPoles(n,o,d)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let o=0;o<n.length;o+=2){const d=n[o+1];d===gl&&(n[o+1]=-32767),d===mu&&(n[o+1]=32766)}}_generatePoleQuad(n,o,d,y,x,w){y>x!=(w===gl)?(n.push(o),n.push(d),n.push(this._vertexToIndex(y,w)),n.push(d),n.push(this._vertexToIndex(x,w)),n.push(this._vertexToIndex(y,w))):(n.push(d),n.push(o),n.push(this._vertexToIndex(y,w)),n.push(this._vertexToIndex(x,w)),n.push(d),n.push(this._vertexToIndex(y,w)))}_fillPoles(n,o,d){const y=this._vertexBuffer,x=tt,w=n.length;for(let C=2;C<w;C+=3){const I=n[C-2],z=n[C-1],N=n[C],V=y[2*I],H=y[2*I+1],Q=y[2*z],ee=y[2*z+1],se=y[2*N],fe=y[2*N+1];o&&(H===0&&ee===0&&this._generatePoleQuad(n,I,z,V,Q,gl),ee===0&&fe===0&&this._generatePoleQuad(n,z,N,Q,se,gl),fe===0&&H===0&&this._generatePoleQuad(n,N,I,se,V,gl)),d&&(H===x&&ee===x&&this._generatePoleQuad(n,I,z,V,Q,mu),ee===x&&fe===x&&this._generatePoleQuad(n,z,N,Q,se,mu),fe===x&&H===x&&this._generatePoleQuad(n,N,I,se,V,mu))}}_initializeVertices(n){for(let o=0;o<n.length;o+=2)this._vertexToIndex(n[o],n[o+1])}subdividePolygonInternal(n,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:y}=(function(C){const I=[],z=[];for(const N of C)if(N.length!==0){N!==C[0]&&I.push(z.length/2);for(let V=0;V<N.length;V++)z.push(N[V].x),z.push(N[V].y)}return{flattened:z,holeIndices:I}})(n);let x;this._initializeVertices(d);try{const C=(function(z,N,V=2){const H=N&&N.length,Q=H?N[0]*V:z.length;let ee=bf(z,0,Q,V,!0);const se=[];if(!ee||ee.next===ee.prev)return se;let fe,_e,$e;if(H&&(ee=(function(Se,Me,Ye,rt){const mt=[];for(let It=0,St=Me.length;It<St;It++){const Et=bf(Se,Me[It]*rt,It<St-1?Me[It+1]*rt:Se.length,rt,!1);Et===Et.next&&(Et.steiner=!0),mt.push(iy(Et))}mt.sort(ny);for(let It=0;It<mt.length;It++)Ye=Cs(mt[It],Ye);return Ye})(z,N,ee,V)),z.length>80*V){fe=z[0],_e=z[1];let Se=fe,Me=_e;for(let Ye=V;Ye<Q;Ye+=V){const rt=z[Ye],mt=z[Ye+1];rt<fe&&(fe=rt),mt<_e&&(_e=mt),rt>Se&&(Se=rt),mt>Me&&(Me=mt)}$e=Math.max(Se-fe,Me-_e),$e=$e!==0?32767/$e:0}return va(ee,se,V,fe,_e,$e,0),se})(d,y),I=this._convertIndices(d,C);x=this._subdivideTrianglesScanline(I)}catch(C){console.error(C)}let w=[];return o&&(w=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:w}}_convertIndices(n,o){const d=[];for(let y=0;y<o.length;y++)d.push(this._vertexToIndex(n[2*o[y]],n[2*o[y]+1]));return d}_pointArrayToIndices(n){const o=[];for(let d=0;d<n.length;d++){const y=n[d];o.push(this._vertexToIndex(y.x,y.y))}return o}}function _a(s,n,o,d=!0){return new hd(o,n).subdividePolygonInternal(s,d)}function yl(s,n,o=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const d=s[0],y=s[s.length-1],x=o&&(d.x!==y.x||d.y!==y.y);if(n<2)return x?[...s,s[0]]:[...s];const w=Math.floor(tt/n),C=[];C.push(new P(s[0].x,s[0].y));const I=s.length,z=x?I:I-1;for(let N=0;N<z;N++){const V=s[N],H=N<I-1?s[N+1]:s[0],Q=V.x,ee=V.y,se=H.x,fe=H.y,_e=Q!==se,$e=ee!==fe;if(!_e&&!$e)continue;const Se=se-Q,Me=fe-ee,Ye=Math.abs(Se),rt=Math.abs(Me);let mt=Q,It=ee;for(;;){const Et=Se>0?(Math.floor(mt/w)+1)*w:(Math.ceil(mt/w)-1)*w,Gt=Me>0?(Math.floor(It/w)+1)*w:(Math.ceil(It/w)-1)*w,Ct=Math.abs(mt-Et),Mt=Math.abs(It-Gt),ht=Math.abs(mt-se),or=Math.abs(It-fe),hr=_e?Ct/Ye:Number.POSITIVE_INFINITY,Qt=$e?Mt/rt:Number.POSITIVE_INFINITY;if((ht<=Ct||!_e)&&(or<=Mt||!$e))break;if(hr<Qt&&_e||!$e){mt=Et,It+=Me*hr;const Bt=new P(mt,Math.round(It));C[C.length-1].x===Bt.x&&C[C.length-1].y===Bt.y||C.push(Bt)}else{mt+=Se*Qt,It=Gt;const Bt=new P(Math.round(mt),It);C[C.length-1].x===Bt.x&&C[C.length-1].y===Bt.y||C.push(Bt)}}const St=new P(se,fe);C[C.length-1].x===St.x&&C[C.length-1].y===St.y||C.push(St)}return C}function ph(s,n,o){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,y=s[2*n[0]];for(let I=1;I<n.length;I++){const z=s[2*n[I]];z<y&&(y=z,d=I)}const x=n.length;let w=d,C=(w+1)%x;for(;;){const I=w-1>=0?w-1:x-1,z=(C+1)%x,N=s[2*n[I]],V=s[2*n[z]],H=s[2*n[w]],Q=s[2*n[w]+1],ee=s[2*n[C]+1];let se=!1;if(N<V)se=!0;else if(N>V)se=!1;else{const fe=ee-Q,_e=-(s[2*n[C]]-H),$e=Q<ee?1:-1;((N-H)*fe+(s[2*n[I]+1]-Q)*_e)*$e>((V-H)*fe+(s[2*n[z]+1]-Q)*_e)*$e&&(se=!0)}if(se){const fe=n[I],_e=n[w],$e=n[C];fe!==_e&&fe!==$e&&_e!==$e&&o.push($e,_e,fe),w--,w<0&&(w=x-1)}else{const fe=n[z],_e=n[w],$e=n[C];fe!==_e&&fe!==$e&&_e!==$e&&o.push($e,_e,fe),C++,C>=x&&(C=0)}if(I===z)break}}function Is(s,n,o,d,y,x,w,C,I){const z=y.length/2,N=w&&C&&I;if(z<Rr.MAX_VERTEX_ARRAY_LENGTH){const V=n.prepareSegment(z,o,d),H=V.vertexLength;for(let se=0;se<x.length;se+=3)d.emplaceBack(H+x[se],H+x[se+1],H+x[se+2]);let Q,ee;V.vertexLength+=z,V.primitiveLength+=x.length/3,N&&(ee=w.prepareSegment(z,o,C),Q=ee.vertexLength,ee.vertexLength+=z);for(let se=0;se<y.length;se+=2)s(y[se],y[se+1]);if(N)for(let se=0;se<I.length;se++){const fe=I[se];for(let _e=1;_e<fe.length;_e+=2)C.emplaceBack(Q+fe[_e-1],Q+fe[_e]);ee.primitiveLength+=fe.length/2}}else(function(V,H,Q,ee,se,fe){const _e=[];for(let rt=0;rt<ee.length/2;rt++)_e.push(-1);const $e={count:0};let Se=0,Me=V.getOrCreateLatestSegment(H,Q),Ye=Me.vertexLength;for(let rt=2;rt<se.length;rt+=3){const mt=se[rt-2],It=se[rt-1],St=se[rt];let Et=_e[mt]<Se,Gt=_e[It]<Se,Ct=_e[St]<Se;Me.vertexLength+((Et?1:0)+(Gt?1:0)+(Ct?1:0))>Rr.MAX_VERTEX_ARRAY_LENGTH&&(Me=V.createNewSegment(H,Q),Se=$e.count,Et=!0,Gt=!0,Ct=!0,Ye=0);const Mt=yc(_e,ee,fe,$e,mt,Et,Me),ht=yc(_e,ee,fe,$e,It,Gt,Me),or=yc(_e,ee,fe,$e,St,Ct,Me);Q.emplaceBack(Ye+Mt-Se,Ye+ht-Se,Ye+or-Se),Me.primitiveLength++}})(n,o,d,y,x,s),N&&(function(V,H,Q,ee,se,fe){const _e=[];for(let rt=0;rt<ee.length/2;rt++)_e.push(-1);const $e={count:0};let Se=0,Me=V.getOrCreateLatestSegment(H,Q),Ye=Me.vertexLength;for(let rt=0;rt<se.length;rt++){const mt=se[rt];for(let It=1;It<se[rt].length;It+=2){const St=mt[It-1],Et=mt[It];let Gt=_e[St]<Se,Ct=_e[Et]<Se;Me.vertexLength+((Gt?1:0)+(Ct?1:0))>Rr.MAX_VERTEX_ARRAY_LENGTH&&(Me=V.createNewSegment(H,Q),Se=$e.count,Gt=!0,Ct=!0,Ye=0);const Mt=yc(_e,ee,fe,$e,St,Gt,Me),ht=yc(_e,ee,fe,$e,Et,Ct,Me);Q.emplaceBack(Ye+Mt-Se,Ye+ht-Se),Me.primitiveLength++}}})(w,o,C,y,I,s),n.forceNewSegmentOnNextPrepare(),w?.forceNewSegmentOnNextPrepare()}function yc(s,n,o,d,y,x,w){if(x){const C=d.count;return o(n[2*y],n[2*y+1]),s[y]=d.count,d.count++,w.vertexLength++,C}return s[y]}class dd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ze,this.indexArray=new Vr,this.indexArray2=new dn,this.programConfigurations=new _o(n.layers,n.zoom),this.segments=new Rr,this.segments2=new Rr,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,d){this.hasPattern=xf("fill",this.layers,o);const y=this.layers[0].layout.get("fill-sort-key"),x=!y.isConstant(),w=[];for(const{feature:C,id:I,index:z,sourceLayerIndex:N}of n){const V=this.layers[0]._featureFilter.needGeometry,H=pc(C,V);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),H,d))continue;const Q=x?y.evaluate(H,{},d,o.availableImages):void 0,ee={id:I,properties:C.properties,type:C.type,sourceLayerIndex:N,index:z,geometry:V?H.geometry:fc(C),patterns:{},sortKey:Q};w.push(ee)}x&&w.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of w){const{geometry:I,index:z,sourceLayerIndex:N}=C;if(this.hasPattern){const V=ud("fill",this.layers,C,{zoom:this.zoom},o);this.patternFeatures.push(V)}else this.addFeature(C,I,z,d,{},o.subdivisionGranularity);o.featureIndex.insert(n[z].feature,I,z,N,this.index)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}addFeatures(n,o,d){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,o,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ey),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,d,y,x,w){for(const C of Gl(o,500)){const I=_a(C,y,w.fill.getGranularityForZoomLevel(y.z)),z=this.layoutVertexArray;Is(((N,V)=>{z.emplaceBack(N,V)}),this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:x,canonical:y})}}let vl,fd;At("FillBucket",dd,{omit:["layers","patternFeatures"]});var vc={get paint(){return fd=fd||new jn({"fill-antialias":new jt(Ne.paint_fill["fill-antialias"]),"fill-opacity":new Vt(Ne.paint_fill["fill-opacity"]),"fill-color":new Vt(Ne.paint_fill["fill-color"]),"fill-outline-color":new Vt(Ne.paint_fill["fill-outline-color"]),"fill-translate":new jt(Ne.paint_fill["fill-translate"]),"fill-translate-anchor":new jt(Ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new ac(Ne.paint_fill["fill-pattern"])})},get layout(){return vl=vl||new jn({"fill-sort-key":new Vt(Ne.layout_fill["fill-sort-key"])})}};class Sf extends di{constructor(n,o){super(n,vc,o)}recalculate(n,o){super.recalculate(n,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new dd(n)}queryRadius(){return ld(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:o,transform:d,pixelsToTileUnits:y}){return Qi(ch(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,y),o)}isTileClipped(){return!0}}const pd=Jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),mm=Jr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Pf}=pd;class _l{constructor(n,o,d,y,x){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=y,this._values=x,n.readFields(xa,this,o)}loadGeometry(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos,d=[];let y,x=1,w=0,C=0,I=0;for(;n.pos<o;){if(w<=0){const z=n.readVarint();x=7&z,w=z>>3}if(w--,x===1||x===2)C+=n.readSVarint(),I+=n.readSVarint(),x===1&&(y&&d.push(y),y=[]),y&&y.push(new P(C,I));else{if(x!==7)throw new Error(`unknown command ${x}`);y&&y.push(y[0].clone())}}return y&&d.push(y),d}bbox(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos;let d=1,y=0,x=0,w=0,C=1/0,I=-1/0,z=1/0,N=-1/0;for(;n.pos<o;){if(y<=0){const V=n.readVarint();d=7&V,y=V>>3}if(y--,d===1||d===2)x+=n.readSVarint(),w+=n.readSVarint(),x<C&&(C=x),x>I&&(I=x),w<z&&(z=w),w>N&&(N=w);else if(d!==7)throw new Error(`unknown command ${d}`)}return[C,z,I,N]}toGeoJSON(n,o,d){const y=this.extent*Math.pow(2,d),x=this.extent*n,w=this.extent*o,C=this.loadGeometry();function I(H){return[360*(H.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((1-2*(H.y+w)/y)*Math.PI))-90]}function z(H){return H.map(I)}let N;if(this.type===1){const H=[];for(const ee of C)H.push(ee[0]);const Q=z(H);N=H.length===1?{type:"Point",coordinates:Q[0]}:{type:"MultiPoint",coordinates:Q}}else if(this.type===2){const H=C.map(z);N=H.length===1?{type:"LineString",coordinates:H[0]}:{type:"MultiLineString",coordinates:H}}else{if(this.type!==3)throw new Error("unknown feature type");{const H=(function(ee){const se=ee.length;if(se<=1)return[ee];const fe=[];let _e,$e;for(let Se=0;Se<se;Se++){const Me=_c(ee[Se]);Me!==0&&($e===void 0&&($e=Me<0),$e===Me<0?(_e&&fe.push(_e),_e=[ee[Se]]):_e&&_e.push(ee[Se]))}return _e&&fe.push(_e),fe})(C),Q=[];for(const ee of H)Q.push(ee.map(z));N=Q.length===1?{type:"Polygon",coordinates:Q[0]}:{type:"MultiPolygon",coordinates:Q}}}const V={type:"Feature",geometry:N,properties:this.properties};return this.id!=null&&(V.id=this.id),V}}function xa(s,n,o){s===1?n.id=o.readVarint():s===2?(function(d,y){const x=d.readVarint()+d.pos;for(;d.pos<x;){const w=y._keys[d.readVarint()],C=y._values[d.readVarint()];y.properties[w]=C}})(o,n):s===3?n.type=o.readVarint():s===4&&(n._geometry=o.pos)}function _c(s){let n=0;for(let o,d,y=0,x=s.length,w=x-1;y<x;w=y++)o=s[y],d=s[w],n+=(d.x-o.x)*(o.y+d.y);return n}_l.types=["Unknown","Point","LineString","Polygon"];class xo{constructor(n,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(za,this,o),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];const o=this._pbf.readVarint()+this._pbf.pos;return new _l(this._pbf,o,this.extent,this._keys,this._values)}}function za(s,n,o){s===15?n.version=o.readVarint():s===1?n.name=o.readString():s===5?n.extent=o.readVarint():s===2?n._features.push(o.pos):s===3?n._keys.push(o.readString()):s===4&&n._values.push((function(d){let y=null;const x=d.readVarint()+d.pos;for(;d.pos<x;){const w=d.readVarint()>>3;y=w===1?d.readString():w===2?d.readFloat():w===3?d.readDouble():w===4?d.readVarint64():w===5?d.readVarint():w===6?d.readSVarint():w===7?d.readBoolean():null}if(y==null)throw new Error("unknown feature value");return y})(o))}class gm{constructor(n,o){this.layers=n.readFields(ym,{},o)}}function ym(s,n,o){if(s===3){const d=new xo(o,o.readVarint()+o.pos);d.length&&(n[d.name]=d)}}const md=Math.pow(2,13);function gd(s,n,o,d,y,x,w,C){s.emplaceBack(n,o,2*Math.floor(d*md)+w,y*md*2,x*md*2,Math.round(C))}class Os{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new et,this.centroidVertexArray=new He,this.indexArray=new Vr,this.programConfigurations=new _o(n.layers,n.zoom),this.segments=new Rr,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,d){this.features=[],this.hasPattern=xf("fill-extrusion",this.layers,o);for(const{feature:y,id:x,index:w,sourceLayerIndex:C}of n){const I=this.layers[0]._featureFilter.needGeometry,z=pc(y,I);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),z,d))continue;const N={id:x,sourceLayerIndex:C,index:w,geometry:I?z.geometry:fc(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(ud("fill-extrusion",this.layers,N,{zoom:this.zoom},o)):this.addFeature(N,N.geometry,w,d,{},o.subdivisionGranularity),o.featureIndex.insert(y,N.geometry,w,C,this.index,!0)}}addFeatures(n,o,d){for(const y of this.features){const{geometry:x}=y;this.addFeature(y,x,y.index,o,d,n.subdivisionGranularity)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Pf),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,mm.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,o,d,y,x,w){for(const C of Gl(o,500)){const I={x:0,y:0,sampleCount:0},z=this.layoutVertexArray.length;this.processPolygon(I,y,n,C,w);const N=this.layoutVertexArray.length-z,V=Math.floor(I.x/I.sampleCount),H=Math.floor(I.y/I.sampleCount);for(let Q=0;Q<N;Q++)this.centroidVertexArray.emplaceBack(V,H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:x,canonical:y})}processPolygon(n,o,d,y,x){if(y.length<1||xc(y[0]))return;for(const V of y)V.length!==0&&ay(n,V);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=x.fill.getGranularityForZoomLevel(o.z),I=_l.types[d.type]==="Polygon";for(const V of y){if(V.length===0||xc(V))continue;const H=yl(V,C,I);this._generateSideFaces(H,w)}if(!I)return;const z=_a(y,o,C,!1),N=this.layoutVertexArray;Is(((V,H)=>{gd(N,V,H,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles)}_generateSideFaces(n,o){let d=0;for(let y=1;y<n.length;y++){const x=n[y],w=n[y-1];if(vm(x,w))continue;o.segment.vertexLength+4>Rr.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=x.sub(w)._perp()._unit(),I=w.dist(x);d+I>32768&&(d=0),gd(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,0,d),gd(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,1,d),d+=I,gd(this.layoutVertexArray,w.x,w.y,C.x,C.y,0,0,d),gd(this.layoutVertexArray,w.x,w.y,C.x,C.y,0,1,d);const z=o.segment.vertexLength;this.indexArray.emplaceBack(z,z+2,z+1),this.indexArray.emplaceBack(z+1,z+2,z+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function ay(s,n){for(let o=0;o<n.length;o++){const d=n[o];o===n.length-1&&n[0].x===d.x&&n[0].y===d.y||(s.x+=d.x,s.y+=d.y,s.sampleCount++)}}function vm(s,n){return s.x===n.x&&(s.x<0||s.x>tt)||s.y===n.y&&(s.y<0||s.y>tt)}function xc(s){return s.every((n=>n.x<0))||s.every((n=>n.x>tt))||s.every((n=>n.y<0))||s.every((n=>n.y>tt))}let Tf;At("FillExtrusionBucket",Os,{omit:["layers","features"]});var gu={get paint(){return Tf=Tf||new jn({"fill-extrusion-opacity":new jt(Ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vt(Ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt(Ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt(Ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ac(Ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vt(Ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vt(Ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt(Ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class oy extends di{constructor(n,o){super(n,gu,o)}createBucket(n){return new Os(n)}queryRadius(){return ld(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:y,transform:x,pixelsToTileUnits:w,pixelPosMatrix:C}){const I=ch(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,w),z=this.paint.get("fill-extrusion-height").evaluate(o,d),N=this.paint.get("fill-extrusion-base").evaluate(o,d),V=(function(Q,ee){const se=[];for(const fe of Q){const _e=[fe.x,fe.y,0,1];ot(_e,_e,ee),se.push(new P(_e[0]/_e[3],_e[1]/_e[3]))}return se})(I,C),H=(function(Q,ee,se,fe){const _e=[],$e=[],Se=fe[8]*ee,Me=fe[9]*ee,Ye=fe[10]*ee,rt=fe[11]*ee,mt=fe[8]*se,It=fe[9]*se,St=fe[10]*se,Et=fe[11]*se;for(const Gt of Q){const Ct=[],Mt=[];for(const ht of Gt){const or=ht.x,hr=ht.y,Qt=fe[0]*or+fe[4]*hr+fe[12],Bt=fe[1]*or+fe[5]*hr+fe[13],Dr=fe[2]*or+fe[6]*hr+fe[14],Un=fe[3]*or+fe[7]*hr+fe[15],fi=Dr+Ye,ra=Un+rt,Zo=Qt+mt,Qa=Bt+It,Fi=Dr+St,En=Un+Et,Pi=new P((Qt+Se)/ra,(Bt+Me)/ra);Pi.z=fi/ra,Ct.push(Pi);const $i=new P(Zo/En,Qa/En);$i.z=Fi/En,Mt.push($i)}_e.push(Ct),$e.push(Mt)}return[_e,$e]})(y,N,z,C);return(function(Q,ee,se){let fe=1/0;Qi(se,ee)&&(fe=Af(se,ee[0]));for(let _e=0;_e<ee.length;_e++){const $e=ee[_e],Se=Q[_e];for(let Me=0;Me<$e.length-1;Me++){const Ye=$e[Me],rt=[Ye,$e[Me+1],Se[Me+1],Se[Me],Ye];qg(se,rt)&&(fe=Math.min(fe,Af(se,rt)))}}return fe!==1/0&&fe})(H[0],H[1],V)}}function mh(s,n){return s.x*n.x+s.y*n.y}function Af(s,n){if(s.length===1){let o=0;const d=n[o++];let y;for(;!y||d.equals(y);)if(y=n[o++],!y)return 1/0;for(;o<n.length;o++){const x=n[o],w=s[0],C=y.sub(d),I=x.sub(d),z=w.sub(d),N=mh(C,C),V=mh(C,I),H=mh(I,I),Q=mh(z,C),ee=mh(z,I),se=N*H-V*V,fe=(H*Q-V*ee)/se,_e=(N*ee-V*Q)/se,$e=d.z*(1-fe-_e)+y.z*fe+x.z*_e;if(isFinite($e))return $e}return 1/0}{let o=1/0;for(const d of n)o=Math.min(o,d.z);return o}}const Cf=Jr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:D_}=Cf,z_=Jr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:sy}=z_,ly=Math.cos(Math.PI/180*37.5),bc=Math.pow(2,14)/.5;class _m{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((o=>{this.gradients[o.id]={}})),this.layoutVertexArray=new Pt,this.layoutVertexArray2=new wt,this.indexArray=new Vr,this.programConfigurations=new _o(n.layers,n.zoom),this.segments=new Rr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,d){this.hasPattern=xf("line",this.layers,o);const y=this.layers[0].layout.get("line-sort-key"),x=!y.isConstant(),w=[];for(const{feature:C,id:I,index:z,sourceLayerIndex:N}of n){const V=this.layers[0]._featureFilter.needGeometry,H=pc(C,V);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),H,d))continue;const Q=x?y.evaluate(H,{},d):void 0,ee={id:I,properties:C.properties,type:C.type,sourceLayerIndex:N,index:z,geometry:V?H.geometry:fc(C),patterns:{},sortKey:Q};w.push(ee)}x&&w.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of w){const{geometry:I,index:z,sourceLayerIndex:N}=C;if(this.hasPattern){const V=ud("line",this.layers,C,{zoom:this.zoom},o);this.patternFeatures.push(V)}else this.addFeature(C,I,z,d,{},o.subdivisionGranularity);o.featureIndex.insert(n[z].feature,I,z,N,this.index)}}update(n,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:d})}addFeatures(n,o,d){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,o,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,sy)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,D_),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,d,y,x,w){const C=this.layers[0].layout,I=C.get("line-join").evaluate(n,{}),z=C.get("line-cap"),N=C.get("line-miter-limit"),V=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const H of o)this.addLine(H,n,I,z,N,V,y,w);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{imagePositions:x,canonical:y})}addLine(n,o,d,y,x,w,C,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=yl(n,C?I.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Se=0;Se<n.length-1;Se++)this.totalDistance+=n[Se].dist(n[Se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=_l.types[o.type]==="Polygon";let N=n.length;for(;N>=2&&n[N-1].equals(n[N-2]);)N--;let V=0;for(;V<N-1&&n[V].equals(n[V+1]);)V++;if(N<(z?3:2))return;d==="bevel"&&(x=1.05);const H=this.overscaling<=16?122880/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let ee,se,fe,_e,$e;this.e1=this.e2=-1,z&&(ee=n[N-2],$e=n[V].sub(ee)._unit()._perp());for(let Se=V;Se<N;Se++){if(fe=Se===N-1?z?n[V+1]:void 0:n[Se+1],fe&&n[Se].equals(fe))continue;$e&&(_e=$e),ee&&(se=ee),ee=n[Se],$e=fe?fe.sub(ee)._unit()._perp():_e,_e=_e||$e;let Me=_e.add($e);Me.x===0&&Me.y===0||Me._unit();const Ye=_e.x*$e.x+_e.y*$e.y,rt=Me.x*$e.x+Me.y*$e.y,mt=rt!==0?1/rt:1/0,It=2*Math.sqrt(2-2*rt),St=rt<ly&&se&&fe,Et=_e.x*$e.y-_e.y*$e.x>0;if(St&&Se>V){const Mt=ee.dist(se);if(Mt>2*H){const ht=ee.sub(ee.sub(se)._mult(H/Mt)._round());this.updateDistance(se,ht),this.addCurrentVertex(ht,_e,0,0,Q),se=ht}}const Gt=se&&fe;let Ct=Gt?d:z?"butt":y;if(Gt&&Ct==="round"&&(mt<w?Ct="miter":mt<=2&&(Ct="fakeround")),Ct==="miter"&&mt>x&&(Ct="bevel"),Ct==="bevel"&&(mt>2&&(Ct="flipbevel"),mt<x&&(Ct="miter")),se&&this.updateDistance(se,ee),Ct==="miter")Me._mult(mt),this.addCurrentVertex(ee,Me,0,0,Q);else if(Ct==="flipbevel"){if(mt>100)Me=$e.mult(-1);else{const Mt=mt*_e.add($e).mag()/_e.sub($e).mag();Me._perp()._mult(Mt*(Et?-1:1))}this.addCurrentVertex(ee,Me,0,0,Q),this.addCurrentVertex(ee,Me.mult(-1),0,0,Q)}else if(Ct==="bevel"||Ct==="fakeround"){const Mt=-Math.sqrt(mt*mt-1),ht=Et?Mt:0,or=Et?0:Mt;if(se&&this.addCurrentVertex(ee,_e,ht,or,Q),Ct==="fakeround"){const hr=Math.round(180*It/Math.PI/20);for(let Qt=1;Qt<hr;Qt++){let Bt=Qt/hr;if(Bt!==.5){const Un=Bt-.5;Bt+=Bt*Un*(Bt-1)*((1.0904+Ye*(Ye*(3.55645-1.43519*Ye)-3.2452))*Un*Un+(.848013+Ye*(.215638*Ye-1.06021)))}const Dr=$e.sub(_e)._mult(Bt)._add(_e)._unit()._mult(Et?-1:1);this.addHalfVertex(ee,Dr.x,Dr.y,!1,Et,0,Q)}}fe&&this.addCurrentVertex(ee,$e,-ht,-or,Q)}else if(Ct==="butt")this.addCurrentVertex(ee,Me,0,0,Q);else if(Ct==="square"){const Mt=se?1:-1;this.addCurrentVertex(ee,Me,Mt,Mt,Q)}else Ct==="round"&&(se&&(this.addCurrentVertex(ee,_e,0,0,Q),this.addCurrentVertex(ee,_e,1,1,Q,!0)),fe&&(this.addCurrentVertex(ee,$e,-1,-1,Q,!0),this.addCurrentVertex(ee,$e,0,0,Q)));if(St&&Se<N-1){const Mt=ee.dist(fe);if(Mt>2*H){const ht=ee.add(fe.sub(ee)._mult(H/Mt)._round());this.updateDistance(ee,ht),this.addCurrentVertex(ht,$e,0,0,Q),ee=ht}}}}addCurrentVertex(n,o,d,y,x,w=!1){const C=o.y*y-o.x,I=-o.y-o.x*y;this.addHalfVertex(n,o.x+o.y*d,o.y-o.x*d,w,!1,d,x),this.addHalfVertex(n,C,I,w,!0,-y,x),this.distance>bc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,o,d,y,x,w))}addHalfVertex({x:n,y:o},d,y,x,w,C,I){const z=.5*(this.lineClips?this.scaledDistance*(bc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(x?1:0),(o<<1)+(w?1:0),Math.round(63*d)+128,Math.round(63*y)+128,1+(C===0?0:C<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),I.primitiveLength++),w?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}}let yu,xm;At("LineBucket",_m,{omit:["layers","patternFeatures"]});var Fn={get paint(){return xm=xm||new jn({"line-opacity":new Vt(Ne.paint_line["line-opacity"]),"line-color":new Vt(Ne.paint_line["line-color"]),"line-translate":new jt(Ne.paint_line["line-translate"]),"line-translate-anchor":new jt(Ne.paint_line["line-translate-anchor"]),"line-width":new Vt(Ne.paint_line["line-width"]),"line-gap-width":new Vt(Ne.paint_line["line-gap-width"]),"line-offset":new Vt(Ne.paint_line["line-offset"]),"line-blur":new Vt(Ne.paint_line["line-blur"]),"line-dasharray":new cu(Ne.paint_line["line-dasharray"]),"line-pattern":new ac(Ne.paint_line["line-pattern"]),"line-gradient":new oc(Ne.paint_line["line-gradient"])})},get layout(){return yu=yu||new jn({"line-cap":new jt(Ne.layout_line["line-cap"]),"line-join":new Vt(Ne.layout_line["line-join"]),"line-miter-limit":new jt(Ne.layout_line["line-miter-limit"]),"line-round-limit":new jt(Ne.layout_line["line-round-limit"]),"line-sort-key":new Vt(Ne.layout_line["line-sort-key"])})}};class j_ extends Vt{possiblyEvaluate(n,o){return o=new Gr(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(n,o)}evaluate(n,o,d,y){return o=tr({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(n,o,d,y)}}let yd;class L_ extends di{constructor(n,o){super(n,Fn,o),this.gradientVersion=0,yd||(yd=new j_(Fn.paint.properties["line-width"].specification),yd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!(function(d){return d._styleExpression!==void 0})(o)&&o._styleExpression.expression instanceof sn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,o){super.recalculate(n,o),this.paint._values["line-floorwidth"]=yd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new _m(n)}queryRadius(n){const o=n,d=cy(fu("line-width",this,o),fu("line-gap-width",this,o)),y=fu("line-offset",this,o);return d/2+Math.abs(y)+ld(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:d,geometry:y,transform:x,pixelsToTileUnits:w}){const C=ch(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,w),I=w/2*cy(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),z=this.paint.get("line-offset").evaluate(o,d);return z&&(y=(function(N,V){const H=[];for(let Q=0;Q<N.length;Q++){const ee=N[Q],se=[];for(let fe=0;fe<ee.length;fe++){const _e=ee[fe-1],$e=ee[fe],Se=ee[fe+1],Me=fe===0?new P(0,0):$e.sub(_e)._unit()._perp(),Ye=fe===ee.length-1?new P(0,0):Se.sub($e)._unit()._perp(),rt=Me._add(Ye)._unit(),mt=rt.x*Ye.x+rt.y*Ye.y;mt!==0&&rt._mult(1/mt),se.push(rt._mult(V)._add($e))}H.push(se)}return H})(y,z*w)),(function(N,V,H){for(let Q=0;Q<V.length;Q++){const ee=V[Q];if(N.length>=3){for(let se=0;se<ee.length;se++)if(du(N,ee[se]))return!0}if(Gg(N,ee,H))return!0}return!1})(C,y,I)}isTileClipped(){return!0}}function cy(s,n){return n>0?n+2*s:s}const uy=Jr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hy=Jr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Jr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const N_=Jr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Jr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ja=Jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),bm=Jr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function B_(s,n,o){return s.sections.forEach((d=>{d.text=(function(y,x,w){const C=x.layout.get("text-transform").evaluate(w,{});return C==="uppercase"?y=y.toLocaleUpperCase():C==="lowercase"&&(y=y.toLocaleLowerCase()),da.applyArabicShaping&&(y=da.applyArabicShaping(y)),y})(d.text,n,o)})),s}Jr([{name:"triangle",components:3,type:"Uint16"}]),Jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Jr([{type:"Float32",name:"offsetX"}]),Jr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Jr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const bo={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var $n=24;const xl=4294967296,vd=1/xl,Ef=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class _d{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,o,d=this.length){for(;this.pos<d;){const y=this.readVarint(),x=y>>3,w=this.pos;this.type=7&y,n(x,o,this),this.pos===w&&this.skip(y)}return o}readMessage(n,o){return this.readFields(n,o,this.readVarint()+this.pos)}readFixed32(){const n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){const n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*xl;return this.pos+=8,n}readSFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*xl;return this.pos+=8,n}readFloat(){const n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){const n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){const o=this.buf;let d,y;return y=o[this.pos++],d=127&y,y<128?d:(y=o[this.pos++],d|=(127&y)<<7,y<128?d:(y=o[this.pos++],d|=(127&y)<<14,y<128?d:(y=o[this.pos++],d|=(127&y)<<21,y<128?d:(y=o[this.pos],d|=(15&y)<<28,(function(x,w,C){const I=C.buf;let z,N;if(N=I[C.pos++],z=(112&N)>>4,N<128||(N=I[C.pos++],z|=(127&N)<<3,N<128)||(N=I[C.pos++],z|=(127&N)<<10,N<128)||(N=I[C.pos++],z|=(127&N)<<17,N<128)||(N=I[C.pos++],z|=(127&N)<<24,N<128)||(N=I[C.pos++],z|=(1&N)<<31,N<128))return gh(x,z,w);throw new Error("Expected varint not more than 10 bytes")})(d,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){const n=this.readVarint()+this.pos,o=this.pos;return this.pos=n,n-o>=12&&Ef?Ef.decode(this.buf.subarray(o,n)):(function(d,y,x){let w="",C=y;for(;C<x;){const I=d[C];let z,N,V,H=null,Q=I>239?4:I>223?3:I>191?2:1;if(C+Q>x)break;Q===1?I<128&&(H=I):Q===2?(z=d[C+1],(192&z)==128&&(H=(31&I)<<6|63&z,H<=127&&(H=null))):Q===3?(z=d[C+1],N=d[C+2],(192&z)==128&&(192&N)==128&&(H=(15&I)<<12|(63&z)<<6|63&N,(H<=2047||H>=55296&&H<=57343)&&(H=null))):Q===4&&(z=d[C+1],N=d[C+2],V=d[C+3],(192&z)==128&&(192&N)==128&&(192&V)==128&&(H=(15&I)<<18|(63&z)<<12|(63&N)<<6|63&V,(H<=65535||H>=1114112)&&(H=null))),H===null?(H=65533,Q=1):H>65535&&(H-=65536,w+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),w+=String.fromCharCode(H),C+=Q}return w})(this.buf,o,n)}readBytes(){const n=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,n);return this.pos=n,o}readPackedVarint(n=[],o){const d=this.readPackedEnd();for(;this.pos<d;)n.push(this.readVarint(o));return n}readPackedSVarint(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFloat());return n}readPackedDouble(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){const o=7&n;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(n,o){this.writeVarint(n<<3|o)}realloc(n){let o=this.length||16;for(;o<this.pos+n;)o*=2;if(o!==this.length){const d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.dataView=new DataView(d.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*vd),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*vd),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?(function(o,d){let y,x;if(o>=0?(y=o%4294967296|0,x=o/4294967296|0):(y=~(-o%4294967296),x=~(-o/4294967296),4294967295^y?y=y+1|0:(y=0,x=x+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(w,C,I){I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,I.buf[I.pos]=127&(w>>>=7)})(y,0,d),(function(w,C){const I=(7&w)<<4;C.buf[C.pos++]|=I|((w>>>=3)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w)))))})(x,d)})(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;const o=this.pos;this.pos=(function(y,x,w){for(let C,I,z=0;z<x.length;z++){if(C=x.charCodeAt(z),C>55295&&C<57344){if(!I){C>56319||z+1===x.length?(y[w++]=239,y[w++]=191,y[w++]=189):I=C;continue}if(C<56320){y[w++]=239,y[w++]=191,y[w++]=189,I=C;continue}C=I-55296<<10|C-56320|65536,I=null}else I&&(y[w++]=239,y[w++]=191,y[w++]=189,I=null);C<128?y[w++]=C:(C<2048?y[w++]=C>>6|192:(C<65536?y[w++]=C>>12|224:(y[w++]=C>>18|240,y[w++]=C>>12&63|128),y[w++]=C>>6&63|128),y[w++]=63&C|128)}return w})(this.buf,n,this.pos);const d=this.pos-o;d>=128&&Mf(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){const o=n.length;this.writeVarint(o),this.realloc(o);for(let d=0;d<o;d++)this.buf[this.pos++]=n[d]}writeRawMessage(n,o){this.pos++;const d=this.pos;n(o,this);const y=this.pos-d;y>=128&&Mf(d,y,this),this.pos=d-1,this.writeVarint(y),this.pos+=y}writeMessage(n,o,d){this.writeTag(n,2),this.writeRawMessage(o,d)}writePackedVarint(n,o){o.length&&this.writeMessage(n,F_,o)}writePackedSVarint(n,o){o.length&&this.writeMessage(n,dy,o)}writePackedBoolean(n,o){o.length&&this.writeMessage(n,If,o)}writePackedFloat(n,o){o.length&&this.writeMessage(n,fy,o)}writePackedDouble(n,o){o.length&&this.writeMessage(n,kf,o)}writePackedFixed32(n,o){o.length&&this.writeMessage(n,py,o)}writePackedSFixed32(n,o){o.length&&this.writeMessage(n,wm,o)}writePackedFixed64(n,o){o.length&&this.writeMessage(n,$_,o)}writePackedSFixed64(n,o){o.length&&this.writeMessage(n,my,o)}writeBytesField(n,o){this.writeTag(n,2),this.writeBytes(o)}writeFixed32Field(n,o){this.writeTag(n,5),this.writeFixed32(o)}writeSFixed32Field(n,o){this.writeTag(n,5),this.writeSFixed32(o)}writeFixed64Field(n,o){this.writeTag(n,1),this.writeFixed64(o)}writeSFixed64Field(n,o){this.writeTag(n,1),this.writeSFixed64(o)}writeVarintField(n,o){this.writeTag(n,0),this.writeVarint(o)}writeSVarintField(n,o){this.writeTag(n,0),this.writeSVarint(o)}writeStringField(n,o){this.writeTag(n,2),this.writeString(o)}writeFloatField(n,o){this.writeTag(n,5),this.writeFloat(o)}writeDoubleField(n,o){this.writeTag(n,1),this.writeDouble(o)}writeBooleanField(n,o){this.writeVarintField(n,+o)}}function gh(s,n,o){return o?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function Mf(s,n,o){const d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(d);for(let y=o.pos-1;y>=s;y--)o.buf[y+d]=o.buf[y]}function F_(s,n){for(let o=0;o<s.length;o++)n.writeVarint(s[o])}function dy(s,n){for(let o=0;o<s.length;o++)n.writeSVarint(s[o])}function fy(s,n){for(let o=0;o<s.length;o++)n.writeFloat(s[o])}function kf(s,n){for(let o=0;o<s.length;o++)n.writeDouble(s[o])}function If(s,n){for(let o=0;o<s.length;o++)n.writeBoolean(s[o])}function py(s,n){for(let o=0;o<s.length;o++)n.writeFixed32(s[o])}function wm(s,n){for(let o=0;o<s.length;o++)n.writeSFixed32(s[o])}function $_(s,n){for(let o=0;o<s.length;o++)n.writeFixed64(s[o])}function my(s,n){for(let o=0;o<s.length;o++)n.writeSFixed64(s[o])}function Sm(s,n,o){s===1&&o.readMessage(Of,n)}function Of(s,n,o){if(s===3){const{id:d,bitmap:y,width:x,height:w,left:C,top:I,advance:z}=o.readMessage(Pm,{});n.push({id:d,bitmap:new si({width:x+6,height:w+6},y),metrics:{width:x,height:w,left:C,top:I,advance:z}})}}function Pm(s,n,o){s===1?n.id=o.readVarint():s===2?n.bitmap=o.readBytes():s===3?n.width=o.readVarint():s===4?n.height=o.readVarint():s===5?n.left=o.readSVarint():s===6?n.top=o.readSVarint():s===7&&(n.advance=o.readVarint())}function xd(s){let n=0,o=0;for(const w of s)n+=w.w*w.h,o=Math.max(o,w.w);s.sort(((w,C)=>C.h-w.h));const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let y=0,x=0;for(const w of s)for(let C=d.length-1;C>=0;C--){const I=d[C];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,x=Math.max(x,w.y+w.h),y=Math.max(y,w.x+w.w),w.w===I.w&&w.h===I.h){const z=d.pop();z&&C<d.length&&(d[C]=z)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(d.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:y,h:x,fill:n/(y*x)||0}}class Rf{constructor(n,{pixelRatio:o,version:d,stretchX:y,stretchY:x,content:w,textFitWidth:C,textFitHeight:I}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=y,this.stretchY=x,this.content=w,this.version=d,this.textFitWidth=C,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class gy{constructor(n,o){const d={},y={};this.haveRenderCallbacks=[];const x=[];this.addImages(n,d,x),this.addImages(o,y,x);const{w,h:C}=xd(x),I=new ya({width:w||1,height:C||1});for(const z in n){const N=n[z],V=d[z].paddedRect;ya.copy(N.data,I,{x:0,y:0},{x:V.x+1,y:V.y+1},N.data)}for(const z in o){const N=o[z],V=y[z].paddedRect,H=V.x+1,Q=V.y+1,ee=N.data.width,se=N.data.height;ya.copy(N.data,I,{x:0,y:0},{x:H,y:Q},N.data),ya.copy(N.data,I,{x:0,y:se-1},{x:H,y:Q-1},{width:ee,height:1}),ya.copy(N.data,I,{x:0,y:0},{x:H,y:Q+se},{width:ee,height:1}),ya.copy(N.data,I,{x:ee-1,y:0},{x:H-1,y:Q},{width:1,height:se}),ya.copy(N.data,I,{x:0,y:0},{x:H+ee,y:Q},{width:1,height:se})}this.image=I,this.iconPositions=d,this.patternPositions=y}addImages(n,o,d){for(const y in n){const x=n[y],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};d.push(w),o[y]=new Rf(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(n,o){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),o),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),o)}patchUpdatedImage(n,o,d){if(!n||!o||n.version===o.version)return;n.version=o.version;const[y,x]=n.tl;d.update(o.data,void 0,{x:y,y:x})}}var Go;At("ImagePosition",Rf),At("ImageAtlas",gy),p.ao=void 0,(Go=p.ao||(p.ao={}))[Go.none=0]="none",Go[Go.horizontal=1]="horizontal",Go[Go.vertical=2]="vertical",Go[Go.horizontalOnly=3]="horizontalOnly";class bd{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,o,d){const y=new bd;return y.scale=n||1,y.fontStack=o,y.verticalAlign=d||"bottom",y}static forImage(n,o){const d=new bd;return d.imageName=n,d.verticalAlign=o||"bottom",d}}class Rs{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const d=new Rs;for(let y=0;y<n.sections.length;y++){const x=n.sections[y];x.image?d.addImageSection(x):d.addTextSection(x,o)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=(function(n){let o="";for(let d=0;d<n.length;d++){const y=n.charCodeAt(d+1)||null,x=n.charCodeAt(d-1)||null;o+=y&&ou(y)&&!bo[n[d+1]]||x&&ou(x)&&!bo[n[d-1]]||!bo[n[d]]?n[d]:bo[n[d]]}return o})(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&vu[this.text.charCodeAt(d)];d++)n++;let o=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&vu[this.text.charCodeAt(d)];d--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const d=new Rs;return d.text=this.text.substring(n,o),d.sectionIndex=this.sectionIndex.slice(n,o),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((n,o)=>Math.max(n,this.sections[o].scale)),0)}getMaxImageSize(n){let o=0,d=0;for(let y=0;y<this.length();y++){const x=this.getSection(y);if(x.imageName){const w=n[x.imageName];if(!w)continue;const C=w.displaySize;o=Math.max(o,C[0]),d=Math.max(d,C[1])}}return{maxImageWidth:o,maxImageHeight:d}}addTextSection(n,o){this.text+=n.text,this.sections.push(bd.forText(n.scale,n.fontStack||o,n.verticalAlign));const d=this.sections.length-1;for(let y=0;y<n.text.length;++y)this.sectionIndex.push(d)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void rr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(bd.forImage(o,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):rr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Df(s,n,o,d,y,x,w,C,I,z,N,V,H,Q,ee){const se=Rs.fromFeature(s,y);let fe;V===p.ao.vertical&&se.verticalizePunctuation();const{processBidirectionalText:_e,processStyledBidirectionalText:$e}=da;if(_e&&se.sections.length===1){fe=[];const Ye=_e(se.toString(),Pe(se,z,x,n,d,Q));for(const rt of Ye){const mt=new Rs;mt.text=rt,mt.sections=se.sections;for(let It=0;It<rt.length;It++)mt.sectionIndex.push(0);fe.push(mt)}}else if($e){fe=[];const Ye=$e(se.text,se.sectionIndex,Pe(se,z,x,n,d,Q));for(const rt of Ye){const mt=new Rs;mt.text=rt[0],mt.sectionIndex=rt[1],mt.sections=se.sections,fe.push(mt)}}else fe=(function(Ye,rt){const mt=[],It=Ye.text;let St=0;for(const Et of rt)mt.push(Ye.substring(St,Et)),St=Et;return St<It.length&&mt.push(Ye.substring(St,It.length)),mt})(se,Pe(se,z,x,n,d,Q));const Se=[],Me={positionedLines:Se,text:se.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return(function(Ye,rt,mt,It,St,Et,Gt,Ct,Mt,ht,or,hr){let Qt=0,Bt=0,Dr=0,Un=0;const fi=Ct==="right"?1:Ct==="left"?0:.5,ra=$n/hr;let Zo=0;for(const En of St){En.trim();const Pi=En.getMaxScale(),$i={positionedGlyphs:[],lineOffset:0};Ye.positionedLines[Zo]=$i;const Ui=$i.positionedGlyphs;let ja=0;if(!En.length()){Bt+=Et,++Zo;continue}const Ho=it(It,En,ra);for(let eo=0;eo<En.length();eo++){const pi=En.getSection(eo),Ai=En.getSectionIndex(eo),Ci=En.getCharCode(eo),li=Tt(Mt,or,Ci);let xn;if(pi.imageName){if(Ye.iconsInText=!0,pi.scale=pi.scale*ra,xn=Nt(pi,li,Pi,Ho,It),!xn)continue;ja=Math.max(ja,xn.imageOffset)}else if(xn=xt(pi,Ci,li,Ho,rt,mt),!xn)continue;const{rect:bl,metrics:Lf,baselineOffset:wl}=xn;Ui.push({glyph:Ci,imageName:pi.imageName,x:Qt,y:Bt+wl+-17,vertical:li,scale:pi.scale,fontStack:pi.fontStack,sectionIndex:Ai,metrics:Lf,rect:bl}),li?(Ye.verticalizable=!0,Qt+=(pi.imageName?Lf.advance:$n)*pi.scale+ht):Qt+=Lf.advance*pi.scale+ht}Ui.length!==0&&(Dr=Math.max(Qt-ht,Dr),Zt(Ui,0,Ui.length-1,fi)),Qt=0,$i.lineOffset=Math.max(ja,(Pi-1)*$n);const Ti=Et*Pi+ja;Bt+=Ti,Un=Math.max(Ti,Un),++Zo}const{horizontalAlign:Qa,verticalAlign:Fi}=De(Gt);(function(En,Pi,$i,Ui,ja,Ho,Ti,eo,pi){const Ai=(Pi-$i)*ja;let Ci=0;Ci=Ho!==Ti?-eo*Ui- -17:-Ui*pi*Ti+.5*Ti;for(const li of En)for(const xn of li.positionedGlyphs)xn.x+=Ai,xn.y+=Ci})(Ye.positionedLines,fi,Qa,Fi,Dr,Un,Et,Bt,St.length),Ye.top+=-Fi*Bt,Ye.bottom=Ye.top+Bt,Ye.left+=-Qa*Dr,Ye.right=Ye.left+Dr})(Me,n,o,d,fe,w,C,I,V,z,H,ee),!(function(Ye){for(const rt of Ye)if(rt.positionedGlyphs.length!==0)return!1;return!0})(Se)&&Me}const vu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},h={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},g={40:!0};function S(s,n,o,d,y,x){if(n.imageName){const w=d[n.imageName];return w?w.displaySize[0]*n.scale*$n/x+y:0}{const w=o[n.fontStack],C=w&&w[s];return C?C.metrics.advance*n.scale+y:0}}function M(s,n,o,d){const y=Math.pow(s-n,2);return d?s<n?y/2:2*y:y+Math.abs(o)*o}function B(s,n,o){let d=0;return s===10&&(d-=1e4),o&&(d+=150),s!==40&&s!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function q(s,n,o,d,y,x){let w=null,C=M(n,o,y,x);for(const I of d){const z=M(n-I.x,o,y,x)+I.badness;z<=C&&(w=I,C=z)}return{index:s,x:n,priorBreak:w,badness:C}}function oe(s){return s?oe(s.priorBreak).concat(s.index):[]}function Pe(s,n,o,d,y,x){if(!s)return[];const w=[],C=(function(V,H,Q,ee,se,fe){let _e=0;for(let $e=0;$e<V.length();$e++){const Se=V.getSection($e);_e+=S(V.getCharCode($e),Se,ee,se,H,fe)}return _e/Math.max(1,Math.ceil(_e/Q))})(s,n,o,d,y,x),I=s.text.indexOf("")>=0;let z=0;for(let V=0;V<s.length();V++){const H=s.getSection(V),Q=s.getCharCode(V);if(vu[Q]||(z+=S(Q,H,d,y,n,x)),V<s.length()-1){const ee=!((N=Q)<11904)&&(!!Ar["CJK Compatibility Forms"](N)||!!Ar["CJK Compatibility"](N)||!!Ar["CJK Strokes"](N)||!!Ar["CJK Symbols and Punctuation"](N)||!!Ar["Enclosed CJK Letters and Months"](N)||!!Ar["Halfwidth and Fullwidth Forms"](N)||!!Ar["Ideographic Description Characters"](N)||!!Ar["Vertical Forms"](N)||od.test(String.fromCodePoint(N)));(h[Q]||ee||H.imageName||V!==s.length()-2&&g[s.getCharCode(V+1)])&&w.push(q(V+1,z,C,w,B(Q,s.getCharCode(V+1),ee&&I),!1))}}var N;return oe(q(s.length(),z,C,w,0,!0))}function De(s){let n=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function it(s,n,o){const d=n.getMaxScale()*$n,{maxImageWidth:y,maxImageHeight:x}=n.getMaxImageSize(s),w=Math.max(d,x*o);return{verticalLineContentWidth:Math.max(d,y*o),horizontalLineContentHeight:w}}function bt(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function Tt(s,n,o){return!(s===p.ao.horizontal||!n&&!th(o)||n&&(vu[o]||(d=o,/\p{sc=Arab}/u.test(String.fromCodePoint(d)))));var d}function xt(s,n,o,d,y,x){const w=x[s.fontStack],C=(function(z,N,V,H){if(z&&z.rect)return z;const Q=N[V.fontStack],ee=Q&&Q[H];return ee?{rect:null,metrics:ee.metrics}:null})(w&&w[n],y,s,n);if(C===null)return null;let I;if(o)I=d.verticalLineContentWidth-s.scale*$n;else{const z=bt(s.verticalAlign);I=(d.horizontalLineContentHeight-s.scale*$n)*z}return{rect:C.rect,metrics:C.metrics,baselineOffset:I}}function Nt(s,n,o,d,y){const x=y[s.imageName];if(!x)return null;const w=x.paddedRect,C=x.displaySize,I={width:C[0],height:C[1],left:1,top:-3,advance:n?C[1]:C[0]};let z;if(n)z=d.verticalLineContentWidth-C[1]*s.scale;else{const N=bt(s.verticalAlign);z=(d.horizontalLineContentHeight-C[1]*s.scale)*N}return{rect:w,metrics:I,baselineOffset:z,imageOffset:(n?C[0]:C[1])*s.scale-$n*o}}function Zt(s,n,o,d){if(d===0)return;const y=s[o],x=(s[o].x+y.metrics.advance*y.scale)*d;for(let w=n;w<=o;w++)s[w].x-=x}function Kt(s,n,o){const{horizontalAlign:d,verticalAlign:y}=De(o),x=n[0]-s.displaySize[0]*d,w=n[1]-s.displaySize[1]*y;return{image:s,top:w,bottom:w+s.displaySize[1],left:x,right:x+s.displaySize[0]}}function Zn(s){var n,o;let d=s.left,y=s.top,x=s.right-d,w=s.bottom-y;const C=(n=s.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",I=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",z=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(I==="proportional"){if(C==="stretchOnly"&&x/w<z||C==="proportional"){const N=Math.ceil(w*z);d*=N/x,x=N}}else if(C==="proportional"&&I==="stretchOnly"&&z!==0&&x/w>z){const N=Math.ceil(x/z);y*=N/w,w=N}return{x1:d,y1:y,x2:d+x,y2:y+w}}function Je(s,n,o,d,y,x){const w=s.image;let C;if(w.content){const fe=w.content,_e=w.pixelRatio||1;C=[fe[0]/_e,fe[1]/_e,w.displaySize[0]-fe[2]/_e,w.displaySize[1]-fe[3]/_e]}const I=n.left*x,z=n.right*x;let N,V,H,Q;o==="width"||o==="both"?(Q=y[0]+I-d[3],V=y[0]+z+d[1]):(Q=y[0]+(I+z-w.displaySize[0])/2,V=Q+w.displaySize[0]);const ee=n.top*x,se=n.bottom*x;return o==="height"||o==="both"?(N=y[1]+ee-d[0],H=y[1]+se+d[2]):(N=y[1]+(ee+se-w.displaySize[1])/2,H=N+w.displaySize[1]),{image:w,top:N,right:V,bottom:H,left:Q,collisionPadding:C}}const Be=128,Qe=32640;function kt(s,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Gr(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:y}=o;let x=0;for(;x<d.length&&d[x]<=s;)x++;x=Math.max(0,x-1);let w=x;for(;w<d.length&&d[w]<s+1;)w++;w=Math.min(d.length-1,w);const C=d[x],I=d[w];return o.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:I,interpolationType:y}:{kind:"camera",minZoom:C,maxZoom:I,minSize:o.evaluate(new Gr(C)),maxSize:o.evaluate(new Gr(I)),interpolationType:y}}}function Xt(s,n,o){let d="never";const y=s.get(n);return y?d=y:s.get(o)&&(d="always"),d}const ur=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ar(s,n,o,d,y,x,w,C,I,z,N,V,H){const Q=C?Math.min(Qe,Math.round(C[0])):0,ee=C?Math.min(Qe,Math.round(C[1])):0;s.emplaceBack(n,o,Math.round(32*d),Math.round(32*y),x,w,(Q<<1)+(I?1:0),ee,16*z,16*N,256*V,256*H)}function mr(s,n,o){s.emplaceBack(n.x,n.y,o),s.emplaceBack(n.x,n.y,o),s.emplaceBack(n.x,n.y,o),s.emplaceBack(n.x,n.y,o)}function Si(s){for(const n of s.sections)if(lu(n.text))return!0;return!1}class Wr{constructor(n){this.layoutVertexArray=new Lt,this.indexArray=new Vr,this.programConfigurations=n,this.segments=new Rr,this.dynamicLayoutVertexArray=new vr,this.opacityVertexArray=new Nr,this.hasVisibleVertices=!1,this.placedSymbolArray=new pe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,d,y){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uy.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,hy.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,ur,!0),this.opacityVertexBuffer.itemSize=1),(d||y)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}At("SymbolBuffers",Wr);class Ds{constructor(n,o,d){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new d,this.segments=new Rr,this.collisionVertexArray=new Qr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,N_.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}At("CollisionBuffers",Ds);class yh{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kt(this.zoom,o["text-size"]),this.iconSizeData=kt(this.zoom,o["icon-size"]);const d=this.layers[0].layout,y=d.get("symbol-sort-key"),x=d.get("symbol-z-order");this.canOverlap=Xt(d,"text-overlap","text-allow-overlap")!=="never"||Xt(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map((w=>p.ao[w]))),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=n.sourceID}createArrays(){this.text=new Wr(new _o(this.layers,this.zoom,(n=>/^text/.test(n)))),this.icon=new Wr(new _o(this.layers,this.zoom,(n=>/^icon/.test(n)))),this.glyphOffsetArray=new be,this.lineVertexArray=new ve,this.symbolInstances=new ye,this.textAnchorOffsets=new ke}calculateGlyphDependencies(n,o,d,y,x){for(let w=0;w<n.length;w++)if(o[n.charCodeAt(w)]=!0,(d||y)&&x){const C=bo[n.charAt(w)];C&&(o[C.charCodeAt(0)]=!0)}}populate(n,o,d){const y=this.layers[0],x=y.layout,w=x.get("text-font"),C=x.get("text-field"),I=x.get("icon-image"),z=(C.value.kind!=="constant"||C.value.value instanceof Sn&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),N=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=x.get("symbol-sort-key");if(this.features=[],!z&&!N)return;const H=o.iconDependencies,Q=o.glyphDependencies,ee=o.availableImages,se=new Gr(this.zoom);for(const{feature:fe,id:_e,index:$e,sourceLayerIndex:Se}of n){const Me=y._featureFilter.needGeometry,Ye=pc(fe,Me);if(!y._featureFilter.filter(se,Ye,d))continue;let rt,mt;if(Me||(Ye.geometry=fc(fe)),z){const St=y.getValueAndResolveTokens("text-field",Ye,d,ee),Et=Sn.factory(St),Gt=this.hasRTLText=this.hasRTLText||Si(Et);(!Gt||da.getRTLTextPluginStatus()==="unavailable"||Gt&&da.isParsed())&&(rt=B_(Et,y,Ye))}if(N){const St=y.getValueAndResolveTokens("icon-image",Ye,d,ee);mt=St instanceof sa?St:sa.fromString(St)}if(!rt&&!mt)continue;const It=this.sortFeaturesByKey?V.evaluate(Ye,{},d):void 0;if(this.features.push({id:_e,text:rt,icon:mt,index:$e,sourceLayerIndex:Se,geometry:Ye.geometry,properties:fe.properties,type:_l.types[fe.type],sortKey:It}),mt&&(H[mt.name]=!0),rt){const St=w.evaluate(Ye,{},d).join(","),Et=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.ao.vertical)>=0;for(const Gt of rt.sections)if(Gt.image)H[Gt.image.name]=!0;else{const Ct=au(rt.toString()),Mt=Gt.fontStack||St,ht=Q[Mt]=Q[Mt]||{};this.calculateGlyphDependencies(Gt.text,ht,Et,this.allowVerticalPlacement,Ct)}}}x.get("symbol-placement")==="line"&&(this.features=(function(fe){const _e={},$e={},Se=[];let Me=0;function Ye(St){Se.push(fe[St]),Me++}function rt(St,Et,Gt){const Ct=$e[St];return delete $e[St],$e[Et]=Ct,Se[Ct].geometry[0].pop(),Se[Ct].geometry[0]=Se[Ct].geometry[0].concat(Gt[0]),Ct}function mt(St,Et,Gt){const Ct=_e[Et];return delete _e[Et],_e[St]=Ct,Se[Ct].geometry[0].shift(),Se[Ct].geometry[0]=Gt[0].concat(Se[Ct].geometry[0]),Ct}function It(St,Et,Gt){const Ct=Gt?Et[0][Et[0].length-1]:Et[0][0];return`${St}:${Ct.x}:${Ct.y}`}for(let St=0;St<fe.length;St++){const Et=fe[St],Gt=Et.geometry,Ct=Et.text?Et.text.toString():null;if(!Ct){Ye(St);continue}const Mt=It(Ct,Gt),ht=It(Ct,Gt,!0);if(Mt in $e&&ht in _e&&$e[Mt]!==_e[ht]){const or=mt(Mt,ht,Gt),hr=rt(Mt,ht,Se[or].geometry);delete _e[Mt],delete $e[ht],$e[It(Ct,Se[hr].geometry,!0)]=hr,Se[or].geometry=null}else Mt in $e?rt(Mt,ht,Gt):ht in _e?mt(Mt,ht,Gt):(Ye(St),_e[Mt]=Me-1,$e[ht]=Me-1)}return Se.filter((St=>St.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((fe,_e)=>fe.sortKey-_e.sortKey))}update(n,o,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:d}),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:d}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const d=this.lineVertexArray.length;if(n.segment!==void 0){let y=n.dist(o[n.segment+1]),x=n.dist(o[n.segment]);const w={};for(let C=n.segment+1;C<o.length;C++)w[C]={x:o[C].x,y:o[C].y,tileUnitDistanceFromAnchor:y},C<o.length-1&&(y+=o[C+1].dist(o[C]));for(let C=n.segment||0;C>=0;C--)w[C]={x:o[C].x,y:o[C].y,tileUnitDistanceFromAnchor:x},C>0&&(x+=o[C-1].dist(o[C]));for(let C=0;C<o.length;C++){const I=w[C];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,o,d,y,x,w,C,I,z,N,V,H){const Q=n.indexArray,ee=n.layoutVertexArray,se=n.segments.prepareSegment(4*o.length,ee,Q,this.canOverlap?w.sortKey:void 0),fe=this.glyphOffsetArray.length,_e=se.vertexLength,$e=this.allowVerticalPlacement&&C===p.ao.vertical?Math.PI/2:0,Se=w.text&&w.text.sections;for(let Me=0;Me<o.length;Me++){const{tl:Ye,tr:rt,bl:mt,br:It,tex:St,pixelOffsetTL:Et,pixelOffsetBR:Gt,minFontScaleX:Ct,minFontScaleY:Mt,glyphOffset:ht,isSDF:or,sectionIndex:hr}=o[Me],Qt=se.vertexLength,Bt=ht[1];ar(ee,I.x,I.y,Ye.x,Bt+Ye.y,St.x,St.y,d,or,Et.x,Et.y,Ct,Mt),ar(ee,I.x,I.y,rt.x,Bt+rt.y,St.x+St.w,St.y,d,or,Gt.x,Et.y,Ct,Mt),ar(ee,I.x,I.y,mt.x,Bt+mt.y,St.x,St.y+St.h,d,or,Et.x,Gt.y,Ct,Mt),ar(ee,I.x,I.y,It.x,Bt+It.y,St.x+St.w,St.y+St.h,d,or,Gt.x,Gt.y,Ct,Mt),mr(n.dynamicLayoutVertexArray,I,$e),Q.emplaceBack(Qt,Qt+2,Qt+1),Q.emplaceBack(Qt+1,Qt+2,Qt+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ht[0]),Me!==o.length-1&&hr===o[Me+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,w,w.index,{imagePositions:{},canonical:H,formattedSection:Se&&Se[hr]})}n.placedSymbolArray.emplaceBack(I.x,I.y,fe,this.glyphOffsetArray.length-fe,_e,z,N,I.segment,d?d[0]:0,d?d[1]:0,y[0],y[1],C,0,!1,0,V)}_addCollisionDebugVertex(n,o,d,y,x,w){return o.emplaceBack(0,0),n.emplaceBack(d.x,d.y,y,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(n,o,d,y,x,w,C){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),z=I.vertexLength,N=x.layoutVertexArray,V=x.collisionVertexArray,H=C.anchorX,Q=C.anchorY;this._addCollisionDebugVertex(N,V,w,H,Q,new P(n,o)),this._addCollisionDebugVertex(N,V,w,H,Q,new P(d,o)),this._addCollisionDebugVertex(N,V,w,H,Q,new P(d,y)),this._addCollisionDebugVertex(N,V,w,H,Q,new P(n,y)),I.vertexLength+=4;const ee=x.indexArray;ee.emplaceBack(z,z+1),ee.emplaceBack(z+1,z+2),ee.emplaceBack(z+2,z+3),ee.emplaceBack(z+3,z),I.primitiveLength+=4}addDebugCollisionBoxes(n,o,d,y){for(let x=n;x<o;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,y?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ds(hn,Ja.members,dn),this.iconCollisionBox=new Ds(hn,Ja.members,dn);for(let n=0;n<this.symbolInstances.length;n++){const o=this.symbolInstances.get(n);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(n,o,d,y,x,w,C,I,z){const N={};for(let V=o;V<d;V++){const H=n.get(V);N.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},N.textFeatureIndex=H.featureIndex;break}for(let V=y;V<x;V++){const H=n.get(V);N.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},N.verticalTextFeatureIndex=H.featureIndex;break}for(let V=w;V<C;V++){const H=n.get(V);N.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},N.iconFeatureIndex=H.featureIndex;break}for(let V=I;V<z;V++){const H=n.get(V);N.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},N.verticalIconFeatureIndex=H.featureIndex;break}return N}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const d=n.placedSymbolArray.get(o),y=d.vertexStartIndex+4*d.numGlyphs;for(let x=d.vertexStartIndex;x<y;x+=4)n.indexArray.emplaceBack(x,x+2,x+1),n.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),d=Math.cos(n),y=[],x=[],w=[];for(let C=0;C<this.symbolInstances.length;++C){w.push(C);const I=this.symbolInstances.get(C);y.push(0|Math.round(o*I.anchorX+d*I.anchorY)),x.push(I.featureIndex)}return w.sort(((C,I)=>y[C]-y[I]||x[I]-x[C])),w}addToSortKeyRanges(n,o){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===o?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const d=this.symbolInstances.get(o);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach(((y,x,w)=>{y>=0&&w.indexOf(y)===x&&this.addIndicesForPlacedSymbol(this.text,y)})),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let rP,nP;At("SymbolBucket",yh,{omit:["layers","collisionBoxArray","features","compareText"]}),yh.MAX_GLYPHS=65535,yh.addDynamicAttributes=mr;var U_={get paint(){return nP=nP||new jn({"icon-opacity":new Vt(Ne.paint_symbol["icon-opacity"]),"icon-color":new Vt(Ne.paint_symbol["icon-color"]),"icon-halo-color":new Vt(Ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vt(Ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vt(Ne.paint_symbol["icon-halo-blur"]),"icon-translate":new jt(Ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt(Ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vt(Ne.paint_symbol["text-opacity"]),"text-color":new Vt(Ne.paint_symbol["text-color"],{runtimeType:ii,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Vt(Ne.paint_symbol["text-halo-color"]),"text-halo-width":new Vt(Ne.paint_symbol["text-halo-width"]),"text-halo-blur":new Vt(Ne.paint_symbol["text-halo-blur"]),"text-translate":new jt(Ne.paint_symbol["text-translate"]),"text-translate-anchor":new jt(Ne.paint_symbol["text-translate-anchor"])})},get layout(){return rP=rP||new jn({"symbol-placement":new jt(Ne.layout_symbol["symbol-placement"]),"symbol-spacing":new jt(Ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt(Ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vt(Ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt(Ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt(Ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jt(Ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jt(Ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt(Ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt(Ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vt(Ne.layout_symbol["icon-size"]),"icon-text-fit":new jt(Ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt(Ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vt(Ne.layout_symbol["icon-image"]),"icon-rotate":new Vt(Ne.layout_symbol["icon-rotate"]),"icon-padding":new Vt(Ne.layout_symbol["icon-padding"]),"icon-keep-upright":new jt(Ne.layout_symbol["icon-keep-upright"]),"icon-offset":new Vt(Ne.layout_symbol["icon-offset"]),"icon-anchor":new Vt(Ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt(Ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt(Ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt(Ne.layout_symbol["text-rotation-alignment"]),"text-field":new Vt(Ne.layout_symbol["text-field"]),"text-font":new Vt(Ne.layout_symbol["text-font"]),"text-size":new Vt(Ne.layout_symbol["text-size"]),"text-max-width":new Vt(Ne.layout_symbol["text-max-width"]),"text-line-height":new jt(Ne.layout_symbol["text-line-height"]),"text-letter-spacing":new Vt(Ne.layout_symbol["text-letter-spacing"]),"text-justify":new Vt(Ne.layout_symbol["text-justify"]),"text-radial-offset":new Vt(Ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt(Ne.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Vt(Ne.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Vt(Ne.layout_symbol["text-anchor"]),"text-max-angle":new jt(Ne.layout_symbol["text-max-angle"]),"text-writing-mode":new jt(Ne.layout_symbol["text-writing-mode"]),"text-rotate":new Vt(Ne.layout_symbol["text-rotate"]),"text-padding":new jt(Ne.layout_symbol["text-padding"]),"text-keep-upright":new jt(Ne.layout_symbol["text-keep-upright"]),"text-transform":new Vt(Ne.layout_symbol["text-transform"]),"text-offset":new Vt(Ne.layout_symbol["text-offset"]),"text-allow-overlap":new jt(Ne.layout_symbol["text-allow-overlap"]),"text-overlap":new jt(Ne.layout_symbol["text-overlap"]),"text-ignore-placement":new jt(Ne.layout_symbol["text-ignore-placement"]),"text-optional":new jt(Ne.layout_symbol["text-optional"])})}};class iP{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Ol,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}At("FormatSectionOverride",iP,{omit:["defaultValue"]});class yy extends di{constructor(n,o){super(n,U_,o)}recalculate(n,o){if(super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const y=[];for(const x of d)y.indexOf(x)<0&&y.push(x);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,o,d,y){const x=this.layout.get(n).evaluate(o,{},d,y),w=this._unevaluatedLayout._values[n];return w.isDataDriven()||vs(w.value)||!x?x:(function(C,I){return I.replace(/{([^{}]+)}/g,((z,N)=>C&&N in C?String(C[N]):""))})(o.properties,x)}createBucket(n){return new yh(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of U_.paint.overridableProperties){if(!yy.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),d=new iP(o),y=new Jl(d,o.property.specification);let x=null;x=o.value.kind==="constant"||o.value.kind==="source"?new Ys("source",y):new Js("composite",y,o.value.zoomStops),this.paint._values[n]=new fa(o.property,x,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,d){return!(!this.layout||o.isDataDriven()||d.isDataDriven())&&yy.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const d=n.get("text-field"),y=U_.paint.properties[o];let x=!1;const w=C=>{for(const I of C)if(y.overrides&&y.overrides.hasOverride(I))return void(x=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Sn)w(d.value.value.sections);else if(d.value.kind==="source"||d.value.kind==="composite"){const C=z=>{x||(z instanceof la&&nr(z.value)===Eo?w(z.value.sections):z instanceof Gs?w(z.sections):z.eachChild(C))},I=d.value;I._styleExpression&&C(I._styleExpression.expression)}return x}}let aP;var zj={get paint(){return aP=aP||new jn({"background-color":new jt(Ne.paint_background["background-color"]),"background-pattern":new cu(Ne.paint_background["background-pattern"]),"background-opacity":new jt(Ne.paint_background["background-opacity"])})}};class jj extends di{constructor(n,o){super(n,zj,o)}}let oP;var Lj={get paint(){return oP=oP||new jn({"raster-opacity":new jt(Ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt(Ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt(Ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt(Ne.paint_raster["raster-brightness-max"]),"raster-saturation":new jt(Ne.paint_raster["raster-saturation"]),"raster-contrast":new jt(Ne.paint_raster["raster-contrast"]),"raster-resampling":new jt(Ne.paint_raster["raster-resampling"]),"raster-fade-duration":new jt(Ne.paint_raster["raster-fade-duration"])})}};class Nj extends di{constructor(n,o){super(n,Lj,o)}}class Bj extends di{constructor(n,o){super(n,{},o),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Fj{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const $j={once:!0},V_=63710088e-1;class vh{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new vh(er(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,d=this.lat*o,y=n.lat*o,x=Math.sin(d)*Math.sin(y)+Math.cos(d)*Math.cos(y)*Math.cos((n.lng-this.lng)*o);return V_*Math.acos(Math.min(x,1))}static convert(n){if(n instanceof vh)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new vh(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new vh(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const sP=2*Math.PI*V_;function lP(s){return sP*Math.cos(s*Math.PI/180)}function cP(s){return(180+s)/360}function uP(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function hP(s,n){return s/lP(n)}function q_(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function dP(s,n){return s*lP(q_(n))}class Tm{constructor(n,o,d=0){this.x=+n,this.y=+o,this.z=+d}static fromLngLat(n,o=0){const d=vh.convert(n);return new Tm(cP(d.lng),uP(d.lat),hP(o,d.lat))}toLngLat(){return new vh(360*this.x-180,q_(this.y))}toAltitude(){return dP(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/sP*(n=q_(this.y),1/Math.cos(n*Math.PI/180));var n}}function fP(s,n,o){var d=2*Math.PI*6378137/256/Math.pow(2,o);return[s*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class G_{constructor(n,o,d){if(!(function(y,x,w){return!(y<0||y>25||w<0||w>=Math.pow(2,y)||x<0||x>=Math.pow(2,y))})(n,o,d))throw new Error(`x=${o}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=o,this.y=d,this.key=zf(0,n,n,o,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o,d){const y=(w=this.y,C=this.z,I=fP(256*(x=this.x),256*(w=Math.pow(2,C)-w-1),C),z=fP(256*(x+1),256*(w+1),C),I[0]+","+I[1]+","+z[0]+","+z[1]);var x,w,C,I,z;const N=(function(V,H,Q){let ee,se="";for(let fe=V;fe>0;fe--)ee=1<<fe-1,se+=(H&ee?1:0)+(Q&ee?2:0);return se})(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,y)}isChildOf(n){const o=this.z-n.z;return o>0&&n.x===this.x>>o&&n.y===this.y>>o}getTilePoint(n){const o=Math.pow(2,this.z);return new P((n.x*o-this.x)*tt,(n.y*o-this.y)*tt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pP{constructor(n,o){this.wrap=n,this.canonical=o,this.key=zf(n,o.z,o.z,o.x,o.y)}}class Wo{constructor(n,o,d,y,x){if(this.terrainRttPosMatrix32f=null,n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=o,this.canonical=new G_(d,+y,+x),this.key=zf(o,n,d,y,x)}clone(){return new Wo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-n;return n>this.canonical.z?new Wo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wo(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(n,o){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?zf(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y):zf(this.wrap*+o,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap||this.overscaledZ-n.overscaledZ<=0)return!1;if(n.overscaledZ===0)return this.overscaledZ>0;const o=this.canonical.z-n.canonical.z;return!(o<0)&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new Wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,d=2*this.canonical.x,y=2*this.canonical.y;return[new Wo(o,this.wrap,o,d,y),new Wo(o,this.wrap,o,d+1,y),new Wo(o,this.wrap,o,d,y+1),new Wo(o,this.wrap,o,d+1,y+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Wo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pP(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Tm(n.x-this.wrap,n.y))}}function zf(s,n,o,d,y){(s*=2)<0&&(s=-1*s-1);const x=1<<o;return(x*x*s+x*y+d).toString(36)+o.toString(36)+n.toString(36)}function Am(s,n){return n?s.properties[n]:s.id}At("CanonicalTileID",G_),At("OverscaledTileID",Wo,{omit:["terrainRttPosMatrix32f"]});class wd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){const o=new wd;return o.extend(n(new P(this.minX,this.minY))),o.extend(n(new P(this.maxX,this.minY))),o.extend(n(new P(this.minX,this.maxY))),o.extend(n(new P(this.maxX,this.maxY))),o}static fromPoints(n){const o=new wd;for(const d of n)o.extend(d);return o}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class mP{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const d=n[o];this._stringToNumber[d]=o,this._numberToString[o]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class gP{constructor(n,o,d,y,x){this.type="Feature",this._vectorTileFeature=n,n._z=o,n._x=d,n._y=y,this.properties=n.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(n[o]=this[o]);return n}}class yP{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new yo(tt,16,0),this.grid3D=new yo(tt,16,0),this.featureIndexArray=new Re,this.promoteId=o}insert(n,o,d,y,x,w){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,y,x);const I=w?this.grid3D:this.grid;for(let z=0;z<o.length;z++){const N=o[z],V=[1/0,1/0,-1/0,-1/0];for(let H=0;H<N.length;H++){const Q=N[H];V[0]=Math.min(V[0],Q.x),V[1]=Math.min(V[1],Q.y),V[2]=Math.max(V[2],Q.x),V[3]=Math.max(V[3],Q.y)}V[0]<tt&&V[1]<tt&&V[2]>=0&&V[3]>=0&&I.insert(C,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new gm(new _d(this.rawTileData)).layers,this.sourceLayerCoder=new mP(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,o,d,y){this.loadVTLayers();const x=n.params,w=tt/n.tileSize/n.scale,C=po(x.filter,x.globalState),I=n.queryGeometry,z=n.queryPadding*w,N=wd.fromPoints(I),V=this.grid.query(N.minX-z,N.minY-z,N.maxX+z,N.maxY+z),H=wd.fromPoints(n.cameraQueryGeometry).expandBy(z),Q=this.grid3D.query(H.minX,H.minY,H.maxX,H.maxY,((fe,_e,$e,Se)=>(function(Me,Ye,rt,mt,It){for(const Et of Me)if(Ye<=Et.x&&rt<=Et.y&&mt>=Et.x&&It>=Et.y)return!0;const St=[new P(Ye,rt),new P(Ye,It),new P(mt,It),new P(mt,rt)];if(Me.length>2){for(const Et of St)if(du(Me,Et))return!0}for(let Et=0;Et<Me.length-1;Et++)if(am(Me[Et],Me[Et+1],St))return!0;return!1})(n.cameraQueryGeometry,fe-z,_e-z,$e+z,Se+z)));for(const fe of Q)V.push(fe);V.sort(Uj);const ee={};let se;for(let fe=0;fe<V.length;fe++){const _e=V[fe];if(_e===se)continue;se=_e;const $e=this.featureIndexArray.get(_e);let Se=null;this.loadMatchingFeature(ee,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,C,x.layers,x.availableImages,o,d,y,((Me,Ye,rt)=>(Se||(Se=fc(Me)),Ye.queryIntersectsFeature({queryGeometry:I,feature:Me,featureState:rt,geometry:Se,zoom:this.z,transform:n.transform,pixelsToTileUnits:w,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation}))))}return ee}loadMatchingFeature(n,o,d,y,x,w,C,I,z,N,V){const H=this.bucketLayerIDs[o];if(w&&!H.some((fe=>w.has(fe))))return;const Q=this.sourceLayerCoder.decode(d),ee=this.vtLayers[Q].feature(y);if(x.needGeometry){const fe=pc(ee,!0);if(!x.filter(new Gr(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!x.filter(new Gr(this.tileID.overscaledZ),ee))return;const se=this.getId(ee,Q);for(let fe=0;fe<H.length;fe++){const _e=H[fe];if(w&&!w.has(_e))continue;const $e=I[_e];if(!$e)continue;let Se={};se&&N&&(Se=N.getState($e.sourceLayer||"_geojsonTileLayer",se));const Me=tr({},z[_e]);Me.paint=vP(Me.paint,$e.paint,ee,Se,C),Me.layout=vP(Me.layout,$e.layout,ee,Se,C);const Ye=!V||V(ee,$e,Se);if(!Ye)continue;const rt=new gP(ee,this.z,this.x,this.y,se);rt.layer=Me;let mt=n[_e];mt===void 0&&(mt=n[_e]=[]),mt.push({featureIndex:y,feature:rt,intersectionZ:Ye})}}lookupSymbolFeatures(n,o,d,y,x,w,C,I){const z={};this.loadVTLayers();const N=po(x.filterSpec,x.globalState);for(const V of n)this.loadMatchingFeature(z,d,y,V,N,w,C,I,o);return z}hasLayer(n){for(const o of this.bucketLayerIDs)for(const d of o)if(n===d)return!0;return!1}getId(n,o){var d;let y=n.id;return this.promoteId&&(y=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof y=="boolean"&&(y=Number(y)),y===void 0&&(!((d=n.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(y=Number(n.properties.cluster_id))),y}}function vP(s,n,o,d,y){return Ft(s,((x,w)=>{const C=n instanceof ul?n.get(w):null;return C&&C.evaluate?C.evaluate(o,d,y):C}))}function Uj(s,n){return n-s}function _P(s,n,o,d,y){const x=[];for(let w=0;w<s.length;w++){const C=s[w];let I;for(let z=0;z<C.length-1;z++){let N=C[z],V=C[z+1];N.x<n&&V.x<n||(N.x<n?N=new P(n,N.y+(n-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<n&&(V=new P(n,N.y+(n-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<o&&V.y<o||(N.y<o?N=new P(N.x+(o-N.y)/(V.y-N.y)*(V.x-N.x),o)._round():V.y<o&&(V=new P(N.x+(o-N.y)/(V.y-N.y)*(V.x-N.x),o)._round()),N.x>=d&&V.x>=d||(N.x>=d?N=new P(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=d&&(V=new P(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=y&&V.y>=y||(N.y>=y?N=new P(N.x+(y-N.y)/(V.y-N.y)*(V.x-N.x),y)._round():V.y>=y&&(V=new P(N.x+(y-N.y)/(V.y-N.y)*(V.x-N.x),y)._round()),I&&N.equals(I[I.length-1])||(I=[N],x.push(I)),I.push(V)))))}}return x}At("FeatureIndex",yP,{omit:["rawTileData","sourceLayerCoder"]});class _h extends P{constructor(n,o,d,y){super(n,o),this.angle=d,y!==void 0&&(this.segment=y)}clone(){return new _h(this.x,this.y,this.angle,this.segment)}}function xP(s,n,o,d,y){if(n.segment===void 0||o===0)return!0;let x=n,w=n.segment+1,C=0;for(;C>-o/2;){if(w--,w<0)return!1;C-=s[w].dist(x),x=s[w]}C+=s[w].dist(s[w+1]),w++;const I=[];let z=0;for(;C<o/2;){const N=s[w],V=s[w+1];if(!V)return!1;let H=s[w-1].angleTo(N)-N.angleTo(V);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:C,angleDelta:H}),z+=H;C-I[0].distance>d;)z-=I.shift().angleDelta;if(z>y)return!1;w++,C+=N.dist(V)}return!0}function bP(s){let n=0;for(let o=0;o<s.length-1;o++)n+=s[o].dist(s[o+1]);return n}function wP(s,n,o){return s?.6*n*o:0}function SP(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function Vj(s,n,o,d,y,x){const w=wP(o,y,x),C=SP(o,d)*x;let I=0;const z=bP(s)/2;for(let N=0;N<s.length-1;N++){const V=s[N],H=s[N+1],Q=V.dist(H);if(I+Q>z){const ee=(z-I)/Q,se=qa.number(V.x,H.x,ee),fe=qa.number(V.y,H.y,ee),_e=new _h(se,fe,H.angleTo(V),N);return _e._round(),!w||xP(s,_e,C,w,n)?_e:void 0}I+=Q}}function qj(s,n,o,d,y,x,w,C,I){const z=wP(d,x,w),N=SP(d,y),V=N*w,H=s[0].x===0||s[0].x===I||s[0].y===0||s[0].y===I;return n-V<n/4&&(n=V+n/4),PP(s,H?n/2*C%n:(N/2+2*x)*w*C%n,n,z,o,V,H,!1,I)}function PP(s,n,o,d,y,x,w,C,I){const z=x/2,N=bP(s);let V=0,H=n-o,Q=[];for(let ee=0;ee<s.length-1;ee++){const se=s[ee],fe=s[ee+1],_e=se.dist(fe),$e=fe.angleTo(se);for(;H+o<V+_e;){H+=o;const Se=(H-V)/_e,Me=qa.number(se.x,fe.x,Se),Ye=qa.number(se.y,fe.y,Se);if(Me>=0&&Me<I&&Ye>=0&&Ye<I&&H-z>=0&&H+z<=N){const rt=new _h(Me,Ye,$e,ee);rt._round(),d&&!xP(s,rt,x,d,y)||Q.push(rt)}}V+=_e}return C||Q.length||w||(Q=PP(s,V/2,o,d,y,x,w,!0,I)),Q}function TP(s,n,o,d){const y=[],x=s.image,w=x.pixelRatio,C=x.paddedRect.w-2,I=x.paddedRect.h-2;let z={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const N=x.stretchX||[[0,C]],V=x.stretchY||[[0,I]],H=(ht,or)=>ht+or[1]-or[0],Q=N.reduce(H,0),ee=V.reduce(H,0),se=C-Q,fe=I-ee;let _e=0,$e=Q,Se=0,Me=ee,Ye=0,rt=se,mt=0,It=fe;if(x.content&&d){const ht=x.content,or=ht[2]-ht[0],hr=ht[3]-ht[1];(x.textFitWidth||x.textFitHeight)&&(z=Zn(s)),_e=vy(N,0,ht[0]),Se=vy(V,0,ht[1]),$e=vy(N,ht[0],ht[2]),Me=vy(V,ht[1],ht[3]),Ye=ht[0]-_e,mt=ht[1]-Se,rt=or-$e,It=hr-Me}const St=z.x1,Et=z.y1,Gt=z.x2-St,Ct=z.y2-Et,Mt=(ht,or,hr,Qt)=>{const Bt=_y(ht.stretch-_e,$e,Gt,St),Dr=xy(ht.fixed-Ye,rt,ht.stretch,Q),Un=_y(or.stretch-Se,Me,Ct,Et),fi=xy(or.fixed-mt,It,or.stretch,ee),ra=_y(hr.stretch-_e,$e,Gt,St),Zo=xy(hr.fixed-Ye,rt,hr.stretch,Q),Qa=_y(Qt.stretch-Se,Me,Ct,Et),Fi=xy(Qt.fixed-mt,It,Qt.stretch,ee),En=new P(Bt,Un),Pi=new P(ra,Un),$i=new P(ra,Qa),Ui=new P(Bt,Qa),ja=new P(Dr/w,fi/w),Ho=new P(Zo/w,Fi/w),Ti=n*Math.PI/180;if(Ti){const Ai=Math.sin(Ti),Ci=Math.cos(Ti),li=[Ci,-Ai,Ai,Ci];En._matMult(li),Pi._matMult(li),Ui._matMult(li),$i._matMult(li)}const eo=ht.stretch+ht.fixed,pi=or.stretch+or.fixed;return{tl:En,tr:Pi,bl:Ui,br:$i,tex:{x:x.paddedRect.x+1+eo,y:x.paddedRect.y+1+pi,w:hr.stretch+hr.fixed-eo,h:Qt.stretch+Qt.fixed-pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ja,pixelOffsetBR:Ho,minFontScaleX:rt/w/Gt,minFontScaleY:It/w/Ct,isSDF:o}};if(d&&(x.stretchX||x.stretchY)){const ht=AP(N,se,Q),or=AP(V,fe,ee);for(let hr=0;hr<ht.length-1;hr++){const Qt=ht[hr],Bt=ht[hr+1];for(let Dr=0;Dr<or.length-1;Dr++)y.push(Mt(Qt,or[Dr],Bt,or[Dr+1]))}}else y.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:I+1}));return y}function vy(s,n,o){let d=0;for(const y of s)d+=Math.max(n,Math.min(o,y[1]))-Math.max(n,Math.min(o,y[0]));return d}function AP(s,n,o){const d=[{fixed:-1,stretch:0}];for(const[y,x]of s){const w=d[d.length-1];d.push({fixed:y-w.stretch,stretch:w.stretch}),d.push({fixed:y-w.stretch,stretch:w.stretch+(x-y)})}return d.push({fixed:n+1,stretch:o}),d}function _y(s,n,o,d){return s/n*o+d}function xy(s,n,o,d){return s-n*o/d}At("Anchor",_h);class by{constructor(n,o,d,y,x,w,C,I,z,N){var V;if(this.boxStartIndex=n.length,z){let H=w.top,Q=w.bottom;const ee=w.collisionPadding;ee&&(H-=ee[1],Q+=ee[3]);let se=Q-H;se>0&&(se=Math.max(10,se),this.circleDiameter=se)}else{const H=!((V=w.image)===null||V===void 0)&&V.content&&(w.image.textFitWidth||w.image.textFitHeight)?Zn(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};H.y1=H.y1*C-I[0],H.y2=H.y2*C+I[2],H.x1=H.x1*C-I[3],H.x2=H.x2*C+I[1];const Q=w.collisionPadding;if(Q&&(H.x1-=Q[0]*C,H.y1-=Q[1]*C,H.x2+=Q[2]*C,H.y2+=Q[3]*C),N){const ee=new P(H.x1,H.y1),se=new P(H.x2,H.y1),fe=new P(H.x1,H.y2),_e=new P(H.x2,H.y2),$e=N*Math.PI/180;ee._rotate($e),se._rotate($e),fe._rotate($e),_e._rotate($e),H.x1=Math.min(ee.x,se.x,fe.x,_e.x),H.x2=Math.max(ee.x,se.x,fe.x,_e.x),H.y1=Math.min(ee.y,se.y,fe.y,_e.y),H.y2=Math.max(ee.y,se.y,fe.y,_e.y)}n.emplaceBack(o.x,o.y,H.x1,H.y1,H.x2,H.y2,d,y,x)}this.boxEndIndex=n.length}}class Gj{constructor(n=[],o=(d,y)=>d<y?-1:d>y?1:0){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:d}=this,y=o[n];for(;n>0;){const x=n-1>>1,w=o[x];if(d(y,w)>=0)break;o[n]=w,n=x}o[n]=y}_down(n){const{data:o,compare:d}=this,y=this.length>>1,x=o[n];for(;n<y;){let w=1+(n<<1);const C=w+1;if(C<this.length&&d(o[C],o[w])<0&&(w=C),d(o[w],x)>=0)break;o[n]=o[w],n=w}o[n]=x}}function Wj(s,n=1,o=!1){const d=wd.fromPoints(s[0]),y=Math.min(d.width(),d.height());let x=y/2;const w=new Gj([],Zj),{minX:C,minY:I,maxX:z,maxY:N}=d;if(y===0)return new P(C,I);for(let Q=C;Q<z;Q+=y)for(let ee=I;ee<N;ee+=y)w.push(new jf(Q+x,ee+x,x,s));let V=(function(Q){let ee=0,se=0,fe=0;const _e=Q[0];for(let $e=0,Se=_e.length,Me=Se-1;$e<Se;Me=$e++){const Ye=_e[$e],rt=_e[Me],mt=Ye.x*rt.y-rt.x*Ye.y;se+=(Ye.x+rt.x)*mt,fe+=(Ye.y+rt.y)*mt,ee+=3*mt}return new jf(se/ee,fe/ee,0,Q)})(s),H=w.length;for(;w.length;){const Q=w.pop();(Q.d>V.d||!V.d)&&(V=Q,o&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,H)),Q.max-V.d<=n||(x=Q.h/2,w.push(new jf(Q.p.x-x,Q.p.y-x,x,s)),w.push(new jf(Q.p.x+x,Q.p.y-x,x,s)),w.push(new jf(Q.p.x-x,Q.p.y+x,x,s)),w.push(new jf(Q.p.x+x,Q.p.y+x,x,s)),H+=4)}return o&&(console.log(`num probes: ${H}`),console.log(`best distance: ${V.d}`)),V.p}function Zj(s,n){return n.max-s.max}function jf(s,n,o,d){this.p=new P(s,n),this.h=o,this.d=(function(y,x){let w=!1,C=1/0;for(let I=0;I<x.length;I++){const z=x[I];for(let N=0,V=z.length,H=V-1;N<V;H=N++){const Q=z[N],ee=z[H];Q.y>y.y!=ee.y>y.y&&y.x<(ee.x-Q.x)*(y.y-Q.y)/(ee.y-Q.y)+Q.x&&(w=!w),C=Math.min(C,im(y,Q,ee))}}return(w?1:-1)*Math.sqrt(C)})(this.p,d),this.max=this.d+this.h*Math.SQRT2}var ta;p.aE=void 0,(ta=p.aE||(p.aE={}))[ta.center=1]="center",ta[ta.left=2]="left",ta[ta.right=3]="right",ta[ta.top=4]="top",ta[ta.bottom=5]="bottom",ta[ta["top-left"]=6]="top-left",ta[ta["top-right"]=7]="top-right",ta[ta["bottom-left"]=8]="bottom-left",ta[ta["bottom-right"]=9]="bottom-right";const W_=Number.POSITIVE_INFINITY;function CP(s,n){return n[1]!==W_?(function(o,d,y){let x=0,w=0;switch(d=Math.abs(d),y=Math.abs(y),o){case"top-right":case"top-left":case"top":w=y-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-y}switch(o){case"top-right":case"bottom-right":case"right":x=-d;break;case"top-left":case"bottom-left":case"left":x=d}return[x,w]})(s,n[0],n[1]):(function(o,d){let y=0,x=0;d<0&&(d=0);const w=d/Math.SQRT2;switch(o){case"top-right":case"top-left":x=w-7;break;case"bottom-right":case"bottom-left":x=7-w;break;case"bottom":x=7-d;break;case"top":x=d-7}switch(o){case"top-right":case"bottom-right":y=-w;break;case"top-left":case"bottom-left":y=w;break;case"left":y=d;break;case"right":y=-d}return[y,x]})(s,n[0])}function EP(s,n,o){var d;const y=s.layout,x=(d=y.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},o);if(x){const C=x.values,I=[];for(let z=0;z<C.length;z+=2){const N=I[z]=C[z],V=C[z+1].map((H=>H*$n));N.startsWith("top")?V[1]-=7:N.startsWith("bottom")&&(V[1]+=7),I[z+1]=V}return new Jn(I)}const w=y.get("text-variable-anchor");if(w){let C;C=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(n,{},o)*$n,W_]:y.get("text-offset").evaluate(n,{},o).map((z=>z*$n));const I=[];for(const z of w)I.push(z,CP(z,C));return new Jn(I)}return null}function Z_(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Hj(s,n,o,d,y,x,w,C,I,z,N,V){let H=x.textMaxSize.evaluate(n,{});H===void 0&&(H=w);const Q=s.layers[0].layout,ee=Q.get("icon-offset").evaluate(n,{},N),se=kP(o.horizontal),fe=w/24,_e=s.tilePixelRatio*fe,$e=s.tilePixelRatio*H/24,Se=s.tilePixelRatio*C,Me=s.tilePixelRatio*Q.get("symbol-spacing"),Ye=Q.get("text-padding")*s.tilePixelRatio,rt=(function(hr,Qt,Bt,Dr=1){const Un=hr.get("icon-padding").evaluate(Qt,{},Bt),fi=Un&&Un.values;return[fi[0]*Dr,fi[1]*Dr,fi[2]*Dr,fi[3]*Dr]})(Q,n,N,s.tilePixelRatio),mt=Q.get("text-max-angle")/180*Math.PI,It=Q.get("text-rotation-alignment")!=="viewport"&&Q.get("symbol-placement")!=="point",St=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Et=Q.get("symbol-placement"),Gt=Me/2,Ct=Q.get("icon-text-fit");let Mt;d&&Ct!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(Mt=Je(d,o.vertical,Ct,Q.get("icon-text-fit-padding"),ee,fe)),se&&(d=Je(d,se,Ct,Q.get("icon-text-fit-padding"),ee,fe)));const ht=N?V.line.getGranularityForZoomLevel(N.z):1,or=(hr,Qt)=>{Qt.x<0||Qt.x>=tt||Qt.y<0||Qt.y>=tt||(function(Bt,Dr,Un,fi,ra,Zo,Qa,Fi,En,Pi,$i,Ui,ja,Ho,Ti,eo,pi,Ai,Ci,li,xn,bl,Lf,wl,Yj){const Nf=Bt.addToLineVertexArray(Dr,Un);let Sd,Bf,Ff,$f,DP=0,zP=0,jP=0,LP=0,t0=-1,r0=-1;const _u={};let NP=Ts("");if(Bt.allowVerticalPlacement&&fi.vertical){const ba=Fi.layout.get("text-rotate").evaluate(xn,{},wl)+90;Ff=new by(En,Dr,Pi,$i,Ui,fi.vertical,ja,Ho,Ti,ba),Qa&&($f=new by(En,Dr,Pi,$i,Ui,Qa,pi,Ai,Ti,ba))}if(ra){const ba=Fi.layout.get("icon-rotate").evaluate(xn,{}),Ko=Fi.layout.get("icon-text-fit")!=="none",Pd=TP(ra,ba,Lf,Ko),Pl=Qa?TP(Qa,ba,Lf,Ko):void 0;Bf=new by(En,Dr,Pi,$i,Ui,ra,pi,Ai,!1,ba),DP=4*Pd.length;const Td=Bt.iconSizeData;let wc=null;Td.kind==="source"?(wc=[Be*Fi.layout.get("icon-size").evaluate(xn,{})],wc[0]>Qe&&rr(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Td.kind==="composite"&&(wc=[Be*bl.compositeIconSizes[0].evaluate(xn,{},wl),Be*bl.compositeIconSizes[1].evaluate(xn,{},wl)],(wc[0]>Qe||wc[1]>Qe)&&rr(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,Pd,wc,li,Ci,xn,p.ao.none,Dr,Nf.lineStartIndex,Nf.lineLength,-1,wl),t0=Bt.icon.placedSymbolArray.length-1,Pl&&(zP=4*Pl.length,Bt.addSymbols(Bt.icon,Pl,wc,li,Ci,xn,p.ao.vertical,Dr,Nf.lineStartIndex,Nf.lineLength,-1,wl),r0=Bt.icon.placedSymbolArray.length-1)}const BP=Object.keys(fi.horizontal);for(const ba of BP){const Ko=fi.horizontal[ba];if(!Sd){NP=Ts(Ko.text);const Pl=Fi.layout.get("text-rotate").evaluate(xn,{},wl);Sd=new by(En,Dr,Pi,$i,Ui,Ko,ja,Ho,Ti,Pl)}const Pd=Ko.positionedLines.length===1;if(jP+=MP(Bt,Dr,Ko,Zo,Fi,Ti,xn,eo,Nf,fi.vertical?p.ao.horizontal:p.ao.horizontalOnly,Pd?BP:[ba],_u,t0,bl,wl),Pd)break}fi.vertical&&(LP+=MP(Bt,Dr,fi.vertical,Zo,Fi,Ti,xn,eo,Nf,p.ao.vertical,["vertical"],_u,r0,bl,wl));const Jj=Sd?Sd.boxStartIndex:Bt.collisionBoxArray.length,Qj=Sd?Sd.boxEndIndex:Bt.collisionBoxArray.length,e3=Ff?Ff.boxStartIndex:Bt.collisionBoxArray.length,t3=Ff?Ff.boxEndIndex:Bt.collisionBoxArray.length,r3=Bf?Bf.boxStartIndex:Bt.collisionBoxArray.length,n3=Bf?Bf.boxEndIndex:Bt.collisionBoxArray.length,i3=$f?$f.boxStartIndex:Bt.collisionBoxArray.length,a3=$f?$f.boxEndIndex:Bt.collisionBoxArray.length;let Sl=-1;const Sy=(ba,Ko)=>ba&&ba.circleDiameter?Math.max(ba.circleDiameter,Ko):Ko;Sl=Sy(Sd,Sl),Sl=Sy(Ff,Sl),Sl=Sy(Bf,Sl),Sl=Sy($f,Sl);const FP=Sl>-1?1:0;FP&&(Sl*=Yj/$n),Bt.glyphOffsetArray.length>=yh.MAX_GLYPHS&&rr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xn.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,xn.sortKey);const o3=EP(Fi,xn,wl),[s3,l3]=(function(ba,Ko){const Pd=ba.length,Pl=Ko?.values;if(Pl?.length>0)for(let Td=0;Td<Pl.length;Td+=2){const wc=Pl[Td+1];ba.emplaceBack(p.aE[Pl[Td]],wc[0],wc[1])}return[Pd,ba.length]})(Bt.textAnchorOffsets,o3);Bt.symbolInstances.emplaceBack(Dr.x,Dr.y,_u.right>=0?_u.right:-1,_u.center>=0?_u.center:-1,_u.left>=0?_u.left:-1,_u.vertical||-1,t0,r0,NP,Jj,Qj,e3,t3,r3,n3,i3,a3,Pi,jP,LP,DP,zP,FP,0,ja,Sl,s3,l3)})(s,Qt,hr,o,d,y,Mt,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,_e,[Ye,Ye,Ye,Ye],It,I,Se,rt,St,ee,n,x,z,N,w)};if(Et==="line")for(const hr of _P(n.geometry,0,0,tt,tt)){const Qt=yl(hr,ht),Bt=qj(Qt,Me,mt,o.vertical||se,d,24,$e,s.overscaling,tt);for(const Dr of Bt)se&&Kj(s,se.text,Gt,Dr)||or(Qt,Dr)}else if(Et==="line-center"){for(const hr of n.geometry)if(hr.length>1){const Qt=yl(hr,ht),Bt=Vj(Qt,mt,o.vertical||se,d,24,$e);Bt&&or(Qt,Bt)}}else if(n.type==="Polygon")for(const hr of Gl(n.geometry,0)){const Qt=Wj(hr,16);or(yl(hr[0],ht,!0),new _h(Qt.x,Qt.y,0))}else if(n.type==="LineString")for(const hr of n.geometry){const Qt=yl(hr,ht);or(Qt,new _h(Qt[0].x,Qt[0].y,0))}else if(n.type==="Point")for(const hr of n.geometry)for(const Qt of hr)or([Qt],new _h(Qt.x,Qt.y,0))}function MP(s,n,o,d,y,x,w,C,I,z,N,V,H,Q,ee){const se=(function($e,Se,Me,Ye,rt,mt,It,St){const Et=Ye.layout.get("text-rotate").evaluate(mt,{})*Math.PI/180,Gt=[];for(const Ct of Se.positionedLines)for(const Mt of Ct.positionedGlyphs){if(!Mt.rect)continue;const ht=Mt.rect||{};let or=4,hr=!0,Qt=1,Bt=0;const Dr=(rt||St)&&Mt.vertical,Un=Mt.metrics.advance*Mt.scale/2;if(St&&Se.verticalizable&&(Bt=Ct.lineOffset/2-(Mt.imageName?-($n-Mt.metrics.width*Mt.scale)/2:(Mt.scale-1)*$n)),Mt.imageName){const Ai=It[Mt.imageName];hr=Ai.sdf,Qt=Ai.pixelRatio,or=1/Qt}const fi=rt?[Mt.x+Un,Mt.y]:[0,0];let ra=rt?[0,0]:[Mt.x+Un+Me[0],Mt.y+Me[1]-Bt],Zo=[0,0];Dr&&(Zo=ra,ra=[0,0]);const Qa=Mt.metrics.isDoubleResolution?2:1,Fi=(Mt.metrics.left-or)*Mt.scale-Un+ra[0],En=(-Mt.metrics.top-or)*Mt.scale+ra[1],Pi=Fi+ht.w/Qa*Mt.scale/Qt,$i=En+ht.h/Qa*Mt.scale/Qt,Ui=new P(Fi,En),ja=new P(Pi,En),Ho=new P(Fi,$i),Ti=new P(Pi,$i);if(Dr){const Ai=new P(-Un,Un- -17),Ci=-Math.PI/2,li=12-Un,xn=new P(22-li,-(Mt.imageName?li:0)),bl=new P(...Zo);Ui._rotateAround(Ci,Ai)._add(xn)._add(bl),ja._rotateAround(Ci,Ai)._add(xn)._add(bl),Ho._rotateAround(Ci,Ai)._add(xn)._add(bl),Ti._rotateAround(Ci,Ai)._add(xn)._add(bl)}if(Et){const Ai=Math.sin(Et),Ci=Math.cos(Et),li=[Ci,-Ai,Ai,Ci];Ui._matMult(li),ja._matMult(li),Ho._matMult(li),Ti._matMult(li)}const eo=new P(0,0),pi=new P(0,0);Gt.push({tl:Ui,tr:ja,bl:Ho,br:Ti,tex:ht,writingMode:Se.writingMode,glyphOffset:fi,sectionIndex:Mt.sectionIndex,isSDF:hr,pixelOffsetTL:eo,pixelOffsetBR:pi,minFontScaleX:0,minFontScaleY:0})}return Gt})(0,o,C,y,x,w,d,s.allowVerticalPlacement),fe=s.textSizeData;let _e=null;fe.kind==="source"?(_e=[Be*y.layout.get("text-size").evaluate(w,{})],_e[0]>Qe&&rr(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):fe.kind==="composite"&&(_e=[Be*Q.compositeTextSizes[0].evaluate(w,{},ee),Be*Q.compositeTextSizes[1].evaluate(w,{},ee)],(_e[0]>Qe||_e[1]>Qe)&&rr(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,se,_e,C,x,w,z,n,I.lineStartIndex,I.lineLength,H,ee);for(const $e of N)V[$e]=s.text.placedSymbolArray.length-1;return 4*se.length}function kP(s){for(const n in s)return s[n];return null}function Kj(s,n,o,d){const y=s.compareText;if(n in y){const x=y[n];for(let w=x.length-1;w>=0;w--)if(d.dist(x[w])<o)return!0}else y[n]=[];return y[n].push(d),!1}const IP=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class H_{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,d]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=d>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const x=IP[15&d];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(n,2,1),[C]=new Uint32Array(n,4,1);return new H_(C,w,x,n)}constructor(n,o=64,d=Float64Array,y){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const x=IP.indexOf(this.ArrayType),w=2*n*this.ArrayType.BYTES_PER_ELEMENT,C=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-C%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${d}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+C+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+w+C+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+C+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=o,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return K_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:C}=this,I=[0,x.length-1,0],z=[];for(;I.length;){const N=I.pop()||0,V=I.pop()||0,H=I.pop()||0;if(V-H<=C){for(let fe=H;fe<=V;fe++){const _e=w[2*fe],$e=w[2*fe+1];_e>=n&&_e<=d&&$e>=o&&$e<=y&&z.push(x[fe])}continue}const Q=H+V>>1,ee=w[2*Q],se=w[2*Q+1];ee>=n&&ee<=d&&se>=o&&se<=y&&z.push(x[Q]),(N===0?n<=ee:o<=se)&&(I.push(H),I.push(Q-1),I.push(1-N)),(N===0?d>=ee:y>=se)&&(I.push(Q+1),I.push(V),I.push(1-N))}return z}within(n,o,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:w}=this,C=[0,y.length-1,0],I=[],z=d*d;for(;C.length;){const N=C.pop()||0,V=C.pop()||0,H=C.pop()||0;if(V-H<=w){for(let fe=H;fe<=V;fe++)RP(x[2*fe],x[2*fe+1],n,o)<=z&&I.push(y[fe]);continue}const Q=H+V>>1,ee=x[2*Q],se=x[2*Q+1];RP(ee,se,n,o)<=z&&I.push(y[Q]),(N===0?n-d<=ee:o-d<=se)&&(C.push(H),C.push(Q-1),C.push(1-N)),(N===0?n+d>=ee:o+d>=se)&&(C.push(Q+1),C.push(V),C.push(1-N))}return I}}function K_(s,n,o,d,y,x){if(y-d<=o)return;const w=d+y>>1;OP(s,n,w,d,y,x),K_(s,n,o,d,w-1,1-x),K_(s,n,o,w+1,y,1-x)}function OP(s,n,o,d,y,x){for(;y>d;){if(y-d>600){const z=y-d+1,N=o-d+1,V=Math.log(z),H=.5*Math.exp(2*V/3),Q=.5*Math.sqrt(V*H*(z-H)/z)*(N-z/2<0?-1:1);OP(s,n,o,Math.max(d,Math.floor(o-N*H/z+Q)),Math.min(y,Math.floor(o+(z-N)*H/z+Q)),x)}const w=n[2*o+x];let C=d,I=y;for(Cm(s,n,d,o),n[2*y+x]>w&&Cm(s,n,d,y);C<I;){for(Cm(s,n,C,I),C++,I--;n[2*C+x]<w;)C++;for(;n[2*I+x]>w;)I--}n[2*d+x]===w?Cm(s,n,d,I):(I++,Cm(s,n,I,y)),I<=o&&(d=I+1),o<=I&&(y=I-1)}}function Cm(s,n,o,d){X_(s,o,d),X_(n,2*o,2*d),X_(n,2*o+1,2*d+1)}function X_(s,n,o){const d=s[n];s[n]=s[o],s[o]=d}function RP(s,n,o,d){const y=s-o,x=n-d;return y*y+x*x}var Y_;p.cx=void 0,(Y_=p.cx||(p.cx={})).create="create",Y_.load="load",Y_.fullLoad="fullLoad";let wy=null,Em=[];const J_=1e3/60,Q_="loadTime",e0="fullLoadTime",Xj={mark(s){performance.mark(s)},frame(s){const n=s;wy!=null&&Em.push(n-wy),wy=n},clearMetrics(){wy=null,Em=[],performance.clearMeasures(Q_),performance.clearMeasures(e0);for(const s in p.cx)performance.clearMarks(p.cx[s])},getPerformanceMetrics(){performance.measure(Q_,p.cx.create,p.cx.load),performance.measure(e0,p.cx.create,p.cx.fullLoad);const s=performance.getEntriesByName(Q_)[0].duration,n=performance.getEntriesByName(e0)[0].duration,o=Em.length,d=1/(Em.reduce(((x,w)=>x+w),0)/o/1e3),y=Em.filter((x=>x>J_)).reduce(((x,w)=>x+(w-J_)/J_),0);return{loadTime:s,fullLoadTime:n,fps:d,percentDroppedFrames:y/(o+y)*100,totalFrames:o}}};p.$=tt,p.A=te,p.B=function([s,n,o]){return n+=90,n*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(o),y:s*Math.sin(n)*Math.sin(o),z:s*Math.cos(o)}},p.C=qa,p.D=jt,p.E=zt,p.F=Gr,p.G=em,p.H=function(s){if(vn==null){const n=s.navigator?s.navigator.userAgent:null;vn=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return vn},p.I=Rf,p.J=class{constructor(s,n){this.target=s,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Fj((()=>this.process())),this.subscription=oa(this.target,"message",(o=>this.receive(o)),!1),this.globalScope=Zr(self)?s:window}registerMessageHandler(s,n){this.messageHandlers[s]=n}sendAsync(s,n){return new Promise(((o,d)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=n?oa(n.signal,"abort",(()=>{x?.unsubscribe(),delete this.resolveRejects[y];const I={id:y,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),$j):null;this.resolveRejects[y]={resolve:I=>{x?.unsubscribe(),o(I)},reject:I=>{x?.unsubscribe(),d(I)}};const w=[],C=Object.assign(Object.assign({},s),{id:y,sourceMapId:this.mapId,origin:location.origin,data:Di(s.data,w)});this.target.postMessage(C,{transfer:w})}))}receive(s){const n=s.data,o=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[o];const d=this.abortControllers[o];return delete this.abortControllers[o],void(d&&d.abort())}if(Zr(self)||n.mustQueue)return this.tasks[o]=n,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,n)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),n=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(s,n)}processTask(s,n){return l(this,void 0,void 0,(function*(){if(n.type==="<response>"){const y=this.resolveRejects[s];return delete this.resolveRejects[s],y?void(n.error?y.reject(Ma(n.error)):y.resolve(Ma(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=Ma(n.data),d=new AbortController;this.abortControllers[s]=d;try{const y=yield this.messageHandlers[n.type](n.sourceMapId,o,d);this.completeTask(s,null,y)}catch(y){this.completeTask(s,y)}}))}completeTask(s,n,o){const d=[];delete this.abortControllers[s];const y={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Di(n):null,data:Di(o,d)};this.target.postMessage(y,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.K=he,p.L=function(){var s=new te(16);return te!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},p.M=function(s,n,o){var d,y,x,w,C,I,z,N,V,H,Q,ee,se=o[0],fe=o[1],_e=o[2];return n===s?(s[12]=n[0]*se+n[4]*fe+n[8]*_e+n[12],s[13]=n[1]*se+n[5]*fe+n[9]*_e+n[13],s[14]=n[2]*se+n[6]*fe+n[10]*_e+n[14],s[15]=n[3]*se+n[7]*fe+n[11]*_e+n[15]):(y=n[1],x=n[2],w=n[3],C=n[4],I=n[5],z=n[6],N=n[7],V=n[8],H=n[9],Q=n[10],ee=n[11],s[0]=d=n[0],s[1]=y,s[2]=x,s[3]=w,s[4]=C,s[5]=I,s[6]=z,s[7]=N,s[8]=V,s[9]=H,s[10]=Q,s[11]=ee,s[12]=d*se+C*fe+V*_e+n[12],s[13]=y*se+I*fe+H*_e+n[13],s[14]=x*se+z*fe+Q*_e+n[14],s[15]=w*se+N*fe+ee*_e+n[15]),s},p.N=function(s,n,o){var d=o[0],y=o[1],x=o[2];return s[0]=n[0]*d,s[1]=n[1]*d,s[2]=n[2]*d,s[3]=n[3]*d,s[4]=n[4]*y,s[5]=n[5]*y,s[6]=n[6]*y,s[7]=n[7]*y,s[8]=n[8]*x,s[9]=n[9]*x,s[10]=n[10]*x,s[11]=n[11]*x,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},p.O=function(s,n,o){var d=n[0],y=n[1],x=n[2],w=n[3],C=n[4],I=n[5],z=n[6],N=n[7],V=n[8],H=n[9],Q=n[10],ee=n[11],se=n[12],fe=n[13],_e=n[14],$e=n[15],Se=o[0],Me=o[1],Ye=o[2],rt=o[3];return s[0]=Se*d+Me*C+Ye*V+rt*se,s[1]=Se*y+Me*I+Ye*H+rt*fe,s[2]=Se*x+Me*z+Ye*Q+rt*_e,s[3]=Se*w+Me*N+Ye*ee+rt*$e,s[4]=(Se=o[4])*d+(Me=o[5])*C+(Ye=o[6])*V+(rt=o[7])*se,s[5]=Se*y+Me*I+Ye*H+rt*fe,s[6]=Se*x+Me*z+Ye*Q+rt*_e,s[7]=Se*w+Me*N+Ye*ee+rt*$e,s[8]=(Se=o[8])*d+(Me=o[9])*C+(Ye=o[10])*V+(rt=o[11])*se,s[9]=Se*y+Me*I+Ye*H+rt*fe,s[10]=Se*x+Me*z+Ye*Q+rt*_e,s[11]=Se*w+Me*N+Ye*ee+rt*$e,s[12]=(Se=o[12])*d+(Me=o[13])*C+(Ye=o[14])*V+(rt=o[15])*se,s[13]=Se*y+Me*I+Ye*H+rt*fe,s[14]=Se*x+Me*z+Ye*Q+rt*_e,s[15]=Se*w+Me*N+Ye*ee+rt*$e,s},p.P=P,p.Q=function(s,n){const o={};for(let d=0;d<n.length;d++){const y=n[d];y in s&&(o[y]=s[y])}return o},p.R=ya,p.S=vh,p.T=dm,p.U=uP,p.V=cP,p.W=F,p.X=X,p.Y=ki,p.Z=Wo,p._=l,p.a=ie,p.a$=Ke,p.a0=function(s,n){var o,d,y,x,w;if(!s)return n??{};if(!n)return s;let C=Object.assign({},s);if(n.removeAll&&(C={removeAll:!0}),n.remove){const I=new Set(n.remove);C.add&&(C.add=C.add.filter((N=>!I.has(N.id)))),C.update&&(C.update=C.update.filter((N=>!I.has(N.id))));const z=new Set(((o=s.add)!==null&&o!==void 0?o:[]).map((N=>N.id)));n.remove=n.remove.filter((N=>!z.has(N)))}if(n.remove){const I=new Set(C.remove?C.remove.concat(n.remove):n.remove);C.remove=Array.from(I.values())}if(n.add){const I=C.add?C.add.concat(n.add):n.add,z=new Map(I.map((N=>[N.id,N])));C.add=Array.from(z.values())}if(n.update){const I=new Map((d=C.update)===null||d===void 0?void 0:d.map((z=>[z.id,z])));for(const z of n.update){const N=(y=I.get(z.id))!==null&&y!==void 0?y:{id:z.id};z.newGeometry&&(N.newGeometry=z.newGeometry),z.addOrUpdateProperties&&(N.addOrUpdateProperties=((x=N.addOrUpdateProperties)!==null&&x!==void 0?x:[]).concat(z.addOrUpdateProperties)),z.removeProperties&&(N.removeProperties=((w=N.removeProperties)!==null&&w!==void 0?w:[]).concat(z.removeProperties)),z.removeAllProperties&&(N.removeAllProperties=!0),I.set(z.id,N)}C.update=Array.from(I.values())}return C.remove&&C.add&&(C.remove=C.remove.filter((I=>C.add.findIndex((z=>z.id===I))===-1))),C},p.a1=Tm,p.a2=wd,p.a3=25,p.a4=G_,p.a5=s=>{const n=window.document.createElement("video");return n.muted=!0,new Promise((o=>{n.onloadstart=()=>{o(n)};for(const d of s){const y=window.document.createElement("source");Xe(d)||(n.crossOrigin="Anonymous"),y.src=d,n.appendChild(y)}}))},p.a6=_t,p.a7=function(){return vt++},p.a8=ne,p.a9=yh,p.aA=function(s){let n=1/0,o=1/0,d=-1/0,y=-1/0;for(const x of s)n=Math.min(n,x.x),o=Math.min(o,x.y),d=Math.max(d,x.x),y=Math.max(y,x.y);return[n,o,d,y]},p.aB=$n,p.aC=ut,p.aD=function(s,n,o,d,y=!1){if(!o[0]&&!o[1])return[0,0];const x=y?d==="map"?-s.bearingInRadians:0:d==="viewport"?s.bearingInRadians:0;if(x){const w=Math.sin(x),C=Math.cos(x);o=[o[0]*C-o[1]*w,o[0]*w+o[1]*C]}return[y?o[0]:ut(n,o[0],s.zoom),y?o[1]:ut(n,o[1],s.zoom)]},p.aF=Xt,p.aG=Z_,p.aH=De,p.aI=H_,p.aJ=Jr,p.aK=ks,p.aL=He,p.aM=Rr,p.aN=Vr,p.aO=er,p.aP=Sa,p.aQ=dP,p.aR=We,p.aS=Ie,p.aT=function(s){var n=new te(3);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n},p.aU=function(s,n,o){return s[0]=n[0]-o[0],s[1]=n[1]-o[1],s[2]=n[2]-o[2],s},p.aV=function(s,n){var o=n[0],d=n[1],y=n[2],x=o*o+d*d+y*y;return x>0&&(x=1/Math.sqrt(x)),s[0]=n[0]*x,s[1]=n[1]*x,s[2]=n[2]*x,s},p.aW=Oe,p.aX=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]},p.aY=function(s,n,o){return s[0]=n[0]*o[0],s[1]=n[1]*o[1],s[2]=n[2]*o[2],s[3]=n[3]*o[3],s},p.aZ=de,p.a_=function(s,n,o){const d=n[0]*o[0]+n[1]*o[1]+n[2]*o[2];return d===0?null:(-(s[0]*o[0]+s[1]*o[1]+s[2]*o[2])-o[3])/d},p.aa=po,p.ab=pc,p.ac=gP,p.ad=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((o,d,y,x)=>{const w=y||x;return n[d]=!w||w.toLowerCase(),""})),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n},p.ae=Ba,p.af=function(s){return Math.pow(2,s)},p.ag=Y,p.ah=Wt,p.ai=85.051129,p.aj=hP,p.ak=function(s){return Math.log(s)/Math.LN2},p.al=function(s){var n=s[0],o=s[1];return n*n+o*o},p.am=function(s,n){const o=[];for(const d in s)d in n||o.push(d);return o},p.an=function(s,n){let o=0,d=0;if(s.kind==="constant")d=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:y,minZoom:x,maxZoom:w}=s,C=y?Wt(zn.interpolationFactor(y,n,x,w),0,1):0;s.kind==="camera"?d=qa.number(s.minSize,s.maxSize,C):o=C}return{uSizeT:o,uSize:d}},p.ap=function(s,{uSize:n,uSizeT:o},{lowerSize:d,upperSize:y}){return s.kind==="source"?d/Be:s.kind==="composite"?qa.number(d/Be,y/Be,o):n},p.aq=function(s,n){var o=n[0],d=n[1],y=n[2],x=n[3],w=n[4],C=n[5],I=n[6],z=n[7],N=n[8],V=n[9],H=n[10],Q=n[11],ee=n[12],se=n[13],fe=n[14],_e=n[15],$e=o*C-d*w,Se=o*I-y*w,Me=o*z-x*w,Ye=d*I-y*C,rt=d*z-x*C,mt=y*z-x*I,It=N*se-V*ee,St=N*fe-H*ee,Et=N*_e-Q*ee,Gt=V*fe-H*se,Ct=V*_e-Q*se,Mt=H*_e-Q*fe,ht=$e*Mt-Se*Ct+Me*Gt+Ye*Et-rt*St+mt*It;return ht?(s[0]=(C*Mt-I*Ct+z*Gt)*(ht=1/ht),s[1]=(y*Ct-d*Mt-x*Gt)*ht,s[2]=(se*mt-fe*rt+_e*Ye)*ht,s[3]=(H*rt-V*mt-Q*Ye)*ht,s[4]=(I*Et-w*Mt-z*St)*ht,s[5]=(o*Mt-y*Et+x*St)*ht,s[6]=(fe*Me-ee*mt-_e*Se)*ht,s[7]=(N*mt-H*Me+Q*Se)*ht,s[8]=(w*Ct-C*Et+z*It)*ht,s[9]=(d*Et-o*Ct-x*It)*ht,s[10]=(ee*rt-se*Me+_e*$e)*ht,s[11]=(V*Me-N*rt-Q*$e)*ht,s[12]=(C*St-w*Gt-I*It)*ht,s[13]=(o*Gt-d*St+y*It)*ht,s[14]=(se*Se-ee*Ye-fe*$e)*ht,s[15]=(N*Ye-V*Se+H*$e)*ht,s):null},p.ar=lt,p.as=function(s){var n=s[0],o=s[1];return Math.sqrt(n*n+o*o)},p.at=function(s){return s[0]=0,s[1]=0,s},p.au=function(s,n,o){return s[0]=n[0]*o,s[1]=n[1]*o,s},p.av=mr,p.aw=ot,p.ax=function(s,n,o,d){const y=n.y-s.y,x=n.x-s.x,w=d.y-o.y,C=d.x-o.x,I=w*x-C*y;if(I===0)return null;const z=(C*(s.y-o.y)-w*(s.x-o.x))/I;return new P(s.x+z*x,s.y+z*y)},p.ay=_P,p.az=qg,p.b=qn,p.b$=class extends c{},p.b0=function(s,n,o){return s[0]=n[0]*o,s[1]=n[1]*o,s[2]=n[2]*o,s[3]=n[3]*o,s},p.b1=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]},p.b2=pP,p.b3=zf,p.b4=function(s,n,o,d,y){var x=1/Math.tan(n/2);if(s[0]=x/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,y!=null&&y!==1/0){var w=1/(d-y);s[10]=(y+d)*w,s[14]=2*y*d*w}else s[10]=-1,s[14]=-2*d;return s},p.b5=function(s){var n=new te(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},p.b6=function(s,n,o){var d=Math.sin(o),y=Math.cos(o),x=n[0],w=n[1],C=n[2],I=n[3],z=n[4],N=n[5],V=n[6],H=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=x*y+z*d,s[1]=w*y+N*d,s[2]=C*y+V*d,s[3]=I*y+H*d,s[4]=z*y-x*d,s[5]=N*y-w*d,s[6]=V*y-C*d,s[7]=H*y-I*d,s},p.b7=function(s,n,o){var d=Math.sin(o),y=Math.cos(o),x=n[4],w=n[5],C=n[6],I=n[7],z=n[8],N=n[9],V=n[10],H=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=x*y+z*d,s[5]=w*y+N*d,s[6]=C*y+V*d,s[7]=I*y+H*d,s[8]=z*y-x*d,s[9]=N*y-w*d,s[10]=V*y-C*d,s[11]=H*y-I*d,s},p.b8=function(){const s=new Float32Array(16);return Y(s),s},p.b9=function(){const s=new Float64Array(16);return Y(s),s},p.bA=function(s,n){const o=Ae(s,360),d=Ae(n,360),y=d-o,x=d>o?y-360:y+360;return Math.abs(y)<Math.abs(x)?y:x},p.bB=function(s){return s[0]=0,s[1]=0,s[2]=0,s},p.bC=function(s,n,o,d){const y=Math.sqrt(s*s+n*n),x=Math.sqrt(o*o+d*d);s/=y,n/=y,o/=x,d/=x;const w=Math.acos(s*o+n*d);return-n*o+s*d>0?w:-w},p.bD=function(s,n){const o=Ae(s,2*Math.PI),d=Ae(n,2*Math.PI);return Math.min(Math.abs(o-d),Math.abs(o-d+2*Math.PI),Math.abs(o-d-2*Math.PI))},p.bE=function(){const s={},n=Ne.$version;for(const o in Ne.$root){const d=Ne.$root[o];if(d.required){let y=null;y=o==="version"?n:d.type==="array"?[]:{},y!=null&&(s[o]=y)}}return s},p.bF=eh,p.bG=Ce,p.bH=function s(n,o){if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(let d=0;d<n.length;d++)if(!s(n[d],o[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&o!==null){if(typeof o!="object"||Object.keys(n).length!==Object.keys(o).length)return!1;for(const d in n)if(!s(n[d],o[d]))return!1;return!0}return n===o},p.bI=function(s){s=s.slice();const n=Object.create(null);for(let o=0;o<s.length;o++)n[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=Cr(s[o],n[s[o].ref]));return s},p.bJ=function(s,n){if(s.type==="custom")return new Bj(s,n);switch(s.type){case"background":return new jj(s,n);case"circle":return new ml(s,n);case"color-relief":return new fm(s,n);case"fill":return new Sf(s,n);case"fill-extrusion":return new oy(s,n);case"heatmap":return new ea(s,n);case"hillshade":return new hh(s,n);case"line":return new L_(s,n);case"raster":return new Nj(s,n);case"symbol":return new yy(s,n)}},p.bK=pt,p.bL=function(s,n){if(!s)return[{command:"setStyle",args:[n]}];let o=[];try{if(!Ut(s.version,n.version))return[{command:"setStyle",args:[n]}];Ut(s.center,n.center)||o.push({command:"setCenter",args:[n.center]}),Ut(s.state,n.state)||o.push({command:"setGlobalState",args:[n.state]}),Ut(s.centerAltitude,n.centerAltitude)||o.push({command:"setCenterAltitude",args:[n.centerAltitude]}),Ut(s.zoom,n.zoom)||o.push({command:"setZoom",args:[n.zoom]}),Ut(s.bearing,n.bearing)||o.push({command:"setBearing",args:[n.bearing]}),Ut(s.pitch,n.pitch)||o.push({command:"setPitch",args:[n.pitch]}),Ut(s.roll,n.roll)||o.push({command:"setRoll",args:[n.roll]}),Ut(s.sprite,n.sprite)||o.push({command:"setSprite",args:[n.sprite]}),Ut(s.glyphs,n.glyphs)||o.push({command:"setGlyphs",args:[n.glyphs]}),Ut(s.transition,n.transition)||o.push({command:"setTransition",args:[n.transition]}),Ut(s.light,n.light)||o.push({command:"setLight",args:[n.light]}),Ut(s.terrain,n.terrain)||o.push({command:"setTerrain",args:[n.terrain]}),Ut(s.sky,n.sky)||o.push({command:"setSky",args:[n.sky]}),Ut(s.projection,n.projection)||o.push({command:"setProjection",args:[n.projection]});const d={},y=[];(function(w,C,I,z){let N;for(N in C=C||{},w=w||{})Object.prototype.hasOwnProperty.call(w,N)&&(Object.prototype.hasOwnProperty.call(C,N)||Rn(N,I,z));for(N in C)Object.prototype.hasOwnProperty.call(C,N)&&(Object.prototype.hasOwnProperty.call(w,N)?Ut(w[N],C[N])||(w[N].type==="geojson"&&C[N].type==="geojson"&&gn(w,C,N)?pr(I,{command:"setGeoJSONSourceData",args:[N,C[N].data]}):Gn(N,C,I,z)):en(N,C,I))})(s.sources,n.sources,y,d);const x=[];s.layers&&s.layers.forEach((w=>{"source"in w&&d[w.source]?o.push({command:"removeLayer",args:[w.id]}):x.push(w)})),o=o.concat(y),(function(w,C,I){C=C||[];const z=(w=w||[]).map(Er),N=C.map(Er),V=w.reduce(Wn,{}),H=C.reduce(Wn,{}),Q=z.slice(),ee=Object.create(null);let se,fe,_e,$e,Se;for(let Me=0,Ye=0;Me<z.length;Me++)se=z[Me],Object.prototype.hasOwnProperty.call(H,se)?Ye++:(pr(I,{command:"removeLayer",args:[se]}),Q.splice(Q.indexOf(se,Ye),1));for(let Me=0,Ye=0;Me<N.length;Me++)se=N[N.length-1-Me],Q[Q.length-1-Me]!==se&&(Object.prototype.hasOwnProperty.call(V,se)?(pr(I,{command:"removeLayer",args:[se]}),Q.splice(Q.lastIndexOf(se,Q.length-Ye),1)):Ye++,$e=Q[Q.length-Me],pr(I,{command:"addLayer",args:[H[se],$e]}),Q.splice(Q.length-Me,0,se),ee[se]=!0);for(let Me=0;Me<N.length;Me++)if(se=N[Me],fe=V[se],_e=H[se],!ee[se]&&!Ut(fe,_e))if(Ut(fe.source,_e.source)&&Ut(fe["source-layer"],_e["source-layer"])&&Ut(fe.type,_e.type)){for(Se in br(fe.layout,_e.layout,I,se,null,"setLayoutProperty"),br(fe.paint,_e.paint,I,se,null,"setPaintProperty"),Ut(fe.filter,_e.filter)||pr(I,{command:"setFilter",args:[se,_e.filter]}),Ut(fe.minzoom,_e.minzoom)&&Ut(fe.maxzoom,_e.maxzoom)||pr(I,{command:"setLayerZoomRange",args:[se,_e.minzoom,_e.maxzoom]}),fe)Object.prototype.hasOwnProperty.call(fe,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?br(fe[Se],_e[Se],I,se,Se.slice(6),"setPaintProperty"):Ut(fe[Se],_e[Se])||pr(I,{command:"setLayerProperty",args:[se,Se,_e[Se]]}));for(Se in _e)Object.prototype.hasOwnProperty.call(_e,Se)&&!Object.prototype.hasOwnProperty.call(fe,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?br(fe[Se],_e[Se],I,se,Se.slice(6),"setPaintProperty"):Ut(fe[Se],_e[Se])||pr(I,{command:"setLayerProperty",args:[se,Se,_e[Se]]}))}else pr(I,{command:"removeLayer",args:[se]}),$e=Q[Q.lastIndexOf(se)+1],pr(I,{command:"addLayer",args:[_e,$e]})})(x,n.layers,o)}catch(d){console.warn("Unable to compute style diff:",d),o=[{command:"setStyle",args:[n]}]}return o},p.bM=function(s){const n=[],o=s.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},p.bN=Ft,p.bO=ir,p.bP=class extends rn{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},p.bQ=ei,p.bR=class extends rn{constructor(s,n){super(s,n),this.current=rm}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},p.bS=bi,p.bT=class extends rn{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},p.bU=class extends rn{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},p.bV=le,p.bW=function(s,n){var o=Math.sin(n),d=Math.cos(n);return s[0]=d,s[1]=o,s[2]=0,s[3]=-o,s[4]=d,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},p.bX=function(s,n,o){var d=n[0],y=n[1],x=n[2];return s[0]=d*o[0]+y*o[3]+x*o[6],s[1]=d*o[1]+y*o[4]+x*o[7],s[2]=d*o[2]+y*o[5]+x*o[8],s},p.bY=function(s,n,o,d,y,x,w){var C=1/(n-o),I=1/(d-y),z=1/(x-w);return s[0]=-2*C,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*I,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*z,s[11]=0,s[12]=(n+o)*C,s[13]=(y+d)*I,s[14]=(w+x)*z,s[15]=1,s},p.bZ=class extends rn{constructor(s,n){super(s,n),this.current=new Array}set(s){if(s!=this.current){this.current=s;const n=new Float32Array(4*s.length);for(let o=0;o<s.length;o++)n[4*o]=s[o].r,n[4*o+1]=s[o].g,n[4*o+2]=s[o].b,n[4*o+3]=s[o].a;this.gl.uniform4fv(this.location,n)}}},p.b_=class extends rn{constructor(s,n){super(s,n),this.current=new Array}set(s){if(s!=this.current){this.current=s;const n=new Float32Array(s);this.gl.uniform1fv(this.location,n)}}},p.ba=function(){return new Float64Array(16)},p.bb=function(s,n,o){const d=new Float64Array(4);return st(d,s,n-90,o),d},p.bc=function(s,n,o,d){var y,x,w,C,I,z=n[0],N=n[1],V=n[2],H=n[3],Q=o[0],ee=o[1],se=o[2],fe=o[3];return(x=z*Q+N*ee+V*se+H*fe)<0&&(x=-x,Q=-Q,ee=-ee,se=-se,fe=-fe),1-x>J?(y=Math.acos(x),w=Math.sin(y),C=Math.sin((1-d)*y)/w,I=Math.sin(d*y)/w):(C=1-d,I=d),s[0]=C*z+I*Q,s[1]=C*N+I*ee,s[2]=C*V+I*se,s[3]=C*H+I*fe,s},p.bd=function(s){const n=new Float64Array(9);var o,d,y,x,w,C,I,z,N,V,H,Q,ee,se,fe,_e,$e,Se;V=(y=(d=s)[0])*(I=y+y),H=(x=d[1])*I,ee=(w=d[2])*I,se=w*(z=x+x),_e=(C=d[3])*I,$e=C*z,Se=C*(N=w+w),(o=n)[0]=1-(Q=x*z)-(fe=w*N),o[3]=H-Se,o[6]=ee+$e,o[1]=H+Se,o[4]=1-V-fe,o[7]=se-_e,o[2]=ee-$e,o[5]=se+_e,o[8]=1-V-Q;const Me=Sa(-Math.asin(Wt(n[2],-1,1)));let Ye,rt;return Math.hypot(n[5],n[8])<.001?(Ye=0,rt=-Sa(Math.atan2(n[3],n[4]))):(Ye=Sa(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),rt=Sa(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:Ye,pitch:Me+90,bearing:rt}},p.be=function(s,n){return s.roll==n.roll&&s.pitch==n.pitch&&s.bearing==n.bearing},p.bf=_r,p.bg=An,p.bh=gl,p.bi=mu,p.bj=Ms,p.bk=qe,p.bl=yt,p.bm=hi,p.bn=function(s,n,o,d,y){return qe(d,y,Wt((s-n)/(o-n),0,1))},p.bo=Ae,p.bp=function(){return new Float64Array(3)},p.bq=function(s,n,o,d){return s[0]=n[0]+o[0]*d,s[1]=n[1]+o[1]*d,s[2]=n[2]+o[2]*d,s},p.br=st,p.bs=function(s,n,o){var d=o[0],y=o[1],x=o[2],w=o[3],C=n[0],I=n[1],z=n[2],N=y*z-x*I,V=x*C-d*z,H=d*I-y*C;return s[0]=C+w*(N+=N)+y*(H+=H)-x*(V+=V),s[1]=I+w*V+x*N-d*H,s[2]=z+w*H+d*V-y*N,s},p.bt=function(s,n,o){const d=(y=[s[0],s[1],s[2],n[0],n[1],n[2],o[0],o[1],o[2]])[0]*((N=y[8])*(w=y[4])-(C=y[5])*(z=y[7]))+y[1]*(-N*(x=y[3])+C*(I=y[6]))+y[2]*(z*x-w*I);var y,x,w,C,I,z,N;if(d===0)return null;const V=Oe([],[n[0],n[1],n[2]],[o[0],o[1],o[2]]),H=Oe([],[o[0],o[1],o[2]],[s[0],s[1],s[2]]),Q=Oe([],[s[0],s[1],s[2]],[n[0],n[1],n[2]]),ee=We([],V,-s[3]);return Ie(ee,ee,We([],H,-n[3])),Ie(ee,ee,We([],Q,-o[3])),We(ee,ee,1/d),ee},p.bu=V_,p.bv=function(){return new Float64Array(4)},p.bw=function(s,n,o,d){var y=[],x=[];return y[0]=n[0]-o[0],y[1]=n[1]-o[1],y[2]=n[2]-o[2],x[0]=y[0]*Math.cos(d)-y[1]*Math.sin(d),x[1]=y[0]*Math.sin(d)+y[1]*Math.cos(d),x[2]=y[2],s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},p.bx=function(s,n,o,d){var y=[],x=[];return y[0]=n[0]-o[0],y[1]=n[1]-o[1],y[2]=n[2]-o[2],x[0]=y[0],x[1]=y[1]*Math.cos(d)-y[2]*Math.sin(d),x[2]=y[1]*Math.sin(d)+y[2]*Math.cos(d),s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},p.by=function(s,n,o,d){var y=[],x=[];return y[0]=n[0]-o[0],y[1]=n[1]-o[1],y[2]=n[2]-o[2],x[0]=y[2]*Math.sin(d)+y[0]*Math.cos(d),x[1]=y[1],x[2]=y[2]*Math.cos(d)-y[0]*Math.sin(d),s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},p.bz=function(s,n,o){var d=Math.sin(o),y=Math.cos(o),x=n[0],w=n[1],C=n[2],I=n[3],z=n[8],N=n[9],V=n[10],H=n[11];return n!==s&&(s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=x*y-z*d,s[1]=w*y-N*d,s[2]=C*y-V*d,s[3]=I*y-H*d,s[8]=x*d+z*y,s[9]=w*d+N*y,s[10]=C*d+V*y,s[11]=I*d+H*y,s},p.c=ze,p.c0=bm,p.c1=class extends v{},p.c2=uh,p.c3=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},p.c4=Xg,p.c5=function(s,n,o){var d=n[0],y=n[1],x=n[2],w=o[3]*d+o[7]*y+o[11]*x+o[15];return s[0]=(o[0]*d+o[4]*y+o[8]*x+o[12])/(w=w||1),s[1]=(o[1]*d+o[5]*y+o[9]*x+o[13])/w,s[2]=(o[2]*d+o[6]*y+o[10]*x+o[14])/w,s},p.c6=class extends Ji{},p.c7=class extends Z{},p.c8=function(s,n){return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]&&s[3]===n[3]&&s[4]===n[4]&&s[5]===n[5]&&s[6]===n[6]&&s[7]===n[7]&&s[8]===n[8]&&s[9]===n[9]&&s[10]===n[10]&&s[11]===n[11]&&s[12]===n[12]&&s[13]===n[13]&&s[14]===n[14]&&s[15]===n[15]},p.c9=function(s,n){var o=s[0],d=s[1],y=s[2],x=s[3],w=s[4],C=s[5],I=s[6],z=s[7],N=s[8],V=s[9],H=s[10],Q=s[11],ee=s[12],se=s[13],fe=s[14],_e=s[15],$e=n[0],Se=n[1],Me=n[2],Ye=n[3],rt=n[4],mt=n[5],It=n[6],St=n[7],Et=n[8],Gt=n[9],Ct=n[10],Mt=n[11],ht=n[12],or=n[13],hr=n[14],Qt=n[15];return Math.abs(o-$e)<=J*Math.max(1,Math.abs(o),Math.abs($e))&&Math.abs(d-Se)<=J*Math.max(1,Math.abs(d),Math.abs(Se))&&Math.abs(y-Me)<=J*Math.max(1,Math.abs(y),Math.abs(Me))&&Math.abs(x-Ye)<=J*Math.max(1,Math.abs(x),Math.abs(Ye))&&Math.abs(w-rt)<=J*Math.max(1,Math.abs(w),Math.abs(rt))&&Math.abs(C-mt)<=J*Math.max(1,Math.abs(C),Math.abs(mt))&&Math.abs(I-It)<=J*Math.max(1,Math.abs(I),Math.abs(It))&&Math.abs(z-St)<=J*Math.max(1,Math.abs(z),Math.abs(St))&&Math.abs(N-Et)<=J*Math.max(1,Math.abs(N),Math.abs(Et))&&Math.abs(V-Gt)<=J*Math.max(1,Math.abs(V),Math.abs(Gt))&&Math.abs(H-Ct)<=J*Math.max(1,Math.abs(H),Math.abs(Ct))&&Math.abs(Q-Mt)<=J*Math.max(1,Math.abs(Q),Math.abs(Mt))&&Math.abs(ee-ht)<=J*Math.max(1,Math.abs(ee),Math.abs(ht))&&Math.abs(se-or)<=J*Math.max(1,Math.abs(se),Math.abs(or))&&Math.abs(fe-hr)<=J*Math.max(1,Math.abs(fe),Math.abs(hr))&&Math.abs(_e-Qt)<=J*Math.max(1,Math.abs(_e),Math.abs(Qt))},p.cA=function(s,n){ie.REGISTERED_PROTOCOLS[s]=n},p.cB=function(s){delete ie.REGISTERED_PROTOCOLS[s]},p.cC=function(s,n){const o={};for(let y=0;y<s.length;y++){const x=n&&n[s[y].id]||Ju(s[y]);n&&(n[s[y].id]=x);let w=o[x];w||(w=o[x]=[]),w.push(s[y])}const d=[];for(const y in o)d.push(o[y]);return d},p.cD=At,p.cE=mP,p.cF=yP,p.cG=gy,p.cH=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=tt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],o=n.layout,d=n._unevaluatedLayout._values,y={layoutIconSize:d["icon-size"].possiblyEvaluate(new Gr(s.bucket.zoom+1),s.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Gr(s.bucket.zoom+1),s.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Gr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:N}=s.bucket.textSizeData;y.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Gr(z),s.canonical),d["text-size"].possiblyEvaluate(new Gr(N),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:N}=s.bucket.iconSizeData;y.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Gr(z),s.canonical),d["icon-size"].possiblyEvaluate(new Gr(N),s.canonical)]}const x=o.get("text-line-height")*$n,w=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",C=o.get("text-keep-upright"),I=o.get("text-size");for(const z of s.bucket.features){const N=o.get("text-font").evaluate(z,{},s.canonical).join(","),V=I.evaluate(z,{},s.canonical),H=y.layoutTextSize.evaluate(z,{},s.canonical),Q=y.layoutIconSize.evaluate(z,{},s.canonical),ee={horizontal:{},vertical:void 0},se=z.text;let fe,_e=[0,0];if(se){const Me=se.toString(),Ye=o.get("text-letter-spacing").evaluate(z,{},s.canonical)*$n,rt=Yi(Me)?Ye:0,mt=o.get("text-anchor").evaluate(z,{},s.canonical),It=EP(n,z,s.canonical);if(!It){const Ct=o.get("text-radial-offset").evaluate(z,{},s.canonical);_e=Ct?CP(mt,[Ct*$n,W_]):o.get("text-offset").evaluate(z,{},s.canonical).map((Mt=>Mt*$n))}let St=w?"center":o.get("text-justify").evaluate(z,{},s.canonical);const Et=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(z,{},s.canonical)*$n:1/0,Gt=()=>{s.bucket.allowVerticalPlacement&&au(Me)&&(ee.vertical=Df(se,s.glyphMap,s.glyphPositions,s.imagePositions,N,Et,x,mt,"left",rt,_e,p.ao.vertical,!0,H,V))};if(!w&&It){const Ct=new Set;if(St==="auto")for(let ht=0;ht<It.values.length;ht+=2)Ct.add(Z_(It.values[ht]));else Ct.add(St);let Mt=!1;for(const ht of Ct)if(!ee.horizontal[ht])if(Mt)ee.horizontal[ht]=ee.horizontal[0];else{const or=Df(se,s.glyphMap,s.glyphPositions,s.imagePositions,N,Et,x,"center",ht,rt,_e,p.ao.horizontal,!1,H,V);or&&(ee.horizontal[ht]=or,Mt=or.positionedLines.length===1)}Gt()}else{St==="auto"&&(St=Z_(mt));const Ct=Df(se,s.glyphMap,s.glyphPositions,s.imagePositions,N,Et,x,mt,St,rt,_e,p.ao.horizontal,!1,H,V);Ct&&(ee.horizontal[St]=Ct),Gt(),au(Me)&&w&&C&&(ee.vertical=Df(se,s.glyphMap,s.glyphPositions,s.imagePositions,N,Et,x,mt,St,rt,_e,p.ao.vertical,!1,H,V))}}let $e=!1;if(z.icon&&z.icon.name){const Me=s.imageMap[z.icon.name];Me&&(fe=Kt(s.imagePositions[z.icon.name],o.get("icon-offset").evaluate(z,{},s.canonical),o.get("icon-anchor").evaluate(z,{},s.canonical)),$e=!!Me.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=$e:s.bucket.sdfIcons!==$e&&rr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Me.pixelRatio!==s.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const Se=kP(ee.horizontal)||ee.vertical;s.bucket.iconsInText=!!Se&&Se.iconsInText,(Se||fe)&&Hj(s.bucket,z,ee,fe,s.imageMap,y,H,Q,_e,$e,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},p.cI=_m,p.cJ=dd,p.cK=Os,p.cL=gm,p.cM=_d,p.cN=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},p.cO=function(s,n,o,d,y){return l(this,void 0,void 0,(function*(){if(X())try{return yield ki(s,n,o,d,y)}catch{}return(function(x,w,C,I,z){const N=x.width,V=x.height;On&&ni||(On=new OffscreenCanvas(N,V),ni=On.getContext("2d",{willReadFrequently:!0})),On.width=N,On.height=V,ni.drawImage(x,0,0,N,V);const H=ni.getImageData(w,C,I,z);return ni.clearRect(0,0,N,V),H.data})(s,n,o,d,y)}))},p.cP=dh,p.cQ=A,p.cR=xo,p.cS=_l,p.cT=Ql,p.cU=function(s,n){const o=new Map;if(s!=null)if(s.type==="Feature")o.set(Am(s,n),s);else for(const d of s.features)o.set(Am(d,n),d);return o},p.cV=function(s,n){if(s==null)return!0;if(s.type==="Feature")return Am(s,n)!=null;if(s.type==="FeatureCollection"){const o=new Set;for(const d of s.features){const y=Am(d,n);if(y==null||o.has(y))return!1;o.add(y)}return!0}return!1},p.cW=function(s,n,o){var d,y,x,w;if(n.removeAll&&s.clear(),n.remove)for(const C of n.remove)s.delete(C);if(n.add)for(const C of n.add){const I=Am(C,o);I!=null&&s.set(I,C)}if(n.update)for(const C of n.update){let I=s.get(C.id);if(I==null)continue;const z=!C.removeAllProperties&&(((d=C.removeProperties)===null||d===void 0?void 0:d.length)>0||((y=C.addOrUpdateProperties)===null||y===void 0?void 0:y.length)>0);if((C.newGeometry||C.removeAllProperties||z)&&(I=Object.assign({},I),s.set(C.id,I),z&&(I.properties=Object.assign({},I.properties))),C.newGeometry&&(I.geometry=C.newGeometry),C.removeAllProperties)I.properties={};else if(((x=C.removeProperties)===null||x===void 0?void 0:x.length)>0)for(const N of C.removeProperties)Object.prototype.hasOwnProperty.call(I.properties,N)&&delete I.properties[N];if(((w=C.addOrUpdateProperties)===null||w===void 0?void 0:w.length)>0)for(const{key:N,value:V}of C.addOrUpdateProperties)I.properties[N]=V}},p.cX=da,p.ca=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},p.cb=s=>s.type==="symbol",p.cc=s=>s.type==="circle",p.cd=s=>s.type==="heatmap",p.ce=s=>s.type==="line",p.cf=s=>s.type==="fill",p.cg=s=>s.type==="fill-extrusion",p.ch=s=>s.type==="hillshade",p.ci=s=>s.type==="color-relief",p.cj=s=>s.type==="raster",p.ck=s=>s.type==="background",p.cl=s=>s.type==="custom",p.cm=Rt,p.cn=function(s,n,o){const d=Le(n.x-o.x,n.y-o.y),y=Le(s.x-o.x,s.y-o.y);var x,w;return Sa(Math.atan2(d[0]*y[1]-d[1]*y[0],(x=d)[0]*(w=y)[0]+x[1]*w[1]))},p.co=$t,p.cp=function(s,n){return ao[n]&&(s instanceof MouseEvent||s instanceof WheelEvent)},p.cq=function(s,n){return Ao[n]&&"touches"in s},p.cr=function(s){return Ao[s]||ao[s]},p.cs=function(s,n,o){var d=n[0],y=n[1];return s[0]=o[0]*d+o[4]*y+o[12],s[1]=o[1]*d+o[5]*y+o[13],s},p.ct=function(s,n){const{x:o,y:d}=Tm.fromLngLat(n);return!(s<0||s>25||d<0||d>=1||o<0||o>=1)},p.cu=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},p.cv=class extends ji{},p.cw=Xj,p.cy=function(s){return s.message===Co},p.cz=we,p.d=Xe,p.e=tr,p.f=s=>l(void 0,void 0,void 0,(function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(n)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),p.g=ae,p.h=s=>new Promise(((n,o)=>{const d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame((()=>{d.src=Kn}))},d.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(s)],{type:"image/png"});d.src=s.byteLength?URL.createObjectURL(y):Kn})),p.i=Zr,p.j=(s,n)=>je(tr(s,{type:"json"}),n),p.k=ct,p.l=gt,p.m=je,p.n=(s,n)=>je(tr(s,{type:"arrayBuffer"}),n),p.o=function(s){return new _d(s).readFields(Sm,[])},p.p=xd,p.q=si,p.r=jn,p.s=oa,p.t=ih,p.u=Ar,p.v=Ne,p.w=rr,p.x=ic,p.y=sl,p.z=bs})),u("worker",["./shared"],(function(p){class l{constructor(ie,ae){this.keyCache={},ie&&this.replace(ie,ae)}replace(ie,ae){this._layerConfigs={},this._layers={},this.update(ie,[],ae)}update(ie,ae,he){for(const Ce of ie){this._layerConfigs[Ce.id]=Ce;const je=this._layers[Ce.id]=p.bJ(Ce,he);je._featureFilter=p.aa(je.filter,he),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of ae)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const we=p.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ce of we){const je=Ce.map((zt=>this._layers[zt.id])),Xe=je[0];if(Xe.visibility==="none")continue;const Fe=Xe.source||"";let nt=this.familiesBySource[Fe];nt||(nt=this.familiesBySource[Fe]={});const gt=Xe.sourceLayer||"_geojsonTileLayer";let ct=nt[gt];ct||(ct=nt[gt]=[]),ct.push(je)}}}class P{constructor(ie){const ae={},he=[];for(const Xe in ie){const Fe=ie[Xe],nt=ae[Xe]={};for(const gt in Fe){const ct=Fe[+gt];if(!ct||ct.bitmap.width===0||ct.bitmap.height===0)continue;const zt={x:0,y:0,w:ct.bitmap.width+2,h:ct.bitmap.height+2};he.push(zt),nt[gt]={rect:zt,metrics:ct.metrics}}}const{w:we,h:Ce}=p.p(he),je=new p.q({width:we||1,height:Ce||1});for(const Xe in ie){const Fe=ie[Xe];for(const nt in Fe){const gt=Fe[+nt];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const ct=ae[Xe][nt].rect;p.q.copy(gt.bitmap,je,{x:0,y:0},{x:ct.x+1,y:ct.y+1},gt.bitmap)}}this.image=je,this.positions=ae}}p.cD("GlyphAtlas",P);class A{constructor(ie){this.tileID=new p.Z(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,ae,he,we,Ce){return p._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new p.a8;const je=new p.cE(Object.keys(ie.layers).sort()),Xe=new p.cF(this.tileID,this.promoteId);Xe.bucketLayerIDs=[];const Fe={},nt={featureIndex:Xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he,subdivisionGranularity:Ce},gt=ae.familiesBySource[this.source];for(const br in gt){const Er=ie.layers[br];if(!Er)continue;Er.version===1&&p.w(`Vector tile source "${this.source}" layer "${br}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Wn=je.encode(br),_t=[];for(let Xn=0;Xn<Er.length;Xn++){const ln=Er.feature(Xn),oo=Xe.getId(ln,br);_t.push({feature:ln,id:oo,index:Xn,sourceLayerIndex:Wn})}for(const Xn of gt[br]){const ln=Xn[0];ln.source!==this.source&&p.w(`layer.source = ${ln.source} does not equal this.source = ${this.source}`),ln.minzoom&&this.zoom<Math.floor(ln.minzoom)||ln.maxzoom&&this.zoom>=ln.maxzoom||ln.visibility!=="none"&&(E(Xn,this.zoom,he),(Fe[ln.id]=ln.createBucket({index:Xe.bucketLayerIDs.length,layers:Xn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wn,sourceID:this.source})).populate(_t,nt,this.tileID.canonical),Xe.bucketLayerIDs.push(Xn.map((oo=>oo.id))))}}const ct=p.bN(nt.glyphDependencies,(br=>Object.keys(br).map(Number)));this.inFlightDependencies.forEach((br=>br?.abort())),this.inFlightDependencies=[];let zt=Promise.resolve({});if(Object.keys(ct).length){const br=new AbortController;this.inFlightDependencies.push(br),zt=we.sendAsync({type:"GG",data:{stacks:ct,source:this.source,tileID:this.tileID,type:"glyphs"}},br)}const Ne=Object.keys(nt.iconDependencies);let sr=Promise.resolve({});if(Ne.length){const br=new AbortController;this.inFlightDependencies.push(br),sr=we.sendAsync({type:"GI",data:{icons:Ne,source:this.source,tileID:this.tileID,type:"icons"}},br)}const Cr=Object.keys(nt.patternDependencies);let Ut=Promise.resolve({});if(Cr.length){const br=new AbortController;this.inFlightDependencies.push(br),Ut=we.sendAsync({type:"GI",data:{icons:Cr,source:this.source,tileID:this.tileID,type:"patterns"}},br)}const[pr,en,Rn]=yield Promise.all([zt,sr,Ut]),Gn=new P(pr),gn=new p.cG(en,Rn);for(const br in Fe){const Er=Fe[br];Er instanceof p.a9?(E(Er.layers,this.zoom,he),p.cH({bucket:Er,glyphMap:pr,glyphPositions:Gn.positions,imageMap:en,imagePositions:gn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:nt.subdivisionGranularity})):Er.hasPattern&&(Er instanceof p.cI||Er instanceof p.cJ||Er instanceof p.cK)&&(E(Er.layers,this.zoom,he),Er.addFeatures(nt,this.tileID.canonical,gn.patternPositions))}return this.status="done",{buckets:Object.values(Fe).filter((br=>!br.isEmpty())),featureIndex:Xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gn.image,imageAtlas:gn,glyphMap:this.returnDependencies?pr:null,iconMap:this.returnDependencies?en:null,glyphPositions:this.returnDependencies?Gn.positions:null}}))}}function E(ze,ie,ae){const he=new p.F(ie);for(const we of ze)we.recalculate(he,ae)}class k{constructor(ie,ae,he){this.actor=ie,this.layerIndex=ae,this.availableImages=he,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,ae){return p._(this,void 0,void 0,(function*(){const he=yield p.n(ie.request,ae);try{return{vectorTile:new p.cL(new p.cM(he.data)),rawData:he.data,cacheControl:he.cacheControl,expires:he.expires}}catch(we){const Ce=new Uint8Array(he.data);let je=`Unable to parse the tile at ${ie.request.url}, `;throw je+=Ce[0]===31&&Ce[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${we.message}`,new Error(je)}}))}loadTile(ie){return p._(this,void 0,void 0,(function*(){const ae=ie.uid,he=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new p.cN(ie.request),we=new A(ie);this.loading[ae]=we;const Ce=new AbortController;we.abort=Ce;try{const je=yield this.loadVectorTile(ie,Ce);if(delete this.loading[ae],!je)return null;const Xe=je.rawData,Fe={};je.expires&&(Fe.expires=je.expires),je.cacheControl&&(Fe.cacheControl=je.cacheControl);const nt={};if(he){const ct=he.finish();ct&&(nt.resourceTiming=JSON.parse(JSON.stringify(ct)))}we.vectorTile=je.vectorTile;const gt=we.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);this.loaded[ae]=we,this.fetching[ae]={rawTileData:Xe,cacheControl:Fe,resourceTiming:nt};try{const ct=yield gt;return p.e({rawTileData:Xe.slice(0)},ct,Fe,nt)}finally{delete this.fetching[ae]}}catch(je){throw delete this.loading[ae],we.status="done",this.loaded[ae]=we,je}}))}reloadTile(ie){return p._(this,void 0,void 0,(function*(){const ae=ie.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const he=this.loaded[ae];if(he.showCollisionBoxes=ie.showCollisionBoxes,he.status==="parsing"){const we=yield he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);let Ce;if(this.fetching[ae]){const{rawTileData:je,cacheControl:Xe,resourceTiming:Fe}=this.fetching[ae];delete this.fetching[ae],Ce=p.e({rawTileData:je.slice(0)},we,Xe,Fe)}else Ce=we;return Ce}if(he.status==="done"&&he.vectorTile)return he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity)}))}abortTile(ie){return p._(this,void 0,void 0,(function*(){const ae=this.loading,he=ie.uid;ae&&ae[he]&&ae[he].abort&&(ae[he].abort.abort(),delete ae[he])}))}removeTile(ie){return p._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]}))}}class D{constructor(){this.loaded={}}loadTile(ie){return p._(this,void 0,void 0,(function*(){const{uid:ae,encoding:he,rawImageData:we,redFactor:Ce,greenFactor:je,blueFactor:Xe,baseShift:Fe}=ie,nt=we.width+2,gt=we.height+2,ct=p.b(we)?new p.R({width:nt,height:gt},yield p.cO(we,-1,-1,nt,gt)):we,zt=new p.cP(ae,ct,he,Ce,je,Xe,Fe);return this.loaded=this.loaded||{},this.loaded[ae]=zt,zt}))}removeTile(ie){const ae=this.loaded,he=ie.uid;ae&&ae[he]&&delete ae[he]}}var j,G,U=(function(){if(G)return j;function ze(ae,he){if(ae.length!==0){ie(ae[0],he);for(var we=1;we<ae.length;we++)ie(ae[we],!he)}}function ie(ae,he){for(var we=0,Ce=0,je=0,Xe=ae.length,Fe=Xe-1;je<Xe;Fe=je++){var nt=(ae[je][0]-ae[Fe][0])*(ae[Fe][1]+ae[je][1]),gt=we+nt;Ce+=Math.abs(we)>=Math.abs(nt)?we-gt+nt:nt-gt+we,we=gt}we+Ce>=0!=!!he&&ae.reverse()}return G=1,j=function ae(he,we){var Ce,je=he&&he.type;if(je==="FeatureCollection")for(Ce=0;Ce<he.features.length;Ce++)ae(he.features[Ce],we);else if(je==="GeometryCollection")for(Ce=0;Ce<he.geometries.length;Ce++)ae(he.geometries[Ce],we);else if(je==="Feature")ae(he.geometry,we);else if(je==="Polygon")ze(he.coordinates,we);else if(je==="MultiPolygon")for(Ce=0;Ce<he.coordinates.length;Ce++)ze(he.coordinates[Ce],we);return he}})(),F=p.cQ(U);class X extends p.cS{constructor(ie,ae){super(new p.cM,0,ae,[],[]),this.feature=ie,this.type=ie.type,this.properties=ie.tags?ie.tags:{},"id"in ie&&(typeof ie.id=="string"?this.id=parseInt(ie.id,10):typeof ie.id!="number"||isNaN(ie.id)||(this.id=ie.id))}loadGeometry(){const ie=[],ae=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const he of ae){const we=[];for(const Ce of he)we.push(new p.P(Ce[0],Ce[1]));ie.push(we)}return ie}}class J extends p.cR{constructor(ie,ae){super(new p.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ae?ae.version:1,this.extent=ae?ae.extent:4096,this.length=ie.length,this.features=ie}feature(ie){return new X(this.features[ie],this.extent)}}function te(ze,ie){ie.writeVarintField(15,ze.version||1),ie.writeStringField(1,ze.name||""),ie.writeVarintField(5,ze.extent||4096);const ae={keys:[],values:[],keycache:{},valuecache:{}};for(let Ce=0;Ce<ze.length;Ce++)ae.feature=ze.feature(Ce),ie.writeMessage(2,le,ae);const he=ae.keys;for(const Ce of he)ie.writeStringField(3,Ce);const we=ae.values;for(const Ce of we)ie.writeMessage(4,Ie,Ce)}function le(ze,ie){if(!ze.feature)return;const ae=ze.feature;ae.id!==void 0&&ie.writeVarintField(1,ae.id),ie.writeMessage(2,Y,ze),ie.writeVarintField(3,ae.type),ie.writeMessage(4,ge,ae)}function Y(ze,ie){for(const ae in ze.feature?.properties){let he=ze.feature.properties[ae],we=ze.keycache[ae];if(he===null)continue;we===void 0&&(ze.keys.push(ae),we=ze.keys.length-1,ze.keycache[ae]=we),ie.writeVarint(we),typeof he!="string"&&typeof he!="boolean"&&typeof he!="number"&&(he=JSON.stringify(he));const Ce=typeof he+":"+he;let je=ze.valuecache[Ce];je===void 0&&(ze.values.push(he),je=ze.values.length-1,ze.valuecache[Ce]=je),ie.writeVarint(je)}}function re(ze,ie){return(ie<<3)+(7&ze)}function de(ze){return ze<<1^ze>>31}function ge(ze,ie){const ae=ze.loadGeometry(),he=ze.type;let we=0,Ce=0;for(const je of ae){let Xe=1;he===1&&(Xe=je.length),ie.writeVarint(re(1,Xe));const Fe=he===3?je.length-1:je.length;for(let nt=0;nt<Fe;nt++){nt===1&&he!==1&&ie.writeVarint(re(2,Fe-1));const gt=je[nt].x-we,ct=je[nt].y-Ce;ie.writeVarint(de(gt)),ie.writeVarint(de(ct)),we+=gt,Ce+=ct}ze.type===3&&ie.writeVarint(re(7,1))}}function Ie(ze,ie){const ae=typeof ze;ae==="string"?ie.writeStringField(1,ze):ae==="boolean"?ie.writeBooleanField(7,ze):ae==="number"&&(ze%1!=0?ie.writeDoubleField(3,ze):ze<0?ie.writeSVarintField(6,ze):ie.writeVarintField(5,ze))}const We={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},Oe=Math.fround||(Ve=new Float32Array(1),ze=>(Ve[0]=+ze,Ve[0]));var Ve;class Ke{constructor(ie){this.options=Object.assign(Object.create(We),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:ae,minZoom:he,maxZoom:we}=this.options;ae&&console.time("total time");const Ce=`prepare ${ie.length} points`;ae&&console.time(Ce),this.points=ie;const je=[];for(let Fe=0;Fe<ie.length;Fe++){const nt=ie[Fe];if(!nt.geometry)continue;const[gt,ct]=nt.geometry.coordinates,zt=Oe(st(gt)),Ne=Oe(lt(ct));je.push(zt,Ne,1/0,Fe,-1,1),this.options.reduce&&je.push(0)}let Xe=this.trees[we+1]=this._createTree(je);ae&&console.timeEnd(Ce);for(let Fe=we;Fe>=he;Fe--){const nt=+Date.now();Xe=this.trees[Fe]=this._createTree(this._cluster(Xe,Fe)),ae&&console.log("z%d: %d clusters in %dms",Fe,Xe.numItems,+Date.now()-nt)}return ae&&console.timeEnd("total time"),this}getClusters(ie,ae){let he=((ie[0]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,ie[1]));let Ce=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)he=-180,Ce=180;else if(he>Ce){const ct=this.getClusters([he,we,180,je],ae),zt=this.getClusters([-180,we,Ce,je],ae);return ct.concat(zt)}const Xe=this.trees[this._limitZoom(ae)],Fe=Xe.range(st(he),lt(je),st(Ce),lt(we)),nt=Xe.data,gt=[];for(const ct of Fe){const zt=this.stride*ct;gt.push(nt[zt+5]>1?ot(nt,zt,this.clusterProps):this.points[nt[zt+3]])}return gt}getChildren(ie){const ae=this._getOriginId(ie),he=this._getOriginZoom(ie),we="No cluster with the specified id.",Ce=this.trees[he];if(!Ce)throw new Error(we);const je=Ce.data;if(ae*this.stride>=je.length)throw new Error(we);const Xe=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Fe=Ce.within(je[ae*this.stride],je[ae*this.stride+1],Xe),nt=[];for(const gt of Fe){const ct=gt*this.stride;je[ct+4]===ie&&nt.push(je[ct+5]>1?ot(je,ct,this.clusterProps):this.points[je[ct+3]])}if(nt.length===0)throw new Error(we);return nt}getLeaves(ie,ae,he){const we=[];return this._appendLeaves(we,ie,ae=ae||10,he=he||0,0),we}getTile(ie,ae,he){const we=this.trees[this._limitZoom(ie)],Ce=Math.pow(2,ie),{extent:je,radius:Xe}=this.options,Fe=Xe/je,nt=(he-Fe)/Ce,gt=(he+1+Fe)/Ce,ct={features:[]};return this._addTileFeatures(we.range((ae-Fe)/Ce,nt,(ae+1+Fe)/Ce,gt),we.data,ae,he,Ce,ct),ae===0&&this._addTileFeatures(we.range(1-Fe/Ce,nt,1,gt),we.data,Ce,he,Ce,ct),ae===Ce-1&&this._addTileFeatures(we.range(0,nt,Fe/Ce,gt),we.data,-1,he,Ce,ct),ct.features.length?ct:null}getClusterExpansionZoom(ie){let ae=this._getOriginZoom(ie)-1;for(;ae<=this.options.maxZoom;){const he=this.getChildren(ie);if(ae++,he.length!==1)break;ie=he[0].properties.cluster_id}return ae}_appendLeaves(ie,ae,he,we,Ce){const je=this.getChildren(ae);for(const Xe of je){const Fe=Xe.properties;if(Fe&&Fe.cluster?Ce+Fe.point_count<=we?Ce+=Fe.point_count:Ce=this._appendLeaves(ie,Fe.cluster_id,he,we,Ce):Ce<we?Ce++:ie.push(Xe),ie.length===he)break}return Ce}_createTree(ie){const ae=new p.aI(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<ie.length;he+=this.stride)ae.add(ie[he],ie[he+1]);return ae.finish(),ae.data=ie,ae}_addTileFeatures(ie,ae,he,we,Ce,je){for(const Xe of ie){const Fe=Xe*this.stride,nt=ae[Fe+5]>1;let gt,ct,zt;if(nt)gt=at(ae,Fe,this.clusterProps),ct=ae[Fe],zt=ae[Fe+1];else{const Cr=this.points[ae[Fe+3]];gt=Cr.properties;const[Ut,pr]=Cr.geometry.coordinates;ct=st(Ut),zt=lt(pr)}const Ne={type:1,geometry:[[Math.round(this.options.extent*(ct*Ce-he)),Math.round(this.options.extent*(zt*Ce-we))]],tags:gt};let sr;sr=nt||this.options.generateId?ae[Fe+3]:this.points[ae[Fe+3]].id,sr!==void 0&&(Ne.id=sr),je.features.push(Ne)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,ae){const{radius:he,extent:we,reduce:Ce,minPoints:je}=this.options,Xe=he/(we*Math.pow(2,ae)),Fe=ie.data,nt=[],gt=this.stride;for(let ct=0;ct<Fe.length;ct+=gt){if(Fe[ct+2]<=ae)continue;Fe[ct+2]=ae;const zt=Fe[ct],Ne=Fe[ct+1],sr=ie.within(Fe[ct],Fe[ct+1],Xe),Cr=Fe[ct+5];let Ut=Cr;for(const pr of sr){const en=pr*gt;Fe[en+2]>ae&&(Ut+=Fe[en+5])}if(Ut>Cr&&Ut>=je){let pr,en=zt*Cr,Rn=Ne*Cr,Gn=-1;const gn=(ct/gt<<5)+(ae+1)+this.points.length;for(const br of sr){const Er=br*gt;if(Fe[Er+2]<=ae)continue;Fe[Er+2]=ae;const Wn=Fe[Er+5];en+=Fe[Er]*Wn,Rn+=Fe[Er+1]*Wn,Fe[Er+4]=gn,Ce&&(pr||(pr=this._map(Fe,ct,!0),Gn=this.clusterProps.length,this.clusterProps.push(pr)),Ce(pr,this._map(Fe,Er)))}Fe[ct+4]=gn,nt.push(en/Ut,Rn/Ut,1/0,gn,-1,Ut),Ce&&nt.push(Gn)}else{for(let pr=0;pr<gt;pr++)nt.push(Fe[ct+pr]);if(Ut>1)for(const pr of sr){const en=pr*gt;if(!(Fe[en+2]<=ae)){Fe[en+2]=ae;for(let Rn=0;Rn<gt;Rn++)nt.push(Fe[en+Rn])}}}}return nt}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,ae,he){if(ie[ae+5]>1){const je=this.clusterProps[ie[ae+6]];return he?Object.assign({},je):je}const we=this.points[ie[ae+3]].properties,Ce=this.options.map(we);return he&&Ce===we?Object.assign({},Ce):Ce}}function ot(ze,ie,ae){return{type:"Feature",id:ze[ie+3],properties:at(ze,ie,ae),geometry:{type:"Point",coordinates:[(he=ze[ie],360*(he-.5)),Le(ze[ie+1])]}};var he}function at(ze,ie,ae){const he=ze[ie+5],we=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,Ce=ze[ie+6],je=Ce===-1?{}:Object.assign({},ae[Ce]);return Object.assign(je,{cluster:!0,cluster_id:ze[ie+3],point_count:he,point_count_abbreviated:we})}function st(ze){return ze/360+.5}function lt(ze){const ie=Math.sin(ze*Math.PI/180),ae=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ae<0?0:ae>1?1:ae}function Le(ze){const ie=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function tt(ze,ie,ae,he){let we=he;const Ce=ie+(ae-ie>>1);let je,Xe=ae-ie;const Fe=ze[ie],nt=ze[ie+1],gt=ze[ae],ct=ze[ae+1];for(let zt=ie+3;zt<ae;zt+=3){const Ne=ut(ze[zt],ze[zt+1],Fe,nt,gt,ct);if(Ne>we)je=zt,we=Ne;else if(Ne===we){const sr=Math.abs(zt-Ce);sr<Xe&&(je=zt,Xe=sr)}}we>he&&(je-ie>3&&tt(ze,ie,je,he),ze[je+2]=we,ae-je>3&&tt(ze,je,ae,he))}function ut(ze,ie,ae,he,we,Ce){let je=we-ae,Xe=Ce-he;if(je!==0||Xe!==0){const Fe=((ze-ae)*je+(ie-he)*Xe)/(je*je+Xe*Xe);Fe>1?(ae=we,he=Ce):Fe>0&&(ae+=je*Fe,he+=Xe*Fe)}return je=ze-ae,Xe=ie-he,je*je+Xe*Xe}function Ae(ze,ie,ae,he){const we={id:ze??null,type:ie,geometry:ae,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")qe(we,ae);else if(ie==="Polygon")qe(we,ae[0]);else if(ie==="MultiLineString")for(const Ce of ae)qe(we,Ce);else if(ie==="MultiPolygon")for(const Ce of ae)qe(we,Ce[0]);return we}function qe(ze,ie){for(let ae=0;ae<ie.length;ae+=3)ze.minX=Math.min(ze.minX,ie[ae]),ze.minY=Math.min(ze.minY,ie[ae+1]),ze.maxX=Math.max(ze.maxX,ie[ae]),ze.maxY=Math.max(ze.maxY,ie[ae+1])}function yt(ze,ie,ae,he){if(!ie.geometry)return;const we=ie.geometry.coordinates;if(we&&we.length===0)return;const Ce=ie.geometry.type,je=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let Xe=[],Fe=ie.id;if(ae.promoteId?Fe=ie.properties[ae.promoteId]:ae.generateId&&(Fe=he||0),Ce==="Point")Rt(we,Xe);else if(Ce==="MultiPoint")for(const nt of we)Rt(nt,Xe);else if(Ce==="LineString")$t(we,Xe,je,!1);else if(Ce==="MultiLineString"){if(ae.lineMetrics){for(const nt of we)Xe=[],$t(nt,Xe,je,!1),ze.push(Ae(Fe,"LineString",Xe,ie.properties));return}Wt(we,Xe,je,!1)}else if(Ce==="Polygon")Wt(we,Xe,je,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(const nt of ie.geometry.geometries)yt(ze,{id:Fe,geometry:nt,properties:ie.properties},ae,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const nt of we){const gt=[];Wt(nt,gt,je,!0),Xe.push(gt)}}ze.push(Ae(Fe,Ce,Xe,ie.properties))}function Rt(ze,ie){ie.push(er(ze[0]),tr(ze[1]),0)}function $t(ze,ie,ae,he){let we,Ce,je=0;for(let Fe=0;Fe<ze.length;Fe++){const nt=er(ze[Fe][0]),gt=tr(ze[Fe][1]);ie.push(nt,gt,0),Fe>0&&(je+=he?(we*gt-nt*Ce)/2:Math.sqrt(Math.pow(nt-we,2)+Math.pow(gt-Ce,2))),we=nt,Ce=gt}const Xe=ie.length-3;ie[2]=1,tt(ie,0,Xe,ae),ie[Xe+2]=1,ie.size=Math.abs(je),ie.start=0,ie.end=ie.size}function Wt(ze,ie,ae,he){for(let we=0;we<ze.length;we++){const Ce=[];$t(ze[we],Ce,ae,he),ie.push(Ce)}}function er(ze){return ze/360+.5}function tr(ze){const ie=Math.sin(ze*Math.PI/180),ae=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ae<0?0:ae>1?1:ae}function vt(ze,ie,ae,he,we,Ce,je,Xe){if(he/=ie,Ce>=(ae/=ie)&&je<he)return ze;if(je<ae||Ce>=he)return null;const Fe=[];for(const nt of ze){const gt=nt.geometry;let ct=nt.type;const zt=we===0?nt.minX:nt.minY,Ne=we===0?nt.maxX:nt.maxY;if(zt>=ae&&Ne<he){Fe.push(nt);continue}if(Ne<ae||zt>=he)continue;let sr=[];if(ct==="Point"||ct==="MultiPoint")Ft(gt,sr,ae,he,we);else if(ct==="LineString")ir(gt,sr,ae,he,we,!1,Xe.lineMetrics);else if(ct==="MultiLineString")dr(gt,sr,ae,he,we,!1);else if(ct==="Polygon")dr(gt,sr,ae,he,we,!0);else if(ct==="MultiPolygon")for(const Cr of gt){const Ut=[];dr(Cr,Ut,ae,he,we,!0),Ut.length&&sr.push(Ut)}if(sr.length){if(Xe.lineMetrics&&ct==="LineString"){for(const Cr of sr)Fe.push(Ae(nt.id,ct,Cr,nt.tags));continue}ct!=="LineString"&&ct!=="MultiLineString"||(sr.length===1?(ct="LineString",sr=sr[0]):ct="MultiLineString"),ct!=="Point"&&ct!=="MultiPoint"||(ct=sr.length===3?"Point":"MultiPoint"),Fe.push(Ae(nt.id,ct,sr,nt.tags))}}return Fe.length?Fe:null}function Ft(ze,ie,ae,he,we){for(let Ce=0;Ce<ze.length;Ce+=3){const je=ze[Ce+we];je>=ae&&je<=he&&rr(ie,ze[Ce],ze[Ce+1],ze[Ce+2])}}function ir(ze,ie,ae,he,we,Ce,je){let Xe=pt(ze);const Fe=we===0?qr:Zr;let nt,gt,ct=ze.start;for(let Ut=0;Ut<ze.length-3;Ut+=3){const pr=ze[Ut],en=ze[Ut+1],Rn=ze[Ut+2],Gn=ze[Ut+3],gn=ze[Ut+4],br=we===0?pr:en,Er=we===0?Gn:gn;let Wn=!1;je&&(nt=Math.sqrt(Math.pow(pr-Gn,2)+Math.pow(en-gn,2))),br<ae?Er>ae&&(gt=Fe(Xe,pr,en,Gn,gn,ae),je&&(Xe.start=ct+nt*gt)):br>he?Er<he&&(gt=Fe(Xe,pr,en,Gn,gn,he),je&&(Xe.start=ct+nt*gt)):rr(Xe,pr,en,Rn),Er<ae&&br>=ae&&(gt=Fe(Xe,pr,en,Gn,gn,ae),Wn=!0),Er>he&&br<=he&&(gt=Fe(Xe,pr,en,Gn,gn,he),Wn=!0),!Ce&&Wn&&(je&&(Xe.end=ct+nt*gt),ie.push(Xe),Xe=pt(ze)),je&&(ct+=nt)}let zt=ze.length-3;const Ne=ze[zt],sr=ze[zt+1],Cr=we===0?Ne:sr;Cr>=ae&&Cr<=he&&rr(Xe,Ne,sr,ze[zt+2]),zt=Xe.length-3,Ce&&zt>=3&&(Xe[zt]!==Xe[0]||Xe[zt+1]!==Xe[1])&&rr(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&ie.push(Xe)}function pt(ze){const ie=[];return ie.size=ze.size,ie.start=ze.start,ie.end=ze.end,ie}function dr(ze,ie,ae,he,we,Ce){for(const je of ze)ir(je,ie,ae,he,we,Ce,!1)}function rr(ze,ie,ae,he){ze.push(ie,ae,he)}function qr(ze,ie,ae,he,we,Ce){const je=(Ce-ie)/(he-ie);return rr(ze,Ce,ae+(we-ae)*je,1),je}function Zr(ze,ie,ae,he,we,Ce){const je=(Ce-ae)/(we-ae);return rr(ze,ie+(he-ie)*je,Ce,1),je}function vn(ze,ie){const ae=[];for(let he=0;he<ze.length;he++){const we=ze[he],Ce=we.type;let je;if(Ce==="Point"||Ce==="MultiPoint"||Ce==="LineString")je=qn(we.geometry,ie);else if(Ce==="MultiLineString"||Ce==="Polygon"){je=[];for(const Xe of we.geometry)je.push(qn(Xe,ie))}else if(Ce==="MultiPolygon"){je=[];for(const Xe of we.geometry){const Fe=[];for(const nt of Xe)Fe.push(qn(nt,ie));je.push(Fe)}}ae.push(Ae(we.id,Ce,je,we.tags))}return ae}function qn(ze,ie){const ae=[];ae.size=ze.size,ze.start!==void 0&&(ae.start=ze.start,ae.end=ze.end);for(let he=0;he<ze.length;he+=3)ae.push(ze[he]+ie,ze[he+1],ze[he+2]);return ae}function Kn(ze,ie){if(ze.transformed)return ze;const ae=1<<ze.z,he=ze.x,we=ze.y;for(const Ce of ze.features){const je=Ce.geometry,Xe=Ce.type;if(Ce.geometry=[],Xe===1)for(let Fe=0;Fe<je.length;Fe+=2)Ce.geometry.push(ki(je[Fe],je[Fe+1],ie,ae,he,we));else for(let Fe=0;Fe<je.length;Fe++){const nt=[];for(let gt=0;gt<je[Fe].length;gt+=2)nt.push(ki(je[Fe][gt],je[Fe][gt+1],ie,ae,he,we));Ce.geometry.push(nt)}}return ze.transformed=!0,ze}function ki(ze,ie,ae,he,we,Ce){return[Math.round(ae*(ze*he-we)),Math.round(ae*(ie*he-Ce))]}function On(ze,ie,ae,he,we){const Ce=ie===we.maxZoom?0:we.tolerance/((1<<ie)*we.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:ze.length,source:null,x:ae,y:he,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Xe of ze)ni(je,Xe,Ce,we);return je}function ni(ze,ie,ae,he){const we=ie.geometry,Ce=ie.type,je=[];if(ze.minX=Math.min(ze.minX,ie.minX),ze.minY=Math.min(ze.minY,ie.minY),ze.maxX=Math.max(ze.maxX,ie.maxX),ze.maxY=Math.max(ze.maxY,ie.maxY),Ce==="Point"||Ce==="MultiPoint")for(let Xe=0;Xe<we.length;Xe+=3)je.push(we[Xe],we[Xe+1]),ze.numPoints++,ze.numSimplified++;else if(Ce==="LineString")oa(je,we,ze,ae,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(let Xe=0;Xe<we.length;Xe++)oa(je,we[Xe],ze,ae,Ce==="Polygon",Xe===0);else if(Ce==="MultiPolygon")for(let Xe=0;Xe<we.length;Xe++){const Fe=we[Xe];for(let nt=0;nt<Fe.length;nt++)oa(je,Fe[nt],ze,ae,!0,nt===0)}if(je.length){let Xe=ie.tags||null;if(Ce==="LineString"&&he.lineMetrics){Xe={};for(const nt in ie.tags)Xe[nt]=ie.tags[nt];Xe.mapbox_clip_start=we.start/we.size,Xe.mapbox_clip_end=we.end/we.size}const Fe={geometry:je,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:Xe};ie.id!==null&&(Fe.id=ie.id),ze.features.push(Fe)}}function oa(ze,ie,ae,he,we,Ce){const je=he*he;if(he>0&&ie.size<(we?je:he))return void(ae.numPoints+=ie.length/3);const Xe=[];for(let Fe=0;Fe<ie.length;Fe+=3)(he===0||ie[Fe+2]>je)&&(ae.numSimplified++,Xe.push(ie[Fe],ie[Fe+1])),ae.numPoints++;we&&(function(Fe,nt){let gt=0;for(let ct=0,zt=Fe.length,Ne=zt-2;ct<zt;Ne=ct,ct+=2)gt+=(Fe[ct]-Fe[Ne])*(Fe[ct+1]+Fe[Ne+1]);if(gt>0===nt)for(let ct=0,zt=Fe.length;ct<zt/2;ct+=2){const Ne=Fe[ct],sr=Fe[ct+1];Fe[ct]=Fe[zt-2-ct],Fe[ct+1]=Fe[zt-1-ct],Fe[zt-2-ct]=Ne,Fe[zt-1-ct]=sr}})(Xe,Ce),ze.push(Xe)}const Ba={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Sa{constructor(ie,ae){const he=(ae=this.options=(function(Ce,je){for(const Xe in je)Ce[Xe]=je[Xe];return Ce})(Object.create(Ba),ae)).debug;if(he&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let we=(function(Ce,je){const Xe=[];if(Ce.type==="FeatureCollection")for(let Fe=0;Fe<Ce.features.length;Fe++)yt(Xe,Ce.features[Fe],je,Fe);else yt(Xe,Ce.type==="Feature"?Ce:{geometry:Ce},je);return Xe})(ie,ae);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),we=(function(Ce,je){const Xe=je.buffer/je.extent;let Fe=Ce;const nt=vt(Ce,1,-1-Xe,Xe,0,-1,2,je),gt=vt(Ce,1,1-Xe,2+Xe,0,-1,2,je);return(nt||gt)&&(Fe=vt(Ce,1,-Xe,1+Xe,0,-1,2,je)||[],nt&&(Fe=vn(nt,1).concat(Fe)),gt&&(Fe=Fe.concat(vn(gt,-1)))),Fe})(we,ae),we.length&&this.splitTile(we,0,0,0),he&&(we.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ie,ae,he,we,Ce,je,Xe){const Fe=[ie,ae,he,we],nt=this.options,gt=nt.debug;for(;Fe.length;){we=Fe.pop(),he=Fe.pop(),ae=Fe.pop(),ie=Fe.pop();const ct=1<<ae,zt=Ao(ae,he,we);let Ne=this.tiles[zt];if(!Ne&&(gt>1&&console.time("creation"),Ne=this.tiles[zt]=On(ie,ae,he,we,nt),this.tileCoords.push({z:ae,x:he,y:we}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,he,we,Ne.numFeatures,Ne.numPoints,Ne.numSimplified),console.timeEnd("creation"));const Wn=`z${ae}`;this.stats[Wn]=(this.stats[Wn]||0)+1,this.total++}if(Ne.source=ie,Ce==null){if(ae===nt.indexMaxZoom||Ne.numPoints<=nt.indexMaxPoints)continue}else{if(ae===nt.maxZoom||ae===Ce)continue;if(Ce!=null){const Wn=Ce-ae;if(he!==je>>Wn||we!==Xe>>Wn)continue}}if(Ne.source=null,ie.length===0)continue;gt>1&&console.time("clipping");const sr=.5*nt.buffer/nt.extent,Cr=.5-sr,Ut=.5+sr,pr=1+sr;let en=null,Rn=null,Gn=null,gn=null,br=vt(ie,ct,he-sr,he+Ut,0,Ne.minX,Ne.maxX,nt),Er=vt(ie,ct,he+Cr,he+pr,0,Ne.minX,Ne.maxX,nt);ie=null,br&&(en=vt(br,ct,we-sr,we+Ut,1,Ne.minY,Ne.maxY,nt),Rn=vt(br,ct,we+Cr,we+pr,1,Ne.minY,Ne.maxY,nt),br=null),Er&&(Gn=vt(Er,ct,we-sr,we+Ut,1,Ne.minY,Ne.maxY,nt),gn=vt(Er,ct,we+Cr,we+pr,1,Ne.minY,Ne.maxY,nt),Er=null),gt>1&&console.timeEnd("clipping"),Fe.push(en||[],ae+1,2*he,2*we),Fe.push(Rn||[],ae+1,2*he,2*we+1),Fe.push(Gn||[],ae+1,2*he+1,2*we),Fe.push(gn||[],ae+1,2*he+1,2*we+1)}}getTile(ie,ae,he){ie=+ie,ae=+ae,he=+he;const we=this.options,{extent:Ce,debug:je}=we;if(ie<0||ie>24)return null;const Xe=1<<ie,Fe=Ao(ie,ae=ae+Xe&Xe-1,he);if(this.tiles[Fe])return Kn(this.tiles[Fe],Ce);je>1&&console.log("drilling down to z%d-%d-%d",ie,ae,he);let nt,gt=ie,ct=ae,zt=he;for(;!nt&&gt>0;)gt--,ct>>=1,zt>>=1,nt=this.tiles[Ao(gt,ct,zt)];return nt&&nt.source?(je>1&&(console.log("found parent tile z%d-%d-%d",gt,ct,zt),console.time("drilling down")),this.splitTile(nt.source,gt,ct,zt,ie,ae,he),je>1&&console.timeEnd("drilling down"),this.tiles[Fe]?Kn(this.tiles[Fe],Ce):null):null}}function Ao(ze,ie,ae){return 32*((1<<ze)*ae+ie)+ze}class ao extends k{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,ae){return p._(this,void 0,void 0,(function*(){const he=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const we=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!we)return null;const Ce=new J(we.features,{version:2,extent:p.$});let je=(function(Xe){const Fe=new p.cM;return(function(nt,gt){for(const ct in nt.layers)gt.writeMessage(3,te,nt.layers[ct])})(Xe,Fe),Fe.finish()})(Ce);return je.byteOffset===0&&je.byteLength===je.buffer.byteLength||(je=new Uint8Array(je)),{vectorTile:Ce,rawData:je.buffer}}))}loadData(ie){return p._(this,void 0,void 0,(function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const he=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new p.cN(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest);const we=yield this._pendingData;this._geoJSONIndex=ie.cluster?new Ke((function({superclusterOptions:je,clusterProperties:Xe}){if(!Xe||!je)return je;const Fe={},nt={},gt={accumulated:null,zoom:0},ct={properties:null},zt=Object.keys(Xe);for(const Ne of zt){const[sr,Cr]=Xe[Ne],Ut=p.cT(Cr),pr=p.cT(typeof sr=="string"?[sr,["accumulated"],["get",Ne]]:sr);Fe[Ne]=Ut.value,nt[Ne]=pr.value}return je.map=Ne=>{ct.properties=Ne;const sr={};for(const Cr of zt)sr[Cr]=Fe[Cr].evaluate(gt,ct);return sr},je.reduce=(Ne,sr)=>{ct.properties=sr;for(const Cr of zt)gt.accumulated=Ne[Cr],Ne[Cr]=nt[Cr].evaluate(gt,ct)},je})(ie)).load(we.features):(function(je,Xe){return new Sa(je,Xe)})(we,ie.geojsonVtOptions),this.loaded={};const Ce={data:we};if(he){const je=he.finish();je&&(Ce.resourceTiming={},Ce.resourceTiming[ie.source]=JSON.parse(JSON.stringify(je)))}return Ce}catch(we){if(delete this._pendingRequest,p.cy(we))return{abandoned:!0};throw we}}))}getData(){return p._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ie){const ae=this.loaded;return ae&&ae[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,ae){return p._(this,void 0,void 0,(function*(){let he=yield this.loadGeoJSON(ie,ae);if(delete this._pendingRequest,typeof he!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(F(he,!0),ie.filter){const we=p.cT(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map((je=>`${je.key}: ${je.message}`)).join(", "));he={type:"FeatureCollection",features:he.features.filter((je=>we.value.evaluate({zoom:0},je)))}}return he}))}loadGeoJSON(ie,ae){return p._(this,void 0,void 0,(function*(){const{promoteId:he}=ie;if(ie.request){const we=yield p.j(ie.request,ae);return this._dataUpdateable=p.cV(we.data,he)?p.cU(we.data,he):void 0,we.data}if(typeof ie.data=="string")try{const we=JSON.parse(ie.data);return this._dataUpdateable=p.cV(we,he)?p.cU(we,he):void 0,we}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return p.cW(this._dataUpdateable,ie.dataDiff,he),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ie){return p._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class Co{constructor(ie){this.self=ie,this.actor=new p.J(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ae,he)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=he},this.self.addProtocol=p.cA,this.self.removeProtocol=p.cB,this.self.registerRTLTextPlugin=ae=>{p.cX.setMethods(ae)},this.actor.registerMessageHandler("LDT",((ae,he)=>this._getDEMWorkerSource(ae,he.source).loadTile(he))),this.actor.registerMessageHandler("RDT",((ae,he)=>p._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ae,he.source).removeTile(he)})))),this.actor.registerMessageHandler("GCEZ",((ae,he)=>p._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterExpansionZoom(he)})))),this.actor.registerMessageHandler("GCC",((ae,he)=>p._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterChildren(he)})))),this.actor.registerMessageHandler("GCL",((ae,he)=>p._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterLeaves(he)})))),this.actor.registerMessageHandler("LD",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).loadData(he))),this.actor.registerMessageHandler("GD",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).getData())),this.actor.registerMessageHandler("LT",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).loadTile(he))),this.actor.registerMessageHandler("RT",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).reloadTile(he))),this.actor.registerMessageHandler("AT",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).abortTile(he))),this.actor.registerMessageHandler("RMT",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).removeTile(he))),this.actor.registerMessageHandler("RS",((ae,he)=>p._(this,void 0,void 0,(function*(){if(!this.workerSources[ae]||!this.workerSources[ae][he.type]||!this.workerSources[ae][he.type][he.source])return;const we=this.workerSources[ae][he.type][he.source];delete this.workerSources[ae][he.type][he.source],we.removeSource!==void 0&&we.removeSource(he)})))),this.actor.registerMessageHandler("RM",(ae=>p._(this,void 0,void 0,(function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae],this.globalStates.delete(ae)})))),this.actor.registerMessageHandler("SR",((ae,he)=>p._(this,void 0,void 0,(function*(){this.referrer=he})))),this.actor.registerMessageHandler("SRPS",((ae,he)=>this._syncRTLPluginState(ae,he))),this.actor.registerMessageHandler("IS",((ae,he)=>p._(this,void 0,void 0,(function*(){this.self.importScripts(he)})))),this.actor.registerMessageHandler("SI",((ae,he)=>this._setImages(ae,he))),this.actor.registerMessageHandler("UL",((ae,he)=>p._(this,void 0,void 0,(function*(){this._getLayerIndex(ae).update(he.layers,he.removedIds,this._getGlobalState(ae))})))),this.actor.registerMessageHandler("UGS",((ae,he)=>p._(this,void 0,void 0,(function*(){const we=this._getGlobalState(ae);for(const Ce in he)we[Ce]=he[Ce]})))),this.actor.registerMessageHandler("SL",((ae,he)=>p._(this,void 0,void 0,(function*(){this._getLayerIndex(ae).replace(he,this._getGlobalState(ae))}))))}_getGlobalState(ie){let ae=this.globalStates.get(ie);return ae||(ae={},this.globalStates.set(ie,ae)),ae}_setImages(ie,ae){return p._(this,void 0,void 0,(function*(){this.availableImages[ie]=ae;for(const he in this.workerSources[ie]){const we=this.workerSources[ie][he];for(const Ce in we)we[Ce].availableImages=ae}}))}_syncRTLPluginState(ie,ae){return p._(this,void 0,void 0,(function*(){return yield p.cX.syncState(ae,this.self.importScripts)}))}_getAvailableImages(ie){let ae=this.availableImages[ie];return ae||(ae=[]),ae}_getLayerIndex(ie){let ae=this.layerIndexes[ie];return ae||(ae=this.layerIndexes[ie]=new l),ae}_getWorkerSource(ie,ae,he){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][ae]||(this.workerSources[ie][ae]={}),!this.workerSources[ie][ae][he]){const we={sendAsync:(Ce,je)=>(Ce.targetMapId=ie,this.actor.sendAsync(Ce,je))};switch(ae){case"vector":this.workerSources[ie][ae][he]=new k(we,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][ae][he]=new ao(we,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][ae][he]=new this.externalWorkerSourceTypes[ae](we,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][ae][he]}_getDEMWorkerSource(ie,ae){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][ae]||(this.demWorkerSources[ie][ae]=new D),this.demWorkerSources[ie][ae]}}return p.i(self)&&(self.worker=new Co(self)),Co})),u("index",["exports","./shared"],(function(p,l){var P="5.7.3";function A(){var _=new l.A(4);return l.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let E,k;const D={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_,r,c){const f=requestAnimationFrame((b=>{v(),r(b)})),{unsubscribe:v}=l.s(_.signal,"abort",(()=>{v(),cancelAnimationFrame(f),c(l.c())}),!1)},frameAsync(_){return new Promise(((r,c)=>{this.frame(_,r,c)}))},getImageData(_,r=0){return this.getImageCanvasContext(_).getImageData(-r,-r,_.width+2*r,_.height+2*r)},getImageCanvasContext(_){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=_.width,r.height=_.height,c.drawImage(_,0,0,_.width,_.height),c},resolveURL:_=>(E||(E=document.createElement("a")),E.href=_,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class j{static testProp(r){if(!j.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in j.docStyle)return r[c];return r[0]}static create(r,c,f){const v=window.document.createElement(r);return c!==void 0&&(v.className=c),f&&f.appendChild(v),v}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){j.docStyle&&j.selectProp&&(j.userSelect=j.docStyle[j.selectProp],j.docStyle[j.selectProp]="none")}static enableDrag(){j.docStyle&&j.selectProp&&(j.docStyle[j.selectProp]=j.userSelect)}static setTransform(r,c){r.style[j.transformProp]=c}static addEventListener(r,c,f,v={}){r.addEventListener(c,f,"passive"in v?v:v.capture)}static removeEventListener(r,c,f,v={}){r.removeEventListener(c,f,"passive"in v?v:v.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",j.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",j.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",j.suppressClickInternal,!0)}),0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,f){const v=c.boundingClientRect;return new l.P((f.clientX-v.left)/c.x-r.clientLeft,(f.clientY-v.top)/c.y-r.clientTop)}static mousePos(r,c){const f=j.getScale(r);return j.getPoint(r,f,c)}static touchPos(r,c){const f=[],v=j.getScale(r);for(let b=0;b<c.length;b++)f.push(j.getPoint(r,v,c[b]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),f=c.querySelectorAll("script");for(const v of f)v.remove();return j.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const f=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!f.includes("javascript:")&&!f.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const f of c)j.removeAttributes(f),j.clean(f)}static removeAttributes(r){for(const{name:c,value:f}of r.attributes)j.isPossiblyDangerous(c,f)&&r.removeAttribute(c)}}j.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,j.selectProp=j.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),j.transformProp=j.testProp(["transform","WebkitTransform"]);const G={supported:!1,testSupport:function(_){!X&&F&&(J?te(_):U=_)}};let U,F,X=!1,J=!1;function te(_){const r=_.createTexture();_.bindTexture(_.TEXTURE_2D,r);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,F),_.isContextLost())return;G.supported=!0}catch{}_.deleteTexture(r),X=!0}var le;typeof document<"u"&&(F=document.createElement("img"),F.onload=()=>{U&&te(U),U=null,J=!0},F.onerror=()=>{X=!0,U=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(_){let r,c,f,v;_.resetRequestQueue=()=>{r=[],c=0,f=0,v={}},_.addThrottleControl=R=>{const L=f++;return v[L]=R,L},_.removeThrottleControl=R=>{delete v[R],T()},_.getImage=(R,L,$=!0)=>new Promise(((Z,W)=>{G.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),l.e(R,{type:"image"}),r.push({abortController:L,requestParameters:R,supportImageRefresh:$,state:"queued",onError:K=>{W(K)},onSuccess:K=>{Z(K)}}),T()}));const b=R=>l._(this,void 0,void 0,(function*(){R.state="running";const{requestParameters:L,supportImageRefresh:$,onError:Z,onSuccess:W,abortController:K}=R,ne=$===!1&&!l.i(self)&&!l.g(L.url)&&(!L.headers||Object.keys(L.headers).reduce(((me,ye)=>me&&ye==="accept"),!0));c++;const ue=ne?O(L,K):l.m(L,K);try{const me=yield ue;delete R.abortController,R.state="completed",me.data instanceof HTMLImageElement||l.b(me.data)?W(me):me.data&&W({data:yield(pe=me.data,typeof createImageBitmap=="function"?l.f(pe):l.h(pe)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete R.abortController,Z(me)}finally{c--,T()}var pe})),T=()=>{const R=(()=>{for(const L of Object.keys(v))if(v[L]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=c;L<R&&r.length>0;L++){const $=r.shift();$.abortController.signal.aborted?L--:b($)}},O=(R,L)=>new Promise((($,Z)=>{const W=new Image,K=R.url,ne=R.credentials;ne&&ne==="include"?W.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!l.d(K))&&(W.crossOrigin="anonymous"),L.signal.addEventListener("abort",(()=>{W.src="",Z(l.c())})),W.fetchPriority="high",W.onload=()=>{W.onerror=W.onload=null,$({data:W})},W.onerror=()=>{W.onerror=W.onload=null,L.signal.aborted||Z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},W.src=K}))})(le||(le={})),le.resetRequestQueue();class Y{constructor(r){this._transformRequestFn=r??null}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function re(_){const r=[];if(typeof _=="string")r.push({id:"default",url:_});else if(_&&_.length>0){const c=[];for(const{id:f,url:v}of _){const b=`${f}${v}`;c.indexOf(b)===-1&&(c.push(b),r.push({id:f,url:v}))}}return r}function de(_,r,c){try{const f=new URL(_);return f.pathname+=`${r}${c}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ge(_){const{userImage:r}=_;return!!(r&&r.render&&r.render())&&(_.data.replace(new Uint8Array(r.data.buffer)),!0)}class Ie extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:f}of this.requestors)f(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const f=c.spriteData;c.data=new l.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let f=!0;const v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,c){if(!r)return!0;let f=0;for(const v of r){if(v[0]<f||v[1]<v[0]||c<v[1])return!1;f=v[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const f=c.spriteData,v=f&&f.width||c.data.width,b=f&&f.height||c.data.height;return!(r[0]<0||v<r[0]||r[1]<0||b<r[1]||r[2]<0||v<r[2]||r[3]<0||b<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,f=!0){const v=this.getImage(r);if(f&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise(((c,f)=>{let v=!0;if(!this.isLoaded())for(const b of r)this.images[b]||(v=!1);this.isLoaded()||v?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})}))}_getImagesForIds(r){const c={};for(const f of r){let v=this.getImage(f);v||(this.fire(new l.l("styleimagemissing",{id:f})),v=this.getImage(f)),v?c[f]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:l.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],f=this.getImage(r);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{const v={w:f.data.width+2,h:f.data.height+2,x:0,y:0},b=new l.I(v,f);this.patterns[r]={bin:v,position:b}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.T(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const b in this.patterns)r.push(this.patterns[b].bin);const{w:c,h:f}=l.p(r),v=this.atlasImage;v.resize({width:c||1,height:f||1});for(const b in this.patterns){const{bin:T}=this.patterns[b],O=T.x+1,R=T.y+1,L=this.getImage(b).data,$=L.width,Z=L.height;l.R.copy(L,v,{x:0,y:0},{x:O,y:R},{width:$,height:Z}),l.R.copy(L,v,{x:0,y:Z-1},{x:O,y:R-1},{width:$,height:1}),l.R.copy(L,v,{x:0,y:0},{x:O,y:R+Z},{width:$,height:1}),l.R.copy(L,v,{x:$-1,y:0},{x:O-1,y:R},{width:1,height:Z}),l.R.copy(L,v,{x:0,y:0},{x:O+$,y:R},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const f=this.getImage(c);f||l.w(`Image with ID: "${c}" was not found`),ge(f)&&this.updateImage(c,f)}}}const We=1e20;function Oe(_,r,c,f,v,b,T,O,R){for(let L=r;L<r+f;L++)Ve(_,c*b+L,b,v,T,O,R);for(let L=c;L<c+v;L++)Ve(_,L*b+r,1,f,T,O,R)}function Ve(_,r,c,f,v,b,T){b[0]=0,T[0]=-We,T[1]=We,v[0]=_[r];for(let O=1,R=0,L=0;O<f;O++){v[O]=_[r+O*c];const $=O*O;do{const Z=b[R];L=(v[O]-v[Z]+$-Z*Z)/(O-Z)/2}while(L<=T[R]&&--R>-1);R++,b[R]=O,T[R]=L,T[R+1]=We}for(let O=0,R=0;O<f;O++){for(;T[R+1]<O;)R++;const L=b[R],$=O-L;_[r+O*c]=v[L]+$*$}}class Ke{constructor(r,c,f){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={},this.lang=f}setURL(r){this.url=r}getGlyphs(r){return l._(this,void 0,void 0,(function*(){const c=[];for(const b in r)for(const T of r[b])c.push(this._getAndCacheGlyphsPromise(b,T));const f=yield Promise.all(c),v={};for(const{stack:b,id:T,glyph:O}of f)v[b]||(v[b]={}),v[b][T]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return v}))}_getAndCacheGlyphsPromise(r,c){return l._(this,void 0,void 0,(function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let v=f.glyphs[c];if(v!==void 0)return{stack:r,id:c,glyph:v};if(v=this._tinySDF(f,r,c),v)return f.glyphs[c]=v,{stack:r,id:c,glyph:v};const b=Math.floor(c/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[b])return{stack:r,id:c,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[b]){const O=Ke.loadGlyphRange(r,b,this.url,this.requestManager);f.requests[b]=O}const T=yield f.requests[b];for(const O in T)this._doesCharSupportLocalGlyph(+O)||(f.glyphs[+O]=T[+O]);return f.ranges[b]=!0,{stack:r,id:c,glyph:T[c]||null}}))}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(r))||l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r)||l.u["CJK Symbols and Punctuation"](r)||l.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,c,f){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(f))return;let b=r.tinySDF;if(!b){let O="400";/bold/i.test(c)?O="900":/medium/i.test(c)?O="500":/light/i.test(c)&&(O="200"),b=r.tinySDF=new Ke.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:v,fontWeight:O})}const T=b.draw(String.fromCharCode(f));return{id:f,bitmap:new l.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ke.loadGlyphRange=function(_,r,c,f){return l._(this,void 0,void 0,(function*(){const v=256*r,b=v+255,T=f.transformRequest(c.replace("{fontstack}",_).replace("{range}",`${v}-${b}`),"Glyphs"),O=yield l.n(T,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${r}, ${v}-${b}`);const R={};for(const L of l.o(O.data))R[L.id]=L;return R}))},Ke.TinySDF=class{constructor({fontSize:_=24,buffer:r=3,radius:c=8,cutoff:f=.25,fontFamily:v="sans-serif",fontWeight:b="normal",fontStyle:T="normal",lang:O=null}={}){this.buffer=r,this.cutoff=f,this.radius=c,this.lang=O;const R=this.size=_+4*r,L=this._createCanvas(R),$=this.ctx=L.getContext("2d",{willReadFrequently:!0});$.font=`${T} ${b} ${_}px ${v}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(_){const r=document.createElement("canvas");return r.width=r.height=_,r}draw(_){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:v,actualBoundingBoxRight:b}=this.ctx.measureText(_),T=Math.ceil(c),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-v))),R=Math.min(this.size-this.buffer,T+Math.ceil(f)),L=O+2*this.buffer,$=R+2*this.buffer,Z=Math.max(L*$,0),W=new Uint8ClampedArray(Z),K={data:W,width:L,height:$,glyphWidth:O,glyphHeight:R,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(O===0||R===0)return K;const{ctx:ne,buffer:ue,gridInner:pe,gridOuter:me}=this;this.lang&&(ne.lang=this.lang),ne.clearRect(ue,ue,O,R),ne.fillText(_,ue,ue+T);const ye=ne.getImageData(ue,ue,O,R);me.fill(We,0,Z),pe.fill(0,0,Z);for(let be=0;be<R;be++)for(let ve=0;ve<O;ve++){const Te=ye.data[4*(be*O+ve)+3]/255;if(Te===0)continue;const ke=(be+ue)*L+ve+ue;if(Te===1)me[ke]=0,pe[ke]=We;else{const xe=.5-Te;me[ke]=xe>0?xe*xe:0,pe[ke]=xe<0?xe*xe:0}}Oe(me,0,0,L,$,L,this.f,this.v,this.z),Oe(pe,ue,ue,O,R,L,this.f,this.v,this.z);for(let be=0;be<Z;be++){const ve=Math.sqrt(me[be])-Math.sqrt(pe[be]);W[be]=Math.round(255-255*(ve/this.radius+this.cutoff))}return K}};class ot{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,c){return l.B(r.expression.evaluate(c))}interpolate(r,c,f){return{x:l.C.number(r.x,c.x,f),y:l.C.number(r.y,c.y,f),z:l.C.number(r.z,c.z,f)}}}let at;class st extends l.E{constructor(r){super(),at=at||new l.r({anchor:new l.D(l.v.light.anchor),position:new ot,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.t(at,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(l.x,r,c))for(const f in r){const v=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),v):this._transitionable.setValue(f,v)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,f){return(!f||f.validate!==!1)&&l.y(this,r.call(l.z,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const lt=new l.r({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class Le extends l.E{constructor(r){super(),this._transitionable=new l.t(lt,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.F(0))}setSky(r,c={}){if(!this._validate(l.G,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in r){const v=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),v):this._transitionable.setValue(f,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,f={}){return f?.validate!==!1&&l.y(this,r.call(l.z,l.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class tt{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const f=r.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,c)),this.dashEntry[f]}getDashRanges(r,c,f){const v=[];let b=r.length%2==1?-r[r.length-1]*f:0,T=r[0]*f,O=!0;v.push({left:b,right:T,isDash:O,zeroLength:r[0]===0});let R=r[0];for(let L=1;L<r.length;L++){O=!O;const $=r[L];b=R*f,R+=$,T=R*f,v.push({left:b,right:T,isDash:O,zeroLength:$===0})}return v}addRoundDash(r,c,f){const v=c/2;for(let b=-f;b<=f;b++){const T=this.width*(this.nextRow+f+b);let O=0,R=r[O];for(let L=0;L<this.width;L++){L/R.right>1&&(R=r[++O]);const $=Math.abs(L-R.left),Z=Math.abs(L-R.right),W=Math.min($,Z);let K;const ne=b/f*(v+1);if(R.isDash){const ue=v-Math.abs(ne);K=Math.sqrt(W*W+ue*ue)}else K=v-Math.sqrt(W*W+ne*ne);this.data[T+L]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(r){for(let O=r.length-1;O>=0;--O){const R=r[O],L=r[O+1];R.zeroLength?r.splice(O,1):L&&L.isDash===R.isDash&&(L.left=R.left,r.splice(O,1))}const c=r[0],f=r[r.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);const v=this.width*this.nextRow;let b=0,T=r[b];for(let O=0;O<this.width;O++){O/T.right>1&&(T=r[++b]);const R=Math.abs(O-T.left),L=Math.abs(O-T.right),$=Math.min(R,L);this.data[v+O]=Math.max(0,Math.min(255,(T.isDash?$:-$)+128))}}addDash(r,c){const f=c?7:0,v=2*f+1;if(this.nextRow+v>this.height)return l.w("LineAtlas out of space"),null;let b=0;for(let O=0;O<r.length;O++)b+=r[O];if(b!==0){const O=this.width/b,R=this.getDashRanges(r,this.width,O);c?this.addRoundDash(R,O,f):this.addRegularDash(R)}const T={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:b};return this.nextRow+=v,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const ut="maplibre_preloaded_worker_pool";class Ae{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ae.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ut]}numActive(){return Object.keys(this.active).length}}const qe=Math.floor(D.hardwareConcurrency/2);let yt,Rt;function $t(){return yt||(yt=new Ae),yt}Ae.workerCount=l.H(globalThis)?Math.max(Math.min(qe,3),1):1;class Wt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const f=this.workerPool.acquire(c);for(let v=0;v<f.length;v++){const b=new l.J(f[v],c);b.name=`Worker ${v}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const f=[];for(const v of this.actors)f.push(v.sendAsync({type:r,data:c}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const f of this.actors)f.registerMessageHandler(r,c)}}function er(){return Rt||(Rt=new Wt($t(),l.K),Rt.registerMessageHandler("GR",((_,r,c)=>l.m(r,c)))),Rt}function tr(_,r){const c=l.L();return l.M(c,c,[1,1,0]),l.N(c,c,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?l.O(c,c,_.calculatePosMatrix(r.toUnwrapped())):c}function vt(_,r,c,f,v,b,T){var O;const R=(function(W,K,ne){if(W)for(const ue of W){const pe=K[ue];if(pe&&pe.source===ne&&pe.type==="fill-extrusion")return!0}else for(const ue in K){const pe=K[ue];if(pe.source===ne&&pe.type==="fill-extrusion")return!0}return!1})((O=v?.layers)!==null&&O!==void 0?O:null,r,_.id),L=b.maxPitchScaleFactor(),$=_.tilesIn(f,L,R);$.sort(Ft);const Z=[];for(const W of $)Z.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(r,c,_._state,W.queryGeometry,W.cameraQueryGeometry,W.scale,v,b,L,tr(_.transform,W.tileID),T?(K,ne)=>T(W.tileID,K,ne):void 0)});return(function(W,K){for(const ne in W)for(const ue of W[ne])ir(ue,K);return W})((function(W){const K={},ne={};for(const ue of W){const pe=ue.queryResults,me=ue.wrappedTileID,ye=ne[me]=ne[me]||{};for(const be in pe){const ve=pe[be],Te=ye[be]=ye[be]||{},ke=K[be]=K[be]||[];for(const xe of ve)Te[xe.featureIndex]||(Te[xe.featureIndex]=!0,ke.push(xe))}}return K})(Z),_)}function Ft(_,r){const c=_.tileID,f=r.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}function ir(_,r){const c=_.feature,f=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=f}function pt(_,r,c){return l._(this,void 0,void 0,(function*(){let f=_;if(_.url?f=(yield l.j(r.transformRequest(_.url,"Source"),c)).data:yield D.frameAsync(c),!f)return null;const v=l.Q(l.e(f,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(v.vectorLayerIds=f.vector_layers.map((b=>b.id))),v}))}class dr{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.S?new l.S(r.lng,r.lat):l.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.S?new l.S(r.lng,r.lat):l.S.convert(r),this}extend(r){const c=this._sw,f=this._ne;let v,b;if(r instanceof l.S)v=r,b=r;else{if(!(r instanceof dr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(dr.convert(r)):this.extend(l.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.S.convert(r)):this;if(v=r._sw,b=r._ne,!v||!b)return this}return c||f?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new l.S(v.lng,v.lat),this._ne=new l.S(b.lng,b.lat)),this}getCenter(){return new l.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.S(this.getWest(),this.getNorth())}getSouthEast(){return new l.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:f}=l.S.convert(r);let v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&v}static convert(r){return r instanceof dr?r:r&&new dr(r)}static fromLngLat(r,c=0){const f=360*c/40075017,v=f/Math.cos(Math.PI/180*r.lat);return new dr(new l.S(r.lng-v,r.lat-f),new l.S(r.lng+v,r.lat+f))}adjustAntiMeridian(){const r=new l.S(this._sw.lng,this._sw.lat),c=new l.S(this._ne.lng,this._ne.lat);return new dr(r,r.lng>c.lng?new l.S(c.lng+360,c.lat):c)}}class rr{constructor(r,c,f){this.bounds=dr.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),f=Math.floor(l.V(this.bounds.getWest())*c),v=Math.floor(l.U(this.bounds.getNorth())*c),b=Math.ceil(l.V(this.bounds.getEast())*c),T=Math.ceil(l.U(this.bounds.getSouth())*c);return r.x>=f&&r.x<b&&r.y>=v&&r.y<T}}class qr extends l.E{constructor(r,c,f,v){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.Q(c,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(l.e(this,r),r.bounds&&(this.tileBounds=new rr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,this.fire(new l.k(r))}}))}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(r){return l._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};f.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise(((b,T)=>{r.reloadPromise={resolve:b,reject:T}}))}else r.actor=this.dispatcher.getActor(),v="LT";r.abortController=new AbortController;try{const b=yield r.actor.sendAsync({type:v,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,b)}catch(b){if(delete r.abortController,r.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(r,null)}}))}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return l._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}unloadTile(r){return l._(this,void 0,void 0,(function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Zr extends l.E{constructor(r,c,f,v){super(),this.id=r,this.dispatcher=f,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},c),l.e(this,l.Q(c,["url","scheme","tileSize"]))}load(){return l._(this,arguments,void 0,(function*(r=!1){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(l.e(this,c),c.bounds&&(this.tileBounds=new rr(c.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,this.fire(new l.k(c))}}))}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return l._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const f=yield le.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const v=this.map.painter.context,b=v.gl,T=f.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new l.T(v,T,b.RGBA,{useMipmap:!0}),r.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}}))}abortTile(r){return l._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)}))}unloadTile(r){return l._(this,void 0,void 0,(function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)}))}hasTransition(){return!1}}class vn extends Zr{constructor(r,c,f,v){super(r,c,f,v),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return l._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const v=yield le.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(v&&v.data){const b=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&r.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const T=l.b(b)&&l.W()?b:yield this.readImageNow(b),O={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const R=yield r.actor.sendAsync({type:"LDT",data:O});r.dem=R,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(v){if(delete r.abortController,r.aborted)r.state="unloaded";else if(v)throw r.state="errored",v}}))}readImageNow(r){return l._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&l.X()){const c=r.width+2,f=r.height+2;try{return new l.R({width:c,height:f},yield l.Y(r,-1,-1,c,f))}catch{}}return D.getImageData(r,1)}))}_getNeighboringTiles(r){const c=r.canonical,f=Math.pow(2,c.z),v=(c.x-1+f)%f,b=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+f)%f,O=c.x+1===f?r.wrap+1:r.wrap,R={};return R[new l.Z(r.overscaledZ,b,c.z,v,c.y).key]={backfilled:!1},R[new l.Z(r.overscaledZ,O,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(R[new l.Z(r.overscaledZ,b,c.z,v,c.y-1).key]={backfilled:!1},R[new l.Z(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},R[new l.Z(r.overscaledZ,O,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<f&&(R[new l.Z(r.overscaledZ,b,c.z,v,c.y+1).key]={backfilled:!1},R[new l.Z(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},R[new l.Z(r.overscaledZ,O,c.z,T,c.y+1).key]={backfilled:!1}),R}unloadTile(r){return l._(this,void 0,void 0,(function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))}))}}class qn extends l.E{constructor(r,c,f,v){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=f.getActor(),this.setEventedParent(v),this._data=c.data,this._options=l.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:l.$,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:l.$,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(l.$/this.tileSize)}_getClusterMaxZoom(r){const c=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||l.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${c}"`),c}load(){return l._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=l.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return l._(this,void 0,void 0,(function*(){const r=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})}))}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map((c=>c.coordinates)).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return l._(this,void 0,void 0,(function*(){const r=new dr,c=yield this.getData();let f;switch(c.type){case"FeatureCollection":f=c.features.map((v=>this.getCoordinatesFromGeometry(v.geometry))).flat(1/0);break;case"Feature":f=this.getCoordinatesFromGeometry(c.geometry);break;default:f=this.getCoordinatesFromGeometry(c)}if(f.length==0)return r;for(let v=0;v<f.length-1;v+=2)r.extend([f[v],f[v+1]]);return r}))}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:f}})}_updateWorkerData(){return l._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:r,diff:c}=this._pendingWorkerUpdate;if(!r&&!c)return void l.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const f=l.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(f.request=this.map._requestManager.transformRequest(D.resolveURL(r),"Source"),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):c&&(f.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new l.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:f});if(this._isUpdatingWorker=!1,this._removed||v.abandoned)return void this.fire(new l.l("dataabort",{dataType:"source"}));this._data=v.data;let b=null;v.resourceTiming&&v.resourceTiming[this.id]&&(b=v.resourceTiming[this.id].slice(0));const T={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&l.e(T,{resourceTiming:b}),this.fire(new l.l("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new l.l("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))}catch(v){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new l.l("dataabort",{dataType:"source"}));this.fire(new l.k(v))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return l._(this,void 0,void 0,(function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const v=yield this.actor.sendAsync({type:c,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(v,this.map.painter,c==="RT")}))}abortTile(r){return l._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0}))}unloadTile(r){return l._(this,void 0,void 0,(function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Kn extends l.E{constructor(r,c,f,v){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(r){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield le.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new l.k(c))}}))}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(l.a1.fromLngLat);var f;return this.tileID=(function(v){const b=l.a2.fromPoints(v),T=b.width(),O=b.height(),R=Math.max(T,O),L=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),$=Math.pow(2,L);return new l.a4(L,Math.floor((b.minX+b.maxX)/2*$),Math.floor((b.minY+b.maxY)/2*$))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((v=>this.tileID.getTilePoint(v)._round())),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new l.T(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const v in this.tiles){const b=this.tiles[v];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return l._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:c,minY:f,maxX:v,maxY:b}=l.a2.fromPoints(r),T={};for(let O=0;O<=l.a3;O++){const R=Math.pow(2,O),L=Math.floor(c*R),$=Math.floor(f*R),Z=Math.floor(v*R),W=Math.floor(b*R);T[O]={minTileX:L,minTileY:$,maxTileX:Z,maxTileY:W}}return T}}class ki extends Kn{constructor(r,c,f,v){super(r,c,f,v),this.roundZoom=!0,this.type="video",this.options=c}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield l.a5(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new l.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new l.k(new l.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new l.T(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const v in this.tiles){const b=this.tiles[v];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class On extends Kn{constructor(r,c,f,v){super(r,c,f,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((T=>typeof T!="number"))))||this.fire(new l.k(new l.a6(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.k(new l.a6(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new l.k(new l.a6(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new l.k(new l.a6(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.k(new l.a6(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,f=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.T(c,this.canvas,f.RGBA,{premultiply:!0});let v=!1;for(const b in this.tiles){const T=this.tiles[b];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const ni={},oa=_=>{switch(_){case"geojson":return qn;case"image":return Kn;case"raster":return Zr;case"raster-dem":return vn;case"vector":return qr;case"video":return ki;case"canvas":return On}return ni[_]},Ba="RTLPluginLoaded";class Sa extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=er()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return l._(this,arguments,void 0,(function*(c,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=D.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return l._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.l(Ba))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ao=null;function ao(){return Ao||(Ao=new Sa),Ao}class Co{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.a7(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=(function(v,b){const T={};if(!b)return T;for(const O of v){const R=O.layerIds.map((L=>b.getLayer(L))).filter(Boolean);if(R.length!==0){O.layers=R,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map((L=>R.filter(($=>$.id===L))[0])));for(const L of R)T[L.id]=O}}return T})(r.buckets,c?.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const b=this.buckets[v];if(b instanceof l.a9){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const b=this.buckets[v];if(b instanceof l.a9&&b.hasRTLText){this.hasRTLText=!0,ao().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const b=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(b))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.a8}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const v=this.buckets[f];v.uploadPending()&&v.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l.T(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l.T(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,f,v,b,T,O,R,L,$,Z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:b,scale:T,tileSize:this.tileSize,pixelPosMatrix:$,transform:R,params:O,queryPadding:this.queryPadding*L,getElevation:Z},r,c,f):{}}querySourceFeatures(r,c){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const v=f.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",T=v._geojsonTileLayer||v[b];if(!T)return;const O=l.aa(c?.filter,c?.globalState),{z:R,x:L,y:$}=this.tileID.canonical,Z={z:R,x:L,y:$};for(let W=0;W<T.length;W++){const K=T.feature(W);if(O.needGeometry){const pe=l.ab(K,!0);if(!O.filter(new l.F(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!O.filter(new l.F(this.tileID.overscaledZ),K))continue;const ne=f.getId(K,b),ue=new l.ac(K,R,L,$,ne);ue.tile=Z,r.push(ue)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const f=l.ad(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let v=!1;if(this.expirationTime>f)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const b=this.expirationTime-c;b?this.expirationTime=f+Math.max(b,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const b=this.buckets[v],T=b.layers[0].sourceLayer||"_geojsonTileLayer",O=f[T],R=r[T];if(!O||!R||Object.keys(R).length===0)continue;b.update(R,O,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=c&&c.style&&c.style.getLayer(v);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=D.now()+r}setDependencies(r,c){const f={};for(const v of c)f[v]=!0;this.dependencies[r]=f}hasDependency(r,c){for(const f of r){const v=this.dependencies[f];if(v){for(const b of c)if(v[b])return!0}}return!1}}class ze{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,f){const v=r.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const b={value:c,timeout:void 0};if(f!==void 0&&(b.timeout=setTimeout((()=>{this.remove(r,b)}),f)),this.data[v].push(b),this.order.push(v),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const f=r.wrapped().key,v=c===void 0?0:this.data[f].indexOf(c),b=this.data[f][v];return this.data[f].splice(v,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const f in this.data)for(const v of this.data[f])r(v.value)||c.push(v);for(const f of c)this.remove(f.value.tileID,f)}}class ie{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,f){const v=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][v]=this.stateChanges[r][v]||{},l.e(this.stateChanges[r][v],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const b in this.state[r])b!==v&&(this.deletedStates[r][b]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][v]===null){this.deletedStates[r][v]={};for(const b in this.state[r][v])f[b]||(this.deletedStates[r][v][b]=null)}else for(const b in f)this.deletedStates[r]&&this.deletedStates[r][v]&&this.deletedStates[r][v][b]===null&&delete this.deletedStates[r][v][b]}removeFeatureState(r,c,f){if(this.deletedStates[r]===null)return;const v=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&c!==void 0)this.deletedStates[r][v]!==null&&(this.deletedStates[r][v]=this.deletedStates[r][v]||{},this.deletedStates[r][v][f]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][v])for(f in this.deletedStates[r][v]={},this.stateChanges[r][v])this.deletedStates[r][v][f]=null;else this.deletedStates[r][v]=null;else this.deletedStates[r]=null}getState(r,c){const f=String(c),v=l.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const b=this.deletedStates[r][c];if(b===null)return{};for(const T in b)delete v[T]}return v}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const f={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const b={};for(const T in this.stateChanges[v])this.state[v][T]||(this.state[v][T]={}),l.e(this.state[v][T],this.stateChanges[v][T]),b[T]=this.state[v][T];f[v]=b}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const b={};if(this.deletedStates[v]===null)for(const T in this.state[v])b[T]={},this.state[v][T]={};else for(const T in this.deletedStates[v]){if(this.deletedStates[v][T]===null)this.state[v][T]={};else for(const O of Object.keys(this.deletedStates[v][T]))delete this.state[v][T][O];b[T]=this.state[v][T]}f[v]=f[v]||{},l.e(f[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const v in r)r[v].setFeatureState(f,c)}}const ae=89.25;function he(_,r){const c=l.ah(r.lat,-l.ai,l.ai);return new l.P(l.V(r.lng)*_,l.U(c)*_)}function we(_,r){return new l.a1(r.x/_,r.y/_).toLngLat()}function Ce(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(l.ae(90-_.pitch)),Math.tan(l.ae(ae-_.pitch)))}function je(_,r){const c=_.canonical,f=r/l.af(c.z),v=c.x+Math.pow(2,c.z)*_.wrap,b=l.ag(new Float64Array(16));return l.M(b,b,[v*f,c.y*f,0]),l.N(b,b,[f/l.$,f/l.$,1]),b}function Xe(_,r,c,f,v){const b=l.a1.fromLngLat(_,r),T=v*l.aj(1,_.lat),O=T*Math.cos(l.ae(c)),R=Math.sqrt(T*T-O*O),L=R*Math.sin(l.ae(-f)),$=R*Math.cos(l.ae(-f));return new l.a1(b.x+L,b.y+$,b.z+O)}function Fe(_,r,c){const f=r.intersectsFrustum(_);if(!c||f===0)return f;const v=r.intersectsPlane(c);return v===0?0:f===2&&v===2?2:1}function nt(_,r,c){let f=0;const v=(c-r)/10;for(let b=0;b<10;b++)f+=v*Math.pow(Math.cos(r+(b+.5)/10*(c-r)),_);return f}function gt(_,r){return function(c,f,v,b,T){const O=2*((_-1)/l.ak(Math.cos(l.ae(ae-T))/Math.cos(l.ae(ae)))-1),R=Math.acos(v/b),L=2*nt(O-1,0,l.ae(T/2)),$=Math.min(l.ae(ae),R+l.ae(T/2)),Z=nt(O-1,Math.min($,R-l.ae(T/2)),$),W=Math.atan(f/v),K=Math.hypot(f,v);let ne=c;return ne+=l.ak(b/K/Math.max(.5,Math.cos(l.ae(T/2)))),ne+=O*l.ak(Math.cos(W))/2,ne-=l.ak(Math.max(1,Z/L/r))/2,ne}}const ct=gt(9.314,3);function zt(_,r){const c=(r.roundZoom?Math.round:Math.floor)(_.zoom+l.ak(_.tileSize/r.tileSize));return Math.max(0,c)}function Ne(_,r){const c=_.getCameraFrustum(),f=_.getClippingPlane(),v=_.screenPointToMercatorCoordinate(_.getCameraPoint()),b=l.a1.fromLngLat(_.center,_.elevation);v.z=b.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;const T=_.getCoveringTilesDetailsProvider(),O=T.allowVariableZoom(_,r),R=zt(_,r),L=r.minzoom||0,$=r.maxzoom!==void 0?r.maxzoom:_.maxZoom,Z=Math.min(Math.max(0,R),$),W=Math.pow(2,Z),K=[W*v.x,W*v.y,0],ne=[W*b.x,W*b.y,0],ue=Math.hypot(b.x-v.x,b.y-v.y),pe=Math.abs(b.z-v.z),me=Math.hypot(ue,pe),ye=Te=>({zoom:0,x:0,y:0,wrap:Te,fullyVisible:!1}),be=[],ve=[];if(_.renderWorldCopies&&T.allowWorldCopies())for(let Te=1;Te<=3;Te++)be.push(ye(-Te)),be.push(ye(Te));for(be.push(ye(0));be.length>0;){const Te=be.pop(),ke=Te.x,xe=Te.y;let Re=Te.fullyVisible;const He={x:ke,y:xe,z:Te.zoom},Ge=T.getTileBoundingVolume(He,Te.wrap,_.elevation,r);if(!Re){const wt=Fe(c,Ge,f);if(wt===0)continue;Re=wt===2}const Ze=T.distanceToTile2d(v.x,v.y,He,Ge);let et=R;O&&(et=(r.calculateTileZoom||ct)(_.zoom+l.ak(_.tileSize/r.tileSize),Ze,pe,me,_.fov)),et=(r.roundZoom?Math.round:Math.floor)(et),et=Math.max(0,et);const Pt=Math.min(et,$);if(Te.wrap=T.getWrap(b,He,Te.wrap),Te.zoom>=Pt){if(Te.zoom<L)continue;const wt=Z-Te.zoom,dt=K[0]-.5-(ke<<wt),Lt=K[1]-.5-(xe<<wt),vr=r.reparseOverscaled?Math.max(Te.zoom,et):Te.zoom;ve.push({tileID:new l.Z(Te.zoom===$?vr:Te.zoom,Te.wrap,Te.zoom,ke,xe),distanceSq:l.al([ne[0]-.5-ke,ne[1]-.5-xe]),tileDistanceToCamera:Math.sqrt(dt*dt+Lt*Lt)})}else for(let wt=0;wt<4;wt++)be.push({zoom:Te.zoom+1,x:(ke<<1)+wt%2,y:(xe<<1)+(wt>>1),wrap:Te.wrap,fullyVisible:Re})}return ve.sort(((Te,ke)=>Te.distanceSq-ke.distanceSq)).map((Te=>Te.tileID))}const sr=l.a2.fromPoints([new l.P(0,0),new l.P(l.$,l.$)]);class Cr extends l.E{constructor(r,c,f){super(),this.id=r,this.dispatcher=f,this.on("data",(v=>this._dataHandler(v))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((v,b,T,O)=>{const R=new(oa(b.type))(v,b,T,O);if(R.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${R.id}`);return R})(r,c,f,this),this._tiles={},this._cache=new ze(0,(v=>this._unloadTile(v))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ie,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,f){return l._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,f)}catch(v){r.state="errored",v.status!==404?this._source.fire(new l.k(v,{tile:r})):this.update(this.transform,this.terrain)}}))}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new l.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const f=this._tiles[c];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((r=>r.tileID)).sort(Ut).map((r=>r.key))}getRenderableIds(r){const c=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&c.push(this._tiles[f]);return r?c.sort(((f,v)=>{const b=f.tileID,T=v.tileID,O=new l.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians),R=new l.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return b.overscaledZ-T.overscaledZ||R.y-O.y||R.x-O.x})).map((f=>f.tileID.key)):c.map((f=>f.tileID)).sort(Ut).map((f=>f.key))}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)r?this._reloadTile(c,"expired"):this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(r,c){return l._(this,void 0,void 0,(function*(){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=c),yield this._loadTile(f,r,c))}))}_tileLoaded(r,c,f){r.timeAdded=D.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const b=c[v];if(r.neighboringTiles&&r.neighboringTiles[b]){const T=this.getTileByID(b);f(r,T),f(T,r)}}function f(v,b){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let T=b.tileID.canonical.x-v.tileID.canonical.x;const O=b.tileID.canonical.y-v.tileID.canonical.y,R=Math.pow(2,v.tileID.canonical.z),L=b.tileID.key;T===0&&O===0||Math.abs(O)>1||(Math.abs(T)>1&&(Math.abs(T+R)===1?T+=R:Math.abs(T-R)===1&&(T-=R)),b.dem&&v.dem&&(v.dem.backfillBorder(b.dem,T,O),v.neighboringTiles&&v.neighboringTiles[L]&&(v.neighboringTiles[L].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c){const f=Object.values(r),v=this._getLoadedDescendents(f);for(const b of f){const T=v[b.key];if(!T)continue;const O=b.overscaledZ+Cr.maxUnderzooming;let R=1/0;for(const L of T){const $=L.tileID.overscaledZ;$<=O&&$<R&&(R=$)}if(R!==1/0)for(const L of T)L.tileID.overscaledZ===R&&(c[L.tileID.key]=L.tileID)}}_getLoadedDescendents(r){var c;const f={};for(const v in this._tiles){const b=this._tiles[v];if(b.hasData())for(const T of r)b.tileID.isChildOf(T)&&(f[c=T.key]||(f[c]=[])).push(b)}return f}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=r.overscaledZ-1;f>=c;f--){const v=r.scaledTo(f),b=this._getLoadedTile(v);if(b)return b}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,v=Math.floor(c*f*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(b)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const f={};for(const v in this._tiles){const b=this._tiles[v];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),f[b.tileID.key]=b}this._tiles=f;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(r,c,f,v){const b={},T={},O=Object.keys(r),R=D.now();for(const L of O){const $=r[L],Z=this._tiles[L];if(!Z||Z.fadeEndTime!==0&&Z.fadeEndTime<=R)continue;const W=this.findLoadedParent($,c),K=this.findLoadedSibling($),ne=W||K||null;ne&&(this._addTile(ne.tileID),b[ne.tileID.key]=ne.tileID),T[L]=$}this._retainLoadedChildren(T,r);for(const L in b)r[L]||(this._coveredTiles[L]=!0,r[L]=b[L]);if(v){const L={},$={};for(const Z of f)this._tiles[Z.key].hasData()?L[Z.key]=Z:$[Z.key]=Z;for(const Z in $){const W=$[Z].children(this._source.maxzoom);this._tiles[W[0].key]&&this._tiles[W[1].key]&&this._tiles[W[2].key]&&this._tiles[W[3].key]&&(L[W[0].key]=r[W[0].key]=W[0],L[W[1].key]=r[W[1].key]=W[1],L[W[2].key]=r[W[2].key]=W[2],L[W[3].key]=r[W[3].key]=W[3],delete $[Z])}for(const Z in $){const W=$[Z],K=this.findLoadedParent(W,this._source.minzoom),ne=this.findLoadedSibling(W),ue=K||ne||null;if(ue){L[ue.tileID.key]=r[ue.tileID.key]=ue.tileID;for(const pe in L)L[pe].isChildOf(ue.tileID)&&delete L[pe]}}for(const Z in this._tiles)L[Z]||(this._coveredTiles[Z]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map((L=>new l.Z(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y))):(f=Ne(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter((L=>this._source.hasTile(L))))):f=[];const v=zt(r,this._source),b=Math.max(v-Cr.maxOverzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const $ of f)if($.canonical.z>this._source.minzoom){const Z=$.scaledTo($.canonical.z-1);L[Z.key]=Z;const W=$.scaledTo(Math.max(this._source.minzoom,Math.min($.canonical.z,5)));L[W.key]=W}f=f.concat(Object.values(L))}const T=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new l.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(f,v);pr(this._source.type)&&this._updateCoveredAndRetainedTiles(O,b,f,c);for(const L in O)this._tiles[L].clearFadeHold();const R=l.am(this._tiles,O);for(const L of R){const $=this._tiles[L];$.hasSymbolBuckets&&!$.holdingForFade()?$.setHoldDuration(this.map._fadeDuration):$.hasSymbolBuckets&&!$.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var f;const v={},b={},T=Math.max(c-Cr.maxOverzooming,this._source.minzoom),O={};for(const R of r){const L=this._addTile(R);v[R.key]=R,L.hasData()||c<this._source.maxzoom&&(O[R.key]=R)}this._retainLoadedChildren(O,v);for(const R of r){let L=this._tiles[R.key];if(L.hasData())continue;if(c+1>this._source.maxzoom){const Z=R.children(this._source.maxzoom)[0],W=this.getTile(Z);if(W&&W.hasData()){v[Z.key]=Z;continue}}else{const Z=R.children(this._source.maxzoom);if(Z.length===4&&v[Z[0].key]&&v[Z[1].key]&&v[Z[2].key]&&v[Z[3].key]||Z.length===1&&v[Z[0].key])continue}let $=L.wasRequested();for(let Z=R.overscaledZ-1;Z>=T;--Z){const W=R.scaledTo(Z);if(b[W.key])break;if(b[W.key]=!0,L=this.getTile(W),!L&&$&&(L=this._addTile(W)),L){const K=L.hasData();if((K||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||$)&&(v[W.key]=W),$=L.wasRequested(),K)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let f,v=this._tiles[r].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){f=this._loadedParentTiles[v.key];break}c.push(v.key);const b=v.scaledTo(v.overscaledZ-1);if(f=this._getLoadedTile(b),f)break;v=b}for(const b of c)this._loadedParentTiles[b]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,f=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=f}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const f=c;return c||(c=new Co(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,f||this._source.fire(new l.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=c.getExpiryTimeout();f&&(this._timers[r]=setTimeout((()=>{this._reloadTile(r,"expired"),delete this._timers[r]}),f))}refreshTiles(r){for(const c in this._tiles)(this._isIdRenderable(c)||this._tiles[c].state=="errored")&&r.some((f=>f.equals(this._tiles[c].tileID.canonical)))&&this._reloadTile(c,"expired")}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,f){const v=[],b=this.transform;if(!b)return v;const T=b.getCoveringTilesDetailsProvider().allowWorldCopies(),O=f?b.getCameraQueryGeometry(r):r,R=K=>b.screenPointToMercatorCoordinate(K,this.terrain),L=this.transformBbox(r,R,!T),$=this.transformBbox(O,R,!T),Z=this.getIds(),W=l.a2.fromPoints($);for(let K=0;K<Z.length;K++){const ne=this._tiles[Z[K]];if(ne.holdingForFade())continue;const ue=T?[ne.tileID]:[ne.tileID.unwrapTo(-1),ne.tileID.unwrapTo(0)],pe=Math.pow(2,b.zoom-ne.tileID.overscaledZ),me=c*ne.queryPadding*l.$/ne.tileSize/pe;for(const ye of ue){const be=W.map((ve=>ye.getTilePoint(new l.a1(ve.x,ve.y))));if(be.expandBy(me),be.intersects(sr)){const ve=L.map((ke=>ye.getTilePoint(ke))),Te=$.map((ke=>ye.getTilePoint(ke)));v.push({tile:ne,tileID:T?ye:ye.unwrapTo(0),queryGeometry:ve,cameraQueryGeometry:Te,scale:pe})}}}return v}transformBbox(r,c,f){let v=r.map(c);if(f){const b=l.a2.fromPoints(r);b.shrinkBy(.001*Math.min(b.width(),b.height()));const T=b.map(c);l.a2.fromPoints(v).covers(T)||(v=v.map((O=>O.x>.5?new l.a1(O.x-1,O.y,O.z):O)))}return v}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map((f=>this._tiles[f].tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(pr(this._source.type)){const r=D.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,f){this._state.updateState(r=r||"_geojsonTileLayer",c,f)}removeFeatureState(r,c,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,f)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,f){const v=this._tiles[r];v&&v.setDependencies(c,f)}reloadTilesForDependencies(r,c){for(const f in this._tiles)this._tiles[f].hasDependency(r,c)&&this._reloadTile(f,"reloading");this._cache.filter((f=>!f.hasDependency(r,c)))}}function Ut(_,r){const c=Math.abs(2*_.wrap)-+(_.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return _.overscaledZ-r.overscaledZ||f-c||r.canonical.y-_.canonical.y||r.canonical.x-_.canonical.x}function pr(_){return _==="raster"||_==="image"||_==="video"}Cr.maxOverzooming=10,Cr.maxUnderzooming=3;class en{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ah(r,0,1);let c=1,f=this._distances[c];const v=r*this.paddedLength+this.padding;for(;f<v&&c<this._distances.length;)f=this._distances[++c];const b=c-1,T=this._distances[b],O=f-T,R=O>0?(v-T)/O:0;return this.points[b].mult(1-R).add(this.points[c].mult(R))}}function Rn(_,r){let c=!0;return _==="always"||_!=="never"&&r!=="never"||(c=!1),c}class Gn{constructor(r,c,f){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(c/f);for(let T=0;T<this.xCellCount*this.yCellCount;T++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,f,v,b){this._forEachCell(c,f,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(r,c,f,v){this._forEachCell(c-v,f-v,c+v,f+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(f),this.circles.push(v)}_insertBoxCell(r,c,f,v,b,T){this.boxCells[b].push(T)}_insertCircleCell(r,c,f,v,b,T){this.circleCells[b].push(T)}_query(r,c,f,v,b,T,O){if(f<0||r>this.width||v<0||c>this.height)return[];const R=[];if(r<=0&&c<=0&&this.width<=f&&this.height<=v){if(b)return[{key:null,x1:r,y1:c,x2:f,y2:v}];for(let L=0;L<this.boxKeys.length;L++)R.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const $=this.circles[3*L],Z=this.circles[3*L+1],W=this.circles[3*L+2];R.push({key:this.circleKeys[L],x1:$-W,y1:Z-W,x2:$+W,y2:Z+W})}}else this._forEachCell(r,c,f,v,this._queryCell,R,{hitTest:b,overlapMode:T,seenUids:{box:{},circle:{}}},O);return R}query(r,c,f,v){return this._query(r,c,f,v,!1,null)}hitTest(r,c,f,v,b,T){return this._query(r,c,f,v,!0,b,T).length>0}hitTestCircle(r,c,f,v,b){const T=r-f,O=r+f,R=c-f,L=c+f;if(O<0||T>this.width||L<0||R>this.height)return!1;const $=[];return this._forEachCell(T,R,O,L,this._queryCellCircle,$,{hitTest:!0,overlapMode:v,circle:{x:r,y:c,radius:f},seenUids:{box:{},circle:{}}},b),$.length>0}_queryCell(r,c,f,v,b,T,O,R){const{seenUids:L,hitTest:$,overlapMode:Z}=O,W=this.boxCells[b];if(W!==null){const ne=this.bboxes;for(const ue of W)if(!L.box[ue]){L.box[ue]=!0;const pe=4*ue,me=this.boxKeys[ue];if(r<=ne[pe+2]&&c<=ne[pe+3]&&f>=ne[pe+0]&&v>=ne[pe+1]&&(!R||R(me))&&(!$||!Rn(Z,me.overlapMode))&&(T.push({key:me,x1:ne[pe],y1:ne[pe+1],x2:ne[pe+2],y2:ne[pe+3]}),$))return!0}}const K=this.circleCells[b];if(K!==null){const ne=this.circles;for(const ue of K)if(!L.circle[ue]){L.circle[ue]=!0;const pe=3*ue,me=this.circleKeys[ue];if(this._circleAndRectCollide(ne[pe],ne[pe+1],ne[pe+2],r,c,f,v)&&(!R||R(me))&&(!$||!Rn(Z,me.overlapMode))){const ye=ne[pe],be=ne[pe+1],ve=ne[pe+2];if(T.push({key:me,x1:ye-ve,y1:be-ve,x2:ye+ve,y2:be+ve}),$)return!0}}}return!1}_queryCellCircle(r,c,f,v,b,T,O,R){const{circle:L,seenUids:$,overlapMode:Z}=O,W=this.boxCells[b];if(W!==null){const ne=this.bboxes;for(const ue of W)if(!$.box[ue]){$.box[ue]=!0;const pe=4*ue,me=this.boxKeys[ue];if(this._circleAndRectCollide(L.x,L.y,L.radius,ne[pe+0],ne[pe+1],ne[pe+2],ne[pe+3])&&(!R||R(me))&&!Rn(Z,me.overlapMode))return T.push(!0),!0}}const K=this.circleCells[b];if(K!==null){const ne=this.circles;for(const ue of K)if(!$.circle[ue]){$.circle[ue]=!0;const pe=3*ue,me=this.circleKeys[ue];if(this._circlesCollide(ne[pe],ne[pe+1],ne[pe+2],L.x,L.y,L.radius)&&(!R||R(me))&&!Rn(Z,me.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,f,v,b,T,O,R){const L=this._convertToXCellCoord(r),$=this._convertToYCellCoord(c),Z=this._convertToXCellCoord(f),W=this._convertToYCellCoord(v);for(let K=L;K<=Z;K++)for(let ne=$;ne<=W;ne++)if(b.call(this,r,c,f,v,this.xCellCount*ne+K,T,O,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,f,v,b,T){const O=v-r,R=b-c,L=f+T;return L*L>O*O+R*R}_circleAndRectCollide(r,c,f,v,b,T,O){const R=(T-v)/2,L=Math.abs(r-(v+R));if(L>R+f)return!1;const $=(O-b)/2,Z=Math.abs(c-(b+$));if(Z>$+f)return!1;if(L<=R||Z<=$)return!0;const W=L-R,K=Z-$;return W*W+K*K<=f*f}}function gn(_,r,c){const f=l.L();if(!_){const{vecSouth:Z,vecEast:W}=Er(r),K=A();K[0]=W[0],K[1]=W[1],K[2]=Z[0],K[3]=Z[1],v=K,($=(T=(b=K)[0])*(L=b[3])-(R=b[2])*(O=b[1]))&&(v[0]=L*($=1/$),v[1]=-O*$,v[2]=-R*$,v[3]=T*$),f[0]=K[0],f[1]=K[1],f[4]=K[2],f[5]=K[3]}var v,b,T,O,R,L,$;return l.N(f,f,[1/c,1/c,1]),f}function br(_,r,c,f){if(_){const v=l.L();if(!r){const{vecSouth:b,vecEast:T}=Er(c);v[0]=T[0],v[1]=T[1],v[4]=b[0],v[5]=b[1]}return l.N(v,v,[f,f,1]),v}return c.pixelsToClipSpaceMatrix}function Er(_){const r=Math.cos(_.rollInRadians),c=Math.sin(_.rollInRadians),f=Math.cos(_.pitchInRadians),v=Math.cos(_.bearingInRadians),b=Math.sin(_.bearingInRadians),T=l.ar();T[0]=-v*f*c-b*r,T[1]=-b*f*c+v*r;const O=l.as(T);O<1e-9?l.at(T):l.au(T,T,1/O);const R=l.ar();R[0]=v*f*r-b*c,R[1]=b*f*r+v*c;const L=l.as(R);return L<1e-9?l.at(R):l.au(R,R,1/L),{vecEast:R,vecSouth:T}}function Wn(_,r,c,f){let v;f?(v=[_,r,f(_,r),1],l.aw(v,v,c)):(v=[_,r,0,1],Rl(v,v,c));const b=v[3];return{point:new l.P(v[0]/b,v[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function _t(_,r){return .5+_/r*.5}function Xn(_,r){return _.x>=-r[0]&&_.x<=r[0]&&_.y>=-r[1]&&_.y<=r[1]}function ln(_,r,c,f,v,b,T,O,R,L,$,Z,W){const K=c?_.textSizeData:_.iconSizeData,ne=l.an(K,r.transform.zoom),ue=[256/r.width*2+1,256/r.height*2+1],pe=c?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;pe.clear();const me=_.lineVertexArray,ye=c?_.text.placedSymbolArray:_.icon.placedSymbolArray,be=r.transform.width/r.transform.height;let ve=!1;for(let Te=0;Te<ye.length;Te++){const ke=ye.get(Te);if(ke.hidden||ke.writingMode===l.ao.vertical&&!ve){so(ke.numGlyphs,pe);continue}ve=!1;const xe=new l.P(ke.anchorX,ke.anchorY),Re={getElevation:W,pitchedLabelPlaneMatrix:f,lineVertexArray:me,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:xe,unwrappedTileID:R,width:L,height:$,translation:Z},He=as(ke.anchorX,ke.anchorY,Re);if(!Xn(He.point,ue)){so(ke.numGlyphs,pe);continue}const Ge=_t(r.transform.cameraToCenterDistance,He.signedDistanceFromCamera),Ze=l.ap(K,ne,ke),et=b?Ze*r.transform.getPitchedTextCorrection(ke.anchorX,ke.anchorY,R)/Ge:Ze*Ge,Pt=Ot({projectionContext:Re,pitchedLabelPlaneMatrixInverse:v,symbol:ke,fontSize:et,flip:!1,keepUpright:T,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:be,rotateToLine:O});ve=Pt.useVertical,(Pt.notEnoughRoom||ve||Pt.needsFlipping&&Ot({projectionContext:Re,pitchedLabelPlaneMatrixInverse:v,symbol:ke,fontSize:et,flip:!0,keepUpright:T,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:be,rotateToLine:O}).notEnoughRoom)&&so(ke.numGlyphs,pe)}c?_.text.dynamicLayoutVertexBuffer.updateData(pe):_.icon.dynamicLayoutVertexBuffer.updateData(pe)}function oo(_,r,c,f,v,b,T,O){const R=b.glyphStartIndex+b.numGlyphs,L=b.lineStartIndex,$=b.lineStartIndex+b.lineLength,Z=r.getoffsetX(b.glyphStartIndex),W=r.getoffsetX(R-1),K=Eo(_*Z,c,f,v,b.segment,L,$,O,T);if(!K)return null;const ne=Eo(_*W,c,f,v,b.segment,L,$,O,T);return ne?O.projectionCache.anyProjectionOccluded?null:{first:K,last:ne}:null}function Ol(_,r,c,f){return _===l.ao.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*f?{useVertical:!0}:(_===l.ao.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Ot(_){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:f,fontSize:v,flip:b,keepUpright:T,glyphOffsetArray:O,dynamicLayoutVertexArray:R,aspectRatio:L,rotateToLine:$}=_,Z=v/24,W=f.lineOffsetX*Z,K=f.lineOffsetY*Z;let ne;if(f.numGlyphs>1){const ue=f.glyphStartIndex+f.numGlyphs,pe=f.lineStartIndex,me=f.lineStartIndex+f.lineLength,ye=oo(Z,O,W,K,b,f,$,r);if(!ye)return{notEnoughRoom:!0};const be=is(ye.first.point.x,ye.first.point.y,r,c),ve=is(ye.last.point.x,ye.last.point.y,r,c);if(T&&!b){const Te=Ol(f.writingMode,be,ve,L);if(Te)return Te}ne=[ye.first];for(let Te=f.glyphStartIndex+1;Te<ue-1;Te++){const ke=Eo(Z*O.getoffsetX(Te),W,K,b,f.segment,pe,me,r,$);if(!ke)return{notEnoughRoom:!0};ne.push(ke)}ne.push(ye.last)}else{if(T&&!b){const pe=ii(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,me=f.lineStartIndex+f.segment+1,ye=new l.P(r.lineVertexArray.getx(me),r.lineVertexArray.gety(me)),be=ii(ye.x,ye.y,r),ve=be.signedDistanceFromCamera>0?be.point:Mr(r.tileAnchorPoint,ye,pe,1,r),Te=is(pe.x,pe.y,r,c),ke=is(ve.x,ve.y,r,c),xe=Ol(f.writingMode,Te,ke,L);if(xe)return xe}const ue=Eo(Z*O.getoffsetX(f.glyphStartIndex),W,K,b,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,r,$);if(!ue||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ne=[ue]}for(const ue of ne)l.av(R,ue.point,ue.angle);return{}}function Mr(_,r,c,f,v){const b=_.add(_.sub(r)._unit()),T=ii(b.x,b.y,v).point,O=c.sub(T);return c.add(O._mult(f/O.mag()))}function cr(_,r,c){const f=r.projectionCache;if(f.projections[_])return f.projections[_];const v=new l.P(r.lineVertexArray.getx(_),r.lineVertexArray.gety(_)),b=ii(v.x,v.y,r);if(b.signedDistanceFromCamera>0)return f.projections[_]=b.point,f.anyProjectionOccluded=f.anyProjectionOccluded||b.isOccluded,b.point;const T=_-c.direction;return Mr(c.distanceFromAnchor===0?r.tileAnchorPoint:new l.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),v,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function ii(_,r,c){const f=_+c.translation[0],v=r+c.translation[1];let b;return c.pitchWithMap?(b=Wn(f,v,c.pitchedLabelPlaneMatrix,c.getElevation),b.isOccluded=!1):(b=c.transform.projectTileCoordinates(f,v,c.unwrappedTileID,c.getElevation),b.point.x=(.5*b.point.x+.5)*c.width,b.point.y=(.5*-b.point.y+.5)*c.height),b}function is(_,r,c,f){if(c.pitchWithMap){const v=[_,r,0,1];return l.aw(v,v,f),c.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],c.unwrappedTileID,c.getElevation).point}return{x:_/c.width*2-1,y:1-r/c.height*2}}function as(_,r,c){return c.transform.projectTileCoordinates(_,r,c.unwrappedTileID,c.getElevation)}function gr(_,r,c){return _._unit()._perp()._mult(r*c)}function kc(_,r,c,f,v,b,T,O,R){if(O.projectionCache.offsets[_])return O.projectionCache.offsets[_];const L=c.add(r);if(_+R.direction<f||_+R.direction>=v)return O.projectionCache.offsets[_]=L,L;const $=cr(_+R.direction,O,R),Z=gr($.sub(c),T,R.direction),W=c.add(Z),K=$.add(Z);return O.projectionCache.offsets[_]=l.ax(b,L,W,K)||L,O.projectionCache.offsets[_]}function Eo(_,r,c,f,v,b,T,O,R){const L=f?_-r:_+r;let $=L>0?1:-1,Z=0;f&&($*=-1,Z=Math.PI),$<0&&(Z+=Math.PI);let W,K=$>0?b+v:b+v+1;O.projectionCache.cachedAnchorPoint?W=O.projectionCache.cachedAnchorPoint:(W=ii(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=W);let ne,ue,pe=W,me=W,ye=0,be=0;const ve=Math.abs(L),Te=[];let ke;for(;ye+be<=ve;){if(K+=$,K<b||K>=T)return null;ye+=be,me=pe,ue=ne;const He={absOffsetX:ve,direction:$,distanceFromAnchor:ye,previousVertex:me};if(pe=cr(K,O,He),c===0)Te.push(me),ke=pe.sub(me);else{let Ge;const Ze=pe.sub(me);Ge=Ze.mag()===0?gr(cr(K+$,O,He).sub(pe),c,$):gr(Ze,c,$),ue||(ue=me.add(Ge)),ne=kc(K,Ge,pe,b,T,ue,c,O,He),Te.push(ue),ke=ne.sub(ue)}be=ke.mag()}const xe=ke._mult((ve-ye)/be)._add(ue||me),Re=Z+Math.atan2(pe.y-me.y,pe.x-me.x);return Te.push(xe),{point:xe,angle:R?Re:0,path:Te}}const Ic=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function so(_,r){for(let c=0;c<_;c++){const f=r.length;r.resize(f+4),r.float32.set(Ic,3*f)}}function Rl(_,r,c){const f=r[0],v=r[1];return _[0]=c[0]*f+c[4]*v+c[12],_[1]=c[1]*f+c[5]*v+c[13],_[3]=c[3]*f+c[7]*v+c[15],_}const wr=100;class Nu{constructor(r,c=new Gn(r.width+200,r.height+200,25),f=new Gn(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=f,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+wr,this.screenBottomBoundary=r.height+wr,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,f,v,b,T,O,R,L,$,Z,W){const K=this.projectAndGetPerspectiveRatio(r.anchorPointX+R[0],r.anchorPointY+R[1],b,$,W),ne=f*K.perspectiveRatio;let ue;if(T||O)ue=this._projectCollisionBox(r,ne,v,b,T,O,R,K,$,Z,W);else{const ke=K.x+(Z?Z.x*ne:0),xe=K.y+(Z?Z.y*ne:0);ue={allPointsOccluded:!1,box:[ke+r.x1*ne,xe+r.y1*ne,ke+r.x2*ne,xe+r.y2*ne]}}const[pe,me,ye,be]=ue.box,ve=T?ue.allPointsOccluded:K.isOccluded;let Te=ve;return Te||(Te=K.perspectiveRatio<this.perspectiveRatioCutoff),Te||(Te=!this.isInsideGrid(pe,me,ye,be)),Te||c!=="always"&&this.grid.hitTest(pe,me,ye,be,c,L)?{box:[pe,me,ye,be],placeable:!1,offscreen:!1,occluded:ve}:{box:[pe,me,ye,be],placeable:!0,offscreen:this.isOffscreen(pe,me,ye,be),occluded:ve}}placeCollisionCircles(r,c,f,v,b,T,O,R,L,$,Z,W,K,ne){const ue=[],pe=new l.P(c.anchorX,c.anchorY),me=this.getPerspectiveRatio(pe.x,pe.y,T,ne),ye=(L?b*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,T)/me:b*me)/l.aB,be={getElevation:ne,pitchedLabelPlaneMatrix:O,lineVertexArray:f,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:K},ve=oo(ye,v,c.lineOffsetX*ye,c.lineOffsetY*ye,!1,c,!1,be);let Te=!1,ke=!1,xe=!0;if(ve){const Re=.5*Z*me+W,He=new l.P(-100,-100),Ge=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Ze=new en,et=ve.first,Pt=ve.last;let wt=[];for(let vr=et.path.length-1;vr>=1;vr--)wt.push(et.path[vr]);for(let vr=1;vr<Pt.path.length;vr++)wt.push(Pt.path[vr]);const dt=2.5*Re;if(L){const vr=this.projectPathToScreenSpace(wt,be);wt=vr.some((Nr=>Nr.signedDistanceFromCamera<=0))?[]:vr.map((Nr=>Nr.point))}let Lt=[];if(wt.length>0){const vr=wt[0].clone(),Nr=wt[0].clone();for(let hn=1;hn<wt.length;hn++)vr.x=Math.min(vr.x,wt[hn].x),vr.y=Math.min(vr.y,wt[hn].y),Nr.x=Math.max(Nr.x,wt[hn].x),Nr.y=Math.max(Nr.y,wt[hn].y);Lt=vr.x>=He.x&&Nr.x<=Ge.x&&vr.y>=He.y&&Nr.y<=Ge.y?[wt]:Nr.x<He.x||vr.x>Ge.x||Nr.y<He.y||vr.y>Ge.y?[]:l.ay([wt],He.x,He.y,Ge.x,Ge.y)}for(const vr of Lt){Ze.reset(vr,.25*Re);let Nr=0;Nr=Ze.length<=.5*Re?1:Math.ceil(Ze.paddedLength/dt)+1;for(let hn=0;hn<Nr;hn++){const Qr=hn/Math.max(Nr-1,1),Vr=Ze.lerp(Qr),dn=Vr.x+wr,Kr=Vr.y+wr;ue.push(dn,Kr,Re,0);const Hr=dn-Re,Rr=Kr-Re,Ln=dn+Re,Nn=Kr+Re;if(xe=xe&&this.isOffscreen(Hr,Rr,Ln,Nn),ke=ke||this.isInsideGrid(Hr,Rr,Ln,Nn),r!=="always"&&this.grid.hitTestCircle(dn,Kr,Re,r,$)&&(Te=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!R&&Te||!ke||me<this.perspectiveRatioCutoff?[]:ue,offscreen:xe,collisionDetected:Te}}projectPathToScreenSpace(r,c){const f=(function(v,b){const T=l.L();return l.aq(T,b.pitchedLabelPlaneMatrix),v.map((O=>{const R=Wn(O.x,O.y,T,b.getElevation),L=b.transform.projectTileCoordinates(R.point.x,R.point.y,b.unwrappedTileID,b.getElevation);return L.point.x=(.5*L.point.x+.5)*b.width,L.point.y=(.5*-L.point.y+.5)*b.height,L}))})(r,c);return(function(v){let b=0,T=0,O=0,R=0;for(let L=0;L<v.length;L++)v[L].isOccluded?(O=L+1,R=0):(R++,R>T&&(T=R,b=O));return v.slice(b,b+T)})(f)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],f=new l.a2;for(const Z of r){const W=new l.P(Z.x+wr,Z.y+wr);f.extend(W),c.push(W)}const{minX:v,minY:b,maxX:T,maxY:O}=f,R=this.grid.query(v,b,T,O).concat(this.ignoredGrid.query(v,b,T,O)),L={},$={};for(const Z of R){const W=Z.key;if(L[W.bucketInstanceId]===void 0&&(L[W.bucketInstanceId]={}),L[W.bucketInstanceId][W.featureIndex])continue;const K=[new l.P(Z.x1,Z.y1),new l.P(Z.x2,Z.y1),new l.P(Z.x2,Z.y2),new l.P(Z.x1,Z.y2)];l.az(c,K)&&(L[W.bucketInstanceId][W.featureIndex]=!0,$[W.bucketInstanceId]===void 0&&($[W.bucketInstanceId]=[]),$[W.bucketInstanceId].push(W.featureIndex))}return $}insertCollisionBox(r,c,f,v,b,T){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:b,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,f,v,b,T){const O=f?this.ignoredGrid:this.grid,R={bucketInstanceId:v,featureIndex:b,collisionGroupID:T,overlapMode:c};for(let L=0;L<r.length;L+=4)O.insertCircle(R,r[L],r[L+1],r[L+2])}projectAndGetPerspectiveRatio(r,c,f,v,b){if(b){let T;v?(T=[r,c,v(r,c),1],l.aw(T,T,b)):(T=[r,c,0,1],Rl(T,T,b));const O=T[3];return{x:(T[0]/O+1)/2*this.transform.width+wr,y:(-T[1]/O+1)/2*this.transform.height+wr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const T=this.transform.projectTileCoordinates(r,c,f,v);return{x:(T.point.x+1)/2*this.transform.width+wr,y:(1-T.point.y)/2*this.transform.height+wr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,f,v){const b=this.transform.projectTileCoordinates(r,c,f,v);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(r,c,f,v){return f<wr||r>=this.screenRightBoundary||v<wr||c>this.screenBottomBoundary}isInsideGrid(r,c,f,v){return f>=0&&r<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=l.ag([]);return l.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,f,v,b,T,O,R,L,$,Z){let W=1,K=0,ne=0,ue=1;const pe=r.anchorPointX+O[0],me=r.anchorPointY+O[1];if(T&&!b){const wt=this.projectAndGetPerspectiveRatio(pe+1,me,v,L,Z),dt=wt.x-R.x,Lt=Math.atan((wt.y-R.y)/dt)+(dt<0?Math.PI:0),vr=Math.sin(Lt),Nr=Math.cos(Lt);W=Nr,K=vr,ne=-vr,ue=Nr}else if(!T&&b){const wt=Er(this.transform);W=wt.vecEast[0],K=wt.vecEast[1],ne=wt.vecSouth[0],ue=wt.vecSouth[1]}let ye=R.x,be=R.y,ve=c;b&&(ye=pe,be=me,ve=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),ve*=this.transform.getPitchedTextCorrection(pe,me,v),$||(ve*=l.ah(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),$&&(ye+=W*$.x*ve+ne*$.y*ve,be+=K*$.x*ve+ue*$.y*ve);const Te=r.x1*ve,ke=r.x2*ve,xe=(Te+ke)/2,Re=r.y1*ve,He=r.y2*ve,Ge=(Re+He)/2,Ze=[{offsetX:Te,offsetY:Re},{offsetX:xe,offsetY:Re},{offsetX:ke,offsetY:Re},{offsetX:ke,offsetY:Ge},{offsetX:ke,offsetY:He},{offsetX:xe,offsetY:He},{offsetX:Te,offsetY:He},{offsetX:Te,offsetY:Ge}];let et=[];for(const{offsetX:wt,offsetY:dt}of Ze)et.push(new l.P(ye+W*wt+ne*dt,be+K*wt+ue*dt));let Pt=!1;if(b){const wt=et.map((dt=>this.projectAndGetPerspectiveRatio(dt.x,dt.y,v,L,Z)));Pt=wt.some((dt=>!dt.isOccluded)),et=wt.map((dt=>new l.P(dt.x,dt.y)))}else Pt=!0;return{box:l.aA(et),allPointsOccluded:!Pt}}}class mi{constructor(r,c,f,v){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):v&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Xr{constructor(r,c,f,v,b){this.text=new mi(r?r.text:null,c,f,b),this.icon=new mi(r?r.icon:null,c,v,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Oc{constructor(r,c,f){this.text=r,this.icon=c,this.skipFade=f}}class Rc{constructor(r,c,f,v,b){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=v,this.tileID=b}}class Bu{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[r]}}function Fa(_,r,c,f,v){const{horizontalAlign:b,verticalAlign:T}=l.aH(_);return new l.P(-(b-.5)*r+f[0]*v,-(T-.5)*c+f[1]*v)}class ui{constructor(r,c,f,v,b){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new Nu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Bu(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(f,v)=>c.getElevation(r,f,v):null}getBucketParts(r,c,f,v){const b=f.getBucket(c),T=f.latestFeatureIndex;if(!b||!T||c.id!==b.layerIds[0])return;const O=f.collisionBoxArray,R=b.layers[0].layout,L=b.layers[0].paint,$=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),Z=f.tileSize/l.$,W=f.tileID.toUnwrapped(),K=R.get("text-rotation-alignment")==="map",ne=l.aC(f,1,this.transform.zoom),ue=l.aD(this.collisionIndex.transform,f,L.get("text-translate"),L.get("text-translate-anchor")),pe=l.aD(this.collisionIndex.transform,f,L.get("icon-translate"),L.get("icon-translate-anchor")),me=gn(K,this.transform,ne);this.retainedQueryData[b.bucketInstanceId]=new Rc(b.bucketInstanceId,T,b.sourceLayerIndex,b.index,f.tileID);const ye={bucket:b,layout:R,translationText:ue,translationIcon:pe,unwrappedTileID:W,pitchedLabelPlaneMatrix:me,scale:$,textPixelRatio:Z,holdingForFade:f.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:l.an(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(v)for(const be of b.sortKeyRanges){const{sortKey:ve,symbolInstanceStart:Te,symbolInstanceEnd:ke}=be;r.push({sortKey:ve,symbolInstanceStart:Te,symbolInstanceEnd:ke,parameters:ye})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(r,c,f,v,b,T,O,R,L,$,Z,W,K,ne,ue,pe,me,ye,be,ve){const Te=l.aE[r.textAnchor],ke=[r.textOffset0,r.textOffset1],xe=Fa(Te,f,v,ke,b),Re=this.collisionIndex.placeCollisionBox(c,W,R,L,$,O,T,pe,Z.predicate,be,xe,ve);if((!ye||this.collisionIndex.placeCollisionBox(ye,W,R,L,$,O,T,me,Z.predicate,be,xe,ve).placeable)&&Re.placeable){let He;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(He=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:ke,width:f,height:v,anchor:Te,textBoxScale:b,prevAnchor:He},this.markUsedJustification(ne,Te,K,ue),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,ue,K),this.placedOrientations[K.crossTileID]=ue),{shift:xe,placedGlyphBoxes:Re}}}placeLayerBucketPart(r,c,f){const{bucket:v,layout:b,translationText:T,translationIcon:O,unwrappedTileID:R,pitchedLabelPlaneMatrix:L,textPixelRatio:$,holdingForFade:Z,collisionBoxArray:W,partiallyEvaluatedTextSize:K,collisionGroup:ne}=r.parameters,ue=b.get("text-optional"),pe=b.get("icon-optional"),me=l.aF(b,"text-overlap","text-allow-overlap"),ye=me==="always",be=l.aF(b,"icon-overlap","icon-allow-overlap"),ve=be==="always",Te=b.get("text-rotation-alignment")==="map",ke=b.get("text-pitch-alignment")==="map",xe=b.get("icon-text-fit")!=="none",Re=b.get("symbol-z-order")==="viewport-y",He=ye&&(ve||!v.hasIconData()||pe),Ge=ve&&(ye||!v.hasTextData()||ue);!v.collisionArrays&&W&&v.deserializeCollisionBoxes(W);const Ze=this.retainedQueryData[v.bucketInstanceId].tileID,et=this._getTerrainElevationFunc(Ze),Pt=this.transform.getFastPathSimpleProjectionMatrix(Ze),wt=(dt,Lt,vr)=>{var Nr,hn;if(c[dt.crossTileID])return;if(Z)return void(this.placements[dt.crossTileID]=new Oc(!1,!1,!1));let Qr=!1,Vr=!1,dn=!0,Kr=null,Hr={box:null,placeable:!1,offscreen:null,occluded:!1},Rr={placeable:!1},Ln=null,Nn=null,_i=null,Bo=0,Fo=0,ga=0;Lt.textFeatureIndex?Bo=Lt.textFeatureIndex:dt.useRuntimeCollisionCircles&&(Bo=dt.featureIndex),Lt.verticalTextFeatureIndex&&(Fo=Lt.verticalTextFeatureIndex);const Ps=Lt.textBox;if(Ps){const xi=rn=>{let An=l.ao.horizontal;if(v.allowVerticalPlacement&&!rn&&this.prevPlacement){const bi=this.prevPlacement.placedOrientations[dt.crossTileID];bi&&(this.placedOrientations[dt.crossTileID]=bi,An=bi,this.markUsedOrientation(v,An,dt))}return An},$o=(rn,An)=>{if(v.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Lt.verticalTextBox){for(const bi of v.writingModes)if(bi===l.ao.vertical?(Hr=An(),Rr=Hr):Hr=rn(),Hr&&Hr.placeable)break}else Hr=rn()},Uo=dt.textAnchorOffsetStartIndex,Vo=dt.textAnchorOffsetEndIndex;if(Vo===Uo){const rn=(An,bi)=>{const ei=this.collisionIndex.placeCollisionBox(An,me,$,Ze,R,ke,Te,T,ne.predicate,et,void 0,Pt);return ei&&ei.placeable&&(this.markUsedOrientation(v,bi,dt),this.placedOrientations[dt.crossTileID]=bi),ei};$o((()=>rn(Ps,l.ao.horizontal)),(()=>{const An=Lt.verticalTextBox;return v.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&An?rn(An,l.ao.vertical):{box:null,offscreen:null}})),xi(Hr&&Hr.placeable)}else{let rn=l.aE[(hn=(Nr=this.prevPlacement)===null||Nr===void 0?void 0:Nr.variableOffsets[dt.crossTileID])===null||hn===void 0?void 0:hn.anchor];const An=(ei,rm,sd)=>{const Li=ei.x2-ei.x1,As=ei.y2-ei.y1,Oa=dt.textBoxScale,Ra=xe&&be==="never"?rm:null;let Ni=null,sh=me==="never"?1:2,_o="never";rn&&sh++;for(let pl=0;pl<sh;pl++){for(let hc=Uo;hc<Vo;hc++){const dc=v.textAnchorOffsets.get(hc);if(rn&&dc.textAnchor!==rn)continue;const lh=this.attemptAnchorPlacement(dc,ei,Li,As,Oa,Te,ke,$,Ze,R,ne,_o,dt,v,sd,T,O,Ra,et);if(lh&&(Ni=lh.placedGlyphBoxes,Ni&&Ni.placeable))return Qr=!0,Kr=lh.shift,Ni}rn?rn=null:_o=me}return f&&!Ni&&(Ni={box:this.collisionIndex.placeCollisionBox(Ps,"always",$,Ze,R,ke,Te,T,ne.predicate,et,void 0,Pt).box,offscreen:!1,placeable:!1,occluded:!1}),Ni};$o((()=>An(Ps,Lt.iconBox,l.ao.horizontal)),(()=>{const ei=Lt.verticalTextBox;return v.allowVerticalPlacement&&(!Hr||!Hr.placeable)&&dt.numVerticalGlyphVertices>0&&ei?An(ei,Lt.verticalIconBox,l.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Hr&&(Qr=Hr.placeable,dn=Hr.offscreen);const bi=xi(Hr&&Hr.placeable);if(!Qr&&this.prevPlacement){const ei=this.prevPlacement.variableOffsets[dt.crossTileID];ei&&(this.variableOffsets[dt.crossTileID]=ei,this.markUsedJustification(v,ei.anchor,dt,bi))}}}if(Ln=Hr,Qr=Ln&&Ln.placeable,dn=Ln&&Ln.offscreen,dt.useRuntimeCollisionCircles){const xi=v.text.placedSymbolArray.get(dt.centerJustifiedTextSymbolIndex),$o=l.ap(v.textSizeData,K,xi),Uo=b.get("text-padding");Nn=this.collisionIndex.placeCollisionCircles(me,xi,v.lineVertexArray,v.glyphOffsetArray,$o,R,L,f,ke,ne.predicate,dt.collisionCircleDiameter,Uo,T,et),Nn.circles.length&&Nn.collisionDetected&&!f&&l.w("Collisions detected, but collision boxes are not shown"),Qr=ye||Nn.circles.length>0&&!Nn.collisionDetected,dn=dn&&Nn.offscreen}if(Lt.iconFeatureIndex&&(ga=Lt.iconFeatureIndex),Lt.iconBox){const xi=$o=>this.collisionIndex.placeCollisionBox($o,be,$,Ze,R,ke,Te,O,ne.predicate,et,xe&&Kr?Kr:void 0,Pt);Rr&&Rr.placeable&&Lt.verticalIconBox?(_i=xi(Lt.verticalIconBox),Vr=_i.placeable):(_i=xi(Lt.iconBox),Vr=_i.placeable),dn=dn&&_i.offscreen}const uc=ue||dt.numHorizontalGlyphVertices===0&&dt.numVerticalGlyphVertices===0,hu=pe||dt.numIconVertices===0;uc||hu?hu?uc||(Vr=Vr&&Qr):Qr=Vr&&Qr:Vr=Qr=Vr&&Qr;const Ts=Vr&&_i.placeable;if(Qr&&Ln.placeable&&this.collisionIndex.insertCollisionBox(Ln.box,me,b.get("text-ignore-placement"),v.bucketInstanceId,Rr&&Rr.placeable&&Fo?Fo:Bo,ne.ID),Ts&&this.collisionIndex.insertCollisionBox(_i.box,be,b.get("icon-ignore-placement"),v.bucketInstanceId,ga,ne.ID),Nn&&Qr&&this.collisionIndex.insertCollisionCircles(Nn.circles,me,b.get("text-ignore-placement"),v.bucketInstanceId,Bo,ne.ID),f&&this.storeCollisionData(v.bucketInstanceId,vr,Lt,Ln,_i,Nn),dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[dt.crossTileID]=new Oc((Qr||He)&&!Ln?.occluded,(Vr||Ge)&&!_i?.occluded,dn||v.justReloaded),c[dt.crossTileID]=!0};if(Re){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const dt=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Lt=dt.length-1;Lt>=0;--Lt){const vr=dt[Lt];wt(v.symbolInstances.get(vr),v.collisionArrays[vr],vr)}}else for(let dt=r.symbolInstanceStart;dt<r.symbolInstanceEnd;dt++)wt(v.symbolInstances.get(dt),v.collisionArrays[dt],dt);v.justReloaded=!1}storeCollisionData(r,c,f,v,b,T){if(f.textBox||f.iconBox){let O,R;this.collisionBoxArrays.has(r)?O=this.collisionBoxArrays.get(r):(O=new Map,this.collisionBoxArrays.set(r,O)),O.has(c)?R=O.get(c):(R={text:null,icon:null},O.set(c,R)),f.textBox&&(R.text=v.box),f.iconBox&&(R.icon=b.box)}if(T){let O=this.collisionCircleArrays[r];O===void 0&&(O=this.collisionCircleArrays[r]=[]);for(let R=0;R<T.circles.length;R+=4)O.push(T.circles[R+0]-wr),O.push(T.circles[R+1]-wr),O.push(T.circles[R+2]),O.push(T.collisionDetected?1:0)}}markUsedJustification(r,c,f,v){let b;b=v===l.ao.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.aG(c)];const T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const O of T)O>=0&&(r.text.placedSymbolArray.get(O).crossTileID=b>=0&&O!==b?0:f.crossTileID)}markUsedOrientation(r,c,f){const v=c===l.ao.horizontal||c===l.ao.horizontalOnly?c:0,b=c===l.ao.vertical?c:0,T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const O of T)r.text.placedSymbolArray.get(O).placedOrientation=v;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(r):1,b=c?c.opacities:{},T=c?c.variableOffsets:{},O=c?c.placedOrientations:{};for(const R in this.placements){const L=this.placements[R],$=b[R];$?(this.opacities[R]=new Xr($,v,L.text,L.icon),f=f||L.text!==$.text.placed||L.icon!==$.icon.placed):(this.opacities[R]=new Xr(null,v,L.text,L.icon,L.skipFade),f=f||L.text||L.icon)}for(const R in b){const L=b[R];if(!this.opacities[R]){const $=new Xr(L,v,!1,!1);$.isHidden()||(this.opacities[R]=$,f=f||L.text.placed||L.icon.placed)}}for(const R in T)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=T[R]);for(const R in O)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=O[R]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const f={};for(const v of c){const b=v.getBucket(r);b&&v.latestFeatureIndex&&r.id===b.layerIds[0]&&this.updateBucketOpacities(b,v.tileID,f,v.collisionBoxArray)}}updateBucketOpacities(r,c,f,v){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const b=r.layers[0],T=b.layout,O=new Xr(null,0,!1,!1,!0),R=T.get("text-allow-overlap"),L=T.get("icon-allow-overlap"),$=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Z=T.get("text-rotation-alignment")==="map",W=T.get("text-pitch-alignment")==="map",K=T.get("icon-text-fit")!=="none",ne=new Xr(null,0,R&&(L||!r.hasIconData()||T.get("icon-optional")),L&&(R||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&v&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(v);const ue=(me,ye,be)=>{for(let ve=0;ve<ye/4;ve++)me.opacityVertexArray.emplaceBack(be);me.hasVisibleVertices=me.hasVisibleVertices||be!==jl},pe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let me=0;me<r.symbolInstances.length;me++){const ye=r.symbolInstances.get(me),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:ve,crossTileID:Te}=ye;let ke=this.opacities[Te];f[Te]?ke=O:ke||(ke=ne,this.opacities[Te]=ke),f[Te]=!0;const xe=ye.numIconVertices>0,Re=this.placedOrientations[ye.crossTileID],He=Re===l.ao.vertical,Ge=Re===l.ao.horizontal||Re===l.ao.horizontalOnly;if(be>0||ve>0){const et=zl(ke.text);ue(r.text,be,He?jl:et),ue(r.text,ve,Ge?jl:et);const Pt=ke.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach((Lt=>{Lt>=0&&(r.text.placedSymbolArray.get(Lt).hidden=Pt||He?1:0)})),ye.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=Pt||Ge?1:0);const wt=this.variableOffsets[ye.crossTileID];wt&&this.markUsedJustification(r,wt.anchor,ye,Re);const dt=this.placedOrientations[ye.crossTileID];dt&&(this.markUsedJustification(r,"left",ye,dt),this.markUsedOrientation(r,dt,ye))}if(xe){const et=zl(ke.icon),Pt=!(K&&ye.verticalPlacedIconSymbolIndex&&He);ye.placedIconSymbolIndex>=0&&(ue(r.icon,ye.numIconVertices,Pt?et:jl),r.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=ke.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(ue(r.icon,ye.numVerticalIconVertices,Pt?jl:et),r.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}const Ze=pe&&pe.has(me)?pe.get(me):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const et=r.collisionArrays[me];if(et){let Pt=new l.P(0,0);if(et.textBox||et.verticalTextBox){let wt=!0;if($){const dt=this.variableOffsets[Te];dt?(Pt=Fa(dt.anchor,dt.width,dt.height,dt.textOffset,dt.textBoxScale),Z&&Pt._rotate(W?-this.transform.bearingInRadians:this.transform.bearingInRadians)):wt=!1}if(et.textBox||et.verticalTextBox){let dt;et.textBox&&(dt=He),et.verticalTextBox&&(dt=Ge),Rh(r.textCollisionBox.collisionVertexArray,ke.text.placed,!wt||dt,Ze.text,Pt.x,Pt.y)}}if(et.iconBox||et.verticalIconBox){const wt=!!(!Ge&&et.verticalIconBox);let dt;et.iconBox&&(dt=wt),et.verticalIconBox&&(dt=!wt),Rh(r.iconCollisionBox.collisionVertexArray,ke.icon.placed,dt,Ze.icon,K?Pt.x:0,K?Pt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function Rh(_,r,c,f,v,b){f&&f.length!==0||(f=[0,0,0,0]);const T=f[0]-wr,O=f[1]-wr,R=f[2]-wr,L=f[3]-wr;_.emplaceBack(r?1:0,c?1:0,v||0,b||0,T,O),_.emplaceBack(r?1:0,c?1:0,v||0,b||0,R,O),_.emplaceBack(r?1:0,c?1:0,v||0,b||0,R,L),_.emplaceBack(r?1:0,c?1:0,v||0,b||0,T,L)}const Pa=Math.pow(2,25),Yd=Math.pow(2,24),Dl=Math.pow(2,17),Jd=Math.pow(2,16),Fu=Math.pow(2,9),$u=Math.pow(2,8),Dc=Math.pow(2,1);function zl(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const r=_.placed?1:0,c=Math.floor(127*_.opacity);return c*Pa+r*Yd+c*Dl+r*Jd+c*Fu+r*$u+c*Dc+r}const jl=0;class Dh{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,f,v,b){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,v,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort(((O,R)=>O.sortKey-R.sortKey)));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,b())return!0;return!1}}class zc{constructor(r,c,f,v,b,T,O,R){this.placement=new ui(r,c,T,O,R),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(r,c,f){const v=D.now(),b=()=>!this._forceFullPlacement&&D.now()-v>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=O)&&(!T.maxzoom||T.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Dh(T)),this._inProgressLayer.continuePlacement(f[T.source],this.placement,this._showCollisionBoxes,T,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Us=512/l.$/2;class jc{constructor(r,c,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const v=new Map;for(let b=0;b<c.length;b++){const T=c.get(b),O=T.key,R=v.get(O);R?R.push(T):v.set(O,[T])}for(const[b,T]of v){const O={positions:T.map((R=>({x:Math.floor(R.anchorX*Us),y:Math.floor(R.anchorY*Us)}))),crossTileIDs:T.map((R=>R.crossTileID))};if(O.positions.length>128){const R=new l.aI(O.positions.length,16,Uint16Array);for(const{x:L,y:$}of O.positions)R.add(L,$);R.finish(),delete O.positions,O.index=R}this._symbolsByKey[b]=O}}getScaledCoordinates(r,c){const{x:f,y:v,z:b}=this.tileID.canonical,{x:T,y:O,z:R}=c.canonical,L=Us/Math.pow(2,R-b),$=(O*l.$+r.anchorY)*L,Z=v*l.$*Us;return{x:Math.floor((T*l.$+r.anchorX)*L-f*l.$*Us),y:Math.floor($-Z)}}findMatches(r,c,f){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<r.length;b++){const T=r.get(b);if(T.crossTileID)continue;const O=this._symbolsByKey[T.key];if(!O)continue;const R=this.getScaledCoordinates(T,c);if(O.index){const L=O.index.range(R.x-v,R.y-v,R.x+v,R.y+v).sort();for(const $ of L){const Z=O.crossTileIDs[$];if(!f[Z]){f[Z]=!0,T.crossTileID=Z;break}}}else if(O.positions)for(let L=0;L<O.positions.length;L++){const $=O.positions[L],Z=O.crossTileIDs[L];if(Math.abs($.x-R.x)<=v&&Math.abs($.y-R.y)<=v&&!f[Z]){f[Z]=!0,T.crossTileID=Z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:r})=>r))}}class Vs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gp{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const f in this.indexes){const v=this.indexes[f],b={};for(const T in v){const O=v[T];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+c),b[O.tileID.key]=O}this.indexes[f]=b}this.lng=r}addBucket(r,c,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const v=this.usedCrossTileIDs[r.overscaledZ];for(const b in this.indexes){const T=this.indexes[b];if(Number(b)>r.overscaledZ)for(const O in T){const R=T[O];R.tileID.isChildOf(r)&&R.findMatches(c.symbolInstances,r,v)}else{const O=T[r.scaledTo(Number(b)).key];O&&O.findMatches(c.symbolInstances,r,v)}}for(let b=0;b<c.symbolInstances.length;b++){const T=c.symbolInstances.get(b);T.crossTileID||(T.crossTileID=f.generate(),v[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new jc(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const f of c.getCrossTileIDsLists())for(const v of f)delete this.usedCrossTileIDs[r][v]}removeStaleBuckets(r){let c=!1;for(const f in this.indexes){const v=this.indexes[f];for(const b in v)r[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,v[b]),delete v[b],c=!0)}return c}}class os{constructor(){this.layerIndexes={},this.crossTileIDs=new Vs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,f){let v=this.layerIndexes[r.id];v===void 0&&(v=this.layerIndexes[r.id]=new Gp);let b=!1;const T={};v.handleWrapJump(f);for(const O of c){const R=O.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(O.tileID,R,this.crossTileIDs)&&(b=!0),T[R.bucketInstanceId]=!0)}return v.removeStaleBuckets(T)&&(b=!0),b}pruneUnusedLayers(r){const c={};r.forEach((f=>{c[f]=!0}));for(const f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}var $r="void main() {fragColor=vec4(1.0);}";const Ta={prelude:Sr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Sr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Sr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Sr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Sr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Sr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Sr($r,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Sr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Sr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Sr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Sr($r,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Sr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Sr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Sr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Sr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Sr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Sr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Sr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Sr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Sr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Sr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Sr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Sr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Sr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Sr(_,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/in ([\w]+) ([\w]+)/g),v=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=b?b.concat(v):v,O={};return{fragmentSource:_=_.replace(c,((R,L,$,Z,W)=>(O[W]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${W}
in ${$} ${Z} ${W};
#else
uniform ${$} ${Z} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${$} ${Z} ${W} = u_${W};
#endif
`))),vertexSource:r=r.replace(c,((R,L,$,Z,W)=>{const K=Z==="float"?"vec2":"vec4",ne=W.match(/color/)?"color":K;return O[W]?L==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${$} ${K} a_${W};
out ${$} ${Z} ${W};
#else
uniform ${$} ${Z} u_${W};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${$} ${Z} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${ne}(a_${W}, u_${W}_t);
#else
    ${$} ${Z} ${W} = u_${W};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${$} ${K} a_${W};
#else
uniform ${$} ${Z} u_${W};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${$} ${Z} ${W} = a_${W};
#else
    ${$} ${Z} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${$} ${Z} ${W} = unpack_mix_${ne}(a_${W}, u_${W}_t);
#else
    ${$} ${Z} ${W} = u_${W};
#endif
`})),staticAttributes:f,staticUniforms:T}}class Mo{constructor(r,c,f){this.vertexBuffer=r,this.indexBuffer=c,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ko=l.aJ([{name:"a_pos",type:"Int16",components:2}]);const lo="#define PROJECTION_MERCATOR",ss="mercator";class _r{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ss}get shaderDefine(){return lo}get shaderPreludeCode(){return Ta.projectionMercator}get vertexShaderPreludeCode(){return Ta.projectionMercator.vertexSource}get subdivisionGranularity(){return l.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,f,v,b){if(this._cachedMesh)return this._cachedMesh;const T=new l.aL;T.emplaceBack(0,0),T.emplaceBack(l.$,0),T.emplaceBack(0,l.$),T.emplaceBack(l.$,l.$);const O=r.createVertexBuffer(T,ko.members),R=l.aM.simpleSegment(0,0,4,2),L=new l.aN;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3);const $=r.createIndexBuffer(L);return this._cachedMesh=new Mo(O,$,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class co{constructor(r=0,c=0,f=0,v=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=f,this.right=v}interpolate(r,c,f){return c.top!=null&&r.top!=null&&(this.top=l.C.number(r.top,c.top,f)),c.bottom!=null&&r.bottom!=null&&(this.bottom=l.C.number(r.bottom,c.bottom,f)),c.left!=null&&r.left!=null&&(this.left=l.C.number(r.left,c.left,f)),c.right!=null&&r.right!=null&&(this.right=l.C.number(r.right,c.right,f)),this}getCenter(r,c){const f=l.ah((this.left+r-this.right)/2,0,r),v=l.ah((this.top+c-this.bottom)/2,0,c);return new l.P(f,v)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new co(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function $a(_,r){if(!_.renderWorldCopies||_.lngRange)return;const c=r.lng-_.center.lng;r.lng+=c>180?-360:c<-180?360:0}function Ua(_){return Math.max(0,Math.floor(_))}class Sn{constructor(r,c,f,v,b,T){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=c||0,this._maxZoom=f||22,this._minPitch=v??0,this._maxPitch=b??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new l.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ua(this._zoom),this._scale=l.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new co,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,f){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Ua(this._zoom),this._scale=l.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new co(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!f&&r.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=l.aO(r,-180,180)*Math.PI/180;var f,v,b,T,O,R,L,$,Z;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=A(),f=this._rotationMatrix,b=-this._bearingInRadians,T=(v=this._rotationMatrix)[0],O=v[1],R=v[2],L=v[3],$=Math.sin(b),Z=Math.cos(b),f[0]=T*Z+R*$,f[1]=O*Z+L*$,f[2]=T*-$+R*Z,f[3]=O*-$+L*Z)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=l.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return l.aP(this._fovInRadians)}setFov(r){r=l.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=l.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.getConstrained(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=l.af(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,f){this._unmodified=!1,this._edgeInsets.interpolate(r,c,f),this._constrain(),this._calcMatrices()}resize(r,c,f=!0){this._width=r,this._height=c,f&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new dr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-l.ai,l.ai])}getConstrained(r,c){return this._callbacks.getConstrained(r,c)}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{const{minX:f,minY:v,maxX:b,maxY:T}=l.a2.fromPoints(c).extend(r);return[new l.P(f,v),new l.P(b,v),new l.P(b,T),new l.P(f,T),new l.P(f,v)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:f}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(f),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=l.ag(new Float64Array(16));l.N(r,r,[this._width/2,-this._height/2,1]),l.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=l.ag(new Float64Array(16)),l.N(r,r,[1,-1,1]),l.M(r,r,[-1,-1,0]),l.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,f,v){const b=f!==void 0?f:this.bearing,T=v=v!==void 0?v:this.pitch,O=l.a1.fromLngLat(r,c),R=-Math.cos(l.ae(T)),L=Math.sin(l.ae(T)),$=L*Math.sin(l.ae(b)),Z=-L*Math.cos(l.ae(b));let W=this.elevation;const K=c-W;let ne;R*K>=0||Math.abs(R)<.1?(ne=1e4,W=c+ne*R):ne=-K/R;let ue,pe,me=l.aQ(1,O.y),ye=0;do{if(ye+=1,ye>10)break;pe=ne/me,ue=new l.a1(O.x+$*pe,O.y+Z*pe),me=1/ue.meterInMercatorCoordinateUnits()}while(Math.abs(ne-pe*me)>1e-12);return{center:ue.toLngLat(),elevation:W,zoom:l.ak(this.height/2/Math.tan(this.fovInRadians/2)/pe/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=l.aj(1,this.center.lat)*this.worldSize,f=this.cameraToCenterDistance/c,v=l.a1.fromLngLat(this.center,this.elevation),b=Xe(this.center,this.elevation,this.pitch,this.bearing,f);this._elevation=r;const T=this.calculateCenterFromCameraLngLatAlt(b.toLngLat(),l.aQ(b.z,v.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=l.aj(1,this.center.lat)*this.worldSize;return Xe(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/l.$,1/c/l.$]}}class Pn{constructor(r,c){this.min=r,this.max=c,this.center=l.aR([],l.aS([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],f=l.aT(this.min),v=l.aT(this.max);for(let b=0;b<c.length;b++)f[b]=c[b]?this.min[b]:this.center[b],v[b]=c[b]?this.center[b]:this.max[b];return v[2]=this.max[2],new Pn(f,v)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let f=0;f<r.planes.length;f++){const v=this.intersectsPlane(r.planes[f]);if(v===0)return 0;v===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],f=r[3];for(let v=0;v<3;v++)r[v]>0?(c+=r[v]*this.min[v],f+=r[v]*this.max[v]):(f+=r[v]*this.min[v],c+=r[v]*this.max[v]);return c>=0?2:f<0?0:1}}class Yn{distanceToTile2d(r,c,f,v){const b=v.distanceX([r,c]),T=v.distanceY([r,c]);return Math.hypot(b,T)}getWrap(r,c,f){return f}getTileBoundingVolume(r,c,f,v){var b,T;let O=0,R=0;if(v?.terrain){const $=new l.Z(r.z,c,r.z,r.x,r.y),Z=v.terrain.getMinMaxElevation($);O=(b=Z.minElevation)!==null&&b!==void 0?b:Math.min(0,f),R=(T=Z.maxElevation)!==null&&T!==void 0?T:Math.max(0,f)}const L=1<<r.z;return new Pn([c+r.x/L,r.y/L,O],[c+(r.x+1)/L,(r.y+1)/L,R])}allowVariableZoom(r,c){const f=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,v=l.ah(78.5-f/2,0,60);return!!c.terrain||r.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class on{constructor(r,c,f){this.points=r,this.planes=c,this.aabb=f}static fromInvProjectionMatrix(r,c=1,f=0,v,b){const T=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,f),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((W=>(function(K,ne,ue,pe){const me=l.aw([],K,ne),ye=1/me[3]/ue*pe;return l.aY(me,me,[ye,ye,1/me[3],ye])})(W,r,c,O)));v&&(function(W,K,ne,ue){const pe=ue?4:0,me=ue?0:4;let ye=0;const be=[],ve=[];for(let xe=0;xe<4;xe++){const Re=l.aU([],W[xe+me],W[xe+pe]),He=l.aZ(Re);l.aR(Re,Re,1/He),be.push(He),ve.push(Re)}for(let xe=0;xe<4;xe++){const Re=l.a_(W[xe+pe],ve[xe],ne);ye=Re!==null&&Re>=0?Math.max(ye,Re):Math.max(ye,be[xe])}const Te=(function(xe,Re){const He=l.aU([],xe[Re[0]],xe[Re[1]]),Ge=l.aU([],xe[Re[2]],xe[Re[1]]),Ze=[0,0,0,0];return l.aV(Ze,l.aW([],He,Ge)),Ze[3]=-l.aX(Ze,xe[Re[0]]),Ze})(W,K),ke=(function(xe,Re){const He=l.a$(xe),Ge=l.b0([],xe,1/He),Ze=l.aU([],Re,l.aR([],Ge,l.aX(Re,Ge))),et=l.a$(Ze);if(et>0){const Pt=Math.sqrt(1-Ge[3]*Ge[3]),wt=l.aR([],Ge,-Ge[3]),dt=l.aS([],wt,l.aR([],Ze,Pt/et));return l.b1(Re,dt)}return null})(ne,Te);if(ke!==null){const xe=ke/l.aX(ve[0],Te);ye=Math.min(ye,xe)}for(let xe=0;xe<4;xe++){const Re=Math.min(ye,be[xe]);W[xe+me]=[W[xe+pe][0]+ve[xe][0]*Re,W[xe+pe][1]+ve[xe][1]*Re,W[xe+pe][2]+ve[xe][2]*Re,1]}})(R,T[0],v,b);const L=T.map((W=>{const K=l.aU([],R[W[0]],R[W[1]]),ne=l.aU([],R[W[2]],R[W[1]]),ue=l.aV([],l.aW([],K,ne)),pe=-l.aX(ue,R[W[1]]);return ue.concat(pe)})),$=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Z=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const W of R)for(let K=0;K<3;K++)$[K]=Math.min($[K],W[K]),Z[K]=Math.max(Z[K],W[K]);return new on(R,L,new Pn($,Z))}}class tn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,f){return this._helper.interpolatePadding(r,c,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,f=!0){this._helper.resize(r,c,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r,c,f,v,b){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Sn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,O)=>this.getConstrained(T,O)},r,c,f,v,b),this._coveringTilesDetailsProvider=new Yn}clone(){const r=new tn;return r.apply(this),r}apply(r,c,f){this._helper.apply(r,c,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new l.b2(0,r)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new l.P(0,0)),v=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new l.P(0,this._helper._height)),O=Math.floor(Math.min(f.x,v.x,b.x,T.x)),R=Math.floor(Math.max(f.x,v.x,b.x,T.x)),L=1;for(let $=O-L;$<=R+L;$++)$!==0&&c.push(new l.b2($,r))}return c}getCameraFrustum(){return on.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),f=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(r,c){const f=l.aj(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(c,f),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),T=l.a1.fromLngLat(r),O=new l.a1(T.x-(v.x-b.x),T.y-(v.y-b.y));this.setCenter(O?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(l.a1.fromLngLat(r),c.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(l.a1.fromLngLat(r))}screenPointToLocation(r,c){var f;return(f=this.screenPointToMercatorCoordinate(r,c))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const f=c.pointCoordinate(r);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const f=c||0,v=[r.x,r.y,0,1],b=[r.x,r.y,1,1];l.aw(v,v,this._pixelMatrixInverse),l.aw(b,b,this._pixelMatrixInverse);const T=v[3],O=b[3],R=v[1]/T,L=b[1]/O,$=v[2]/T,Z=b[2]/O,W=$===Z?0:(f-$)/(Z-$);return new l.a1(l.C.number(v[0]/T,b[0]/O,W)/this.worldSize,l.C.number(R,L,W)/this.worldSize,f)}coordinatePoint(r,c=0,f=this._pixelMatrix){const v=[r.x*this.worldSize,r.y*this.worldSize,c,1];return l.aw(v,v,f),new l.P(v[0]/v[3],v[1]/v[3])}getBounds(){const r=Math.max(0,this._helper._height/2-Ce(this));return new dr().extend(this.screenPointToLocation(new l.P(0,r))).extend(this.screenPointToLocation(new l.P(this._helper._width,r))).extend(this.screenPointToLocation(new l.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new l.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-Ce(this)}calculatePosMatrix(r,c=!1,f){var v;const b=(v=r.key)!==null&&v!==void 0?v:l.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),T=c?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(b)){const L=T.get(b);return f?L.f32:L.f64}const O=je(r,this.worldSize);l.O(O,c?this._alignedProjMatrix:this._viewProjMatrix,O);const R={f64:O,f32:new Float32Array(O)};return T.set(b,R),f?R.f32:R.f64}calculateFogMatrix(r){const c=r.key,f=this._fogMatrixCacheF32;if(f.has(c))return f.get(c);const v=je(r,this.worldSize);return l.O(v,this._fogMatrix,v),f.set(c,new Float32Array(v)),f.get(c)}getConstrained(r,c){c=l.ah(+c,this.minZoom,this.maxZoom);const f={center:new l.S(r.lng,r.lat),zoom:c};let v=this._helper._lngRange;if(!this._helper._renderWorldCopies&&v===null){const be=179.9999999999;v=[-be,be]}const b=this.tileSize*l.af(f.zoom);let T=0,O=b,R=0,L=b,$=0,Z=0;const{x:W,y:K}=this.size;if(this._helper._latRange){const be=this._helper._latRange;T=l.U(be[1])*b,O=l.U(be[0])*b,O-T<K&&($=K/(O-T))}v&&(R=l.aO(l.V(v[0])*b,0,b),L=l.aO(l.V(v[1])*b,0,b),L<R&&(L+=b),L-R<W&&(Z=W/(L-R)));const{x:ne,y:ue}=he(b,r);let pe,me;const ye=Math.max(Z||0,$||0);if(ye){const be=new l.P(Z?(L+R)/2:ne,$?(O+T)/2:ue);return f.center=we(b,be).wrap(),f.zoom+=l.ak(ye),f}if(this._helper._latRange){const be=K/2;ue-be<T&&(me=T+be),ue+be>O&&(me=O-be)}if(v){const be=(R+L)/2;let ve=ne;this._helper._renderWorldCopies&&(ve=l.aO(ne,be-b/2,be+b/2));const Te=W/2;ve-Te<R&&(pe=R+Te),ve+Te>L&&(pe=L-Te)}if(pe!==void 0||me!==void 0){const be=new l.P(pe??ne,me??ue);f.center=we(b,be).wrap()}return f}calculateCenterFromCameraLngLatAlt(r,c,f,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,f,v)}_calculateNearFarZIfNeeded(r,c,f){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=r-v*this._helper._pixelPerMeter/Math.cos(c),T=v<0?b:r,O=Math.PI/2+this.pitchInRadians,R=l.ae(this.fov)*(Math.abs(Math.cos(l.ae(this.roll)))*this.height+Math.abs(Math.sin(l.ae(this.roll)))*this.width)/this.height*(.5+f.y/this.height),L=Math.sin(R)*T/Math.sin(l.ah(Math.PI-O-R,.01,Math.PI-.01)),$=Ce(this),Z=Math.atan($/this._helper.cameraToCenterDistance),W=l.ae(.75),K=Z>W?2*Z*(.5+f.y/(2*$)):W,ne=Math.sin(K)*T/Math.sin(l.ah(Math.PI-O-K,.01,Math.PI-.01)),ue=Math.min(L,ne);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*ue+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=he(this.worldSize,this.center),f=c.x,v=c.y;this._helper._pixelPerMeter=l.aj(1,this.center.lat)*this.worldSize;const b=l.ae(Math.min(this.pitch,ae)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let O;this._calculateNearFarZIfNeeded(T,b,r),O=new Float64Array(16),l.b4(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),l.aq(this._invProjMatrix,O),O[8]=2*-r.x/this._helper._width,O[9]=2*r.y/this._helper._height,this._projectionMatrix=l.b5(O),l.N(O,O,[1,-1,1]),l.M(O,O,[0,0,-this._helper.cameraToCenterDistance]),l.b6(O,O,-this.rollInRadians),l.b7(O,O,this.pitchInRadians),l.b6(O,O,-this.bearingInRadians),l.M(O,O,[-f,-v,0]),this._mercatorMatrix=l.N([],O,[this.worldSize,this.worldSize,this.worldSize]),l.N(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=l.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),l.M(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=l.aq([],O);const R=[0,0,-1,1];l.aw(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),l.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,l.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),l.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),l.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),l.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),l.M(this._fogMatrix,this._fogMatrix,[-f,-v,0]),l.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),l.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=l.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const L=this._helper._width%2/2,$=this._helper._height%2/2,Z=Math.cos(this.bearingInRadians),W=Math.sin(-this.bearingInRadians),K=f-Math.round(f)+Z*L+W*$,ne=v-Math.round(v)+Z*$+W*L,ue=new Float64Array(O);if(l.M(ue,ue,[K>.5?K-1:K,ne>.5?ne-1:ne,0]),this._alignedProjMatrix=ue,O=l.aq(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new l.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.aw(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=l.aj(1,this.center.lat)*this.worldSize;return Xe(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const f=l.a1.fromLngLat(r),v=[f.x*this.worldSize,f.y*this.worldSize,c,1];return l.aw(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(r){const{overscaledTileID:c,aligned:f,applyTerrainMatrix:v}=r,b=this._helper.getMercatorTileCoordinates(c),T=c?this.calculatePosMatrix(c,f,!0):null;let O;return O=c&&c.terrainRttPosMatrix32f&&v?c.terrainRttPosMatrix32f:T||l.b8(),{mainMatrix:O,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,f){return 1}transformLightDirection(r){return l.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,f,v){const b=this.calculatePosMatrix(f);let T;v?(T=[r,c,v(r,c),1],l.aw(T,T,b)):(T=[r,c,0,1],Rl(T,T,b));const O=T[3];return{point:new l.P(T[0]/O,T[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const f=l.a1.fromLngLat(r,c),v=f.meterInMercatorCoordinateUnits(),b=l.b9();return l.M(b,b,[f.x,f.y,f.z]),l.b6(b,b,Math.PI),l.b7(b,b,Math.PI/2),l.N(b,b,[-v,v,v]),b}getProjectionDataForCustomLayer(r=!0){const c=new l.Z(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),v=je(c,this.worldSize);l.O(v,this._viewProjMatrix,v),f.tileMercatorCoords=[0,0,1,1];const b=[l.$,l.$,this.worldSize/this._helper.pixelsPerMeter],T=l.ba();return l.N(T,v,b),f.fallbackMatrix=T,f.mainMatrix=T,f}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function zh(){l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Jn(_){if(_.useSlerp)if(_.k<1){const r=l.bb(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),c=l.bb(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),f=new Float64Array(4);l.bc(f,r,c,_.k);const v=l.bd(f);_.tr.setRoll(v.roll),_.tr.setPitch(v.pitch),_.tr.setBearing(v.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(l.C.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(l.C.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(l.C.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function sa(_,r,c,f,v){const b=v.padding,T=he(v.worldSize,c.getNorthWest()),O=he(v.worldSize,c.getNorthEast()),R=he(v.worldSize,c.getSouthEast()),L=he(v.worldSize,c.getSouthWest()),$=l.ae(-f),Z=T.rotate($),W=O.rotate($),K=R.rotate($),ne=L.rotate($),ue=new l.P(Math.max(Z.x,W.x,ne.x,K.x),Math.max(Z.y,W.y,ne.y,K.y)),pe=new l.P(Math.min(Z.x,W.x,ne.x,K.x),Math.min(Z.y,W.y,ne.y,K.y)),me=ue.sub(pe),ye=(v.width-(b.left+b.right+r.left+r.right))/me.x,be=(v.height-(b.top+b.bottom+r.top+r.bottom))/me.y;if(be<0||ye<0)return void zh();const ve=Math.min(l.ak(v.scale*Math.min(ye,be)),_.maxZoom),Te=l.P.convert(_.offset),ke=new l.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(l.ae(f)),xe=Te.add(ke).mult(v.scale/l.af(ve));return{center:we(v.worldSize,T.add(R).div(2).sub(xe)),zoom:ve,bearing:f}}class hi{get useGlobeControls(){return!1}handlePanInertia(r,c){const f=r.mag(),v=Math.abs(Ce(c));return{easingOffset:r.mult(Math.min(.75*v/f,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,f){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(f,r.around)}cameraForBoxAndBearing(r,c,f,v,b){return sa(r,c,f,v,b)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(l.S.convert(c.center))}handleEaseTo(r,c){const f=r.zoom,v=r.padding,b={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},O=c.zoom!==void 0,R=!r.isPaddingEqual(c.padding);let L=!1;const $=O?+c.zoom:r.zoom;let Z=r.centerPoint.add(c.offsetAsPoint);const W=r.screenPointToLocation(Z),{center:K,zoom:ne}=r.getConstrained(l.S.convert(c.center||W),$??f);$a(r,K);const ue=he(r.worldSize,W),pe=he(r.worldSize,K).sub(ue),me=l.af(ne-f);return L=ne!==f,{easeFunc:ye=>{if(L&&r.setZoom(l.C.number(f,ne,ye)),l.be(b,T)||Jn({startEulerAngles:b,endEulerAngles:T,tr:r,k:ye,useSlerp:b.roll!=T.roll}),R&&(r.interpolatePadding(v,c.padding,ye),Z=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const be=l.af(r.zoom-f),ve=ne>f?Math.min(2,me):Math.max(.5,me),Te=Math.pow(ve,1-ye),ke=we(r.worldSize,ue.add(pe.mult(ye*Te)).mult(be));r.setLocationAtPoint(r.renderWorldCopies?ke.wrap():ke,Z)}},isZooming:L,elevationCenter:K}}handleFlyTo(r,c){const f=c.zoom!==void 0,v=r.zoom,b=r.getConstrained(l.S.convert(c.center||c.locationAtOffset),f?+c.zoom:v),T=b.center,O=b.zoom;$a(r,T);const R=he(r.worldSize,c.locationAtOffset),L=he(r.worldSize,T).sub(R),$=L.mag(),Z=l.af(O-v);let W;if(c.minZoom!==void 0){const K=Math.min(+c.minZoom,v,O),ne=r.getConstrained(T,K).zoom;W=l.af(ne-v)}return{easeFunc:(K,ne,ue,pe)=>{r.setZoom(K===1?O:v+l.ak(ne));const me=K===1?T:we(r.worldSize,R.add(L.mult(ue)).mult(ne));r.setLocationAtPoint(r.renderWorldCopies?me.wrap():me,pe)},scaleOfZoom:Z,targetCenter:T,scaleOfMinZoom:W,pixelPathLength:$}}}class Yr{constructor(r,c,f){this.blendFunction=r,this.blendColor=c,this.mask=f}}Yr.Replace=[1,0],Yr.disabled=new Yr(Yr.Replace,l.bf.transparent,[!1,!1,!1,!1]),Yr.unblended=new Yr(Yr.Replace,l.bf.transparent,[!0,!0,!0,!0]),Yr.alphaBlended=new Yr([1,771],l.bf.transparent,[!0,!0,!0,!0]);const ls=2305;class nr{constructor(r,c,f){this.enable=r,this.mode=c,this.frontFace=f}}nr.disabled=new nr(!1,1029,ls),nr.backCCW=new nr(!0,1029,ls),nr.frontCCW=new nr(!0,1028,ls);class lr{constructor(r,c,f){this.func=r,this.mask=c,this.range=f}}lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(519,lr.ReadOnly,[0,1]);const la=7680;class Pr{constructor(r,c,f,v,b,T){this.test=r,this.ref=c,this.mask=f,this.fail=v,this.depthFail=b,this.pass=T}}Pr.disabled=new Pr({func:519,mask:0},0,0,la,la,la);const gi=new WeakMap;function uo(_){var r;if(gi.has(_))return gi.get(_);{const c=(r=_.getParameter(_.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return gi.set(_,c),c}}class ho{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,f=c.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const v=new l.aL;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const b=new l.aN;b.emplaceBack(0,1,2),this._fullscreenTriangle=new Mo(c.createVertexBuffer(v,ko.members),c.createIndexBuffer(b),l.aM.simpleSegment(0,0,v.length,b.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(f.TEXTURE1);const T=f.createTexture();f.bindTexture(f.TEXTURE_2D,T),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),uo(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const f=this._cachedRenderContext.context,v=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:l.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,v.TRIANGLES,lr.disabled,Pr.disabled,Yr.unblended,nr.disabled,((b,T)=>({u_input:b,u_output_expected:T}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&uo(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const b=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&uo(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return l.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ho._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const Ll=l.$/128;function Nl(_,r){const c=_.granularity!==void 0?Math.max(_.granularity,1):1,f=c+(_.generateBorders?2:0),v=c+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),b=f+1,T=v+1,O=_.generateBorders?-1:0,R=_.generateBorders||_.extendToNorthPole?-1:0,L=c+(_.generateBorders?1:0),$=c+(_.generateBorders||_.extendToSouthPole?1:0),Z=b*T,W=f*v*6,K=b*T>65536;if(K&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ne=K||r==="32bit",ue=new Int16Array(2*Z);let pe=0;for(let be=R;be<=$;be++)for(let ve=O;ve<=L;ve++){let Te=ve/c*l.$;ve===-1&&(Te=-Ll),ve===c+1&&(Te=l.$+Ll);let ke=be/c*l.$;be===-1&&(ke=_.extendToNorthPole?l.bh:-Ll),be===c+1&&(ke=_.extendToSouthPole?l.bi:l.$+Ll),ue[pe++]=Te,ue[pe++]=ke}const me=ne?new Uint32Array(W):new Uint16Array(W);let ye=0;for(let be=0;be<v;be++)for(let ve=0;ve<f;ve++){const Te=ve+1+be*b,ke=ve+(be+1)*b,xe=ve+1+(be+1)*b;me[ye++]=ve+be*b,me[ye++]=ke,me[ye++]=Te,me[ye++]=Te,me[ye++]=ke,me[ye++]=xe}return{vertices:ue.buffer.slice(0),indices:me.buffer.slice(0),uses32bitIndices:ne}}const cs=new l.aK({fill:new l.bj(128,2),line:new l.bj(512,0),tile:new l.bj(128,32),stencil:new l.bj(128,1),circle:3});class Bl{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ta.projectionGlobe}get vertexShaderPreludeCode(){return Ta.projectionMercator.vertexSource}get subdivisionGranularity(){return cs}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new ho(r));const c=l.U(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(c,f),b=D.now();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=b);const T=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=l.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,l.bl(T))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,f,v,b){const T=(b==="stencil"?cs.stencil:cs.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:T,generateBorders:f,extendToNorthPole:c.y===0&&v,extendToSouthPole:c.y===(1<<c.z)-1&&v})}_getMesh(r,c){const f=this._getMeshKey(c);if(f in this._tileMeshCache)return this._tileMeshCache[f];const v=(function(b,T){const O=Nl(T,"16bit"),R=l.aL.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),L=l.aN.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new Mo(b.createVertexBuffer(R,ko.members),b.createIndexBuffer(L),l.aM.simpleSegment(0,0,R.length,L.length))})(r,c);return this._tileMeshCache[f]=v,v}recalculate(r){}hasTransition(){const r=D.now();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const Va=new l.r({type:new l.D(l.v.projection.type)});class Fl extends l.E{constructor(r){super(),this._transitionable=new l.t(Va,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.F(0)),this._mercatorProjection=new _r,this._verticalPerspectiveProjection=new Bl}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof l.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,f,v,b){return this.currentProjection.getMeshFromTileID(r,c,f,v,b)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function qs(_){const r=Io(_.worldSize,_.center.lat);return 2*Math.PI*r}function Aa(_,r,c,f,v){const b=1/(1<<v),T=r/l.$*b+f*b,O=l.bo((_/l.$*b+c*b)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,L=Math.cos(R),$=new Float64Array(3);return $[0]=Math.sin(O)*L,$[1]=Math.sin(R),$[2]=Math.cos(O)*L,$}function Dn(_){return(function(r,c){const f=Math.cos(c),v=new Float64Array(3);return v[0]=Math.sin(r)*f,v[1]=Math.sin(c),v[2]=Math.cos(r)*f,v})(_.lng*Math.PI/180,_.lat*Math.PI/180)}function Io(_,r){return _/(2*Math.PI)/Math.cos(r*Math.PI/180)}function $l(_){const r=Math.asin(_[1])/Math.PI*180,c=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(c>1e-6){const f=_[0]/c,v=Math.acos(_[2]/c),b=(f>0?v:-v)/Math.PI*180;return new l.S(l.aO(b,-180,180),r)}return new l.S(0,r)}function Qn(_){return Math.cos(_*Math.PI/180)}function sn(_,r){const c=Qn(_),f=Qn(r);return l.ak(f/c)}function Uu(_,r){const c=_.rotate(r.bearingInRadians),f=r.zoom+sn(r.center.lat,0),v=l.bk(1/Qn(r.center.lat),1/Qn(Math.min(Math.abs(r.center.lat),60)),l.bn(f,7,3,0,1)),b=360/qs({worldSize:r.worldSize,center:{lat:r.center.lat}});return new l.S(r.center.lng-c.x*b*v,l.ah(r.center.lat+c.y*b,-l.ai,l.ai))}function Oo(_){const r=.5*_,c=Math.sin(r),f=Math.cos(r);return Math.log(c+f)-Math.log(f-c)}function jh(_,r,c,f){const v=_.lat+c*f;if(Math.abs(c)>1){const b=(Math.sign(_.lat+c)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,T=Math.abs(_.lat+c)*Math.PI/180,O=Oo(b+f*(T-b)),R=Oo(b),L=Oo(T);return new l.S(_.lng+r*((O-R)/(L-R)),v)}return new l.S(_.lng+r*f,v)}class Lh{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,c,f,v){const b=`${r.z}_${r.x}_${r.y}_${v?.terrain?"t":""}`,T=this._cache.get(b);if(T)return T;const O=this._cachePrevious.get(b);if(O)return this._cache.set(b,O),O;const R=this._boundingVolumeFactory(r,c,f,v);return this._cache.set(b,R),this._hadAnyChanges=!0,R}}class us{constructor(r,c,f,v){this.min=f,this.max=v,this.points=r,this.planes=c}static fromAabb(r,c){const f=[];for(let v=0;v<8;v++)f.push([1&~v?r[0]:c[0],(v>>1&1)==1?c[1]:r[1],(v>>2&1)==1?c[2]:r[2]]);return new us(f,[[-1,0,0,c[0]],[1,0,0,-r[0]],[0,-1,0,c[1]],[0,1,0,-r[1]],[0,0,-1,c[2]],[0,0,1,-r[2]]],r,c)}static fromCenterSizeAngles(r,c,f){const v=l.br([],f[0],f[1],f[2]),b=l.bs([],[c[0],0,0],v),T=l.bs([],[0,c[1],0],v),O=l.bs([],[0,0,c[2]],v),R=[...r],L=[...r];for(let Z=0;Z<8;Z++)for(let W=0;W<3;W++){const K=r[W]+b[W]*(1&~Z?-1:1)+T[W]*((Z>>1&1)==1?1:-1)+O[W]*((Z>>2&1)==1?1:-1);R[W]=Math.min(R[W],K),L[W]=Math.max(L[W],K)}const $=[];for(let Z=0;Z<8;Z++){const W=[...r];l.aS(W,W,l.aR([],b,1&~Z?-1:1)),l.aS(W,W,l.aR([],T,(Z>>1&1)==1?1:-1)),l.aS(W,W,l.aR([],O,(Z>>2&1)==1?1:-1)),$.push(W)}return new us($,[[...b,-l.aX(b,$[0])],[...T,-l.aX(T,$[0])],[...O,-l.aX(O,$[0])],[-b[0],-b[1],-b[2],-l.aX(b,$[7])],[-T[0],-T[1],-T[2],-l.aX(T,$[7])],[-O[0],-O[1],-O[2],-l.aX(O,$[7])]],R,L)}intersectsFrustum(r){let c=!0;const f=this.points.length,v=this.planes.length,b=r.planes.length,T=r.points.length;for(let O=0;O<b;O++){const R=r.planes[O];let L=0;for(let $=0;$<f;$++){const Z=this.points[$];R[0]*Z[0]+R[1]*Z[1]+R[2]*Z[2]+R[3]>=0&&L++}if(L===0)return 0;L<f&&(c=!1)}if(c)return 2;for(let O=0;O<v;O++){const R=this.planes[O];let L=0;for(let $=0;$<T;$++){const Z=r.points[$];R[0]*Z[0]+R[1]*Z[1]+R[2]*Z[2]+R[3]>=0&&L++}if(L===0)return 0}return 1}intersectsPlane(r){const c=this.points.length;let f=0;for(let v=0;v<c;v++){const b=this.points[v];r[0]*b[0]+r[1]*b[1]+r[2]*b[2]+r[3]>=0&&f++}return f===c?2:f===0?0:1}}function zn(_,r,c){const f=_-r;return f<0?-f:Math.max(0,f-c)}function hs(_,r,c,f,v){const b=_-c;let T;return T=b<0?Math.min(-b,1+b-v):b>1?Math.min(Math.max(b-v,0),1-b):0,Math.max(T,zn(r,f,v))}class qa{constructor(){this._boundingVolumeCache=new Lh(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,c,f,v){const b=1<<f.z,T=1/b,O=f.x/b,R=f.y/b;let L=2;return L=Math.min(L,hs(r,c,O,R,T)),L=Math.min(L,hs(r,c,O+.5,-R-T,T)),L=Math.min(L,hs(r,c,O+.5,2-R-T,T)),L}getWrap(r,c,f){const v=1<<c.z,b=1/v,T=c.x/v,O=zn(r.x,T,b),R=zn(r.x,T-1,b),L=zn(r.x,T+1,b),$=Math.min(O,R,L);return $===L?1:$===R?-1:0}allowVariableZoom(r,c){return zt(r,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,c,f,v){return this._boundingVolumeCache.getTileBoundingVolume(r,c,f,v)}_computeTileBoundingVolume(r,c,f,v){var b,T;let O=0,R=0;if(v?.terrain){const L=new l.Z(r.z,c,r.z,r.x,r.y),$=v.terrain.getMinMaxElevation(L);O=(b=$.minElevation)!==null&&b!==void 0?b:Math.min(0,f),R=(T=$.maxElevation)!==null&&T!==void 0?T:Math.max(0,f)}if(O/=l.bu,R/=l.bu,O+=1,R+=1,r.z<=0)return us.fromAabb([-R,-R,-R],[R,R,R]);if(r.z===1)return us.fromAabb([r.x===0?-R:0,r.y===0?0:-R,-R],[r.x===0?0:R,r.y===0?R:0,R]);{const L=[Aa(0,0,r.x,r.y,r.z),Aa(l.$,0,r.x,r.y,r.z),Aa(l.$,l.$,r.x,r.y,r.z),Aa(0,l.$,r.x,r.y,r.z)],$=[];for(const Ze of L)$.push(l.aR([],Ze,R));if(R!==O)for(const Ze of L)$.push(l.aR([],Ze,O));r.y===0&&$.push([0,1,0]),r.y===(1<<r.z)-1&&$.push([0,-1,0]);const Z=[1,1,1],W=[-1,-1,-1];for(const Ze of $)for(let et=0;et<3;et++)Z[et]=Math.min(Z[et],Ze[et]),W[et]=Math.max(W[et],Ze[et]);const K=Aa(l.$/2,l.$/2,r.x,r.y,r.z),ne=l.aW([],[0,1,0],K);l.aV(ne,ne);const ue=l.aW([],K,ne);l.aV(ue,ue);const pe=l.aW([],L[2],L[1]);l.aV(pe,pe);const me=l.aW([],L[0],L[3]);l.aV(me,me),$.push(l.aR([],K,R)),r.y>=(1<<r.z)/2&&$.push(l.aR([],Aa(l.$/2,0,r.x,r.y,r.z),R)),r.y<(1<<r.z)/2&&$.push(l.aR([],Aa(l.$/2,l.$,r.x,r.y,r.z),R));const ye=Lc(K,$),be=Lc(ue,$),ve=[-K[0],-K[1],-K[2],ye.max],Te=[K[0],K[1],K[2],-ye.min],ke=[-ue[0],-ue[1],-ue[2],be.max],xe=[ue[0],ue[1],ue[2],-be.min],Re=[...pe,0],He=[...me,0],Ge=[];return r.y===0?Ge.push(l.bt(He,Re,ve),l.bt(He,Re,Te)):Ge.push(l.bt(ke,Re,ve),l.bt(ke,Re,Te),l.bt(ke,He,ve),l.bt(ke,He,Te)),r.y===(1<<r.z)-1?Ge.push(l.bt(He,Re,ve),l.bt(He,Re,Te)):Ge.push(l.bt(xe,Re,ve),l.bt(xe,Re,Te),l.bt(xe,He,ve),l.bt(xe,He,Te)),new us(Ge,[ve,Te,ke,xe,Re,He],Z,W)}}}function Lc(_,r){let c=1/0,f=-1/0;for(const v of r){const b=l.aX(_,v);c=Math.min(c,b),f=Math.max(f,b)}return{min:c,max:f}}class Nc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,f){return this._helper.interpolatePadding(r,c,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=l.bv(),this._projectionMatrix=l.b9(),this._globeViewProjMatrix32f=l.b8(),this._globeViewProjMatrixNoCorrection=l.b9(),this._globeViewProjMatrixNoCorrectionInverted=l.b9(),this._globeProjMatrixInverted=l.b9(),this._cameraPosition=l.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Sn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._coveringTilesDetailsProvider=new qa}clone(){const r=new Nc;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=l.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:f}=r,v=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,f=this.cameraToCenterDistance/r,v=Math.sin(c)*f,b=Math.cos(c)*f+1,T=1/Math.sqrt(v*v+b*b)*1;let O=-v,R=b;const L=Math.sqrt(O*O+R*R);O/=L,R/=L;const $=[0,O,R];l.bw($,$,[0,0,0],-this.bearingInRadians),l.bx($,$,[0,0,0],-1*this.center.lat*Math.PI/180),l.by($,$,[0,0,0],this.center.lng*Math.PI/180);const Z=1/l.aZ($);return l.aR($,$,Z),[...$,-T*Z]}isLocationOccluded(r){return!this.isSurfacePointVisible(Dn(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,v=Math.cos(f),b=[Math.sin(c)*v,Math.sin(f),Math.cos(c)*v],T=[b[2],0,-b[0]],O=[0,0,0];l.aW(O,T,b),l.aV(T,T),l.aV(O,O);const R=[0,0,0];return l.aV(R,[T[0]*r[0]+O[0]*r[1]+b[0]*r[2],T[1]*r[0]+O[1]*r[1]+b[1]*r[2],T[2]*r[0]+O[2]*r[1]+b[2]*r[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,f){const v=(function(O,R,L){const $=1/(1<<L.z);return new l.a1(O/l.$*$+L.x*$,R/l.$*$+L.y*$)})(r,c,f.canonical),b=(T=v.y,[l.bo(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(r,c,f,v){const b=f.canonical,T=Aa(r,c,b.x,b.y,b.z),O=1+(v?v(r,c):0)/l.bu,R=[T[0]*O,T[1]*O,T[2]*O,1];l.aw(R,R,this._globeViewProjMatrixNoCorrection);const L=this._cachedClippingPlane,$=L[0]*T[0]+L[1]*T[1]+L[2]*T[2]+L[3]<0;return{point:new l.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:$}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Io(this.worldSize,this.center.lat),c=l.ba(),f=l.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),l.b4(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;c[8]=2*-v.x/this._helper._width,c[9]=2*v.y/this._helper._height,this._projectionMatrix=l.b5(c),this._globeProjMatrixInverted=l.ba(),l.aq(this._globeProjMatrixInverted,c),l.M(c,c,[0,0,-this.cameraToCenterDistance]),l.b6(c,c,this.rollInRadians),l.b7(c,c,-this.pitchInRadians),l.b6(c,c,this.bearingInRadians),l.M(c,c,[0,0,-r]);const b=l.bp();b[0]=r,b[1]=r,b[2]=r,l.b7(f,c,this.center.lat*Math.PI/180),l.bz(f,f,-this.center.lng*Math.PI/180),l.N(f,f,b),this._globeViewProjMatrixNoCorrection=f,l.b7(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),l.bz(c,c,-this.center.lng*Math.PI/180),l.N(c,c,b),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=l.ba(),l.aq(this._globeViewProjMatrixNoCorrectionInverted,f);const T=l.bp();this._cameraPosition=l.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,l.bw(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),l.bx(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),l.bw(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),l.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),l.bx(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),l.by(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const O=l.b5(this._globeViewProjMatrixNoCorrectionInverted);l.N(O,O,[1,1,-1]),this._cachedFrustum=on.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){l.w("calculateFogMatrix is not supported on globe projection.");const c=l.ba();return l.ag(c),c}getVisibleUnwrappedCoordinates(r){return[new l.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&l.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=Dn(r);l.aR(f,f,1+c/l.bu);const v=l.bv();return l.aw(v,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,f=[new l.P(0,0),new l.P(r,0),new l.P(this.width,0),new l.P(this.width,c),new l.P(this.width,this.height),new l.P(r,this.height),new l.P(0,this.height),new l.P(0,c)],v=[];for(const Z of f)v.push(this.unprojectScreenPoint(Z));let b=0,T=0,O=0,R=0;const L=this.center;for(const Z of v){const W=l.bA(L.lng,Z.lng),K=l.bA(L.lat,Z.lat);W<T&&(T=W),W>b&&(b=W),K<R&&(R=K),K>O&&(O=K)}const $=[L.lng+T,L.lat+R,L.lng+b,L.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&($[3]=90,$[0]=-180,$[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&($[1]=-90,$[0]=-180,$[2]=180),new dr($)}getConstrained(r,c){const f=l.ah(r.lat,-l.ai,l.ai),v=l.ah(+c,this.minZoom+sn(0,f),this.maxZoom);return{center:new l.S(r.lng,f),zoom:v}}calculateCenterFromCameraLngLatAlt(r,c,f,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,f,v)}setLocationAtPoint(r,c){const f=Dn(this.unprojectScreenPoint(c)),v=Dn(r),b=l.bp();l.bB(b);const T=l.bp();l.by(T,f,b,-this.center.lng*Math.PI/180),l.bx(T,T,b,this.center.lat*Math.PI/180);const O=v[0]*v[0]+v[2]*v[2],R=T[0]*T[0];if(O<R)return;const L=Math.sqrt(O-R),$=-L,Z=l.bC(v[0],v[2],T[0],L),W=l.bC(v[0],v[2],T[0],$),K=l.bp();l.by(K,v,b,-Z);const ne=l.bC(K[1],K[2],T[1],T[2]),ue=l.bp();l.by(ue,v,b,-W);const pe=l.bC(ue[1],ue[2],T[1],T[2]),me=.5*Math.PI,ye=ne>=-me&&ne<=me,be=pe>=-me&&pe<=me;let ve,Te;if(ye&&be){const He=this.center.lng*Math.PI/180,Ge=this.center.lat*Math.PI/180;l.bD(Z,He)+l.bD(ne,Ge)<l.bD(W,He)+l.bD(pe,Ge)?(ve=Z,Te=ne):(ve=W,Te=pe)}else if(ye)ve=Z,Te=ne;else{if(!be)return;ve=W,Te=pe}const ke=ve/Math.PI*180,xe=Te/Math.PI*180,Re=this.center.lat;this.setCenter(new l.S(ke,l.ah(xe,-90,90))),this.setZoom(this.zoom+sn(Re,this.center.lat))}locationToScreenPoint(r,c){const f=Dn(r);if(c){const v=c.getElevationForLngLatZoom(r,this._helper._tileZoom);l.aR(f,f,1+v/l.bu)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(r){const c=l.bv();return l.aw(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new l.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const f=c.pointCoordinate(r);if(f)return f}return l.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var f;return(f=this.screenPointToMercatorCoordinate(r,c))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(r,c){const f=this._cameraPosition,v=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(f,v)}getRayDirectionFromPixel(r){const c=l.bv();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,l.aw(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const f=l.bp();f[0]=c[0]-this._cameraPosition[0],f[1]=c[1]-this._cameraPosition[1],f[2]=c[2]-this._cameraPosition[2];const v=l.bp();return l.aV(v,f),v}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=l.bv();return l.aw(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const f=l.aX(r,c),v=l.bp(),b=l.bp();l.aR(b,c,f),l.aU(v,r,b);const T=1-l.aX(v,v);if(T<0)return null;const O=l.aX(r,r)-1,R=-f+(f<0?1:-1)*Math.sqrt(T),L=O/R,$=R;return{tMin:Math.min(L,$),tMax:Math.max(L,$)}}unprojectScreenPoint(r){const c=this._cameraPosition,f=this.getRayDirectionFromPixel(r),v=this.rayPlanetIntersection(c,f);if(v){const $=l.bp();l.aS($,c,[f[0]*v.tMin,f[1]*v.tMin,f[2]*v.tMin]);const Z=l.bp();return l.aV(Z,$),$l(Z)}const b=this._cachedClippingPlane,T=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],O=-l.b1(b,c)/T,R=l.bp();if(O>0)l.aS(R,c,[f[0]*O,f[1]*O,f[2]*O]);else{const $=l.bp();l.aS($,c,[2*f[0],2*f[1],2*f[2]]);const Z=l.b1(this._cachedClippingPlane,$);l.aU(R,$,[this._cachedClippingPlane[0]*Z,this._cachedClippingPlane[1]*Z,this._cachedClippingPlane[2]*Z])}const L=(function($){const Z=l.bp();return Z[0]=$[0]*-$[3],Z[1]=$[1]*-$[3],Z[2]=$[2]*-$[3],{center:Z,radius:Math.sqrt(1-$[3]*$[3])}})(b);return $l((function($,Z,W){const K=l.bp();l.aU(K,W,$);const ne=l.bp();return l.bq(ne,$,K,Z/l.a$(K)),ne})(L.center,L.radius,R))}getMatrixForModel(r,c){const f=l.S.convert(r),v=1/l.bu,b=l.b9();return l.bz(b,b,f.lng/180*Math.PI),l.b7(b,b,-f.lat/180*Math.PI),l.M(b,b,[0,0,1+c/l.bu]),l.b7(b,b,.5*Math.PI),l.N(b,b,[v,v,v]),b}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new l.Z(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class Bc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,f){return this._helper.interpolatePadding(r,c,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,f=!0){this._helper.resize(r,c,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Sn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._globeness=1,this._mercatorTransform=new tn,this._verticalPerspectiveTransform=new Nc}clone(){const r=new Bc;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),f=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:c.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return l.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return l.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,f){const v=this._mercatorTransform.getPitchedTextCorrection(r,c,f),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,f);return l.bk(v,b,this._globeness)}projectTileCoordinates(r,c,f,v){return this.currentTransform.projectTileCoordinates(r,c,f,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,c){return this.currentTransform.getConstrained(r,c)}calculateCenterFromCameraLngLatAlt(r,c,f,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,f,v)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return f.fallbackMatrix=c.mainMatrix,f}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class ai{get useGlobeControls(){return!0}handlePanInertia(r,c){const f=Uu(r,c);return Math.abs(f.lng-c.center.lng)>180&&(f.lng=c.center.lng+179.5*Math.sign(f.lng-c.center.lng)),{easingCenter:f,easingOffset:new l.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const f=r.around,v=c.screenPointToLocation(f);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const b=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const T=c.zoom-b;if(T===0)return;const O=l.bA(c.center.lng,v.lng),R=O/(Math.abs(O/180)+1),L=l.bA(c.center.lat,v.lat),$=c.getRayDirectionFromPixel(f),Z=c.cameraPosition,W=-1*l.aX(Z,$),K=l.bp();l.aS(K,Z,[$[0]*W,$[1]*W,$[2]*W]);const ne=l.aZ(K)-1,ue=Math.exp(.5*-Math.max(ne-.3,0)),pe=Io(c.worldSize,c.center.lat)/Math.min(c.width,c.height),me=l.bn(pe,.9,.5,1,.25),ye=(1-l.af(-T))*Math.min(ue,me),be=c.center.lat,ve=c.zoom,Te=new l.S(c.center.lng+R*ye,l.ah(c.center.lat+L*ye,-l.ai,l.ai));c.setLocationAtPoint(v,f);const ke=c.center,xe=l.bn(Math.abs(O),45,85,0,1),Re=l.bn(pe,.75,.35,0,1),He=Math.pow(Math.max(xe,Re),.25),Ge=l.bA(ke.lng,Te.lng),Ze=l.bA(ke.lat,Te.lat);c.setCenter(new l.S(ke.lng+Ge*He,ke.lat+Ze*He).wrap()),c.setZoom(ve+sn(be,c.center.lat))}handleMapControlsPan(r,c,f){if(!r.panDelta)return;const v=c.center.lat,b=c.zoom;c.setCenter(Uu(r.panDelta,c).wrap()),c.setZoom(b+sn(v,c.center.lat))}cameraForBoxAndBearing(r,c,f,v,b){const T=sa(r,c,f,v,b),O=c.left/b.width*2-1,R=(b.width-c.right)/b.width*2-1,L=c.top/b.height*-2+1,$=(b.height-c.bottom)/b.height*-2+1,Z=l.bA(f.getWest(),f.getEast())<0,W=Z?f.getEast():f.getWest(),K=Z?f.getWest():f.getEast(),ne=Math.max(f.getNorth(),f.getSouth()),ue=Math.min(f.getNorth(),f.getSouth()),pe=W+.5*l.bA(W,K),me=ne+.5*l.bA(ne,ue),ye=b.clone();ye.setCenter(T.center),ye.setBearing(T.bearing),ye.setPitch(0),ye.setRoll(0),ye.setZoom(T.zoom);const be=ye.modelViewProjectionMatrix,ve=[Dn(f.getNorthWest()),Dn(f.getNorthEast()),Dn(f.getSouthWest()),Dn(f.getSouthEast()),Dn(new l.S(K,me)),Dn(new l.S(W,me)),Dn(new l.S(pe,ne)),Dn(new l.S(pe,ue))],Te=Dn(T.center);let ke=Number.POSITIVE_INFINITY;for(const xe of ve)O<0&&(ke=ai.getLesserNonNegativeNonNull(ke,ai.solveVectorScale(xe,Te,be,"x",O))),R>0&&(ke=ai.getLesserNonNegativeNonNull(ke,ai.solveVectorScale(xe,Te,be,"x",R))),L>0&&(ke=ai.getLesserNonNegativeNonNull(ke,ai.solveVectorScale(xe,Te,be,"y",L))),$<0&&(ke=ai.getLesserNonNegativeNonNull(ke,ai.solveVectorScale(xe,Te,be,"y",$)));if(Number.isFinite(ke)&&ke!==0)return T.zoom=ye.zoom+l.ak(ke),T;zh()}handleJumpToCenterZoom(r,c){const f=r.center.lat,v=r.getConstrained(c.center?l.S.convert(c.center):r.center,r.zoom).center;r.setCenter(v.wrap());const b=c.zoom!==void 0?+c.zoom:r.zoom+sn(f,v.lat);r.zoom!==b&&r.setZoom(b)}handleEaseTo(r,c){const f=r.zoom,v=r.center,b=r.padding,T={roll:r.roll,pitch:r.pitch,bearing:r.bearing},O={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},R=c.zoom!==void 0,L=!r.isPaddingEqual(c.padding);let $=!1;const Z=c.center?l.S.convert(c.center):v,W=r.getConstrained(Z,f).center;$a(r,W);const K=r.clone();K.setCenter(W),K.setZoom(R?+c.zoom:f+sn(v.lat,Z.lat)),K.setBearing(c.bearing);const ne=new l.P(l.ah(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),l.ah(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));K.setLocationAtPoint(W,ne);const ue=(c.offset&&c.offsetAsPoint.mag())>0?K.center:W,pe=R?+c.zoom:f+sn(v.lat,ue.lat),me=f+sn(v.lat,0),ye=pe+sn(ue.lat,0),be=l.bA(v.lng,ue.lng),ve=l.bA(v.lat,ue.lat),Te=l.af(ye-me);return $=pe!==f,{easeFunc:ke=>{if(l.be(T,O)||Jn({startEulerAngles:T,endEulerAngles:O,tr:r,k:ke,useSlerp:T.roll!=O.roll}),L&&r.interpolatePadding(b,c.padding,ke),c.around)l.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const xe=ye>me?Math.min(2,Te):Math.max(.5,Te),Re=Math.pow(xe,1-ke),He=jh(v,be,ve,ke*Re);r.setCenter(He.wrap())}if($){const xe=l.C.number(me,ye,ke)+sn(0,r.center.lat);r.setZoom(xe)}},isZooming:$,elevationCenter:ue}}handleFlyTo(r,c){const f=c.zoom!==void 0,v=r.center,b=r.zoom,T=r.padding,O=!r.isPaddingEqual(c.padding),R=r.getConstrained(l.S.convert(c.center||c.locationAtOffset),b).center,L=f?+c.zoom:r.zoom+sn(r.center.lat,R.lat),$=r.clone();$.setCenter(R),$.setZoom(L),$.setBearing(c.bearing);const Z=new l.P(l.ah(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),l.ah(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));$.setLocationAtPoint(R,Z);const W=$.center;$a(r,W);const K=(function(ve,Te,ke){const xe=Dn(Te),Re=Dn(ke),He=l.aX(xe,Re),Ge=Math.acos(He),Ze=qs(ve);return Ge/(2*Math.PI)*Ze})(r,v,W),ne=b+sn(v.lat,0),ue=L+sn(W.lat,0),pe=l.af(ue-ne);let me;if(typeof c.minZoom=="number"){const ve=+c.minZoom+sn(W.lat,0),Te=Math.min(ve,ne,ue)+sn(0,W.lat),ke=r.getConstrained(W,Te).zoom+sn(W.lat,0);me=l.af(ke-ne)}const ye=l.bA(v.lng,W.lng),be=l.bA(v.lat,W.lat);return{easeFunc:(ve,Te,ke,xe)=>{const Re=jh(v,ye,be,ke);O&&r.interpolatePadding(T,c.padding,ve);const He=ve===1?W:Re;r.setCenter(He.wrap());const Ge=ne+l.ak(Te);r.setZoom(ve===1?L:Ge+sn(0,He.lat))},scaleOfZoom:pe,targetCenter:W,scaleOfMinZoom:me,pixelPathLength:K}}static solveVectorScale(r,c,f,v,b){const T=v==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],O=[f[3],f[7],f[11],f[15]],R=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],L=r[0]*O[0]+r[1]*O[1]+r[2]*O[2],$=c[0]*T[0]+c[1]*T[1]+c[2]*T[2],Z=c[0]*O[0]+c[1]*O[1]+c[2]*O[2];return $+b*L===R+b*Z||O[3]*(R-$)+T[3]*(Z-L)+R*Z==$*L?null:($+T[3]-b*Z-b*O[3])/($-R-b*Z+b*L)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class Qd{constructor(r){this._globe=r,this._mercatorCameraHelper=new hi,this._verticalPerspectiveCameraHelper=new ai}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,f){this.currentHelper.handleMapControlsPan(r,c,f)}cameraForBoxAndBearing(r,c,f,v,b){return this.currentHelper.cameraForBoxAndBearing(r,c,f,v,b)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const Vu=(_,r)=>l.y(_,r&&r.filter((c=>c.identifier!=="source.canvas"))),Wp=l.bE();class Nh extends l.E{constructor(r,c={}){var f,v;super(),this._rtlPluginLoaded=()=>{for(const T in this.sourceCaches){const O=this.sourceCaches[T].getSource().type;O!=="vector"&&O!=="geojson"||this.sourceCaches[T].reload()}},this.map=r,this.dispatcher=new Wt($t(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",((T,O)=>this.getGlyphs(T,O))),this.dispatcher.registerMessageHandler("GI",((T,O)=>this.getImages(T,O))),this.imageManager=new Ie,this.imageManager.setEventedParent(this);const b=((f=r._container)===null||f===void 0?void 0:f.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new Ke(r._requestManager,c.localIdeographFontFamily,b),this.lineAtlas=new tt(256,512),this.crossTileSymbolIndex=new os,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",l.bG()),ao().on(Ba,this._rtlPluginLoaded),this.on("data",(T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const O=this.sourceCaches[T.sourceId];if(!O)return;const R=O.getSource();if(R&&R.vectorLayerIds)for(const L in this._layers){const $=this._layers[L];$.source===R.id&&this._validateLayer($)}}))}setGlobalStateProperty(r,c){var f,v,b;this._checkLoaded();const T=c===null?(b=(v=(f=this.stylesheet.state)===null||f===void 0?void 0:f[r])===null||v===void 0?void 0:v.default)!==null&&b!==void 0?b:null:c;if(l.bH(T,this._globalState[r]))return this;this._globalState[r]=T,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const c=[];for(const f in r)!l.bH(this._globalState[f],r[f].default)&&(c.push(f),this._globalState[f]=r[f].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(r){if(r.length===0)return;const c=new Set,f={};for(const v of r){f[v]=this._globalState[v];for(const b in this._layers){const T=this._layers[b],O=T.getLayoutAffectingGlobalStateRefs(),R=T.getPaintAffectingGlobalStateRefs();if(O.has(v)&&c.add(T.source),R.has(v))for(const{name:L,value:$}of R.get(v))this._updatePaintProperty(T,L,$)}}this.dispatcher.broadcast("UGS",f);for(const v in this.sourceCaches)c.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(r,c={},f){this.fire(new l.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const v=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;l.j(v,this._loadStyleRequest).then((T=>{this._loadStyleRequest=null,this._load(T.data,c,f)})).catch((T=>{this._loadStyleRequest=null,T&&!b.signal.aborted&&this.fire(new l.k(T))}))}loadJSON(r,c={},f){this.fire(new l.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,f)})).catch((()=>{}))}loadEmpty(){this.fire(new l.l("dataloading",{dataType:"style"})),this._load(Wp,{validate:!1})}_load(r,c,f){var v,b;let T=c.transformStyle?c.transformStyle(f,r):r;if(!c.validate||!Vu(this,l.z(T))){T=Object.assign({},T),this._loaded=!0,this.stylesheet=T;for(const O in T.sources)this.addSource(O,T.sources[O],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new st(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new Le(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new l.l("data",{dataType:"style"})),this.fire(new l.l("style.load"))}}_createLayers(){var r;const c=l.bI(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",c),this._order=c.map((f=>f.id)),this._layers={},this._serializedLayers=null;for(const f of c){const v=l.bJ(f,this._globalState);v.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=v}}_loadSprite(r,c=!1,f=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(b,T,O,R){return l._(this,void 0,void 0,(function*(){const L=re(b),$=O>1?"@2x":"",Z={},W={};for(const{id:K,url:ne}of L){const ue=T.transformRequest(de(ne,$,".json"),"SpriteJSON");Z[K]=l.j(ue,R);const pe=T.transformRequest(de(ne,$,".png"),"SpriteImage");W[K]=le.getImage(pe,R)}return yield Promise.all([...Object.values(Z),...Object.values(W)]),(function(K,ne){return l._(this,void 0,void 0,(function*(){const ue={};for(const pe in K){ue[pe]={};const me=D.getImageCanvasContext((yield ne[pe]).data),ye=(yield K[pe]).data;for(const be in ye){const{width:ve,height:Te,x:ke,y:xe,sdf:Re,pixelRatio:He,stretchX:Ge,stretchY:Ze,content:et,textFitWidth:Pt,textFitHeight:wt}=ye[be];ue[pe][be]={data:null,pixelRatio:He,sdf:Re,stretchX:Ge,stretchY:Ze,content:et,textFitWidth:Pt,textFitHeight:wt,spriteData:{width:ve,height:Te,x:ke,y:xe,context:me}}}}return ue}))})(Z,W)}))})(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((b=>{if(this._spriteRequest=null,b)for(const T in b){this._spritesImagesIds[T]=[];const O=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter((R=>!(R in b))):[];for(const R of O)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in b[T]){const L=T==="default"?R:`${T}:${R}`;this._spritesImagesIds[T].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,b[T][R],!1):this.imageManager.addImage(L,b[T][R]),c&&(this._changedImages[L]=!0)}}})).catch((b=>{this._spriteRequest=null,v=b,this.fire(new l.k(v))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"})),f&&f(v)}))}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const f=r.sourceLayer;if(!f)return;const v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.k(new Error(`Source layer "${f}" does not exist on source "${v.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?l.bK(f):f);const v=[];for(const b of r)if(f[b]){const T=c?l.bK(f[b]):f[b];v.push(T)}return v}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const f of c){const v=this._layers[f];v.type!=="custom"&&(r[f]=v.serialize())}return r}hasTransitions(){var r,c,f;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const v in this.sourceCaches)if(this.sourceCaches[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const v=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(v.length||b.length)&&this._updateWorkerLayers(v,b);for(const T in this._updatedSources){const O=this._updatedSources[T];if(O==="reload")this._reloadSource(T);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const f={};for(const v in this.sourceCaches){const b=this.sourceCaches[v];f[v]=b.used,b.used=!1}for(const v of this._order){const b=this._layers[v];b.recalculate(r,this._availableImages),!b.isHidden(r.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const v in f){const b=this.sourceCaches[v];!!f[v]!=!!b.used&&b.fire(new l.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new l.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var f;this._checkLoaded();const v=this.serialize();if(r=c.transformStyle?c.transformStyle(v,r):r,((f=c.validate)===null||f===void 0||f)&&Vu(this,l.z(r)))return!1;(r=l.bK(r)).layers=l.bI(r.layers);const b=l.bL(v,r),T=this._getOperationsToPerform(b);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const O of T.operations)O();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],f=[];for(const v of r)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,v.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,v.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,v.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,v.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,v.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,v.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,v.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,v.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,v.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,v.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,v.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,v.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,v.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,v.args)));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,v.args)));break;case"setTransition":c.push((()=>{}));break;default:f.push(v.command)}return{operations:c,unimplemented:f}}addImage(r,c){if(this.getImage(r))return this.fire(new l.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(l.z.source,`sources.${r}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.sourceCaches[r]=new Cr(r,c,this.dispatcher);v.style=this,v.setEventedParent(this,(()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:r}))),v.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new l.k(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new l.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,f={}){this._checkLoaded();const v=r.id;if(this.getLayer(v))return void this.fire(new l.k(new Error(`Layer "${v}" already exists on this map.`)));let b;if(r.type==="custom"){if(Vu(this,l.bM(r)))return;b=l.bJ(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(v,r.source),r=l.bK(r),r=l.e(r,{source:v})),this._validate(l.z.layer,`layers.${v}`,r,{arrayIndex:-1},f))return;b=l.bJ(r,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new l.k(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,v),this._layerOrderChanged=!0,this._layers[v]=b,this._removedLayers[v]&&b.source&&b.type!=="custom"){const O=this._removedLayers[v];delete this._removedLayers[v],O.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const f=this._order.indexOf(r);this._order.splice(f,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new l.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(v,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new l.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,f){this._checkLoaded();const v=this.getLayer(r);v?v.minzoom===c&&v.maxzoom===f||(c!=null&&(v.minzoom=c),f!=null&&(v.maxzoom=f),this._updateLayer(v)):this.fire(new l.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,f={}){this._checkLoaded();const v=this.getLayer(r);if(v){if(!l.bH(v.filter,c))return c==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(l.z.filter,`layers.${v.id}.filter`,c,null,f)||(v.setFilter(l.bK(c)),this._updateLayer(v)))}else this.fire(new l.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.bK(this.getLayer(r).filter)}setLayoutProperty(r,c,f,v={}){this._checkLoaded();const b=this.getLayer(r);b?l.bH(b.getLayoutProperty(c),f)||(b.setLayoutProperty(c,f,v),this._updateLayer(b)):this.fire(new l.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const f=this.getLayer(r);if(f)return f.getLayoutProperty(c);this.fire(new l.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,f,v={}){this._checkLoaded();const b=this.getLayer(r);b?l.bH(b.getPaintProperty(c),f)||this._updatePaintProperty(b,c,f,v):this.fire(new l.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,c,f,v={}){r.setPaintProperty(c,f,v)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const f=r.source,v=r.sourceLayer,b=this.sourceCaches[f];if(b===void 0)return void this.fire(new l.k(new Error(`The source '${f}' does not exist in the map's style.`)));const T=b.getSource().type;T==="geojson"&&v?this.fire(new l.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||v?(r.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(v,r.id,c)):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const f=r.source,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new l.k(new Error(`The source '${f}' does not exist in the map's style.`)));const b=v.getSource().type,T=b==="vector"?r.sourceLayer:void 0;b!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(T,r.id,c):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,f=r.sourceLayer,v=this.sourceCaches[c];if(v!==void 0)return v.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(f,r.id)):void this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.bN(this.sourceCaches,(b=>b.serialize())),c=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,v=this.stylesheet;return l.bO({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:r,layers:c,terrain:f},(b=>b!==void 0))}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",f={},v=[];for(let T=this._order.length-1;T>=0;T--){const O=this._order[T];if(c(O)){f[O]=T;for(const R of r){const L=R[O];if(L)for(const $ of L)v.push($)}}}v.sort(((T,O)=>O.intersectionZ-T.intersectionZ));const b=[];for(let T=this._order.length-1;T>=0;T--){const O=this._order[T];if(c(O))for(let R=v.length-1;R>=0;R--){const L=v[R].feature;if(f[L.layer.id]<T)break;b.push(L),v.pop()}else for(const R of r){const L=R[O];if(L)for(const $ of L)b.push($.feature)}}return b}queryRenderedFeatures(r,c,f){c&&c.filter&&this._validate(l.z.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new l.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const L of c.layers){const $=this._layers[L];if(!$)return this.fire(new l.k(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];v[$.source]=!0}}const b=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers(),O=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,R=Object.assign(Object.assign({},c),{layers:O,globalState:this._globalState});for(const L in this.sourceCaches)c.layers&&!v[L]||b.push(vt(this.sourceCaches[L],this._layers,T,r,R,f,this.map.terrain?($,Z,W)=>this.map.terrain.getElevation($,Z,W):void 0));return this.placement&&b.push((function(L,$,Z,W,K,ne,ue){const pe={},me=ne.queryRenderedSymbols(W),ye=[];for(const be of Object.keys(me).map(Number))ye.push(ue[be]);ye.sort(Ft);for(const be of ye){const ve=be.featureIndex.lookupSymbolFeatures(me[be.bucketInstanceId],$,be.bucketIndex,be.sourceLayerIndex,{filterSpec:K.filter,globalState:K.globalState},K.layers,K.availableImages,L);for(const Te in ve){const ke=pe[Te]=pe[Te]||[],xe=ve[Te];xe.sort(((Re,He)=>{const Ge=be.featureSortOrder;if(Ge){const Ze=Ge.indexOf(Re.featureIndex);return Ge.indexOf(He.featureIndex)-Ze}return He.featureIndex-Re.featureIndex}));for(const Re of xe)ke.push(Re)}}return(function(be,ve,Te){for(const ke in be)for(const xe of be[ke])ir(xe,Te[ve[ke].source]);return be})(pe,L,Z)})(this._layers,T,this.sourceCaches,r,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(r,c){c?.filter&&this._validate(l.z.filter,"querySourceFeatures.filter",c.filter,null,c);const f=this.sourceCaches[r];return f?(function(v,b){const T=v.getRenderableIds().map((L=>v.getTileByID(L))),O=[],R={};for(let L=0;L<T.length;L++){const $=T[L],Z=$.tileID.canonical.key;R[Z]||(R[Z]=!0,$.querySourceFeatures(O,b))}return O})(f,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const f=this.light.getLight();let v=!1;for(const T in r)if(!l.bH(r[T],f[T])){v=!0;break}if(!v)return;const b={now:D.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(b)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const f=this.getSky();let v=!1;if(!r&&!f)return;if(r&&!f)v=!0;else if(!r&&f)v=!0;else for(const T in r)if(!l.bH(r[T],f[T])){v=!0;break}if(!v)return;const b={now:D.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(b)}_setProjectionInternal(r){const c=(function(f){if(Array.isArray(f)){const v=new Fl({type:f});return{projection:v,transform:new Bc,cameraHelper:new Qd(v)}}switch(f){case"mercator":return{projection:new _r,transform:new tn,cameraHelper:new hi};case"globe":{const v=new Fl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:v,transform:new Bc,cameraHelper:new Qd(v)}}case"vertical-perspective":return{projection:new Bl,transform:new Nc,cameraHelper:new ai};default:return l.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new _r,transform:new tn,cameraHelper:new hi}}})(r);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const f in this.sourceCaches)this.sourceCaches[f].reload()}_validate(r,c,f,v,b={}){return(!b||b.validate!==!1)&&Vu(this,r.call(l.z,l.e({key:c,style:this.serialize(),value:f,styleSpec:l.v},v)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ao().off(Ba,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const f=this.sourceCaches[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,f,v,b=!1){let T=!1,O=!1;const R={};for(const L of this._order){const $=this._layers[L];if($.type!=="symbol")continue;if(!R[$.source]){const W=this.sourceCaches[$.source];R[$.source]=W.getRenderableIds(!0).map((K=>W.getTileByID(K))).sort(((K,ne)=>ne.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(ne.tileID)?-1:1)))}const Z=this.crossTileSymbolIndex.addLayer($,R[$.source],r.center.lng);T=T||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),r.zoom))&&(this.pauseablePlacement=new zc(r,this.map.terrain,this._order,b,c,f,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),O=!0),T&&this.pauseablePlacement.placement.setStale()),O||T)for(const L of this._order){const $=this._layers[L];$.type==="symbol"&&this.placement.updateLayerOpacities($,R[$.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return l._(this,void 0,void 0,(function*(){const f=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,c.icons),f}))}getGlyphs(r,c){return l._(this,void 0,void 0,(function*(){const f=yield this.glyphManager.getGlyphs(c.stacks),v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,[""]),f}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(l.z.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,f={},v){this._checkLoaded();const b=[{id:r,url:c}],T=[...re(this.stylesheet.sprite),...b];this._validate(l.z.sprite,"sprite",T,null,f)||(this.stylesheet.sprite=T,this._loadSprite(b,!0,v))}removeSprite(r){this._checkLoaded();const c=re(this.stylesheet.sprite);if(c.find((f=>f.id===r))){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex((f=>f.id===r)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}else this.fire(new l.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return re(this.stylesheet.sprite)}setSprite(r,c={},f){this._checkLoaded(),r&&this._validate(l.z.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var Zp=l.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ef{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,f,v,b,T,O,R,L){this.context=r;let $=this.boundPaintVertexBuffers.length!==v.length;for(let Z=0;!$&&Z<v.length;Z++)this.boundPaintVertexBuffers[Z]!==v[Z]&&($=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||$||this.boundIndexBuffer!==b||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==L?this.freshBind(c,f,v,b,T,O,R,L):(r.bindVertexArray.set(this.vao),O&&O.bind(),b&&b.dynamicDraw&&b.bind(),R&&R.bind(),L&&L.bind())}freshBind(r,c,f,v,b,T,O,R){const L=r.numAttributes,$=this.context,Z=$.gl;this.vao&&this.destroy(),this.vao=$.createVertexArray(),$.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=R,c.enableAttributes(Z,r);for(const W of f)W.enableAttributes(Z,r);T&&T.enableAttributes(Z,r),O&&O.enableAttributes(Z,r),R&&R.enableAttributes(Z,r),c.bind(),c.setVertexAttribPointers(Z,r,b);for(const W of f)W.bind(),W.setVertexAttribPointers(Z,r,b);T&&(T.bind(),T.setVertexAttribPointers(Z,r,b)),v&&v.bind(),O&&(O.bind(),O.setVertexAttribPointers(Z,r,b)),R&&(R.bind(),R.setVertexAttribPointers(Z,r,b)),$.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const qu=(_,r,c,f,v)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):l.bf.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:c?c.calculateFogBlendOpacity(f):0,u_horizon_color:c?c.properties.get("horizon-color"):l.bf.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),Bh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Gs(_){const r=[];for(let c=0;c<_.length;c++){if(_[c]===null)continue;const f=_[c].split(" ");r.push(f.pop())}return r}class Fh{constructor(r,c,f,v,b,T,O,R,L=[]){const $=r.gl;this.program=$.createProgram();const Z=Gs(c.staticAttributes),W=f?f.getBinderAttributes():[],K=Z.concat(W),ne=Ta.prelude.staticUniforms?Gs(Ta.prelude.staticUniforms):[],ue=O.staticUniforms?Gs(O.staticUniforms):[],pe=c.staticUniforms?Gs(c.staticUniforms):[],me=f?f.getBinderUniforms():[],ye=ne.concat(ue).concat(pe).concat(me),be=[];for(const Ge of ye)be.indexOf(Ge)<0&&be.push(Ge);const ve=f?f.defines():[];uo($)&&ve.unshift("#version 300 es"),b&&ve.push("#define OVERDRAW_INSPECTOR;"),T&&ve.push("#define TERRAIN3D;"),R&&ve.push(R),L&&ve.push(...L);let Te=ve.concat(Ta.prelude.fragmentSource,O.fragmentSource,c.fragmentSource).join(`
`),ke=ve.concat(Ta.prelude.vertexSource,O.vertexSource,c.vertexSource).join(`
`);uo($)||(Te=(function(Ge){return Ge.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Te),ke=(function(Ge){return Ge.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ke));const xe=$.createShader($.FRAGMENT_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(xe,Te),$.compileShader(xe),!$.getShaderParameter(xe,$.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${$.getShaderInfoLog(xe)}`);$.attachShader(this.program,xe);const Re=$.createShader($.VERTEX_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(Re,ke),$.compileShader(Re),!$.getShaderParameter(Re,$.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${$.getShaderInfoLog(Re)}`);$.attachShader(this.program,Re),this.attributes={};const He={};this.numAttributes=K.length;for(let Ge=0;Ge<this.numAttributes;Ge++)K[Ge]&&($.bindAttribLocation(this.program,Ge,K[Ge]),this.attributes[K[Ge]]=Ge);if($.linkProgram(this.program),!$.getProgramParameter(this.program,$.LINK_STATUS))throw new Error(`Program failed to link: ${$.getProgramInfoLog(this.program)}`);$.deleteShader(Re),$.deleteShader(xe);for(let Ge=0;Ge<be.length;Ge++){const Ze=be[Ge];if(Ze&&!He[Ze]){const et=$.getUniformLocation(this.program,Ze);et&&(He[Ze]=et)}}this.fixedUniforms=v(r,He),this.terrainUniforms=((Ge,Ze)=>({u_depth:new l.bP(Ge,Ze.u_depth),u_terrain:new l.bP(Ge,Ze.u_terrain),u_terrain_dim:new l.bg(Ge,Ze.u_terrain_dim),u_terrain_matrix:new l.bR(Ge,Ze.u_terrain_matrix),u_terrain_unpack:new l.bS(Ge,Ze.u_terrain_unpack),u_terrain_exaggeration:new l.bg(Ge,Ze.u_terrain_exaggeration)}))(r,He),this.projectionUniforms=((Ge,Ze)=>({u_projection_matrix:new l.bR(Ge,Ze.u_projection_matrix),u_projection_tile_mercator_coords:new l.bS(Ge,Ze.u_projection_tile_mercator_coords),u_projection_clipping_plane:new l.bS(Ge,Ze.u_projection_clipping_plane),u_projection_transition:new l.bg(Ge,Ze.u_projection_transition),u_projection_fallback_matrix:new l.bR(Ge,Ze.u_projection_fallback_matrix)}))(r,He),this.binderUniforms=f?f.getUniforms(r,He):[]}draw(r,c,f,v,b,T,O,R,L,$,Z,W,K,ne,ue,pe,me,ye,be){const ve=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(v),r.setColorMode(b),r.setCullFace(T),R){r.activeTexture.set(ve.TEXTURE2),ve.bindTexture(ve.TEXTURE_2D,R.depthTexture),r.activeTexture.set(ve.TEXTURE3),ve.bindTexture(ve.TEXTURE_2D,R.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(R[ke])}if(L)for(const ke in L)this.projectionUniforms[Bh[ke]].set(L[ke]);if(O)for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(O[ke]);pe&&pe.setUniforms(r,this.binderUniforms,ne,{zoom:ue});let Te=0;switch(c){case ve.LINES:Te=2;break;case ve.TRIANGLES:Te=3;break;case ve.LINE_STRIP:Te=1}for(const ke of K.get()){const xe=ke.vaos||(ke.vaos={});(xe[$]||(xe[$]=new ef)).bind(r,this,Z,pe?pe.getPaintVertexBuffers():[],W,ke.vertexOffset,me,ye,be),ve.drawElements(c,ke.primitiveLength*Te,ve.UNSIGNED_SHORT,ke.primitiveOffset*Te*2)}}}function Ul(_,r,c){const f=1/l.aC(c,1,r.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,r.transform.tileZoom)/v,T=b*(c.tileID.canonical.x+c.tileID.wrap*v),O=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[T>>16,O>>16],u_pixel_coord_lower:[65535&T,65535&O]}}const Ga=(_,r,c,f)=>{const v=_.style.light,b=v.properties.get("position"),T=[b.x,b.y,b.z],O=l.bV();v.properties.get("anchor")==="viewport"&&l.bW(O,_.transform.bearingInRadians),l.bX(T,T,O);const R=_.transform.transformLightDirection(T),L=v.properties.get("color");return{u_lightpos:T,u_lightpos_globe:R,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:f}},Hp=(_,r,c,f,v,b,T)=>l.e(Ga(_,r,c,f),Ul(b,_,T),{u_height_factor:-Math.pow(2,v.overscaledZ)/T.tileSize/8}),Gu=(_,r,c,f)=>l.e(Ul(r,_,c),{u_fill_translate:f}),Vl=(_,r)=>({u_world:_,u_fill_translate:r}),Fc=(_,r,c,f,v)=>l.e(Gu(_,r,c,v),{u_world:f}),Kp=(_,r,c,f,v)=>{const b=_.transform;let T,O,R=0;if(c.paint.get("circle-pitch-alignment")==="map"){const L=l.aC(r,1,b.zoom);T=!0,O=[L,L],R=L/(l.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*v}else T=!1,O=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:R,u_translate:f}},Wu=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),Xp=_=>({u_viewport_size:[_.width,_.height]}),Ws=(_,r=1)=>({u_color:_,u_overlay:0,u_overlay_scale:r}),tf=(_,r,c,f)=>{const v=l.aC(_,1,r)/(l.$*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:l.aC(_,1,r),u_intensity:c,u_globe_extrude_scale:v}},$h=(_,r,c,f)=>{const v=l.L();l.bY(v,0,_.width,_.height,0,0,1);const b=_.context.gl;return{u_matrix:v,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:c,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}},Uh=(_,r,c)=>{const f=c.paint.get("hillshade-accent-color");let v;switch(c.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const b=c.getIlluminationProperties();for(let T=0;T<b.directionRadians.length;T++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[T]+=_.transform.bearingInRadians);return{u_image:0,u_latrange:Vh(0,r.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:f,u_method:v,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},ql=(_,r)=>{const c=r.stride,f=l.L();return l.bY(f,0,l.$,-l.$,0,0,1),l.M(f,f,[0,-l.$,0]),{u_matrix:f,u_image:1,u_dimension:[c,c],u_zoom:_.overscaledZ,u_unpack:r.getUnpackVector()}};function Vh(_,r){const c=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new l.a1(0,f/c).toLngLat().lat,new l.a1(0,(f+1)/c).toLngLat().lat]}const qh=(_,r,c=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:_.paint.get("color-relief-opacity")}),$c=(_,r,c,f)=>{const v=_.transform;return{u_translation:Zh(_,r,c),u_ratio:f/l.aC(r,1,v.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Gh=(_,r,c,f,v)=>l.e($c(_,r,c,f),{u_image:0,u_image_height:v}),Wh=(_,r,c,f,v)=>{const b=_.transform,T=fs(r,b);return{u_translation:Zh(_,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:f/l.aC(r,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[T,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},ds=(_,r,c,f,v,b)=>{const T=_.lineAtlas,O=fs(r,_.transform),R=c.layout.get("line-cap")==="round",L=T.getDash(v.from,R),$=T.getDash(v.to,R),Z=L.width*b.fromScale,W=$.width*b.toScale;return l.e($c(_,r,c,f),{u_patternscale_a:[O/Z,-L.height/2],u_patternscale_b:[O/W,-$.height/2],u_sdfgamma:T.width/(256*Math.min(Z,W)*_.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:$.y,u_mix:b.t})};function fs(_,r){return 1/l.aC(_,1,r.tileZoom)}function Zh(_,r,c){return l.aD(_.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Uc=(_,r,c,f,v)=>{return{u_tl_parent:_,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(T=f.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(b=f.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Yp(f.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var b,T};function Yp(_){_*=Math.PI/180;const r=Math.sin(_),c=Math.cos(_);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Gl=(_,r,c,f,v,b,T,O,R,L,$,Z,W)=>{const K=T.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:K.width/K.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:R,u_is_text:+$,u_pitch_with_map:+f,u_is_along_line:v,u_is_variable_anchor:b,u_texsize:Z,u_texture:0,u_translation:L,u_pitched_scale:W}},Hh=(_,r,c,f,v,b,T,O,R,L,$,Z,W,K)=>{const ne=T.transform;return l.e(Gl(_,r,c,f,v,b,T,O,R,L,$,Z,K),{u_gamma_scale:f?Math.cos(ne.pitch*Math.PI/180)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},Vc=(_,r,c,f,v,b,T,O,R,L,$,Z,W)=>l.e(Hh(_,r,c,f,v,b,T,O,R,L,!0,$,0,W),{u_texsize_icon:Z,u_texture_icon:1}),Wl=(_,r)=>({u_opacity:_,u_color:r}),rf=(_,r,c,f,v)=>l.e((function(b,T,O,R){const L=O.imageManager.getPattern(b.from.toString()),$=O.imageManager.getPattern(b.to.toString()),{width:Z,height:W}=O.imageManager.getPixelSize(),K=Math.pow(2,R.tileID.overscaledZ),ne=R.tileSize*Math.pow(2,O.transform.tileZoom)/K,ue=ne*(R.tileID.canonical.x+R.tileID.wrap*K),pe=ne*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:$.tl,u_pattern_br_b:$.br,u_texsize:[Z,W],u_mix:T.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:$.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/l.aC(R,1,O.transform.tileZoom),u_pixel_coord_upper:[ue>>16,pe>>16],u_pixel_coord_lower:[65535&ue,65535&pe]}})(c,v,r,f),{u_opacity:_}),Zl=(_,r)=>{},Kh={fillExtrusion:(_,r)=>({u_lightpos:new l.bT(_,r.u_lightpos),u_lightpos_globe:new l.bT(_,r.u_lightpos_globe),u_lightintensity:new l.bg(_,r.u_lightintensity),u_lightcolor:new l.bT(_,r.u_lightcolor),u_vertical_gradient:new l.bg(_,r.u_vertical_gradient),u_opacity:new l.bg(_,r.u_opacity),u_fill_translate:new l.bU(_,r.u_fill_translate)}),fillExtrusionPattern:(_,r)=>({u_lightpos:new l.bT(_,r.u_lightpos),u_lightpos_globe:new l.bT(_,r.u_lightpos_globe),u_lightintensity:new l.bg(_,r.u_lightintensity),u_lightcolor:new l.bT(_,r.u_lightcolor),u_vertical_gradient:new l.bg(_,r.u_vertical_gradient),u_height_factor:new l.bg(_,r.u_height_factor),u_opacity:new l.bg(_,r.u_opacity),u_fill_translate:new l.bU(_,r.u_fill_translate),u_image:new l.bP(_,r.u_image),u_texsize:new l.bU(_,r.u_texsize),u_pixel_coord_upper:new l.bU(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bU(_,r.u_pixel_coord_lower),u_scale:new l.bT(_,r.u_scale),u_fade:new l.bg(_,r.u_fade)}),fill:(_,r)=>({u_fill_translate:new l.bU(_,r.u_fill_translate)}),fillPattern:(_,r)=>({u_image:new l.bP(_,r.u_image),u_texsize:new l.bU(_,r.u_texsize),u_pixel_coord_upper:new l.bU(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bU(_,r.u_pixel_coord_lower),u_scale:new l.bT(_,r.u_scale),u_fade:new l.bg(_,r.u_fade),u_fill_translate:new l.bU(_,r.u_fill_translate)}),fillOutline:(_,r)=>({u_world:new l.bU(_,r.u_world),u_fill_translate:new l.bU(_,r.u_fill_translate)}),fillOutlinePattern:(_,r)=>({u_world:new l.bU(_,r.u_world),u_image:new l.bP(_,r.u_image),u_texsize:new l.bU(_,r.u_texsize),u_pixel_coord_upper:new l.bU(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bU(_,r.u_pixel_coord_lower),u_scale:new l.bT(_,r.u_scale),u_fade:new l.bg(_,r.u_fade),u_fill_translate:new l.bU(_,r.u_fill_translate)}),circle:(_,r)=>({u_camera_to_center_distance:new l.bg(_,r.u_camera_to_center_distance),u_scale_with_map:new l.bP(_,r.u_scale_with_map),u_pitch_with_map:new l.bP(_,r.u_pitch_with_map),u_extrude_scale:new l.bU(_,r.u_extrude_scale),u_device_pixel_ratio:new l.bg(_,r.u_device_pixel_ratio),u_globe_extrude_scale:new l.bg(_,r.u_globe_extrude_scale),u_translate:new l.bU(_,r.u_translate)}),collisionBox:(_,r)=>({u_pixel_extrude_scale:new l.bU(_,r.u_pixel_extrude_scale)}),collisionCircle:(_,r)=>({u_viewport_size:new l.bU(_,r.u_viewport_size)}),debug:(_,r)=>({u_color:new l.bQ(_,r.u_color),u_overlay:new l.bP(_,r.u_overlay),u_overlay_scale:new l.bg(_,r.u_overlay_scale)}),depth:Zl,clippingMask:Zl,heatmap:(_,r)=>({u_extrude_scale:new l.bg(_,r.u_extrude_scale),u_intensity:new l.bg(_,r.u_intensity),u_globe_extrude_scale:new l.bg(_,r.u_globe_extrude_scale)}),heatmapTexture:(_,r)=>({u_matrix:new l.bR(_,r.u_matrix),u_world:new l.bU(_,r.u_world),u_image:new l.bP(_,r.u_image),u_color_ramp:new l.bP(_,r.u_color_ramp),u_opacity:new l.bg(_,r.u_opacity)}),hillshade:(_,r)=>({u_image:new l.bP(_,r.u_image),u_latrange:new l.bU(_,r.u_latrange),u_exaggeration:new l.bg(_,r.u_exaggeration),u_altitudes:new l.b_(_,r.u_altitudes),u_azimuths:new l.b_(_,r.u_azimuths),u_accent:new l.bQ(_,r.u_accent),u_method:new l.bP(_,r.u_method),u_shadows:new l.bZ(_,r.u_shadows),u_highlights:new l.bZ(_,r.u_highlights)}),hillshadePrepare:(_,r)=>({u_matrix:new l.bR(_,r.u_matrix),u_image:new l.bP(_,r.u_image),u_dimension:new l.bU(_,r.u_dimension),u_zoom:new l.bg(_,r.u_zoom),u_unpack:new l.bS(_,r.u_unpack)}),colorRelief:(_,r)=>({u_image:new l.bP(_,r.u_image),u_unpack:new l.bS(_,r.u_unpack),u_dimension:new l.bU(_,r.u_dimension),u_elevation_stops:new l.bP(_,r.u_elevation_stops),u_color_stops:new l.bP(_,r.u_color_stops),u_color_ramp_size:new l.bP(_,r.u_color_ramp_size),u_opacity:new l.bg(_,r.u_opacity)}),line:(_,r)=>({u_translation:new l.bU(_,r.u_translation),u_ratio:new l.bg(_,r.u_ratio),u_device_pixel_ratio:new l.bg(_,r.u_device_pixel_ratio),u_units_to_pixels:new l.bU(_,r.u_units_to_pixels)}),lineGradient:(_,r)=>({u_translation:new l.bU(_,r.u_translation),u_ratio:new l.bg(_,r.u_ratio),u_device_pixel_ratio:new l.bg(_,r.u_device_pixel_ratio),u_units_to_pixels:new l.bU(_,r.u_units_to_pixels),u_image:new l.bP(_,r.u_image),u_image_height:new l.bg(_,r.u_image_height)}),linePattern:(_,r)=>({u_translation:new l.bU(_,r.u_translation),u_texsize:new l.bU(_,r.u_texsize),u_ratio:new l.bg(_,r.u_ratio),u_device_pixel_ratio:new l.bg(_,r.u_device_pixel_ratio),u_image:new l.bP(_,r.u_image),u_units_to_pixels:new l.bU(_,r.u_units_to_pixels),u_scale:new l.bT(_,r.u_scale),u_fade:new l.bg(_,r.u_fade)}),lineSDF:(_,r)=>({u_translation:new l.bU(_,r.u_translation),u_ratio:new l.bg(_,r.u_ratio),u_device_pixel_ratio:new l.bg(_,r.u_device_pixel_ratio),u_units_to_pixels:new l.bU(_,r.u_units_to_pixels),u_patternscale_a:new l.bU(_,r.u_patternscale_a),u_patternscale_b:new l.bU(_,r.u_patternscale_b),u_sdfgamma:new l.bg(_,r.u_sdfgamma),u_image:new l.bP(_,r.u_image),u_tex_y_a:new l.bg(_,r.u_tex_y_a),u_tex_y_b:new l.bg(_,r.u_tex_y_b),u_mix:new l.bg(_,r.u_mix)}),raster:(_,r)=>({u_tl_parent:new l.bU(_,r.u_tl_parent),u_scale_parent:new l.bg(_,r.u_scale_parent),u_buffer_scale:new l.bg(_,r.u_buffer_scale),u_fade_t:new l.bg(_,r.u_fade_t),u_opacity:new l.bg(_,r.u_opacity),u_image0:new l.bP(_,r.u_image0),u_image1:new l.bP(_,r.u_image1),u_brightness_low:new l.bg(_,r.u_brightness_low),u_brightness_high:new l.bg(_,r.u_brightness_high),u_saturation_factor:new l.bg(_,r.u_saturation_factor),u_contrast_factor:new l.bg(_,r.u_contrast_factor),u_spin_weights:new l.bT(_,r.u_spin_weights),u_coords_top:new l.bS(_,r.u_coords_top),u_coords_bottom:new l.bS(_,r.u_coords_bottom)}),symbolIcon:(_,r)=>({u_is_size_zoom_constant:new l.bP(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bP(_,r.u_is_size_feature_constant),u_size_t:new l.bg(_,r.u_size_t),u_size:new l.bg(_,r.u_size),u_camera_to_center_distance:new l.bg(_,r.u_camera_to_center_distance),u_pitch:new l.bg(_,r.u_pitch),u_rotate_symbol:new l.bP(_,r.u_rotate_symbol),u_aspect_ratio:new l.bg(_,r.u_aspect_ratio),u_fade_change:new l.bg(_,r.u_fade_change),u_label_plane_matrix:new l.bR(_,r.u_label_plane_matrix),u_coord_matrix:new l.bR(_,r.u_coord_matrix),u_is_text:new l.bP(_,r.u_is_text),u_pitch_with_map:new l.bP(_,r.u_pitch_with_map),u_is_along_line:new l.bP(_,r.u_is_along_line),u_is_variable_anchor:new l.bP(_,r.u_is_variable_anchor),u_texsize:new l.bU(_,r.u_texsize),u_texture:new l.bP(_,r.u_texture),u_translation:new l.bU(_,r.u_translation),u_pitched_scale:new l.bg(_,r.u_pitched_scale)}),symbolSDF:(_,r)=>({u_is_size_zoom_constant:new l.bP(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bP(_,r.u_is_size_feature_constant),u_size_t:new l.bg(_,r.u_size_t),u_size:new l.bg(_,r.u_size),u_camera_to_center_distance:new l.bg(_,r.u_camera_to_center_distance),u_pitch:new l.bg(_,r.u_pitch),u_rotate_symbol:new l.bP(_,r.u_rotate_symbol),u_aspect_ratio:new l.bg(_,r.u_aspect_ratio),u_fade_change:new l.bg(_,r.u_fade_change),u_label_plane_matrix:new l.bR(_,r.u_label_plane_matrix),u_coord_matrix:new l.bR(_,r.u_coord_matrix),u_is_text:new l.bP(_,r.u_is_text),u_pitch_with_map:new l.bP(_,r.u_pitch_with_map),u_is_along_line:new l.bP(_,r.u_is_along_line),u_is_variable_anchor:new l.bP(_,r.u_is_variable_anchor),u_texsize:new l.bU(_,r.u_texsize),u_texture:new l.bP(_,r.u_texture),u_gamma_scale:new l.bg(_,r.u_gamma_scale),u_device_pixel_ratio:new l.bg(_,r.u_device_pixel_ratio),u_is_halo:new l.bP(_,r.u_is_halo),u_translation:new l.bU(_,r.u_translation),u_pitched_scale:new l.bg(_,r.u_pitched_scale)}),symbolTextAndIcon:(_,r)=>({u_is_size_zoom_constant:new l.bP(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bP(_,r.u_is_size_feature_constant),u_size_t:new l.bg(_,r.u_size_t),u_size:new l.bg(_,r.u_size),u_camera_to_center_distance:new l.bg(_,r.u_camera_to_center_distance),u_pitch:new l.bg(_,r.u_pitch),u_rotate_symbol:new l.bP(_,r.u_rotate_symbol),u_aspect_ratio:new l.bg(_,r.u_aspect_ratio),u_fade_change:new l.bg(_,r.u_fade_change),u_label_plane_matrix:new l.bR(_,r.u_label_plane_matrix),u_coord_matrix:new l.bR(_,r.u_coord_matrix),u_is_text:new l.bP(_,r.u_is_text),u_pitch_with_map:new l.bP(_,r.u_pitch_with_map),u_is_along_line:new l.bP(_,r.u_is_along_line),u_is_variable_anchor:new l.bP(_,r.u_is_variable_anchor),u_texsize:new l.bU(_,r.u_texsize),u_texsize_icon:new l.bU(_,r.u_texsize_icon),u_texture:new l.bP(_,r.u_texture),u_texture_icon:new l.bP(_,r.u_texture_icon),u_gamma_scale:new l.bg(_,r.u_gamma_scale),u_device_pixel_ratio:new l.bg(_,r.u_device_pixel_ratio),u_is_halo:new l.bP(_,r.u_is_halo),u_translation:new l.bU(_,r.u_translation),u_pitched_scale:new l.bg(_,r.u_pitched_scale)}),background:(_,r)=>({u_opacity:new l.bg(_,r.u_opacity),u_color:new l.bQ(_,r.u_color)}),backgroundPattern:(_,r)=>({u_opacity:new l.bg(_,r.u_opacity),u_image:new l.bP(_,r.u_image),u_pattern_tl_a:new l.bU(_,r.u_pattern_tl_a),u_pattern_br_a:new l.bU(_,r.u_pattern_br_a),u_pattern_tl_b:new l.bU(_,r.u_pattern_tl_b),u_pattern_br_b:new l.bU(_,r.u_pattern_br_b),u_texsize:new l.bU(_,r.u_texsize),u_mix:new l.bg(_,r.u_mix),u_pattern_size_a:new l.bU(_,r.u_pattern_size_a),u_pattern_size_b:new l.bU(_,r.u_pattern_size_b),u_scale_a:new l.bg(_,r.u_scale_a),u_scale_b:new l.bg(_,r.u_scale_b),u_pixel_coord_upper:new l.bU(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bU(_,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.bg(_,r.u_tile_units_to_pixels)}),terrain:(_,r)=>({u_texture:new l.bP(_,r.u_texture),u_ele_delta:new l.bg(_,r.u_ele_delta),u_fog_matrix:new l.bR(_,r.u_fog_matrix),u_fog_color:new l.bQ(_,r.u_fog_color),u_fog_ground_blend:new l.bg(_,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.bg(_,r.u_fog_ground_blend_opacity),u_horizon_color:new l.bQ(_,r.u_horizon_color),u_horizon_fog_blend:new l.bg(_,r.u_horizon_fog_blend),u_is_globe_mode:new l.bg(_,r.u_is_globe_mode)}),terrainDepth:(_,r)=>({u_ele_delta:new l.bg(_,r.u_ele_delta)}),terrainCoords:(_,r)=>({u_texture:new l.bP(_,r.u_texture),u_terrain_coords_id:new l.bg(_,r.u_terrain_coords_id),u_ele_delta:new l.bg(_,r.u_ele_delta)}),projectionErrorMeasurement:(_,r)=>({u_input:new l.bg(_,r.u_input),u_output_expected:new l.bg(_,r.u_output_expected)}),atmosphere:(_,r)=>({u_sun_pos:new l.bT(_,r.u_sun_pos),u_atmosphere_blend:new l.bg(_,r.u_atmosphere_blend),u_globe_position:new l.bT(_,r.u_globe_position),u_globe_radius:new l.bg(_,r.u_globe_radius),u_inv_proj_matrix:new l.bR(_,r.u_inv_proj_matrix)}),sky:(_,r)=>({u_sky_color:new l.bQ(_,r.u_sky_color),u_horizon_color:new l.bQ(_,r.u_horizon_color),u_horizon:new l.bU(_,r.u_horizon),u_horizon_normal:new l.bU(_,r.u_horizon_normal),u_sky_horizon_blend:new l.bg(_,r.u_sky_horizon_blend),u_sky_blend:new l.bg(_,r.u_sky_blend)})};class Xh{constructor(r,c,f){this.context=r;const v=r.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Wa{constructor(r,c,f,v){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=r;const b=r.gl;this.buffer=b.createBuffer(),r.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let f=0;f<this.attributes.length;f++){const v=c.attributes[this.attributes[f].name];v!==void 0&&r.enableVertexAttribArray(v)}}setVertexAttribPointers(r,c,f){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],T=c.attributes[b.name];T!==void 0&&r.vertexAttribPointer(T,b.components,r[Hl[b.type]],!1,this.itemSize,b.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Zu extends zr{getDefault(){return l.bf.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Hu extends zr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class nf extends zr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Yh extends zr{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Zs extends zr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Jh extends zr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Jp extends zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Za extends zr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class qc extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class af extends zr{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Qh extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class of extends zr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class ed extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class Kl extends zr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ku extends zr{getDefault(){return l.bf.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Xu extends zr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ps extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Ro extends zr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Do extends zr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ms extends zr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class ca extends zr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Gc extends zr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Hs extends zr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Wc extends zr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class gs extends zr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ks extends zr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Zc extends zr{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Xl extends zr{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const f=this.gl;uo(f)?f.bindVertexArray(r):(c=f.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Hc extends zr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class td extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Xs extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class zo extends zr{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class jo extends zo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Kc extends zo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Tr extends zo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Xc="Framebuffer is not complete";class Qp{constructor(r,c,f,v,b){this.context=r,this.width=c,this.height=f;const T=r.gl,O=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new jo(r,O),v)this.depthAttachment=b?new Tr(r,O):new Kc(r,O);else if(b)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(Xc)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Yl{constructor(r){var c,f;if(this.gl=r,this.clearColor=new Zu(this),this.clearDepth=new Hu(this),this.clearStencil=new nf(this),this.colorMask=new Yh(this),this.depthMask=new Zs(this),this.stencilMask=new Jh(this),this.stencilFunc=new Jp(this),this.stencilOp=new Za(this),this.stencilTest=new qc(this),this.depthRange=new af(this),this.depthTest=new Qh(this),this.depthFunc=new of(this),this.blend=new ed(this),this.blendFunc=new Kl(this),this.blendColor=new Ku(this),this.blendEquation=new Xu(this),this.cullFace=new ps(this),this.cullFaceSide=new Ro(this),this.frontFace=new Do(this),this.program=new ms(this),this.activeTexture=new ca(this),this.viewport=new Gc(this),this.bindFramebuffer=new Hs(this),this.bindRenderbuffer=new Wc(this),this.bindTexture=new gs(this),this.bindVertexBuffer=new Ks(this),this.bindElementBuffer=new Zc(this),this.bindVertexArray=new Xl(this),this.pixelStoreUnpack=new Hc(this),this.pixelStoreUnpackPremultiplyAlpha=new td(this),this.pixelStoreUnpackFlipY=new Xs(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),uo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const v=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:v?.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:v?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const v=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=v?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new Xh(this,r,c)}createVertexBuffer(r,c,f){return new Wa(this,r,c,f)}createRenderbuffer(r,c,f){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,r,c,f),this.bindRenderbuffer.set(null),b}createFramebuffer(r,c,f,v){return new Qp(this,r,c,f,v)}clear({color:r,depth:c,stencil:f}){const v=this.gl;let b=0;r&&(b|=v.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(b|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),v.clear(b)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.bH(r.blendFunction,Yr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return uo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return uo(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let ys;function rd(_,r,c,f,v){const b=_.context,T=_.transform,O=b.gl,R=_.useProgram("collisionBox"),L=[];let $=0,Z=0;for(let me=0;me<f.length;me++){const ye=f[me],be=r.getTile(ye).getBucket(c);if(!be)continue;const ve=v?be.textCollisionBox:be.iconCollisionBox,Te=be.collisionCircleArray;Te.length>0&&(L.push({circleArray:Te,circleOffset:Z,coord:ye}),$+=Te.length/4,Z=$),ve&&R.draw(b,O.LINES,lr.disabled,Pr.disabled,_.colorModeForRenderPass(),nr.disabled,Wu(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(ye),T.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,null,_.transform.zoom,null,null,ve.collisionVertexBuffer)}if(!v||!L.length)return;const W=_.useProgram("collisionCircle"),K=new l.b$;K.resize(4*$),K._trim();let ne=0;for(const me of L)for(let ye=0;ye<me.circleArray.length/4;ye++){const be=4*ye,ve=me.circleArray[be+0],Te=me.circleArray[be+1],ke=me.circleArray[be+2],xe=me.circleArray[be+3];K.emplace(ne++,ve,Te,ke,xe,0),K.emplace(ne++,ve,Te,ke,xe,1),K.emplace(ne++,ve,Te,ke,xe,2),K.emplace(ne++,ve,Te,ke,xe,3)}(!ys||ys.length<2*$)&&(ys=(function(me){const ye=2*me,be=new l.c1;be.resize(ye),be._trim();for(let ve=0;ve<ye;ve++){const Te=6*ve;be.uint16[Te+0]=4*ve+0,be.uint16[Te+1]=4*ve+1,be.uint16[Te+2]=4*ve+2,be.uint16[Te+3]=4*ve+2,be.uint16[Te+4]=4*ve+3,be.uint16[Te+5]=4*ve+0}return be})($));const ue=b.createIndexBuffer(ys,!0),pe=b.createVertexBuffer(K,l.c0.members,!0);for(const me of L){const ye=Xp(_.transform);W.draw(b,O.TRIANGLES,lr.disabled,Pr.disabled,_.colorModeForRenderPass(),nr.disabled,ye,_.style.map.terrain&&_.style.map.terrain.getTerrainData(me.coord),null,c.id,pe,ue,l.aM.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,_.transform.zoom,null,null,null)}pe.destroy(),ue.destroy()}const sf=l.ag(new Float32Array(16));function cn(_,r,c,f,v,b){const{horizontalAlign:T,verticalAlign:O}=l.aH(_);return new l.P((-(T-.5)*r/v+f[0])*b,(-(O-.5)*c/v+f[1])*b)}function nd(_,r,c,f,v,b){const T=r.tileAnchorPoint.add(new l.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let O=f.mult(b);c||(O=O.rotate(-v));const R=T.add(O);return Wn(R.x,R.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const O=ii(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(_),R=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return _.add(f.rotate(R))}return _.add(f)}function Jl(_,r,c,f,v,b,T,O,R,L,$,Z){const W=_.text.placedSymbolArray,K=_.text.dynamicLayoutVertexArray,ne=_.icon.dynamicLayoutVertexArray,ue={};K.clear();for(let pe=0;pe<W.length;pe++){const me=W.get(pe),ye=me.hidden||!me.crossTileID||_.allowVerticalPlacement&&!me.placedOrientation?null:f[me.crossTileID];if(ye){const be=new l.P(me.anchorX,me.anchorY),ve={getElevation:Z,width:v.width,height:v.height,pitchedLabelPlaneMatrix:b,pitchWithMap:c,transform:v,tileAnchorPoint:be,translation:L,unwrappedTileID:$},Te=c?as(be.x,be.y,ve):ii(be.x,be.y,ve),ke=_t(v.cameraToCenterDistance,Te.signedDistanceFromCamera);let xe=l.ap(_.textSizeData,O,me)*ke/l.aB;c&&(xe*=_.tilePixelRatio/T);const{width:Re,height:He,anchor:Ge,textOffset:Ze,textBoxScale:et}=ye,Pt=cn(Ge,Re,He,Ze,et,xe),wt=v.getPitchedTextCorrection(be.x+L[0],be.y+L[1],$),dt=nd(Te.point,ve,r,Pt,-v.bearingInRadians,wt),Lt=_.allowVerticalPlacement&&me.placedOrientation===l.ao.vertical?Math.PI/2:0;for(let vr=0;vr<me.numGlyphs;vr++)l.av(K,dt,Lt);R&&me.associatedIconIndex>=0&&(ue[me.associatedIconIndex]={shiftedAnchor:dt,angle:Lt})}else so(me.numGlyphs,K)}if(R){ne.clear();const pe=_.icon.placedSymbolArray;for(let me=0;me<pe.length;me++){const ye=pe.get(me);if(ye.hidden)so(ye.numGlyphs,ne);else{const be=ue[me];if(be)for(let ve=0;ve<ye.numGlyphs;ve++)l.av(ne,be.shiftedAnchor,be.angle);else so(ye.numGlyphs,ne)}}_.icon.dynamicLayoutVertexBuffer.updateData(ne)}_.text.dynamicLayoutVertexBuffer.updateData(K)}function vs(_,r,c){return c.iconsInText&&r?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Ql(_,r,c,f,v,b,T,O,R,L,$,Z,W){const K=_.context,ne=K.gl,ue=_.transform,pe=O==="map",me=R==="map",ye=O!=="viewport"&&c.layout.get("symbol-placement")!=="point",be=pe&&!me&&!ye,ve=!c.layout.get("symbol-sort-key").isConstant();let Te=!1;const ke=_.getDepthModeForSublayer(0,lr.ReadOnly),xe=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Re=[],He=ue.getCircleRadiusCorrection();for(const Ge of f){const Ze=r.getTile(Ge),et=Ze.getBucket(c);if(!et)continue;const Pt=v?et.text:et.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;const wt=Pt.programConfigurations.get(c.id),dt=v||et.sdfIcons,Lt=v?et.textSizeData:et.iconSizeData,vr=me||ue.pitch!==0,Nr=_.useProgram(vs(dt,v,et),wt),hn=l.an(Lt,ue.zoom),Qr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ge);let Vr,dn,Kr,Hr,Rr=[0,0],Ln=null;if(v)dn=Ze.glyphAtlasTexture,Kr=ne.LINEAR,Vr=Ze.glyphAtlasTexture.size,et.iconsInText&&(Rr=Ze.imageAtlasTexture.size,Ln=Ze.imageAtlasTexture,Hr=vr||_.options.rotating||_.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?ne.LINEAR:ne.NEAREST);else{const rn=c.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;dn=Ze.imageAtlasTexture,Kr=dt||_.options.rotating||_.options.zooming||rn||vr?ne.LINEAR:ne.NEAREST,Vr=Ze.imageAtlasTexture.size}const Nn=l.aC(Ze,1,_.transform.zoom),_i=gn(pe,_.transform,Nn),Bo=l.L();l.aq(Bo,_i);const Fo=br(me,pe,_.transform,Nn),ga=l.aD(ue,Ze,b,T),Ps=ue.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),uc=xe&&et.hasTextData(),hu=c.layout.get("icon-text-fit")!=="none"&&uc&&et.hasIconData();if(ye){const rn=_.style.map.terrain?(bi,ei)=>_.style.map.terrain.getElevation(Ge,bi,ei):null,An=c.layout.get("text-rotation-alignment")==="map";ln(et,_,v,_i,Bo,me,L,An,Ge.toUnwrapped(),ue.width,ue.height,ga,rn)}const Ts=v&&xe||hu,xi=ye||Ts?sf:me?_i:_.transform.clipSpaceToPixelsMatrix,$o=dt&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Uo;Uo=dt?et.iconsInText?Vc(Lt.kind,hn,be,me,ye,Ts,_,xi,Fo,ga,Vr,Rr,He):Hh(Lt.kind,hn,be,me,ye,Ts,_,xi,Fo,ga,v,Vr,0,He):Gl(Lt.kind,hn,be,me,ye,Ts,_,xi,Fo,ga,v,Vr,He);const Vo={program:Nr,buffers:Pt,uniformValues:Uo,projectionData:Ps,atlasTexture:dn,atlasTextureIcon:Ln,atlasInterpolation:Kr,atlasInterpolationIcon:Hr,isSDF:dt,hasHalo:$o};if(ve&&et.canOverlap){Te=!0;const rn=Pt.segments.get();for(const An of rn)Re.push({segments:new l.aM([An]),sortKey:An.sortKey,state:Vo,terrainData:Qr})}else Re.push({segments:Pt.segments,sortKey:0,state:Vo,terrainData:Qr})}Te&&Re.sort(((Ge,Ze)=>Ge.sortKey-Ze.sortKey));for(const Ge of Re){const Ze=Ge.state;if(K.activeTexture.set(ne.TEXTURE0),Ze.atlasTexture.bind(Ze.atlasInterpolation,ne.CLAMP_TO_EDGE),Ze.atlasTextureIcon&&(K.activeTexture.set(ne.TEXTURE1),Ze.atlasTextureIcon&&Ze.atlasTextureIcon.bind(Ze.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),Ze.isSDF){const et=Ze.uniformValues;Ze.hasHalo&&(et.u_is_halo=1,Ys(Ze.buffers,Ge.segments,c,_,Ze.program,ke,$,Z,et,Ze.projectionData,Ge.terrainData)),et.u_is_halo=0}Ys(Ze.buffers,Ge.segments,c,_,Ze.program,ke,$,Z,Ze.uniformValues,Ze.projectionData,Ge.terrainData)}}function Ys(_,r,c,f,v,b,T,O,R,L,$){const Z=f.context;v.draw(Z,Z.gl.TRIANGLES,b,T,O,nr.backCCW,R,$,L,c.id,_.layoutVertexBuffer,_.indexBuffer,r,c.paint,f.transform.zoom,_.programConfigurations.get(c.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Js(_,r,c,f,v){const b=_.context,T=b.gl,O=Pr.disabled,R=new Yr([T.ONE,T.ONE],l.bf.transparent,[!0,!0,!0,!0]),L=r.getBucket(c);if(!L)return;const $=f.key;let Z=c.heatmapFbos.get($);Z||(Z=fo(b,r.tileSize,r.tileSize),c.heatmapFbos.set($,Z)),b.bindFramebuffer.set(Z.framebuffer),b.viewport.set([0,0,r.tileSize,r.tileSize]),b.clear({color:l.bf.transparent});const W=L.programConfigurations.get(c.id),K=_.useProgram("heatmap",W,!v),ne=_.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ue=_.style.map.terrain.getTerrainData(f);K.draw(b,T.TRIANGLES,lr.disabled,O,R,nr.disabled,tf(r,_.transform.zoom,c.paint.get("heatmap-intensity"),1),ue,ne,c.id,L.layoutVertexBuffer,L.indexBuffer,L.segments,c.paint,_.transform.zoom,W)}function Yc(_,r,c,f,v){const b=_.context,T=b.gl,O=_.transform;b.setColorMode(_.colorModeForRenderPass());const R=ec(b,r),L=c.key,$=r.heatmapFbos.get(L);if(!$)return;b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,$.colorAttachment.get()),b.activeTexture.set(T.TEXTURE1),R.bind(T.LINEAR,T.CLAMP_TO_EDGE);const Z=O.getProjectionData({overscaledTileID:c,applyTerrainMatrix:v,applyGlobeMatrix:!f});_.useProgram("heatmapTexture").draw(b,T.TRIANGLES,lr.disabled,Pr.disabled,_.colorModeForRenderPass(),nr.disabled,$h(_,r,0,1),null,Z,r.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,r.paint,O.zoom),$.destroy(),r.heatmapFbos.delete(L)}function fo(_,r,c){var f,v;const b=_.gl,T=b.createTexture();b.bindTexture(b.TEXTURE_2D,T),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const O=(f=_.HALF_FLOAT)!==null&&f!==void 0?f:b.UNSIGNED_BYTE,R=(v=_.RGBA16F)!==null&&v!==void 0?v:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,R,r,c,0,b.RGBA,O,null);const L=_.createFramebuffer(r,c,!1,!1);return L.colorAttachment.set(T),L}function ec(_,r){return r.colorRampTexture||(r.colorRampTexture=new l.T(_,r.colorRamp,_.gl.RGBA)),r.colorRampTexture}function Jc(_,r,c,f,v){if(!c||!f||!f.imageAtlas)return;const b=f.imageAtlas.patternPositions;let T=b[c.to.toString()],O=b[c.from.toString()];if(!T&&O&&(T=O),!O&&T&&(O=T),!T||!O){const R=v.getPaintProperty(r);T=b[R],O=b[R]}T&&O&&_.setConstantPatternPositions(T,O)}function Qs(_,r,c,f,v,b,T,O){const R=_.context.gl,L="fill-pattern",$=c.paint.get(L),Z=$&&$.constantOr(1),W=c.getCrossfadeParameters();let K,ne,ue,pe,me;const ye=_.transform,be=c.paint.get("fill-translate"),ve=c.paint.get("fill-translate-anchor");T?(ne=Z&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=R.LINES):(ne=Z?"fillPattern":"fill",K=R.TRIANGLES);const Te=$.constantOr(null);for(const ke of f){const xe=r.getTile(ke);if(Z&&!xe.patternsLoaded())continue;const Re=xe.getBucket(c);if(!Re)continue;const He=Re.programConfigurations.get(c.id),Ge=_.useProgram(ne,He),Ze=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ke);Z&&(_.context.activeTexture.set(R.TEXTURE0),xe.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),He.updatePaintBuffers(W)),Jc(He,L,Te,xe,c);const et=ye.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),Pt=l.aD(ye,xe,be,ve);if(T){pe=Re.indexBuffer2,me=Re.segments2;const dt=[R.drawingBufferWidth,R.drawingBufferHeight];ue=ne==="fillOutlinePattern"&&Z?Fc(_,W,xe,dt,Pt):Vl(dt,Pt)}else pe=Re.indexBuffer,me=Re.segments,ue=Z?Gu(_,W,xe,Pt):{u_fill_translate:Pt};const wt=_.stencilModeForClipping(ke);Ge.draw(_.context,K,v,wt,b,nr.backCCW,ue,Ze,et,c.id,Re.layoutVertexBuffer,pe,me,c.paint,_.transform.zoom,He)}}function tc(_,r,c,f,v,b,T,O){const R=_.context,L=R.gl,$="fill-extrusion-pattern",Z=c.paint.get($),W=Z.constantOr(1),K=c.getCrossfadeParameters(),ne=c.paint.get("fill-extrusion-opacity"),ue=Z.constantOr(null),pe=_.transform;for(const me of f){const ye=r.getTile(me),be=ye.getBucket(c);if(!be)continue;const ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),Te=be.programConfigurations.get(c.id),ke=_.useProgram(W?"fillExtrusionPattern":"fillExtrusion",Te);W&&(_.context.activeTexture.set(L.TEXTURE0),ye.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Te.updatePaintBuffers(K));const xe=pe.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!O,applyTerrainMatrix:!0});Jc(Te,$,ue,ye,c);const Re=l.aD(pe,ye,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),He=c.paint.get("fill-extrusion-vertical-gradient"),Ge=W?Hp(_,He,ne,Re,me,K,ye):Ga(_,He,ne,Re);ke.draw(R,R.gl.TRIANGLES,v,b,T,nr.backCCW,Ge,ve,xe,c.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,c.paint,_.transform.zoom,Te,_.style.map.terrain&&be.centroidVertexBuffer)}}function rc(_,r,c,f,v,b,T,O,R){var L;const $=_.style.projection,Z=_.context,W=_.transform,K=Z.gl,ne=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],ue=_.useProgram("hillshade",null,!1,ne),pe=!_.options.moving;for(const me of f){const ye=r.getTile(me),be=ye.fbo;if(!be)continue;const ve=$.getMeshFromTileID(Z,me.canonical,O,!0,"raster"),Te=(L=_.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(me);Z.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,be.colorAttachment.get());const ke=W.getProjectionData({overscaledTileID:me,aligned:pe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});ue.draw(Z,K.TRIANGLES,b,v[me.overscaledZ],T,nr.backCCW,Uh(_,ye,c),Te,ke,c.id,ve.vertexBuffer,ve.indexBuffer,ve.segments)}}function po(_,r,c,f,v,b,T,O,R){var L;const $=_.style.projection,Z=_.context,W=_.transform,K=Z.gl,ne=_.useProgram("colorRelief"),ue=!_.options.moving;let pe=!0,me=0;for(const ye of f){const be=r.getTile(ye),ve=be.dem;if(pe){const Ge=K.getParameter(K.MAX_TEXTURE_SIZE),{elevationTexture:Ze,colorTexture:et}=c.getColorRampTextures(Z,Ge,ve.getUnpackVector());Z.activeTexture.set(K.TEXTURE1),Ze.bind(K.NEAREST,K.CLAMP_TO_EDGE),Z.activeTexture.set(K.TEXTURE4),et.bind(K.LINEAR,K.CLAMP_TO_EDGE),pe=!1,me=Ze.size[0]}if(!ve||!ve.data)continue;const Te=ve.stride,ke=ve.getPixels();if(Z.activeTexture.set(K.TEXTURE0),Z.pixelStoreUnpackPremultiplyAlpha.set(!1),be.demTexture=be.demTexture||_.getTileTexture(Te),be.demTexture){const Ge=be.demTexture;Ge.update(ke,{premultiply:!1}),Ge.bind(K.LINEAR,K.CLAMP_TO_EDGE)}else be.demTexture=new l.T(Z,ke,K.RGBA,{premultiply:!1}),be.demTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const xe=$.getMeshFromTileID(Z,ye.canonical,O,!0,"raster"),Re=(L=_.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(ye),He=W.getProjectionData({overscaledTileID:ye,aligned:ue,applyGlobeMatrix:!R,applyTerrainMatrix:!0});ne.draw(Z,K.TRIANGLES,b,v[ye.overscaledZ],T,nr.backCCW,qh(c,be.dem,me),Re,He,c.id,xe.vertexBuffer,xe.indexBuffer,xe.segments)}}const Qc=[new l.P(0,0),new l.P(l.$,0),new l.P(l.$,l.$),new l.P(0,l.$)];function el(_,r,c,f,v,b,T,O,R=!1,L=!1){const $=f[f.length-1].overscaledZ,Z=_.context,W=Z.gl,K=_.useProgram("raster"),ne=_.transform,ue=_.style.projection,pe=_.colorModeForRenderPass(),me=!_.options.moving;for(const ye of f){const be=_.getDepthModeForSublayer(ye.overscaledZ-$,c.paint.get("raster-opacity")===1?lr.ReadWrite:lr.ReadOnly,W.LESS),ve=r.getTile(ye);ve.registerFadeDuration(c.paint.get("raster-fade-duration"));const Te=r.findLoadedParent(ye,0),ke=r.findLoadedSibling(ye),xe=nc(ve,Te||ke||null,r,c,_.transform,_.style.map.terrain);let Re,He;const Ge=c.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;Z.activeTexture.set(W.TEXTURE0),ve.texture.bind(Ge,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Z.activeTexture.set(W.TEXTURE1),Te?(Te.texture.bind(Ge,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Re=Math.pow(2,Te.tileID.overscaledZ-ve.tileID.overscaledZ),He=[ve.tileID.canonical.x*Re%1,ve.tileID.canonical.y*Re%1]):ve.texture.bind(Ge,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),ve.texture.useMipmap&&Z.extTextureFilterAnisotropic&&_.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax);const Ze=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ye),et=ne.getProjectionData({overscaledTileID:ye,aligned:me,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),Pt=Uc(He||[0,0],Re||1,xe,c,O),wt=ue.getMeshFromTileID(Z,ye.canonical,b,T,"raster");K.draw(Z,W.TRIANGLES,be,v?v[ye.overscaledZ]:Pr.disabled,pe,R?nr.frontCCW:nr.backCCW,Pt,Ze,et,c.id,wt.vertexBuffer,wt.indexBuffer,wt.segments)}}function nc(_,r,c,f,v,b){const T=f.paint.get("raster-fade-duration");if(!b&&T>0){const O=D.now(),R=(O-_.timeAdded)/T,L=r?(O-r.timeAdded)/T:-1,$=c.getSource(),Z=zt(v,{tileSize:$.tileSize,roundZoom:$.roundZoom}),W=!r||Math.abs(r.tileID.overscaledZ-Z)>Math.abs(_.tileID.overscaledZ-Z),K=W&&_.refreshedUponExpiration?1:l.ah(W?R:1-L,0,1);return _.refreshedUponExpiration&&R>=1&&(_.refreshedUponExpiration=!1),r?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}const eu=new l.bf(1,0,0,1),lf=new l.bf(0,1,0,1),id=new l.bf(0,0,1,1),Yu=new l.bf(1,0,1,1),ad=new l.bf(0,1,1,1);function Ju(_,r,c,f){un(_,0,r+c/2,_.transform.width,c,f)}function mo(_,r,c,f){un(_,r-c/2,0,c,_.transform.height,f)}function un(_,r,c,f,v,b){const T=_.context,O=T.gl;O.enable(O.SCISSOR_TEST),O.scissor(r*_.pixelRatio,c*_.pixelRatio,f*_.pixelRatio,v*_.pixelRatio),T.clear({color:b}),O.disable(O.SCISSOR_TEST)}function Ca(_,r,c){const f=_.context,v=f.gl,b=_.useProgram("debug"),T=lr.disabled,O=Pr.disabled,R=_.colorModeForRenderPass(),L="$debug",$=_.style.map.terrain&&_.style.map.terrain.getTerrainData(c);f.activeTexture.set(v.TEXTURE0);const Z=r.getTileByID(c.key).latestRawTileData,W=Math.floor((Z&&Z.byteLength||0)/1024),K=r.getTile(c).tileSize,ne=512/Math.min(K,512)*(c.overscaledZ/_.transform.zoom)*.5;let ue=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ue+=` => ${c.overscaledZ}`),(function(me,ye){me.initDebugOverlayCanvas();const be=me.debugOverlayCanvas,ve=me.context.gl,Te=me.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,be.width,be.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(ye,5,5),Te.strokeText(ye,5,5),me.debugOverlayTexture.update(be),me.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)})(_,`${ue} ${W}kB`);const pe=_.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(f,v.TRIANGLES,T,O,Yr.alphaBlended,nr.disabled,Ws(l.bf.transparent,ne),null,pe,L,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),b.draw(f,v.LINE_STRIP,T,O,R,nr.disabled,Ws(l.bf.red),$,pe,L,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Tn(_,r,c,f){const{isRenderingGlobe:v}=f,b=_.context,T=b.gl,O=_.transform,R=_.colorModeForRenderPass(),L=_.getDepthModeFor3D(),$=_.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,_.width,_.height]);for(const Z of c){const W=r.getTerrainMesh(Z.tileID),K=_.renderToTexture.getTexture(Z),ne=r.getTerrainData(Z.tileID);b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,K.texture);const ue=r.getMeshFrameDelta(O.zoom),pe=O.calculateFogMatrix(Z.tileID.toUnwrapped()),me=qu(ue,pe,_.style.sky,O.pitch,v),ye=O.getProjectionData({overscaledTileID:Z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});$.draw(b,T.TRIANGLES,L,Pr.disabled,R,nr.backCCW,me,ne,ye,"terrain",W.vertexBuffer,W.indexBuffer,W.segments)}}function _s(_,r){if(!r.mesh){const c=new l.aL;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const f=new l.aN;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),r.mesh=new Mo(_.createVertexBuffer(c,ko.members),_.createIndexBuffer(f),l.aM.simpleSegment(0,0,c.length,f.length))}return r.mesh}class Ea{constructor(r,c){this.context=new Yl(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Cr.maxUnderzooming+Cr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new os}resize(r,c,f){if(this.width=Math.floor(r*f),this.height=Math.floor(c*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const r=this.context,c=new l.aL;c.emplaceBack(0,0),c.emplaceBack(l.$,0),c.emplaceBack(0,l.$),c.emplaceBack(l.$,l.$),this.tileExtentBuffer=r.createVertexBuffer(c,ko.members),this.tileExtentSegments=l.aM.simpleSegment(0,0,4,2);const f=new l.aL;f.emplaceBack(0,0),f.emplaceBack(l.$,0),f.emplaceBack(0,l.$),f.emplaceBack(l.$,l.$),this.debugBuffer=r.createVertexBuffer(f,ko.members),this.debugSegments=l.aM.simpleSegment(0,0,4,5);const v=new l.c6;v.emplaceBack(0,0,0,0),v.emplaceBack(l.$,0,l.$,0),v.emplaceBack(0,l.$,0,l.$),v.emplaceBack(l.$,l.$,l.$,l.$),this.rasterBoundsBuffer=r.createVertexBuffer(v,Zp.members),this.rasterBoundsSegments=l.aM.simpleSegment(0,0,4,2);const b=new l.aL;b.emplaceBack(0,0),b.emplaceBack(l.$,0),b.emplaceBack(0,l.$),b.emplaceBack(l.$,l.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(b,ko.members),this.rasterBoundsSegmentsPosOnly=l.aM.simpleSegment(0,0,4,5);const T=new l.aL;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(T,ko.members),this.viewportSegments=l.aM.simpleSegment(0,0,4,2);const O=new l.c7;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(O);const R=new l.aN;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(R);const L=this.context.gl;this.stencilClearMode=new Pr({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.tileExtentMesh=new Mo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.L();l.bY(f,0,this.width,this.height,0,0,1),l.N(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const v={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,lr.disabled,this.stencilClearMode,Yr.disabled,nr.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,f){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const v=this.context;v.setColorMode(Yr.disabled),v.setDepthMode(lr.disabled);const b={};for(const T of c)b[T.key]=this.nextStencilID++;this._renderTileMasks(b,c,f,!0),this._renderTileMasks(b,c,f,!1),this._tileClippingMaskIDs=b}_renderTileMasks(r,c,f,v){const b=this.context,T=b.gl,O=this.style.projection,R=this.transform,L=this.useProgram("clippingMask");for(const $ of c){const Z=r[$.key],W=this.style.map.terrain&&this.style.map.terrain.getTerrainData($),K=O.getMeshFromTileID(this.context,$.canonical,v,!0,"stencil"),ne=R.getProjectionData({overscaledTileID:$,applyGlobeMatrix:!f,applyTerrainMatrix:!0});L.draw(b,T.TRIANGLES,lr.disabled,new Pr({func:T.ALWAYS,mask:0},Z,255,T.KEEP,T.KEEP,T.REPLACE),Yr.disabled,f?nr.disabled:nr.backCCW,null,W,ne,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,f=this.style.projection,v=this.transform,b=this.useProgram("depth"),T=this.getDepthModeFor3D(),O=Ne(v,{tileSize:v.tileSize});for(const R of O){const L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),$=f.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),Z=v.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(r,c.TRIANGLES,T,Pr.disabled,Yr.disabled,nr.backCCW,null,L,Z,"$clipping",$.vertexBuffer,$.indexBuffer,$.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Pr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Pr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,f=r.sort(((T,O)=>O.overscaledZ-T.overscaledZ)),v=f[f.length-1].overscaledZ,b=f[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const T={};for(let O=0;O<b;O++)T[O+v]=new Pr({func:c.GEQUAL,mask:255},O+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[T,f]}return[{[v]:Pr.disabled},f]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,f=r.sort(((T,O)=>O.overscaledZ-T.overscaledZ)),v=f[f.length-1].overscaledZ,b=f[0].overscaledZ-v+1;if(this.clearStencil(),b>1){const T={},O={};for(let R=0;R<b;R++)T[R+v]=new Pr({func:c.GREATER,mask:255},b+1+R,255,c.KEEP,c.KEEP,c.REPLACE),O[R+v]=new Pr({func:c.GREATER,mask:255},1+R,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*b+1,[T,O,f]}return this.nextStencilID=3,[{[v]:new Pr({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[v]:new Pr({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Yr([r.CONSTANT_COLOR,r.ONE],new l.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Yr.unblended:Yr.alphaBlended}getDepthModeForSublayer(r,c,f){if(!this.opaquePassEnabledForLayer())return lr.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new lr(f||this.context.gl.LEQUAL,c,[v,v])}getDepthModeFor3D(){return new lr(this.context.gl.LEQUAL,lr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var f,v;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();const b=this.style._order,T=this.style.sourceCaches,O={},R={},L={},$={isRenderingToTexture:!1,isRenderingGlobe:((f=r.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const W in T){const K=T[W];K.used&&K.prepare(this.context),O[W]=K.getVisibleCoordinates(!1),R[W]=O[W].slice().reverse(),L[W]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<b.length;W++)if(this.style._layers[b[W]].is3D()){this.opaquePassCutoff=W;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const W of b){const K=this.style._layers[W];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const ne=R[K.source];(K.type==="custom"||ne.length)&&this.renderLayer(this,T[K.source],K,ne,$)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:W=>this.useProgram(W)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?l.bf.black:l.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(W,K){const ne=W.context,ue=ne.gl,pe=((ke,xe,Re)=>{const He=Math.cos(xe.rollInRadians),Ge=Math.sin(xe.rollInRadians),Ze=Ce(xe),et=xe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ke.properties.get("sky-color"),u_horizon_color:ke.properties.get("horizon-color"),u_horizon:[(xe.width/2-Ze*Ge)*Re,(xe.height/2+Ze*He)*Re],u_horizon_normal:[-Ge,He],u_sky_horizon_blend:ke.properties.get("sky-horizon-blend")*xe.height/2*Re,u_sky_blend:et}})(K,W.style.map.transform,W.pixelRatio),me=new lr(ue.LEQUAL,lr.ReadWrite,[0,1]),ye=Pr.disabled,be=W.colorModeForRenderPass(),ve=W.useProgram("sky"),Te=_s(ne,K);ve.draw(ne,ue.TRIANGLES,me,ye,be,nr.disabled,pe,null,void 0,"sky",Te.vertexBuffer,Te.indexBuffer,Te.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const W=this.style._layers[b[this.currentLayer]],K=T[W.source],ne=O[W.source];this._renderTileClippingMasks(W,ne,!1),this.renderLayer(this,K,W,ne,$)}this.renderPass="translucent";let Z=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const W=this.style._layers[b[this.currentLayer]],K=T[W.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(W,$))continue;this.opaquePassEnabledForLayer()||Z||(Z=!0,$.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ne=(W.type==="symbol"?L:R)[W.source];this._renderTileClippingMasks(W,O[W.source],!!this.renderToTexture),this.renderLayer(this,K,W,ne,$)}if($.isRenderingGlobe&&(function(W,K,ne){const ue=W.context,pe=ue.gl,me=W.useProgram("atmosphere"),ye=new lr(pe.LEQUAL,lr.ReadOnly,[0,1]),be=W.transform,ve=(function(et,Pt){const wt=et.properties.get("position"),dt=[-wt.x,-wt.y,-wt.z],Lt=l.ag(new Float64Array(16));return et.properties.get("anchor")==="map"&&(l.b6(Lt,Lt,Pt.rollInRadians),l.b7(Lt,Lt,-Pt.pitchInRadians),l.b6(Lt,Lt,Pt.bearingInRadians),l.b7(Lt,Lt,Pt.center.lat*Math.PI/180),l.bz(Lt,Lt,-Pt.center.lng*Math.PI/180)),l.c5(dt,dt,Lt),dt})(ne,W.transform),Te=be.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ke=K.properties.get("atmosphere-blend")*Te.projectionTransition;if(ke===0)return;const xe=Io(be.worldSize,be.center.lat),Re=be.inverseProjectionMatrix,He=new Float64Array(4);He[3]=1,l.aw(He,He,be.modelViewProjectionMatrix),He[0]/=He[3],He[1]/=He[3],He[2]/=He[3],He[3]=1,l.aw(He,He,Re),He[0]/=He[3],He[1]/=He[3],He[2]/=He[3],He[3]=1;const Ge=((et,Pt,wt,dt,Lt)=>({u_sun_pos:et,u_atmosphere_blend:Pt,u_globe_position:wt,u_globe_radius:dt,u_inv_proj_matrix:Lt}))(ve,ke,[He[0],He[1],He[2]],xe,Re),Ze=_s(ue,K);me.draw(ue,pe.TRIANGLES,ye,Pr.disabled,Yr.alphaBlended,nr.disabled,Ge,null,null,"atmosphere",Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const W=(function(K,ne){let ue=null;const pe=Object.values(K._layers).flatMap((ve=>ve.source&&!ve.isHidden(ne)?[K.sourceCaches[ve.source]]:[])),me=pe.filter((ve=>ve.getSource().type==="vector")),ye=pe.filter((ve=>ve.getSource().type!=="vector")),be=ve=>{(!ue||ue.getSource().maxzoom<ve.getSource().maxzoom)&&(ue=ve)};return me.forEach((ve=>be(ve))),ue||ye.forEach((ve=>be(ve))),ue})(this.style,this.transform.zoom);W&&(function(K,ne,ue){for(let pe=0;pe<ue.length;pe++)Ca(K,ne,ue[pe])})(this,W,W.getVisibleCoordinates())}this.options.showPadding&&(function(W){const K=W.transform.padding;Ju(W,W.transform.height-(K.top||0),3,eu),Ju(W,K.bottom||0,3,lf),mo(W,K.left||0,3,id),mo(W,W.transform.width-(K.right||0),3,Yu);const ne=W.transform.centerPoint;(function(ue,pe,me,ye){un(ue,pe-1,me-10,2,20,ye),un(ue,pe-10,me-1,20,2,ye)})(W,ne.x,W.transform.height-ne.y,ad)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=r?!l.c8(c,f):!l.c9(c,f)),v||(v=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(l.ca(c,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,T){const O=b.context,R=O.gl,L=b.transform,$=Yr.unblended,Z=new lr(R.LEQUAL,lr.ReadWrite,[0,1]),W=T.sourceCache.getRenderableTiles(),K=b.useProgram("terrainDepth");O.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),O.clear({color:l.bf.transparent,depth:1});for(const ne of W){const ue=T.getTerrainMesh(ne.tileID),pe=T.getTerrainData(ne.tileID),me=L.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ye={u_ele_delta:T.getMeshFrameDelta(L.zoom)};K.draw(O,R.TRIANGLES,Z,Pr.disabled,$,nr.backCCW,ye,pe,me,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,T){const O=b.context,R=O.gl,L=b.transform,$=Yr.unblended,Z=new lr(R.LEQUAL,lr.ReadWrite,[0,1]),W=T.getCoordsTexture(),K=T.sourceCache.getRenderableTiles(),ne=b.useProgram("terrainCoords");O.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),O.clear({color:l.bf.transparent,depth:1}),T.coordsIndex=[];for(const ue of K){const pe=T.getTerrainMesh(ue.tileID),me=T.getTerrainData(ue.tileID);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,W.texture);const ye={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(L.zoom)},be=L.getProjectionData({overscaledTileID:ue.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ne.draw(O,R.TRIANGLES,Z,Pr.disabled,$,nr.backCCW,ye,me,be,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),T.coordsIndex.push(ue.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(r,c,f,v,b){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(v||[]).length)&&(this.id=f.id,l.cb(f)?(function(T,O,R,L,$,Z){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:W}=Z,K=Pr.disabled,ne=T.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ue,pe,me,ye,be,ve,Te,ke,xe){const Re=pe.transform,He=pe.style.map.terrain,Ge=be==="map",Ze=ve==="map";for(const et of ue){const Pt=ye.getTile(et),wt=Pt.getBucket(me);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const dt=l.an(wt.textSizeData,Re.zoom),Lt=l.aC(Pt,1,pe.transform.zoom),vr=gn(Ge,pe.transform,Lt),Nr=me.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(dt){const hn=Math.pow(2,Re.zoom-Pt.tileID.overscaledZ),Qr=He?(Vr,dn)=>He.getElevation(et,Vr,dn):null;Jl(wt,Ge,Ze,xe,Re,vr,hn,dt,Nr,l.aD(Re,Pt,Te,ke),et.toUnwrapped(),Qr)}}})(L,T,R,O,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),$),R.paint.get("icon-opacity").constantOr(1)!==0&&Ql(T,O,R,L,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),K,ne,W),R.paint.get("text-opacity").constantOr(1)!==0&&Ql(T,O,R,L,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),K,ne,W),O.map.showCollisionBoxes&&(rd(T,O,R,L,!0),rd(T,O,R,L,!1))})(r,c,f,v,this.style.placement.variableOffsets,b):l.cc(f)?(function(T,O,R,L,$){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=$,W=R.paint.get("circle-opacity"),K=R.paint.get("circle-stroke-width"),ne=R.paint.get("circle-stroke-opacity"),ue=!R.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(K.constantOr(1)===0||ne.constantOr(1)===0))return;const pe=T.context,me=pe.gl,ye=T.transform,be=T.getDepthModeForSublayer(0,lr.ReadOnly),ve=Pr.disabled,Te=T.colorModeForRenderPass(),ke=[],xe=ye.getCircleRadiusCorrection();for(let Re=0;Re<L.length;Re++){const He=L[Re],Ge=O.getTile(He),Ze=Ge.getBucket(R);if(!Ze)continue;const et=R.paint.get("circle-translate"),Pt=R.paint.get("circle-translate-anchor"),wt=l.aD(ye,Ge,et,Pt),dt=Ze.programConfigurations.get(R.id),Lt=T.useProgram("circle",dt),vr=Ze.layoutVertexBuffer,Nr=Ze.indexBuffer,hn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(He),Qr={programConfiguration:dt,program:Lt,layoutVertexBuffer:vr,indexBuffer:Nr,uniformValues:Kp(T,Ge,R,wt,xe),terrainData:hn,projectionData:ye.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!Z,applyTerrainMatrix:!0})};if(ue){const Vr=Ze.segments.get();for(const dn of Vr)ke.push({segments:new l.aM([dn]),sortKey:dn.sortKey,state:Qr})}else ke.push({segments:Ze.segments,sortKey:0,state:Qr})}ue&&ke.sort(((Re,He)=>Re.sortKey-He.sortKey));for(const Re of ke){const{programConfiguration:He,program:Ge,layoutVertexBuffer:Ze,indexBuffer:et,uniformValues:Pt,terrainData:wt,projectionData:dt}=Re.state;Ge.draw(pe,me.TRIANGLES,be,ve,Te,nr.backCCW,Pt,wt,dt,R.id,Ze,et,Re.segments,R.paint,T.transform.zoom,He)}})(r,c,f,v,b):l.cd(f)?(function(T,O,R,L,$){if(R.paint.get("heatmap-opacity")===0)return;const Z=T.context,{isRenderingToTexture:W,isRenderingGlobe:K}=$;if(T.style.map.terrain){for(const ne of L){const ue=O.getTile(ne);O.hasRenderableParent(ne)||(T.renderPass==="offscreen"?Js(T,ue,R,ne,K):T.renderPass==="translucent"&&Yc(T,R,ne,W,K))}Z.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?(function(ne,ue,pe,me){const ye=ne.context,be=ye.gl,ve=ne.transform,Te=Pr.disabled,ke=new Yr([be.ONE,be.ONE],l.bf.transparent,[!0,!0,!0,!0]);(function(xe,Re,He){const Ge=xe.gl;xe.activeTexture.set(Ge.TEXTURE1),xe.viewport.set([0,0,Re.width/4,Re.height/4]);let Ze=He.heatmapFbos.get(l.c2);Ze?(Ge.bindTexture(Ge.TEXTURE_2D,Ze.colorAttachment.get()),xe.bindFramebuffer.set(Ze.framebuffer)):(Ze=fo(xe,Re.width/4,Re.height/4),He.heatmapFbos.set(l.c2,Ze))})(ye,ne,pe),ye.clear({color:l.bf.transparent});for(let xe=0;xe<me.length;xe++){const Re=me[xe];if(ue.hasRenderableParent(Re))continue;const He=ue.getTile(Re),Ge=He.getBucket(pe);if(!Ge)continue;const Ze=Ge.programConfigurations.get(pe.id),et=ne.useProgram("heatmap",Ze),Pt=ve.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),wt=ve.getCircleRadiusCorrection();et.draw(ye,be.TRIANGLES,lr.disabled,Te,ke,nr.backCCW,tf(He,ve.zoom,pe.paint.get("heatmap-intensity"),wt),null,Pt,pe.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,pe.paint,ve.zoom,Ze)}ye.viewport.set([0,0,ne.width,ne.height])})(T,O,R,L):T.renderPass==="translucent"&&(function(ne,ue){const pe=ne.context,me=pe.gl;pe.setColorMode(ne.colorModeForRenderPass());const ye=ue.heatmapFbos.get(l.c2);ye&&(pe.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,ye.colorAttachment.get()),pe.activeTexture.set(me.TEXTURE1),ec(pe,ue).bind(me.LINEAR,me.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(pe,me.TRIANGLES,lr.disabled,Pr.disabled,ne.colorModeForRenderPass(),nr.disabled,$h(ne,ue,0,1),null,null,ue.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,ue.paint,ne.transform.zoom))})(T,R)})(r,c,f,v,b):l.ce(f)?(function(T,O,R,L,$){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=$,W=R.paint.get("line-opacity"),K=R.paint.get("line-width");if(W.constantOr(1)===0||K.constantOr(1)===0)return;const ne=T.getDepthModeForSublayer(0,lr.ReadOnly),ue=T.colorModeForRenderPass(),pe=R.paint.get("line-dasharray"),me=R.paint.get("line-pattern"),ye=me.constantOr(1),be=R.paint.get("line-gradient"),ve=R.getCrossfadeParameters(),Te=ye?"linePattern":pe?"lineSDF":be?"lineGradient":"line",ke=T.context,xe=ke.gl,Re=T.transform;let He=!0;for(const Ge of L){const Ze=O.getTile(Ge);if(ye&&!Ze.patternsLoaded())continue;const et=Ze.getBucket(R);if(!et)continue;const Pt=et.programConfigurations.get(R.id),wt=T.context.program.get(),dt=T.useProgram(Te,Pt),Lt=He||dt.program!==wt,vr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ge),Nr=me.constantOr(null);if(Nr&&Ze.imageAtlas){const Kr=Ze.imageAtlas,Hr=Kr.patternPositions[Nr.to.toString()],Rr=Kr.patternPositions[Nr.from.toString()];Hr&&Rr&&Pt.setConstantPatternPositions(Hr,Rr)}const hn=Re.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),Qr=Re.getPixelScale(),Vr=ye?Wh(T,Ze,R,Qr,ve):pe?ds(T,Ze,R,Qr,pe,ve):be?Gh(T,Ze,R,Qr,et.lineClipsArray.length):$c(T,Ze,R,Qr);if(ye)ke.activeTexture.set(xe.TEXTURE0),Ze.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),Pt.updatePaintBuffers(ve);else if(pe&&(Lt||T.lineAtlas.dirty))ke.activeTexture.set(xe.TEXTURE0),T.lineAtlas.bind(ke);else if(be){const Kr=et.gradients[R.id];let Hr=Kr.texture;if(R.gradientVersion!==Kr.version){let Rr=256;if(R.stepInterpolant){const Ln=O.getSource().maxzoom,Nn=Ge.canonical.z===Ln?Math.ceil(1<<T.transform.maxZoom-Ge.canonical.z):1;Rr=l.ah(l.c3(et.maxLineLength/l.$*1024*Nn),256,ke.maxTextureSize)}Kr.gradient=l.c4({expression:R.gradientExpression(),evaluationKey:"lineProgress",resolution:Rr,image:Kr.gradient||void 0,clips:et.lineClipsArray}),Kr.texture?Kr.texture.update(Kr.gradient):Kr.texture=new l.T(ke,Kr.gradient,xe.RGBA),Kr.version=R.gradientVersion,Hr=Kr.texture}ke.activeTexture.set(xe.TEXTURE0),Hr.bind(R.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}const dn=T.stencilModeForClipping(Ge);dt.draw(ke,xe.TRIANGLES,ne,dn,ue,nr.disabled,Vr,vr,hn,R.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,R.paint,T.transform.zoom,Pt,et.layoutVertexBuffer2),He=!1}})(r,c,f,v,b):l.cf(f)?(function(T,O,R,L,$){const Z=R.paint.get("fill-color"),W=R.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const{isRenderingToTexture:K}=$,ne=T.colorModeForRenderPass(),ue=R.paint.get("fill-pattern"),pe=T.opaquePassEnabledForLayer()&&!ue.constantOr(1)&&Z.constantOr(l.bf.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===pe){const me=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);Qs(T,O,R,L,me,ne,!1,K)}if(T.renderPass==="translucent"&&R.paint.get("fill-antialias")){const me=T.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);Qs(T,O,R,L,me,ne,!0,K)}})(r,c,f,v,b):l.cg(f)?(function(T,O,R,L,$){const Z=R.paint.get("fill-extrusion-opacity");if(Z===0)return;const{isRenderingToTexture:W}=$;if(T.renderPass==="translucent"){const K=new lr(T.context.gl.LEQUAL,lr.ReadWrite,T.depthRangeFor3D);if(Z!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))tc(T,O,R,L,K,Pr.disabled,Yr.disabled,W),tc(T,O,R,L,K,T.stencilModeFor3D(),T.colorModeForRenderPass(),W);else{const ne=T.colorModeForRenderPass();tc(T,O,R,L,K,Pr.disabled,ne,W)}}})(r,c,f,v,b):l.ch(f)?(function(T,O,R,L,$){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=$,W=T.context,K=T.style.projection.useSubdivision,ne=T.getDepthModeForSublayer(0,lr.ReadOnly),ue=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(pe,me,ye,be,ve,Te,ke){const xe=pe.context,Re=xe.gl;for(const He of ye){const Ge=me.getTile(He),Ze=Ge.dem;if(!Ze||!Ze.data||!Ge.needsHillshadePrepare)continue;const et=Ze.dim,Pt=Ze.stride,wt=Ze.getPixels();if(xe.activeTexture.set(Re.TEXTURE1),xe.pixelStoreUnpackPremultiplyAlpha.set(!1),Ge.demTexture=Ge.demTexture||pe.getTileTexture(Pt),Ge.demTexture){const Lt=Ge.demTexture;Lt.update(wt,{premultiply:!1}),Lt.bind(Re.NEAREST,Re.CLAMP_TO_EDGE)}else Ge.demTexture=new l.T(xe,wt,Re.RGBA,{premultiply:!1}),Ge.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);xe.activeTexture.set(Re.TEXTURE0);let dt=Ge.fbo;if(!dt){const Lt=new l.T(xe,{width:et,height:et,data:null},Re.RGBA);Lt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),dt=Ge.fbo=xe.createFramebuffer(et,et,!0,!1),dt.colorAttachment.set(Lt.texture)}xe.bindFramebuffer.set(dt.framebuffer),xe.viewport.set([0,0,et,et]),pe.useProgram("hillshadePrepare").draw(xe,Re.TRIANGLES,ve,Te,ke,nr.disabled,ql(Ge.tileID,Ze),null,null,be.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),Ge.needsHillshadePrepare=!1}})(T,O,L,R,ne,Pr.disabled,ue),W.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(K){const[pe,me,ye]=T.stencilConfigForOverlapTwoPass(L);rc(T,O,R,ye,pe,ne,ue,!1,Z),rc(T,O,R,ye,me,ne,ue,!0,Z)}else{const[pe,me]=T.getStencilConfigForOverlapAndUpdateStencilID(L);rc(T,O,R,me,pe,ne,ue,!1,Z)}})(r,c,f,v,b):l.ci(f)?(function(T,O,R,L,$){if(T.renderPass!=="translucent"||!L.length)return;const{isRenderingToTexture:Z}=$,W=T.style.projection.useSubdivision,K=T.getDepthModeForSublayer(0,lr.ReadOnly),ne=T.colorModeForRenderPass();if(W){const[ue,pe,me]=T.stencilConfigForOverlapTwoPass(L);po(T,O,R,me,ue,K,ne,!1,Z),po(T,O,R,me,pe,K,ne,!0,Z)}else{const[ue,pe]=T.getStencilConfigForOverlapAndUpdateStencilID(L);po(T,O,R,pe,ue,K,ne,!1,Z)}})(r,c,f,v,b):l.cj(f)?(function(T,O,R,L,$){if(T.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!L.length)return;const{isRenderingToTexture:Z}=$,W=O.getSource(),K=T.style.projection.useSubdivision;if(W instanceof Kn)el(T,O,R,L,null,!1,!1,W.tileCoords,W.flippedWindingOrder,Z);else if(K){const[ne,ue,pe]=T.stencilConfigForOverlapTwoPass(L);el(T,O,R,pe,ne,!1,!0,Qc,!1,Z),el(T,O,R,pe,ue,!0,!0,Qc,!1,Z)}else{const[ne,ue]=T.getStencilConfigForOverlapAndUpdateStencilID(L);el(T,O,R,ue,ne,!1,!0,Qc,!1,Z)}})(r,c,f,v,b):l.ck(f)?(function(T,O,R,L,$){const Z=R.paint.get("background-color"),W=R.paint.get("background-opacity");if(W===0)return;const{isRenderingToTexture:K}=$,ne=T.context,ue=ne.gl,pe=T.style.projection,me=T.transform,ye=me.tileSize,be=R.paint.get("background-pattern");if(T.isPatternMissing(be))return;const ve=!be&&Z.a===1&&W===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==ve)return;const Te=Pr.disabled,ke=T.getDepthModeForSublayer(0,ve==="opaque"?lr.ReadWrite:lr.ReadOnly),xe=T.colorModeForRenderPass(),Re=T.useProgram(be?"backgroundPattern":"background"),He=L||Ne(me,{tileSize:ye,terrain:T.style.map.terrain});be&&(ne.activeTexture.set(ue.TEXTURE0),T.imageManager.bind(T.context));const Ge=R.getCrossfadeParameters();for(const Ze of He){const et=me.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Pt=be?rf(W,T,be,{tileID:Ze,tileSize:ye},Ge):Wl(W,Z),wt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ze),dt=pe.getMeshFromTileID(ne,Ze.canonical,!1,!0,"raster");Re.draw(ne,ue.TRIANGLES,ke,Te,xe,nr.backCCW,Pt,wt,et,R.id,dt.vertexBuffer,dt.indexBuffer,dt.segments)}})(r,0,f,v,b):l.cl(f)&&(function(T,O,R,L){const{isRenderingGlobe:$}=L,Z=T.context,W=R.implementation,K=T.style.projection,ne=T.transform,ue=ne.getProjectionDataForCustomLayer($),pe={farZ:ne.farZ,nearZ:ne.nearZ,fov:ne.fov*Math.PI/180,modelViewProjectionMatrix:ne.modelViewProjectionMatrix,projectionMatrix:ne.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:ue},me=W.renderingMode?W.renderingMode:"2d";if(T.renderPass==="offscreen"){const ye=W.prerender;ye&&(T.setCustomLayerDefaults(),Z.setColorMode(T.colorModeForRenderPass()),ye.call(W,Z.gl,pe),Z.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),Z.setColorMode(T.colorModeForRenderPass()),Z.setStencilMode(Pr.disabled);const ye=me==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,lr.ReadOnly);Z.setDepthMode(ye),W.render(Z.gl,pe),Z.setDirty(),T.setBaseState(),Z.bindFramebuffer.set(null)}})(r,0,f,b))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!c||!f}useProgram(r,c,f=!1,v=[]){this.cache=this.cache||{};const b=!!this.style.map.terrain,T=this.style.projection,O=f?Ta.projectionMercator:T.shaderPreludeCode,R=f?lo:T.shaderDefine,L=r+(c?c.cacheKey:"")+`/${f?ss:T.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[L]||(this.cache[L]=new Fh(this.context,Ta[r],c,Kh[r],this._showOverdrawInspector,b,O,R,v)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function tu(_,r){let c,f=!1,v=null,b=null;const T=()=>{v=null,f&&(_.apply(b,c),v=setTimeout(T,r),f=!1)};return(...O)=>(f=!0,b=this,c=O,v||T(),v)}class tl{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map((v=>v.split("="))).forEach((v=>{v[0]===this._hashName&&(f=v)})),(f&&f[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const f=c.join("/");let v=f;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${f}`);let b=window.location.hash.replace(v,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let T=window.location.href.replace(/(#.+)?$/,b);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=tu(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,v=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),T=Math.round(c.lng*b)/b,O=Math.round(c.lat*b)/b,R=this._map.getBearing(),L=this._map.getPitch();let $="";if($+=r?`/${T}/${O}/${f}`:`${f}/${O}/${T}`,(R||L)&&($+="/"+Math.round(10*R)/10),L&&($+=`/${Math.round(L)}`),this._hashName){const Z=this._hashName;let W=!1;const K=window.location.hash.slice(1).split("&").map((ne=>{const ue=ne.split("=")[0];return ue===Z?(W=!0,`${ue}=${$}`):ne})).filter((ne=>ne));return W||K.push(`${Z}=${$}`),`#${K.join("&")}`}return`#${$}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new l.S(+r[2],+r[1])}catch{return!1}const c=+r[0],f=+(r[3]||0),v=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&f>=-180&&f<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const rl={linearity:.3,easing:l.cm(0,0,.3,1)},Ha=l.e({deceleration:2500,maxSpeed:1400},rl),nl=l.e({deceleration:20,maxSpeed:1400},rl),il=l.e({deceleration:1e3,maxSpeed:360},rl),ru=l.e({deceleration:1e3,maxSpeed:90},rl),Qu=l.e({deceleration:1e3,maxSpeed:360},rl);class al{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=D.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,c.roll+=b.rollDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const b=jr(c.pan.mag(),f,l.e({},Ha,r||{})),T=c.pan.mult(b.amount/c.pan.mag()),O=this._map.cameraHelper.handlePanInertia(T,this._map.transform);v.center=O.easingCenter,v.offset=O.easingOffset,ua(v,b)}if(c.zoom){const b=jr(c.zoom,f,nl);v.zoom=this._map.transform.zoom+b.amount,ua(v,b)}if(c.bearing){const b=jr(c.bearing,f,il);v.bearing=this._map.transform.bearing+l.ah(b.amount,-179,179),ua(v,b)}if(c.pitch){const b=jr(c.pitch,f,ru);v.pitch=this._map.transform.pitch+b.amount,ua(v,b)}if(c.roll){const b=jr(c.roll,f,Qu);v.roll=this._map.transform.roll+l.ah(b.amount,-179,179),ua(v,b)}if(v.zoom||v.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),l.e(v,{noMoveStart:!0})}}function ua(_,r){(!_.duration||_.duration<r.duration)&&(_.duration=r.duration,_.easing=r.easing)}function jr(_,r,c){const{maxSpeed:f,linearity:v,deceleration:b}=c,T=l.ah(_*v/(r/1e3),-f,f),O=Math.abs(T)/(b*v);return{easing:c.easing,duration:1e3*O,amount:T*(O/2)}}class Ir extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f,v={}){f=f instanceof MouseEvent?f:new MouseEvent(r,f);const b=j.mousePos(c.getCanvas(),f),T=c.unproject(b);super(r,l.e({point:b,lngLat:T,originalEvent:f},v)),this._defaultPrevented=!1,this.target=c}}class ha extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f){const v=r==="touchend"?f.changedTouches:f.touches,b=j.touchPos(c.getCanvasContainer(),v),T=b.map((R=>c.unproject(R))),O=b.reduce(((R,L,$,Z)=>R.add(L.div(Z.length))),new l.P(0,0));super(r,{points:b,point:O,lngLats:T,lngLat:c.unproject(O),originalEvent:f}),this._defaultPrevented=!1}}class oi extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Ii{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new oi(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new Ir(r.type,this._map,r))}mouseup(r){this._map.fire(new Ir(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ir(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Ir(r.type,this._map,r))}mouseover(r){this._map.fire(new Ir(r.type,this._map,r))}mouseout(r){this._map.fire(new Ir(r.type,this._map,r))}touchstart(r){return this._firePreventable(new ha(r.type,this._map,r))}touchmove(r){this._map.fire(new ha(r.type,this._map,r))}touchend(r){this._map.fire(new ha(r.type,this._map,r))}touchcancel(r){this._map.fire(new ha(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xs{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Ir(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ir("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Ir(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ka{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(l.P.convert(r),this._map.terrain)}}class yi{constructor(r,c){this._map=r,this._tr=new Ka(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(j.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=f,this._box||(this._box=j.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const b=Math.min(v.x,f.x),T=Math.max(v.x,f.x),O=Math.min(v.y,f.y),R=Math.max(v.y,f.y);j.setTransform(this._box,`translate(${b}px,${O}px)`),this._box.style.width=T-b+"px",this._box.style.height=R-O+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const f=this._startPos,v=c;if(this.reset(),j.suppressClick(),f.x!==v.x||f.y!==v.y)return this._map.fire(new l.l("boxzoomend",{originalEvent:r})),{cameraAnimation:b=>b.fitScreenCoordinates(f,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new l.l(r,{originalEvent:c}))}}function ol(_,r){if(_.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${r.length}`);const c={};for(let f=0;f<_.length;f++)c[_[f].identifier]=r[f];return c}class nu{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=(function(v){const b=new l.P(0,0);for(const T of v)b._add(T);return b.div(v.length)})(c),this.touches=ol(f,c)))}touchmove(r,c,f){if(this.aborted||!this.centroid)return;const v=ol(f,c);for(const b in this.touches){const T=v[b];(!T||T.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(r,c,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class iu{constructor(r){this.singleTap=new nu(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,f){this.singleTap.touchstart(r,c,f)}touchmove(r,c,f){this.singleTap.touchmove(r,c,f)}touchend(r,c,f){const v=this.singleTap.touchend(r,c,f);if(v){const b=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(v)<30;if(b&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Oi{constructor(r){this._tr=new Ka(r),this._zoomIn=new iu({numTouches:1,numTaps:2}),this._zoomOut=new iu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,f){this._zoomIn.touchstart(r,c,f),this._zoomOut.touchstart(r,c,f)}touchmove(r,c,f){this._zoomIn.touchmove(r,c,f),this._zoomOut.touchmove(r,c,f)}touchend(r,c,f){const v=this._zoomIn.touchend(r,c,f),b=this._zoomOut.touchend(r,c,f),T=this._tr;return v?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(v)},{originalEvent:r})}):b?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(b)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vi{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const v=Array.isArray(c)?c[0]:c;return!this._moved&&v.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(f,v))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&j.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const go=0,Ki=2,bs={[go]:1,[Ki]:2};class ic{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=j.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!(function(c,f){const v=bs[f];return c.buttons===void 0||(c.buttons&v)!==v})(r,this._eventButton)}isValidEndEvent(r){return j.mouseButton(r)===this._eventButton}}class em{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class ws{constructor(r=new ic({checkCorrectEvent:()=>!0}),c=new em){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,f){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?f(r):void 0}startMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Lo=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=r=>{r.preventDefault()}};class sl{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,f){return this._calculateTransform(r,c,f)}touchmove(r,c,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,c,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,f){this._calculateTransform(r,c,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,f){f.length>0&&(this._active=!0);const v=ol(f,c),b=new l.P(0,0),T=new l.P(0,0);let O=0;for(const L in v){const $=v[L],Z=this._touches[L];Z&&(b._add($),T._add($.sub(Z)),O++,v[L]=$)}if(this._touches=v,this._shouldBePrevented(O)||!T.mag())return;const R=T.div(O);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(O),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,f){if(!this._firstTwoTouches)return;r.preventDefault();const[v,b]=this._firstTwoTouches,T=Ri(f,c,v),O=Ri(f,c,b);if(!T||!O)return;const R=this._aroundCenter?null:T.add(O).div(2);return this._move([T,O],R,r)}touchend(r,c,f){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,T=Ri(f,c,v),O=Ri(f,c,b);T&&O||(this._active&&j.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ri(_,r,c){for(let f=0;f<_.length;f++)if(_[f].identifier===c)return r[f]}function At(_,r){return Math.log(_/r)/Math.LN2}class Xi extends yo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(At(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:At(this._distance,f),pinchAround:c}}}function vo(_,r){return 180*_.angleWith(r)/Math.PI}class Xa extends yo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,f){const v=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:vo(this._vector,v),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,f=vo(r,this._startVector);return Math.abs(f)<c}}function Di(_){return Math.abs(_.y)>Math.abs(_.x)}class Ma extends yo{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,f){super.touchstart(r,c,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,Di(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=r[0].sub(this._lastPoints[0]),b=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,b,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(v.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,f){if(this._valid!==void 0)return this._valid;const v=r.mag()>=2,b=c.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Di(r)&&Di(c)&&T}}const eh={panStep:100,bearingStep:15,pitchStep:10};class Ar{constructor(r){this._tr=new Ka(r);const c=eh;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,f=0,v=0,b=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),b=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),b=1);break;case 38:r.shiftKey?v=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?v=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(f=0,v=0),{cameraAnimation:O=>{const R=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:au,zoom:c?Math.round(R.zoom)+c*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+f*this._bearingStep,pitch:R.pitch+v*this._pitchStep,offset:[-b*this._panStep,-T*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function au(_){return _*(2-_)}const Yi=4.000244140625,zi=1/450;class yn{constructor(r,c){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new Ka(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=zi}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=D.now(),v=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%Yi==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=j.mousePos(this._map.getCanvas(),r),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(l.S.convert(f.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>Yi?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&R!==0&&(R=1/R);const L=typeof this._targetZoom!="number"?r.scale:l.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),l.ak(L*R)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,f=this._startZoom,v=this._easing;let b,T=!1;if(this._type==="wheel"&&f&&v){const O=D.now()-this._lastWheelEventTime,R=Math.min((O+5)/200,1),L=v(R);b=l.C.number(f,c,L),R<1?this._frameId||(this._frameId=!0):T=!0}else b=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!T,zoomDelta:b-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=l.co;if(this._prevEase){const f=this._prevEase,v=(D.now()-f.start)/f.duration,b=f.easing(v+.01)-f.easing(v),T=.27/Math.sqrt(b*b+1e-4)*.01,O=Math.sqrt(.0729-T*T);c=l.cm(T,O,.25,1)}return this._prevEase={start:D.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ka{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class od{constructor(r){this._tr=new Ka(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class th{constructor(){this._tap=new iu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,f){if(!this._swipePoint)if(this._tapTime){const v=c[0],b=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(v)<30;b&&T?f.length>0&&(this._swipePoint=v,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,c,f)}touchmove(r,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const v=c[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,r.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(r,c,f)}touchend(r,c,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const v=this._tap.touchend(r,c,f);v&&(this._tapTime=r.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ou{constructor(r,c,f){this._el=r,this._mousePan=c,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class rh{constructor(r,c,f,v){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=f,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class nh{constructor(r,c,f,v){this._el=r,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class su{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=j.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=c,this._container.appendChild(v);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=f,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(j.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new l.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const lu=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class da extends l.l{}function Gr(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class tm{constructor(r,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,b)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=v.type==="renderFrame"?void 0:v,O={needsRenderFrame:!1},R={},L={};for(const{handlerName:W,handler:K,allowed:ne}of this._handlers){if(!K.isEnabled())continue;let ue;if(this._blockedByActive(L,ne,W))K.reset();else if(K[b||v.type]){if(l.cp(v,b||v.type)){const pe=j.mousePos(this._map.getCanvas(),v);ue=K[b||v.type](v,pe)}else if(l.cq(v,b||v.type)){const pe=this._getMapTouches(v.touches),me=j.touchPos(this._map.getCanvas(),pe);ue=K[b||v.type](v,me,pe)}else l.cr(b||v.type)||(ue=K[b||v.type](v));this.mergeHandlerResult(O,R,ue,W,T),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()}(ue||K.isActive())&&(L[W]=K)}const $={};for(const W in this._previousActiveHandlers)L[W]||($[W]=T);this._previousActiveHandlers=L,(Object.keys($).length||Gr(O))&&(this._changes.push([O,R,$]),this._triggerRenderFrame()),(Object.keys(L).length||Gr(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=O;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new al(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,b,T]of this._listeners)j.addEventListener(v,b,v===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,f]of this._listeners)j.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new Ii(c,r));const v=c.boxZoom=new yi(c,r);this._add("boxZoom",v),r.interactive&&r.boxZoom&&v.enable();const b=c.cooperativeGestures=new su(c,r.cooperativeGestures);this._add("cooperativeGestures",b),r.cooperativeGestures&&b.enable();const T=new Oi(c),O=new od(c);c.doubleClickZoom=new ka(O,T),this._add("tapZoom",T),this._add("clickZoom",O),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const R=new th;this._add("tapDragZoom",R);const L=c.touchPitch=new Ma(c);this._add("touchPitch",L),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const $=()=>c.project(c.getCenter()),Z=(function({enable:ve,clickTolerance:Te,aroundCenter:ke=!0,minPixelCenterThreshold:xe=100,rotateDegreesPerPixelMoved:Re=.8},He){const Ge=new ic({checkCorrectEvent:Ze=>j.mouseButton(Ze)===0&&Ze.ctrlKey||j.mouseButton(Ze)===2&&!Ze.ctrlKey});return new vi({clickTolerance:Te,move:(Ze,et)=>{const Pt=He();if(ke&&Math.abs(Pt.y-Ze.y)>xe)return{bearingDelta:l.cn(new l.P(Ze.x,et.y),et,Pt)};let wt=(et.x-Ze.x)*Re;return ke&&et.y<Pt.y&&(wt=-wt),{bearingDelta:wt}},moveStateManager:Ge,enable:ve,assignEvents:Lo})})(r,$),W=(function({enable:ve,clickTolerance:Te,pitchDegreesPerPixelMoved:ke=-.5}){const xe=new ic({checkCorrectEvent:Re=>j.mouseButton(Re)===0&&Re.ctrlKey||j.mouseButton(Re)===2});return new vi({clickTolerance:Te,move:(Re,He)=>({pitchDelta:(He.y-Re.y)*ke}),moveStateManager:xe,enable:ve,assignEvents:Lo})})(r),K=(function({enable:ve,clickTolerance:Te,rollDegreesPerPixelMoved:ke=.3},xe){const Re=new ic({checkCorrectEvent:He=>j.mouseButton(He)===2&&He.ctrlKey});return new vi({clickTolerance:Te,move:(He,Ge)=>{const Ze=xe();let et=(Ge.x-He.x)*ke;return Ge.y<Ze.y&&(et=-et),{rollDelta:et}},moveStateManager:Re,enable:ve,assignEvents:Lo})})(r,$);c.dragRotate=new rh(r,Z,W,K),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",W,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const ne=(function({enable:ve,clickTolerance:Te}){const ke=new ic({checkCorrectEvent:xe=>j.mouseButton(xe)===0&&!xe.ctrlKey});return new vi({clickTolerance:Te,move:(xe,Re)=>({around:Re,panDelta:Re.sub(xe)}),activateOnStart:!0,moveStateManager:ke,enable:ve,assignEvents:Lo})})(r),ue=new sl(r,c);c.dragPan=new ou(f,ne,ue),this._add("mousePan",ne),this._add("touchPan",ue,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const pe=new Xa,me=new Xi;c.touchZoomRotate=new nh(f,me,pe,R),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const ye=c.scrollZoom=new yn(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ye,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const be=c.keyboard=new Ar(c);this._add("keyboard",be),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new xs(c))}_add(r,c,f){this._handlers.push({handlerName:r,handler:c,allowed:f}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!lu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,f){for(const v in r)if(v!==f&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const f of r)this._el.contains(f.target)&&c.push(f);return c}mergeHandlerResult(r,c,f,v,b){if(!f)return;l.e(r,f);const T={handlerName:v,originalEvent:f.originalEvent||b};f.zoomDelta!==void 0&&(c.zoom=T),f.panDelta!==void 0&&(c.drag=T),f.rollDelta!==void 0&&(c.roll=T),f.pitchDelta!==void 0&&(c.pitch=T),f.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},f={};for(const[v,b,T]of this._changes)v.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(v.panDelta)),v.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(r.rollDelta=(r.rollDelta||0)+v.rollDelta),v.around!==void 0&&(r.around=v.around),v.pinchAround!==void 0&&(r.pinchAround=v.pinchAround),v.noInertia&&(r.noInertia=v.noInertia),l.e(c,b),l.e(f,T);this._updateMapTransform(r,c,f),this._changes=[]}_updateMapTransform(r,c,f){const v=this._map,b=v._getTransformForUpdate(),T=v.terrain;if(!(Gr(r)||T&&this._terrainMovement))return this._fireEvents(c,f,!0);v._stop(!0);let{panDelta:O,zoomDelta:R,bearingDelta:L,pitchDelta:$,rollDelta:Z,around:W,pinchAround:K}=r;K!==void 0&&(W=K),W=W||v.transform.centerPoint,T&&!b.isPointOnMapSurface(W)&&(W=b.centerPoint);const ne={panDelta:O,zoomDelta:R,rollDelta:Z,pitchDelta:$,bearingDelta:L,around:W};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(W)&&(W=b.centerPoint);const ue=W.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(O?W.sub(O):W);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,b),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?b.setCenter(b.screenPointToLocation(b.centerPoint.sub(O))):this._map.cameraHelper.handleMapControlsPan(ne,b,ue):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ne,b,ue))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,b),this._map.cameraHelper.handleMapControlsPan(ne,b,ue)),v._applyUpdatedTransform(b),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,f,!0)}_fireEvents(r,c,f){const v=lu(this._eventsInProgress),b=lu(r),T={};for(const Z in r){const{originalEvent:W}=r[Z];this._eventsInProgress[Z]||(T[`${Z}start`]=W),this._eventsInProgress[Z]=r[Z]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const Z in T)this._fireEvent(Z,T[Z]);b&&this._fireEvent("move",b.originalEvent);for(const Z in r){const{originalEvent:W}=r[Z];this._fireEvent(Z,W)}const O={};let R;for(const Z in this._eventsInProgress){const{handlerName:W,originalEvent:K}=this._eventsInProgress[Z];this._handlersById[W].isActive()||(delete this._eventsInProgress[Z],R=c[W]||K,O[`${Z}end`]=R)}for(const Z in O)this._fireEvent(Z,O[Z]);const L=lu(this._eventsInProgress),$=(v||b)&&!L;if($&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Z=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Z.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Z)}if(f&&$){this._updatingCamera=!0;const Z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!Z||!Z.essential&&D.prefersReducedMotion?(this._map.fire(new l.l("moveend",{originalEvent:R})),W(this._map.getBearing())&&this._map.resetNorth()):(W(Z.bearing||this._map.getBearing())&&(Z.bearing=0),Z.freezeElevation=!0,this._map.easeTo(Z,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new l.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((r=>{delete this._frameId,this.handleEvent(new da("renderFrame",{timeStamp:r})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ss extends l.E{constructor(r,c,f){super(),this._renderFrameCallback=()=>{const v=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=f.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new l.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,f){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},c),f)}panTo(r,c,f){return this.easeTo(l.e({center:r},c),f)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,f){return this.easeTo(l.e({zoom:r},c),f)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new l.l("movestart",c)).fire(new l.l("move",c)).fire(new l.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,f){return this.easeTo(l.e({bearing:r},c),f)}resetNorth(r,c){return this.rotateTo(0,l.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(l.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=dr.convert(r).adjustAntiMeridian();const f=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,c)}_cameraForBoxAndBearing(r,c,f,v){const b={top:0,bottom:0,right:0,left:0};if(typeof(v=l.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const L=v.padding;v.padding={top:L,bottom:L,right:L,left:L}}const T=l.e(b,v.padding);v.padding=T;const O=this.transform,R=new dr(r,c);return this.cameraHelper.cameraForBoxAndBearing(v,T,R,f,O)}fitBounds(r,c,f){return this._fitInternal(this.cameraForBounds(r,c),c,f)}fitScreenCoordinates(r,c,f,v,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(l.P.convert(r)),this.transform.screenPointToLocation(l.P.convert(c)),f,v),v,b)}_fitInternal(r,c,f){return r?(delete(c=l.e(r,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(r,c){this.stop();const f=this._getTransformForUpdate();let v=!1,b=!1,T=!1;const O=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,r);const R=f.zoom!==O;return"elevation"in r&&f.elevation!==+r.elevation&&f.setElevation(+r.elevation),"bearing"in r&&f.bearing!==+r.bearing&&(v=!0,f.setBearing(+r.bearing)),"pitch"in r&&f.pitch!==+r.pitch&&(b=!0,f.setPitch(+r.pitch)),"roll"in r&&f.roll!==+r.roll&&(T=!0,f.setRoll(+r.roll)),r.padding==null||f.isPaddingEqual(r.padding)||f.setPadding(r.padding),this._applyUpdatedTransform(f),this.fire(new l.l("movestart",c)).fire(new l.l("move",c)),R&&this.fire(new l.l("zoomstart",c)).fire(new l.l("zoom",c)).fire(new l.l("zoomend",c)),v&&this.fire(new l.l("rotatestart",c)).fire(new l.l("rotate",c)).fire(new l.l("rotateend",c)),b&&this.fire(new l.l("pitchstart",c)).fire(new l.l("pitch",c)).fire(new l.l("pitchend",c)),T&&this.fire(new l.l("rollstart",c)).fire(new l.l("roll",c)).fire(new l.l("rollend",c)),this.fire(new l.l("moveend",c))}calculateCameraOptionsFromTo(r,c,f,v=0){const b=l.a1.fromLngLat(r,c),T=l.a1.fromLngLat(f,v),O=T.x-b.x,R=T.y-b.y,L=T.z-b.z,$=Math.hypot(O,R,L);if($===0)throw new Error("Can't calculate camera options with same From and To");const Z=Math.hypot(O,R),W=l.ak(this.transform.cameraToCenterDistance/$/this.transform.tileSize),K=180*Math.atan2(O,-R)/Math.PI;let ne=180*Math.acos(Z/$)/Math.PI;return ne=L<0?90-ne:90+ne,{center:T.toLngLat(),elevation:v,zoom:W,pitch:ne,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,f,v,b){const T=this.transform.calculateCenterFromCameraLngLatAlt(r,c,f,v);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:f,pitch:v,roll:b}}easeTo(r,c){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.co},r)).animate===!1||!r.essential&&D.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),v=this.getBearing(),b=f.pitch,T=f.roll,O="bearing"in r?this._normalizeBearing(r.bearing,v):v,R="pitch"in r?+r.pitch:b,L="roll"in r?this._normalizeBearing(r.roll,T):T,$="padding"in r?r.padding:f.padding,Z=l.P.convert(r.offset);let W,K;r.around&&(W=l.S.convert(r.around),K=f.locationToScreenPoint(W));const ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ue=this.cameraHelper.handleEaseTo(f,{bearing:O,pitch:R,roll:L,padding:$,around:W,aroundPoint:K,offsetAsPoint:Z,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||v!==O,this._pitching=this._pitching||R!==b,this._rolling=this._rolling||L!==T,this._padding=!f.isPaddingEqual($),this._zooming=this._zooming||ue.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,ne),this.terrain&&this._prepareElevation(ue.elevationCenter),this._ease((pe=>{ue.easeFunc(pe),this.terrain&&!r.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(f),this._fireMoveEvents(c)}),(pe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,pe)}),r),this}_prepareEase(r,c,f={}){this._moving=!0,c||f.moving||this.fire(new l.l("movestart",r)),this._zooming&&!f.zooming&&this.fire(new l.l("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new l.l("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new l.l("pitchstart",r)),this._rolling&&!f.rolling&&this.fire(new l.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(c-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(l.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),f=r.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(f<v){const b=this.calculateCameraOptionsFromTo(c,v,r.center,r.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push((v=>this._elevateCameraIfInsideTerrain(v))),this.transformCameraUpdate&&c.push((v=>this.transformCameraUpdate(v))),!c.length)return;const f=r.clone();for(const v of c){const b=f.clone(),{center:T,zoom:O,roll:R,pitch:L,bearing:$,elevation:Z}=v(b);T&&b.setCenter(T),Z!==void 0&&b.setElevation(Z),O!==void 0&&b.setZoom(O),R!==void 0&&b.setRoll(R),L!==void 0&&b.setPitch(L),$!==void 0&&b.setBearing($),f.apply(b)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new l.l("move",r)),this._zooming&&this.fire(new l.l("zoom",r)),this._rotating&&this.fire(new l.l("rotate",r)),this._pitching&&this.fire(new l.l("pitch",r)),this._rolling&&this.fire(new l.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const f=this._zooming,v=this._rotating,b=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new l.l("zoomend",r)),v&&this.fire(new l.l("rotateend",r)),b&&this.fire(new l.l("pitchend",r)),T&&this.fire(new l.l("rollend",r)),this.fire(new l.l("moveend",r))}flyTo(r,c){if(!r.essential&&D.prefersReducedMotion){const et=l.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(et,c)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.co},r);const f=this._getTransformForUpdate(),v=f.bearing,b=f.pitch,T=f.roll,O=f.padding,R="bearing"in r?this._normalizeBearing(r.bearing,v):v,L="pitch"in r?+r.pitch:b,$="roll"in r?this._normalizeBearing(r.roll,T):T,Z="padding"in r?r.padding:f.padding,W=l.P.convert(r.offset);let K=f.centerPoint.add(W);const ne=f.screenPointToLocation(K),ue=this.cameraHelper.handleFlyTo(f,{bearing:R,pitch:L,roll:$,padding:Z,locationAtOffset:ne,offsetAsPoint:W,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let pe=r.curve;const me=Math.max(f.width,f.height),ye=me/ue.scaleOfZoom,be=ue.pixelPathLength;typeof ue.scaleOfMinZoom=="number"&&(pe=Math.sqrt(me/ue.scaleOfMinZoom/be*2));const ve=pe*pe;function Te(et){const Pt=(ye*ye-me*me+(et?-1:1)*ve*ve*be*be)/(2*(et?ye:me)*ve*be);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function ke(et){return(Math.exp(et)-Math.exp(-et))/2}function xe(et){return(Math.exp(et)+Math.exp(-et))/2}const Re=Te(!1);let He=function(et){return xe(Re)/xe(Re+pe*et)},Ge=function(et){return me*((xe(Re)*(ke(Pt=Re+pe*et)/xe(Pt))-ke(Re))/ve)/be;var Pt},Ze=(Te(!0)-Re)/pe;if(Math.abs(be)<2e-6||!isFinite(Ze)){if(Math.abs(me-ye)<1e-6)return this.easeTo(r,c);const et=ye<me?-1:1;Ze=Math.abs(Math.log(ye/me))/pe,Ge=()=>0,He=Pt=>Math.exp(et*pe*Pt)}return r.duration="duration"in r?+r.duration:1e3*Ze/("screenSpeed"in r?+r.screenSpeed/pe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=v!==R,this._pitching=L!==b,this._rolling=$!==T,this._padding=!f.isPaddingEqual(Z),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ue.targetCenter),this._ease((et=>{const Pt=et*Ze,wt=1/He(Pt),dt=Ge(Pt);this._rotating&&f.setBearing(l.C.number(v,R,et)),this._pitching&&f.setPitch(l.C.number(b,L,et)),this._rolling&&f.setRoll(l.C.number(T,$,et)),this._padding&&(f.interpolatePadding(O,Z,et),K=f.centerPoint.add(W)),ue.easeFunc(et,wt,dt,K),this.terrain&&!r.freezeElevation&&this._updateElevation(et),this._applyUpdatedTransform(f),this._fireMoveEvents(c)}),(()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,c)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,c,f){f.animate===!1||f.duration===0?(r(1),c()):(this._easeStart=D.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=l.aO(r,-180,180);const f=Math.abs(r-c);return Math.abs(r-360-c)<f&&(r-=360),Math.abs(r+360-c)<f&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.S.convert(r),this.transform.tileZoom):null}}const ll={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ih{constructor(r=ll){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=j.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=j.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const f=this._map._getUIString(`AttributionControl.${c}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map((v=>typeof v!="string"?"":v))):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.sourceCaches;for(const v in c){const b=c[v];if(b.used||b.usedForTerrain){const T=b.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter((v=>String(v).trim())),r.sort(((v,b)=>v.length-b.length)),r=r.filter(((v,b)=>{for(let T=b+1;T<r.length;T++)if(r[T].indexOf(v)>=0)return!1;return!0}));const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=j.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ah{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const f=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=j.create("div","maplibregl-ctrl");const c=j.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){j.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class cl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(const v of f)if(v.id===r)return void(v.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const f of c)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var cf=l.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class fa extends l.E{constructor(r){super(),this._lastTilesetChange=D.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const f={};for(const v of Ne(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))f[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),l.bY(v.terrainRttPosMatrix32f,0,l.$,l.$,0,0,1),this._tiles[v.key]=new Co(v,this.tileSize),this._lastTilesetChange=D.now());for(const v in this._tiles)f[v]||delete this._tiles[v]}freeRtt(r){for(const c in this._tiles){const f=this._tiles[c];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((r=>this.getTileByID(r)))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const f of this._renderableTilesKeys){const v=this._tiles[f].tileID,b=r.clone(),T=l.ba();if(v.canonical.equals(r.canonical))l.bY(T,0,l.$,l.$,0,0,1);else if(v.canonical.isChildOf(r.canonical)){const O=v.canonical.z-r.canonical.z,R=v.canonical.x-(v.canonical.x>>O<<O),L=v.canonical.y-(v.canonical.y>>O<<O),$=l.$>>O;l.bY(T,0,$,$,0,0,1),l.M(T,T,[-R*$,-L*$,0])}else{if(!r.canonical.isChildOf(v.canonical))continue;{const O=r.canonical.z-v.canonical.z,R=r.canonical.x-(r.canonical.x>>O<<O),L=r.canonical.y-(r.canonical.y>>O<<O),$=l.$>>O;l.bY(T,0,l.$,l.$,0,0,1),l.M(T,T,[R*$,L*$,0]),l.N(T,T,[1/2**O,1/2**O,0])}}b.terrainRttPosMatrix32f=new Float32Array(T),c[f]=b}return c}_getTerrainCoordsForTileRanges(r,c){const f={};for(const v of this._renderableTilesKeys){const b=this._tiles[v].tileID;if(!this._isWithinTileRanges(b,c))continue;const T=r.clone(),O=l.ba();if(b.canonical.z===r.canonical.z){const R=r.canonical.x-b.canonical.x,L=r.canonical.y-b.canonical.y;l.bY(O,0,l.$,l.$,0,0,1),l.M(O,O,[R*l.$,L*l.$,0])}else if(b.canonical.z>r.canonical.z){const R=b.canonical.z-r.canonical.z,L=b.canonical.x-(b.canonical.x>>R<<R),$=b.canonical.y-(b.canonical.y>>R<<R),Z=r.canonical.x-(b.canonical.x>>R),W=r.canonical.y-(b.canonical.y>>R),K=l.$>>R;l.bY(O,0,K,K,0,0,1),l.M(O,O,[-L*K+Z*l.$,-$*K+W*l.$,0])}else{const R=r.canonical.z-b.canonical.z,L=r.canonical.x-(r.canonical.x>>R<<R),$=r.canonical.y-(r.canonical.y>>R<<R),Z=(r.canonical.x>>R)-b.canonical.x,W=(r.canonical.y>>R)-b.canonical.y,K=l.$<<R;l.bY(O,0,K,K,0,0,1),l.M(O,O,[L*l.$+Z*K,$*l.$+W*K,0])}T.terrainRttPosMatrix32f=new Float32Array(O),f[v]=T}return f}getSourceTile(r,c){const f=this.sourceCache._source;let v=r.overscaledZ-this.deltaZoom;if(v>f.maxzoom&&(v=f.maxzoom),v<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(v).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!b||!b.dem)&&c)for(;v>=f.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(r.scaledTo(v--).key);return b}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class ul{constructor(r,c,f){this._meshCache={},this.painter=r,this.sourceCache=new fa(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,f,v=l.$){var b;if(!(c>=0&&c<v&&f>=0&&f<v))return 0;const T=this.getTerrainData(r),O=(b=T.tile)===null||b===void 0?void 0:b.dem;if(!O)return 0;const R=l.cs([],[c/v*l.$,f/v*l.$],T.u_terrain_matrix),L=[R[0]*O.dim,R[1]*O.dim],$=Math.floor(L[0]),Z=Math.floor(L[1]),W=L[0]-$,K=L[1]-Z;return O.get($,Z)*(1-W)*(1-K)+O.get($+1,Z)*W*(1-K)+O.get($,Z+1)*(1-W)*K+O.get($+1,Z+1)*W*K}getElevationForLngLatZoom(r,c){if(!l.ct(c,r.wrap()))return 0;const{tileID:f,mercatorX:v,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(f,v%l.$,b%l.$,l.$)}getElevation(r,c,f,v=l.$){return this.getDEMElevation(r,c,f,v)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const v=this.painter.context,b=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l.T(v,b,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l.T(v,new l.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ag([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new l.T(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const f=c&&c+c.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const v=this.sourceCache.sourceCache._source.maxzoom;let b=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=v?b=r.canonical.z-v:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>b<<b),O=r.canonical.y-(r.canonical.y>>b<<b),R=l.cu(new Float64Array(16),[1/(l.$<<b),1/(l.$<<b),0]);l.M(R,R,[T*l.$,O*l.$,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,f=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l.T(c.context,{width:f,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l.T(c.context,{width:f,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,v))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,T=0;b<this._coordsTextureSize;b++)for(let O=0;O<this._coordsTextureSize;O++,T+=4)c[T+0]=255&O,c[T+1]=255&b,c[T+2]=O>>8<<4|b>>8,c[T+3]=0;const f=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new l.T(r,f,r.gl.RGBA,{premultiply:!1});return v.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),f=this.painter.context,v=f.gl,b=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(b,O-T-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);const R=c[0]+(c[2]>>4<<8),L=c[1]+((15&c[2])<<8),$=this.coordsIndex[255-c[3]],Z=$&&this.sourceCache.getTileByID($);if(!Z)return null;const W=this._coordsTextureSize,K=(1<<Z.tileID.canonical.z)*W;return new l.a1((Z.tileID.canonical.x*W+R)/K+Z.tileID.wrap,(Z.tileID.canonical.y*W+L)/K,this.getElevation(Z.tileID,R,L,W))}depthAtPoint(r){const c=new Uint8Array(4),f=this.painter.context,v=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const f=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,v=f&&r.canonical.y===0,b=f&&r.canonical.y===(1<<r.canonical.z)-1,T=`m_${v?"n":""}_${b?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const O=this.painter.context,R=new l.cv,L=new l.aN,$=this.meshSize,Z=l.$/$,W=$*$;for(let xe=0;xe<=$;xe++)for(let Re=0;Re<=$;Re++)R.emplaceBack(Re*Z,xe*Z,0);for(let xe=0;xe<W;xe+=$+1)for(let Re=0;Re<$;Re++)L.emplaceBack(Re+xe,$+Re+xe+1,$+Re+xe+2),L.emplaceBack(Re+xe,$+Re+xe+2,Re+xe+1);const K=R.length,ne=K+($+1),ue=($+1)*$,pe=v?l.bh:0,me=v?0:1,ye=b?l.bi:l.$,be=b?0:1;for(let xe=0;xe<=$;xe++)R.emplaceBack(xe*Z,pe,me);for(let xe=0;xe<=$;xe++)R.emplaceBack(xe*Z,ye,be);for(let xe=0;xe<$;xe++)L.emplaceBack(ue+xe,ne+xe,ne+xe+1),L.emplaceBack(ue+xe,ne+xe+1,ue+xe+1),L.emplaceBack(0+xe,K+xe+1,K+xe),L.emplaceBack(0+xe,0+xe+1,K+xe+1);const ve=R.length,Te=ve+2*($+1);for(const xe of[0,1])for(let Re=0;Re<=$;Re++)for(const He of[0,1])R.emplaceBack(xe*l.$,Re*Z,He);for(let xe=0;xe<2*$;xe+=2)L.emplaceBack(ve+xe,ve+xe+1,ve+xe+3),L.emplaceBack(ve+xe,ve+xe+3,ve+xe+2),L.emplaceBack(Te+xe,Te+xe+3,Te+xe+1),L.emplaceBack(Te+xe,Te+xe+2,Te+xe+3);const ke=new Mo(O.createVertexBuffer(R,cf.members),O.createIndexBuffer(L),l.aM.simpleSegment(0,0,R.length,L.length));return this._meshCache[T]=ke,ke}getMeshFrameDelta(r){return 2*Math.PI*l.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var f;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(f=this.getMinMaxElevation(v).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,c){const f=l.a1.fromLngLat(r.wrap()),v=(1<<c)*l.$,b=f.x*v,T=f.y*v,O=Math.floor(b/l.$),R=Math.floor(T/l.$);return{tileID:new l.Z(c,0,c,O,R),mercatorX:b,mercatorY:T}}}class jt{constructor(r,c,f){this._context=r,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new l.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:r,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>r.id!==c)),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((r=>!r.inUse))===!1}}const Vt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ac{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new jt(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter((f=>!r._layers[f].isHidden(c))),this._coordsAscending={};for(const f in r.sourceCaches){this._coordsAscending[f]={};const v=r.sourceCaches[f].getVisibleCoordinates(),b=r.sourceCaches[f].getSource(),T=b instanceof Kn?b.terrainTileRanges:null;for(const O of v){const R=this.terrain.sourceCache.getTerrainCoords(O,T);for(const L in R)this._coordsAscending[f][L]||(this._coordsAscending[f][L]=[]),this._coordsAscending[f][L].push(R[L])}}this._coordsAscendingStr={};for(const f of r._order){const v=r._layers[f],b=v.source;if(Vt[v.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const T in this._coordsAscending[b])this._coordsAscendingStr[b][T]=this._coordsAscending[b][T].map((O=>O.key)).sort().join()}}for(const f of this._renderableTiles)for(const v in this._coordsAscendingStr){const b=this._coordsAscendingStr[v][f.tileID.key];b&&b!==f.rttCoords[v]&&(f.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),v=r.type,b=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Vt[v]&&(this._prevType&&Vt[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(r.id),!T))return!0;if(Vt[this._prevType]||Vt[v]&&T){this._prevType=v;const O=this._stacks.length-1,R=this._stacks[O]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(Tn(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[O]){const Z=this.pool.getObjectForId(L.rtt[O].id);if(Z.stamp===L.rtt[O].stamp){this.pool.useObject(Z);continue}}const $=this.pool.getOrCreateFreeObject();this.pool.useObject($),this.pool.stampObject($),L.rtt[O]={id:$.id,stamp:$.stamp},b.context.bindFramebuffer.set($.fbo.framebuffer),b.context.clear({color:l.bf.transparent,stencil:0}),b.currentStencilSource=void 0;for(let Z=0;Z<R.length;Z++){const W=b.style._layers[R[Z]],K=W.source?this._coordsAscending[W.source][L.tileID.key]:[L.tileID];b.context.viewport.set([0,0,$.fbo.width,$.fbo.height]),b._renderTileClippingMasks(W,K,!0),b.renderLayer(b,b.style.sourceCaches[W.source],W,K,f),W.source&&(L.rttCoords[W.source]=this._coordsAscendingStr[W.source][L.tileID.key])}}return Tn(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),Vt[v]}return!1}}const cu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},oc=P,jn={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ll,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},pa={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class di{constructor(r,c,f=!1){this.mousedown=b=>{this.startMove(b,j.mousePos(this.element,b)),j.addEventListener(window,"mousemove",this.mousemove),j.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,j.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),j.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const v=new ws;this._rotatePitchHandler=new vi({clickTolerance:3,move:(b,T)=>{const O=c.getBoundingClientRect(),R=new l.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:l.cn(new l.P(b.x,T.y),T,R),pitchDelta:f?-.5*(T.y-b.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=r,j.addEventListener(c,"mousedown",this.mousedown),j.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHandler.dragStart(r,c),j.disableDrag()}move(r,c){const f=this.map,{bearingDelta:v,pitchDelta:b}=this._rotatePitchHandler.dragMove(r,c)||{};v&&f.setBearing(f.getBearing()+v),b&&f.setPitch(f.getPitch()+b)}off(){const r=this.element;j.removeEventListener(r,"mousedown",this.mousedown),j.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend),j.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){j.enableDrag(),j.removeEventListener(window,"mousemove",this.mousemove),j.removeEventListener(window,"mouseup",this.mouseup),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend)}}let No;function hl(_,r,c,f=!1){if(f||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return _?.wrap();const v=new l.S(_.lng,_.lat);if(_=new l.S(_.lng,_.lat),r){const b=new l.S(_.lng-360,_.lat),T=new l.S(_.lng+360,_.lat),O=c.locationToScreenPoint(_).distSqr(r);c.locationToScreenPoint(b).distSqr(r)<O?_=b:c.locationToScreenPoint(T).distSqr(r)<O&&(_=T)}for(;Math.abs(_.lng-c.center.lng)>180;){const b=c.locationToScreenPoint(_);if(b.x>=0&&b.y>=0&&b.x<=c.width&&b.y<=c.height)break;_.lng>c.center.lng?_.lng-=360:_.lng+=360}return _.lng!==v.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(_))?_:v}const Ur={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Jr(_,r,c){const f=_.classList;for(const v in Ur)f.remove(`maplibregl-${c}-anchor-${v}`);f.add(`maplibregl-${c}-anchor-${r}`)}class sc extends l.E{constructor(r){if(super(),this._onKeyPress=c=>{const f=c.code,v=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{const f=c.originalEvent.target,v=this._element;this._popup&&(f===v||v.contains(f))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=hl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,`${Ur[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${v}`),D.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.l("dragstart"))),this.fire(new l.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div");const c=j.createNS("http://www.w3.org/2000/svg","svg"),f=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${f}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${f}`);const b=j.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const T=j.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const O=j.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of R){const ye=j.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",me.rx),ye.setAttributeNS(null,"ry",me.ry),O.appendChild(ye)}const L=j.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const $=j.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild($);const Z=j.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"opacity","0.25"),Z.setAttributeNS(null,"fill","#000000");const W=j.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Z.appendChild(W);const K=j.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const ne=j.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ue=j.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#000000"),ue.setAttributeNS(null,"opacity","0.25"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962");const pe=j.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),ne.appendChild(ue),ne.appendChild(pe),T.appendChild(O),T.appendChild(L),T.appendChild(Z),T.appendChild(K),T.appendChild(ne),c.appendChild(T),c.setAttributeNS(null,"height",f*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),Jr(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const v=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,f;const v=(c=this._map)===null||c===void 0?void 0:c.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!v||b){const K=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const T=this._map,O=T.terrain.depthAtPoint(this._pos),R=T.terrain.getElevationForLngLatZoom(this._lngLat,T.transform.tileZoom);if(T.transform.lngLatToCameraDepth(this._lngLat,R)-O<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/T.transform.pixelsPerMeter,$=Math.sin(T.getPitch()*Math.PI/180)*L,Z=T.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),W=T.transform.lngLatToCameraDepth(this._lngLat,R+$)-Z>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&W&&this._popup.remove(),this._element.style.opacity=W?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const lc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ji=0,Ji=!1;const cc={maxWidth:100,unit:"metric"};function uu(_,r,c){const f=c&&c.maxWidth||100,v=_._container.clientHeight/2,b=_._container.clientWidth/2,T=_.unproject([b-f/2,v]),O=_.unproject([b+f/2,v]),R=Math.round(_.project(O).x-_.project(T).x),L=Math.min(f,R,_._container.clientWidth),$=T.distanceTo(O);if(c&&c.unit==="imperial"){const Z=3.2808*$;Z>5280?Ia(r,L,Z/5280,_._getUIString("ScaleControl.Miles")):Ia(r,L,Z,_._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ia(r,L,$/1852,_._getUIString("ScaleControl.NauticalMiles")):$>=1e3?Ia(r,L,$/1e3,_._getUIString("ScaleControl.Kilometers")):Ia(r,L,$,_._getUIString("ScaleControl.Meters"))}function Ia(_,r,c,f){const v=(function(b){const T=Math.pow(10,`${Math.floor(b)}`.length-1);let O=b/T;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(R){const L=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*L)/L})(O),T*O})(c);_.style.width=r*(v/c)+"px",_.innerHTML=`${v}&nbsp;${f}`}const oh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},dl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ma(_){if(_){if(typeof _=="number"){const r=Math.round(Math.abs(_)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,_),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-_),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(_,0),right:new l.P(-_,0)}}if(_ instanceof l.P||Array.isArray(_)){const r=l.P.convert(_);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(_.center||[0,0]),top:l.P.convert(_.top||[0,0]),"top-left":l.P.convert(_["top-left"]||[0,0]),"top-right":l.P.convert(_["top-right"]||[0,0]),bottom:l.P.convert(_.bottom||[0,0]),"bottom-left":l.P.convert(_["bottom-left"]||[0,0]),"bottom-right":l.P.convert(_["bottom-right"]||[0,0]),left:l.P.convert(_.left||[0,0]),right:l.P.convert(_.right||[0,0])}}return ma(new l.P(0,0))}const fl=P;p.AJAXError=l.cz,p.Event=l.l,p.Evented=l.E,p.LngLat=l.S,p.MercatorCoordinate=l.a1,p.Point=l.P,p.addProtocol=l.cA,p.config=l.a,p.removeProtocol=l.cB,p.AttributionControl=ih,p.BoxZoomHandler=yi,p.CanvasSource=On,p.CooperativeGesturesHandler=su,p.DoubleClickZoomHandler=ka,p.DragPanHandler=ou,p.DragRotateHandler=rh,p.EdgeInsets=co,p.FullscreenControl=class extends l.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){j.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=j.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);j.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=qn,p.GeolocateControl=class extends l.E{constructor(_){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new l.S(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,v=this._map.getBearing(),b=l.e({bearing:v},this.options.fitBoundsOptions),T=dr.fromLngLat(c,f);this._map.fitBounds(T,b,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new l.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ji)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this._geolocateButton=j.create("button","maplibregl-ctrl-geolocate",this._container),j.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new sc({element:this._dotElement}),this._circleElement=j.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const f=c?.[0]instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.l("trackuserlocationend")),this.fire(new l.l("userlocationlostfocus")))}))}},this.options=l.e({},lc,_)}onAdd(_){return this._map=_,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return l._(this,arguments,void 0,(function*(r=!1){if(No!==void 0&&!r)return No;if(window.navigator.permissions===void 0)return No=!!window.navigator.geolocation,No;try{No=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{No=!!window.navigator.geolocation}return No}))})().then((r=>this._finishSetupUI(r))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,ji=0,Ji=!1}_isOutOfMapMaxBounds(_){const r=this._map.getMaxBounds(),c=_.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const _=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&_))return;const r=this._map.project(_),c=this._map.unproject([r.x+100,r.y]),f=_.distanceTo(c)/100,v=2*this._accuracy/f;this._circleElement.style.width=`${v.toFixed(2)}px`,this._circleElement.style.height=`${v.toFixed(2)}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ji--,Ji=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.l("trackuserlocationstart")),this.fire(new l.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ji++,ji>1?(_={maximumAge:6e5,timeout:0},Ji=!0):(_=this.options.positionOptions,Ji=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;const r=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=j.create("button","maplibregl-ctrl-globe",this._container),j.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},p.Hash=tl,p.ImageSource=Kn,p.KeyboardHandler=Ar,p.LngLatBounds=dr,p.LogoControl=ah,p.Map=class extends Ss{constructor(_){var r,c;l.cw.mark(l.cx.create);const f=Object.assign(Object.assign(Object.assign({},jn),_),{canvasContextAttributes:Object.assign(Object.assign({},jn.canvasContextAttributes),_.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new tn,b=new hi;if(f.minZoom!==void 0&&v.setMinZoom(f.minZoom),f.maxZoom!==void 0&&v.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&v.setMinPitch(f.minPitch),f.maxPitch!==void 0&&v.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&v.setRenderWorldCopies(f.renderWorldCopies),super(v,b,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new cl,this._controls=[],this._mapId=l.a7(),this._contextLost=O=>{O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},cu),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=le.addThrottleControl((()=>this.isMoving())),this._requestManager=new Y(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let O=!1;const R=tu((L=>{this._trackResize&&!this._removed&&(this.resize(L),this.redraw())}),50);this._resizeObserver=new ResizeObserver((L=>{O?R(L):O=!0})),this._resizeObserver.observe(this._container)}this.handlers=new tm(this,f),this._hash=f.hash&&new tl(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,l.e({},f.fitBoundsOptions,{duration:0}))));const T=typeof f.style=="string"||((c=(r=f.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new ih(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new ah,f.logoPosition),this.on("style.load",(()=>{if(T||this._resizeTransform(),this.transform.unmodified){const O=l.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}})),this.on("data",(O=>{this._update(O.dataType==="style"),this.fire(new l.l(`${O.dataType}data`,O))})),this.on("dataloading",(O=>{this.fire(new l.l(`${O.dataType}dataloading`,O))})),this.on("dataabort",(O=>{this.fire(new l.l("sourcedataabort",O))}))}_getMapId(){return this._mapId}setGlobalStateProperty(_,r){return this.style.setGlobalStateProperty(_,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(_,r){if(r===void 0&&(r=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new l.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=_.onAdd(this);this._controls.push(_);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new l.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(_);return r>-1&&this._controls.splice(r,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}coveringTiles(_){return Ne(this.transform,_)}calculateCameraOptionsFromTo(_,r,c,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,r,c,f)}resize(_,r=!0){const[c,f]=this._containerDimensions(),v=this._getClampedPixelRatio(c,f);if(this._resizeCanvas(c,f,v),this.painter.resize(c,f,v),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const O=this._getClampedPixelRatio(c,f);this._resizeCanvas(c,f,O),this.painter.resize(c,f,O)}this._resizeTransform(r);const b=!this._moving;return b&&(this.stop(),this.fire(new l.l("movestart",_)).fire(new l.l("move",_))),this.fire(new l.l("resize",_)),b&&this.fire(new l.l("moveend",_)),this}_resizeTransform(_=!0){var r;const[c,f]=this._containerDimensions();this.transform.resize(c,f,_),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,f,_)}_getClampedPixelRatio(_,r){const{0:c,1:f}=this._maxCanvasSize,v=this.getPixelRatio(),b=_*v,T=r*v;return Math.min(b>c?c/b:1,T>f?f/T:1)*v}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(dr.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}project(_){return this.transform.locationToScreenPoint(l.S.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(l.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,r,c){if(_==="mouseenter"||_==="mouseover"){let f=!1;return{layers:r,listener:c,delegates:{mousemove:b=>{const T=r.filter((R=>this.getLayer(R))),O=T.length!==0?this.queryRenderedFeatures(b.point,{layers:T}):[];O.length?f||(f=!0,c.call(this,new Ir(_,this,b.originalEvent,{features:O}))):f=!1},mouseout:()=>{f=!1}}}}if(_==="mouseleave"||_==="mouseout"){let f=!1;return{layers:r,listener:c,delegates:{mousemove:T=>{const O=r.filter((R=>this.getLayer(R)));(O.length!==0?this.queryRenderedFeatures(T.point,{layers:O}):[]).length?f=!0:f&&(f=!1,c.call(this,new Ir(_,this,T.originalEvent)))},mouseout:T=>{f&&(f=!1,c.call(this,new Ir(_,this,T.originalEvent)))}}}}{const f=v=>{const b=r.filter((O=>this.getLayer(O))),T=b.length!==0?this.queryRenderedFeatures(v.point,{layers:b}):[];T.length&&(v.features=T,c.call(this,v),delete v.features)};return{layers:r,listener:c,delegates:{[_]:f}}}}_saveDelegatedListener(_,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(r)}_removeDelegatedListener(_,r,c){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const f=this._delegatedListeners[_];for(let v=0;v<f.length;v++){const b=f[v];if(b.listener===c&&b.layers.length===r.length&&b.layers.every((T=>r.includes(T)))){for(const T in b.delegates)this.off(T,b.delegates[T]);return void f.splice(v,1)}}}on(_,r,c){if(c===void 0)return super.on(_,r);const f=typeof r=="string"?[r]:r,v=this._createDelegatedListener(_,f,c);this._saveDelegatedListener(_,v);for(const b in v.delegates)this.on(b,v.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(_,f,c)}}}once(_,r,c){if(c===void 0)return super.once(_,r);const f=typeof r=="string"?[r]:r,v=this._createDelegatedListener(_,f,c);for(const b in v.delegates){const T=v.delegates[b];v.delegates[b]=(...O)=>{this._removeDelegatedListener(_,f,c),T(...O)}}this._saveDelegatedListener(_,v);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(_,r,c){return c===void 0?super.off(_,r):(this._removeDelegatedListener(_,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(_,r){if(!this.style)return[];let c;const f=_ instanceof l.P||Array.isArray(_),v=f?_:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:_)||{},v instanceof l.P||typeof v[0]=="number")c=[l.P.convert(v)];else{const b=l.P.convert(v[0]),T=l.P.convert(v[1]);c=[b,new l.P(T.x,b.y),T,new l.P(b.x,T.y),b]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(_,r){return this.style.querySourceFeatures(_,r)}setStyle(_,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(_,r))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const r=this._locale[_];if(r==null)throw new Error(`Missing UI string '${_}'`);return r}_updateStyle(_,r){var c,f;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(_,r)));const v=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Nh(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,r,v):this.style.loadJSON(_,r,v),this):((f=(c=this.style)===null||c===void 0?void 0:c.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Nh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,r){if(typeof _=="string"){const c=this._requestManager.transformRequest(_,"Style");l.j(c,new AbortController).then((f=>{this._updateDiff(f.data,r)})).catch((f=>{f&&this.fire(new l.k(f))}))}else typeof _=="object"&&this._updateDiff(_,r)}_updateDiff(_,r){try{this.style.setState(_,r)&&this._update(!0)}catch(c){l.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(_,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(_,r){return this._lazyInitEmptyStyle(),this.style.addSource(_,r),this._update(!0)}isSourceLoaded(_){const r=this.style&&this.style.sourceCaches[_];if(r!==void 0)return r.loaded();this.fire(new l.k(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const r=this.style.sourceCaches[_.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const f=this.style._layers[c];f.type==="hillshade"&&f.source===_.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===_.source&&l.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ul(this.painter,r,_),this.painter.renderToTexture=new ac(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var f;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=c.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new l.l("terrain",{terrain:_})),this}getTerrain(){var _,r;return(r=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const r in _){const c=_[r]._tiles;for(const f in c){const v=c[f];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,r,c){if(c){const f=this.getSource(c);if(!f)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);f.calculateTileZoom=gt(Math.max(1,_),Math.max(1,r))}else for(const f in this.style.sourceCaches)this.style.sourceCaches[f].getSource().calculateTileZoom=gt(Math.max(1,_),Math.max(1,r));return this._update(!0),this}refreshTiles(_,r){const c=this.style.sourceCaches[_];if(!c)throw new Error(`There is no source cache with ID "${_}", cannot refresh tile`);r===void 0?c.reload(!0):c.refreshTiles(r.map((f=>new l.a4(f.z,f.x,f.y))))}addImage(_,r,c={}){const{pixelRatio:f=1,sdf:v=!1,stretchX:b,stretchY:T,content:O,textFitWidth:R,textFitHeight:L}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:$,height:Z,data:W}=r,K=r;return this.style.addImage(_,{data:new l.R({width:$,height:Z},new Uint8Array(W)),pixelRatio:f,stretchX:b,stretchY:T,content:O,textFitWidth:R,textFitHeight:L,sdf:v,version:0,userImage:K}),K.onAdd&&K.onAdd(this,_),this}}{const{width:$,height:Z,data:W}=D.getImageData(r);this.style.addImage(_,{data:new l.R({width:$,height:Z},W),pixelRatio:f,stretchX:b,stretchY:T,content:O,textFitWidth:R,textFitHeight:L,sdf:v,version:0})}}updateImage(_,r){const c=this.style.getImage(_);if(!c)return this.fire(new l.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||l.b(r)?D.getImageData(r):r,{width:v,height:b,data:T}=f;if(v===void 0||b===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||b!==c.data.height)return this.fire(new l.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(r instanceof HTMLImageElement||l.b(r));return c.data.replace(T,O),this.style.updateImage(_,c),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new l.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return le.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,r){return this._lazyInitEmptyStyle(),this.style.addLayer(_,r),this._update(!0)}moveLayer(_,r){return this.style.moveLayer(_,r),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,r,c){return this.style.setLayerZoomRange(_,r,c),this._update(!0)}setFilter(_,r,c={}){return this.style.setFilter(_,r,c),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,r,c,f={}){return this.style.setPaintProperty(_,r,c,f),this._update(!0)}getPaintProperty(_,r){return this.style.getPaintProperty(_,r)}setLayoutProperty(_,r,c,f={}){return this.style.setLayoutProperty(_,r,c,f),this._update(!0)}getLayoutProperty(_,r){return this.style.getLayoutProperty(_,r)}setGlyphs(_,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,r,c,(f=>{f||this._update(!0)})),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,r,(c=>{c||this._update(!0)})),this}setLight(_,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,r){return this.style.setFeatureState(_,r),this._update()}removeFeatureState(_,r){return this.style.removeFeatureState(_,r),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,r=0;return this._container&&(_=this._container.clientWidth||400,r=this._container.clientHeight||300),[_,r]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const r=this._canvasContainer=j.create("div","maplibregl-canvas-container",_);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=j.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),f=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],f);const v=this._controlContainer=j.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((T=>{b[T]=j.create("div",`maplibregl-ctrl-${T} `,v)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,r,c){this._canvas.width=Math.floor(c*_),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",(f=>{r={requestedAttributes:_},f&&(r.statusMessage=f.statusMessage,r.type=f.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!c){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Ea(c,this.transform),G.testSupport(c)}migrateProjection(_,r){super.migrateProjection(_,r),this.painter.transform=_,this.fire(new l.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var r,c,f,v,b;const T=this._idleTriggered?this._fadeDuration:0,O=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Z=this.transform.zoom,W=D.now();this.style.zoomHistory.update(Z,W);const K=new l.F(Z,{now:W,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ne=K.crossFadingFactor();ne===1&&ne===this._crossFadingFactor||(R=!0,this._crossFadingFactor=ne),this.style.update(K)}const L=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==O;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||L)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,L),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new l.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.cw.mark(l.cx.load),this.fire(new l.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const $=this._sourcesDirty||this._styleDirty||this._placementDirty;return $||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.l("idle")),!this._loaded||this._fullyLoaded||$||(this._fullyLoaded=!0,l.cw.mark(l.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),le.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),j.remove(this._canvasContainer),j.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),l.cw.clearMetrics(),this._removed=!0,this.fire(new l.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,D.frame(this._frameRequest,(_=>{l.cw.frame(_),this._frameRequest=null;try{this._render(_)}catch(r){if(!l.cy(r)&&!(function(c){return c.message===Xc})(r))throw r}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return oc}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},p.MapMouseEvent=Ir,p.MapTouchEvent=ha,p.MapWheelEvent=oi,p.Marker=sc,p.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const f=this._map._getUIString(`NavigationControl.${c}`);r.title=f,r.setAttribute("aria-label",f)},this.options=l.e({},pa,_),this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(r=>this._map.zoomIn({},{originalEvent:r}))),j.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(r=>this._map.zoomOut({},{originalEvent:r}))),j.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})})),this._compassIcon=j.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new di(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,r){const c=j.create("button",_,this._container);return c.type="button",c.addEventListener("click",r),c}},p.Popup=class extends l.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=j.create("div","maplibregl-popup",this._map.getContainer()),this._tip=j.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=hl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const v=ma(this.options.offset);if(!f){const T=this._container.offsetWidth,O=this._container.offsetHeight;let R;R=c.y+v.bottom.y<O?["top"]:c.y>this._map.transform.height-O?["bottom"]:[],c.x<T/2?R.push("left"):c.x>this._map.transform.width-T/2&&R.push("right"),f=R.length===0?"bottom":R.join("-")}let b=c.add(v[f]);this.options.subpixelPositioning||(b=b.round()),j.setTransform(this._container,`${Ur[f]} translate(${b.x}px,${b.y}px)`),Jr(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(oh),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=l.S.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const r=document.createDocumentFragment(),c=document.createElement("body");let f;for(c.innerHTML=_;f=c.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=j.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(dl);_&&_.focus()}},p.RasterDEMTileSource=vn,p.RasterTileSource=Zr,p.ScaleControl=class{constructor(_){this._onMove=()=>{uu(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,uu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},cc),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=yn,p.Style=Nh,p.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=j.create("button","maplibregl-ctrl-terrain",this._container),j.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){j.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=Ma,p.TwoFingersTouchRotateHandler=Xa,p.TwoFingersTouchZoomHandler=Xi,p.TwoFingersTouchZoomRotateHandler=nh,p.VectorTileSource=qr,p.VideoSource=ki,p.addSourceType=(_,r)=>l._(void 0,void 0,void 0,(function*(){if(oa(_))throw new Error(`A source type called "${_}" already exists.`);((c,f)=>{ni[c]=f})(_,r)})),p.clearPrewarmedResources=function(){const _=yt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(ut),yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.createTileMesh=Nl,p.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return ao().getRTLTextPluginStatus()},p.getVersion=function(){return fl},p.getWorkerCount=function(){return Ae.workerCount},p.getWorkerUrl=function(){return l.a.WORKER_URL},p.importScriptInWorkers=function(_){return er().broadcast("IS",_)},p.prewarm=function(){$t().acquire(ut)},p.setMaxParallelImageRequests=function(_){l.a.MAX_PARALLEL_IMAGE_REQUESTS=_},p.setRTLTextPlugin=function(_,r){return ao().setRTLTextPlugin(_,r)},p.setWorkerCount=function(_){Ae.workerCount=_},p.setWorkerUrl=function(_){l.a.WORKER_URL=_}}));var m=i;return m}))})($y)),$y.exports}var e4=QL();const dT=mn(e4);var h0,fT;function To(){if(fT)return h0;fT=1;var e=Array.isArray;return h0=e,h0}var d0,pT;function gR(){if(pT)return d0;pT=1;var e=typeof Py=="object"&&Py&&Py.Object===Object&&Py;return d0=e,d0}var f0,mT;function Ec(){if(mT)return f0;mT=1;var e=gR(),t=typeof self=="object"&&self&&self.Object===Object&&self,i=e||t||Function("return this")();return f0=i,f0}var p0,gT;function Rg(){if(gT)return p0;gT=1;var e=Ec(),t=e.Symbol;return p0=t,p0}var m0,yT;function t4(){if(yT)return m0;yT=1;var e=Rg(),t=Object.prototype,i=t.hasOwnProperty,a=t.toString,u=e?e.toStringTag:void 0;function m(p){var l=i.call(p,u),P=p[u];try{p[u]=void 0;var A=!0}catch{}var E=a.call(p);return A&&(l?p[u]=P:delete p[u]),E}return m0=m,m0}var g0,vT;function r4(){if(vT)return g0;vT=1;var e=Object.prototype,t=e.toString;function i(a){return t.call(a)}return g0=i,g0}var y0,_T;function Du(){if(_T)return y0;_T=1;var e=Rg(),t=t4(),i=r4(),a="[object Null]",u="[object Undefined]",m=e?e.toStringTag:void 0;function p(l){return l==null?l===void 0?u:a:m&&m in Object(l)?t(l):i(l)}return y0=p,y0}var v0,xT;function zu(){if(xT)return v0;xT=1;function e(t){return t!=null&&typeof t=="object"}return v0=e,v0}var _0,bT;function Lp(){if(bT)return _0;bT=1;var e=Du(),t=zu(),i="[object Symbol]";function a(u){return typeof u=="symbol"||t(u)&&e(u)==i}return _0=a,_0}var x0,wT;function JS(){if(wT)return x0;wT=1;var e=To(),t=Lp(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function u(m,p){if(e(m))return!1;var l=typeof m;return l=="number"||l=="symbol"||l=="boolean"||m==null||t(m)?!0:a.test(m)||!i.test(m)||p!=null&&m in Object(p)}return x0=u,x0}var b0,ST;function Mh(){if(ST)return b0;ST=1;function e(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}return b0=e,b0}var w0,PT;function QS(){if(PT)return w0;PT=1;var e=Du(),t=Mh(),i="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",m="[object Proxy]";function p(l){if(!t(l))return!1;var P=e(l);return P==a||P==u||P==i||P==m}return w0=p,w0}var S0,TT;function n4(){if(TT)return S0;TT=1;var e=Ec(),t=e["__core-js_shared__"];return S0=t,S0}var P0,AT;function i4(){if(AT)return P0;AT=1;var e=n4(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function i(a){return!!t&&t in a}return P0=i,P0}var T0,CT;function yR(){if(CT)return T0;CT=1;var e=Function.prototype,t=e.toString;function i(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return T0=i,T0}var A0,ET;function a4(){if(ET)return A0;ET=1;var e=QS(),t=i4(),i=Mh(),a=yR(),u=/[\\^$.*+?()[\]{}|]/g,m=/^\[object .+?Constructor\]$/,p=Function.prototype,l=Object.prototype,P=p.toString,A=l.hasOwnProperty,E=RegExp("^"+P.call(A).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function k(D){if(!i(D)||t(D))return!1;var j=e(D)?E:m;return j.test(a(D))}return A0=k,A0}var C0,MT;function o4(){if(MT)return C0;MT=1;function e(t,i){return t?.[i]}return C0=e,C0}var E0,kT;function Gd(){if(kT)return E0;kT=1;var e=a4(),t=o4();function i(a,u){var m=t(a,u);return e(m)?m:void 0}return E0=i,E0}var M0,IT;function Xv(){if(IT)return M0;IT=1;var e=Gd(),t=e(Object,"create");return M0=t,M0}var k0,OT;function s4(){if(OT)return k0;OT=1;var e=Xv();function t(){this.__data__=e?e(null):{},this.size=0}return k0=t,k0}var I0,RT;function l4(){if(RT)return I0;RT=1;function e(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}return I0=e,I0}var O0,DT;function c4(){if(DT)return O0;DT=1;var e=Xv(),t="__lodash_hash_undefined__",i=Object.prototype,a=i.hasOwnProperty;function u(m){var p=this.__data__;if(e){var l=p[m];return l===t?void 0:l}return a.call(p,m)?p[m]:void 0}return O0=u,O0}var R0,zT;function u4(){if(zT)return R0;zT=1;var e=Xv(),t=Object.prototype,i=t.hasOwnProperty;function a(u){var m=this.__data__;return e?m[u]!==void 0:i.call(m,u)}return R0=a,R0}var D0,jT;function h4(){if(jT)return D0;jT=1;var e=Xv(),t="__lodash_hash_undefined__";function i(a,u){var m=this.__data__;return this.size+=this.has(a)?0:1,m[a]=e&&u===void 0?t:u,this}return D0=i,D0}var z0,LT;function d4(){if(LT)return z0;LT=1;var e=s4(),t=l4(),i=c4(),a=u4(),u=h4();function m(p){var l=-1,P=p==null?0:p.length;for(this.clear();++l<P;){var A=p[l];this.set(A[0],A[1])}}return m.prototype.clear=e,m.prototype.delete=t,m.prototype.get=i,m.prototype.has=a,m.prototype.set=u,z0=m,z0}var j0,NT;function f4(){if(NT)return j0;NT=1;function e(){this.__data__=[],this.size=0}return j0=e,j0}var L0,BT;function e2(){if(BT)return L0;BT=1;function e(t,i){return t===i||t!==t&&i!==i}return L0=e,L0}var N0,FT;function Yv(){if(FT)return N0;FT=1;var e=e2();function t(i,a){for(var u=i.length;u--;)if(e(i[u][0],a))return u;return-1}return N0=t,N0}var B0,$T;function p4(){if($T)return B0;$T=1;var e=Yv(),t=Array.prototype,i=t.splice;function a(u){var m=this.__data__,p=e(m,u);if(p<0)return!1;var l=m.length-1;return p==l?m.pop():i.call(m,p,1),--this.size,!0}return B0=a,B0}var F0,UT;function m4(){if(UT)return F0;UT=1;var e=Yv();function t(i){var a=this.__data__,u=e(a,i);return u<0?void 0:a[u][1]}return F0=t,F0}var $0,VT;function g4(){if(VT)return $0;VT=1;var e=Yv();function t(i){return e(this.__data__,i)>-1}return $0=t,$0}var U0,qT;function y4(){if(qT)return U0;qT=1;var e=Yv();function t(i,a){var u=this.__data__,m=e(u,i);return m<0?(++this.size,u.push([i,a])):u[m][1]=a,this}return U0=t,U0}var V0,GT;function Jv(){if(GT)return V0;GT=1;var e=f4(),t=p4(),i=m4(),a=g4(),u=y4();function m(p){var l=-1,P=p==null?0:p.length;for(this.clear();++l<P;){var A=p[l];this.set(A[0],A[1])}}return m.prototype.clear=e,m.prototype.delete=t,m.prototype.get=i,m.prototype.has=a,m.prototype.set=u,V0=m,V0}var q0,WT;function t2(){if(WT)return q0;WT=1;var e=Gd(),t=Ec(),i=e(t,"Map");return q0=i,q0}var G0,ZT;function v4(){if(ZT)return G0;ZT=1;var e=d4(),t=Jv(),i=t2();function a(){this.size=0,this.__data__={hash:new e,map:new(i||t),string:new e}}return G0=a,G0}var W0,HT;function _4(){if(HT)return W0;HT=1;function e(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}return W0=e,W0}var Z0,KT;function Qv(){if(KT)return Z0;KT=1;var e=_4();function t(i,a){var u=i.__data__;return e(a)?u[typeof a=="string"?"string":"hash"]:u.map}return Z0=t,Z0}var H0,XT;function x4(){if(XT)return H0;XT=1;var e=Qv();function t(i){var a=e(this,i).delete(i);return this.size-=a?1:0,a}return H0=t,H0}var K0,YT;function b4(){if(YT)return K0;YT=1;var e=Qv();function t(i){return e(this,i).get(i)}return K0=t,K0}var X0,JT;function w4(){if(JT)return X0;JT=1;var e=Qv();function t(i){return e(this,i).has(i)}return X0=t,X0}var Y0,QT;function S4(){if(QT)return Y0;QT=1;var e=Qv();function t(i,a){var u=e(this,i),m=u.size;return u.set(i,a),this.size+=u.size==m?0:1,this}return Y0=t,Y0}var J0,eA;function r2(){if(eA)return J0;eA=1;var e=v4(),t=x4(),i=b4(),a=w4(),u=S4();function m(p){var l=-1,P=p==null?0:p.length;for(this.clear();++l<P;){var A=p[l];this.set(A[0],A[1])}}return m.prototype.clear=e,m.prototype.delete=t,m.prototype.get=i,m.prototype.has=a,m.prototype.set=u,J0=m,J0}var Q0,tA;function vR(){if(tA)return Q0;tA=1;var e=r2(),t="Expected a function";function i(a,u){if(typeof a!="function"||u!=null&&typeof u!="function")throw new TypeError(t);var m=function(){var p=arguments,l=u?u.apply(this,p):p[0],P=m.cache;if(P.has(l))return P.get(l);var A=a.apply(this,p);return m.cache=P.set(l,A)||P,A};return m.cache=new(i.Cache||e),m}return i.Cache=e,Q0=i,Q0}var ex,rA;function P4(){if(rA)return ex;rA=1;var e=vR(),t=500;function i(a){var u=e(a,function(p){return m.size===t&&m.clear(),p}),m=u.cache;return u}return ex=i,ex}var tx,nA;function T4(){if(nA)return tx;nA=1;var e=P4(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=e(function(u){var m=[];return u.charCodeAt(0)===46&&m.push(""),u.replace(t,function(p,l,P,A){m.push(P?A.replace(i,"$1"):l||p)}),m});return tx=a,tx}var rx,iA;function n2(){if(iA)return rx;iA=1;function e(t,i){for(var a=-1,u=t==null?0:t.length,m=Array(u);++a<u;)m[a]=i(t[a],a,t);return m}return rx=e,rx}var nx,aA;function A4(){if(aA)return nx;aA=1;var e=Rg(),t=n2(),i=To(),a=Lp(),u=e?e.prototype:void 0,m=u?u.toString:void 0;function p(l){if(typeof l=="string")return l;if(i(l))return t(l,p)+"";if(a(l))return m?m.call(l):"";var P=l+"";return P=="0"&&1/l==-1/0?"-0":P}return nx=p,nx}var ix,oA;function _R(){if(oA)return ix;oA=1;var e=A4();function t(i){return i==null?"":e(i)}return ix=t,ix}var ax,sA;function xR(){if(sA)return ax;sA=1;var e=To(),t=JS(),i=T4(),a=_R();function u(m,p){return e(m)?m:t(m,p)?[m]:i(a(m))}return ax=u,ax}var ox,lA;function e_(){if(lA)return ox;lA=1;var e=Lp();function t(i){if(typeof i=="string"||e(i))return i;var a=i+"";return a=="0"&&1/i==-1/0?"-0":a}return ox=t,ox}var sx,cA;function i2(){if(cA)return sx;cA=1;var e=xR(),t=e_();function i(a,u){u=e(u,a);for(var m=0,p=u.length;a!=null&&m<p;)a=a[t(u[m++])];return m&&m==p?a:void 0}return sx=i,sx}var lx,uA;function bR(){if(uA)return lx;uA=1;var e=i2();function t(i,a,u){var m=i==null?void 0:e(i,a);return m===void 0?u:m}return lx=t,lx}var C4=bR();const rs=mn(C4);var cx,hA;function E4(){if(hA)return cx;hA=1;function e(t){return t==null}return cx=e,cx}var M4=E4();const kr=mn(M4);var ux,dA;function k4(){if(dA)return ux;dA=1;var e=Du(),t=To(),i=zu(),a="[object String]";function u(m){return typeof m=="string"||!t(m)&&i(m)&&e(m)==a}return ux=u,ux}var I4=k4();const Bd=mn(I4);var O4=QS();const xr=mn(O4);var R4=Mh();const Np=mn(R4);var hx={exports:{}},fn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA;function D4(){if(fA)return fn;fA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),p=Symbol.for("react.context"),l=Symbol.for("react.server_context"),P=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),G;G=Symbol.for("react.module.reference");function U(F){if(typeof F=="object"&&F!==null){var X=F.$$typeof;switch(X){case e:switch(F=F.type,F){case i:case u:case a:case A:case E:return F;default:switch(F=F&&F.$$typeof,F){case l:case p:case P:case D:case k:case m:return F;default:return X}}case t:return X}}}return fn.ContextConsumer=p,fn.ContextProvider=m,fn.Element=e,fn.ForwardRef=P,fn.Fragment=i,fn.Lazy=D,fn.Memo=k,fn.Portal=t,fn.Profiler=u,fn.StrictMode=a,fn.Suspense=A,fn.SuspenseList=E,fn.isAsyncMode=function(){return!1},fn.isConcurrentMode=function(){return!1},fn.isContextConsumer=function(F){return U(F)===p},fn.isContextProvider=function(F){return U(F)===m},fn.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===e},fn.isForwardRef=function(F){return U(F)===P},fn.isFragment=function(F){return U(F)===i},fn.isLazy=function(F){return U(F)===D},fn.isMemo=function(F){return U(F)===k},fn.isPortal=function(F){return U(F)===t},fn.isProfiler=function(F){return U(F)===u},fn.isStrictMode=function(F){return U(F)===a},fn.isSuspense=function(F){return U(F)===A},fn.isSuspenseList=function(F){return U(F)===E},fn.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===i||F===u||F===a||F===A||F===E||F===j||typeof F=="object"&&F!==null&&(F.$$typeof===D||F.$$typeof===k||F.$$typeof===m||F.$$typeof===p||F.$$typeof===P||F.$$typeof===G||F.getModuleId!==void 0)},fn.typeOf=U,fn}var pA;function z4(){return pA||(pA=1,hx.exports=D4()),hx.exports}var j4=z4(),dx,mA;function wR(){if(mA)return dx;mA=1;var e=Du(),t=zu(),i="[object Number]";function a(u){return typeof u=="number"||t(u)&&e(u)==i}return dx=a,dx}var fx,gA;function L4(){if(gA)return fx;gA=1;var e=wR();function t(i){return e(i)&&i!=+i}return fx=t,fx}var N4=L4();const Dg=mn(N4);var B4=wR();const F4=mn(B4);var to=function(t){return t===0?0:t>0?1:-1},vw=function(t){return Bd(t)&&t.indexOf("%")===t.length-1},Dt=function(t){return F4(t)&&!Dg(t)},$4=function(t){return kr(t)},Zi=function(t){return Dt(t)||Bd(t)},U4=0,Bp=function(t){var i=++U4;return"".concat(t||"").concat(i)},ro=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Dt(t)&&!Bd(t))return a;var m;if(vw(t)){var p=t.indexOf("%");m=i*parseFloat(t.slice(0,p))/100}else m=+t;return Dg(m)&&(m=a),u&&m>i&&(m=i),m},wh=function(t){if(!t)return null;var i=Object.keys(t);return i&&i.length?t[i[0]]:null},V4=function(t){if(!Array.isArray(t))return!1;for(var i=t.length,a={},u=0;u<i;u++)if(!a[t[u]])a[t[u]]=!0;else return!0;return!1},Qo=function(t,i){return Dt(t)&&Dt(i)?function(a){return t+a*(i-t)}:function(){return i}};function Gy(e,t,i){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):rs(a,t))===i})}var q4=function(t,i){return Dt(t)&&Dt(i)?t-i:Bd(t)&&Bd(i)?t.localeCompare(i):t instanceof Date&&i instanceof Date?t.getTime()-i.getTime():String(t).localeCompare(String(i))};function ep(e,t){for(var i in e)if({}.hasOwnProperty.call(e,i)&&(!{}.hasOwnProperty.call(t,i)||e[i]!==t[i]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function _w(e){"@babel/helpers - typeof";return _w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_w(e)}var G4=["viewBox","children"],W4=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],yA=["points","pathLength"],px={svg:G4,polygon:yA,polyline:yA},a2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Wy=function(t,i){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(Ue.isValidElement(t)&&(a=t.props),!Np(a))return null;var u={};return Object.keys(a).forEach(function(m){a2.includes(m)&&(u[m]=i||function(p){return a[m](a,p)})}),u},Z4=function(t,i,a){return function(u){return t(i,a,u),null}},Fd=function(t,i,a){if(!Np(t)||_w(t)!=="object")return null;var u=null;return Object.keys(t).forEach(function(m){var p=t[m];a2.includes(m)&&typeof p=="function"&&(u||(u={}),u[m]=Z4(p,i,a))}),u},H4=["children"],K4=["children"];function vA(e,t){if(e==null)return{};var i=X4(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function X4(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function xw(e){"@babel/helpers - typeof";return xw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xw(e)}var _A={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Th=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},xA=null,mx=null,o2=function e(t){if(t===xA&&Array.isArray(mx))return mx;var i=[];return Ue.Children.forEach(t,function(a){kr(a)||(j4.isFragment(a)?i=i.concat(e(a.props.children)):i.push(a))}),mx=i,xA=t,i};function ns(e,t){var i=[],a=[];return Array.isArray(t)?a=t.map(function(u){return Th(u)}):a=[Th(t)],o2(e).forEach(function(u){var m=rs(u,"type.displayName")||rs(u,"type.name");a.indexOf(m)!==-1&&i.push(u)}),i}function Jo(e,t){var i=ns(e,t);return i&&i[0]}var bA=function(t){if(!t||!t.props)return!1;var i=t.props,a=i.width,u=i.height;return!(!Dt(a)||a<=0||!Dt(u)||u<=0)},Y4=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],J4=function(t){return t&&t.type&&Bd(t.type)&&Y4.indexOf(t.type)>=0},Q4=function(t){return t&&xw(t)==="object"&&"clipDot"in t},eN=function(t,i,a,u){var m,p=(m=px?.[u])!==null&&m!==void 0?m:[];return i.startsWith("data-")||!xr(t)&&(u&&p.includes(i)||W4.includes(i))||a&&a2.includes(i)},fr=function(t,i,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var u=t;if(Ue.isValidElement(t)&&(u=t.props),!Np(u))return null;var m={};return Object.keys(u).forEach(function(p){var l;eN((l=u)===null||l===void 0?void 0:l[p],p,i,a)&&(m[p]=u[p])}),m},bw=function e(t,i){if(t===i)return!0;var a=Ue.Children.count(t);if(a!==Ue.Children.count(i))return!1;if(a===0)return!0;if(a===1)return wA(Array.isArray(t)?t[0]:t,Array.isArray(i)?i[0]:i);for(var u=0;u<a;u++){var m=t[u],p=i[u];if(Array.isArray(m)||Array.isArray(p)){if(!e(m,p))return!1}else if(!wA(m,p))return!1}return!0},wA=function(t,i){if(kr(t)&&kr(i))return!0;if(!kr(t)&&!kr(i)){var a=t.props||{},u=a.children,m=vA(a,H4),p=i.props||{},l=p.children,P=vA(p,K4);return u&&l?ep(m,P)&&bw(u,l):!u&&!l?ep(m,P):!1}return!1},SA=function(t,i){var a=[],u={};return o2(t).forEach(function(m,p){if(J4(m))a.push(m);else if(m){var l=Th(m.type),P=i[l]||{},A=P.handler,E=P.once;if(A&&(!E||!u[l])){var k=A(m,l,p);a.push(k),u[l]=!0}}}),a},tN=function(t){var i=t&&t.type;return i&&_A[i]?_A[i]:null},rN=function(t,i){return o2(i).indexOf(t)},nN=["children","width","height","viewBox","className","style","title","desc"];function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},ww.apply(this,arguments)}function iN(e,t){if(e==null)return{};var i=aN(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function aN(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Sw(e){var t=e.children,i=e.width,a=e.height,u=e.viewBox,m=e.className,p=e.style,l=e.title,P=e.desc,A=iN(e,nN),E=u||{width:i,height:a,x:0,y:0},k=Or("recharts-surface",m);return Ee.createElement("svg",ww({},fr(A,!0,"svg"),{className:k,width:i,height:a,style:p,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height)}),Ee.createElement("title",null,l),Ee.createElement("desc",null,P),t)}var oN=["children","className"];function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Pw.apply(this,arguments)}function sN(e,t){if(e==null)return{};var i=lN(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function lN(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var nn=Ee.forwardRef(function(e,t){var i=e.children,a=e.className,u=sN(e,oN),m=Or("recharts-layer",a);return Ee.createElement("g",Pw({className:m},fr(u,!0),{ref:t}),i)}),Eh=function(t,i){for(var a=arguments.length,u=new Array(a>2?a-2:0),m=2;m<a;m++)u[m-2]=arguments[m]},gx,PA;function cN(){if(PA)return gx;PA=1;function e(t,i,a){var u=-1,m=t.length;i<0&&(i=-i>m?0:m+i),a=a>m?m:a,a<0&&(a+=m),m=i>a?0:a-i>>>0,i>>>=0;for(var p=Array(m);++u<m;)p[u]=t[u+i];return p}return gx=e,gx}var yx,TA;function uN(){if(TA)return yx;TA=1;var e=cN();function t(i,a,u){var m=i.length;return u=u===void 0?m:u,!a&&u>=m?i:e(i,a,u)}return yx=t,yx}var vx,AA;function SR(){if(AA)return vx;AA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",u=t+i+a,m="\\ufe0e\\ufe0f",p="\\u200d",l=RegExp("["+p+e+u+m+"]");function P(A){return l.test(A)}return vx=P,vx}var _x,CA;function hN(){if(CA)return _x;CA=1;function e(t){return t.split("")}return _x=e,_x}var xx,EA;function dN(){if(EA)return xx;EA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",u=t+i+a,m="\\ufe0e\\ufe0f",p="["+e+"]",l="["+u+"]",P="\\ud83c[\\udffb-\\udfff]",A="(?:"+l+"|"+P+")",E="[^"+e+"]",k="(?:\\ud83c[\\udde6-\\uddff]){2}",D="[\\ud800-\\udbff][\\udc00-\\udfff]",j="\\u200d",G=A+"?",U="["+m+"]?",F="(?:"+j+"(?:"+[E,k,D].join("|")+")"+U+G+")*",X=U+G+F,J="(?:"+[E+l+"?",l,k,D,p].join("|")+")",te=RegExp(P+"(?="+P+")|"+J+X,"g");function le(Y){return Y.match(te)||[]}return xx=le,xx}var bx,MA;function fN(){if(MA)return bx;MA=1;var e=hN(),t=SR(),i=dN();function a(u){return t(u)?i(u):e(u)}return bx=a,bx}var wx,kA;function pN(){if(kA)return wx;kA=1;var e=uN(),t=SR(),i=fN(),a=_R();function u(m){return function(p){p=a(p);var l=t(p)?i(p):void 0,P=l?l[0]:p.charAt(0),A=l?e(l,1).join(""):p.slice(1);return P[m]()+A}}return wx=u,wx}var Sx,IA;function mN(){if(IA)return Sx;IA=1;var e=pN(),t=e("toUpperCase");return Sx=t,Sx}var gN=mN();const t_=mn(gN);function kn(e){return function(){return e}}const PR=Math.cos,Zy=Math.sin,Il=Math.sqrt,Hy=Math.PI,r_=2*Hy,Tw=Math.PI,Aw=2*Tw,Id=1e-6,yN=Aw-Id;function TR(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function vN(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return TR;const i=10**t;return function(a){this._+=a[0];for(let u=1,m=a.length;u<m;++u)this._+=Math.round(arguments[u]*i)/i+a[u]}}class _N{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?TR:vN(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,a,u){this._append`Q${+t},${+i},${this._x1=+a},${this._y1=+u}`}bezierCurveTo(t,i,a,u,m,p){this._append`C${+t},${+i},${+a},${+u},${this._x1=+m},${this._y1=+p}`}arcTo(t,i,a,u,m){if(t=+t,i=+i,a=+a,u=+u,m=+m,m<0)throw new Error(`negative radius: ${m}`);let p=this._x1,l=this._y1,P=a-t,A=u-i,E=p-t,k=l-i,D=E*E+k*k;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(D>Id)if(!(Math.abs(k*P-A*E)>Id)||!m)this._append`L${this._x1=t},${this._y1=i}`;else{let j=a-p,G=u-l,U=P*P+A*A,F=j*j+G*G,X=Math.sqrt(U),J=Math.sqrt(D),te=m*Math.tan((Tw-Math.acos((U+D-F)/(2*X*J)))/2),le=te/J,Y=te/X;Math.abs(le-1)>Id&&this._append`L${t+le*E},${i+le*k}`,this._append`A${m},${m},0,0,${+(k*j>E*G)},${this._x1=t+Y*P},${this._y1=i+Y*A}`}}arc(t,i,a,u,m,p){if(t=+t,i=+i,a=+a,p=!!p,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(u),P=a*Math.sin(u),A=t+l,E=i+P,k=1^p,D=p?u-m:m-u;this._x1===null?this._append`M${A},${E}`:(Math.abs(this._x1-A)>Id||Math.abs(this._y1-E)>Id)&&this._append`L${A},${E}`,a&&(D<0&&(D=D%Aw+Aw),D>yN?this._append`A${a},${a},0,1,${k},${t-l},${i-P}A${a},${a},0,1,${k},${this._x1=A},${this._y1=E}`:D>Id&&this._append`A${a},${a},0,${+(D>=Tw)},${k},${this._x1=t+a*Math.cos(m)},${this._y1=i+a*Math.sin(m)}`)}rect(t,i,a,u){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${a=+a}v${+u}h${-a}Z`}toString(){return this._}}function s2(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const a=Math.floor(i);if(!(a>=0))throw new RangeError(`invalid digits: ${i}`);t=a}return e},()=>new _N(t)}function l2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function AR(e){this._context=e}AR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function n_(e){return new AR(e)}function CR(e){return e[0]}function ER(e){return e[1]}function MR(e,t){var i=kn(!0),a=null,u=n_,m=null,p=s2(l);e=typeof e=="function"?e:e===void 0?CR:kn(e),t=typeof t=="function"?t:t===void 0?ER:kn(t);function l(P){var A,E=(P=l2(P)).length,k,D=!1,j;for(a==null&&(m=u(j=p())),A=0;A<=E;++A)!(A<E&&i(k=P[A],A,P))===D&&((D=!D)?m.lineStart():m.lineEnd()),D&&m.point(+e(k,A,P),+t(k,A,P));if(j)return m=null,j+""||null}return l.x=function(P){return arguments.length?(e=typeof P=="function"?P:kn(+P),l):e},l.y=function(P){return arguments.length?(t=typeof P=="function"?P:kn(+P),l):t},l.defined=function(P){return arguments.length?(i=typeof P=="function"?P:kn(!!P),l):i},l.curve=function(P){return arguments.length?(u=P,a!=null&&(m=u(a)),l):u},l.context=function(P){return arguments.length?(P==null?a=m=null:m=u(a=P),l):a},l}function My(e,t,i){var a=null,u=kn(!0),m=null,p=n_,l=null,P=s2(A);e=typeof e=="function"?e:e===void 0?CR:kn(+e),t=typeof t=="function"?t:kn(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?ER:kn(+i);function A(k){var D,j,G,U=(k=l2(k)).length,F,X=!1,J,te=new Array(U),le=new Array(U);for(m==null&&(l=p(J=P())),D=0;D<=U;++D){if(!(D<U&&u(F=k[D],D,k))===X)if(X=!X)j=D,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),G=D-1;G>=j;--G)l.point(te[G],le[G]);l.lineEnd(),l.areaEnd()}X&&(te[D]=+e(F,D,k),le[D]=+t(F,D,k),l.point(a?+a(F,D,k):te[D],i?+i(F,D,k):le[D]))}if(J)return l=null,J+""||null}function E(){return MR().defined(u).curve(p).context(m)}return A.x=function(k){return arguments.length?(e=typeof k=="function"?k:kn(+k),a=null,A):e},A.x0=function(k){return arguments.length?(e=typeof k=="function"?k:kn(+k),A):e},A.x1=function(k){return arguments.length?(a=k==null?null:typeof k=="function"?k:kn(+k),A):a},A.y=function(k){return arguments.length?(t=typeof k=="function"?k:kn(+k),i=null,A):t},A.y0=function(k){return arguments.length?(t=typeof k=="function"?k:kn(+k),A):t},A.y1=function(k){return arguments.length?(i=k==null?null:typeof k=="function"?k:kn(+k),A):i},A.lineX0=A.lineY0=function(){return E().x(e).y(t)},A.lineY1=function(){return E().x(e).y(i)},A.lineX1=function(){return E().x(a).y(t)},A.defined=function(k){return arguments.length?(u=typeof k=="function"?k:kn(!!k),A):u},A.curve=function(k){return arguments.length?(p=k,m!=null&&(l=p(m)),A):p},A.context=function(k){return arguments.length?(k==null?m=l=null:l=p(m=k),A):m},A}class kR{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function xN(e){return new kR(e,!0)}function bN(e){return new kR(e,!1)}const c2={draw(e,t){const i=Il(t/Hy);e.moveTo(i,0),e.arc(0,0,i,0,r_)}},wN={draw(e,t){const i=Il(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},IR=Il(1/3),SN=IR*2,PN={draw(e,t){const i=Il(t/SN),a=i*IR;e.moveTo(0,-i),e.lineTo(a,0),e.lineTo(0,i),e.lineTo(-a,0),e.closePath()}},TN={draw(e,t){const i=Il(t),a=-i/2;e.rect(a,a,i,i)}},AN=.8908130915292852,OR=Zy(Hy/10)/Zy(7*Hy/10),CN=Zy(r_/10)*OR,EN=-PR(r_/10)*OR,MN={draw(e,t){const i=Il(t*AN),a=CN*i,u=EN*i;e.moveTo(0,-i),e.lineTo(a,u);for(let m=1;m<5;++m){const p=r_*m/5,l=PR(p),P=Zy(p);e.lineTo(P*i,-l*i),e.lineTo(l*a-P*u,P*a+l*u)}e.closePath()}},Px=Il(3),kN={draw(e,t){const i=-Il(t/(Px*3));e.moveTo(0,i*2),e.lineTo(-Px*i,-i),e.lineTo(Px*i,-i),e.closePath()}},zs=-.5,js=Il(3)/2,Cw=1/Il(12),IN=(Cw/2+1)*3,ON={draw(e,t){const i=Il(t/IN),a=i/2,u=i*Cw,m=a,p=i*Cw+i,l=-m,P=p;e.moveTo(a,u),e.lineTo(m,p),e.lineTo(l,P),e.lineTo(zs*a-js*u,js*a+zs*u),e.lineTo(zs*m-js*p,js*m+zs*p),e.lineTo(zs*l-js*P,js*l+zs*P),e.lineTo(zs*a+js*u,zs*u-js*a),e.lineTo(zs*m+js*p,zs*p-js*m),e.lineTo(zs*l+js*P,zs*P-js*l),e.closePath()}};function RN(e,t){let i=null,a=s2(u);e=typeof e=="function"?e:kn(e||c2),t=typeof t=="function"?t:kn(t===void 0?64:+t);function u(){let m;if(i||(i=m=a()),e.apply(this,arguments).draw(i,+t.apply(this,arguments)),m)return i=null,m+""||null}return u.type=function(m){return arguments.length?(e=typeof m=="function"?m:kn(m),u):e},u.size=function(m){return arguments.length?(t=typeof m=="function"?m:kn(+m),u):t},u.context=function(m){return arguments.length?(i=m??null,u):i},u}function Ky(){}function Xy(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function RR(e){this._context=e}RR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DN(e){return new RR(e)}function DR(e){this._context=e}DR.prototype={areaStart:Ky,areaEnd:Ky,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Xy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zN(e){return new DR(e)}function zR(e){this._context=e}zR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 3:this._point=4;default:Xy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jN(e){return new zR(e)}function jR(e){this._context=e}jR.prototype={areaStart:Ky,areaEnd:Ky,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function LN(e){return new jR(e)}function OA(e){return e<0?-1:1}function RA(e,t,i){var a=e._x1-e._x0,u=t-e._x1,m=(e._y1-e._y0)/(a||u<0&&-0),p=(i-e._y1)/(u||a<0&&-0),l=(m*u+p*a)/(a+u);return(OA(m)+OA(p))*Math.min(Math.abs(m),Math.abs(p),.5*Math.abs(l))||0}function DA(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function Tx(e,t,i){var a=e._x0,u=e._y0,m=e._x1,p=e._y1,l=(m-a)/3;e._context.bezierCurveTo(a+l,u+l*t,m-l,p-l*i,m,p)}function Yy(e){this._context=e}Yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tx(this,this._t0,DA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Tx(this,DA(this,i=RA(this,e,t)),i);break;default:Tx(this,this._t0,i=RA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function LR(e){this._context=new NR(e)}(LR.prototype=Object.create(Yy.prototype)).point=function(e,t){Yy.prototype.point.call(this,t,e)};function NR(e){this._context=e}NR.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,a,u,m){this._context.bezierCurveTo(t,e,a,i,m,u)}};function NN(e){return new Yy(e)}function BN(e){return new LR(e)}function BR(e){this._context=e}BR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var a=zA(e),u=zA(t),m=0,p=1;p<i;++m,++p)this._context.bezierCurveTo(a[0][m],u[0][m],a[1][m],u[1][m],e[p],t[p]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function zA(e){var t,i=e.length-1,a,u=new Array(i),m=new Array(i),p=new Array(i);for(u[0]=0,m[0]=2,p[0]=e[0]+2*e[1],t=1;t<i-1;++t)u[t]=1,m[t]=4,p[t]=4*e[t]+2*e[t+1];for(u[i-1]=2,m[i-1]=7,p[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)a=u[t]/m[t-1],m[t]-=a,p[t]-=a*p[t-1];for(u[i-1]=p[i-1]/m[i-1],t=i-2;t>=0;--t)u[t]=(p[t]-u[t+1])/m[t];for(m[i-1]=(e[i]+u[i-1])/2,t=0;t<i-1;++t)m[t]=2*e[t+1]-u[t+1];return[u,m]}function FN(e){return new BR(e)}function i_(e,t){this._context=e,this._t=t}i_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function $N(e){return new i_(e,.5)}function UN(e){return new i_(e,0)}function VN(e){return new i_(e,1)}function ap(e,t){if((p=e.length)>1)for(var i=1,a,u,m=e[t[0]],p,l=m.length;i<p;++i)for(u=m,m=e[t[i]],a=0;a<l;++a)m[a][1]+=m[a][0]=isNaN(u[a][1])?u[a][0]:u[a][1]}function Ew(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function qN(e,t){return e[t]}function GN(e){const t=[];return t.key=e,t}function WN(){var e=kn([]),t=Ew,i=ap,a=qN;function u(m){var p=Array.from(e.apply(this,arguments),GN),l,P=p.length,A=-1,E;for(const k of m)for(l=0,++A;l<P;++l)(p[l][A]=[0,+a(k,p[l].key,A,m)]).data=k;for(l=0,E=l2(t(p));l<P;++l)p[E[l]].index=l;return i(p,E),p}return u.keys=function(m){return arguments.length?(e=typeof m=="function"?m:kn(Array.from(m)),u):e},u.value=function(m){return arguments.length?(a=typeof m=="function"?m:kn(+m),u):a},u.order=function(m){return arguments.length?(t=m==null?Ew:typeof m=="function"?m:kn(Array.from(m)),u):t},u.offset=function(m){return arguments.length?(i=m??ap,u):i},u}function ZN(e,t){if((a=e.length)>0){for(var i,a,u=0,m=e[0].length,p;u<m;++u){for(p=i=0;i<a;++i)p+=e[i][u][1]||0;if(p)for(i=0;i<a;++i)e[i][u][1]/=p}ap(e,t)}}function HN(e,t){if((u=e.length)>0){for(var i=0,a=e[t[0]],u,m=a.length;i<m;++i){for(var p=0,l=0;p<u;++p)l+=e[p][i][1]||0;a[i][1]+=a[i][0]=-l/2}ap(e,t)}}function KN(e,t){if(!(!((p=e.length)>0)||!((m=(u=e[t[0]]).length)>0))){for(var i=0,a=1,u,m,p;a<m;++a){for(var l=0,P=0,A=0;l<p;++l){for(var E=e[t[l]],k=E[a][1]||0,D=E[a-1][1]||0,j=(k-D)/2,G=0;G<l;++G){var U=e[t[G]],F=U[a][1]||0,X=U[a-1][1]||0;j+=F-X}P+=k,A+=j*k}u[a-1][1]+=u[a-1][0]=i,P&&(i-=A/P)}u[a-1][1]+=u[a-1][0]=i,ap(e,t)}}function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}var XN=["type","size","sizeType"];function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Mw.apply(this,arguments)}function jA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function LA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(i),!0).forEach(function(a){YN(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function YN(e,t,i){return t=JN(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function JN(e){var t=QN(e,"string");return Ym(t)=="symbol"?t:t+""}function QN(e,t){if(Ym(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ym(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eB(e,t){if(e==null)return{};var i=tB(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function tB(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var FR={symbolCircle:c2,symbolCross:wN,symbolDiamond:PN,symbolSquare:TN,symbolStar:MN,symbolTriangle:kN,symbolWye:ON},rB=Math.PI/180,nB=function(t){var i="symbol".concat(t_(t));return FR[i]||c2},iB=function(t,i,a){if(i==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var u=18*rB;return 1.25*t*t*(Math.tan(u)-Math.tan(u*2)*Math.pow(Math.tan(u),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},aB=function(t,i){FR["symbol".concat(t_(t))]=i},u2=function(t){var i=t.type,a=i===void 0?"circle":i,u=t.size,m=u===void 0?64:u,p=t.sizeType,l=p===void 0?"area":p,P=eB(t,XN),A=LA(LA({},P),{},{type:a,size:m,sizeType:l}),E=function(){var F=nB(a),X=RN().type(F).size(iB(m,l,a));return X()},k=A.className,D=A.cx,j=A.cy,G=fr(A,!0);return D===+D&&j===+j&&m===+m?Ee.createElement("path",Mw({},G,{className:Or("recharts-symbols",k),transform:"translate(".concat(D,", ").concat(j,")"),d:E()})):null};u2.registerSymbol=aB;function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function kw(){return kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},kw.apply(this,arguments)}function NA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function oB(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(i),!0).forEach(function(a){Jm(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function sB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lB(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,UR(a.key),a)}}function cB(e,t,i){return t&&lB(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uB(e,t,i){return t=Jy(t),hB(e,$R()?Reflect.construct(t,i||[],Jy(e).constructor):t.apply(e,i))}function hB(e,t){if(t&&(op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dB(e)}function dB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($R=function(){return!!e})()}function Jy(e){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Jy(e)}function fB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iw(e,t)}function Iw(e,t){return Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},Iw(e,t)}function Jm(e,t,i){return t=UR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function UR(e){var t=pB(e,"string");return op(t)=="symbol"?t:t+""}function pB(e,t){if(op(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(op(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ls=32,h2=(function(e){function t(){return sB(this,t),uB(this,t,arguments)}return fB(t,e),cB(t,[{key:"renderIcon",value:function(a){var u=this.props.inactiveColor,m=Ls/2,p=Ls/6,l=Ls/3,P=a.inactive?u:a.color;if(a.type==="plainline")return Ee.createElement("line",{strokeWidth:4,fill:"none",stroke:P,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:m,x2:Ls,y2:m,className:"recharts-legend-icon"});if(a.type==="line")return Ee.createElement("path",{strokeWidth:4,fill:"none",stroke:P,d:"M0,".concat(m,"h").concat(l,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(2*l,",").concat(m,`
            H`).concat(Ls,"M").concat(2*l,",").concat(m,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(l,",").concat(m),className:"recharts-legend-icon"});if(a.type==="rect")return Ee.createElement("path",{stroke:"none",fill:P,d:"M0,".concat(Ls/8,"h").concat(Ls,"v").concat(Ls*3/4,"h").concat(-Ls,"z"),className:"recharts-legend-icon"});if(Ee.isValidElement(a.legendIcon)){var A=oB({},a);return delete A.legendIcon,Ee.cloneElement(a.legendIcon,A)}return Ee.createElement(u2,{fill:P,cx:m,cy:m,size:Ls,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,u=this.props,m=u.payload,p=u.iconSize,l=u.layout,P=u.formatter,A=u.inactiveColor,E={x:0,y:0,width:Ls,height:Ls},k={display:l==="horizontal"?"inline-block":"block",marginRight:10},D={display:"inline-block",verticalAlign:"middle",marginRight:4};return m.map(function(j,G){var U=j.formatter||P,F=Or(Jm(Jm({"recharts-legend-item":!0},"legend-item-".concat(G),!0),"inactive",j.inactive));if(j.type==="none")return null;var X=xr(j.value)?null:j.value;Eh(!xr(j.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var J=j.inactive?A:j.color;return Ee.createElement("li",kw({className:F,style:k,key:"legend-item-".concat(G)},Fd(a.props,j,G)),Ee.createElement(Sw,{width:p,height:p,viewBox:E,style:D},a.renderIcon(j)),Ee.createElement("span",{className:"recharts-legend-item-text",style:{color:J}},U?U(X,j,G):X))})}},{key:"render",value:function(){var a=this.props,u=a.payload,m=a.layout,p=a.align;if(!u||!u.length)return null;var l={padding:0,margin:0,textAlign:m==="horizontal"?p:"left"};return Ee.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(Ue.PureComponent);Jm(h2,"displayName","Legend");Jm(h2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ax,BA;function mB(){if(BA)return Ax;BA=1;var e=Jv();function t(){this.__data__=new e,this.size=0}return Ax=t,Ax}var Cx,FA;function gB(){if(FA)return Cx;FA=1;function e(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}return Cx=e,Cx}var Ex,$A;function yB(){if($A)return Ex;$A=1;function e(t){return this.__data__.get(t)}return Ex=e,Ex}var Mx,UA;function vB(){if(UA)return Mx;UA=1;function e(t){return this.__data__.has(t)}return Mx=e,Mx}var kx,VA;function _B(){if(VA)return kx;VA=1;var e=Jv(),t=t2(),i=r2(),a=200;function u(m,p){var l=this.__data__;if(l instanceof e){var P=l.__data__;if(!t||P.length<a-1)return P.push([m,p]),this.size=++l.size,this;l=this.__data__=new i(P)}return l.set(m,p),this.size=l.size,this}return kx=u,kx}var Ix,qA;function VR(){if(qA)return Ix;qA=1;var e=Jv(),t=mB(),i=gB(),a=yB(),u=vB(),m=_B();function p(l){var P=this.__data__=new e(l);this.size=P.size}return p.prototype.clear=t,p.prototype.delete=i,p.prototype.get=a,p.prototype.has=u,p.prototype.set=m,Ix=p,Ix}var Ox,GA;function xB(){if(GA)return Ox;GA=1;var e="__lodash_hash_undefined__";function t(i){return this.__data__.set(i,e),this}return Ox=t,Ox}var Rx,WA;function bB(){if(WA)return Rx;WA=1;function e(t){return this.__data__.has(t)}return Rx=e,Rx}var Dx,ZA;function qR(){if(ZA)return Dx;ZA=1;var e=r2(),t=xB(),i=bB();function a(u){var m=-1,p=u==null?0:u.length;for(this.__data__=new e;++m<p;)this.add(u[m])}return a.prototype.add=a.prototype.push=t,a.prototype.has=i,Dx=a,Dx}var zx,HA;function GR(){if(HA)return zx;HA=1;function e(t,i){for(var a=-1,u=t==null?0:t.length;++a<u;)if(i(t[a],a,t))return!0;return!1}return zx=e,zx}var jx,KA;function WR(){if(KA)return jx;KA=1;function e(t,i){return t.has(i)}return jx=e,jx}var Lx,XA;function ZR(){if(XA)return Lx;XA=1;var e=qR(),t=GR(),i=WR(),a=1,u=2;function m(p,l,P,A,E,k){var D=P&a,j=p.length,G=l.length;if(j!=G&&!(D&&G>j))return!1;var U=k.get(p),F=k.get(l);if(U&&F)return U==l&&F==p;var X=-1,J=!0,te=P&u?new e:void 0;for(k.set(p,l),k.set(l,p);++X<j;){var le=p[X],Y=l[X];if(A)var re=D?A(Y,le,X,l,p,k):A(le,Y,X,p,l,k);if(re!==void 0){if(re)continue;J=!1;break}if(te){if(!t(l,function(de,ge){if(!i(te,ge)&&(le===de||E(le,de,P,A,k)))return te.push(ge)})){J=!1;break}}else if(!(le===Y||E(le,Y,P,A,k))){J=!1;break}}return k.delete(p),k.delete(l),J}return Lx=m,Lx}var Nx,YA;function wB(){if(YA)return Nx;YA=1;var e=Ec(),t=e.Uint8Array;return Nx=t,Nx}var Bx,JA;function SB(){if(JA)return Bx;JA=1;function e(t){var i=-1,a=Array(t.size);return t.forEach(function(u,m){a[++i]=[m,u]}),a}return Bx=e,Bx}var Fx,QA;function d2(){if(QA)return Fx;QA=1;function e(t){var i=-1,a=Array(t.size);return t.forEach(function(u){a[++i]=u}),a}return Fx=e,Fx}var $x,eC;function PB(){if(eC)return $x;eC=1;var e=Rg(),t=wB(),i=e2(),a=ZR(),u=SB(),m=d2(),p=1,l=2,P="[object Boolean]",A="[object Date]",E="[object Error]",k="[object Map]",D="[object Number]",j="[object RegExp]",G="[object Set]",U="[object String]",F="[object Symbol]",X="[object ArrayBuffer]",J="[object DataView]",te=e?e.prototype:void 0,le=te?te.valueOf:void 0;function Y(re,de,ge,Ie,We,Oe,Ve){switch(ge){case J:if(re.byteLength!=de.byteLength||re.byteOffset!=de.byteOffset)return!1;re=re.buffer,de=de.buffer;case X:return!(re.byteLength!=de.byteLength||!Oe(new t(re),new t(de)));case P:case A:case D:return i(+re,+de);case E:return re.name==de.name&&re.message==de.message;case j:case U:return re==de+"";case k:var Ke=u;case G:var ot=Ie&p;if(Ke||(Ke=m),re.size!=de.size&&!ot)return!1;var at=Ve.get(re);if(at)return at==de;Ie|=l,Ve.set(re,de);var st=a(Ke(re),Ke(de),Ie,We,Oe,Ve);return Ve.delete(re),st;case F:if(le)return le.call(re)==le.call(de)}return!1}return $x=Y,$x}var Ux,tC;function HR(){if(tC)return Ux;tC=1;function e(t,i){for(var a=-1,u=i.length,m=t.length;++a<u;)t[m+a]=i[a];return t}return Ux=e,Ux}var Vx,rC;function TB(){if(rC)return Vx;rC=1;var e=HR(),t=To();function i(a,u,m){var p=u(a);return t(a)?p:e(p,m(a))}return Vx=i,Vx}var qx,nC;function AB(){if(nC)return qx;nC=1;function e(t,i){for(var a=-1,u=t==null?0:t.length,m=0,p=[];++a<u;){var l=t[a];i(l,a,t)&&(p[m++]=l)}return p}return qx=e,qx}var Gx,iC;function CB(){if(iC)return Gx;iC=1;function e(){return[]}return Gx=e,Gx}var Wx,aC;function EB(){if(aC)return Wx;aC=1;var e=AB(),t=CB(),i=Object.prototype,a=i.propertyIsEnumerable,u=Object.getOwnPropertySymbols,m=u?function(p){return p==null?[]:(p=Object(p),e(u(p),function(l){return a.call(p,l)}))}:t;return Wx=m,Wx}var Zx,oC;function MB(){if(oC)return Zx;oC=1;function e(t,i){for(var a=-1,u=Array(t);++a<t;)u[a]=i(a);return u}return Zx=e,Zx}var Hx,sC;function kB(){if(sC)return Hx;sC=1;var e=Du(),t=zu(),i="[object Arguments]";function a(u){return t(u)&&e(u)==i}return Hx=a,Hx}var Kx,lC;function f2(){if(lC)return Kx;lC=1;var e=kB(),t=zu(),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,m=e((function(){return arguments})())?e:function(p){return t(p)&&a.call(p,"callee")&&!u.call(p,"callee")};return Kx=m,Kx}var Fm={exports:{}},Xx,cC;function IB(){if(cC)return Xx;cC=1;function e(){return!1}return Xx=e,Xx}Fm.exports;var uC;function KR(){return uC||(uC=1,(function(e,t){var i=Ec(),a=IB(),u=t&&!t.nodeType&&t,m=u&&!0&&e&&!e.nodeType&&e,p=m&&m.exports===u,l=p?i.Buffer:void 0,P=l?l.isBuffer:void 0,A=P||a;e.exports=A})(Fm,Fm.exports)),Fm.exports}var Yx,hC;function p2(){if(hC)return Yx;hC=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function i(a,u){var m=typeof a;return u=u??e,!!u&&(m=="number"||m!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<u}return Yx=i,Yx}var Jx,dC;function m2(){if(dC)return Jx;dC=1;var e=9007199254740991;function t(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=e}return Jx=t,Jx}var Qx,fC;function OB(){if(fC)return Qx;fC=1;var e=Du(),t=m2(),i=zu(),a="[object Arguments]",u="[object Array]",m="[object Boolean]",p="[object Date]",l="[object Error]",P="[object Function]",A="[object Map]",E="[object Number]",k="[object Object]",D="[object RegExp]",j="[object Set]",G="[object String]",U="[object WeakMap]",F="[object ArrayBuffer]",X="[object DataView]",J="[object Float32Array]",te="[object Float64Array]",le="[object Int8Array]",Y="[object Int16Array]",re="[object Int32Array]",de="[object Uint8Array]",ge="[object Uint8ClampedArray]",Ie="[object Uint16Array]",We="[object Uint32Array]",Oe={};Oe[J]=Oe[te]=Oe[le]=Oe[Y]=Oe[re]=Oe[de]=Oe[ge]=Oe[Ie]=Oe[We]=!0,Oe[a]=Oe[u]=Oe[F]=Oe[m]=Oe[X]=Oe[p]=Oe[l]=Oe[P]=Oe[A]=Oe[E]=Oe[k]=Oe[D]=Oe[j]=Oe[G]=Oe[U]=!1;function Ve(Ke){return i(Ke)&&t(Ke.length)&&!!Oe[e(Ke)]}return Qx=Ve,Qx}var eb,pC;function XR(){if(pC)return eb;pC=1;function e(t){return function(i){return t(i)}}return eb=e,eb}var $m={exports:{}};$m.exports;var mC;function RB(){return mC||(mC=1,(function(e,t){var i=gR(),a=t&&!t.nodeType&&t,u=a&&!0&&e&&!e.nodeType&&e,m=u&&u.exports===a,p=m&&i.process,l=(function(){try{var P=u&&u.require&&u.require("util").types;return P||p&&p.binding&&p.binding("util")}catch{}})();e.exports=l})($m,$m.exports)),$m.exports}var tb,gC;function YR(){if(gC)return tb;gC=1;var e=OB(),t=XR(),i=RB(),a=i&&i.isTypedArray,u=a?t(a):e;return tb=u,tb}var rb,yC;function DB(){if(yC)return rb;yC=1;var e=MB(),t=f2(),i=To(),a=KR(),u=p2(),m=YR(),p=Object.prototype,l=p.hasOwnProperty;function P(A,E){var k=i(A),D=!k&&t(A),j=!k&&!D&&a(A),G=!k&&!D&&!j&&m(A),U=k||D||j||G,F=U?e(A.length,String):[],X=F.length;for(var J in A)(E||l.call(A,J))&&!(U&&(J=="length"||j&&(J=="offset"||J=="parent")||G&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||u(J,X)))&&F.push(J);return F}return rb=P,rb}var nb,vC;function zB(){if(vC)return nb;vC=1;var e=Object.prototype;function t(i){var a=i&&i.constructor,u=typeof a=="function"&&a.prototype||e;return i===u}return nb=t,nb}var ib,_C;function JR(){if(_C)return ib;_C=1;function e(t,i){return function(a){return t(i(a))}}return ib=e,ib}var ab,xC;function jB(){if(xC)return ab;xC=1;var e=JR(),t=e(Object.keys,Object);return ab=t,ab}var ob,bC;function LB(){if(bC)return ob;bC=1;var e=zB(),t=jB(),i=Object.prototype,a=i.hasOwnProperty;function u(m){if(!e(m))return t(m);var p=[];for(var l in Object(m))a.call(m,l)&&l!="constructor"&&p.push(l);return p}return ob=u,ob}var sb,wC;function zg(){if(wC)return sb;wC=1;var e=QS(),t=m2();function i(a){return a!=null&&t(a.length)&&!e(a)}return sb=i,sb}var lb,SC;function a_(){if(SC)return lb;SC=1;var e=DB(),t=LB(),i=zg();function a(u){return i(u)?e(u):t(u)}return lb=a,lb}var cb,PC;function NB(){if(PC)return cb;PC=1;var e=TB(),t=EB(),i=a_();function a(u){return e(u,i,t)}return cb=a,cb}var ub,TC;function BB(){if(TC)return ub;TC=1;var e=NB(),t=1,i=Object.prototype,a=i.hasOwnProperty;function u(m,p,l,P,A,E){var k=l&t,D=e(m),j=D.length,G=e(p),U=G.length;if(j!=U&&!k)return!1;for(var F=j;F--;){var X=D[F];if(!(k?X in p:a.call(p,X)))return!1}var J=E.get(m),te=E.get(p);if(J&&te)return J==p&&te==m;var le=!0;E.set(m,p),E.set(p,m);for(var Y=k;++F<j;){X=D[F];var re=m[X],de=p[X];if(P)var ge=k?P(de,re,X,p,m,E):P(re,de,X,m,p,E);if(!(ge===void 0?re===de||A(re,de,l,P,E):ge)){le=!1;break}Y||(Y=X=="constructor")}if(le&&!Y){var Ie=m.constructor,We=p.constructor;Ie!=We&&"constructor"in m&&"constructor"in p&&!(typeof Ie=="function"&&Ie instanceof Ie&&typeof We=="function"&&We instanceof We)&&(le=!1)}return E.delete(m),E.delete(p),le}return ub=u,ub}var hb,AC;function FB(){if(AC)return hb;AC=1;var e=Gd(),t=Ec(),i=e(t,"DataView");return hb=i,hb}var db,CC;function $B(){if(CC)return db;CC=1;var e=Gd(),t=Ec(),i=e(t,"Promise");return db=i,db}var fb,EC;function QR(){if(EC)return fb;EC=1;var e=Gd(),t=Ec(),i=e(t,"Set");return fb=i,fb}var pb,MC;function UB(){if(MC)return pb;MC=1;var e=Gd(),t=Ec(),i=e(t,"WeakMap");return pb=i,pb}var mb,kC;function VB(){if(kC)return mb;kC=1;var e=FB(),t=t2(),i=$B(),a=QR(),u=UB(),m=Du(),p=yR(),l="[object Map]",P="[object Object]",A="[object Promise]",E="[object Set]",k="[object WeakMap]",D="[object DataView]",j=p(e),G=p(t),U=p(i),F=p(a),X=p(u),J=m;return(e&&J(new e(new ArrayBuffer(1)))!=D||t&&J(new t)!=l||i&&J(i.resolve())!=A||a&&J(new a)!=E||u&&J(new u)!=k)&&(J=function(te){var le=m(te),Y=le==P?te.constructor:void 0,re=Y?p(Y):"";if(re)switch(re){case j:return D;case G:return l;case U:return A;case F:return E;case X:return k}return le}),mb=J,mb}var gb,IC;function qB(){if(IC)return gb;IC=1;var e=VR(),t=ZR(),i=PB(),a=BB(),u=VB(),m=To(),p=KR(),l=YR(),P=1,A="[object Arguments]",E="[object Array]",k="[object Object]",D=Object.prototype,j=D.hasOwnProperty;function G(U,F,X,J,te,le){var Y=m(U),re=m(F),de=Y?E:u(U),ge=re?E:u(F);de=de==A?k:de,ge=ge==A?k:ge;var Ie=de==k,We=ge==k,Oe=de==ge;if(Oe&&p(U)){if(!p(F))return!1;Y=!0,Ie=!1}if(Oe&&!Ie)return le||(le=new e),Y||l(U)?t(U,F,X,J,te,le):i(U,F,de,X,J,te,le);if(!(X&P)){var Ve=Ie&&j.call(U,"__wrapped__"),Ke=We&&j.call(F,"__wrapped__");if(Ve||Ke){var ot=Ve?U.value():U,at=Ke?F.value():F;return le||(le=new e),te(ot,at,X,J,le)}}return Oe?(le||(le=new e),a(U,F,X,J,te,le)):!1}return gb=G,gb}var yb,OC;function g2(){if(OC)return yb;OC=1;var e=qB(),t=zu();function i(a,u,m,p,l){return a===u?!0:a==null||u==null||!t(a)&&!t(u)?a!==a&&u!==u:e(a,u,m,p,i,l)}return yb=i,yb}var vb,RC;function GB(){if(RC)return vb;RC=1;var e=VR(),t=g2(),i=1,a=2;function u(m,p,l,P){var A=l.length,E=A,k=!P;if(m==null)return!E;for(m=Object(m);A--;){var D=l[A];if(k&&D[2]?D[1]!==m[D[0]]:!(D[0]in m))return!1}for(;++A<E;){D=l[A];var j=D[0],G=m[j],U=D[1];if(k&&D[2]){if(G===void 0&&!(j in m))return!1}else{var F=new e;if(P)var X=P(G,U,j,m,p,F);if(!(X===void 0?t(U,G,i|a,P,F):X))return!1}}return!0}return vb=u,vb}var _b,DC;function eD(){if(DC)return _b;DC=1;var e=Mh();function t(i){return i===i&&!e(i)}return _b=t,_b}var xb,zC;function WB(){if(zC)return xb;zC=1;var e=eD(),t=a_();function i(a){for(var u=t(a),m=u.length;m--;){var p=u[m],l=a[p];u[m]=[p,l,e(l)]}return u}return xb=i,xb}var bb,jC;function tD(){if(jC)return bb;jC=1;function e(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==void 0||t in Object(a))}}return bb=e,bb}var wb,LC;function ZB(){if(LC)return wb;LC=1;var e=GB(),t=WB(),i=tD();function a(u){var m=t(u);return m.length==1&&m[0][2]?i(m[0][0],m[0][1]):function(p){return p===u||e(p,u,m)}}return wb=a,wb}var Sb,NC;function HB(){if(NC)return Sb;NC=1;function e(t,i){return t!=null&&i in Object(t)}return Sb=e,Sb}var Pb,BC;function KB(){if(BC)return Pb;BC=1;var e=xR(),t=f2(),i=To(),a=p2(),u=m2(),m=e_();function p(l,P,A){P=e(P,l);for(var E=-1,k=P.length,D=!1;++E<k;){var j=m(P[E]);if(!(D=l!=null&&A(l,j)))break;l=l[j]}return D||++E!=k?D:(k=l==null?0:l.length,!!k&&u(k)&&a(j,k)&&(i(l)||t(l)))}return Pb=p,Pb}var Tb,FC;function XB(){if(FC)return Tb;FC=1;var e=HB(),t=KB();function i(a,u){return a!=null&&t(a,u,e)}return Tb=i,Tb}var Ab,$C;function YB(){if($C)return Ab;$C=1;var e=g2(),t=bR(),i=XB(),a=JS(),u=eD(),m=tD(),p=e_(),l=1,P=2;function A(E,k){return a(E)&&u(k)?m(p(E),k):function(D){var j=t(D,E);return j===void 0&&j===k?i(D,E):e(k,j,l|P)}}return Ab=A,Ab}var Cb,UC;function Fp(){if(UC)return Cb;UC=1;function e(t){return t}return Cb=e,Cb}var Eb,VC;function JB(){if(VC)return Eb;VC=1;function e(t){return function(i){return i?.[t]}}return Eb=e,Eb}var Mb,qC;function QB(){if(qC)return Mb;qC=1;var e=i2();function t(i){return function(a){return e(a,i)}}return Mb=t,Mb}var kb,GC;function eF(){if(GC)return kb;GC=1;var e=JB(),t=QB(),i=JS(),a=e_();function u(m){return i(m)?e(a(m)):t(m)}return kb=u,kb}var Ib,WC;function Mc(){if(WC)return Ib;WC=1;var e=ZB(),t=YB(),i=Fp(),a=To(),u=eF();function m(p){return typeof p=="function"?p:p==null?i:typeof p=="object"?a(p)?t(p[0],p[1]):e(p):u(p)}return Ib=m,Ib}var Ob,ZC;function rD(){if(ZC)return Ob;ZC=1;function e(t,i,a,u){for(var m=t.length,p=a+(u?1:-1);u?p--:++p<m;)if(i(t[p],p,t))return p;return-1}return Ob=e,Ob}var Rb,HC;function tF(){if(HC)return Rb;HC=1;function e(t){return t!==t}return Rb=e,Rb}var Db,KC;function rF(){if(KC)return Db;KC=1;function e(t,i,a){for(var u=a-1,m=t.length;++u<m;)if(t[u]===i)return u;return-1}return Db=e,Db}var zb,XC;function nF(){if(XC)return zb;XC=1;var e=rD(),t=tF(),i=rF();function a(u,m,p){return m===m?i(u,m,p):e(u,t,p)}return zb=a,zb}var jb,YC;function iF(){if(YC)return jb;YC=1;var e=nF();function t(i,a){var u=i==null?0:i.length;return!!u&&e(i,a,0)>-1}return jb=t,jb}var Lb,JC;function aF(){if(JC)return Lb;JC=1;function e(t,i,a){for(var u=-1,m=t==null?0:t.length;++u<m;)if(a(i,t[u]))return!0;return!1}return Lb=e,Lb}var Nb,QC;function oF(){if(QC)return Nb;QC=1;function e(){}return Nb=e,Nb}var Bb,eE;function sF(){if(eE)return Bb;eE=1;var e=QR(),t=oF(),i=d2(),a=1/0,u=e&&1/i(new e([,-0]))[1]==a?function(m){return new e(m)}:t;return Bb=u,Bb}var Fb,tE;function lF(){if(tE)return Fb;tE=1;var e=qR(),t=iF(),i=aF(),a=WR(),u=sF(),m=d2(),p=200;function l(P,A,E){var k=-1,D=t,j=P.length,G=!0,U=[],F=U;if(E)G=!1,D=i;else if(j>=p){var X=A?null:u(P);if(X)return m(X);G=!1,D=a,F=new e}else F=A?[]:U;e:for(;++k<j;){var J=P[k],te=A?A(J):J;if(J=E||J!==0?J:0,G&&te===te){for(var le=F.length;le--;)if(F[le]===te)continue e;A&&F.push(te),U.push(J)}else D(F,te,E)||(F!==U&&F.push(te),U.push(J))}return U}return Fb=l,Fb}var $b,rE;function cF(){if(rE)return $b;rE=1;var e=Mc(),t=lF();function i(a,u){return a&&a.length?t(a,e(u,2)):[]}return $b=i,$b}var uF=cF();const nE=mn(uF);function nD(e,t,i){return t===!0?nE(e,i):xr(t)?nE(e,t):e}function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}var hF=["ref"];function iE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function wu(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(i),!0).forEach(function(a){o_(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function dF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aE(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,aD(a.key),a)}}function fF(e,t,i){return t&&aE(e.prototype,t),i&&aE(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function pF(e,t,i){return t=Qy(t),mF(e,iD()?Reflect.construct(t,i||[],Qy(e).constructor):t.apply(e,i))}function mF(e,t){if(t&&(sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gF(e)}function gF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iD=function(){return!!e})()}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Qy(e)}function yF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ow(e,t)}function Ow(e,t){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},Ow(e,t)}function o_(e,t,i){return t=aD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function aD(e){var t=vF(e,"string");return sp(t)=="symbol"?t:t+""}function vF(e,t){if(sp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(sp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _F(e,t){if(e==null)return{};var i=xF(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function xF(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function bF(e){return e.value}function wF(e,t){if(Ee.isValidElement(e))return Ee.cloneElement(e,t);if(typeof e=="function")return Ee.createElement(e,t);t.ref;var i=_F(t,hF);return Ee.createElement(h2,i)}var oE=1,tp=(function(e){function t(){var i;dF(this,t);for(var a=arguments.length,u=new Array(a),m=0;m<a;m++)u[m]=arguments[m];return i=pF(this,t,[].concat(u)),o_(i,"lastBoundingBox",{width:-1,height:-1}),i}return yF(t,e),fF(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,u=this.getBBox();u?(Math.abs(u.width-this.lastBoundingBox.width)>oE||Math.abs(u.height-this.lastBoundingBox.height)>oE)&&(this.lastBoundingBox.width=u.width,this.lastBoundingBox.height=u.height,a&&a(u)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?wu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var u=this.props,m=u.layout,p=u.align,l=u.verticalAlign,P=u.margin,A=u.chartWidth,E=u.chartHeight,k,D;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(p==="center"&&m==="vertical"){var j=this.getBBoxSnapshot();k={left:((A||0)-j.width)/2}}else k=p==="right"?{right:P&&P.right||0}:{left:P&&P.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var G=this.getBBoxSnapshot();D={top:((E||0)-G.height)/2}}else D=l==="bottom"?{bottom:P&&P.bottom||0}:{top:P&&P.top||0};return wu(wu({},k),D)}},{key:"render",value:function(){var a=this,u=this.props,m=u.content,p=u.width,l=u.height,P=u.wrapperStyle,A=u.payloadUniqBy,E=u.payload,k=wu(wu({position:"absolute",width:p||"auto",height:l||"auto"},this.getDefaultPosition(P)),P);return Ee.createElement("div",{className:"recharts-legend-wrapper",style:k,ref:function(j){a.wrapperNode=j}},wF(m,wu(wu({},this.props),{},{payload:nD(E,A,bF)})))}}],[{key:"getWithHeight",value:function(a,u){var m=wu(wu({},this.defaultProps),a.props),p=m.layout;return p==="vertical"&&Dt(a.props.height)?{height:a.props.height}:p==="horizontal"?{width:a.props.width||u}:null}}])})(Ue.PureComponent);o_(tp,"displayName","Legend");o_(tp,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Ub,sE;function SF(){if(sE)return Ub;sE=1;var e=Rg(),t=f2(),i=To(),a=e?e.isConcatSpreadable:void 0;function u(m){return i(m)||t(m)||!!(a&&m&&m[a])}return Ub=u,Ub}var Vb,lE;function oD(){if(lE)return Vb;lE=1;var e=HR(),t=SF();function i(a,u,m,p,l){var P=-1,A=a.length;for(m||(m=t),l||(l=[]);++P<A;){var E=a[P];u>0&&m(E)?u>1?i(E,u-1,m,p,l):e(l,E):p||(l[l.length]=E)}return l}return Vb=i,Vb}var qb,cE;function PF(){if(cE)return qb;cE=1;function e(t){return function(i,a,u){for(var m=-1,p=Object(i),l=u(i),P=l.length;P--;){var A=l[t?P:++m];if(a(p[A],A,p)===!1)break}return i}}return qb=e,qb}var Gb,uE;function TF(){if(uE)return Gb;uE=1;var e=PF(),t=e();return Gb=t,Gb}var Wb,hE;function sD(){if(hE)return Wb;hE=1;var e=TF(),t=a_();function i(a,u){return a&&e(a,u,t)}return Wb=i,Wb}var Zb,dE;function AF(){if(dE)return Zb;dE=1;var e=zg();function t(i,a){return function(u,m){if(u==null)return u;if(!e(u))return i(u,m);for(var p=u.length,l=a?p:-1,P=Object(u);(a?l--:++l<p)&&m(P[l],l,P)!==!1;);return u}}return Zb=t,Zb}var Hb,fE;function y2(){if(fE)return Hb;fE=1;var e=sD(),t=AF(),i=t(e);return Hb=i,Hb}var Kb,pE;function lD(){if(pE)return Kb;pE=1;var e=y2(),t=zg();function i(a,u){var m=-1,p=t(a)?Array(a.length):[];return e(a,function(l,P,A){p[++m]=u(l,P,A)}),p}return Kb=i,Kb}var Xb,mE;function CF(){if(mE)return Xb;mE=1;function e(t,i){var a=t.length;for(t.sort(i);a--;)t[a]=t[a].value;return t}return Xb=e,Xb}var Yb,gE;function EF(){if(gE)return Yb;gE=1;var e=Lp();function t(i,a){if(i!==a){var u=i!==void 0,m=i===null,p=i===i,l=e(i),P=a!==void 0,A=a===null,E=a===a,k=e(a);if(!A&&!k&&!l&&i>a||l&&P&&E&&!A&&!k||m&&P&&E||!u&&E||!p)return 1;if(!m&&!l&&!k&&i<a||k&&u&&p&&!m&&!l||A&&u&&p||!P&&p||!E)return-1}return 0}return Yb=t,Yb}var Jb,yE;function MF(){if(yE)return Jb;yE=1;var e=EF();function t(i,a,u){for(var m=-1,p=i.criteria,l=a.criteria,P=p.length,A=u.length;++m<P;){var E=e(p[m],l[m]);if(E){if(m>=A)return E;var k=u[m];return E*(k=="desc"?-1:1)}}return i.index-a.index}return Jb=t,Jb}var Qb,vE;function kF(){if(vE)return Qb;vE=1;var e=n2(),t=i2(),i=Mc(),a=lD(),u=CF(),m=XR(),p=MF(),l=Fp(),P=To();function A(E,k,D){k.length?k=e(k,function(U){return P(U)?function(F){return t(F,U.length===1?U[0]:U)}:U}):k=[l];var j=-1;k=e(k,m(i));var G=a(E,function(U,F,X){var J=e(k,function(te){return te(U)});return{criteria:J,index:++j,value:U}});return u(G,function(U,F){return p(U,F,D)})}return Qb=A,Qb}var e1,_E;function IF(){if(_E)return e1;_E=1;function e(t,i,a){switch(a.length){case 0:return t.call(i);case 1:return t.call(i,a[0]);case 2:return t.call(i,a[0],a[1]);case 3:return t.call(i,a[0],a[1],a[2])}return t.apply(i,a)}return e1=e,e1}var t1,xE;function OF(){if(xE)return t1;xE=1;var e=IF(),t=Math.max;function i(a,u,m){return u=t(u===void 0?a.length-1:u,0),function(){for(var p=arguments,l=-1,P=t(p.length-u,0),A=Array(P);++l<P;)A[l]=p[u+l];l=-1;for(var E=Array(u+1);++l<u;)E[l]=p[l];return E[u]=m(A),e(a,this,E)}}return t1=i,t1}var r1,bE;function RF(){if(bE)return r1;bE=1;function e(t){return function(){return t}}return r1=e,r1}var n1,wE;function cD(){if(wE)return n1;wE=1;var e=Gd(),t=(function(){try{var i=e(Object,"defineProperty");return i({},"",{}),i}catch{}})();return n1=t,n1}var i1,SE;function DF(){if(SE)return i1;SE=1;var e=RF(),t=cD(),i=Fp(),a=t?function(u,m){return t(u,"toString",{configurable:!0,enumerable:!1,value:e(m),writable:!0})}:i;return i1=a,i1}var a1,PE;function zF(){if(PE)return a1;PE=1;var e=800,t=16,i=Date.now;function a(u){var m=0,p=0;return function(){var l=i(),P=t-(l-p);if(p=l,P>0){if(++m>=e)return arguments[0]}else m=0;return u.apply(void 0,arguments)}}return a1=a,a1}var o1,TE;function jF(){if(TE)return o1;TE=1;var e=DF(),t=zF(),i=t(e);return o1=i,o1}var s1,AE;function LF(){if(AE)return s1;AE=1;var e=Fp(),t=OF(),i=jF();function a(u,m){return i(t(u,m,e),u+"")}return s1=a,s1}var l1,CE;function s_(){if(CE)return l1;CE=1;var e=e2(),t=zg(),i=p2(),a=Mh();function u(m,p,l){if(!a(l))return!1;var P=typeof p;return(P=="number"?t(l)&&i(p,l.length):P=="string"&&p in l)?e(l[p],m):!1}return l1=u,l1}var c1,EE;function NF(){if(EE)return c1;EE=1;var e=oD(),t=kF(),i=LF(),a=s_(),u=i(function(m,p){if(m==null)return[];var l=p.length;return l>1&&a(m,p[0],p[1])?p=[]:l>2&&a(p[0],p[1],p[2])&&(p=[p[0]]),t(m,e(p,1),[])});return c1=u,c1}var BF=NF();const v2=mn(BF);function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function Rw(){return Rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Rw.apply(this,arguments)}function FF(e,t){return qF(e)||VF(e,t)||UF(e,t)||$F()}function $F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UF(e,t){if(e){if(typeof e=="string")return ME(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ME(e,t)}}function ME(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function VF(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function qF(e){if(Array.isArray(e))return e}function kE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function u1(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(i),!0).forEach(function(a){GF(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function GF(e,t,i){return t=WF(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function WF(e){var t=ZF(e,"string");return Qm(t)=="symbol"?t:t+""}function ZF(e,t){if(Qm(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Qm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HF(e){return Array.isArray(e)&&Zi(e[0])&&Zi(e[1])?e.join(" ~ "):e}var KF=function(t){var i=t.separator,a=i===void 0?" : ":i,u=t.contentStyle,m=u===void 0?{}:u,p=t.itemStyle,l=p===void 0?{}:p,P=t.labelStyle,A=P===void 0?{}:P,E=t.payload,k=t.formatter,D=t.itemSorter,j=t.wrapperClassName,G=t.labelClassName,U=t.label,F=t.labelFormatter,X=t.accessibilityLayer,J=X===void 0?!1:X,te=function(){if(E&&E.length){var Ve={padding:0,margin:0},Ke=(D?v2(E,D):E).map(function(ot,at){if(ot.type==="none")return null;var st=u1({display:"block",paddingTop:4,paddingBottom:4,color:ot.color||"#000"},l),lt=ot.formatter||k||HF,Le=ot.value,tt=ot.name,ut=Le,Ae=tt;if(lt&&ut!=null&&Ae!=null){var qe=lt(Le,tt,ot,at,E);if(Array.isArray(qe)){var yt=FF(qe,2);ut=yt[0],Ae=yt[1]}else ut=qe}return Ee.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(at),style:st},Zi(Ae)?Ee.createElement("span",{className:"recharts-tooltip-item-name"},Ae):null,Zi(Ae)?Ee.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Ee.createElement("span",{className:"recharts-tooltip-item-value"},ut),Ee.createElement("span",{className:"recharts-tooltip-item-unit"},ot.unit||""))});return Ee.createElement("ul",{className:"recharts-tooltip-item-list",style:Ve},Ke)}return null},le=u1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},m),Y=u1({margin:0},A),re=!kr(U),de=re?U:"",ge=Or("recharts-default-tooltip",j),Ie=Or("recharts-tooltip-label",G);re&&F&&E!==void 0&&E!==null&&(de=F(U,E));var We=J?{role:"status","aria-live":"assertive"}:{};return Ee.createElement("div",Rw({className:ge,style:le},We),Ee.createElement("p",{className:Ie,style:Y},Ee.isValidElement(de)?de:"".concat(de)),te())};function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function ky(e,t,i){return t=XF(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function XF(e){var t=YF(e,"string");return eg(t)=="symbol"?t:t+""}function YF(e,t){if(eg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Im="recharts-tooltip-wrapper",JF={visibility:"hidden"};function QF(e){var t=e.coordinate,i=e.translateX,a=e.translateY;return Or(Im,ky(ky(ky(ky({},"".concat(Im,"-right"),Dt(i)&&t&&Dt(t.x)&&i>=t.x),"".concat(Im,"-left"),Dt(i)&&t&&Dt(t.x)&&i<t.x),"".concat(Im,"-bottom"),Dt(a)&&t&&Dt(t.y)&&a>=t.y),"".concat(Im,"-top"),Dt(a)&&t&&Dt(t.y)&&a<t.y))}function IE(e){var t=e.allowEscapeViewBox,i=e.coordinate,a=e.key,u=e.offsetTopLeft,m=e.position,p=e.reverseDirection,l=e.tooltipDimension,P=e.viewBox,A=e.viewBoxDimension;if(m&&Dt(m[a]))return m[a];var E=i[a]-l-u,k=i[a]+u;if(t[a])return p[a]?E:k;if(p[a]){var D=E,j=P[a];return D<j?Math.max(k,P[a]):Math.max(E,P[a])}var G=k+l,U=P[a]+A;return G>U?Math.max(E,P[a]):Math.max(k,P[a])}function e$(e){var t=e.translateX,i=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function t$(e){var t=e.allowEscapeViewBox,i=e.coordinate,a=e.offsetTopLeft,u=e.position,m=e.reverseDirection,p=e.tooltipBox,l=e.useTranslate3d,P=e.viewBox,A,E,k;return p.height>0&&p.width>0&&i?(E=IE({allowEscapeViewBox:t,coordinate:i,key:"x",offsetTopLeft:a,position:u,reverseDirection:m,tooltipDimension:p.width,viewBox:P,viewBoxDimension:P.width}),k=IE({allowEscapeViewBox:t,coordinate:i,key:"y",offsetTopLeft:a,position:u,reverseDirection:m,tooltipDimension:p.height,viewBox:P,viewBoxDimension:P.height}),A=e$({translateX:E,translateY:k,useTranslate3d:l})):A=JF,{cssProperties:A,cssClasses:QF({translateX:E,translateY:k,coordinate:i})}}function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function OE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function RE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(i),!0).forEach(function(a){zw(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):OE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function r$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n$(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,hD(a.key),a)}}function i$(e,t,i){return t&&n$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a$(e,t,i){return t=ev(t),o$(e,uD()?Reflect.construct(t,i||[],ev(e).constructor):t.apply(e,i))}function o$(e,t){if(t&&(lp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s$(e)}function s$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uD=function(){return!!e})()}function ev(e){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ev(e)}function l$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dw(e,t)}function Dw(e,t){return Dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},Dw(e,t)}function zw(e,t,i){return t=hD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function hD(e){var t=c$(e,"string");return lp(t)=="symbol"?t:t+""}function c$(e,t){if(lp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(lp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var DE=1,u$=(function(e){function t(){var i;r$(this,t);for(var a=arguments.length,u=new Array(a),m=0;m<a;m++)u[m]=arguments[m];return i=a$(this,t,[].concat(u)),zw(i,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),zw(i,"handleKeyDown",function(p){if(p.key==="Escape"){var l,P,A,E;i.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(P=i.props.coordinate)===null||P===void 0?void 0:P.x)!==null&&l!==void 0?l:0,y:(A=(E=i.props.coordinate)===null||E===void 0?void 0:E.y)!==null&&A!==void 0?A:0}})}}),i}return l$(t,e),i$(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>DE||Math.abs(a.height-this.state.lastBoundingBox.height)>DE)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,u;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((u=this.props.coordinate)===null||u===void 0?void 0:u.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,u=this.props,m=u.active,p=u.allowEscapeViewBox,l=u.animationDuration,P=u.animationEasing,A=u.children,E=u.coordinate,k=u.hasPayload,D=u.isAnimationActive,j=u.offset,G=u.position,U=u.reverseDirection,F=u.useTranslate3d,X=u.viewBox,J=u.wrapperStyle,te=t$({allowEscapeViewBox:p,coordinate:E,offsetTopLeft:j,position:G,reverseDirection:U,tooltipBox:this.state.lastBoundingBox,useTranslate3d:F,viewBox:X}),le=te.cssClasses,Y=te.cssProperties,re=RE(RE({transition:D&&m?"transform ".concat(l,"ms ").concat(P):void 0},Y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&m&&k?"visible":"hidden",position:"absolute",top:0,left:0},J);return Ee.createElement("div",{tabIndex:-1,className:le,style:re,ref:function(ge){a.wrapperNode=ge}},A)}}])})(Ue.PureComponent),h$=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Wd={isSsr:h$()};function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function zE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function jE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(i),!0).forEach(function(a){_2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):zE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function d$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f$(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,fD(a.key),a)}}function p$(e,t,i){return t&&f$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function m$(e,t,i){return t=tv(t),g$(e,dD()?Reflect.construct(t,i||[],tv(e).constructor):t.apply(e,i))}function g$(e,t){if(t&&(cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y$(e)}function y$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dD=function(){return!!e})()}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},tv(e)}function v$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jw(e,t)}function jw(e,t){return jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},jw(e,t)}function _2(e,t,i){return t=fD(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fD(e){var t=_$(e,"string");return cp(t)=="symbol"?t:t+""}function _$(e,t){if(cp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(cp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function x$(e){return e.dataKey}function b$(e,t){return Ee.isValidElement(e)?Ee.cloneElement(e,t):typeof e=="function"?Ee.createElement(e,t):Ee.createElement(KF,t)}var Al=(function(e){function t(){return d$(this,t),m$(this,t,arguments)}return v$(t,e),p$(t,[{key:"render",value:function(){var a=this,u=this.props,m=u.active,p=u.allowEscapeViewBox,l=u.animationDuration,P=u.animationEasing,A=u.content,E=u.coordinate,k=u.filterNull,D=u.isAnimationActive,j=u.offset,G=u.payload,U=u.payloadUniqBy,F=u.position,X=u.reverseDirection,J=u.useTranslate3d,te=u.viewBox,le=u.wrapperStyle,Y=G??[];k&&Y.length&&(Y=nD(G.filter(function(de){return de.value!=null&&(de.hide!==!0||a.props.includeHidden)}),U,x$));var re=Y.length>0;return Ee.createElement(u$,{allowEscapeViewBox:p,animationDuration:l,animationEasing:P,isAnimationActive:D,active:m,coordinate:E,hasPayload:re,offset:j,position:F,reverseDirection:X,useTranslate3d:J,viewBox:te,wrapperStyle:le},b$(A,jE(jE({},this.props),{},{payload:Y})))}}])})(Ue.PureComponent);_2(Al,"displayName","Tooltip");_2(Al,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Wd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var h1,LE;function w$(){if(LE)return h1;LE=1;var e=Ec(),t=function(){return e.Date.now()};return h1=t,h1}var d1,NE;function S$(){if(NE)return d1;NE=1;var e=/\s/;function t(i){for(var a=i.length;a--&&e.test(i.charAt(a)););return a}return d1=t,d1}var f1,BE;function P$(){if(BE)return f1;BE=1;var e=S$(),t=/^\s+/;function i(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return f1=i,f1}var p1,FE;function pD(){if(FE)return p1;FE=1;var e=P$(),t=Mh(),i=Lp(),a=NaN,u=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,p=/^0o[0-7]+$/i,l=parseInt;function P(A){if(typeof A=="number")return A;if(i(A))return a;if(t(A)){var E=typeof A.valueOf=="function"?A.valueOf():A;A=t(E)?E+"":E}if(typeof A!="string")return A===0?A:+A;A=e(A);var k=m.test(A);return k||p.test(A)?l(A.slice(2),k?2:8):u.test(A)?a:+A}return p1=P,p1}var m1,$E;function T$(){if($E)return m1;$E=1;var e=Mh(),t=w$(),i=pD(),a="Expected a function",u=Math.max,m=Math.min;function p(l,P,A){var E,k,D,j,G,U,F=0,X=!1,J=!1,te=!0;if(typeof l!="function")throw new TypeError(a);P=i(P)||0,e(A)&&(X=!!A.leading,J="maxWait"in A,D=J?u(i(A.maxWait)||0,P):D,te="trailing"in A?!!A.trailing:te);function le(Ke){var ot=E,at=k;return E=k=void 0,F=Ke,j=l.apply(at,ot),j}function Y(Ke){return F=Ke,G=setTimeout(ge,P),X?le(Ke):j}function re(Ke){var ot=Ke-U,at=Ke-F,st=P-ot;return J?m(st,D-at):st}function de(Ke){var ot=Ke-U,at=Ke-F;return U===void 0||ot>=P||ot<0||J&&at>=D}function ge(){var Ke=t();if(de(Ke))return Ie(Ke);G=setTimeout(ge,re(Ke))}function Ie(Ke){return G=void 0,te&&E?le(Ke):(E=k=void 0,j)}function We(){G!==void 0&&clearTimeout(G),F=0,E=U=k=G=void 0}function Oe(){return G===void 0?j:Ie(t())}function Ve(){var Ke=t(),ot=de(Ke);if(E=arguments,k=this,U=Ke,ot){if(G===void 0)return Y(U);if(J)return clearTimeout(G),G=setTimeout(ge,P),le(U)}return G===void 0&&(G=setTimeout(ge,P)),j}return Ve.cancel=We,Ve.flush=Oe,Ve}return m1=p,m1}var g1,UE;function A$(){if(UE)return g1;UE=1;var e=T$(),t=Mh(),i="Expected a function";function a(u,m,p){var l=!0,P=!0;if(typeof u!="function")throw new TypeError(i);return t(p)&&(l="leading"in p?!!p.leading:l,P="trailing"in p?!!p.trailing:P),e(u,m,{leading:l,maxWait:m,trailing:P})}return g1=a,g1}var C$=A$();const E$=mn(C$);var tg=function(t){return null};tg.displayName="Cell";function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}function VE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Lw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(i),!0).forEach(function(a){M$(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):VE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function M$(e,t,i){return t=k$(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function k$(e){var t=I$(e,"string");return rg(t)=="symbol"?t:t+""}function I$(e,t){if(rg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(rg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vf={widthCache:{},cacheCount:0},O$=2e3,R$={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qE="recharts_measurement_span";function D$(e){var t=Lw({},e);return Object.keys(t).forEach(function(i){t[i]||delete t[i]}),t}var Vm=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Wd.isSsr)return{width:0,height:0};var a=D$(i),u=JSON.stringify({text:t,copyStyle:a});if(Vf.widthCache[u])return Vf.widthCache[u];try{var m=document.getElementById(qE);m||(m=document.createElement("span"),m.setAttribute("id",qE),m.setAttribute("aria-hidden","true"),document.body.appendChild(m));var p=Lw(Lw({},R$),a);Object.assign(m.style,p),m.textContent="".concat(t);var l=m.getBoundingClientRect(),P={width:l.width,height:l.height};return Vf.widthCache[u]=P,++Vf.cacheCount>O$&&(Vf.cacheCount=0,Vf.widthCache={}),P}catch{return{width:0,height:0}}},z$=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function rv(e,t){return B$(e)||N$(e,t)||L$(e,t)||j$()}function j$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L$(e,t){if(e){if(typeof e=="string")return GE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return GE(e,t)}}function GE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function N$(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;P=!1}else for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function B$(e){if(Array.isArray(e))return e}function F$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WE(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,U$(a.key),a)}}function $$(e,t,i){return t&&WE(e.prototype,t),i&&WE(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function U$(e){var t=V$(e,"string");return ng(t)=="symbol"?t:t+""}function V$(e,t){if(ng(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,q$=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,G$=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,mD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},W$=Object.keys(mD),Kf="NaN";function Z$(e,t){return e*mD[t]}var Iy=(function(){function e(t,i){F$(this,e),this.num=t,this.unit=i,this.num=t,this.unit=i,Number.isNaN(t)&&(this.unit=""),i!==""&&!q$.test(i)&&(this.num=NaN,this.unit=""),W$.includes(i)&&(this.num=Z$(t,i),this.unit="px")}return $$(e,[{key:"add",value:function(i){return this.unit!==i.unit?new e(NaN,""):new e(this.num+i.num,this.unit)}},{key:"subtract",value:function(i){return this.unit!==i.unit?new e(NaN,""):new e(this.num-i.num,this.unit)}},{key:"multiply",value:function(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new e(NaN,""):new e(this.num*i.num,this.unit||i.unit)}},{key:"divide",value:function(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new e(NaN,""):new e(this.num/i.num,this.unit||i.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(i){var a,u=(a=G$.exec(i))!==null&&a!==void 0?a:[],m=rv(u,3),p=m[1],l=m[2];return new e(parseFloat(p),l??"")}}])})();function gD(e){if(e.includes(Kf))return Kf;for(var t=e;t.includes("*")||t.includes("/");){var i,a=(i=ZE.exec(t))!==null&&i!==void 0?i:[],u=rv(a,4),m=u[1],p=u[2],l=u[3],P=Iy.parse(m??""),A=Iy.parse(l??""),E=p==="*"?P.multiply(A):P.divide(A);if(E.isNaN())return Kf;t=t.replace(ZE,E.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var k,D=(k=HE.exec(t))!==null&&k!==void 0?k:[],j=rv(D,4),G=j[1],U=j[2],F=j[3],X=Iy.parse(G??""),J=Iy.parse(F??""),te=U==="+"?X.add(J):X.subtract(J);if(te.isNaN())return Kf;t=t.replace(HE,te.toString())}return t}var KE=/\(([^()]*)\)/;function H$(e){for(var t=e;t.includes("(");){var i=KE.exec(t),a=rv(i,2),u=a[1];t=t.replace(KE,gD(u))}return t}function K$(e){var t=e.replace(/\s+/g,"");return t=H$(t),t=gD(t),t}function X$(e){try{return K$(e)}catch{return Kf}}function y1(e){var t=X$(e.slice(5,-1));return t===Kf?"":t}var Y$=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],J$=["dx","dy","angle","className","breakAll"];function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Nw.apply(this,arguments)}function XE(e,t){if(e==null)return{};var i=Q$(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Q$(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function YE(e,t){return n6(e)||r6(e,t)||t6(e,t)||e6()}function e6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t6(e,t){if(e){if(typeof e=="string")return JE(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return JE(e,t)}}function JE(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function r6(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;P=!1}else for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function n6(e){if(Array.isArray(e))return e}var yD=/[ \f\n\r\t\v\u2028\u2029]+/,vD=function(t){var i=t.children,a=t.breakAll,u=t.style;try{var m=[];kr(i)||(a?m=i.toString().split(""):m=i.toString().split(yD));var p=m.map(function(P){return{word:P,width:Vm(P,u).width}}),l=a?0:Vm("",u).width;return{wordsWithComputedWidth:p,spaceWidth:l}}catch{return null}},i6=function(t,i,a,u,m){var p=t.maxLines,l=t.children,P=t.style,A=t.breakAll,E=Dt(p),k=l,D=function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return at.reduce(function(st,lt){var Le=lt.word,tt=lt.width,ut=st[st.length-1];if(ut&&(u==null||m||ut.width+tt+a<Number(u)))ut.words.push(Le),ut.width+=tt+a;else{var Ae={words:[Le],width:tt};st.push(Ae)}return st},[])},j=D(i),G=function(at){return at.reduce(function(st,lt){return st.width>lt.width?st:lt})};if(!E)return j;for(var U="",F=function(at){var st=k.slice(0,at),lt=vD({breakAll:A,style:P,children:st+U}).wordsWithComputedWidth,Le=D(lt),tt=Le.length>p||G(Le).width>Number(u);return[tt,Le]},X=0,J=k.length-1,te=0,le;X<=J&&te<=k.length-1;){var Y=Math.floor((X+J)/2),re=Y-1,de=F(re),ge=YE(de,2),Ie=ge[0],We=ge[1],Oe=F(Y),Ve=YE(Oe,1),Ke=Ve[0];if(!Ie&&!Ke&&(X=Y+1),Ie&&Ke&&(J=Y-1),!Ie&&Ke){le=We;break}te++}return le||j},QE=function(t){var i=kr(t)?[]:t.toString().split(yD);return[{words:i}]},a6=function(t){var i=t.width,a=t.scaleToFit,u=t.children,m=t.style,p=t.breakAll,l=t.maxLines;if((i||a)&&!Wd.isSsr){var P,A,E=vD({breakAll:p,children:u,style:m});if(E){var k=E.wordsWithComputedWidth,D=E.spaceWidth;P=k,A=D}else return QE(u);return i6({breakAll:p,children:u,maxLines:l,style:m},P,A,i,a)}return QE(u)},eM="#808080",$d=function(t){var i=t.x,a=i===void 0?0:i,u=t.y,m=u===void 0?0:u,p=t.lineHeight,l=p===void 0?"1em":p,P=t.capHeight,A=P===void 0?"0.71em":P,E=t.scaleToFit,k=E===void 0?!1:E,D=t.textAnchor,j=D===void 0?"start":D,G=t.verticalAnchor,U=G===void 0?"end":G,F=t.fill,X=F===void 0?eM:F,J=XE(t,Y$),te=Ue.useMemo(function(){return a6({breakAll:J.breakAll,children:J.children,maxLines:J.maxLines,scaleToFit:k,style:J.style,width:J.width})},[J.breakAll,J.children,J.maxLines,k,J.style,J.width]),le=J.dx,Y=J.dy,re=J.angle,de=J.className,ge=J.breakAll,Ie=XE(J,J$);if(!Zi(a)||!Zi(m))return null;var We=a+(Dt(le)?le:0),Oe=m+(Dt(Y)?Y:0),Ve;switch(U){case"start":Ve=y1("calc(".concat(A,")"));break;case"middle":Ve=y1("calc(".concat((te.length-1)/2," * -").concat(l," + (").concat(A," / 2))"));break;default:Ve=y1("calc(".concat(te.length-1," * -").concat(l,")"));break}var Ke=[];if(k){var ot=te[0].width,at=J.width;Ke.push("scale(".concat((Dt(at)?at/ot:1)/ot,")"))}return re&&Ke.push("rotate(".concat(re,", ").concat(We,", ").concat(Oe,")")),Ke.length&&(Ie.transform=Ke.join(" ")),Ee.createElement("text",Nw({},fr(Ie,!0),{x:We,y:Oe,className:Or("recharts-text",de),textAnchor:j,fill:X.includes("url")?eM:X}),te.map(function(st,lt){var Le=st.words.join(ge?"":" ");return Ee.createElement("tspan",{x:We,dy:lt===0?Ve:l,key:"".concat(Le,"-").concat(lt)},Le)}))};function Ah(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function o6(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x2(e){let t,i,a;e.length!==2?(t=Ah,i=(l,P)=>Ah(e(l),P),a=(l,P)=>e(l)-P):(t=e===Ah||e===o6?e:s6,i=e,a=e);function u(l,P,A=0,E=l.length){if(A<E){if(t(P,P)!==0)return E;do{const k=A+E>>>1;i(l[k],P)<0?A=k+1:E=k}while(A<E)}return A}function m(l,P,A=0,E=l.length){if(A<E){if(t(P,P)!==0)return E;do{const k=A+E>>>1;i(l[k],P)<=0?A=k+1:E=k}while(A<E)}return A}function p(l,P,A=0,E=l.length){const k=u(l,P,A,E-1);return k>A&&a(l[k-1],P)>-a(l[k],P)?k-1:k}return{left:u,center:p,right:m}}function s6(){return 0}function _D(e){return e===null?NaN:+e}function*l6(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const c6=x2(Ah),jg=c6.right;x2(_D).center;class tM extends Map{constructor(t,i=d6){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[a,u]of t)this.set(a,u)}get(t){return super.get(rM(this,t))}has(t){return super.has(rM(this,t))}set(t,i){return super.set(u6(this,t),i)}delete(t){return super.delete(h6(this,t))}}function rM({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):i}function u6({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):(e.set(a,i),i)}function h6({_intern:e,_key:t},i){const a=t(i);return e.has(a)&&(i=e.get(a),e.delete(a)),i}function d6(e){return e!==null&&typeof e=="object"?e.valueOf():e}function f6(e=Ah){if(e===Ah)return xD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const a=e(t,i);return a||a===0?a:(e(i,i)===0)-(e(t,t)===0)}}function xD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const p6=Math.sqrt(50),m6=Math.sqrt(10),g6=Math.sqrt(2);function nv(e,t,i){const a=(t-e)/Math.max(0,i),u=Math.floor(Math.log10(a)),m=a/Math.pow(10,u),p=m>=p6?10:m>=m6?5:m>=g6?2:1;let l,P,A;return u<0?(A=Math.pow(10,-u)/p,l=Math.round(e*A),P=Math.round(t*A),l/A<e&&++l,P/A>t&&--P,A=-A):(A=Math.pow(10,u)*p,l=Math.round(e/A),P=Math.round(t/A),l*A<e&&++l,P*A>t&&--P),P<l&&.5<=i&&i<2?nv(e,t,i*2):[l,P,A]}function Bw(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const a=t<e,[u,m,p]=a?nv(t,e,i):nv(e,t,i);if(!(m>=u))return[];const l=m-u+1,P=new Array(l);if(a)if(p<0)for(let A=0;A<l;++A)P[A]=(m-A)/-p;else for(let A=0;A<l;++A)P[A]=(m-A)*p;else if(p<0)for(let A=0;A<l;++A)P[A]=(u+A)/-p;else for(let A=0;A<l;++A)P[A]=(u+A)*p;return P}function Fw(e,t,i){return t=+t,e=+e,i=+i,nv(e,t,i)[2]}function $w(e,t,i){t=+t,e=+e,i=+i;const a=t<e,u=a?Fw(t,e,i):Fw(e,t,i);return(a?-1:1)*(u<0?1/-u:u)}function nM(e,t){let i;for(const a of e)a!=null&&(i<a||i===void 0&&a>=a)&&(i=a);return i}function iM(e,t){let i;for(const a of e)a!=null&&(i>a||i===void 0&&a>=a)&&(i=a);return i}function bD(e,t,i=0,a=1/0,u){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),a=Math.floor(Math.min(e.length-1,a)),!(i<=t&&t<=a))return e;for(u=u===void 0?xD:f6(u);a>i;){if(a-i>600){const P=a-i+1,A=t-i+1,E=Math.log(P),k=.5*Math.exp(2*E/3),D=.5*Math.sqrt(E*k*(P-k)/P)*(A-P/2<0?-1:1),j=Math.max(i,Math.floor(t-A*k/P+D)),G=Math.min(a,Math.floor(t+(P-A)*k/P+D));bD(e,t,j,G,u)}const m=e[t];let p=i,l=a;for(Om(e,i,t),u(e[a],m)>0&&Om(e,i,a);p<l;){for(Om(e,p,l),++p,--l;u(e[p],m)<0;)++p;for(;u(e[l],m)>0;)--l}u(e[i],m)===0?Om(e,i,l):(++l,Om(e,l,a)),l<=t&&(i=l+1),t<=l&&(a=l-1)}return e}function Om(e,t,i){const a=e[t];e[t]=e[i],e[i]=a}function y6(e,t,i){if(e=Float64Array.from(l6(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return iM(e);if(t>=1)return nM(e);var a,u=(a-1)*t,m=Math.floor(u),p=nM(bD(e,m).subarray(0,m+1)),l=iM(e.subarray(m+1));return p+(l-p)*(u-m)}}function v6(e,t,i=_D){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+i(e[0],0,e);if(t>=1)return+i(e[a-1],a-1,e);var a,u=(a-1)*t,m=Math.floor(u),p=+i(e[m],m,e),l=+i(e[m+1],m+1,e);return p+(l-p)*(u-m)}}function _6(e,t,i){e=+e,t=+t,i=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+i;for(var a=-1,u=Math.max(0,Math.ceil((t-e)/i))|0,m=new Array(u);++a<u;)m[a]=e+a*i;return m}function $s(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ju(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Uw=Symbol("implicit");function b2(){var e=new tM,t=[],i=[],a=Uw;function u(m){let p=e.get(m);if(p===void 0){if(a!==Uw)return a;e.set(m,p=t.push(m)-1)}return i[p%i.length]}return u.domain=function(m){if(!arguments.length)return t.slice();t=[],e=new tM;for(const p of m)e.has(p)||e.set(p,t.push(p)-1);return u},u.range=function(m){return arguments.length?(i=Array.from(m),u):i.slice()},u.unknown=function(m){return arguments.length?(a=m,u):a},u.copy=function(){return b2(t,i).unknown(a)},$s.apply(u,arguments),u}function ig(){var e=b2().unknown(void 0),t=e.domain,i=e.range,a=0,u=1,m,p,l=!1,P=0,A=0,E=.5;delete e.unknown;function k(){var D=t().length,j=u<a,G=j?u:a,U=j?a:u;m=(U-G)/Math.max(1,D-P+A*2),l&&(m=Math.floor(m)),G+=(U-G-m*(D-P))*E,p=m*(1-P),l&&(G=Math.round(G),p=Math.round(p));var F=_6(D).map(function(X){return G+m*X});return i(j?F.reverse():F)}return e.domain=function(D){return arguments.length?(t(D),k()):t()},e.range=function(D){return arguments.length?([a,u]=D,a=+a,u=+u,k()):[a,u]},e.rangeRound=function(D){return[a,u]=D,a=+a,u=+u,l=!0,k()},e.bandwidth=function(){return p},e.step=function(){return m},e.round=function(D){return arguments.length?(l=!!D,k()):l},e.padding=function(D){return arguments.length?(P=Math.min(1,A=+D),k()):P},e.paddingInner=function(D){return arguments.length?(P=Math.min(1,D),k()):P},e.paddingOuter=function(D){return arguments.length?(A=+D,k()):A},e.align=function(D){return arguments.length?(E=Math.max(0,Math.min(1,D)),k()):E},e.copy=function(){return ig(t(),[a,u]).round(l).paddingInner(P).paddingOuter(A).align(E)},$s.apply(k(),arguments)}function wD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return wD(t())},e}function qm(){return wD(ig.apply(null,arguments).paddingInner(1))}function w2(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function SD(e,t){var i=Object.create(e.prototype);for(var a in t)i[a]=t[a];return i}function Lg(){}var ag=.7,iv=1/ag,rp="\\s*([+-]?\\d+)\\s*",og="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x6=/^#([0-9a-f]{3,8})$/,b6=new RegExp(`^rgb\\(${rp},${rp},${rp}\\)$`),w6=new RegExp(`^rgb\\(${Pc},${Pc},${Pc}\\)$`),S6=new RegExp(`^rgba\\(${rp},${rp},${rp},${og}\\)$`),P6=new RegExp(`^rgba\\(${Pc},${Pc},${Pc},${og}\\)$`),T6=new RegExp(`^hsl\\(${og},${Pc},${Pc}\\)$`),A6=new RegExp(`^hsla\\(${og},${Pc},${Pc},${og}\\)$`),aM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};w2(Lg,sg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oM,formatHex:oM,formatHex8:C6,formatHsl:E6,formatRgb:sM,toString:sM});function oM(){return this.rgb().formatHex()}function C6(){return this.rgb().formatHex8()}function E6(){return PD(this).formatHsl()}function sM(){return this.rgb().formatRgb()}function sg(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=x6.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?lM(t):i===3?new So(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Oy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Oy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=b6.exec(e))?new So(t[1],t[2],t[3],1):(t=w6.exec(e))?new So(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=S6.exec(e))?Oy(t[1],t[2],t[3],t[4]):(t=P6.exec(e))?Oy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=T6.exec(e))?hM(t[1],t[2]/100,t[3]/100,1):(t=A6.exec(e))?hM(t[1],t[2]/100,t[3]/100,t[4]):aM.hasOwnProperty(e)?lM(aM[e]):e==="transparent"?new So(NaN,NaN,NaN,0):null}function lM(e){return new So(e>>16&255,e>>8&255,e&255,1)}function Oy(e,t,i,a){return a<=0&&(e=t=i=NaN),new So(e,t,i,a)}function M6(e){return e instanceof Lg||(e=sg(e)),e?(e=e.rgb(),new So(e.r,e.g,e.b,e.opacity)):new So}function Vw(e,t,i,a){return arguments.length===1?M6(e):new So(e,t,i,a??1)}function So(e,t,i,a){this.r=+e,this.g=+t,this.b=+i,this.opacity=+a}w2(So,Vw,SD(Lg,{brighter(e){return e=e==null?iv:Math.pow(iv,e),new So(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ag:Math.pow(ag,e),new So(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new So(Ld(this.r),Ld(this.g),Ld(this.b),av(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cM,formatHex:cM,formatHex8:k6,formatRgb:uM,toString:uM}));function cM(){return`#${Dd(this.r)}${Dd(this.g)}${Dd(this.b)}`}function k6(){return`#${Dd(this.r)}${Dd(this.g)}${Dd(this.b)}${Dd((isNaN(this.opacity)?1:this.opacity)*255)}`}function uM(){const e=av(this.opacity);return`${e===1?"rgb(":"rgba("}${Ld(this.r)}, ${Ld(this.g)}, ${Ld(this.b)}${e===1?")":`, ${e})`}`}function av(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ld(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dd(e){return e=Ld(e),(e<16?"0":"")+e.toString(16)}function hM(e,t,i,a){return a<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Ml(e,t,i,a)}function PD(e){if(e instanceof Ml)return new Ml(e.h,e.s,e.l,e.opacity);if(e instanceof Lg||(e=sg(e)),!e)return new Ml;if(e instanceof Ml)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,u=Math.min(t,i,a),m=Math.max(t,i,a),p=NaN,l=m-u,P=(m+u)/2;return l?(t===m?p=(i-a)/l+(i<a)*6:i===m?p=(a-t)/l+2:p=(t-i)/l+4,l/=P<.5?m+u:2-m-u,p*=60):l=P>0&&P<1?0:p,new Ml(p,l,P,e.opacity)}function I6(e,t,i,a){return arguments.length===1?PD(e):new Ml(e,t,i,a??1)}function Ml(e,t,i,a){this.h=+e,this.s=+t,this.l=+i,this.opacity=+a}w2(Ml,I6,SD(Lg,{brighter(e){return e=e==null?iv:Math.pow(iv,e),new Ml(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ag:Math.pow(ag,e),new Ml(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*t,u=2*i-a;return new So(v1(e>=240?e-240:e+120,u,a),v1(e,u,a),v1(e<120?e+240:e-120,u,a),this.opacity)},clamp(){return new Ml(dM(this.h),Ry(this.s),Ry(this.l),av(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=av(this.opacity);return`${e===1?"hsl(":"hsla("}${dM(this.h)}, ${Ry(this.s)*100}%, ${Ry(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dM(e){return e=(e||0)%360,e<0?e+360:e}function Ry(e){return Math.max(0,Math.min(1,e||0))}function v1(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const S2=e=>()=>e;function O6(e,t){return function(i){return e+i*t}}function R6(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(a){return Math.pow(e+a*t,i)}}function D6(e){return(e=+e)==1?TD:function(t,i){return i-t?R6(t,i,e):S2(isNaN(t)?i:t)}}function TD(e,t){var i=t-e;return i?O6(e,i):S2(isNaN(e)?t:e)}const fM=(function e(t){var i=D6(t);function a(u,m){var p=i((u=Vw(u)).r,(m=Vw(m)).r),l=i(u.g,m.g),P=i(u.b,m.b),A=TD(u.opacity,m.opacity);return function(E){return u.r=p(E),u.g=l(E),u.b=P(E),u.opacity=A(E),u+""}}return a.gamma=e,a})(1);function z6(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,a=t.slice(),u;return function(m){for(u=0;u<i;++u)a[u]=e[u]*(1-m)+t[u]*m;return a}}function j6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function L6(e,t){var i=t?t.length:0,a=e?Math.min(i,e.length):0,u=new Array(a),m=new Array(i),p;for(p=0;p<a;++p)u[p]=$p(e[p],t[p]);for(;p<i;++p)m[p]=t[p];return function(l){for(p=0;p<a;++p)m[p]=u[p](l);return m}}function N6(e,t){var i=new Date;return e=+e,t=+t,function(a){return i.setTime(e*(1-a)+t*a),i}}function ov(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function B6(e,t){var i={},a={},u;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(u in t)u in e?i[u]=$p(e[u],t[u]):a[u]=t[u];return function(m){for(u in i)a[u]=i[u](m);return a}}var qw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_1=new RegExp(qw.source,"g");function F6(e){return function(){return e}}function $6(e){return function(t){return e(t)+""}}function U6(e,t){var i=qw.lastIndex=_1.lastIndex=0,a,u,m,p=-1,l=[],P=[];for(e=e+"",t=t+"";(a=qw.exec(e))&&(u=_1.exec(t));)(m=u.index)>i&&(m=t.slice(i,m),l[p]?l[p]+=m:l[++p]=m),(a=a[0])===(u=u[0])?l[p]?l[p]+=u:l[++p]=u:(l[++p]=null,P.push({i:p,x:ov(a,u)})),i=_1.lastIndex;return i<t.length&&(m=t.slice(i),l[p]?l[p]+=m:l[++p]=m),l.length<2?P[0]?$6(P[0].x):F6(t):(t=P.length,function(A){for(var E=0,k;E<t;++E)l[(k=P[E]).i]=k.x(A);return l.join("")})}function $p(e,t){var i=typeof t,a;return t==null||i==="boolean"?S2(t):(i==="number"?ov:i==="string"?(a=sg(t))?(t=a,fM):U6:t instanceof sg?fM:t instanceof Date?N6:j6(t)?z6:Array.isArray(t)?L6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?B6:ov)(e,t)}function P2(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function V6(e,t){t===void 0&&(t=e,e=$p);for(var i=0,a=t.length-1,u=t[0],m=new Array(a<0?0:a);i<a;)m[i]=e(u,u=t[++i]);return function(p){var l=Math.max(0,Math.min(a-1,Math.floor(p*=a)));return m[l](p-l)}}function q6(e){return function(){return e}}function sv(e){return+e}var pM=[0,1];function no(e){return e}function Gw(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:q6(isNaN(t)?NaN:.5)}function G6(e,t){var i;return e>t&&(i=e,e=t,t=i),function(a){return Math.max(e,Math.min(t,a))}}function W6(e,t,i){var a=e[0],u=e[1],m=t[0],p=t[1];return u<a?(a=Gw(u,a),m=i(p,m)):(a=Gw(a,u),m=i(m,p)),function(l){return m(a(l))}}function Z6(e,t,i){var a=Math.min(e.length,t.length)-1,u=new Array(a),m=new Array(a),p=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++p<a;)u[p]=Gw(e[p],e[p+1]),m[p]=i(t[p],t[p+1]);return function(l){var P=jg(e,l,1,a)-1;return m[P](u[P](l))}}function Ng(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function l_(){var e=pM,t=pM,i=$p,a,u,m,p=no,l,P,A;function E(){var D=Math.min(e.length,t.length);return p!==no&&(p=G6(e[0],e[D-1])),l=D>2?Z6:W6,P=A=null,k}function k(D){return D==null||isNaN(D=+D)?m:(P||(P=l(e.map(a),t,i)))(a(p(D)))}return k.invert=function(D){return p(u((A||(A=l(t,e.map(a),ov)))(D)))},k.domain=function(D){return arguments.length?(e=Array.from(D,sv),E()):e.slice()},k.range=function(D){return arguments.length?(t=Array.from(D),E()):t.slice()},k.rangeRound=function(D){return t=Array.from(D),i=P2,E()},k.clamp=function(D){return arguments.length?(p=D?!0:no,E()):p!==no},k.interpolate=function(D){return arguments.length?(i=D,E()):i},k.unknown=function(D){return arguments.length?(m=D,k):m},function(D,j){return a=D,u=j,E()}}function T2(){return l_()(no,no)}function H6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lv(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,a=e.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+e.slice(i+1)]}function up(e){return e=lv(Math.abs(e)),e?e[1]:NaN}function K6(e,t){return function(i,a){for(var u=i.length,m=[],p=0,l=e[0],P=0;u>0&&l>0&&(P+l+1>a&&(l=Math.max(1,a-P)),m.push(i.substring(u-=l,u+l)),!((P+=l+1)>a));)l=e[p=(p+1)%e.length];return m.reverse().join(t)}}function X6(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var Y6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lg(e){if(!(t=Y6.exec(e)))throw new Error("invalid format: "+e);var t;return new A2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lg.prototype=A2.prototype;function A2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}A2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function J6(e){e:for(var t=e.length,i=1,a=-1,u;i<t;++i)switch(e[i]){case".":a=u=i;break;case"0":a===0&&(a=i),u=i;break;default:if(!+e[i])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(u+1):e}var AD;function Q6(e,t){var i=lv(e,t);if(!i)return e+"";var a=i[0],u=i[1],m=u-(AD=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=a.length;return m===p?a:m>p?a+new Array(m-p+1).join("0"):m>0?a.slice(0,m)+"."+a.slice(m):"0."+new Array(1-m).join("0")+lv(e,Math.max(0,t+m-1))[0]}function mM(e,t){var i=lv(e,t);if(!i)return e+"";var a=i[0],u=i[1];return u<0?"0."+new Array(-u).join("0")+a:a.length>u+1?a.slice(0,u+1)+"."+a.slice(u+1):a+new Array(u-a.length+2).join("0")}const gM={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:H6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>mM(e*100,t),r:mM,s:Q6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yM(e){return e}var vM=Array.prototype.map,_M=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function e8(e){var t=e.grouping===void 0||e.thousands===void 0?yM:K6(vM.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",m=e.numerals===void 0?yM:X6(vM.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",P=e.nan===void 0?"NaN":e.nan+"";function A(k){k=lg(k);var D=k.fill,j=k.align,G=k.sign,U=k.symbol,F=k.zero,X=k.width,J=k.comma,te=k.precision,le=k.trim,Y=k.type;Y==="n"?(J=!0,Y="g"):gM[Y]||(te===void 0&&(te=12),le=!0,Y="g"),(F||D==="0"&&j==="=")&&(F=!0,D="0",j="=");var re=U==="$"?i:U==="#"&&/[boxX]/.test(Y)?"0"+Y.toLowerCase():"",de=U==="$"?a:/[%p]/.test(Y)?p:"",ge=gM[Y],Ie=/[defgprs%]/.test(Y);te=te===void 0?6:/[gprs]/.test(Y)?Math.max(1,Math.min(21,te)):Math.max(0,Math.min(20,te));function We(Oe){var Ve=re,Ke=de,ot,at,st;if(Y==="c")Ke=ge(Oe)+Ke,Oe="";else{Oe=+Oe;var lt=Oe<0||1/Oe<0;if(Oe=isNaN(Oe)?P:ge(Math.abs(Oe),te),le&&(Oe=J6(Oe)),lt&&+Oe==0&&G!=="+"&&(lt=!1),Ve=(lt?G==="("?G:l:G==="-"||G==="("?"":G)+Ve,Ke=(Y==="s"?_M[8+AD/3]:"")+Ke+(lt&&G==="("?")":""),Ie){for(ot=-1,at=Oe.length;++ot<at;)if(st=Oe.charCodeAt(ot),48>st||st>57){Ke=(st===46?u+Oe.slice(ot+1):Oe.slice(ot))+Ke,Oe=Oe.slice(0,ot);break}}}J&&!F&&(Oe=t(Oe,1/0));var Le=Ve.length+Oe.length+Ke.length,tt=Le<X?new Array(X-Le+1).join(D):"";switch(J&&F&&(Oe=t(tt+Oe,tt.length?X-Ke.length:1/0),tt=""),j){case"<":Oe=Ve+Oe+Ke+tt;break;case"=":Oe=Ve+tt+Oe+Ke;break;case"^":Oe=tt.slice(0,Le=tt.length>>1)+Ve+Oe+Ke+tt.slice(Le);break;default:Oe=tt+Ve+Oe+Ke;break}return m(Oe)}return We.toString=function(){return k+""},We}function E(k,D){var j=A((k=lg(k),k.type="f",k)),G=Math.max(-8,Math.min(8,Math.floor(up(D)/3)))*3,U=Math.pow(10,-G),F=_M[8+G/3];return function(X){return j(U*X)+F}}return{format:A,formatPrefix:E}}var Dy,C2,CD;t8({thousands:",",grouping:[3],currency:["$",""]});function t8(e){return Dy=e8(e),C2=Dy.format,CD=Dy.formatPrefix,Dy}function r8(e){return Math.max(0,-up(Math.abs(e)))}function n8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(up(t)/3)))*3-up(Math.abs(e)))}function i8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,up(t)-up(e))+1}function ED(e,t,i,a){var u=$w(e,t,i),m;switch(a=lg(a??",f"),a.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(m=n8(u,p))&&(a.precision=m),CD(a,p)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(m=i8(u,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=m-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(m=r8(u))&&(a.precision=m-(a.type==="%")*2);break}}return C2(a)}function kh(e){var t=e.domain;return e.ticks=function(i){var a=t();return Bw(a[0],a[a.length-1],i??10)},e.tickFormat=function(i,a){var u=t();return ED(u[0],u[u.length-1],i??10,a)},e.nice=function(i){i==null&&(i=10);var a=t(),u=0,m=a.length-1,p=a[u],l=a[m],P,A,E=10;for(l<p&&(A=p,p=l,l=A,A=u,u=m,m=A);E-- >0;){if(A=Fw(p,l,i),A===P)return a[u]=p,a[m]=l,t(a);if(A>0)p=Math.floor(p/A)*A,l=Math.ceil(l/A)*A;else if(A<0)p=Math.ceil(p*A)/A,l=Math.floor(l*A)/A;else break;P=A}return e},e}function cv(){var e=T2();return e.copy=function(){return Ng(e,cv())},$s.apply(e,arguments),kh(e)}function MD(e){var t;function i(a){return a==null||isNaN(a=+a)?t:a}return i.invert=i,i.domain=i.range=function(a){return arguments.length?(e=Array.from(a,sv),i):e.slice()},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return MD(e).unknown(t)},e=arguments.length?Array.from(e,sv):[0,1],kh(i)}function kD(e,t){e=e.slice();var i=0,a=e.length-1,u=e[i],m=e[a],p;return m<u&&(p=i,i=a,a=p,p=u,u=m,m=p),e[i]=t.floor(u),e[a]=t.ceil(m),e}function xM(e){return Math.log(e)}function bM(e){return Math.exp(e)}function a8(e){return-Math.log(-e)}function o8(e){return-Math.exp(-e)}function s8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function l8(e){return e===10?s8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function c8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wM(e){return(t,i)=>-e(-t,i)}function E2(e){const t=e(xM,bM),i=t.domain;let a=10,u,m;function p(){return u=c8(a),m=l8(a),i()[0]<0?(u=wM(u),m=wM(m),e(a8,o8)):e(xM,bM),t}return t.base=function(l){return arguments.length?(a=+l,p()):a},t.domain=function(l){return arguments.length?(i(l),p()):i()},t.ticks=l=>{const P=i();let A=P[0],E=P[P.length-1];const k=E<A;k&&([A,E]=[E,A]);let D=u(A),j=u(E),G,U;const F=l==null?10:+l;let X=[];if(!(a%1)&&j-D<F){if(D=Math.floor(D),j=Math.ceil(j),A>0){for(;D<=j;++D)for(G=1;G<a;++G)if(U=D<0?G/m(-D):G*m(D),!(U<A)){if(U>E)break;X.push(U)}}else for(;D<=j;++D)for(G=a-1;G>=1;--G)if(U=D>0?G/m(-D):G*m(D),!(U<A)){if(U>E)break;X.push(U)}X.length*2<F&&(X=Bw(A,E,F))}else X=Bw(D,j,Math.min(j-D,F)).map(m);return k?X.reverse():X},t.tickFormat=(l,P)=>{if(l==null&&(l=10),P==null&&(P=a===10?"s":","),typeof P!="function"&&(!(a%1)&&(P=lg(P)).precision==null&&(P.trim=!0),P=C2(P)),l===1/0)return P;const A=Math.max(1,a*l/t.ticks().length);return E=>{let k=E/m(Math.round(u(E)));return k*a<a-.5&&(k*=a),k<=A?P(E):""}},t.nice=()=>i(kD(i(),{floor:l=>m(Math.floor(u(l))),ceil:l=>m(Math.ceil(u(l)))})),t}function ID(){const e=E2(l_()).domain([1,10]);return e.copy=()=>Ng(e,ID()).base(e.base()),$s.apply(e,arguments),e}function SM(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PM(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function M2(e){var t=1,i=e(SM(t),PM(t));return i.constant=function(a){return arguments.length?e(SM(t=+a),PM(t)):t},kh(i)}function OD(){var e=M2(l_());return e.copy=function(){return Ng(e,OD()).constant(e.constant())},$s.apply(e,arguments)}function TM(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function u8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function h8(e){return e<0?-e*e:e*e}function k2(e){var t=e(no,no),i=1;function a(){return i===1?e(no,no):i===.5?e(u8,h8):e(TM(i),TM(1/i))}return t.exponent=function(u){return arguments.length?(i=+u,a()):i},kh(t)}function I2(){var e=k2(l_());return e.copy=function(){return Ng(e,I2()).exponent(e.exponent())},$s.apply(e,arguments),e}function d8(){return I2.apply(null,arguments).exponent(.5)}function AM(e){return Math.sign(e)*e*e}function f8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function RD(){var e=T2(),t=[0,1],i=!1,a;function u(m){var p=f8(e(m));return isNaN(p)?a:i?Math.round(p):p}return u.invert=function(m){return e.invert(AM(m))},u.domain=function(m){return arguments.length?(e.domain(m),u):e.domain()},u.range=function(m){return arguments.length?(e.range((t=Array.from(m,sv)).map(AM)),u):t.slice()},u.rangeRound=function(m){return u.range(m).round(!0)},u.round=function(m){return arguments.length?(i=!!m,u):i},u.clamp=function(m){return arguments.length?(e.clamp(m),u):e.clamp()},u.unknown=function(m){return arguments.length?(a=m,u):a},u.copy=function(){return RD(e.domain(),t).round(i).clamp(e.clamp()).unknown(a)},$s.apply(u,arguments),kh(u)}function DD(){var e=[],t=[],i=[],a;function u(){var p=0,l=Math.max(1,t.length);for(i=new Array(l-1);++p<l;)i[p-1]=v6(e,p/l);return m}function m(p){return p==null||isNaN(p=+p)?a:t[jg(i,p)]}return m.invertExtent=function(p){var l=t.indexOf(p);return l<0?[NaN,NaN]:[l>0?i[l-1]:e[0],l<i.length?i[l]:e[e.length-1]]},m.domain=function(p){if(!arguments.length)return e.slice();e=[];for(let l of p)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ah),u()},m.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},m.unknown=function(p){return arguments.length?(a=p,m):a},m.quantiles=function(){return i.slice()},m.copy=function(){return DD().domain(e).range(t).unknown(a)},$s.apply(m,arguments)}function zD(){var e=0,t=1,i=1,a=[.5],u=[0,1],m;function p(P){return P!=null&&P<=P?u[jg(a,P,0,i)]:m}function l(){var P=-1;for(a=new Array(i);++P<i;)a[P]=((P+1)*t-(P-i)*e)/(i+1);return p}return p.domain=function(P){return arguments.length?([e,t]=P,e=+e,t=+t,l()):[e,t]},p.range=function(P){return arguments.length?(i=(u=Array.from(P)).length-1,l()):u.slice()},p.invertExtent=function(P){var A=u.indexOf(P);return A<0?[NaN,NaN]:A<1?[e,a[0]]:A>=i?[a[i-1],t]:[a[A-1],a[A]]},p.unknown=function(P){return arguments.length&&(m=P),p},p.thresholds=function(){return a.slice()},p.copy=function(){return zD().domain([e,t]).range(u).unknown(m)},$s.apply(kh(p),arguments)}function jD(){var e=[.5],t=[0,1],i,a=1;function u(m){return m!=null&&m<=m?t[jg(e,m,0,a)]:i}return u.domain=function(m){return arguments.length?(e=Array.from(m),a=Math.min(e.length,t.length-1),u):e.slice()},u.range=function(m){return arguments.length?(t=Array.from(m),a=Math.min(e.length,t.length-1),u):t.slice()},u.invertExtent=function(m){var p=t.indexOf(m);return[e[p-1],e[p]]},u.unknown=function(m){return arguments.length?(i=m,u):i},u.copy=function(){return jD().domain(e).range(t).unknown(i)},$s.apply(u,arguments)}const x1=new Date,b1=new Date;function Hi(e,t,i,a){function u(m){return e(m=arguments.length===0?new Date:new Date(+m)),m}return u.floor=m=>(e(m=new Date(+m)),m),u.ceil=m=>(e(m=new Date(m-1)),t(m,1),e(m),m),u.round=m=>{const p=u(m),l=u.ceil(m);return m-p<l-m?p:l},u.offset=(m,p)=>(t(m=new Date(+m),p==null?1:Math.floor(p)),m),u.range=(m,p,l)=>{const P=[];if(m=u.ceil(m),l=l==null?1:Math.floor(l),!(m<p)||!(l>0))return P;let A;do P.push(A=new Date(+m)),t(m,l),e(m);while(A<m&&m<p);return P},u.filter=m=>Hi(p=>{if(p>=p)for(;e(p),!m(p);)p.setTime(p-1)},(p,l)=>{if(p>=p)if(l<0)for(;++l<=0;)for(;t(p,-1),!m(p););else for(;--l>=0;)for(;t(p,1),!m(p););}),i&&(u.count=(m,p)=>(x1.setTime(+m),b1.setTime(+p),e(x1),e(b1),Math.floor(i(x1,b1))),u.every=m=>(m=Math.floor(m),!isFinite(m)||!(m>0)?null:m>1?u.filter(a?p=>a(p)%m===0:p=>u.count(0,p)%m===0):u)),u}const uv=Hi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);uv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hi(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):uv);uv.range;const Au=1e3,Bs=Au*60,Cu=Bs*60,Iu=Cu*24,O2=Iu*7,CM=Iu*30,w1=Iu*365,zd=Hi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Au)},(e,t)=>(t-e)/Au,e=>e.getUTCSeconds());zd.range;const R2=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Au)},(e,t)=>{e.setTime(+e+t*Bs)},(e,t)=>(t-e)/Bs,e=>e.getMinutes());R2.range;const D2=Hi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bs)},(e,t)=>(t-e)/Bs,e=>e.getUTCMinutes());D2.range;const z2=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Au-e.getMinutes()*Bs)},(e,t)=>{e.setTime(+e+t*Cu)},(e,t)=>(t-e)/Cu,e=>e.getHours());z2.range;const j2=Hi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Cu)},(e,t)=>(t-e)/Cu,e=>e.getUTCHours());j2.range;const Bg=Hi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bs)/Iu,e=>e.getDate()-1);Bg.range;const c_=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Iu,e=>e.getUTCDate()-1);c_.range;const LD=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Iu,e=>Math.floor(e/Iu));LD.range;function Zd(e){return Hi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Bs)/O2)}const u_=Zd(0),hv=Zd(1),p8=Zd(2),m8=Zd(3),hp=Zd(4),g8=Zd(5),y8=Zd(6);u_.range;hv.range;p8.range;m8.range;hp.range;g8.range;y8.range;function Hd(e){return Hi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/O2)}const h_=Hd(0),dv=Hd(1),v8=Hd(2),_8=Hd(3),dp=Hd(4),x8=Hd(5),b8=Hd(6);h_.range;dv.range;v8.range;_8.range;dp.range;x8.range;b8.range;const L2=Hi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());L2.range;const N2=Hi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());N2.range;const Ou=Hi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ou.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});Ou.range;const Ru=Hi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ru.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});Ru.range;function ND(e,t,i,a,u,m){const p=[[zd,1,Au],[zd,5,5*Au],[zd,15,15*Au],[zd,30,30*Au],[m,1,Bs],[m,5,5*Bs],[m,15,15*Bs],[m,30,30*Bs],[u,1,Cu],[u,3,3*Cu],[u,6,6*Cu],[u,12,12*Cu],[a,1,Iu],[a,2,2*Iu],[i,1,O2],[t,1,CM],[t,3,3*CM],[e,1,w1]];function l(A,E,k){const D=E<A;D&&([A,E]=[E,A]);const j=k&&typeof k.range=="function"?k:P(A,E,k),G=j?j.range(A,+E+1):[];return D?G.reverse():G}function P(A,E,k){const D=Math.abs(E-A)/k,j=x2(([,,F])=>F).right(p,D);if(j===p.length)return e.every($w(A/w1,E/w1,k));if(j===0)return uv.every(Math.max($w(A,E,k),1));const[G,U]=p[D/p[j-1][2]<p[j][2]/D?j-1:j];return G.every(U)}return[l,P]}const[w8,S8]=ND(Ru,N2,h_,LD,j2,D2),[P8,T8]=ND(Ou,L2,u_,Bg,z2,R2);function S1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function P1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Rm(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function A8(e){var t=e.dateTime,i=e.date,a=e.time,u=e.periods,m=e.days,p=e.shortDays,l=e.months,P=e.shortMonths,A=Dm(u),E=zm(u),k=Dm(m),D=zm(m),j=Dm(p),G=zm(p),U=Dm(l),F=zm(l),X=Dm(P),J=zm(P),te={a:lt,A:Le,b:tt,B:ut,c:null,d:RM,e:RM,f:K8,g:aU,G:sU,H:W8,I:Z8,j:H8,L:BD,m:X8,M:Y8,p:Ae,q:qe,Q:jM,s:LM,S:J8,u:Q8,U:eU,V:tU,w:rU,W:nU,x:null,X:null,y:iU,Y:oU,Z:lU,"%":zM},le={a:yt,A:Rt,b:$t,B:Wt,c:null,d:DM,e:DM,f:dU,g:wU,G:PU,H:cU,I:uU,j:hU,L:$D,m:fU,M:pU,p:er,q:tr,Q:jM,s:LM,S:mU,u:gU,U:yU,V:vU,w:_U,W:xU,x:null,X:null,y:bU,Y:SU,Z:TU,"%":zM},Y={a:We,A:Oe,b:Ve,B:Ke,c:ot,d:IM,e:IM,f:U8,g:kM,G:MM,H:OM,I:OM,j:N8,L:$8,m:L8,M:B8,p:Ie,q:j8,Q:q8,s:G8,S:F8,u:I8,U:O8,V:R8,w:k8,W:D8,x:at,X:st,y:kM,Y:MM,Z:z8,"%":V8};te.x=re(i,te),te.X=re(a,te),te.c=re(t,te),le.x=re(i,le),le.X=re(a,le),le.c=re(t,le);function re(vt,Ft){return function(ir){var pt=[],dr=-1,rr=0,qr=vt.length,Zr,vn,qn;for(ir instanceof Date||(ir=new Date(+ir));++dr<qr;)vt.charCodeAt(dr)===37&&(pt.push(vt.slice(rr,dr)),(vn=EM[Zr=vt.charAt(++dr)])!=null?Zr=vt.charAt(++dr):vn=Zr==="e"?" ":"0",(qn=Ft[Zr])&&(Zr=qn(ir,vn)),pt.push(Zr),rr=dr+1);return pt.push(vt.slice(rr,dr)),pt.join("")}}function de(vt,Ft){return function(ir){var pt=Rm(1900,void 0,1),dr=ge(pt,vt,ir+="",0),rr,qr;if(dr!=ir.length)return null;if("Q"in pt)return new Date(pt.Q);if("s"in pt)return new Date(pt.s*1e3+("L"in pt?pt.L:0));if(Ft&&!("Z"in pt)&&(pt.Z=0),"p"in pt&&(pt.H=pt.H%12+pt.p*12),pt.m===void 0&&(pt.m="q"in pt?pt.q:0),"V"in pt){if(pt.V<1||pt.V>53)return null;"w"in pt||(pt.w=1),"Z"in pt?(rr=P1(Rm(pt.y,0,1)),qr=rr.getUTCDay(),rr=qr>4||qr===0?dv.ceil(rr):dv(rr),rr=c_.offset(rr,(pt.V-1)*7),pt.y=rr.getUTCFullYear(),pt.m=rr.getUTCMonth(),pt.d=rr.getUTCDate()+(pt.w+6)%7):(rr=S1(Rm(pt.y,0,1)),qr=rr.getDay(),rr=qr>4||qr===0?hv.ceil(rr):hv(rr),rr=Bg.offset(rr,(pt.V-1)*7),pt.y=rr.getFullYear(),pt.m=rr.getMonth(),pt.d=rr.getDate()+(pt.w+6)%7)}else("W"in pt||"U"in pt)&&("w"in pt||(pt.w="u"in pt?pt.u%7:"W"in pt?1:0),qr="Z"in pt?P1(Rm(pt.y,0,1)).getUTCDay():S1(Rm(pt.y,0,1)).getDay(),pt.m=0,pt.d="W"in pt?(pt.w+6)%7+pt.W*7-(qr+5)%7:pt.w+pt.U*7-(qr+6)%7);return"Z"in pt?(pt.H+=pt.Z/100|0,pt.M+=pt.Z%100,P1(pt)):S1(pt)}}function ge(vt,Ft,ir,pt){for(var dr=0,rr=Ft.length,qr=ir.length,Zr,vn;dr<rr;){if(pt>=qr)return-1;if(Zr=Ft.charCodeAt(dr++),Zr===37){if(Zr=Ft.charAt(dr++),vn=Y[Zr in EM?Ft.charAt(dr++):Zr],!vn||(pt=vn(vt,ir,pt))<0)return-1}else if(Zr!=ir.charCodeAt(pt++))return-1}return pt}function Ie(vt,Ft,ir){var pt=A.exec(Ft.slice(ir));return pt?(vt.p=E.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function We(vt,Ft,ir){var pt=j.exec(Ft.slice(ir));return pt?(vt.w=G.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function Oe(vt,Ft,ir){var pt=k.exec(Ft.slice(ir));return pt?(vt.w=D.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function Ve(vt,Ft,ir){var pt=X.exec(Ft.slice(ir));return pt?(vt.m=J.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function Ke(vt,Ft,ir){var pt=U.exec(Ft.slice(ir));return pt?(vt.m=F.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function ot(vt,Ft,ir){return ge(vt,t,Ft,ir)}function at(vt,Ft,ir){return ge(vt,i,Ft,ir)}function st(vt,Ft,ir){return ge(vt,a,Ft,ir)}function lt(vt){return p[vt.getDay()]}function Le(vt){return m[vt.getDay()]}function tt(vt){return P[vt.getMonth()]}function ut(vt){return l[vt.getMonth()]}function Ae(vt){return u[+(vt.getHours()>=12)]}function qe(vt){return 1+~~(vt.getMonth()/3)}function yt(vt){return p[vt.getUTCDay()]}function Rt(vt){return m[vt.getUTCDay()]}function $t(vt){return P[vt.getUTCMonth()]}function Wt(vt){return l[vt.getUTCMonth()]}function er(vt){return u[+(vt.getUTCHours()>=12)]}function tr(vt){return 1+~~(vt.getUTCMonth()/3)}return{format:function(vt){var Ft=re(vt+="",te);return Ft.toString=function(){return vt},Ft},parse:function(vt){var Ft=de(vt+="",!1);return Ft.toString=function(){return vt},Ft},utcFormat:function(vt){var Ft=re(vt+="",le);return Ft.toString=function(){return vt},Ft},utcParse:function(vt){var Ft=de(vt+="",!0);return Ft.toString=function(){return vt},Ft}}}var EM={"-":"",_:" ",0:"0"},aa=/^\s*\d+/,C8=/^%/,E8=/[\\^$*+?|[\]().{}]/g;function an(e,t,i){var a=e<0?"-":"",u=(a?-e:e)+"",m=u.length;return a+(m<i?new Array(i-m+1).join(t)+u:u)}function M8(e){return e.replace(E8,"\\$&")}function Dm(e){return new RegExp("^(?:"+e.map(M8).join("|")+")","i")}function zm(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function k8(e,t,i){var a=aa.exec(t.slice(i,i+1));return a?(e.w=+a[0],i+a[0].length):-1}function I8(e,t,i){var a=aa.exec(t.slice(i,i+1));return a?(e.u=+a[0],i+a[0].length):-1}function O8(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.U=+a[0],i+a[0].length):-1}function R8(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.V=+a[0],i+a[0].length):-1}function D8(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.W=+a[0],i+a[0].length):-1}function MM(e,t,i){var a=aa.exec(t.slice(i,i+4));return a?(e.y=+a[0],i+a[0].length):-1}function kM(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function z8(e,t,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function j8(e,t,i){var a=aa.exec(t.slice(i,i+1));return a?(e.q=a[0]*3-3,i+a[0].length):-1}function L8(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.m=a[0]-1,i+a[0].length):-1}function IM(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.d=+a[0],i+a[0].length):-1}function N8(e,t,i){var a=aa.exec(t.slice(i,i+3));return a?(e.m=0,e.d=+a[0],i+a[0].length):-1}function OM(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.H=+a[0],i+a[0].length):-1}function B8(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.M=+a[0],i+a[0].length):-1}function F8(e,t,i){var a=aa.exec(t.slice(i,i+2));return a?(e.S=+a[0],i+a[0].length):-1}function $8(e,t,i){var a=aa.exec(t.slice(i,i+3));return a?(e.L=+a[0],i+a[0].length):-1}function U8(e,t,i){var a=aa.exec(t.slice(i,i+6));return a?(e.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function V8(e,t,i){var a=C8.exec(t.slice(i,i+1));return a?i+a[0].length:-1}function q8(e,t,i){var a=aa.exec(t.slice(i));return a?(e.Q=+a[0],i+a[0].length):-1}function G8(e,t,i){var a=aa.exec(t.slice(i));return a?(e.s=+a[0],i+a[0].length):-1}function RM(e,t){return an(e.getDate(),t,2)}function W8(e,t){return an(e.getHours(),t,2)}function Z8(e,t){return an(e.getHours()%12||12,t,2)}function H8(e,t){return an(1+Bg.count(Ou(e),e),t,3)}function BD(e,t){return an(e.getMilliseconds(),t,3)}function K8(e,t){return BD(e,t)+"000"}function X8(e,t){return an(e.getMonth()+1,t,2)}function Y8(e,t){return an(e.getMinutes(),t,2)}function J8(e,t){return an(e.getSeconds(),t,2)}function Q8(e){var t=e.getDay();return t===0?7:t}function eU(e,t){return an(u_.count(Ou(e)-1,e),t,2)}function FD(e){var t=e.getDay();return t>=4||t===0?hp(e):hp.ceil(e)}function tU(e,t){return e=FD(e),an(hp.count(Ou(e),e)+(Ou(e).getDay()===4),t,2)}function rU(e){return e.getDay()}function nU(e,t){return an(hv.count(Ou(e)-1,e),t,2)}function iU(e,t){return an(e.getFullYear()%100,t,2)}function aU(e,t){return e=FD(e),an(e.getFullYear()%100,t,2)}function oU(e,t){return an(e.getFullYear()%1e4,t,4)}function sU(e,t){var i=e.getDay();return e=i>=4||i===0?hp(e):hp.ceil(e),an(e.getFullYear()%1e4,t,4)}function lU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+an(t/60|0,"0",2)+an(t%60,"0",2)}function DM(e,t){return an(e.getUTCDate(),t,2)}function cU(e,t){return an(e.getUTCHours(),t,2)}function uU(e,t){return an(e.getUTCHours()%12||12,t,2)}function hU(e,t){return an(1+c_.count(Ru(e),e),t,3)}function $D(e,t){return an(e.getUTCMilliseconds(),t,3)}function dU(e,t){return $D(e,t)+"000"}function fU(e,t){return an(e.getUTCMonth()+1,t,2)}function pU(e,t){return an(e.getUTCMinutes(),t,2)}function mU(e,t){return an(e.getUTCSeconds(),t,2)}function gU(e){var t=e.getUTCDay();return t===0?7:t}function yU(e,t){return an(h_.count(Ru(e)-1,e),t,2)}function UD(e){var t=e.getUTCDay();return t>=4||t===0?dp(e):dp.ceil(e)}function vU(e,t){return e=UD(e),an(dp.count(Ru(e),e)+(Ru(e).getUTCDay()===4),t,2)}function _U(e){return e.getUTCDay()}function xU(e,t){return an(dv.count(Ru(e)-1,e),t,2)}function bU(e,t){return an(e.getUTCFullYear()%100,t,2)}function wU(e,t){return e=UD(e),an(e.getUTCFullYear()%100,t,2)}function SU(e,t){return an(e.getUTCFullYear()%1e4,t,4)}function PU(e,t){var i=e.getUTCDay();return e=i>=4||i===0?dp(e):dp.ceil(e),an(e.getUTCFullYear()%1e4,t,4)}function TU(){return"+0000"}function zM(){return"%"}function jM(e){return+e}function LM(e){return Math.floor(+e/1e3)}var qf,VD,qD;AU({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function AU(e){return qf=A8(e),VD=qf.format,qf.parse,qD=qf.utcFormat,qf.utcParse,qf}function CU(e){return new Date(e)}function EU(e){return e instanceof Date?+e:+new Date(+e)}function B2(e,t,i,a,u,m,p,l,P,A){var E=T2(),k=E.invert,D=E.domain,j=A(".%L"),G=A(":%S"),U=A("%I:%M"),F=A("%I %p"),X=A("%a %d"),J=A("%b %d"),te=A("%B"),le=A("%Y");function Y(re){return(P(re)<re?j:l(re)<re?G:p(re)<re?U:m(re)<re?F:a(re)<re?u(re)<re?X:J:i(re)<re?te:le)(re)}return E.invert=function(re){return new Date(k(re))},E.domain=function(re){return arguments.length?D(Array.from(re,EU)):D().map(CU)},E.ticks=function(re){var de=D();return e(de[0],de[de.length-1],re??10)},E.tickFormat=function(re,de){return de==null?Y:A(de)},E.nice=function(re){var de=D();return(!re||typeof re.range!="function")&&(re=t(de[0],de[de.length-1],re??10)),re?D(kD(de,re)):E},E.copy=function(){return Ng(E,B2(e,t,i,a,u,m,p,l,P,A))},E}function MU(){return $s.apply(B2(P8,T8,Ou,L2,u_,Bg,z2,R2,zd,VD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kU(){return $s.apply(B2(w8,S8,Ru,N2,h_,c_,j2,D2,zd,qD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function d_(){var e=0,t=1,i,a,u,m,p=no,l=!1,P;function A(k){return k==null||isNaN(k=+k)?P:p(u===0?.5:(k=(m(k)-i)*u,l?Math.max(0,Math.min(1,k)):k))}A.domain=function(k){return arguments.length?([e,t]=k,i=m(e=+e),a=m(t=+t),u=i===a?0:1/(a-i),A):[e,t]},A.clamp=function(k){return arguments.length?(l=!!k,A):l},A.interpolator=function(k){return arguments.length?(p=k,A):p};function E(k){return function(D){var j,G;return arguments.length?([j,G]=D,p=k(j,G),A):[p(0),p(1)]}}return A.range=E($p),A.rangeRound=E(P2),A.unknown=function(k){return arguments.length?(P=k,A):P},function(k){return m=k,i=k(e),a=k(t),u=i===a?0:1/(a-i),A}}function Ih(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function GD(){var e=kh(d_()(no));return e.copy=function(){return Ih(e,GD())},ju.apply(e,arguments)}function WD(){var e=E2(d_()).domain([1,10]);return e.copy=function(){return Ih(e,WD()).base(e.base())},ju.apply(e,arguments)}function ZD(){var e=M2(d_());return e.copy=function(){return Ih(e,ZD()).constant(e.constant())},ju.apply(e,arguments)}function F2(){var e=k2(d_());return e.copy=function(){return Ih(e,F2()).exponent(e.exponent())},ju.apply(e,arguments)}function IU(){return F2.apply(null,arguments).exponent(.5)}function HD(){var e=[],t=no;function i(a){if(a!=null&&!isNaN(a=+a))return t((jg(e,a,1)-1)/(e.length-1))}return i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let u of a)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ah),i},i.interpolator=function(a){return arguments.length?(t=a,i):t},i.range=function(){return e.map((a,u)=>t(u/(e.length-1)))},i.quantiles=function(a){return Array.from({length:a+1},(u,m)=>y6(e,m/a))},i.copy=function(){return HD(t).domain(e)},ju.apply(i,arguments)}function f_(){var e=0,t=.5,i=1,a=1,u,m,p,l,P,A=no,E,k=!1,D;function j(U){return isNaN(U=+U)?D:(U=.5+((U=+E(U))-m)*(a*U<a*m?l:P),A(k?Math.max(0,Math.min(1,U)):U))}j.domain=function(U){return arguments.length?([e,t,i]=U,u=E(e=+e),m=E(t=+t),p=E(i=+i),l=u===m?0:.5/(m-u),P=m===p?0:.5/(p-m),a=m<u?-1:1,j):[e,t,i]},j.clamp=function(U){return arguments.length?(k=!!U,j):k},j.interpolator=function(U){return arguments.length?(A=U,j):A};function G(U){return function(F){var X,J,te;return arguments.length?([X,J,te]=F,A=V6(U,[X,J,te]),j):[A(0),A(.5),A(1)]}}return j.range=G($p),j.rangeRound=G(P2),j.unknown=function(U){return arguments.length?(D=U,j):D},function(U){return E=U,u=U(e),m=U(t),p=U(i),l=u===m?0:.5/(m-u),P=m===p?0:.5/(p-m),a=m<u?-1:1,j}}function KD(){var e=kh(f_()(no));return e.copy=function(){return Ih(e,KD())},ju.apply(e,arguments)}function XD(){var e=E2(f_()).domain([.1,1,10]);return e.copy=function(){return Ih(e,XD()).base(e.base())},ju.apply(e,arguments)}function YD(){var e=M2(f_());return e.copy=function(){return Ih(e,YD()).constant(e.constant())},ju.apply(e,arguments)}function $2(){var e=k2(f_());return e.copy=function(){return Ih(e,$2()).exponent(e.exponent())},ju.apply(e,arguments)}function OU(){return $2.apply(null,arguments).exponent(.5)}const NM=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ig,scaleDiverging:KD,scaleDivergingLog:XD,scaleDivergingPow:$2,scaleDivergingSqrt:OU,scaleDivergingSymlog:YD,scaleIdentity:MD,scaleImplicit:Uw,scaleLinear:cv,scaleLog:ID,scaleOrdinal:b2,scalePoint:qm,scalePow:I2,scaleQuantile:DD,scaleQuantize:zD,scaleRadial:RD,scaleSequential:GD,scaleSequentialLog:WD,scaleSequentialPow:F2,scaleSequentialQuantile:HD,scaleSequentialSqrt:IU,scaleSequentialSymlog:ZD,scaleSqrt:d8,scaleSymlog:OD,scaleThreshold:jD,scaleTime:MU,scaleUtc:kU,tickFormat:ED},Symbol.toStringTag,{value:"Module"}));var T1,BM;function p_(){if(BM)return T1;BM=1;var e=Lp();function t(i,a,u){for(var m=-1,p=i.length;++m<p;){var l=i[m],P=a(l);if(P!=null&&(A===void 0?P===P&&!e(P):u(P,A)))var A=P,E=l}return E}return T1=t,T1}var A1,FM;function JD(){if(FM)return A1;FM=1;function e(t,i){return t>i}return A1=e,A1}var C1,$M;function RU(){if($M)return C1;$M=1;var e=p_(),t=JD(),i=Fp();function a(u){return u&&u.length?e(u,i,t):void 0}return C1=a,C1}var DU=RU();const m_=mn(DU);var E1,UM;function QD(){if(UM)return E1;UM=1;function e(t,i){return t<i}return E1=e,E1}var M1,VM;function zU(){if(VM)return M1;VM=1;var e=p_(),t=QD(),i=Fp();function a(u){return u&&u.length?e(u,i,t):void 0}return M1=a,M1}var jU=zU();const g_=mn(jU);var k1,qM;function LU(){if(qM)return k1;qM=1;var e=n2(),t=Mc(),i=lD(),a=To();function u(m,p){var l=a(m)?e:i;return l(m,t(p,3))}return k1=u,k1}var I1,GM;function NU(){if(GM)return I1;GM=1;var e=oD(),t=LU();function i(a,u){return e(t(a,u),1)}return I1=i,I1}var BU=NU();const FU=mn(BU);var O1,WM;function $U(){if(WM)return O1;WM=1;var e=g2();function t(i,a){return e(i,a)}return O1=t,O1}var UU=$U();const Fg=mn(UU);var Up=1e9,VU={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},V2,Hn=!0,Fs="[DecimalError] ",Nd=Fs+"Invalid argument: ",U2=Fs+"Exponent out of range: ",Vp=Math.floor,Od=Math.pow,qU=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,es,na=1e7,Vn=7,ez=9007199254740991,fv=Vp(ez/Vn),Ht={};Ht.absoluteValue=Ht.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ht.comparedTo=Ht.cmp=function(e){var t,i,a,u,m=this;if(e=new m.constructor(e),m.s!==e.s)return m.s||-e.s;if(m.e!==e.e)return m.e>e.e^m.s<0?1:-1;for(a=m.d.length,u=e.d.length,t=0,i=a<u?a:u;t<i;++t)if(m.d[t]!==e.d[t])return m.d[t]>e.d[t]^m.s<0?1:-1;return a===u?0:a>u^m.s<0?1:-1};Ht.decimalPlaces=Ht.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*Vn;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};Ht.dividedBy=Ht.div=function(e){return Mu(this,new this.constructor(e))};Ht.dividedToIntegerBy=Ht.idiv=function(e){var t=this,i=t.constructor;return wn(Mu(t,new i(e),0,1),i.precision)};Ht.equals=Ht.eq=function(e){return!this.cmp(e)};Ht.exponent=function(){return Mi(this)};Ht.greaterThan=Ht.gt=function(e){return this.cmp(e)>0};Ht.greaterThanOrEqualTo=Ht.gte=function(e){return this.cmp(e)>=0};Ht.isInteger=Ht.isint=function(){return this.e>this.d.length-2};Ht.isNegative=Ht.isneg=function(){return this.s<0};Ht.isPositive=Ht.ispos=function(){return this.s>0};Ht.isZero=function(){return this.s===0};Ht.lessThan=Ht.lt=function(e){return this.cmp(e)<0};Ht.lessThanOrEqualTo=Ht.lte=function(e){return this.cmp(e)<1};Ht.logarithm=Ht.log=function(e){var t,i=this,a=i.constructor,u=a.precision,m=u+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(es))throw Error(Fs+"NaN");if(i.s<1)throw Error(Fs+(i.s?"NaN":"-Infinity"));return i.eq(es)?new a(0):(Hn=!1,t=Mu(cg(i,m),cg(e,m),m),Hn=!0,wn(t,u))};Ht.minus=Ht.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?nz(t,e):tz(t,(e.s=-e.s,e))};Ht.modulo=Ht.mod=function(e){var t,i=this,a=i.constructor,u=a.precision;if(e=new a(e),!e.s)throw Error(Fs+"NaN");return i.s?(Hn=!1,t=Mu(i,e,0,1).times(e),Hn=!0,i.minus(t)):wn(new a(i),u)};Ht.naturalExponential=Ht.exp=function(){return rz(this)};Ht.naturalLogarithm=Ht.ln=function(){return cg(this)};Ht.negated=Ht.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ht.plus=Ht.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?tz(t,e):nz(t,(e.s=-e.s,e))};Ht.precision=Ht.sd=function(e){var t,i,a,u=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Nd+e);if(t=Mi(u)+1,a=u.d.length-1,i=a*Vn+1,a=u.d[a],a){for(;a%10==0;a/=10)i--;for(a=u.d[0];a>=10;a/=10)i++}return e&&t>i?t:i};Ht.squareRoot=Ht.sqrt=function(){var e,t,i,a,u,m,p,l=this,P=l.constructor;if(l.s<1){if(!l.s)return new P(0);throw Error(Fs+"NaN")}for(e=Mi(l),Hn=!1,u=Math.sqrt(+l),u==0||u==1/0?(t=Sc(l.d),(t.length+e)%2==0&&(t+="0"),u=Math.sqrt(t),e=Vp((e+1)/2)-(e<0||e%2),u==1/0?t="5e"+e:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new P(t)):a=new P(u.toString()),i=P.precision,u=p=i+3;;)if(m=a,a=m.plus(Mu(l,m,p+2)).times(.5),Sc(m.d).slice(0,p)===(t=Sc(a.d)).slice(0,p)){if(t=t.slice(p-3,p+1),u==p&&t=="4999"){if(wn(m,i+1,0),m.times(m).eq(l)){a=m;break}}else if(t!="9999")break;p+=4}return Hn=!0,wn(a,i)};Ht.times=Ht.mul=function(e){var t,i,a,u,m,p,l,P,A,E=this,k=E.constructor,D=E.d,j=(e=new k(e)).d;if(!E.s||!e.s)return new k(0);for(e.s*=E.s,i=E.e+e.e,P=D.length,A=j.length,P<A&&(m=D,D=j,j=m,p=P,P=A,A=p),m=[],p=P+A,a=p;a--;)m.push(0);for(a=A;--a>=0;){for(t=0,u=P+a;u>a;)l=m[u]+j[a]*D[u-a-1]+t,m[u--]=l%na|0,t=l/na|0;m[u]=(m[u]+t)%na|0}for(;!m[--p];)m.pop();return t?++i:m.shift(),e.d=m,e.e=i,Hn?wn(e,k.precision):e};Ht.toDecimalPlaces=Ht.todp=function(e,t){var i=this,a=i.constructor;return i=new a(i),e===void 0?i:(Ac(e,0,Up),t===void 0?t=a.rounding:Ac(t,0,8),wn(i,e+Mi(i)+1,t))};Ht.toExponential=function(e,t){var i,a=this,u=a.constructor;return e===void 0?i=Ud(a,!0):(Ac(e,0,Up),t===void 0?t=u.rounding:Ac(t,0,8),a=wn(new u(a),e+1,t),i=Ud(a,!0,e+1)),i};Ht.toFixed=function(e,t){var i,a,u=this,m=u.constructor;return e===void 0?Ud(u):(Ac(e,0,Up),t===void 0?t=m.rounding:Ac(t,0,8),a=wn(new m(u),e+Mi(u)+1,t),i=Ud(a.abs(),!1,e+Mi(a)+1),u.isneg()&&!u.isZero()?"-"+i:i)};Ht.toInteger=Ht.toint=function(){var e=this,t=e.constructor;return wn(new t(e),Mi(e)+1,t.rounding)};Ht.toNumber=function(){return+this};Ht.toPower=Ht.pow=function(e){var t,i,a,u,m,p,l=this,P=l.constructor,A=12,E=+(e=new P(e));if(!e.s)return new P(es);if(l=new P(l),!l.s){if(e.s<1)throw Error(Fs+"Infinity");return l}if(l.eq(es))return l;if(a=P.precision,e.eq(es))return wn(l,a);if(t=e.e,i=e.d.length-1,p=t>=i,m=l.s,p){if((i=E<0?-E:E)<=ez){for(u=new P(es),t=Math.ceil(a/Vn+4),Hn=!1;i%2&&(u=u.times(l),HM(u.d,t)),i=Vp(i/2),i!==0;)l=l.times(l),HM(l.d,t);return Hn=!0,e.s<0?new P(es).div(u):wn(u,a)}}else if(m<0)throw Error(Fs+"NaN");return m=m<0&&e.d[Math.max(t,i)]&1?-1:1,l.s=1,Hn=!1,u=e.times(cg(l,a+A)),Hn=!0,u=rz(u),u.s=m,u};Ht.toPrecision=function(e,t){var i,a,u=this,m=u.constructor;return e===void 0?(i=Mi(u),a=Ud(u,i<=m.toExpNeg||i>=m.toExpPos)):(Ac(e,1,Up),t===void 0?t=m.rounding:Ac(t,0,8),u=wn(new m(u),e,t),i=Mi(u),a=Ud(u,e<=i||i<=m.toExpNeg,e)),a};Ht.toSignificantDigits=Ht.tosd=function(e,t){var i=this,a=i.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ac(e,1,Up),t===void 0?t=a.rounding:Ac(t,0,8)),wn(new a(i),e,t)};Ht.toString=Ht.valueOf=Ht.val=Ht.toJSON=Ht[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Mi(e),i=e.constructor;return Ud(e,t<=i.toExpNeg||t>=i.toExpPos)};function tz(e,t){var i,a,u,m,p,l,P,A,E=e.constructor,k=E.precision;if(!e.s||!t.s)return t.s||(t=new E(e)),Hn?wn(t,k):t;if(P=e.d,A=t.d,p=e.e,u=t.e,P=P.slice(),m=p-u,m){for(m<0?(a=P,m=-m,l=A.length):(a=A,u=p,l=P.length),p=Math.ceil(k/Vn),l=p>l?p+1:l+1,m>l&&(m=l,a.length=1),a.reverse();m--;)a.push(0);a.reverse()}for(l=P.length,m=A.length,l-m<0&&(m=l,a=A,A=P,P=a),i=0;m;)i=(P[--m]=P[m]+A[m]+i)/na|0,P[m]%=na;for(i&&(P.unshift(i),++u),l=P.length;P[--l]==0;)P.pop();return t.d=P,t.e=u,Hn?wn(t,k):t}function Ac(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Nd+e)}function Sc(e){var t,i,a,u=e.length-1,m="",p=e[0];if(u>0){for(m+=p,t=1;t<u;t++)a=e[t]+"",i=Vn-a.length,i&&(m+=bh(i)),m+=a;p=e[t],a=p+"",i=Vn-a.length,i&&(m+=bh(i))}else if(p===0)return"0";for(;p%10===0;)p/=10;return m+p}var Mu=(function(){function e(a,u){var m,p=0,l=a.length;for(a=a.slice();l--;)m=a[l]*u+p,a[l]=m%na|0,p=m/na|0;return p&&a.unshift(p),a}function t(a,u,m,p){var l,P;if(m!=p)P=m>p?1:-1;else for(l=P=0;l<m;l++)if(a[l]!=u[l]){P=a[l]>u[l]?1:-1;break}return P}function i(a,u,m){for(var p=0;m--;)a[m]-=p,p=a[m]<u[m]?1:0,a[m]=p*na+a[m]-u[m];for(;!a[0]&&a.length>1;)a.shift()}return function(a,u,m,p){var l,P,A,E,k,D,j,G,U,F,X,J,te,le,Y,re,de,ge,Ie=a.constructor,We=a.s==u.s?1:-1,Oe=a.d,Ve=u.d;if(!a.s)return new Ie(a);if(!u.s)throw Error(Fs+"Division by zero");for(P=a.e-u.e,de=Ve.length,Y=Oe.length,j=new Ie(We),G=j.d=[],A=0;Ve[A]==(Oe[A]||0);)++A;if(Ve[A]>(Oe[A]||0)&&--P,m==null?J=m=Ie.precision:p?J=m+(Mi(a)-Mi(u))+1:J=m,J<0)return new Ie(0);if(J=J/Vn+2|0,A=0,de==1)for(E=0,Ve=Ve[0],J++;(A<Y||E)&&J--;A++)te=E*na+(Oe[A]||0),G[A]=te/Ve|0,E=te%Ve|0;else{for(E=na/(Ve[0]+1)|0,E>1&&(Ve=e(Ve,E),Oe=e(Oe,E),de=Ve.length,Y=Oe.length),le=de,U=Oe.slice(0,de),F=U.length;F<de;)U[F++]=0;ge=Ve.slice(),ge.unshift(0),re=Ve[0],Ve[1]>=na/2&&++re;do E=0,l=t(Ve,U,de,F),l<0?(X=U[0],de!=F&&(X=X*na+(U[1]||0)),E=X/re|0,E>1?(E>=na&&(E=na-1),k=e(Ve,E),D=k.length,F=U.length,l=t(k,U,D,F),l==1&&(E--,i(k,de<D?ge:Ve,D))):(E==0&&(l=E=1),k=Ve.slice()),D=k.length,D<F&&k.unshift(0),i(U,k,F),l==-1&&(F=U.length,l=t(Ve,U,de,F),l<1&&(E++,i(U,de<F?ge:Ve,F))),F=U.length):l===0&&(E++,U=[0]),G[A++]=E,l&&U[0]?U[F++]=Oe[le]||0:(U=[Oe[le]],F=1);while((le++<Y||U[0]!==void 0)&&J--)}return G[0]||G.shift(),j.e=P,wn(j,p?m+Mi(j)+1:m)}})();function rz(e,t){var i,a,u,m,p,l,P=0,A=0,E=e.constructor,k=E.precision;if(Mi(e)>16)throw Error(U2+Mi(e));if(!e.s)return new E(es);for(Hn=!1,l=k,p=new E(.03125);e.abs().gte(.1);)e=e.times(p),A+=5;for(a=Math.log(Od(2,A))/Math.LN10*2+5|0,l+=a,i=u=m=new E(es),E.precision=l;;){if(u=wn(u.times(e),l),i=i.times(++P),p=m.plus(Mu(u,i,l)),Sc(p.d).slice(0,l)===Sc(m.d).slice(0,l)){for(;A--;)m=wn(m.times(m),l);return E.precision=k,t==null?(Hn=!0,wn(m,k)):m}m=p}}function Mi(e){for(var t=e.e*Vn,i=e.d[0];i>=10;i/=10)t++;return t}function R1(e,t,i){if(t>e.LN10.sd())throw Hn=!0,i&&(e.precision=i),Error(Fs+"LN10 precision limit exceeded");return wn(new e(e.LN10),t)}function bh(e){for(var t="";e--;)t+="0";return t}function cg(e,t){var i,a,u,m,p,l,P,A,E,k=1,D=10,j=e,G=j.d,U=j.constructor,F=U.precision;if(j.s<1)throw Error(Fs+(j.s?"NaN":"-Infinity"));if(j.eq(es))return new U(0);if(t==null?(Hn=!1,A=F):A=t,j.eq(10))return t==null&&(Hn=!0),R1(U,A);if(A+=D,U.precision=A,i=Sc(G),a=i.charAt(0),m=Mi(j),Math.abs(m)<15e14){for(;a<7&&a!=1||a==1&&i.charAt(1)>3;)j=j.times(e),i=Sc(j.d),a=i.charAt(0),k++;m=Mi(j),a>1?(j=new U("0."+i),m++):j=new U(a+"."+i.slice(1))}else return P=R1(U,A+2,F).times(m+""),j=cg(new U(a+"."+i.slice(1)),A-D).plus(P),U.precision=F,t==null?(Hn=!0,wn(j,F)):j;for(l=p=j=Mu(j.minus(es),j.plus(es),A),E=wn(j.times(j),A),u=3;;){if(p=wn(p.times(E),A),P=l.plus(Mu(p,new U(u),A)),Sc(P.d).slice(0,A)===Sc(l.d).slice(0,A))return l=l.times(2),m!==0&&(l=l.plus(R1(U,A+2,F).times(m+""))),l=Mu(l,new U(k),A),U.precision=F,t==null?(Hn=!0,wn(l,F)):l;l=P,u+=2}}function ZM(e,t){var i,a,u;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(i<0&&(i=a),i+=+t.slice(a+1),t=t.substring(0,a)):i<0&&(i=t.length),a=0;t.charCodeAt(a)===48;)++a;for(u=t.length;t.charCodeAt(u-1)===48;)--u;if(t=t.slice(a,u),t){if(u-=a,i=i-a-1,e.e=Vp(i/Vn),e.d=[],a=(i+1)%Vn,i<0&&(a+=Vn),a<u){for(a&&e.d.push(+t.slice(0,a)),u-=Vn;a<u;)e.d.push(+t.slice(a,a+=Vn));t=t.slice(a),a=Vn-t.length}else a-=u;for(;a--;)t+="0";if(e.d.push(+t),Hn&&(e.e>fv||e.e<-fv))throw Error(U2+i)}else e.s=0,e.e=0,e.d=[0];return e}function wn(e,t,i){var a,u,m,p,l,P,A,E,k=e.d;for(p=1,m=k[0];m>=10;m/=10)p++;if(a=t-p,a<0)a+=Vn,u=t,A=k[E=0];else{if(E=Math.ceil((a+1)/Vn),m=k.length,E>=m)return e;for(A=m=k[E],p=1;m>=10;m/=10)p++;a%=Vn,u=a-Vn+p}if(i!==void 0&&(m=Od(10,p-u-1),l=A/m%10|0,P=t<0||k[E+1]!==void 0||A%m,P=i<4?(l||P)&&(i==0||i==(e.s<0?3:2)):l>5||l==5&&(i==4||P||i==6&&(a>0?u>0?A/Od(10,p-u):0:k[E-1])%10&1||i==(e.s<0?8:7))),t<1||!k[0])return P?(m=Mi(e),k.length=1,t=t-m-1,k[0]=Od(10,(Vn-t%Vn)%Vn),e.e=Vp(-t/Vn)||0):(k.length=1,k[0]=e.e=e.s=0),e;if(a==0?(k.length=E,m=1,E--):(k.length=E+1,m=Od(10,Vn-a),k[E]=u>0?(A/Od(10,p-u)%Od(10,u)|0)*m:0),P)for(;;)if(E==0){(k[0]+=m)==na&&(k[0]=1,++e.e);break}else{if(k[E]+=m,k[E]!=na)break;k[E--]=0,m=1}for(a=k.length;k[--a]===0;)k.pop();if(Hn&&(e.e>fv||e.e<-fv))throw Error(U2+Mi(e));return e}function nz(e,t){var i,a,u,m,p,l,P,A,E,k,D=e.constructor,j=D.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new D(e),Hn?wn(t,j):t;if(P=e.d,k=t.d,a=t.e,A=e.e,P=P.slice(),p=A-a,p){for(E=p<0,E?(i=P,p=-p,l=k.length):(i=k,a=A,l=P.length),u=Math.max(Math.ceil(j/Vn),l)+2,p>u&&(p=u,i.length=1),i.reverse(),u=p;u--;)i.push(0);i.reverse()}else{for(u=P.length,l=k.length,E=u<l,E&&(l=u),u=0;u<l;u++)if(P[u]!=k[u]){E=P[u]<k[u];break}p=0}for(E&&(i=P,P=k,k=i,t.s=-t.s),l=P.length,u=k.length-l;u>0;--u)P[l++]=0;for(u=k.length;u>p;){if(P[--u]<k[u]){for(m=u;m&&P[--m]===0;)P[m]=na-1;--P[m],P[u]+=na}P[u]-=k[u]}for(;P[--l]===0;)P.pop();for(;P[0]===0;P.shift())--a;return P[0]?(t.d=P,t.e=a,Hn?wn(t,j):t):new D(0)}function Ud(e,t,i){var a,u=Mi(e),m=Sc(e.d),p=m.length;return t?(i&&(a=i-p)>0?m=m.charAt(0)+"."+m.slice(1)+bh(a):p>1&&(m=m.charAt(0)+"."+m.slice(1)),m=m+(u<0?"e":"e+")+u):u<0?(m="0."+bh(-u-1)+m,i&&(a=i-p)>0&&(m+=bh(a))):u>=p?(m+=bh(u+1-p),i&&(a=i-u-1)>0&&(m=m+"."+bh(a))):((a=u+1)<p&&(m=m.slice(0,a)+"."+m.slice(a)),i&&(a=i-p)>0&&(u+1===p&&(m+="."),m+=bh(a))),e.s<0?"-"+m:m}function HM(e,t){if(e.length>t)return e.length=t,!0}function iz(e){var t,i,a;function u(m){var p=this;if(!(p instanceof u))return new u(m);if(p.constructor=u,m instanceof u){p.s=m.s,p.e=m.e,p.d=(m=m.d)?m.slice():m;return}if(typeof m=="number"){if(m*0!==0)throw Error(Nd+m);if(m>0)p.s=1;else if(m<0)m=-m,p.s=-1;else{p.s=0,p.e=0,p.d=[0];return}if(m===~~m&&m<1e7){p.e=0,p.d=[m];return}return ZM(p,m.toString())}else if(typeof m!="string")throw Error(Nd+m);if(m.charCodeAt(0)===45?(m=m.slice(1),p.s=-1):p.s=1,qU.test(m))ZM(p,m);else throw Error(Nd+m)}if(u.prototype=Ht,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.clone=iz,u.config=u.set=GU,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(i=a[t++])||(e[i]=this[i]);return u.config(e),u}function GU(e){if(!e||typeof e!="object")throw Error(Fs+"Object expected");var t,i,a,u=["precision",1,Up,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<u.length;t+=3)if((a=e[i=u[t]])!==void 0)if(Vp(a)===a&&a>=u[t+1]&&a<=u[t+2])this[i]=a;else throw Error(Nd+i+": "+a);if((a=e[i="LN10"])!==void 0)if(a==Math.LN10)this[i]=new this(a);else throw Error(Nd+i+": "+a);return this}var V2=iz(VU);es=new V2(1);const bn=V2;function WU(e){return XU(e)||KU(e)||HU(e)||ZU()}function ZU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HU(e,t){if(e){if(typeof e=="string")return Ww(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ww(e,t)}}function KU(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function XU(e){if(Array.isArray(e))return Ww(e)}function Ww(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var YU=function(t){return t},az={},oz=function(t){return t===az},KM=function(t){return function i(){return arguments.length===0||arguments.length===1&&oz(arguments.length<=0?void 0:arguments[0])?i:t.apply(void 0,arguments)}},JU=function e(t,i){return t===1?i:KM(function(){for(var a=arguments.length,u=new Array(a),m=0;m<a;m++)u[m]=arguments[m];var p=u.filter(function(l){return l!==az}).length;return p>=t?i.apply(void 0,u):e(t-p,KM(function(){for(var l=arguments.length,P=new Array(l),A=0;A<l;A++)P[A]=arguments[A];var E=u.map(function(k){return oz(k)?P.shift():k});return i.apply(void 0,WU(E).concat(P))}))})},y_=function(t){return JU(t.length,t)},Zw=function(t,i){for(var a=[],u=t;u<i;++u)a[u-t]=u;return a},QU=y_(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(i){return t[i]}).map(e)}),eV=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!i.length)return YU;var u=i.reverse(),m=u[0],p=u.slice(1);return function(){return p.reduce(function(l,P){return P(l)},m.apply(void 0,arguments))}},Hw=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},sz=function(t){var i=null,a=null;return function(){for(var u=arguments.length,m=new Array(u),p=0;p<u;p++)m[p]=arguments[p];return i&&m.every(function(l,P){return l===i[P]})||(i=m,a=t.apply(void 0,m)),a}};function tV(e){var t;return e===0?t=1:t=Math.floor(new bn(e).abs().log(10).toNumber())+1,t}function rV(e,t,i){for(var a=new bn(e),u=0,m=[];a.lt(t)&&u<1e5;)m.push(a.toNumber()),a=a.add(i),u++;return m}var nV=y_(function(e,t,i){var a=+e,u=+t;return a+i*(u-a)}),iV=y_(function(e,t,i){var a=t-+e;return a=a||1/0,(i-e)/a}),aV=y_(function(e,t,i){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(i-e)/a))});const v_={rangeStep:rV,getDigitCount:tV,interpolateNumber:nV,uninterpolateNumber:iV,uninterpolateTruncation:aV};function Kw(e){return lV(e)||sV(e)||lz(e)||oV()}function oV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function lV(e){if(Array.isArray(e))return Xw(e)}function ug(e,t){return hV(e)||uV(e,t)||lz(e,t)||cV()}function cV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lz(e,t){if(e){if(typeof e=="string")return Xw(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xw(e,t)}}function Xw(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function uV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var i=[],a=!0,u=!1,m=void 0;try{for(var p=e[Symbol.iterator](),l;!(a=(l=p.next()).done)&&(i.push(l.value),!(t&&i.length===t));a=!0);}catch(P){u=!0,m=P}finally{try{!a&&p.return!=null&&p.return()}finally{if(u)throw m}}return i}}function hV(e){if(Array.isArray(e))return e}function cz(e){var t=ug(e,2),i=t[0],a=t[1],u=i,m=a;return i>a&&(u=a,m=i),[u,m]}function uz(e,t,i){if(e.lte(0))return new bn(0);var a=v_.getDigitCount(e.toNumber()),u=new bn(10).pow(a),m=e.div(u),p=a!==1?.05:.1,l=new bn(Math.ceil(m.div(p).toNumber())).add(i).mul(p),P=l.mul(u);return t?P:new bn(Math.ceil(P))}function dV(e,t,i){var a=1,u=new bn(e);if(!u.isint()&&i){var m=Math.abs(e);m<1?(a=new bn(10).pow(v_.getDigitCount(e)-1),u=new bn(Math.floor(u.div(a).toNumber())).mul(a)):m>1&&(u=new bn(Math.floor(e)))}else e===0?u=new bn(Math.floor((t-1)/2)):i||(u=new bn(Math.floor(e)));var p=Math.floor((t-1)/2),l=eV(QU(function(P){return u.add(new bn(P-p).mul(a)).toNumber()}),Zw);return l(0,t)}function hz(e,t,i,a){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new bn(0),tickMin:new bn(0),tickMax:new bn(0)};var m=uz(new bn(t).sub(e).div(i-1),a,u),p;e<=0&&t>=0?p=new bn(0):(p=new bn(e).add(t).div(2),p=p.sub(new bn(p).mod(m)));var l=Math.ceil(p.sub(e).div(m).toNumber()),P=Math.ceil(new bn(t).sub(p).div(m).toNumber()),A=l+P+1;return A>i?hz(e,t,i,a,u+1):(A<i&&(P=t>0?P+(i-A):P,l=t>0?l:l+(i-A)),{step:m,tickMin:p.sub(new bn(l).mul(m)),tickMax:p.add(new bn(P).mul(m))})}function fV(e){var t=ug(e,2),i=t[0],a=t[1],u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=Math.max(u,2),l=cz([i,a]),P=ug(l,2),A=P[0],E=P[1];if(A===-1/0||E===1/0){var k=E===1/0?[A].concat(Kw(Zw(0,u-1).map(function(){return 1/0}))):[].concat(Kw(Zw(0,u-1).map(function(){return-1/0})),[E]);return i>a?Hw(k):k}if(A===E)return dV(A,u,m);var D=hz(A,E,p,m),j=D.step,G=D.tickMin,U=D.tickMax,F=v_.rangeStep(G,U.add(new bn(.1).mul(j)),j);return i>a?Hw(F):F}function pV(e,t){var i=ug(e,2),a=i[0],u=i[1],m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=cz([a,u]),l=ug(p,2),P=l[0],A=l[1];if(P===-1/0||A===1/0)return[a,u];if(P===A)return[P];var E=Math.max(t,2),k=uz(new bn(A).sub(P).div(E-1),m,0),D=[].concat(Kw(v_.rangeStep(new bn(P),new bn(A).sub(new bn(.99).mul(k)),k)),[A]);return a>u?Hw(D):D}var mV=sz(fV),gV=sz(pV),yV="Invariant failed";function Vd(e,t){throw new Error(yV)}var vV=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},pv.apply(this,arguments)}function _V(e,t){return SV(e)||wV(e,t)||bV(e,t)||xV()}function xV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bV(e,t){if(e){if(typeof e=="string")return XM(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return XM(e,t)}}function XM(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function wV(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function SV(e){if(Array.isArray(e))return e}function PV(e,t){if(e==null)return{};var i=TV(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function TV(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function AV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CV(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pz(a.key),a)}}function EV(e,t,i){return t&&CV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MV(e,t,i){return t=mv(t),kV(e,dz()?Reflect.construct(t,i||[],mv(e).constructor):t.apply(e,i))}function kV(e,t){if(t&&(fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IV(e)}function IV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dz=function(){return!!e})()}function mv(e){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},mv(e)}function OV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yw(e,t)}function Yw(e,t){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},Yw(e,t)}function fz(e,t,i){return t=pz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pz(e){var t=RV(e,"string");return fp(t)=="symbol"?t:t+""}function RV(e,t){if(fp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(fp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $g=(function(e){function t(){return AV(this,t),MV(this,t,arguments)}return OV(t,e),EV(t,[{key:"render",value:function(){var a=this.props,u=a.offset,m=a.layout,p=a.width,l=a.dataKey,P=a.data,A=a.dataPointFormatter,E=a.xAxis,k=a.yAxis,D=PV(a,vV),j=fr(D,!1);this.props.direction==="x"&&E.type!=="number"&&Vd();var G=P.map(function(U){var F=A(U,l),X=F.x,J=F.y,te=F.value,le=F.errorVal;if(!le)return null;var Y=[],re,de;if(Array.isArray(le)){var ge=_V(le,2);re=ge[0],de=ge[1]}else re=de=le;if(m==="vertical"){var Ie=E.scale,We=J+u,Oe=We+p,Ve=We-p,Ke=Ie(te-re),ot=Ie(te+de);Y.push({x1:ot,y1:Oe,x2:ot,y2:Ve}),Y.push({x1:Ke,y1:We,x2:ot,y2:We}),Y.push({x1:Ke,y1:Oe,x2:Ke,y2:Ve})}else if(m==="horizontal"){var at=k.scale,st=X+u,lt=st-p,Le=st+p,tt=at(te-re),ut=at(te+de);Y.push({x1:lt,y1:ut,x2:Le,y2:ut}),Y.push({x1:st,y1:tt,x2:st,y2:ut}),Y.push({x1:lt,y1:tt,x2:Le,y2:tt})}return Ee.createElement(nn,pv({className:"recharts-errorBar",key:"bar-".concat(Y.map(function(Ae){return"".concat(Ae.x1,"-").concat(Ae.x2,"-").concat(Ae.y1,"-").concat(Ae.y2)}))},j),Y.map(function(Ae){return Ee.createElement("line",pv({},Ae,{key:"line-".concat(Ae.x1,"-").concat(Ae.x2,"-").concat(Ae.y1,"-").concat(Ae.y2)}))}))});return Ee.createElement(nn,{className:"recharts-errorBars"},G)}}])})(Ee.Component);fz($g,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});fz($g,"displayName","ErrorBar");function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function YM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Ed(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(i),!0).forEach(function(a){DV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function DV(e,t,i){return t=zV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function zV(e){var t=jV(e,"string");return hg(t)=="symbol"?t:t+""}function jV(e,t){if(hg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(hg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mz=function(t){var i=t.children,a=t.formattedGraphicalItems,u=t.legendWidth,m=t.legendContent,p=Jo(i,tp);if(!p)return null;var l=tp.defaultProps,P=l!==void 0?Ed(Ed({},l),p.props):{},A;return p.props&&p.props.payload?A=p.props&&p.props.payload:m==="children"?A=(a||[]).reduce(function(E,k){var D=k.item,j=k.props,G=j.sectors||j.data||[];return E.concat(G.map(function(U){return{type:p.props.iconType||D.props.legendType,value:U.name,color:U.fill,payload:U}}))},[]):A=(a||[]).map(function(E){var k=E.item,D=k.type.defaultProps,j=D!==void 0?Ed(Ed({},D),k.props):{},G=j.dataKey,U=j.name,F=j.legendType,X=j.hide;return{inactive:X,dataKey:G,type:P.iconType||F||"square",color:q2(k),value:U||G,payload:j}}),Ed(Ed(Ed({},P),tp.getWithHeight(p,u)),{},{payload:A,item:p})};function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function JM(e){return FV(e)||BV(e)||NV(e)||LV()}function LV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NV(e,t){if(e){if(typeof e=="string")return Jw(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jw(e,t)}}function BV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FV(e){if(Array.isArray(e))return Jw(e)}function Jw(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function QM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function ci(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?QM(Object(i),!0).forEach(function(a){np(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function np(e,t,i){return t=$V(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $V(e){var t=UV(e,"string");return dg(t)=="symbol"?t:t+""}function UV(e,t){if(dg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wi(e,t,i){return kr(e)||kr(t)?i:Zi(t)?rs(e,t,i):xr(t)?t(e):i}function Gm(e,t,i,a){var u=FU(e,function(l){return Wi(l,t)});if(i==="number"){var m=u.filter(function(l){return Dt(l)||parseFloat(l)});return m.length?[g_(m),m_(m)]:[1/0,-1/0]}var p=a?u.filter(function(l){return!kr(l)}):u;return p.map(function(l){return Zi(l)||l instanceof Date?l:""})}var VV=function(t){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2?arguments[2]:void 0,m=arguments.length>3?arguments[3]:void 0,p=-1,l=(i=a?.length)!==null&&i!==void 0?i:0;if(l<=1)return 0;if(m&&m.axisType==="angleAxis"&&Math.abs(Math.abs(m.range[1]-m.range[0])-360)<=1e-6)for(var P=m.range,A=0;A<l;A++){var E=A>0?u[A-1].coordinate:u[l-1].coordinate,k=u[A].coordinate,D=A>=l-1?u[0].coordinate:u[A+1].coordinate,j=void 0;if(to(k-E)!==to(D-k)){var G=[];if(to(D-k)===to(P[1]-P[0])){j=D;var U=k+P[1]-P[0];G[0]=Math.min(U,(U+E)/2),G[1]=Math.max(U,(U+E)/2)}else{j=E;var F=D+P[1]-P[0];G[0]=Math.min(k,(F+k)/2),G[1]=Math.max(k,(F+k)/2)}var X=[Math.min(k,(j+k)/2),Math.max(k,(j+k)/2)];if(t>X[0]&&t<=X[1]||t>=G[0]&&t<=G[1]){p=u[A].index;break}}else{var J=Math.min(E,D),te=Math.max(E,D);if(t>(J+k)/2&&t<=(te+k)/2){p=u[A].index;break}}}else for(var le=0;le<l;le++)if(le===0&&t<=(a[le].coordinate+a[le+1].coordinate)/2||le>0&&le<l-1&&t>(a[le].coordinate+a[le-1].coordinate)/2&&t<=(a[le].coordinate+a[le+1].coordinate)/2||le===l-1&&t>(a[le].coordinate+a[le-1].coordinate)/2){p=a[le].index;break}return p},q2=function(t){var i,a=t,u=a.type.displayName,m=(i=t.type)!==null&&i!==void 0&&i.defaultProps?ci(ci({},t.type.defaultProps),t.props):t.props,p=m.stroke,l=m.fill,P;switch(u){case"Line":P=p;break;case"Area":case"Radar":P=p&&p!=="none"?p:l;break;default:P=l;break}return P},qV=function(t){var i=t.barSize,a=t.totalSize,u=t.stackGroups,m=u===void 0?{}:u;if(!m)return{};for(var p={},l=Object.keys(m),P=0,A=l.length;P<A;P++)for(var E=m[l[P]].stackGroups,k=Object.keys(E),D=0,j=k.length;D<j;D++){var G=E[k[D]],U=G.items,F=G.cateAxisId,X=U.filter(function(de){return Th(de.type).indexOf("Bar")>=0});if(X&&X.length){var J=X[0].type.defaultProps,te=J!==void 0?ci(ci({},J),X[0].props):X[0].props,le=te.barSize,Y=te[F];p[Y]||(p[Y]=[]);var re=kr(le)?i:le;p[Y].push({item:X[0],stackList:X.slice(1),barSize:kr(re)?void 0:ro(re,a,0)})}}return p},GV=function(t){var i=t.barGap,a=t.barCategoryGap,u=t.bandSize,m=t.sizeList,p=m===void 0?[]:m,l=t.maxBarSize,P=p.length;if(P<1)return null;var A=ro(i,u,0,!0),E,k=[];if(p[0].barSize===+p[0].barSize){var D=!1,j=u/P,G=p.reduce(function(le,Y){return le+Y.barSize||0},0);G+=(P-1)*A,G>=u&&(G-=(P-1)*A,A=0),G>=u&&j>0&&(D=!0,j*=.9,G=P*j);var U=(u-G)/2>>0,F={offset:U-A,size:0};E=p.reduce(function(le,Y){var re={item:Y.item,position:{offset:F.offset+F.size+A,size:D?j:Y.barSize}},de=[].concat(JM(le),[re]);return F=de[de.length-1].position,Y.stackList&&Y.stackList.length&&Y.stackList.forEach(function(ge){de.push({item:ge,position:F})}),de},k)}else{var X=ro(a,u,0,!0);u-2*X-(P-1)*A<=0&&(A=0);var J=(u-2*X-(P-1)*A)/P;J>1&&(J>>=0);var te=l===+l?Math.min(J,l):J;E=p.reduce(function(le,Y,re){var de=[].concat(JM(le),[{item:Y.item,position:{offset:X+(J+A)*re+(J-te)/2,size:te}}]);return Y.stackList&&Y.stackList.length&&Y.stackList.forEach(function(ge){de.push({item:ge,position:de[de.length-1].position})}),de},k)}return E},WV=function(t,i,a,u){var m=a.children,p=a.width,l=a.margin,P=p-(l.left||0)-(l.right||0),A=mz({children:m,legendWidth:P});if(A){var E=u||{},k=E.width,D=E.height,j=A.align,G=A.verticalAlign,U=A.layout;if((U==="vertical"||U==="horizontal"&&G==="middle")&&j!=="center"&&Dt(t[j]))return ci(ci({},t),{},np({},j,t[j]+(k||0)));if((U==="horizontal"||U==="vertical"&&j==="center")&&G!=="middle"&&Dt(t[G]))return ci(ci({},t),{},np({},G,t[G]+(D||0)))}return t},ZV=function(t,i,a){return kr(i)?!0:t==="horizontal"?i==="yAxis":t==="vertical"||a==="x"?i==="xAxis":a==="y"?i==="yAxis":!0},gz=function(t,i,a,u,m){var p=i.props.children,l=ns(p,$g).filter(function(A){return ZV(u,m,A.props.direction)});if(l&&l.length){var P=l.map(function(A){return A.props.dataKey});return t.reduce(function(A,E){var k=Wi(E,a);if(kr(k))return A;var D=Array.isArray(k)?[g_(k),m_(k)]:[k,k],j=P.reduce(function(G,U){var F=Wi(E,U,0),X=D[0]-Math.abs(Array.isArray(F)?F[0]:F),J=D[1]+Math.abs(Array.isArray(F)?F[1]:F);return[Math.min(X,G[0]),Math.max(J,G[1])]},[1/0,-1/0]);return[Math.min(j[0],A[0]),Math.max(j[1],A[1])]},[1/0,-1/0])}return null},HV=function(t,i,a,u,m){var p=i.map(function(l){return gz(t,l,a,m,u)}).filter(function(l){return!kr(l)});return p&&p.length?p.reduce(function(l,P){return[Math.min(l[0],P[0]),Math.max(l[1],P[1])]},[1/0,-1/0]):null},yz=function(t,i,a,u,m){var p=i.map(function(P){var A=P.props.dataKey;return a==="number"&&A&&gz(t,P,A,u)||Gm(t,A,a,m)});if(a==="number")return p.reduce(function(P,A){return[Math.min(P[0],A[0]),Math.max(P[1],A[1])]},[1/0,-1/0]);var l={};return p.reduce(function(P,A){for(var E=0,k=A.length;E<k;E++)l[A[E]]||(l[A[E]]=!0,P.push(A[E]));return P},[])},vz=function(t,i){return t==="horizontal"&&i==="xAxis"||t==="vertical"&&i==="yAxis"||t==="centric"&&i==="angleAxis"||t==="radial"&&i==="radiusAxis"},_z=function(t,i,a,u){if(u)return t.map(function(P){return P.coordinate});var m,p,l=t.map(function(P){return P.coordinate===i&&(m=!0),P.coordinate===a&&(p=!0),P.coordinate});return m||l.push(i),p||l.push(a),l},Eu=function(t,i,a){if(!t)return null;var u=t.scale,m=t.duplicateDomain,p=t.type,l=t.range,P=t.realScaleType==="scaleBand"?u.bandwidth()/2:2,A=(i||a)&&p==="category"&&u.bandwidth?u.bandwidth()/P:0;if(A=t.axisType==="angleAxis"&&l?.length>=2?to(l[0]-l[1])*2*A:A,i&&(t.ticks||t.niceTicks)){var E=(t.ticks||t.niceTicks).map(function(k){var D=m?m.indexOf(k):k;return{coordinate:u(D)+A,value:k,offset:A}});return E.filter(function(k){return!Dg(k.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(k,D){return{coordinate:u(k)+A,value:k,index:D,offset:A}}):u.ticks&&!a?u.ticks(t.tickCount).map(function(k){return{coordinate:u(k)+A,value:k,offset:A}}):u.domain().map(function(k,D){return{coordinate:u(k)+A,value:m?m[k]:k,index:D,offset:A}})},D1=new WeakMap,zy=function(t,i){if(typeof i!="function")return t;D1.has(t)||D1.set(t,new WeakMap);var a=D1.get(t);if(a.has(i))return a.get(i);var u=function(){t.apply(void 0,arguments),i.apply(void 0,arguments)};return a.set(i,u),u},xz=function(t,i,a){var u=t.scale,m=t.type,p=t.layout,l=t.axisType;if(u==="auto")return p==="radial"&&l==="radiusAxis"?{scale:ig(),realScaleType:"band"}:p==="radial"&&l==="angleAxis"?{scale:cv(),realScaleType:"linear"}:m==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!a)?{scale:qm(),realScaleType:"point"}:m==="category"?{scale:ig(),realScaleType:"band"}:{scale:cv(),realScaleType:"linear"};if(Bd(u)){var P="scale".concat(t_(u));return{scale:(NM[P]||qm)(),realScaleType:NM[P]?P:"point"}}return xr(u)?{scale:u}:{scale:qm(),realScaleType:"point"}},ek=1e-4,bz=function(t){var i=t.domain();if(!(!i||i.length<=2)){var a=i.length,u=t.range(),m=Math.min(u[0],u[1])-ek,p=Math.max(u[0],u[1])+ek,l=t(i[0]),P=t(i[a-1]);(l<m||l>p||P<m||P>p)&&t.domain([i[0],i[a-1]])}},KV=function(t,i){if(!t)return null;for(var a=0,u=t.length;a<u;a++)if(t[a].item===i)return t[a].position;return null},XV=function(t,i){if(!i||i.length!==2||!Dt(i[0])||!Dt(i[1]))return t;var a=Math.min(i[0],i[1]),u=Math.max(i[0],i[1]),m=[t[0],t[1]];return(!Dt(t[0])||t[0]<a)&&(m[0]=a),(!Dt(t[1])||t[1]>u)&&(m[1]=u),m[0]>u&&(m[0]=u),m[1]<a&&(m[1]=a),m},YV=function(t){var i=t.length;if(!(i<=0))for(var a=0,u=t[0].length;a<u;++a)for(var m=0,p=0,l=0;l<i;++l){var P=Dg(t[l][a][1])?t[l][a][0]:t[l][a][1];P>=0?(t[l][a][0]=m,t[l][a][1]=m+P,m=t[l][a][1]):(t[l][a][0]=p,t[l][a][1]=p+P,p=t[l][a][1])}},JV=function(t){var i=t.length;if(!(i<=0))for(var a=0,u=t[0].length;a<u;++a)for(var m=0,p=0;p<i;++p){var l=Dg(t[p][a][1])?t[p][a][0]:t[p][a][1];l>=0?(t[p][a][0]=m,t[p][a][1]=m+l,m=t[p][a][1]):(t[p][a][0]=0,t[p][a][1]=0)}},QV={sign:YV,expand:ZN,none:ap,silhouette:HN,wiggle:KN,positive:JV},eq=function(t,i,a){var u=i.map(function(l){return l.props.dataKey}),m=QV[a],p=WN().keys(u).value(function(l,P){return+Wi(l,P,0)}).order(Ew).offset(m);return p(t)},tq=function(t,i,a,u,m,p){if(!t)return null;var l=p?i.reverse():i,P={},A=l.reduce(function(k,D){var j,G=(j=D.type)!==null&&j!==void 0&&j.defaultProps?ci(ci({},D.type.defaultProps),D.props):D.props,U=G.stackId,F=G.hide;if(F)return k;var X=G[a],J=k[X]||{hasStack:!1,stackGroups:{}};if(Zi(U)){var te=J.stackGroups[U]||{numericAxisId:a,cateAxisId:u,items:[]};te.items.push(D),J.hasStack=!0,J.stackGroups[U]=te}else J.stackGroups[Bp("_stackId_")]={numericAxisId:a,cateAxisId:u,items:[D]};return ci(ci({},k),{},np({},X,J))},P),E={};return Object.keys(A).reduce(function(k,D){var j=A[D];if(j.hasStack){var G={};j.stackGroups=Object.keys(j.stackGroups).reduce(function(U,F){var X=j.stackGroups[F];return ci(ci({},U),{},np({},F,{numericAxisId:a,cateAxisId:u,items:X.items,stackedData:eq(t,X.items,m)}))},G)}return ci(ci({},k),{},np({},D,j))},E)},wz=function(t,i){var a=i.realScaleType,u=i.type,m=i.tickCount,p=i.originalDomain,l=i.allowDecimals,P=a||i.scale;if(P!=="auto"&&P!=="linear")return null;if(m&&u==="number"&&p&&(p[0]==="auto"||p[1]==="auto")){var A=t.domain();if(!A.length)return null;var E=mV(A,m,l);return t.domain([g_(E),m_(E)]),{niceTicks:E}}if(m&&u==="number"){var k=t.domain(),D=gV(k,m,l);return{niceTicks:D}}return null};function tk(e){var t=e.axis,i=e.ticks,a=e.bandSize,u=e.entry,m=e.index,p=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!kr(u[t.dataKey])){var l=Gy(i,"value",u[t.dataKey]);if(l)return l.coordinate+a/2}return i[m]?i[m].coordinate+a/2:null}var P=Wi(u,kr(p)?t.dataKey:p);return kr(P)?null:t.scale(P)}var rk=function(t){var i=t.axis,a=t.ticks,u=t.offset,m=t.bandSize,p=t.entry,l=t.index;if(i.type==="category")return a[l]?a[l].coordinate+u:null;var P=Wi(p,i.dataKey,i.domain[l]);return kr(P)?null:i.scale(P)-m/2+u},rq=function(t){var i=t.numericAxis,a=i.scale.domain();if(i.type==="number"){var u=Math.min(a[0],a[1]),m=Math.max(a[0],a[1]);return u<=0&&m>=0?0:m<0?m:u}return a[0]},nq=function(t,i){var a,u=(a=t.type)!==null&&a!==void 0&&a.defaultProps?ci(ci({},t.type.defaultProps),t.props):t.props,m=u.stackId;if(Zi(m)){var p=i[m];if(p){var l=p.items.indexOf(t);return l>=0?p.stackedData[l]:null}}return null},iq=function(t){return t.reduce(function(i,a){return[g_(a.concat([i[0]]).filter(Dt)),m_(a.concat([i[1]]).filter(Dt))]},[1/0,-1/0])},Sz=function(t,i,a){return Object.keys(t).reduce(function(u,m){var p=t[m],l=p.stackedData,P=l.reduce(function(A,E){var k=iq(E.slice(i,a+1));return[Math.min(A[0],k[0]),Math.max(A[1],k[1])]},[1/0,-1/0]);return[Math.min(P[0],u[0]),Math.max(P[1],u[1])]},[1/0,-1/0]).map(function(u){return u===1/0||u===-1/0?0:u})},nk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ik=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qw=function(t,i,a){if(xr(t))return t(i,a);if(!Array.isArray(t))return i;var u=[];if(Dt(t[0]))u[0]=a?t[0]:Math.min(t[0],i[0]);else if(nk.test(t[0])){var m=+nk.exec(t[0])[1];u[0]=i[0]-m}else xr(t[0])?u[0]=t[0](i[0]):u[0]=i[0];if(Dt(t[1]))u[1]=a?t[1]:Math.max(t[1],i[1]);else if(ik.test(t[1])){var p=+ik.exec(t[1])[1];u[1]=i[1]+p}else xr(t[1])?u[1]=t[1](i[1]):u[1]=i[1];return u},gv=function(t,i,a){if(t&&t.scale&&t.scale.bandwidth){var u=t.scale.bandwidth();if(!a||u>0)return u}if(t&&i&&i.length>=2){for(var m=v2(i,function(k){return k.coordinate}),p=1/0,l=1,P=m.length;l<P;l++){var A=m[l],E=m[l-1];p=Math.min((A.coordinate||0)-(E.coordinate||0),p)}return p===1/0?0:p}return a?void 0:0},ak=function(t,i,a){return!t||!t.length||Fg(t,rs(a,"type.defaultProps.domain"))?i:t},Pz=function(t,i){var a=t.type.defaultProps?ci(ci({},t.type.defaultProps),t.props):t.props,u=a.dataKey,m=a.name,p=a.unit,l=a.formatter,P=a.tooltipType,A=a.chartType,E=a.hide;return ci(ci({},fr(t,!1)),{},{dataKey:u,unit:p,formatter:l,name:m||u,color:q2(t),value:Wi(i,u),type:P,payload:i,chartType:A,hide:E})};function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}function ok(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Tu(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ok(Object(i),!0).forEach(function(a){Tz(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ok(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Tz(e,t,i){return t=aq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function aq(e){var t=oq(e,"string");return fg(t)=="symbol"?t:t+""}function oq(e,t){if(fg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(fg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sq(e,t){return hq(e)||uq(e,t)||cq(e,t)||lq()}function lq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cq(e,t){if(e){if(typeof e=="string")return sk(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sk(e,t)}}function sk(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function uq(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function hq(e){if(Array.isArray(e))return e}var yv=Math.PI/180,dq=function(t){return t*180/Math.PI},In=function(t,i,a,u){return{x:t+Math.cos(-yv*u)*a,y:i+Math.sin(-yv*u)*a}},Az=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(i-(a.top||0)-(a.bottom||0)))/2},fq=function(t,i,a,u,m){var p=t.width,l=t.height,P=t.startAngle,A=t.endAngle,E=ro(t.cx,p,p/2),k=ro(t.cy,l,l/2),D=Az(p,l,a),j=ro(t.innerRadius,D,0),G=ro(t.outerRadius,D,D*.8),U=Object.keys(i);return U.reduce(function(F,X){var J=i[X],te=J.domain,le=J.reversed,Y;if(kr(J.range))u==="angleAxis"?Y=[P,A]:u==="radiusAxis"&&(Y=[j,G]),le&&(Y=[Y[1],Y[0]]);else{Y=J.range;var re=Y,de=sq(re,2);P=de[0],A=de[1]}var ge=xz(J,m),Ie=ge.realScaleType,We=ge.scale;We.domain(te).range(Y),bz(We);var Oe=wz(We,Tu(Tu({},J),{},{realScaleType:Ie})),Ve=Tu(Tu(Tu({},J),Oe),{},{range:Y,radius:G,realScaleType:Ie,scale:We,cx:E,cy:k,innerRadius:j,outerRadius:G,startAngle:P,endAngle:A});return Tu(Tu({},F),{},Tz({},X,Ve))},{})},pq=function(t,i){var a=t.x,u=t.y,m=i.x,p=i.y;return Math.sqrt(Math.pow(a-m,2)+Math.pow(u-p,2))},mq=function(t,i){var a=t.x,u=t.y,m=i.cx,p=i.cy,l=pq({x:a,y:u},{x:m,y:p});if(l<=0)return{radius:l};var P=(a-m)/l,A=Math.acos(P);return u>p&&(A=2*Math.PI-A),{radius:l,angle:dq(A),angleInRadian:A}},gq=function(t){var i=t.startAngle,a=t.endAngle,u=Math.floor(i/360),m=Math.floor(a/360),p=Math.min(u,m);return{startAngle:i-p*360,endAngle:a-p*360}},yq=function(t,i){var a=i.startAngle,u=i.endAngle,m=Math.floor(a/360),p=Math.floor(u/360),l=Math.min(m,p);return t+l*360},lk=function(t,i){var a=t.x,u=t.y,m=mq({x:a,y:u},i),p=m.radius,l=m.angle,P=i.innerRadius,A=i.outerRadius;if(p<P||p>A)return!1;if(p===0)return!0;var E=gq(i),k=E.startAngle,D=E.endAngle,j=l,G;if(k<=D){for(;j>D;)j-=360;for(;j<k;)j+=360;G=j>=k&&j<=D}else{for(;j>k;)j-=360;for(;j<D;)j+=360;G=j>=D&&j<=k}return G?Tu(Tu({},i),{},{radius:p,angle:yq(j,i)}):null},Cz=function(t){return!Ue.isValidElement(t)&&!xr(t)&&typeof t!="boolean"?t.className:""};function pg(e){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pg(e)}var vq=["offset"];function _q(e){return Sq(e)||wq(e)||bq(e)||xq()}function xq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bq(e,t){if(e){if(typeof e=="string")return eS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return eS(e,t)}}function wq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sq(e){if(Array.isArray(e))return eS(e)}function eS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Pq(e,t){if(e==null)return{};var i=Tq(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Tq(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function ck(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Gi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(i),!0).forEach(function(a){Aq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ck(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Aq(e,t,i){return t=Cq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Cq(e){var t=Eq(e,"string");return pg(t)=="symbol"?t:t+""}function Eq(e,t){if(pg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mg(){return mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},mg.apply(this,arguments)}var Mq=function(t){var i=t.value,a=t.formatter,u=kr(t.children)?i:t.children;return xr(a)?a(u):u},kq=function(t,i){var a=to(i-t),u=Math.min(Math.abs(i-t),360);return a*u},Iq=function(t,i,a){var u=t.position,m=t.viewBox,p=t.offset,l=t.className,P=m,A=P.cx,E=P.cy,k=P.innerRadius,D=P.outerRadius,j=P.startAngle,G=P.endAngle,U=P.clockWise,F=(k+D)/2,X=kq(j,G),J=X>=0?1:-1,te,le;u==="insideStart"?(te=j+J*p,le=U):u==="insideEnd"?(te=G-J*p,le=!U):u==="end"&&(te=G+J*p,le=U),le=X<=0?le:!le;var Y=In(A,E,F,te),re=In(A,E,F,te+(le?1:-1)*359),de="M".concat(Y.x,",").concat(Y.y,`
    A`).concat(F,",").concat(F,",0,1,").concat(le?0:1,`,
    `).concat(re.x,",").concat(re.y),ge=kr(t.id)?Bp("recharts-radial-line-"):t.id;return Ee.createElement("text",mg({},a,{dominantBaseline:"central",className:Or("recharts-radial-bar-label",l)}),Ee.createElement("defs",null,Ee.createElement("path",{id:ge,d:de})),Ee.createElement("textPath",{xlinkHref:"#".concat(ge)},i))},Oq=function(t){var i=t.viewBox,a=t.offset,u=t.position,m=i,p=m.cx,l=m.cy,P=m.innerRadius,A=m.outerRadius,E=m.startAngle,k=m.endAngle,D=(E+k)/2;if(u==="outside"){var j=In(p,l,A+a,D),G=j.x,U=j.y;return{x:G,y:U,textAnchor:G>=p?"start":"end",verticalAnchor:"middle"}}if(u==="center")return{x:p,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(u==="centerTop")return{x:p,y:l,textAnchor:"middle",verticalAnchor:"start"};if(u==="centerBottom")return{x:p,y:l,textAnchor:"middle",verticalAnchor:"end"};var F=(P+A)/2,X=In(p,l,F,D),J=X.x,te=X.y;return{x:J,y:te,textAnchor:"middle",verticalAnchor:"middle"}},Rq=function(t){var i=t.viewBox,a=t.parentViewBox,u=t.offset,m=t.position,p=i,l=p.x,P=p.y,A=p.width,E=p.height,k=E>=0?1:-1,D=k*u,j=k>0?"end":"start",G=k>0?"start":"end",U=A>=0?1:-1,F=U*u,X=U>0?"end":"start",J=U>0?"start":"end";if(m==="top"){var te={x:l+A/2,y:P-k*u,textAnchor:"middle",verticalAnchor:j};return Gi(Gi({},te),a?{height:Math.max(P-a.y,0),width:A}:{})}if(m==="bottom"){var le={x:l+A/2,y:P+E+D,textAnchor:"middle",verticalAnchor:G};return Gi(Gi({},le),a?{height:Math.max(a.y+a.height-(P+E),0),width:A}:{})}if(m==="left"){var Y={x:l-F,y:P+E/2,textAnchor:X,verticalAnchor:"middle"};return Gi(Gi({},Y),a?{width:Math.max(Y.x-a.x,0),height:E}:{})}if(m==="right"){var re={x:l+A+F,y:P+E/2,textAnchor:J,verticalAnchor:"middle"};return Gi(Gi({},re),a?{width:Math.max(a.x+a.width-re.x,0),height:E}:{})}var de=a?{width:A,height:E}:{};return m==="insideLeft"?Gi({x:l+F,y:P+E/2,textAnchor:J,verticalAnchor:"middle"},de):m==="insideRight"?Gi({x:l+A-F,y:P+E/2,textAnchor:X,verticalAnchor:"middle"},de):m==="insideTop"?Gi({x:l+A/2,y:P+D,textAnchor:"middle",verticalAnchor:G},de):m==="insideBottom"?Gi({x:l+A/2,y:P+E-D,textAnchor:"middle",verticalAnchor:j},de):m==="insideTopLeft"?Gi({x:l+F,y:P+D,textAnchor:J,verticalAnchor:G},de):m==="insideTopRight"?Gi({x:l+A-F,y:P+D,textAnchor:X,verticalAnchor:G},de):m==="insideBottomLeft"?Gi({x:l+F,y:P+E-D,textAnchor:J,verticalAnchor:j},de):m==="insideBottomRight"?Gi({x:l+A-F,y:P+E-D,textAnchor:X,verticalAnchor:j},de):Np(m)&&(Dt(m.x)||vw(m.x))&&(Dt(m.y)||vw(m.y))?Gi({x:l+ro(m.x,A),y:P+ro(m.y,E),textAnchor:"end",verticalAnchor:"end"},de):Gi({x:l+A/2,y:P+E/2,textAnchor:"middle",verticalAnchor:"middle"},de)},Dq=function(t){return"cx"in t&&Dt(t.cx)};function ia(e){var t=e.offset,i=t===void 0?5:t,a=Pq(e,vq),u=Gi({offset:i},a),m=u.viewBox,p=u.position,l=u.value,P=u.children,A=u.content,E=u.className,k=E===void 0?"":E,D=u.textBreakAll;if(!m||kr(l)&&kr(P)&&!Ue.isValidElement(A)&&!xr(A))return null;if(Ue.isValidElement(A))return Ue.cloneElement(A,u);var j;if(xr(A)){if(j=Ue.createElement(A,u),Ue.isValidElement(j))return j}else j=Mq(u);var G=Dq(m),U=fr(u,!0);if(G&&(p==="insideStart"||p==="insideEnd"||p==="end"))return Iq(u,j,U);var F=G?Oq(u):Rq(u);return Ee.createElement($d,mg({className:Or("recharts-label",k)},U,F,{breakAll:D}),j)}ia.displayName="Label";var Ez=function(t){var i=t.cx,a=t.cy,u=t.angle,m=t.startAngle,p=t.endAngle,l=t.r,P=t.radius,A=t.innerRadius,E=t.outerRadius,k=t.x,D=t.y,j=t.top,G=t.left,U=t.width,F=t.height,X=t.clockWise,J=t.labelViewBox;if(J)return J;if(Dt(U)&&Dt(F)){if(Dt(k)&&Dt(D))return{x:k,y:D,width:U,height:F};if(Dt(j)&&Dt(G))return{x:j,y:G,width:U,height:F}}return Dt(k)&&Dt(D)?{x:k,y:D,width:0,height:0}:Dt(i)&&Dt(a)?{cx:i,cy:a,startAngle:m||u||0,endAngle:p||u||0,innerRadius:A||0,outerRadius:E||P||l||0,clockWise:X}:t.viewBox?t.viewBox:{}},zq=function(t,i){return t?t===!0?Ee.createElement(ia,{key:"label-implicit",viewBox:i}):Zi(t)?Ee.createElement(ia,{key:"label-implicit",viewBox:i,value:t}):Ue.isValidElement(t)?t.type===ia?Ue.cloneElement(t,{key:"label-implicit",viewBox:i}):Ee.createElement(ia,{key:"label-implicit",content:t,viewBox:i}):xr(t)?Ee.createElement(ia,{key:"label-implicit",content:t,viewBox:i}):Np(t)?Ee.createElement(ia,mg({viewBox:i},t,{key:"label-implicit"})):null:null},jq=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var u=t.children,m=Ez(t),p=ns(u,ia).map(function(P,A){return Ue.cloneElement(P,{viewBox:i||m,key:"label-".concat(A)})});if(!a)return p;var l=zq(t.label,i||m);return[l].concat(_q(p))};ia.parseViewBox=Ez;ia.renderCallByParent=jq;var z1,uk;function Lq(){if(uk)return z1;uk=1;function e(t){var i=t==null?0:t.length;return i?t[i-1]:void 0}return z1=e,z1}var Nq=Lq();const Bq=mn(Nq);function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}var Fq=["valueAccessor"],$q=["data","dataKey","clockWise","id","textBreakAll"];function Uq(e){return Wq(e)||Gq(e)||qq(e)||Vq()}function Vq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qq(e,t){if(e){if(typeof e=="string")return tS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tS(e,t)}}function Gq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wq(e){if(Array.isArray(e))return tS(e)}function tS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},vv.apply(this,arguments)}function hk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function dk(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?hk(Object(i),!0).forEach(function(a){Zq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hk(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Zq(e,t,i){return t=Hq(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Hq(e){var t=Kq(e,"string");return gg(t)=="symbol"?t:t+""}function Kq(e,t){if(gg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(gg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fk(e,t){if(e==null)return{};var i=Xq(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Xq(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var Yq=function(t){return Array.isArray(t.value)?Bq(t.value):t.value};function ku(e){var t=e.valueAccessor,i=t===void 0?Yq:t,a=fk(e,Fq),u=a.data,m=a.dataKey,p=a.clockWise,l=a.id,P=a.textBreakAll,A=fk(a,$q);return!u||!u.length?null:Ee.createElement(nn,{className:"recharts-label-list"},u.map(function(E,k){var D=kr(m)?i(E,k):Wi(E&&E.payload,m),j=kr(l)?{}:{id:"".concat(l,"-").concat(k)};return Ee.createElement(ia,vv({},fr(E,!0),A,j,{parentViewBox:E.parentViewBox,value:D,textBreakAll:P,viewBox:ia.parseViewBox(kr(p)?E:dk(dk({},E),{},{clockWise:p})),key:"label-".concat(k),index:k}))}))}ku.displayName="LabelList";function Jq(e,t){return e?e===!0?Ee.createElement(ku,{key:"labelList-implicit",data:t}):Ee.isValidElement(e)||xr(e)?Ee.createElement(ku,{key:"labelList-implicit",data:t,content:e}):Np(e)?Ee.createElement(ku,vv({data:t},e,{key:"labelList-implicit"})):null:null}function Qq(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var a=e.children,u=ns(a,ku).map(function(p,l){return Ue.cloneElement(p,{data:t,key:"labelList-".concat(l)})});if(!i)return u;var m=Jq(e.label,t);return[m].concat(Uq(u))}ku.renderCallByParent=Qq;function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}function rS(){return rS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},rS.apply(this,arguments)}function pk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function mk(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(i),!0).forEach(function(a){e7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pk(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function e7(e,t,i){return t=t7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function t7(e){var t=r7(e,"string");return yg(t)=="symbol"?t:t+""}function r7(e,t){if(yg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(yg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n7=function(t,i){var a=to(i-t),u=Math.min(Math.abs(i-t),359.999);return a*u},jy=function(t){var i=t.cx,a=t.cy,u=t.radius,m=t.angle,p=t.sign,l=t.isExternal,P=t.cornerRadius,A=t.cornerIsExternal,E=P*(l?1:-1)+u,k=Math.asin(P/E)/yv,D=A?m:m+p*k,j=In(i,a,E,D),G=In(i,a,u,D),U=A?m-p*k:m,F=In(i,a,E*Math.cos(k*yv),U);return{center:j,circleTangency:G,lineTangency:F,theta:k}},Mz=function(t){var i=t.cx,a=t.cy,u=t.innerRadius,m=t.outerRadius,p=t.startAngle,l=t.endAngle,P=n7(p,l),A=p+P,E=In(i,a,m,p),k=In(i,a,m,A),D="M ".concat(E.x,",").concat(E.y,`
    A `).concat(m,",").concat(m,`,0,
    `).concat(+(Math.abs(P)>180),",").concat(+(p>A),`,
    `).concat(k.x,",").concat(k.y,`
  `);if(u>0){var j=In(i,a,u,p),G=In(i,a,u,A);D+="L ".concat(G.x,",").concat(G.y,`
            A `).concat(u,",").concat(u,`,0,
            `).concat(+(Math.abs(P)>180),",").concat(+(p<=A),`,
            `).concat(j.x,",").concat(j.y," Z")}else D+="L ".concat(i,",").concat(a," Z");return D},i7=function(t){var i=t.cx,a=t.cy,u=t.innerRadius,m=t.outerRadius,p=t.cornerRadius,l=t.forceCornerRadius,P=t.cornerIsExternal,A=t.startAngle,E=t.endAngle,k=to(E-A),D=jy({cx:i,cy:a,radius:m,angle:A,sign:k,cornerRadius:p,cornerIsExternal:P}),j=D.circleTangency,G=D.lineTangency,U=D.theta,F=jy({cx:i,cy:a,radius:m,angle:E,sign:-k,cornerRadius:p,cornerIsExternal:P}),X=F.circleTangency,J=F.lineTangency,te=F.theta,le=P?Math.abs(A-E):Math.abs(A-E)-U-te;if(le<0)return l?"M ".concat(G.x,",").concat(G.y,`
        a`).concat(p,",").concat(p,",0,0,1,").concat(p*2,`,0
        a`).concat(p,",").concat(p,",0,0,1,").concat(-p*2,`,0
      `):Mz({cx:i,cy:a,innerRadius:u,outerRadius:m,startAngle:A,endAngle:E});var Y="M ".concat(G.x,",").concat(G.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(k<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(m,",").concat(m,",0,").concat(+(le>180),",").concat(+(k<0),",").concat(X.x,",").concat(X.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(k<0),",").concat(J.x,",").concat(J.y,`
  `);if(u>0){var re=jy({cx:i,cy:a,radius:u,angle:A,sign:k,isExternal:!0,cornerRadius:p,cornerIsExternal:P}),de=re.circleTangency,ge=re.lineTangency,Ie=re.theta,We=jy({cx:i,cy:a,radius:u,angle:E,sign:-k,isExternal:!0,cornerRadius:p,cornerIsExternal:P}),Oe=We.circleTangency,Ve=We.lineTangency,Ke=We.theta,ot=P?Math.abs(A-E):Math.abs(A-E)-Ie-Ke;if(ot<0&&p===0)return"".concat(Y,"L").concat(i,",").concat(a,"Z");Y+="L".concat(Ve.x,",").concat(Ve.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(k<0),",").concat(Oe.x,",").concat(Oe.y,`
      A`).concat(u,",").concat(u,",0,").concat(+(ot>180),",").concat(+(k>0),",").concat(de.x,",").concat(de.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(k<0),",").concat(ge.x,",").concat(ge.y,"Z")}else Y+="L".concat(i,",").concat(a,"Z");return Y},a7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},kz=function(t){var i=mk(mk({},a7),t),a=i.cx,u=i.cy,m=i.innerRadius,p=i.outerRadius,l=i.cornerRadius,P=i.forceCornerRadius,A=i.cornerIsExternal,E=i.startAngle,k=i.endAngle,D=i.className;if(p<m||E===k)return null;var j=Or("recharts-sector",D),G=p-m,U=ro(l,G,0,!0),F;return U>0&&Math.abs(E-k)<360?F=i7({cx:a,cy:u,innerRadius:m,outerRadius:p,cornerRadius:Math.min(U,G/2),forceCornerRadius:P,cornerIsExternal:A,startAngle:E,endAngle:k}):F=Mz({cx:a,cy:u,innerRadius:m,outerRadius:p,startAngle:E,endAngle:k}),Ee.createElement("path",rS({},fr(i,!0),{className:j,d:F,role:"img"}))};function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},nS.apply(this,arguments)}function gk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function yk(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?gk(Object(i),!0).forEach(function(a){o7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):gk(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function o7(e,t,i){return t=s7(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s7(e){var t=l7(e,"string");return vg(t)=="symbol"?t:t+""}function l7(e,t){if(vg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(vg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vk={curveBasisClosed:zN,curveBasisOpen:jN,curveBasis:DN,curveBumpX:xN,curveBumpY:bN,curveLinearClosed:LN,curveLinear:n_,curveMonotoneX:NN,curveMonotoneY:BN,curveNatural:FN,curveStep:$N,curveStepAfter:VN,curveStepBefore:UN},Ly=function(t){return t.x===+t.x&&t.y===+t.y},jm=function(t){return t.x},Lm=function(t){return t.y},c7=function(t,i){if(xr(t))return t;var a="curve".concat(t_(t));return(a==="curveMonotone"||a==="curveBump")&&i?vk["".concat(a).concat(i==="vertical"?"Y":"X")]:vk[a]||n_},u7=function(t){var i=t.type,a=i===void 0?"linear":i,u=t.points,m=u===void 0?[]:u,p=t.baseLine,l=t.layout,P=t.connectNulls,A=P===void 0?!1:P,E=c7(a,l),k=A?m.filter(function(U){return Ly(U)}):m,D;if(Array.isArray(p)){var j=A?p.filter(function(U){return Ly(U)}):p,G=k.map(function(U,F){return yk(yk({},U),{},{base:j[F]})});return l==="vertical"?D=My().y(Lm).x1(jm).x0(function(U){return U.base.x}):D=My().x(jm).y1(Lm).y0(function(U){return U.base.y}),D.defined(Ly).curve(E),D(G)}return l==="vertical"&&Dt(p)?D=My().y(Lm).x1(jm).x0(p):Dt(p)?D=My().x(jm).y1(Lm).y0(p):D=MR().x(jm).y(Lm),D.defined(Ly).curve(E),D(k)},_v=function(t){var i=t.className,a=t.points,u=t.path,m=t.pathRef;if((!a||!a.length)&&!u)return null;var p=a&&a.length?u7(t):u;return Ue.createElement("path",nS({},fr(t,!1),Wy(t),{className:Or("recharts-curve",i),d:p,ref:m}))},j1={exports:{}},L1,_k;function h7(){if(_k)return L1;_k=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return L1=e,L1}var N1,xk;function d7(){if(xk)return N1;xk=1;var e=h7();function t(){}function i(){}return i.resetWarningCache=t,N1=function(){function a(p,l,P,A,E,k){if(k!==e){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}a.isRequired=a;function u(){return a}var m={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:u,element:a,elementType:a,instanceOf:u,node:a,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u,checkPropTypes:i,resetWarningCache:t};return m.PropTypes=m,m},N1}var bk;function f7(){return bk||(bk=1,j1.exports=d7()()),j1.exports}var p7=f7();const pn=mn(p7);var m7=Object.getOwnPropertyNames,g7=Object.getOwnPropertySymbols,y7=Object.prototype.hasOwnProperty;function wk(e,t){return function(a,u,m){return e(a,u,m)&&t(a,u,m)}}function Ny(e){return function(i,a,u){if(!i||!a||typeof i!="object"||typeof a!="object")return e(i,a,u);var m=u.cache,p=m.get(i),l=m.get(a);if(p&&l)return p===a&&l===i;m.set(i,a),m.set(a,i);var P=e(i,a,u);return m.delete(i),m.delete(a),P}}function v7(e){return e?.[Symbol.toStringTag]}function Sk(e){return m7(e).concat(g7(e))}var _7=Object.hasOwn||(function(e,t){return y7.call(e,t)});function Kd(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var x7="__v",b7="__o",w7="_owner",Pk=Object.getOwnPropertyDescriptor,Tk=Object.keys;function S7(e,t,i){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!i.equals(e[a],t[a],a,a,e,t,i))return!1;return!0}function P7(e,t){return Kd(e.getTime(),t.getTime())}function T7(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function A7(e,t){return e===t}function Ak(e,t,i){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var u=new Array(a),m=e.entries(),p,l,P=0;(p=m.next())&&!p.done;){for(var A=t.entries(),E=!1,k=0;(l=A.next())&&!l.done;){if(u[k]){k++;continue}var D=p.value,j=l.value;if(i.equals(D[0],j[0],P,k,e,t,i)&&i.equals(D[1],j[1],D[0],j[0],e,t,i)){E=u[k]=!0;break}k++}if(!E)return!1;P++}return!0}var C7=Kd;function E7(e,t,i){var a=Tk(e),u=a.length;if(Tk(t).length!==u)return!1;for(;u-- >0;)if(!Iz(e,t,i,a[u]))return!1;return!0}function Nm(e,t,i){var a=Sk(e),u=a.length;if(Sk(t).length!==u)return!1;for(var m,p,l;u-- >0;)if(m=a[u],!Iz(e,t,i,m)||(p=Pk(e,m),l=Pk(t,m),(p||l)&&(!p||!l||p.configurable!==l.configurable||p.enumerable!==l.enumerable||p.writable!==l.writable)))return!1;return!0}function M7(e,t){return Kd(e.valueOf(),t.valueOf())}function k7(e,t){return e.source===t.source&&e.flags===t.flags}function Ck(e,t,i){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var u=new Array(a),m=e.values(),p,l;(p=m.next())&&!p.done;){for(var P=t.values(),A=!1,E=0;(l=P.next())&&!l.done;){if(!u[E]&&i.equals(p.value,l.value,p.value,l.value,e,t,i)){A=u[E]=!0;break}E++}if(!A)return!1}return!0}function I7(e,t){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(e[i]!==t[i])return!1;return!0}function O7(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Iz(e,t,i,a){return(a===w7||a===b7||a===x7)&&(e.$$typeof||t.$$typeof)?!0:_7(t,a)&&i.equals(e[a],t[a],a,a,e,t,i)}var R7="[object Arguments]",D7="[object Boolean]",z7="[object Date]",j7="[object Error]",L7="[object Map]",N7="[object Number]",B7="[object Object]",F7="[object RegExp]",$7="[object Set]",U7="[object String]",V7="[object URL]",q7=Array.isArray,Ek=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Mk=Object.assign,G7=Object.prototype.toString.call.bind(Object.prototype.toString);function W7(e){var t=e.areArraysEqual,i=e.areDatesEqual,a=e.areErrorsEqual,u=e.areFunctionsEqual,m=e.areMapsEqual,p=e.areNumbersEqual,l=e.areObjectsEqual,P=e.arePrimitiveWrappersEqual,A=e.areRegExpsEqual,E=e.areSetsEqual,k=e.areTypedArraysEqual,D=e.areUrlsEqual,j=e.unknownTagComparators;return function(U,F,X){if(U===F)return!0;if(U==null||F==null)return!1;var J=typeof U;if(J!==typeof F)return!1;if(J!=="object")return J==="number"?p(U,F,X):J==="function"?u(U,F,X):!1;var te=U.constructor;if(te!==F.constructor)return!1;if(te===Object)return l(U,F,X);if(q7(U))return t(U,F,X);if(Ek!=null&&Ek(U))return k(U,F,X);if(te===Date)return i(U,F,X);if(te===RegExp)return A(U,F,X);if(te===Map)return m(U,F,X);if(te===Set)return E(U,F,X);var le=G7(U);if(le===z7)return i(U,F,X);if(le===F7)return A(U,F,X);if(le===L7)return m(U,F,X);if(le===$7)return E(U,F,X);if(le===B7)return typeof U.then!="function"&&typeof F.then!="function"&&l(U,F,X);if(le===V7)return D(U,F,X);if(le===j7)return a(U,F,X);if(le===R7)return l(U,F,X);if(le===D7||le===N7||le===U7)return P(U,F,X);if(j){var Y=j[le];if(!Y){var re=v7(U);re&&(Y=j[re])}if(Y)return Y(U,F,X)}return!1}}function Z7(e){var t=e.circular,i=e.createCustomConfig,a=e.strict,u={areArraysEqual:a?Nm:S7,areDatesEqual:P7,areErrorsEqual:T7,areFunctionsEqual:A7,areMapsEqual:a?wk(Ak,Nm):Ak,areNumbersEqual:C7,areObjectsEqual:a?Nm:E7,arePrimitiveWrappersEqual:M7,areRegExpsEqual:k7,areSetsEqual:a?wk(Ck,Nm):Ck,areTypedArraysEqual:a?Nm:I7,areUrlsEqual:O7,unknownTagComparators:void 0};if(i&&(u=Mk({},u,i(u))),t){var m=Ny(u.areArraysEqual),p=Ny(u.areMapsEqual),l=Ny(u.areObjectsEqual),P=Ny(u.areSetsEqual);u=Mk({},u,{areArraysEqual:m,areMapsEqual:p,areObjectsEqual:l,areSetsEqual:P})}return u}function H7(e){return function(t,i,a,u,m,p,l){return e(t,i,l)}}function K7(e){var t=e.circular,i=e.comparator,a=e.createState,u=e.equals,m=e.strict;if(a)return function(P,A){var E=a(),k=E.cache,D=k===void 0?t?new WeakMap:void 0:k,j=E.meta;return i(P,A,{cache:D,equals:u,meta:j,strict:m})};if(t)return function(P,A){return i(P,A,{cache:new WeakMap,equals:u,meta:void 0,strict:m})};var p={cache:void 0,equals:u,meta:void 0,strict:m};return function(P,A){return i(P,A,p)}}var X7=Oh();Oh({strict:!0});Oh({circular:!0});Oh({circular:!0,strict:!0});Oh({createInternalComparator:function(){return Kd}});Oh({strict:!0,createInternalComparator:function(){return Kd}});Oh({circular:!0,createInternalComparator:function(){return Kd}});Oh({circular:!0,createInternalComparator:function(){return Kd},strict:!0});function Oh(e){e===void 0&&(e={});var t=e.circular,i=t===void 0?!1:t,a=e.createInternalComparator,u=e.createState,m=e.strict,p=m===void 0?!1:m,l=Z7(e),P=W7(l),A=a?a(P):H7(P);return K7({circular:i,comparator:P,createState:u,equals:A,strict:p})}function Y7(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function kk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=-1,a=function u(m){i<0&&(i=m),m-i>t?(e(m),i=-1):Y7(u)};requestAnimationFrame(a)}function iS(e){"@babel/helpers - typeof";return iS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iS(e)}function J7(e){return r9(e)||t9(e)||e9(e)||Q7()}function Q7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e9(e,t){if(e){if(typeof e=="string")return Ik(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ik(e,t)}}function Ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function t9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function r9(e){if(Array.isArray(e))return e}function n9(){var e={},t=function(){return null},i=!1,a=function u(m){if(!i){if(Array.isArray(m)){if(!m.length)return;var p=m,l=J7(p),P=l[0],A=l.slice(1);if(typeof P=="number"){kk(u.bind(null,A),P);return}u(P),kk(u.bind(null,A));return}iS(m)==="object"&&(e=m,t(e)),typeof m=="function"&&m()}};return{stop:function(){i=!0},start:function(m){i=!1,a(m)},subscribe:function(m){return t=m,function(){t=function(){return null}}}}}function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}function Ok(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Rk(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(i),!0).forEach(function(a){Oz(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ok(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Oz(e,t,i){return t=i9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function i9(e){var t=a9(e,"string");return _g(t)==="symbol"?t:String(t)}function a9(e,t){if(_g(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(_g(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o9=function(t,i){return[Object.keys(t),Object.keys(i)].reduce(function(a,u){return a.filter(function(m){return u.includes(m)})})},s9=function(t){return t},l9=function(t){return t.replace(/([A-Z])/g,function(i){return"-".concat(i.toLowerCase())})},Wm=function(t,i){return Object.keys(i).reduce(function(a,u){return Rk(Rk({},a),{},Oz({},u,t(u,i[u])))},{})},Dk=function(t,i,a){return t.map(function(u){return"".concat(l9(u)," ").concat(i,"ms ").concat(a)}).join(",")};function c9(e,t){return d9(e)||h9(e,t)||Rz(e,t)||u9()}function u9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h9(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function d9(e){if(Array.isArray(e))return e}function f9(e){return g9(e)||m9(e)||Rz(e)||p9()}function p9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rz(e,t){if(e){if(typeof e=="string")return aS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return aS(e,t)}}function m9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g9(e){if(Array.isArray(e))return aS(e)}function aS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var xv=1e-4,Dz=function(t,i){return[0,3*t,3*i-6*t,3*t-3*i+1]},zz=function(t,i){return t.map(function(a,u){return a*Math.pow(i,u)}).reduce(function(a,u){return a+u})},zk=function(t,i){return function(a){var u=Dz(t,i);return zz(u,a)}},y9=function(t,i){return function(a){var u=Dz(t,i),m=[].concat(f9(u.map(function(p,l){return p*l}).slice(1)),[0]);return zz(m,a)}},jk=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var u=i[0],m=i[1],p=i[2],l=i[3];if(i.length===1)switch(i[0]){case"linear":u=0,m=0,p=1,l=1;break;case"ease":u=.25,m=.1,p=.25,l=1;break;case"ease-in":u=.42,m=0,p=1,l=1;break;case"ease-out":u=.42,m=0,p=.58,l=1;break;case"ease-in-out":u=0,m=0,p=.58,l=1;break;default:{var P=i[0].split("(");if(P[0]==="cubic-bezier"&&P[1].split(")")[0].split(",").length===4){var A=P[1].split(")")[0].split(",").map(function(F){return parseFloat(F)}),E=c9(A,4);u=E[0],m=E[1],p=E[2],l=E[3]}}}var k=zk(u,p),D=zk(m,l),j=y9(u,p),G=function(X){return X>1?1:X<0?0:X},U=function(X){for(var J=X>1?1:X,te=J,le=0;le<8;++le){var Y=k(te)-J,re=j(te);if(Math.abs(Y-J)<xv||re<xv)return D(te);te=G(te-Y/re)}return D(te)};return U.isStepper=!1,U},v9=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.stiff,a=i===void 0?100:i,u=t.damping,m=u===void 0?8:u,p=t.dt,l=p===void 0?17:p,P=function(E,k,D){var j=-(E-k)*a,G=D*m,U=D+(j-G)*l/1e3,F=D*l/1e3+E;return Math.abs(F-k)<xv&&Math.abs(U)<xv?[k,0]:[F,U]};return P.isStepper=!0,P.dt=l,P},_9=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var u=i[0];if(typeof u=="string")switch(u){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return jk(u);case"spring":return v9();default:if(u.split("(")[0]==="cubic-bezier")return jk(u)}return typeof u=="function"?u:null};function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function Lk(e){return w9(e)||b9(e)||jz(e)||x9()}function x9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w9(e){if(Array.isArray(e))return sS(e)}function Nk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function wa(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Nk(Object(i),!0).forEach(function(a){oS(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Nk(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function oS(e,t,i){return t=S9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function S9(e){var t=P9(e,"string");return xg(t)==="symbol"?t:String(t)}function P9(e,t){if(xg(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(xg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T9(e,t){return E9(e)||C9(e,t)||jz(e,t)||A9()}function A9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jz(e,t){if(e){if(typeof e=="string")return sS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sS(e,t)}}function sS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function C9(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function E9(e){if(Array.isArray(e))return e}var bv=function(t,i,a){return t+(i-t)*a},lS=function(t){var i=t.from,a=t.to;return i!==a},M9=function e(t,i,a){var u=Wm(function(m,p){if(lS(p)){var l=t(p.from,p.to,p.velocity),P=T9(l,2),A=P[0],E=P[1];return wa(wa({},p),{},{from:A,velocity:E})}return p},i);return a<1?Wm(function(m,p){return lS(p)?wa(wa({},p),{},{velocity:bv(p.velocity,u[m].velocity,a),from:bv(p.from,u[m].from,a)}):p},i):e(t,u,a-1)};const k9=(function(e,t,i,a,u){var m=o9(e,t),p=m.reduce(function(F,X){return wa(wa({},F),{},oS({},X,[e[X],t[X]]))},{}),l=m.reduce(function(F,X){return wa(wa({},F),{},oS({},X,{from:e[X],velocity:0,to:t[X]}))},{}),P=-1,A,E,k=function(){return null},D=function(){return Wm(function(X,J){return J.from},l)},j=function(){return!Object.values(l).filter(lS).length},G=function(X){A||(A=X);var J=X-A,te=J/i.dt;l=M9(i,l,te),u(wa(wa(wa({},e),t),D())),A=X,j()||(P=requestAnimationFrame(k))},U=function(X){E||(E=X);var J=(X-E)/a,te=Wm(function(Y,re){return bv.apply(void 0,Lk(re).concat([i(J)]))},p);if(u(wa(wa(wa({},e),t),te)),J<1)P=requestAnimationFrame(k);else{var le=Wm(function(Y,re){return bv.apply(void 0,Lk(re).concat([i(1)]))},p);u(wa(wa(wa({},e),t),le))}};return k=i.isStepper?G:U,function(){return requestAnimationFrame(k),function(){cancelAnimationFrame(P)}}});function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}var I9=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function O9(e,t){if(e==null)return{};var i=R9(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function R9(e,t){if(e==null)return{};var i={},a=Object.keys(e),u,m;for(m=0;m<a.length;m++)u=a[m],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function B1(e){return L9(e)||j9(e)||z9(e)||D9()}function D9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z9(e,t){if(e){if(typeof e=="string")return cS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return cS(e,t)}}function j9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function L9(e){if(Array.isArray(e))return cS(e)}function cS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Bk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Tl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Bk(Object(i),!0).forEach(function(a){Um(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bk(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Um(e,t,i){return t=Lz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function N9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B9(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Lz(a.key),a)}}function F9(e,t,i){return t&&B9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lz(e){var t=$9(e,"string");return pp(t)==="symbol"?t:String(t)}function $9(e,t){if(pp(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(pp(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uS(e,t)}function uS(e,t){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},uS(e,t)}function V9(e){var t=q9();return function(){var a=wv(e),u;if(t){var m=wv(this).constructor;u=Reflect.construct(a,arguments,m)}else u=a.apply(this,arguments);return hS(this,u)}}function hS(e,t){if(t&&(pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dS(e)}function dS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wv(e){return wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},wv(e)}var Cc=(function(e){U9(i,e);var t=V9(i);function i(a,u){var m;N9(this,i),m=t.call(this,a,u);var p=m.props,l=p.isActive,P=p.attributeName,A=p.from,E=p.to,k=p.steps,D=p.children,j=p.duration;if(m.handleStyleChange=m.handleStyleChange.bind(dS(m)),m.changeStyle=m.changeStyle.bind(dS(m)),!l||j<=0)return m.state={style:{}},typeof D=="function"&&(m.state={style:E}),hS(m);if(k&&k.length)m.state={style:k[0].style};else if(A){if(typeof D=="function")return m.state={style:A},hS(m);m.state={style:P?Um({},P,A):A}}else m.state={style:{}};return m}return F9(i,[{key:"componentDidMount",value:function(){var u=this.props,m=u.isActive,p=u.canBegin;this.mounted=!0,!(!m||!p)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(u){var m=this.props,p=m.isActive,l=m.canBegin,P=m.attributeName,A=m.shouldReAnimate,E=m.to,k=m.from,D=this.state.style;if(l){if(!p){var j={style:P?Um({},P,E):E};this.state&&D&&(P&&D[P]!==E||!P&&D!==E)&&this.setState(j);return}if(!(X7(u.to,E)&&u.canBegin&&u.isActive)){var G=!u.canBegin||!u.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var U=G||A?k:u.to;if(this.state&&D){var F={style:P?Um({},P,U):U};(P&&D[P]!==U||!P&&D!==U)&&this.setState(F)}this.runAnimation(Tl(Tl({},this.props),{},{from:U,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var u=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),u&&u()}},{key:"handleStyleChange",value:function(u){this.changeStyle(u)}},{key:"changeStyle",value:function(u){this.mounted&&this.setState({style:u})}},{key:"runJSAnimation",value:function(u){var m=this,p=u.from,l=u.to,P=u.duration,A=u.easing,E=u.begin,k=u.onAnimationEnd,D=u.onAnimationStart,j=k9(p,l,_9(A),P,this.changeStyle),G=function(){m.stopJSAnimation=j()};this.manager.start([D,E,G,P,k])}},{key:"runStepAnimation",value:function(u){var m=this,p=u.steps,l=u.begin,P=u.onAnimationStart,A=p[0],E=A.style,k=A.duration,D=k===void 0?0:k,j=function(U,F,X){if(X===0)return U;var J=F.duration,te=F.easing,le=te===void 0?"ease":te,Y=F.style,re=F.properties,de=F.onAnimationEnd,ge=X>0?p[X-1]:F,Ie=re||Object.keys(Y);if(typeof le=="function"||le==="spring")return[].concat(B1(U),[m.runJSAnimation.bind(m,{from:ge.style,to:Y,duration:J,easing:le}),J]);var We=Dk(Ie,J,le),Oe=Tl(Tl(Tl({},ge.style),Y),{},{transition:We});return[].concat(B1(U),[Oe,J,de]).filter(s9)};return this.manager.start([P].concat(B1(p.reduce(j,[E,Math.max(D,l)])),[u.onAnimationEnd]))}},{key:"runAnimation",value:function(u){this.manager||(this.manager=n9());var m=u.begin,p=u.duration,l=u.attributeName,P=u.to,A=u.easing,E=u.onAnimationStart,k=u.onAnimationEnd,D=u.steps,j=u.children,G=this.manager;if(this.unSubscribe=G.subscribe(this.handleStyleChange),typeof A=="function"||typeof j=="function"||A==="spring"){this.runJSAnimation(u);return}if(D.length>1){this.runStepAnimation(u);return}var U=l?Um({},l,P):P,F=Dk(Object.keys(U),p,A);G.start([E,m,Tl(Tl({},U),{},{transition:F}),p,k])}},{key:"render",value:function(){var u=this.props,m=u.children;u.begin;var p=u.duration;u.attributeName,u.easing;var l=u.isActive;u.steps,u.from,u.to,u.canBegin,u.onAnimationEnd,u.shouldReAnimate,u.onAnimationReStart;var P=O9(u,I9),A=Ue.Children.count(m),E=this.state.style;if(typeof m=="function")return m(E);if(!l||A===0||p<=0)return m;var k=function(j){var G=j.props,U=G.style,F=U===void 0?{}:U,X=G.className,J=Ue.cloneElement(j,Tl(Tl({},P),{},{style:Tl(Tl({},F),E),className:X}));return J};return A===1?k(Ue.Children.only(m)):Ee.createElement("div",null,Ue.Children.map(m,function(D){return k(D)}))}}]),i})(Ue.PureComponent);Cc.displayName="Animate";Cc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Cc.propTypes={from:pn.oneOfType([pn.object,pn.string]),to:pn.oneOfType([pn.object,pn.string]),attributeName:pn.string,duration:pn.number,begin:pn.number,easing:pn.oneOfType([pn.string,pn.func]),steps:pn.arrayOf(pn.shape({duration:pn.number.isRequired,style:pn.object.isRequired,easing:pn.oneOfType([pn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pn.func]),properties:pn.arrayOf("string"),onAnimationEnd:pn.func})),children:pn.oneOfType([pn.node,pn.func]),isActive:pn.bool,canBegin:pn.bool,onAnimationEnd:pn.func,shouldReAnimate:pn.bool,onAnimationStart:pn.func,onAnimationReStart:pn.func};function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Sv.apply(this,arguments)}function G9(e,t){return K9(e)||H9(e,t)||Z9(e,t)||W9()}function W9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z9(e,t){if(e){if(typeof e=="string")return Fk(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Fk(e,t)}}function Fk(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function H9(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function K9(e){if(Array.isArray(e))return e}function $k(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Uk(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?$k(Object(i),!0).forEach(function(a){X9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$k(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function X9(e,t,i){return t=Y9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Y9(e){var t=J9(e,"string");return bg(t)=="symbol"?t:t+""}function J9(e,t){if(bg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(bg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vk=function(t,i,a,u,m){var p=Math.min(Math.abs(a)/2,Math.abs(u)/2),l=u>=0?1:-1,P=a>=0?1:-1,A=u>=0&&a>=0||u<0&&a<0?1:0,E;if(p>0&&m instanceof Array){for(var k=[0,0,0,0],D=0,j=4;D<j;D++)k[D]=m[D]>p?p:m[D];E="M".concat(t,",").concat(i+l*k[0]),k[0]>0&&(E+="A ".concat(k[0],",").concat(k[0],",0,0,").concat(A,",").concat(t+P*k[0],",").concat(i)),E+="L ".concat(t+a-P*k[1],",").concat(i),k[1]>0&&(E+="A ".concat(k[1],",").concat(k[1],",0,0,").concat(A,`,
        `).concat(t+a,",").concat(i+l*k[1])),E+="L ".concat(t+a,",").concat(i+u-l*k[2]),k[2]>0&&(E+="A ".concat(k[2],",").concat(k[2],",0,0,").concat(A,`,
        `).concat(t+a-P*k[2],",").concat(i+u)),E+="L ".concat(t+P*k[3],",").concat(i+u),k[3]>0&&(E+="A ".concat(k[3],",").concat(k[3],",0,0,").concat(A,`,
        `).concat(t,",").concat(i+u-l*k[3])),E+="Z"}else if(p>0&&m===+m&&m>0){var G=Math.min(p,m);E="M ".concat(t,",").concat(i+l*G,`
            A `).concat(G,",").concat(G,",0,0,").concat(A,",").concat(t+P*G,",").concat(i,`
            L `).concat(t+a-P*G,",").concat(i,`
            A `).concat(G,",").concat(G,",0,0,").concat(A,",").concat(t+a,",").concat(i+l*G,`
            L `).concat(t+a,",").concat(i+u-l*G,`
            A `).concat(G,",").concat(G,",0,0,").concat(A,",").concat(t+a-P*G,",").concat(i+u,`
            L `).concat(t+P*G,",").concat(i+u,`
            A `).concat(G,",").concat(G,",0,0,").concat(A,",").concat(t,",").concat(i+u-l*G," Z")}else E="M ".concat(t,",").concat(i," h ").concat(a," v ").concat(u," h ").concat(-a," Z");return E},Q9=function(t,i){if(!t||!i)return!1;var a=t.x,u=t.y,m=i.x,p=i.y,l=i.width,P=i.height;if(Math.abs(l)>0&&Math.abs(P)>0){var A=Math.min(m,m+l),E=Math.max(m,m+l),k=Math.min(p,p+P),D=Math.max(p,p+P);return a>=A&&a<=E&&u>=k&&u<=D}return!1},eG={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},G2=function(t){var i=Uk(Uk({},eG),t),a=Ue.useRef(),u=Ue.useState(-1),m=G9(u,2),p=m[0],l=m[1];Ue.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var le=a.current.getTotalLength();le&&l(le)}catch{}},[]);var P=i.x,A=i.y,E=i.width,k=i.height,D=i.radius,j=i.className,G=i.animationEasing,U=i.animationDuration,F=i.animationBegin,X=i.isAnimationActive,J=i.isUpdateAnimationActive;if(P!==+P||A!==+A||E!==+E||k!==+k||E===0||k===0)return null;var te=Or("recharts-rectangle",j);return J?Ee.createElement(Cc,{canBegin:p>0,from:{width:E,height:k,x:P,y:A},to:{width:E,height:k,x:P,y:A},duration:U,animationEasing:G,isActive:J},function(le){var Y=le.width,re=le.height,de=le.x,ge=le.y;return Ee.createElement(Cc,{canBegin:p>0,from:"0px ".concat(p===-1?1:p,"px"),to:"".concat(p,"px 0px"),attributeName:"strokeDasharray",begin:F,duration:U,isActive:X,easing:G},Ee.createElement("path",Sv({},fr(i,!0),{className:te,d:Vk(de,ge,Y,re,D),ref:a})))}):Ee.createElement("path",Sv({},fr(i,!0),{className:te,d:Vk(P,A,E,k,D)}))},tG=["points","className","baseLinePoints","connectNulls"];function Xf(){return Xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Xf.apply(this,arguments)}function rG(e,t){if(e==null)return{};var i=nG(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function nG(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function qk(e){return sG(e)||oG(e)||aG(e)||iG()}function iG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aG(e,t){if(e){if(typeof e=="string")return fS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return fS(e,t)}}function oG(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sG(e){if(Array.isArray(e))return fS(e)}function fS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var Gk=function(t){return t&&t.x===+t.x&&t.y===+t.y},lG=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=[[]];return t.forEach(function(a){Gk(a)?i[i.length-1].push(a):i[i.length-1].length>0&&i.push([])}),Gk(t[0])&&i[i.length-1].push(t[0]),i[i.length-1].length<=0&&(i=i.slice(0,-1)),i},Zm=function(t,i){var a=lG(t);i&&(a=[a.reduce(function(m,p){return[].concat(qk(m),qk(p))},[])]);var u=a.map(function(m){return m.reduce(function(p,l,P){return"".concat(p).concat(P===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(u,"Z"):u},cG=function(t,i,a){var u=Zm(t,a);return"".concat(u.slice(-1)==="Z"?u.slice(0,-1):u,"L").concat(Zm(i.reverse(),a).slice(1))},uG=function(t){var i=t.points,a=t.className,u=t.baseLinePoints,m=t.connectNulls,p=rG(t,tG);if(!i||!i.length)return null;var l=Or("recharts-polygon",a);if(u&&u.length){var P=p.stroke&&p.stroke!=="none",A=cG(i,u,m);return Ee.createElement("g",{className:l},Ee.createElement("path",Xf({},fr(p,!0),{fill:A.slice(-1)==="Z"?p.fill:"none",stroke:"none",d:A})),P?Ee.createElement("path",Xf({},fr(p,!0),{fill:"none",d:Zm(i,m)})):null,P?Ee.createElement("path",Xf({},fr(p,!0),{fill:"none",d:Zm(u,m)})):null)}var E=Zm(i,m);return Ee.createElement("path",Xf({},fr(p,!0),{fill:E.slice(-1)==="Z"?p.fill:"none",className:l,d:E}))};function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},pS.apply(this,arguments)}var __=function(t){var i=t.cx,a=t.cy,u=t.r,m=t.className,p=Or("recharts-dot",m);return i===+i&&a===+a&&u===+u?Ue.createElement("circle",pS({},fr(t,!1),Wy(t),{className:p,cx:i,cy:a,r:u})):null};function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}var hG=["x","y","top","left","width","height","className"];function mS(){return mS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},mS.apply(this,arguments)}function Wk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function dG(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(i),!0).forEach(function(a){fG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wk(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function fG(e,t,i){return t=pG(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pG(e){var t=mG(e,"string");return wg(t)=="symbol"?t:t+""}function mG(e,t){if(wg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gG(e,t){if(e==null)return{};var i=yG(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function yG(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var vG=function(t,i,a,u,m,p){return"M".concat(t,",").concat(m,"v").concat(u,"M").concat(p,",").concat(i,"h").concat(a)},_G=function(t){var i=t.x,a=i===void 0?0:i,u=t.y,m=u===void 0?0:u,p=t.top,l=p===void 0?0:p,P=t.left,A=P===void 0?0:P,E=t.width,k=E===void 0?0:E,D=t.height,j=D===void 0?0:D,G=t.className,U=gG(t,hG),F=dG({x:a,y:m,top:l,left:A,width:k,height:j},U);return!Dt(a)||!Dt(m)||!Dt(k)||!Dt(j)||!Dt(l)||!Dt(A)?null:Ee.createElement("path",mS({},fr(F,!0),{className:Or("recharts-cross",G),d:vG(a,m,k,j,l,A)}))},F1,Zk;function xG(){if(Zk)return F1;Zk=1;var e=p_(),t=JD(),i=Mc();function a(u,m){return u&&u.length?e(u,i(m,2),t):void 0}return F1=a,F1}var bG=xG();const wG=mn(bG);var $1,Hk;function SG(){if(Hk)return $1;Hk=1;var e=p_(),t=Mc(),i=QD();function a(u,m){return u&&u.length?e(u,t(m,2),i):void 0}return $1=a,$1}var PG=SG();const TG=mn(PG);var AG=["cx","cy","angle","ticks","axisLine"],CG=["ticks","tick","angle","tickFormatter","stroke"];function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function Hm(){return Hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Hm.apply(this,arguments)}function Kk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Md(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Kk(Object(i),!0).forEach(function(a){x_(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Kk(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Xk(e,t){if(e==null)return{};var i=EG(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function EG(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function MG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yk(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Bz(a.key),a)}}function kG(e,t,i){return t&&Yk(e.prototype,t),i&&Yk(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function IG(e,t,i){return t=Pv(t),OG(e,Nz()?Reflect.construct(t,i||[],Pv(e).constructor):t.apply(e,i))}function OG(e,t){if(t&&(mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RG(e)}function RG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nz=function(){return!!e})()}function Pv(e){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Pv(e)}function DG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gS(e,t)}function gS(e,t){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},gS(e,t)}function x_(e,t,i){return t=Bz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Bz(e){var t=zG(e,"string");return mp(t)=="symbol"?t:t+""}function zG(e,t){if(mp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(mp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b_=(function(e){function t(){return MG(this,t),IG(this,t,arguments)}return DG(t,e),kG(t,[{key:"getTickValueCoord",value:function(a){var u=a.coordinate,m=this.props,p=m.angle,l=m.cx,P=m.cy;return In(l,P,u,p)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,u;switch(a){case"left":u="end";break;case"right":u="start";break;default:u="middle";break}return u}},{key:"getViewBox",value:function(){var a=this.props,u=a.cx,m=a.cy,p=a.angle,l=a.ticks,P=wG(l,function(E){return E.coordinate||0}),A=TG(l,function(E){return E.coordinate||0});return{cx:u,cy:m,startAngle:p,endAngle:p,innerRadius:A.coordinate||0,outerRadius:P.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,u=a.cx,m=a.cy,p=a.angle,l=a.ticks,P=a.axisLine,A=Xk(a,AG),E=l.reduce(function(G,U){return[Math.min(G[0],U.coordinate),Math.max(G[1],U.coordinate)]},[1/0,-1/0]),k=In(u,m,E[0],p),D=In(u,m,E[1],p),j=Md(Md(Md({},fr(A,!1)),{},{fill:"none"},fr(P,!1)),{},{x1:k.x,y1:k.y,x2:D.x,y2:D.y});return Ee.createElement("line",Hm({className:"recharts-polar-radius-axis-line"},j))}},{key:"renderTicks",value:function(){var a=this,u=this.props,m=u.ticks,p=u.tick,l=u.angle,P=u.tickFormatter,A=u.stroke,E=Xk(u,CG),k=this.getTickTextAnchor(),D=fr(E,!1),j=fr(p,!1),G=m.map(function(U,F){var X=a.getTickValueCoord(U),J=Md(Md(Md(Md({textAnchor:k,transform:"rotate(".concat(90-l,", ").concat(X.x,", ").concat(X.y,")")},D),{},{stroke:"none",fill:A},j),{},{index:F},X),{},{payload:U});return Ee.createElement(nn,Hm({className:Or("recharts-polar-radius-axis-tick",Cz(p)),key:"tick-".concat(U.coordinate)},Fd(a.props,U,F)),t.renderTickItem(p,J,P?P(U.value,F):U.value))});return Ee.createElement(nn,{className:"recharts-polar-radius-axis-ticks"},G)}},{key:"render",value:function(){var a=this.props,u=a.ticks,m=a.axisLine,p=a.tick;return!u||!u.length?null:Ee.createElement(nn,{className:Or("recharts-polar-radius-axis",this.props.className)},m&&this.renderAxisLine(),p&&this.renderTicks(),ia.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,u,m){var p;return Ee.isValidElement(a)?p=Ee.cloneElement(a,u):xr(a)?p=a(u):p=Ee.createElement($d,Hm({},u,{className:"recharts-polar-radius-axis-tick-value"}),m),p}}])})(Ue.PureComponent);x_(b_,"displayName","PolarRadiusAxis");x_(b_,"axisType","radiusAxis");x_(b_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function Rd(){return Rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Rd.apply(this,arguments)}function Jk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function kd(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Jk(Object(i),!0).forEach(function(a){w_(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Jk(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function jG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qk(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$z(a.key),a)}}function LG(e,t,i){return t&&Qk(e.prototype,t),i&&Qk(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function NG(e,t,i){return t=Tv(t),BG(e,Fz()?Reflect.construct(t,i||[],Tv(e).constructor):t.apply(e,i))}function BG(e,t){if(t&&(gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FG(e)}function FG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fz=function(){return!!e})()}function Tv(e){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Tv(e)}function $G(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yS(e,t)}function yS(e,t){return yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},yS(e,t)}function w_(e,t,i){return t=$z(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $z(e){var t=UG(e,"string");return gp(t)=="symbol"?t:t+""}function UG(e,t){if(gp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(gp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VG=Math.PI/180,eI=1e-5,S_=(function(e){function t(){return jG(this,t),NG(this,t,arguments)}return $G(t,e),LG(t,[{key:"getTickLineCoord",value:function(a){var u=this.props,m=u.cx,p=u.cy,l=u.radius,P=u.orientation,A=u.tickSize,E=A||8,k=In(m,p,l,a.coordinate),D=In(m,p,l+(P==="inner"?-1:1)*E,a.coordinate);return{x1:k.x,y1:k.y,x2:D.x,y2:D.y}}},{key:"getTickTextAnchor",value:function(a){var u=this.props.orientation,m=Math.cos(-a.coordinate*VG),p;return m>eI?p=u==="outer"?"start":"end":m<-eI?p=u==="outer"?"end":"start":p="middle",p}},{key:"renderAxisLine",value:function(){var a=this.props,u=a.cx,m=a.cy,p=a.radius,l=a.axisLine,P=a.axisLineType,A=kd(kd({},fr(this.props,!1)),{},{fill:"none"},fr(l,!1));if(P==="circle")return Ee.createElement(__,Rd({className:"recharts-polar-angle-axis-line"},A,{cx:u,cy:m,r:p}));var E=this.props.ticks,k=E.map(function(D){return In(u,m,p,D.coordinate)});return Ee.createElement(uG,Rd({className:"recharts-polar-angle-axis-line"},A,{points:k}))}},{key:"renderTicks",value:function(){var a=this,u=this.props,m=u.ticks,p=u.tick,l=u.tickLine,P=u.tickFormatter,A=u.stroke,E=fr(this.props,!1),k=fr(p,!1),D=kd(kd({},E),{},{fill:"none"},fr(l,!1)),j=m.map(function(G,U){var F=a.getTickLineCoord(G),X=a.getTickTextAnchor(G),J=kd(kd(kd({textAnchor:X},E),{},{stroke:"none",fill:A},k),{},{index:U,payload:G,x:F.x2,y:F.y2});return Ee.createElement(nn,Rd({className:Or("recharts-polar-angle-axis-tick",Cz(p)),key:"tick-".concat(G.coordinate)},Fd(a.props,G,U)),l&&Ee.createElement("line",Rd({className:"recharts-polar-angle-axis-tick-line"},D,F)),p&&t.renderTickItem(p,J,P?P(G.value,U):G.value))});return Ee.createElement(nn,{className:"recharts-polar-angle-axis-ticks"},j)}},{key:"render",value:function(){var a=this.props,u=a.ticks,m=a.radius,p=a.axisLine;return m<=0||!u||!u.length?null:Ee.createElement(nn,{className:Or("recharts-polar-angle-axis",this.props.className)},p&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,u,m){var p;return Ee.isValidElement(a)?p=Ee.cloneElement(a,u):xr(a)?p=a(u):p=Ee.createElement($d,Rd({},u,{className:"recharts-polar-angle-axis-tick-value"}),m),p}}])})(Ue.PureComponent);w_(S_,"displayName","PolarAngleAxis");w_(S_,"axisType","angleAxis");w_(S_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var U1,tI;function qG(){if(tI)return U1;tI=1;var e=JR(),t=e(Object.getPrototypeOf,Object);return U1=t,U1}var V1,rI;function GG(){if(rI)return V1;rI=1;var e=Du(),t=qG(),i=zu(),a="[object Object]",u=Function.prototype,m=Object.prototype,p=u.toString,l=m.hasOwnProperty,P=p.call(Object);function A(E){if(!i(E)||e(E)!=a)return!1;var k=t(E);if(k===null)return!0;var D=l.call(k,"constructor")&&k.constructor;return typeof D=="function"&&D instanceof D&&p.call(D)==P}return V1=A,V1}var WG=GG();const ZG=mn(WG);var q1,nI;function HG(){if(nI)return q1;nI=1;var e=Du(),t=zu(),i="[object Boolean]";function a(u){return u===!0||u===!1||t(u)&&e(u)==i}return q1=a,q1}var KG=HG();const XG=mn(KG);function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Av.apply(this,arguments)}function YG(e,t){return tW(e)||eW(e,t)||QG(e,t)||JG()}function JG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QG(e,t){if(e){if(typeof e=="string")return iI(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return iI(e,t)}}function iI(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function eW(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function tW(e){if(Array.isArray(e))return e}function aI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function oI(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aI(Object(i),!0).forEach(function(a){rW(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function rW(e,t,i){return t=nW(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function nW(e){var t=iW(e,"string");return Sg(t)=="symbol"?t:t+""}function iW(e,t){if(Sg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sI=function(t,i,a,u,m){var p=a-u,l;return l="M ".concat(t,",").concat(i),l+="L ".concat(t+a,",").concat(i),l+="L ".concat(t+a-p/2,",").concat(i+m),l+="L ".concat(t+a-p/2-u,",").concat(i+m),l+="L ".concat(t,",").concat(i," Z"),l},aW={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oW=function(t){var i=oI(oI({},aW),t),a=Ue.useRef(),u=Ue.useState(-1),m=YG(u,2),p=m[0],l=m[1];Ue.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var te=a.current.getTotalLength();te&&l(te)}catch{}},[]);var P=i.x,A=i.y,E=i.upperWidth,k=i.lowerWidth,D=i.height,j=i.className,G=i.animationEasing,U=i.animationDuration,F=i.animationBegin,X=i.isUpdateAnimationActive;if(P!==+P||A!==+A||E!==+E||k!==+k||D!==+D||E===0&&k===0||D===0)return null;var J=Or("recharts-trapezoid",j);return X?Ee.createElement(Cc,{canBegin:p>0,from:{upperWidth:0,lowerWidth:0,height:D,x:P,y:A},to:{upperWidth:E,lowerWidth:k,height:D,x:P,y:A},duration:U,animationEasing:G,isActive:X},function(te){var le=te.upperWidth,Y=te.lowerWidth,re=te.height,de=te.x,ge=te.y;return Ee.createElement(Cc,{canBegin:p>0,from:"0px ".concat(p===-1?1:p,"px"),to:"".concat(p,"px 0px"),attributeName:"strokeDasharray",begin:F,duration:U,easing:G},Ee.createElement("path",Av({},fr(i,!0),{className:J,d:sI(de,ge,le,Y,re),ref:a})))}):Ee.createElement("g",null,Ee.createElement("path",Av({},fr(i,!0),{className:J,d:sI(P,A,E,k,D)})))},sW=["option","shapeType","propTransformer","activeClassName","isActive"];function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}function lW(e,t){if(e==null)return{};var i=cW(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function cW(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function lI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Cv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?lI(Object(i),!0).forEach(function(a){uW(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function uW(e,t,i){return t=hW(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function hW(e){var t=dW(e,"string");return Pg(t)=="symbol"?t:t+""}function dW(e,t){if(Pg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fW(e,t){return Cv(Cv({},t),e)}function pW(e,t){return e==="symbols"}function cI(e){var t=e.shapeType,i=e.elementProps;switch(t){case"rectangle":return Ee.createElement(G2,i);case"trapezoid":return Ee.createElement(oW,i);case"sector":return Ee.createElement(kz,i);case"symbols":if(pW(t))return Ee.createElement(u2,i);break;default:return null}}function mW(e){return Ue.isValidElement(e)?e.props:e}function Uz(e){var t=e.option,i=e.shapeType,a=e.propTransformer,u=a===void 0?fW:a,m=e.activeClassName,p=m===void 0?"recharts-active-shape":m,l=e.isActive,P=lW(e,sW),A;if(Ue.isValidElement(t))A=Ue.cloneElement(t,Cv(Cv({},P),mW(t)));else if(xr(t))A=t(P);else if(ZG(t)&&!XG(t)){var E=u(t,P);A=Ee.createElement(cI,{shapeType:i,elementProps:E})}else{var k=P;A=Ee.createElement(cI,{shapeType:i,elementProps:k})}return l?Ee.createElement(nn,{className:p},A):A}function P_(e,t){return t!=null&&"trapezoids"in e.props}function T_(e,t){return t!=null&&"sectors"in e.props}function Tg(e,t){return t!=null&&"points"in e.props}function gW(e,t){var i,a,u=e.x===(t==null||(i=t.labelViewBox)===null||i===void 0?void 0:i.x)||e.x===t.x,m=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return u&&m}function yW(e,t){var i=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return i&&a}function vW(e,t){var i=e.x===t.x,a=e.y===t.y,u=e.z===t.z;return i&&a&&u}function _W(e,t){var i;return P_(e,t)?i=gW:T_(e,t)?i=yW:Tg(e,t)&&(i=vW),i}function xW(e,t){var i;return P_(e,t)?i="trapezoids":T_(e,t)?i="sectors":Tg(e,t)&&(i="points"),i}function bW(e,t){if(P_(e,t)){var i;return(i=t.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}if(T_(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Tg(e,t)?t.payload:{}}function wW(e){var t=e.activeTooltipItem,i=e.graphicalItem,a=e.itemData,u=xW(i,t),m=bW(i,t),p=a.filter(function(P,A){var E=Fg(m,P),k=i.props[u].filter(function(G){var U=_W(i,t);return U(G,t)}),D=i.props[u].indexOf(k[k.length-1]),j=A===D;return E&&j}),l=a.indexOf(p[p.length-1]);return l}var Uy;function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function Yf(){return Yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Yf.apply(this,arguments)}function uI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Mn(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(i),!0).forEach(function(a){Ns(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function SW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hI(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qz(a.key),a)}}function PW(e,t,i){return t&&hI(e.prototype,t),i&&hI(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function TW(e,t,i){return t=Ev(t),AW(e,Vz()?Reflect.construct(t,i||[],Ev(e).constructor):t.apply(e,i))}function AW(e,t){if(t&&(yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CW(e)}function CW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vz=function(){return!!e})()}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Ev(e)}function EW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vS(e,t)}function vS(e,t){return vS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},vS(e,t)}function Ns(e,t,i){return t=qz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qz(e){var t=MW(e,"string");return yp(t)=="symbol"?t:t+""}function MW(e,t){if(yp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(yp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Lu=(function(e){function t(i){var a;return SW(this,t),a=TW(this,t,[i]),Ns(a,"pieRef",null),Ns(a,"sectorRefs",[]),Ns(a,"id",Bp("recharts-pie-")),Ns(a,"handleAnimationEnd",function(){var u=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),xr(u)&&u()}),Ns(a,"handleAnimationStart",function(){var u=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),xr(u)&&u()}),a.state={isAnimationFinished:!i.isAnimationActive,prevIsAnimationActive:i.isAnimationActive,prevAnimationId:i.animationId,sectorToFocus:0},a}return EW(t,e),PW(t,[{key:"isActiveIndex",value:function(a){var u=this.props.activeIndex;return Array.isArray(u)?u.indexOf(a)!==-1:a===u}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var u=this.props.isAnimationActive;if(u&&!this.state.isAnimationFinished)return null;var m=this.props,p=m.label,l=m.labelLine,P=m.dataKey,A=m.valueKey,E=fr(this.props,!1),k=fr(p,!1),D=fr(l,!1),j=p&&p.offsetRadius||20,G=a.map(function(U,F){var X=(U.startAngle+U.endAngle)/2,J=In(U.cx,U.cy,U.outerRadius+j,X),te=Mn(Mn(Mn(Mn({},E),U),{},{stroke:"none"},k),{},{index:F,textAnchor:t.getTextAnchor(J.x,U.cx)},J),le=Mn(Mn(Mn(Mn({},E),U),{},{fill:"none",stroke:U.fill},D),{},{index:F,points:[In(U.cx,U.cy,U.outerRadius,X),J]}),Y=P;return kr(P)&&kr(A)?Y="value":kr(P)&&(Y=A),Ee.createElement(nn,{key:"label-".concat(U.startAngle,"-").concat(U.endAngle,"-").concat(U.midAngle,"-").concat(F)},l&&t.renderLabelLineItem(l,le,"line"),t.renderLabelItem(p,te,Wi(U,Y)))});return Ee.createElement(nn,{className:"recharts-pie-labels"},G)}},{key:"renderSectorsStatically",value:function(a){var u=this,m=this.props,p=m.activeShape,l=m.blendStroke,P=m.inactiveShape;return a.map(function(A,E){if(A?.startAngle===0&&A?.endAngle===0&&a.length!==1)return null;var k=u.isActiveIndex(E),D=P&&u.hasActiveIndex()?P:null,j=k?p:D,G=Mn(Mn({},A),{},{stroke:l?A.fill:A.stroke,tabIndex:-1});return Ee.createElement(nn,Yf({ref:function(F){F&&!u.sectorRefs.includes(F)&&u.sectorRefs.push(F)},tabIndex:-1,className:"recharts-pie-sector"},Fd(u.props,A,E),{key:"sector-".concat(A?.startAngle,"-").concat(A?.endAngle,"-").concat(A.midAngle,"-").concat(E)}),Ee.createElement(Uz,Yf({option:j,isActive:k,shapeType:"sector"},G)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,u=this.props,m=u.sectors,p=u.isAnimationActive,l=u.animationBegin,P=u.animationDuration,A=u.animationEasing,E=u.animationId,k=this.state,D=k.prevSectors,j=k.prevIsAnimationActive;return Ee.createElement(Cc,{begin:l,duration:P,isActive:p,easing:A,from:{t:0},to:{t:1},key:"pie-".concat(E,"-").concat(j),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(G){var U=G.t,F=[],X=m&&m[0],J=X.startAngle;return m.forEach(function(te,le){var Y=D&&D[le],re=le>0?rs(te,"paddingAngle",0):0;if(Y){var de=Qo(Y.endAngle-Y.startAngle,te.endAngle-te.startAngle),ge=Mn(Mn({},te),{},{startAngle:J+re,endAngle:J+de(U)+re});F.push(ge),J=ge.endAngle}else{var Ie=te.endAngle,We=te.startAngle,Oe=Qo(0,Ie-We),Ve=Oe(U),Ke=Mn(Mn({},te),{},{startAngle:J+re,endAngle:J+Ve+re});F.push(Ke),J=Ke.endAngle}}),Ee.createElement(nn,null,a.renderSectorsStatically(F))})}},{key:"attachKeyboardHandlers",value:function(a){var u=this;a.onkeydown=function(m){if(!m.altKey)switch(m.key){case"ArrowLeft":{var p=++u.state.sectorToFocus%u.sectorRefs.length;u.sectorRefs[p].focus(),u.setState({sectorToFocus:p});break}case"ArrowRight":{var l=--u.state.sectorToFocus<0?u.sectorRefs.length-1:u.state.sectorToFocus%u.sectorRefs.length;u.sectorRefs[l].focus(),u.setState({sectorToFocus:l});break}case"Escape":{u.sectorRefs[u.state.sectorToFocus].blur(),u.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,u=a.sectors,m=a.isAnimationActive,p=this.state.prevSectors;return m&&u&&u.length&&(!p||!Fg(p,u))?this.renderSectorsWithAnimation():this.renderSectorsStatically(u)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,u=this.props,m=u.hide,p=u.sectors,l=u.className,P=u.label,A=u.cx,E=u.cy,k=u.innerRadius,D=u.outerRadius,j=u.isAnimationActive,G=this.state.isAnimationFinished;if(m||!p||!p.length||!Dt(A)||!Dt(E)||!Dt(k)||!Dt(D))return null;var U=Or("recharts-pie",l);return Ee.createElement(nn,{tabIndex:this.props.rootTabIndex,className:U,ref:function(X){a.pieRef=X}},this.renderSectors(),P&&this.renderLabels(p),ia.renderCallByParent(this.props,null,!1),(!j||G)&&ku.renderCallByParent(this.props,p,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,u){return u.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==u.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:u.curSectors,isAnimationFinished:!0}:a.sectors!==u.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,u){return a>u?"start":a<u?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,u,m){if(Ee.isValidElement(a))return Ee.cloneElement(a,u);if(xr(a))return a(u);var p=Or("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Ee.createElement(_v,Yf({},u,{key:m,type:"linear",className:p}))}},{key:"renderLabelItem",value:function(a,u,m){if(Ee.isValidElement(a))return Ee.cloneElement(a,u);var p=m;if(xr(a)&&(p=a(u),Ee.isValidElement(p)))return p;var l=Or("recharts-pie-label-text",typeof a!="boolean"&&!xr(a)?a.className:"");return Ee.createElement($d,Yf({},u,{alignmentBaseline:"middle",className:l}),p)}}])})(Ue.PureComponent);Uy=Lu;Ns(Lu,"displayName","Pie");Ns(Lu,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Wd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ns(Lu,"parseDeltaAngle",function(e,t){var i=to(t-e),a=Math.min(Math.abs(t-e),360);return i*a});Ns(Lu,"getRealPieData",function(e){var t=e.data,i=e.children,a=fr(e,!1),u=ns(i,tg);return t&&t.length?t.map(function(m,p){return Mn(Mn(Mn({payload:m},a),m),u&&u[p]&&u[p].props)}):u&&u.length?u.map(function(m){return Mn(Mn({},a),m.props)}):[]});Ns(Lu,"parseCoordinateOfPie",function(e,t){var i=t.top,a=t.left,u=t.width,m=t.height,p=Az(u,m),l=a+ro(e.cx,u,u/2),P=i+ro(e.cy,m,m/2),A=ro(e.innerRadius,p,0),E=ro(e.outerRadius,p,p*.8),k=e.maxRadius||Math.sqrt(u*u+m*m)/2;return{cx:l,cy:P,innerRadius:A,outerRadius:E,maxRadius:k}});Ns(Lu,"getComposedData",function(e){var t=e.item,i=e.offset,a=t.type.defaultProps!==void 0?Mn(Mn({},t.type.defaultProps),t.props):t.props,u=Uy.getRealPieData(a);if(!u||!u.length)return null;var m=a.cornerRadius,p=a.startAngle,l=a.endAngle,P=a.paddingAngle,A=a.dataKey,E=a.nameKey,k=a.valueKey,D=a.tooltipType,j=Math.abs(a.minAngle),G=Uy.parseCoordinateOfPie(a,i),U=Uy.parseDeltaAngle(p,l),F=Math.abs(U),X=A;kr(A)&&kr(k)?(Eh(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),X="value"):kr(A)&&(Eh(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),X=k);var J=u.filter(function(ge){return Wi(ge,X,0)!==0}).length,te=(F>=360?J:J-1)*P,le=F-J*j-te,Y=u.reduce(function(ge,Ie){var We=Wi(Ie,X,0);return ge+(Dt(We)?We:0)},0),re;if(Y>0){var de;re=u.map(function(ge,Ie){var We=Wi(ge,X,0),Oe=Wi(ge,E,Ie),Ve=(Dt(We)?We:0)/Y,Ke;Ie?Ke=de.endAngle+to(U)*P*(We!==0?1:0):Ke=p;var ot=Ke+to(U)*((We!==0?j:0)+Ve*le),at=(Ke+ot)/2,st=(G.innerRadius+G.outerRadius)/2,lt=[{name:Oe,value:We,payload:ge,dataKey:X,type:D}],Le=In(G.cx,G.cy,st,at);return de=Mn(Mn(Mn({percent:Ve,cornerRadius:m,name:Oe,tooltipPayload:lt,midAngle:at,middleRadius:st,tooltipPosition:Le},ge),G),{},{value:Wi(ge,X),startAngle:Ke,endAngle:ot,payload:ge,paddingAngle:to(U)*P}),de})}return Mn(Mn({},G),{},{sectors:re,data:u})});var G1,dI;function kW(){if(dI)return G1;dI=1;var e=Math.ceil,t=Math.max;function i(a,u,m,p){for(var l=-1,P=t(e((u-a)/(m||1)),0),A=Array(P);P--;)A[p?P:++l]=a,a+=m;return A}return G1=i,G1}var W1,fI;function Gz(){if(fI)return W1;fI=1;var e=pD(),t=1/0,i=17976931348623157e292;function a(u){if(!u)return u===0?u:0;if(u=e(u),u===t||u===-t){var m=u<0?-1:1;return m*i}return u===u?u:0}return W1=a,W1}var Z1,pI;function IW(){if(pI)return Z1;pI=1;var e=kW(),t=s_(),i=Gz();function a(u){return function(m,p,l){return l&&typeof l!="number"&&t(m,p,l)&&(p=l=void 0),m=i(m),p===void 0?(p=m,m=0):p=i(p),l=l===void 0?m<p?1:-1:i(l),e(m,p,l,u)}}return Z1=a,Z1}var H1,mI;function OW(){if(mI)return H1;mI=1;var e=IW(),t=e();return H1=t,H1}var RW=OW();const Mv=mn(RW);function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}function gI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function yI(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(i),!0).forEach(function(a){Wz(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):gI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Wz(e,t,i){return t=DW(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function DW(e){var t=zW(e,"string");return Ag(t)=="symbol"?t:t+""}function zW(e,t){if(Ag(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jW=["Webkit","Moz","O","ms"],LW=function(t,i){var a=t.replace(/(\w)/,function(m){return m.toUpperCase()}),u=jW.reduce(function(m,p){return yI(yI({},m),{},Wz({},p+a,i))},{});return u[t]=i,u};function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},kv.apply(this,arguments)}function vI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function K1(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?vI(Object(i),!0).forEach(function(a){Yo(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function NW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _I(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Hz(a.key),a)}}function BW(e,t,i){return t&&_I(e.prototype,t),i&&_I(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function FW(e,t,i){return t=Iv(t),$W(e,Zz()?Reflect.construct(t,i||[],Iv(e).constructor):t.apply(e,i))}function $W(e,t){if(t&&(vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UW(e)}function UW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zz=function(){return!!e})()}function Iv(e){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Iv(e)}function VW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_S(e,t)}function _S(e,t){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},_S(e,t)}function Yo(e,t,i){return t=Hz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Hz(e){var t=qW(e,"string");return vp(t)=="symbol"?t:t+""}function qW(e,t){if(vp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(vp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var GW=function(t){var i=t.data,a=t.startIndex,u=t.endIndex,m=t.x,p=t.width,l=t.travellerWidth;if(!i||!i.length)return{};var P=i.length,A=qm().domain(Mv(0,P)).range([m,m+p-l]),E=A.domain().map(function(k){return A(k)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:A(a),endX:A(u),scale:A,scaleValues:E}},xI=function(t){return t.changedTouches&&!!t.changedTouches.length},_p=(function(e){function t(i){var a;return NW(this,t),a=FW(this,t,[i]),Yo(a,"handleDrag",function(u){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(u):a.state.isSlideMoving&&a.handleSlideDrag(u)}),Yo(a,"handleTouchMove",function(u){u.changedTouches!=null&&u.changedTouches.length>0&&a.handleDrag(u.changedTouches[0])}),Yo(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var u=a.props,m=u.endIndex,p=u.onDragEnd,l=u.startIndex;p?.({endIndex:m,startIndex:l})}),a.detachDragEndListener()}),Yo(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Yo(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Yo(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Yo(a,"handleSlideDragStart",function(u){var m=xI(u)?u.changedTouches[0]:u;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:m.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return VW(t,e),BW(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var u=a.startX,m=a.endX,p=this.state.scaleValues,l=this.props,P=l.gap,A=l.data,E=A.length-1,k=Math.min(u,m),D=Math.max(u,m),j=t.getIndexInRange(p,k),G=t.getIndexInRange(p,D);return{startIndex:j-j%P,endIndex:G===E?E:G-G%P}}},{key:"getTextOfTick",value:function(a){var u=this.props,m=u.data,p=u.tickFormatter,l=u.dataKey,P=Wi(m[a],l,a);return xr(p)?p(P,a):P}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var u=this.state,m=u.slideMoveStartX,p=u.startX,l=u.endX,P=this.props,A=P.x,E=P.width,k=P.travellerWidth,D=P.startIndex,j=P.endIndex,G=P.onChange,U=a.pageX-m;U>0?U=Math.min(U,A+E-k-l,A+E-k-p):U<0&&(U=Math.max(U,A-p,A-l));var F=this.getIndex({startX:p+U,endX:l+U});(F.startIndex!==D||F.endIndex!==j)&&G&&G(F),this.setState({startX:p+U,endX:l+U,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,u){var m=xI(u)?u.changedTouches[0]:u;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:m.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var u=this.state,m=u.brushMoveStartX,p=u.movingTravellerId,l=u.endX,P=u.startX,A=this.state[p],E=this.props,k=E.x,D=E.width,j=E.travellerWidth,G=E.onChange,U=E.gap,F=E.data,X={startX:this.state.startX,endX:this.state.endX},J=a.pageX-m;J>0?J=Math.min(J,k+D-j-A):J<0&&(J=Math.max(J,k-A)),X[p]=A+J;var te=this.getIndex(X),le=te.startIndex,Y=te.endIndex,re=function(){var ge=F.length-1;return p==="startX"&&(l>P?le%U===0:Y%U===0)||l<P&&Y===ge||p==="endX"&&(l>P?Y%U===0:le%U===0)||l>P&&Y===ge};this.setState(Yo(Yo({},p,A+J),"brushMoveStartX",a.pageX),function(){G&&re()&&G(te)})}},{key:"handleTravellerMoveKeyboard",value:function(a,u){var m=this,p=this.state,l=p.scaleValues,P=p.startX,A=p.endX,E=this.state[u],k=l.indexOf(E);if(k!==-1){var D=k+a;if(!(D===-1||D>=l.length)){var j=l[D];u==="startX"&&j>=A||u==="endX"&&j<=P||this.setState(Yo({},u,j),function(){m.props.onChange(m.getIndex({startX:m.state.startX,endX:m.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,u=a.x,m=a.y,p=a.width,l=a.height,P=a.fill,A=a.stroke;return Ee.createElement("rect",{stroke:A,fill:P,x:u,y:m,width:p,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,u=a.x,m=a.y,p=a.width,l=a.height,P=a.data,A=a.children,E=a.padding,k=Ue.Children.only(A);return k?Ee.cloneElement(k,{x:u,y:m,width:p,height:l,margin:E,compact:!0,data:P}):null}},{key:"renderTravellerLayer",value:function(a,u){var m,p,l=this,P=this.props,A=P.y,E=P.travellerWidth,k=P.height,D=P.traveller,j=P.ariaLabel,G=P.data,U=P.startIndex,F=P.endIndex,X=Math.max(a,this.props.x),J=K1(K1({},fr(this.props,!1)),{},{x:X,y:A,width:E,height:k}),te=j||"Min value: ".concat((m=G[U])===null||m===void 0?void 0:m.name,", Max value: ").concat((p=G[F])===null||p===void 0?void 0:p.name);return Ee.createElement(nn,{tabIndex:0,role:"slider","aria-label":te,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[u],onTouchStart:this.travellerDragStartHandlers[u],onKeyDown:function(Y){["ArrowLeft","ArrowRight"].includes(Y.key)&&(Y.preventDefault(),Y.stopPropagation(),l.handleTravellerMoveKeyboard(Y.key==="ArrowRight"?1:-1,u))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(D,J))}},{key:"renderSlide",value:function(a,u){var m=this.props,p=m.y,l=m.height,P=m.stroke,A=m.travellerWidth,E=Math.min(a,u)+A,k=Math.max(Math.abs(u-a)-A,0);return Ee.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:P,fillOpacity:.2,x:E,y:p,width:k,height:l})}},{key:"renderText",value:function(){var a=this.props,u=a.startIndex,m=a.endIndex,p=a.y,l=a.height,P=a.travellerWidth,A=a.stroke,E=this.state,k=E.startX,D=E.endX,j=5,G={pointerEvents:"none",fill:A};return Ee.createElement(nn,{className:"recharts-brush-texts"},Ee.createElement($d,kv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(k,D)-j,y:p+l/2},G),this.getTextOfTick(u)),Ee.createElement($d,kv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(k,D)+P+j,y:p+l/2},G),this.getTextOfTick(m)))}},{key:"render",value:function(){var a=this.props,u=a.data,m=a.className,p=a.children,l=a.x,P=a.y,A=a.width,E=a.height,k=a.alwaysShowText,D=this.state,j=D.startX,G=D.endX,U=D.isTextActive,F=D.isSlideMoving,X=D.isTravellerMoving,J=D.isTravellerFocused;if(!u||!u.length||!Dt(l)||!Dt(P)||!Dt(A)||!Dt(E)||A<=0||E<=0)return null;var te=Or("recharts-brush",m),le=Ee.Children.count(p)===1,Y=LW("userSelect","none");return Ee.createElement(nn,{className:te,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:Y},this.renderBackground(),le&&this.renderPanorama(),this.renderSlide(j,G),this.renderTravellerLayer(j,"startX"),this.renderTravellerLayer(G,"endX"),(U||F||X||J||k)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var u=a.x,m=a.y,p=a.width,l=a.height,P=a.stroke,A=Math.floor(m+l/2)-1;return Ee.createElement(Ee.Fragment,null,Ee.createElement("rect",{x:u,y:m,width:p,height:l,fill:P,stroke:"none"}),Ee.createElement("line",{x1:u+1,y1:A,x2:u+p-1,y2:A,fill:"none",stroke:"#fff"}),Ee.createElement("line",{x1:u+1,y1:A+2,x2:u+p-1,y2:A+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,u){var m;return Ee.isValidElement(a)?m=Ee.cloneElement(a,u):xr(a)?m=a(u):m=t.renderDefaultTraveller(u),m}},{key:"getDerivedStateFromProps",value:function(a,u){var m=a.data,p=a.width,l=a.x,P=a.travellerWidth,A=a.updateId,E=a.startIndex,k=a.endIndex;if(m!==u.prevData||A!==u.prevUpdateId)return K1({prevData:m,prevTravellerWidth:P,prevUpdateId:A,prevX:l,prevWidth:p},m&&m.length?GW({data:m,width:p,x:l,travellerWidth:P,startIndex:E,endIndex:k}):{scale:null,scaleValues:null});if(u.scale&&(p!==u.prevWidth||l!==u.prevX||P!==u.prevTravellerWidth)){u.scale.range([l,l+p-P]);var D=u.scale.domain().map(function(j){return u.scale(j)});return{prevData:m,prevTravellerWidth:P,prevUpdateId:A,prevX:l,prevWidth:p,startX:u.scale(a.startIndex),endX:u.scale(a.endIndex),scaleValues:D}}return null}},{key:"getIndexInRange",value:function(a,u){for(var m=a.length,p=0,l=m-1;l-p>1;){var P=Math.floor((p+l)/2);a[P]>u?l=P:p=P}return u>=a[l]?l:p}}])})(Ue.PureComponent);Yo(_p,"displayName","Brush");Yo(_p,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var X1,bI;function WW(){if(bI)return X1;bI=1;var e=y2();function t(i,a){var u;return e(i,function(m,p,l){return u=a(m,p,l),!u}),!!u}return X1=t,X1}var Y1,wI;function ZW(){if(wI)return Y1;wI=1;var e=GR(),t=Mc(),i=WW(),a=To(),u=s_();function m(p,l,P){var A=a(p)?e:i;return P&&u(p,l,P)&&(l=void 0),A(p,t(l,3))}return Y1=m,Y1}var HW=ZW();const KW=mn(HW);var Tc=function(t,i){var a=t.alwaysShow,u=t.ifOverflow;return a&&(u="extendDomain"),u===i},J1,SI;function XW(){if(SI)return J1;SI=1;var e=cD();function t(i,a,u){a=="__proto__"&&e?e(i,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):i[a]=u}return J1=t,J1}var Q1,PI;function YW(){if(PI)return Q1;PI=1;var e=XW(),t=sD(),i=Mc();function a(u,m){var p={};return m=i(m,3),t(u,function(l,P,A){e(p,P,m(l,P,A))}),p}return Q1=a,Q1}var JW=YW();const QW=mn(JW);var ew,TI;function eZ(){if(TI)return ew;TI=1;function e(t,i){for(var a=-1,u=t==null?0:t.length;++a<u;)if(!i(t[a],a,t))return!1;return!0}return ew=e,ew}var tw,AI;function tZ(){if(AI)return tw;AI=1;var e=y2();function t(i,a){var u=!0;return e(i,function(m,p,l){return u=!!a(m,p,l),u}),u}return tw=t,tw}var rw,CI;function rZ(){if(CI)return rw;CI=1;var e=eZ(),t=tZ(),i=Mc(),a=To(),u=s_();function m(p,l,P){var A=a(p)?e:t;return P&&u(p,l,P)&&(l=void 0),A(p,i(l,3))}return rw=m,rw}var nZ=rZ();const Kz=mn(nZ);var iZ=["x","y"];function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function xS(){return xS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},xS.apply(this,arguments)}function EI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Bm(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(i),!0).forEach(function(a){aZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):EI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function aZ(e,t,i){return t=oZ(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function oZ(e){var t=sZ(e,"string");return Cg(t)=="symbol"?t:t+""}function sZ(e,t){if(Cg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lZ(e,t){if(e==null)return{};var i=cZ(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function cZ(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function uZ(e,t){var i=e.x,a=e.y,u=lZ(e,iZ),m="".concat(i),p=parseInt(m,10),l="".concat(a),P=parseInt(l,10),A="".concat(t.height||u.height),E=parseInt(A,10),k="".concat(t.width||u.width),D=parseInt(k,10);return Bm(Bm(Bm(Bm(Bm({},t),u),p?{x:p}:{}),P?{y:P}:{}),{},{height:E,width:D,name:t.name,radius:t.radius})}function MI(e){return Ee.createElement(Uz,xS({shapeType:"rectangle",propTransformer:uZ,activeClassName:"recharts-active-bar"},e))}var hZ=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,u){if(typeof t=="number")return t;var m=Dt(a)||$4(a);return m?t(a,u):(m||Vd(),i)}},dZ=["value","background"],Xz;function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}function fZ(e,t){if(e==null)return{};var i=pZ(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function pZ(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ov.apply(this,arguments)}function kI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Ei(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kI(Object(i),!0).forEach(function(a){Sh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function mZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function II(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Jz(a.key),a)}}function gZ(e,t,i){return t&&II(e.prototype,t),i&&II(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function yZ(e,t,i){return t=Rv(t),vZ(e,Yz()?Reflect.construct(t,i||[],Rv(e).constructor):t.apply(e,i))}function vZ(e,t){if(t&&(xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Z(e)}function _Z(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yz=function(){return!!e})()}function Rv(e){return Rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Rv(e)}function xZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bS(e,t)}function bS(e,t){return bS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},bS(e,t)}function Sh(e,t,i){return t=Jz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Jz(e){var t=bZ(e,"string");return xp(t)=="symbol"?t:t+""}function bZ(e,t){if(xp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(xp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xd=(function(e){function t(){var i;mZ(this,t);for(var a=arguments.length,u=new Array(a),m=0;m<a;m++)u[m]=arguments[m];return i=yZ(this,t,[].concat(u)),Sh(i,"state",{isAnimationFinished:!1}),Sh(i,"id",Bp("recharts-bar-")),Sh(i,"handleAnimationEnd",function(){var p=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),p&&p()}),Sh(i,"handleAnimationStart",function(){var p=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),p&&p()}),i}return xZ(t,e),gZ(t,[{key:"renderRectanglesStatically",value:function(a){var u=this,m=this.props,p=m.shape,l=m.dataKey,P=m.activeIndex,A=m.activeBar,E=fr(this.props,!1);return a&&a.map(function(k,D){var j=D===P,G=j?A:p,U=Ei(Ei(Ei({},E),k),{},{isActive:j,option:G,index:D,dataKey:l,onAnimationStart:u.handleAnimationStart,onAnimationEnd:u.handleAnimationEnd});return Ee.createElement(nn,Ov({className:"recharts-bar-rectangle"},Fd(u.props,k,D),{key:"rectangle-".concat(k?.x,"-").concat(k?.y,"-").concat(k?.value,"-").concat(D)}),Ee.createElement(MI,U))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,u=this.props,m=u.data,p=u.layout,l=u.isAnimationActive,P=u.animationBegin,A=u.animationDuration,E=u.animationEasing,k=u.animationId,D=this.state.prevData;return Ee.createElement(Cc,{begin:P,duration:A,isActive:l,easing:E,from:{t:0},to:{t:1},key:"bar-".concat(k),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var G=j.t,U=m.map(function(F,X){var J=D&&D[X];if(J){var te=Qo(J.x,F.x),le=Qo(J.y,F.y),Y=Qo(J.width,F.width),re=Qo(J.height,F.height);return Ei(Ei({},F),{},{x:te(G),y:le(G),width:Y(G),height:re(G)})}if(p==="horizontal"){var de=Qo(0,F.height),ge=de(G);return Ei(Ei({},F),{},{y:F.y+F.height-ge,height:ge})}var Ie=Qo(0,F.width),We=Ie(G);return Ei(Ei({},F),{},{width:We})});return Ee.createElement(nn,null,a.renderRectanglesStatically(U))})}},{key:"renderRectangles",value:function(){var a=this.props,u=a.data,m=a.isAnimationActive,p=this.state.prevData;return m&&u&&u.length&&(!p||!Fg(p,u))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(u)}},{key:"renderBackground",value:function(){var a=this,u=this.props,m=u.data,p=u.dataKey,l=u.activeIndex,P=fr(this.props.background,!1);return m.map(function(A,E){A.value;var k=A.background,D=fZ(A,dZ);if(!k)return null;var j=Ei(Ei(Ei(Ei(Ei({},D),{},{fill:"#eee"},k),P),Fd(a.props,A,E)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:p,index:E,className:"recharts-bar-background-rectangle"});return Ee.createElement(MI,Ov({key:"background-bar-".concat(E),option:a.props.background,isActive:E===l},j))})}},{key:"renderErrorBar",value:function(a,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var m=this.props,p=m.data,l=m.xAxis,P=m.yAxis,A=m.layout,E=m.children,k=ns(E,$g);if(!k)return null;var D=A==="vertical"?p[0].height/2:p[0].width/2,j=function(F,X){var J=Array.isArray(F.value)?F.value[1]:F.value;return{x:F.x,y:F.y,value:J,errorVal:Wi(F,X)}},G={clipPath:a?"url(#clipPath-".concat(u,")"):null};return Ee.createElement(nn,G,k.map(function(U){return Ee.cloneElement(U,{key:"error-bar-".concat(u,"-").concat(U.props.dataKey),data:p,xAxis:l,yAxis:P,layout:A,offset:D,dataPointFormatter:j})}))}},{key:"render",value:function(){var a=this.props,u=a.hide,m=a.data,p=a.className,l=a.xAxis,P=a.yAxis,A=a.left,E=a.top,k=a.width,D=a.height,j=a.isAnimationActive,G=a.background,U=a.id;if(u||!m||!m.length)return null;var F=this.state.isAnimationFinished,X=Or("recharts-bar",p),J=l&&l.allowDataOverflow,te=P&&P.allowDataOverflow,le=J||te,Y=kr(U)?this.id:U;return Ee.createElement(nn,{className:X},J||te?Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clipPath-".concat(Y)},Ee.createElement("rect",{x:J?A:A-k/2,y:te?E:E-D/2,width:J?k:k*2,height:te?D:D*2}))):null,Ee.createElement(nn,{className:"recharts-bar-rectangles",clipPath:le?"url(#clipPath-".concat(Y,")"):null},G?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(le,Y),(!j||F)&&ku.renderCallByParent(this.props,m))}}],[{key:"getDerivedStateFromProps",value:function(a,u){return a.animationId!==u.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:u.curData}:a.data!==u.curData?{curData:a.data}:null}}])})(Ue.PureComponent);Xz=Xd;Sh(Xd,"displayName","Bar");Sh(Xd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Wd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Sh(Xd,"getComposedData",function(e){var t=e.props,i=e.item,a=e.barPosition,u=e.bandSize,m=e.xAxis,p=e.yAxis,l=e.xAxisTicks,P=e.yAxisTicks,A=e.stackedData,E=e.dataStartIndex,k=e.displayedData,D=e.offset,j=KV(a,i);if(!j)return null;var G=t.layout,U=i.type.defaultProps,F=U!==void 0?Ei(Ei({},U),i.props):i.props,X=F.dataKey,J=F.children,te=F.minPointSize,le=G==="horizontal"?p:m,Y=A?le.scale.domain():null,re=rq({numericAxis:le}),de=ns(J,tg),ge=k.map(function(Ie,We){var Oe,Ve,Ke,ot,at,st;A?Oe=XV(A[E+We],Y):(Oe=Wi(Ie,X),Array.isArray(Oe)||(Oe=[re,Oe]));var lt=hZ(te,Xz.defaultProps.minPointSize)(Oe[1],We);if(G==="horizontal"){var Le,tt=[p.scale(Oe[0]),p.scale(Oe[1])],ut=tt[0],Ae=tt[1];Ve=rk({axis:m,ticks:l,bandSize:u,offset:j.offset,entry:Ie,index:We}),Ke=(Le=Ae??ut)!==null&&Le!==void 0?Le:void 0,ot=j.size;var qe=ut-Ae;if(at=Number.isNaN(qe)?0:qe,st={x:Ve,y:p.y,width:ot,height:p.height},Math.abs(lt)>0&&Math.abs(at)<Math.abs(lt)){var yt=to(at||lt)*(Math.abs(lt)-Math.abs(at));Ke-=yt,at+=yt}}else{var Rt=[m.scale(Oe[0]),m.scale(Oe[1])],$t=Rt[0],Wt=Rt[1];if(Ve=$t,Ke=rk({axis:p,ticks:P,bandSize:u,offset:j.offset,entry:Ie,index:We}),ot=Wt-$t,at=j.size,st={x:m.x,y:Ke,width:m.width,height:at},Math.abs(lt)>0&&Math.abs(ot)<Math.abs(lt)){var er=to(ot||lt)*(Math.abs(lt)-Math.abs(ot));ot+=er}}return Ei(Ei(Ei({},Ie),{},{x:Ve,y:Ke,width:ot,height:at,value:A?Oe:Oe[1],payload:Ie,background:st},de&&de[We]&&de[We].props),{},{tooltipPayload:[Pz(i,Ie)],tooltipPosition:{x:Ve+ot/2,y:Ke+at/2}})});return Ei({data:ge,layout:G},D)});function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function wZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OI(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Qz(a.key),a)}}function SZ(e,t,i){return t&&OI(e.prototype,t),i&&OI(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function RI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Cl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(i),!0).forEach(function(a){A_(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):RI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function A_(e,t,i){return t=Qz(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Qz(e){var t=PZ(e,"string");return Eg(t)=="symbol"?t:t+""}function PZ(e,t){if(Eg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ej=function(t,i,a,u,m){var p=t.width,l=t.height,P=t.layout,A=t.children,E=Object.keys(i),k={left:a.left,leftMirror:a.left,right:p-a.right,rightMirror:p-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},D=!!Jo(A,Xd);return E.reduce(function(j,G){var U=i[G],F=U.orientation,X=U.domain,J=U.padding,te=J===void 0?{}:J,le=U.mirror,Y=U.reversed,re="".concat(F).concat(le?"Mirror":""),de,ge,Ie,We,Oe;if(U.type==="number"&&(U.padding==="gap"||U.padding==="no-gap")){var Ve=X[1]-X[0],Ke=1/0,ot=U.categoricalDomain.sort(q4);if(ot.forEach(function(Rt,$t){$t>0&&(Ke=Math.min((Rt||0)-(ot[$t-1]||0),Ke))}),Number.isFinite(Ke)){var at=Ke/Ve,st=U.layout==="vertical"?a.height:a.width;if(U.padding==="gap"&&(de=at*st/2),U.padding==="no-gap"){var lt=ro(t.barCategoryGap,at*st),Le=at*st/2;de=Le-lt-(Le-lt)/st*lt}}}u==="xAxis"?ge=[a.left+(te.left||0)+(de||0),a.left+a.width-(te.right||0)-(de||0)]:u==="yAxis"?ge=P==="horizontal"?[a.top+a.height-(te.bottom||0),a.top+(te.top||0)]:[a.top+(te.top||0)+(de||0),a.top+a.height-(te.bottom||0)-(de||0)]:ge=U.range,Y&&(ge=[ge[1],ge[0]]);var tt=xz(U,m,D),ut=tt.scale,Ae=tt.realScaleType;ut.domain(X).range(ge),bz(ut);var qe=wz(ut,Cl(Cl({},U),{},{realScaleType:Ae}));u==="xAxis"?(Oe=F==="top"&&!le||F==="bottom"&&le,Ie=a.left,We=k[re]-Oe*U.height):u==="yAxis"&&(Oe=F==="left"&&!le||F==="right"&&le,Ie=k[re]-Oe*U.width,We=a.top);var yt=Cl(Cl(Cl({},U),qe),{},{realScaleType:Ae,x:Ie,y:We,scale:ut,width:u==="xAxis"?a.width:U.width,height:u==="yAxis"?a.height:U.height});return yt.bandSize=gv(yt,qe),!U.hide&&u==="xAxis"?k[re]+=(Oe?-1:1)*yt.height:U.hide||(k[re]+=(Oe?-1:1)*yt.width),Cl(Cl({},j),{},A_({},G,yt))},{})},tj=function(t,i){var a=t.x,u=t.y,m=i.x,p=i.y;return{x:Math.min(a,m),y:Math.min(u,p),width:Math.abs(m-a),height:Math.abs(p-u)}},TZ=function(t){var i=t.x1,a=t.y1,u=t.x2,m=t.y2;return tj({x:i,y:a},{x:u,y:m})},rj=(function(){function e(t){wZ(this,e),this.scale=t}return SZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.bandAware,m=a.position;if(i!==void 0){if(m)switch(m){case"start":return this.scale(i);case"middle":{var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+p}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(i)+l}default:return this.scale(i)}if(u){var P=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+P}return this.scale(i)}}},{key:"isInRange",value:function(i){var a=this.range(),u=a[0],m=a[a.length-1];return u<=m?i>=u&&i<=m:i>=m&&i<=u}}],[{key:"create",value:function(i){return new e(i)}}])})();A_(rj,"EPS",1e-4);var W2=function(t){var i=Object.keys(t).reduce(function(a,u){return Cl(Cl({},a),{},A_({},u,rj.create(t[u])))},{});return Cl(Cl({},i),{},{apply:function(u){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=m.bandAware,l=m.position;return QW(u,function(P,A){return i[A].apply(P,{bandAware:p,position:l})})},isInRange:function(u){return Kz(u,function(m,p){return i[p].isInRange(m)})}})};function AZ(e){return(e%180+180)%180}var CZ=function(t){var i=t.width,a=t.height,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=AZ(u),p=m*Math.PI/180,l=Math.atan(a/i),P=p>l&&p<Math.PI-l?a/Math.sin(p):i/Math.cos(p);return Math.abs(P)},nw,DI;function EZ(){if(DI)return nw;DI=1;var e=Mc(),t=zg(),i=a_();function a(u){return function(m,p,l){var P=Object(m);if(!t(m)){var A=e(p,3);m=i(m),p=function(k){return A(P[k],k,P)}}var E=u(m,p,l);return E>-1?P[A?m[E]:E]:void 0}}return nw=a,nw}var iw,zI;function MZ(){if(zI)return iw;zI=1;var e=Gz();function t(i){var a=e(i),u=a%1;return a===a?u?a-u:a:0}return iw=t,iw}var aw,jI;function kZ(){if(jI)return aw;jI=1;var e=rD(),t=Mc(),i=MZ(),a=Math.max;function u(m,p,l){var P=m==null?0:m.length;if(!P)return-1;var A=l==null?0:i(l);return A<0&&(A=a(P+A,0)),e(m,t(p,3),A)}return aw=u,aw}var ow,LI;function IZ(){if(LI)return ow;LI=1;var e=EZ(),t=kZ(),i=e(t);return ow=i,ow}var OZ=IZ();const RZ=mn(OZ);var DZ=vR();const zZ=mn(DZ);var jZ=zZ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Z2=Ue.createContext(void 0),H2=Ue.createContext(void 0),nj=Ue.createContext(void 0),ij=Ue.createContext({}),aj=Ue.createContext(void 0),oj=Ue.createContext(0),sj=Ue.createContext(0),NI=function(t){var i=t.state,a=i.xAxisMap,u=i.yAxisMap,m=i.offset,p=t.clipPathId,l=t.children,P=t.width,A=t.height,E=jZ(m);return Ee.createElement(Z2.Provider,{value:a},Ee.createElement(H2.Provider,{value:u},Ee.createElement(ij.Provider,{value:m},Ee.createElement(nj.Provider,{value:E},Ee.createElement(aj.Provider,{value:p},Ee.createElement(oj.Provider,{value:A},Ee.createElement(sj.Provider,{value:P},l)))))))},LZ=function(){return Ue.useContext(aj)},lj=function(t){var i=Ue.useContext(Z2);i==null&&Vd();var a=i[t];return a==null&&Vd(),a},NZ=function(){var t=Ue.useContext(Z2);return wh(t)},BZ=function(){var t=Ue.useContext(H2),i=RZ(t,function(a){return Kz(a.domain,Number.isFinite)});return i||wh(t)},cj=function(t){var i=Ue.useContext(H2);i==null&&Vd();var a=i[t];return a==null&&Vd(),a},FZ=function(){var t=Ue.useContext(nj);return t},$Z=function(){return Ue.useContext(ij)},K2=function(){return Ue.useContext(sj)},X2=function(){return Ue.useContext(oj)};function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function UZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VZ(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,hj(a.key),a)}}function qZ(e,t,i){return t&&VZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GZ(e,t,i){return t=Dv(t),WZ(e,uj()?Reflect.construct(t,i||[],Dv(e).constructor):t.apply(e,i))}function WZ(e,t){if(t&&(bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZZ(e)}function ZZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uj=function(){return!!e})()}function Dv(e){return Dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Dv(e)}function HZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wS(e,t)}function wS(e,t){return wS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},wS(e,t)}function BI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function FI(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?BI(Object(i),!0).forEach(function(a){Y2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Y2(e,t,i){return t=hj(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function hj(e){var t=KZ(e,"string");return bp(t)=="symbol"?t:t+""}function KZ(e,t){if(bp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(bp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function XZ(e,t){return eH(e)||QZ(e,t)||JZ(e,t)||YZ()}function YZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JZ(e,t){if(e){if(typeof e=="string")return $I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $I(e,t)}}function $I(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function QZ(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function eH(e){if(Array.isArray(e))return e}function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},SS.apply(this,arguments)}var tH=function(t,i){var a;return Ee.isValidElement(t)?a=Ee.cloneElement(t,i):xr(t)?a=t(i):a=Ee.createElement("line",SS({},i,{className:"recharts-reference-line-line"})),a},rH=function(t,i,a,u,m,p,l,P,A){var E=m.x,k=m.y,D=m.width,j=m.height;if(a){var G=A.y,U=t.y.apply(G,{position:p});if(Tc(A,"discard")&&!t.y.isInRange(U))return null;var F=[{x:E+D,y:U},{x:E,y:U}];return P==="left"?F.reverse():F}if(i){var X=A.x,J=t.x.apply(X,{position:p});if(Tc(A,"discard")&&!t.x.isInRange(J))return null;var te=[{x:J,y:k+j},{x:J,y:k}];return l==="top"?te.reverse():te}if(u){var le=A.segment,Y=le.map(function(re){return t.apply(re,{position:p})});return Tc(A,"discard")&&KW(Y,function(re){return!t.isInRange(re)})?null:Y}return null};function nH(e){var t=e.x,i=e.y,a=e.segment,u=e.xAxisId,m=e.yAxisId,p=e.shape,l=e.className,P=e.alwaysShow,A=LZ(),E=lj(u),k=cj(m),D=FZ();if(!A||!D)return null;Eh(P===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var j=W2({x:E.scale,y:k.scale}),G=Zi(t),U=Zi(i),F=a&&a.length===2,X=rH(j,G,U,F,D,e.position,E.orientation,k.orientation,e);if(!X)return null;var J=XZ(X,2),te=J[0],le=te.x,Y=te.y,re=J[1],de=re.x,ge=re.y,Ie=Tc(e,"hidden")?"url(#".concat(A,")"):void 0,We=FI(FI({clipPath:Ie},fr(e,!0)),{},{x1:le,y1:Y,x2:de,y2:ge});return Ee.createElement(nn,{className:Or("recharts-reference-line",l)},tH(p,We),ia.renderCallByParent(e,TZ({x1:le,y1:Y,x2:de,y2:ge})))}var J2=(function(e){function t(){return UZ(this,t),GZ(this,t,arguments)}return HZ(t,e),qZ(t,[{key:"render",value:function(){return Ee.createElement(nH,this.props)}}])})(Ee.Component);Y2(J2,"displayName","ReferenceLine");Y2(J2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function PS(){return PS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},PS.apply(this,arguments)}function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function UI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function VI(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(i),!0).forEach(function(a){C_(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):UI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function iH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,fj(a.key),a)}}function oH(e,t,i){return t&&aH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sH(e,t,i){return t=zv(t),lH(e,dj()?Reflect.construct(t,i||[],zv(e).constructor):t.apply(e,i))}function lH(e,t){if(t&&(wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cH(e)}function cH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dj=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},zv(e)}function uH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TS(e,t)}function TS(e,t){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},TS(e,t)}function C_(e,t,i){return t=fj(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fj(e){var t=hH(e,"string");return wp(t)=="symbol"?t:t+""}function hH(e,t){if(wp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(wp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dH=function(t){var i=t.x,a=t.y,u=t.xAxis,m=t.yAxis,p=W2({x:u.scale,y:m.scale}),l=p.apply({x:i,y:a},{bandAware:!0});return Tc(t,"discard")&&!p.isInRange(l)?null:l},E_=(function(e){function t(){return iH(this,t),sH(this,t,arguments)}return uH(t,e),oH(t,[{key:"render",value:function(){var a=this.props,u=a.x,m=a.y,p=a.r,l=a.alwaysShow,P=a.clipPathId,A=Zi(u),E=Zi(m);if(Eh(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!A||!E)return null;var k=dH(this.props);if(!k)return null;var D=k.x,j=k.y,G=this.props,U=G.shape,F=G.className,X=Tc(this.props,"hidden")?"url(#".concat(P,")"):void 0,J=VI(VI({clipPath:X},fr(this.props,!0)),{},{cx:D,cy:j});return Ee.createElement(nn,{className:Or("recharts-reference-dot",F)},t.renderDot(U,J),ia.renderCallByParent(this.props,{x:D-p,y:j-p,width:2*p,height:2*p}))}}])})(Ee.Component);C_(E_,"displayName","ReferenceDot");C_(E_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});C_(E_,"renderDot",function(e,t){var i;return Ee.isValidElement(e)?i=Ee.cloneElement(e,t):xr(e)?i=e(t):i=Ee.createElement(__,PS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),i});function AS(){return AS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},AS.apply(this,arguments)}function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function qI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function GI(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?qI(Object(i),!0).forEach(function(a){M_(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function fH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pH(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mj(a.key),a)}}function mH(e,t,i){return t&&pH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gH(e,t,i){return t=jv(t),yH(e,pj()?Reflect.construct(t,i||[],jv(e).constructor):t.apply(e,i))}function yH(e,t){if(t&&(Sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vH(e)}function vH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pj=function(){return!!e})()}function jv(e){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},jv(e)}function _H(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CS(e,t)}function CS(e,t){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},CS(e,t)}function M_(e,t,i){return t=mj(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mj(e){var t=xH(e,"string");return Sp(t)=="symbol"?t:t+""}function xH(e,t){if(Sp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Sp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bH=function(t,i,a,u,m){var p=m.x1,l=m.x2,P=m.y1,A=m.y2,E=m.xAxis,k=m.yAxis;if(!E||!k)return null;var D=W2({x:E.scale,y:k.scale}),j={x:t?D.x.apply(p,{position:"start"}):D.x.rangeMin,y:a?D.y.apply(P,{position:"start"}):D.y.rangeMin},G={x:i?D.x.apply(l,{position:"end"}):D.x.rangeMax,y:u?D.y.apply(A,{position:"end"}):D.y.rangeMax};return Tc(m,"discard")&&(!D.isInRange(j)||!D.isInRange(G))?null:tj(j,G)},k_=(function(e){function t(){return fH(this,t),gH(this,t,arguments)}return _H(t,e),mH(t,[{key:"render",value:function(){var a=this.props,u=a.x1,m=a.x2,p=a.y1,l=a.y2,P=a.className,A=a.alwaysShow,E=a.clipPathId;Eh(A===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var k=Zi(u),D=Zi(m),j=Zi(p),G=Zi(l),U=this.props.shape;if(!k&&!D&&!j&&!G&&!U)return null;var F=bH(k,D,j,G,this.props);if(!F&&!U)return null;var X=Tc(this.props,"hidden")?"url(#".concat(E,")"):void 0;return Ee.createElement(nn,{className:Or("recharts-reference-area",P)},t.renderRect(U,GI(GI({clipPath:X},fr(this.props,!0)),F)),ia.renderCallByParent(this.props,F))}}])})(Ee.Component);M_(k_,"displayName","ReferenceArea");M_(k_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});M_(k_,"renderRect",function(e,t){var i;return Ee.isValidElement(e)?i=Ee.cloneElement(e,t):xr(e)?i=e(t):i=Ee.createElement(G2,AS({},t,{className:"recharts-reference-area-rect"})),i});function gj(e,t,i){if(t<1)return[];if(t===1&&i===void 0)return e;for(var a=[],u=0;u<e.length;u+=t)a.push(e[u]);return a}function wH(e,t,i){var a={width:e.width+t.width,height:e.height+t.height};return CZ(a,i)}function SH(e,t,i){var a=i==="width",u=e.x,m=e.y,p=e.width,l=e.height;return t===1?{start:a?u:m,end:a?u+p:m+l}:{start:a?u+p:m+l,end:a?u:m}}function Lv(e,t,i,a,u){if(e*t<e*a||e*t>e*u)return!1;var m=i();return e*(t-e*m/2-a)>=0&&e*(t+e*m/2-u)<=0}function PH(e,t){return gj(e,t+1)}function TH(e,t,i,a,u){for(var m=(a||[]).slice(),p=t.start,l=t.end,P=0,A=1,E=p,k=function(){var G=a?.[P];if(G===void 0)return{v:gj(a,A)};var U=P,F,X=function(){return F===void 0&&(F=i(G,U)),F},J=G.coordinate,te=P===0||Lv(e,J,X,E,l);te||(P=0,E=p,A+=1),te&&(E=J+e*(X()/2+u),P+=A)},D;A<=m.length;)if(D=k(),D)return D.v;return[]}function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function WI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function La(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(i),!0).forEach(function(a){AH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):WI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function AH(e,t,i){return t=CH(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function CH(e){var t=EH(e,"string");return Mg(t)=="symbol"?t:t+""}function EH(e,t){if(Mg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Mg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MH(e,t,i,a,u){for(var m=(a||[]).slice(),p=m.length,l=t.start,P=t.end,A=function(D){var j=m[D],G,U=function(){return G===void 0&&(G=i(j,D)),G};if(D===p-1){var F=e*(j.coordinate+e*U()/2-P);m[D]=j=La(La({},j),{},{tickCoord:F>0?j.coordinate-F*e:j.coordinate})}else m[D]=j=La(La({},j),{},{tickCoord:j.coordinate});var X=Lv(e,j.tickCoord,U,l,P);X&&(P=j.tickCoord-e*(U()/2+u),m[D]=La(La({},j),{},{isShow:!0}))},E=p-1;E>=0;E--)A(E);return m}function kH(e,t,i,a,u,m){var p=(a||[]).slice(),l=p.length,P=t.start,A=t.end;if(m){var E=a[l-1],k=i(E,l-1),D=e*(E.coordinate+e*k/2-A);p[l-1]=E=La(La({},E),{},{tickCoord:D>0?E.coordinate-D*e:E.coordinate});var j=Lv(e,E.tickCoord,function(){return k},P,A);j&&(A=E.tickCoord-e*(k/2+u),p[l-1]=La(La({},E),{},{isShow:!0}))}for(var G=m?l-1:l,U=function(J){var te=p[J],le,Y=function(){return le===void 0&&(le=i(te,J)),le};if(J===0){var re=e*(te.coordinate-e*Y()/2-P);p[J]=te=La(La({},te),{},{tickCoord:re<0?te.coordinate-re*e:te.coordinate})}else p[J]=te=La(La({},te),{},{tickCoord:te.coordinate});var de=Lv(e,te.tickCoord,Y,P,A);de&&(P=te.tickCoord+e*(Y()/2+u),p[J]=La(La({},te),{},{isShow:!0}))},F=0;F<G;F++)U(F);return p}function Q2(e,t,i){var a=e.tick,u=e.ticks,m=e.viewBox,p=e.minTickGap,l=e.orientation,P=e.interval,A=e.tickFormatter,E=e.unit,k=e.angle;if(!u||!u.length||!a)return[];if(Dt(P)||Wd.isSsr)return PH(u,typeof P=="number"&&Dt(P)?P:0);var D=[],j=l==="top"||l==="bottom"?"width":"height",G=E&&j==="width"?Vm(E,{fontSize:t,letterSpacing:i}):{width:0,height:0},U=function(te,le){var Y=xr(A)?A(te.value,le):te.value;return j==="width"?wH(Vm(Y,{fontSize:t,letterSpacing:i}),G,k):Vm(Y,{fontSize:t,letterSpacing:i})[j]},F=u.length>=2?to(u[1].coordinate-u[0].coordinate):1,X=SH(m,F,j);return P==="equidistantPreserveStart"?TH(F,X,U,u,p):(P==="preserveStart"||P==="preserveStartEnd"?D=kH(F,X,U,u,p,P==="preserveStartEnd"):D=MH(F,X,U,u,p),D.filter(function(J){return J.isShow}))}var IH=["viewBox"],OH=["viewBox"],RH=["ticks"];function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Jf.apply(this,arguments)}function ZI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function qi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ZI(Object(i),!0).forEach(function(a){eP(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ZI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function sw(e,t){if(e==null)return{};var i=DH(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function DH(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function zH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HI(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vj(a.key),a)}}function jH(e,t,i){return t&&HI(e.prototype,t),i&&HI(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function LH(e,t,i){return t=Nv(t),NH(e,yj()?Reflect.construct(t,i||[],Nv(e).constructor):t.apply(e,i))}function NH(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BH(e)}function BH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yj=function(){return!!e})()}function Nv(e){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Nv(e)}function FH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ES(e,t)}function ES(e,t){return ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},ES(e,t)}function eP(e,t,i){return t=vj(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function vj(e){var t=$H(e,"string");return Pp(t)=="symbol"?t:t+""}function $H(e,t){if(Pp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Pp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qp=(function(e){function t(i){var a;return zH(this,t),a=LH(this,t,[i]),a.state={fontSize:"",letterSpacing:""},a}return FH(t,e),jH(t,[{key:"shouldComponentUpdate",value:function(a,u){var m=a.viewBox,p=sw(a,IH),l=this.props,P=l.viewBox,A=sw(l,OH);return!ep(m,P)||!ep(p,A)||!ep(u,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var u=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];u&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var u=this.props,m=u.x,p=u.y,l=u.width,P=u.height,A=u.orientation,E=u.tickSize,k=u.mirror,D=u.tickMargin,j,G,U,F,X,J,te=k?-1:1,le=a.tickSize||E,Y=Dt(a.tickCoord)?a.tickCoord:a.coordinate;switch(A){case"top":j=G=a.coordinate,F=p+ +!k*P,U=F-te*le,J=U-te*D,X=Y;break;case"left":U=F=a.coordinate,G=m+ +!k*l,j=G-te*le,X=j-te*D,J=Y;break;case"right":U=F=a.coordinate,G=m+ +k*l,j=G+te*le,X=j+te*D,J=Y;break;default:j=G=a.coordinate,F=p+ +k*P,U=F+te*le,J=U+te*D,X=Y;break}return{line:{x1:j,y1:U,x2:G,y2:F},tick:{x:X,y:J}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,u=a.orientation,m=a.mirror,p;switch(u){case"left":p=m?"start":"end";break;case"right":p=m?"end":"start";break;default:p="middle";break}return p}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,u=a.orientation,m=a.mirror,p="end";switch(u){case"left":case"right":p="middle";break;case"top":p=m?"start":"end";break;default:p=m?"end":"start";break}return p}},{key:"renderAxisLine",value:function(){var a=this.props,u=a.x,m=a.y,p=a.width,l=a.height,P=a.orientation,A=a.mirror,E=a.axisLine,k=qi(qi(qi({},fr(this.props,!1)),fr(E,!1)),{},{fill:"none"});if(P==="top"||P==="bottom"){var D=+(P==="top"&&!A||P==="bottom"&&A);k=qi(qi({},k),{},{x1:u,y1:m+D*l,x2:u+p,y2:m+D*l})}else{var j=+(P==="left"&&!A||P==="right"&&A);k=qi(qi({},k),{},{x1:u+j*p,y1:m,x2:u+j*p,y2:m+l})}return Ee.createElement("line",Jf({},k,{className:Or("recharts-cartesian-axis-line",rs(E,"className"))}))}},{key:"renderTicks",value:function(a,u,m){var p=this,l=this.props,P=l.tickLine,A=l.stroke,E=l.tick,k=l.tickFormatter,D=l.unit,j=Q2(qi(qi({},this.props),{},{ticks:a}),u,m),G=this.getTickTextAnchor(),U=this.getTickVerticalAnchor(),F=fr(this.props,!1),X=fr(E,!1),J=qi(qi({},F),{},{fill:"none"},fr(P,!1)),te=j.map(function(le,Y){var re=p.getTickLineCoord(le),de=re.line,ge=re.tick,Ie=qi(qi(qi(qi({textAnchor:G,verticalAnchor:U},F),{},{stroke:"none",fill:A},X),ge),{},{index:Y,payload:le,visibleTicksCount:j.length,tickFormatter:k});return Ee.createElement(nn,Jf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},Fd(p.props,le,Y)),P&&Ee.createElement("line",Jf({},J,de,{className:Or("recharts-cartesian-axis-tick-line",rs(P,"className"))})),E&&t.renderTickItem(E,Ie,"".concat(xr(k)?k(le.value,Y):le.value).concat(D||"")))});return Ee.createElement("g",{className:"recharts-cartesian-axis-ticks"},te)}},{key:"render",value:function(){var a=this,u=this.props,m=u.axisLine,p=u.width,l=u.height,P=u.ticksGenerator,A=u.className,E=u.hide;if(E)return null;var k=this.props,D=k.ticks,j=sw(k,RH),G=D;return xr(P)&&(G=D&&D.length>0?P(this.props):P(j)),p<=0||l<=0||!G||!G.length?null:Ee.createElement(nn,{className:Or("recharts-cartesian-axis",A),ref:function(F){a.layerReference=F}},m&&this.renderAxisLine(),this.renderTicks(G,this.state.fontSize,this.state.letterSpacing),ia.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,u,m){var p,l=Or(u.className,"recharts-cartesian-axis-tick-value");return Ee.isValidElement(a)?p=Ee.cloneElement(a,qi(qi({},u),{},{className:l})):xr(a)?p=a(qi(qi({},u),{},{className:l})):p=Ee.createElement($d,Jf({},u,{className:"recharts-cartesian-axis-tick-value"}),m),p}}])})(Ue.Component);eP(qp,"displayName","CartesianAxis");eP(qp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var UH=["x1","y1","x2","y2","key"],VH=["offset"];function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function KI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Na(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?KI(Object(i),!0).forEach(function(a){qH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function qH(e,t,i){return t=GH(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function GH(e){var t=WH(e,"string");return qd(t)=="symbol"?t:t+""}function WH(e,t){if(qd(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(qd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},jd.apply(this,arguments)}function XI(e,t){if(e==null)return{};var i=ZH(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ZH(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}var HH=function(t){var i=t.fill;if(!i||i==="none")return null;var a=t.fillOpacity,u=t.x,m=t.y,p=t.width,l=t.height,P=t.ry;return Ee.createElement("rect",{x:u,y:m,ry:P,width:p,height:l,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function _j(e,t){var i;if(Ee.isValidElement(e))i=Ee.cloneElement(e,t);else if(xr(e))i=e(t);else{var a=t.x1,u=t.y1,m=t.x2,p=t.y2,l=t.key,P=XI(t,UH),A=fr(P,!1);A.offset;var E=XI(A,VH);i=Ee.createElement("line",jd({},E,{x1:a,y1:u,x2:m,y2:p,fill:"none",key:l}))}return i}function KH(e){var t=e.x,i=e.width,a=e.horizontal,u=a===void 0?!0:a,m=e.horizontalPoints;if(!u||!m||!m.length)return null;var p=m.map(function(l,P){var A=Na(Na({},e),{},{x1:t,y1:l,x2:t+i,y2:l,key:"line-".concat(P),index:P});return _j(u,A)});return Ee.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function XH(e){var t=e.y,i=e.height,a=e.vertical,u=a===void 0?!0:a,m=e.verticalPoints;if(!u||!m||!m.length)return null;var p=m.map(function(l,P){var A=Na(Na({},e),{},{x1:l,y1:t,x2:l,y2:t+i,key:"line-".concat(P),index:P});return _j(u,A)});return Ee.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function YH(e){var t=e.horizontalFill,i=e.fillOpacity,a=e.x,u=e.y,m=e.width,p=e.height,l=e.horizontalPoints,P=e.horizontal,A=P===void 0?!0:P;if(!A||!t||!t.length)return null;var E=l.map(function(D){return Math.round(D+u-u)}).sort(function(D,j){return D-j});u!==E[0]&&E.unshift(0);var k=E.map(function(D,j){var G=!E[j+1],U=G?u+p-D:E[j+1]-D;if(U<=0)return null;var F=j%t.length;return Ee.createElement("rect",{key:"react-".concat(j),y:D,x:a,height:U,width:m,stroke:"none",fill:t[F],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ee.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},k)}function JH(e){var t=e.vertical,i=t===void 0?!0:t,a=e.verticalFill,u=e.fillOpacity,m=e.x,p=e.y,l=e.width,P=e.height,A=e.verticalPoints;if(!i||!a||!a.length)return null;var E=A.map(function(D){return Math.round(D+m-m)}).sort(function(D,j){return D-j});m!==E[0]&&E.unshift(0);var k=E.map(function(D,j){var G=!E[j+1],U=G?m+l-D:E[j+1]-D;if(U<=0)return null;var F=j%a.length;return Ee.createElement("rect",{key:"react-".concat(j),x:D,y:p,width:U,height:P,stroke:"none",fill:a[F],fillOpacity:u,className:"recharts-cartesian-grid-bg"})});return Ee.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},k)}var QH=function(t,i){var a=t.xAxis,u=t.width,m=t.height,p=t.offset;return _z(Q2(Na(Na(Na({},qp.defaultProps),a),{},{ticks:Eu(a,!0),viewBox:{x:0,y:0,width:u,height:m}})),p.left,p.left+p.width,i)},eK=function(t,i){var a=t.yAxis,u=t.width,m=t.height,p=t.offset;return _z(Q2(Na(Na(Na({},qp.defaultProps),a),{},{ticks:Eu(a,!0),viewBox:{x:0,y:0,width:u,height:m}})),p.top,p.top+p.height,i)},Gf={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function MS(e){var t,i,a,u,m,p,l=K2(),P=X2(),A=$Z(),E=Na(Na({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Gf.stroke,fill:(i=e.fill)!==null&&i!==void 0?i:Gf.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Gf.horizontal,horizontalFill:(u=e.horizontalFill)!==null&&u!==void 0?u:Gf.horizontalFill,vertical:(m=e.vertical)!==null&&m!==void 0?m:Gf.vertical,verticalFill:(p=e.verticalFill)!==null&&p!==void 0?p:Gf.verticalFill,x:Dt(e.x)?e.x:A.left,y:Dt(e.y)?e.y:A.top,width:Dt(e.width)?e.width:A.width,height:Dt(e.height)?e.height:A.height}),k=E.x,D=E.y,j=E.width,G=E.height,U=E.syncWithTicks,F=E.horizontalValues,X=E.verticalValues,J=NZ(),te=BZ();if(!Dt(j)||j<=0||!Dt(G)||G<=0||!Dt(k)||k!==+k||!Dt(D)||D!==+D)return null;var le=E.verticalCoordinatesGenerator||QH,Y=E.horizontalCoordinatesGenerator||eK,re=E.horizontalPoints,de=E.verticalPoints;if((!re||!re.length)&&xr(Y)){var ge=F&&F.length,Ie=Y({yAxis:te?Na(Na({},te),{},{ticks:ge?F:te.ticks}):void 0,width:l,height:P,offset:A},ge?!0:U);Eh(Array.isArray(Ie),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(qd(Ie),"]")),Array.isArray(Ie)&&(re=Ie)}if((!de||!de.length)&&xr(le)){var We=X&&X.length,Oe=le({xAxis:J?Na(Na({},J),{},{ticks:We?X:J.ticks}):void 0,width:l,height:P,offset:A},We?!0:U);Eh(Array.isArray(Oe),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(qd(Oe),"]")),Array.isArray(Oe)&&(de=Oe)}return Ee.createElement("g",{className:"recharts-cartesian-grid"},Ee.createElement(HH,{fill:E.fill,fillOpacity:E.fillOpacity,x:E.x,y:E.y,width:E.width,height:E.height,ry:E.ry}),Ee.createElement(KH,jd({},E,{offset:A,horizontalPoints:re,xAxis:J,yAxis:te})),Ee.createElement(XH,jd({},E,{offset:A,verticalPoints:de,xAxis:J,yAxis:te})),Ee.createElement(YH,jd({},E,{horizontalPoints:re})),Ee.createElement(JH,jd({},E,{verticalPoints:de})))}MS.displayName="CartesianGrid";var tK=["type","layout","connectNulls","ref"],rK=["key"];function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function YI(e,t){if(e==null)return{};var i=nK(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function nK(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Km.apply(this,arguments)}function JI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function Xo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?JI(Object(i),!0).forEach(function(a){El(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JI(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Wf(e){return sK(e)||oK(e)||aK(e)||iK()}function iK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aK(e,t){if(e){if(typeof e=="string")return kS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kS(e,t)}}function oK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sK(e){if(Array.isArray(e))return kS(e)}function kS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function lK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QI(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bj(a.key),a)}}function cK(e,t,i){return t&&QI(e.prototype,t),i&&QI(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function uK(e,t,i){return t=Bv(t),hK(e,xj()?Reflect.construct(t,i||[],Bv(e).constructor):t.apply(e,i))}function hK(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dK(e)}function dK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xj=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Bv(e)}function fK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IS(e,t)}function IS(e,t){return IS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},IS(e,t)}function El(e,t,i){return t=bj(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function bj(e){var t=pK(e,"string");return Tp(t)=="symbol"?t:t+""}function pK(e,t){if(Tp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Tp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ug=(function(e){function t(){var i;lK(this,t);for(var a=arguments.length,u=new Array(a),m=0;m<a;m++)u[m]=arguments[m];return i=uK(this,t,[].concat(u)),El(i,"state",{isAnimationFinished:!0,totalLength:0}),El(i,"generateSimpleStrokeDasharray",function(p,l){return"".concat(l,"px ").concat(p-l,"px")}),El(i,"getStrokeDasharray",function(p,l,P){var A=P.reduce(function(X,J){return X+J});if(!A)return i.generateSimpleStrokeDasharray(l,p);for(var E=Math.floor(p/A),k=p%A,D=l-p,j=[],G=0,U=0;G<P.length;U+=P[G],++G)if(U+P[G]>k){j=[].concat(Wf(P.slice(0,G)),[k-U]);break}var F=j.length%2===0?[0,D]:[D];return[].concat(Wf(t.repeat(P,E)),Wf(j),F).map(function(X){return"".concat(X,"px")}).join(", ")}),El(i,"id",Bp("recharts-line-")),El(i,"pathRef",function(p){i.mainCurve=p}),El(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),El(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return fK(t,e),cK(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var m=this.props,p=m.points,l=m.xAxis,P=m.yAxis,A=m.layout,E=m.children,k=ns(E,$g);if(!k)return null;var D=function(U,F){return{x:U.x,y:U.y,value:U.value,errorVal:Wi(U.payload,F)}},j={clipPath:a?"url(#clipPath-".concat(u,")"):null};return Ee.createElement(nn,j,k.map(function(G){return Ee.cloneElement(G,{key:"bar-".concat(G.props.dataKey),data:p,xAxis:l,yAxis:P,layout:A,dataPointFormatter:D})}))}},{key:"renderDots",value:function(a,u,m){var p=this.props.isAnimationActive;if(p&&!this.state.isAnimationFinished)return null;var l=this.props,P=l.dot,A=l.points,E=l.dataKey,k=fr(this.props,!1),D=fr(P,!0),j=A.map(function(U,F){var X=Xo(Xo(Xo({key:"dot-".concat(F),r:3},k),D),{},{index:F,cx:U.x,cy:U.y,value:U.value,dataKey:E,payload:U.payload,points:A});return t.renderDotItem(P,X)}),G={clipPath:a?"url(#clipPath-".concat(u?"":"dots-").concat(m,")"):null};return Ee.createElement(nn,Km({className:"recharts-line-dots",key:"dots"},G),j)}},{key:"renderCurveStatically",value:function(a,u,m,p){var l=this.props,P=l.type,A=l.layout,E=l.connectNulls;l.ref;var k=YI(l,tK),D=Xo(Xo(Xo({},fr(k,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(m,")"):null,points:a},p),{},{type:P,layout:A,connectNulls:E});return Ee.createElement(_v,Km({},D,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,u){var m=this,p=this.props,l=p.points,P=p.strokeDasharray,A=p.isAnimationActive,E=p.animationBegin,k=p.animationDuration,D=p.animationEasing,j=p.animationId,G=p.animateNewValues,U=p.width,F=p.height,X=this.state,J=X.prevPoints,te=X.totalLength;return Ee.createElement(Cc,{begin:E,duration:k,isActive:A,easing:D,from:{t:0},to:{t:1},key:"line-".concat(j),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(le){var Y=le.t;if(J){var re=J.length/l.length,de=l.map(function(Ve,Ke){var ot=Math.floor(Ke*re);if(J[ot]){var at=J[ot],st=Qo(at.x,Ve.x),lt=Qo(at.y,Ve.y);return Xo(Xo({},Ve),{},{x:st(Y),y:lt(Y)})}if(G){var Le=Qo(U*2,Ve.x),tt=Qo(F/2,Ve.y);return Xo(Xo({},Ve),{},{x:Le(Y),y:tt(Y)})}return Xo(Xo({},Ve),{},{x:Ve.x,y:Ve.y})});return m.renderCurveStatically(de,a,u)}var ge=Qo(0,te),Ie=ge(Y),We;if(P){var Oe="".concat(P).split(/[,\s]+/gim).map(function(Ve){return parseFloat(Ve)});We=m.getStrokeDasharray(Ie,te,Oe)}else We=m.generateSimpleStrokeDasharray(te,Ie);return m.renderCurveStatically(l,a,u,{strokeDasharray:We})})}},{key:"renderCurve",value:function(a,u){var m=this.props,p=m.points,l=m.isAnimationActive,P=this.state,A=P.prevPoints,E=P.totalLength;return l&&p&&p.length&&(!A&&E>0||!Fg(A,p))?this.renderCurveWithAnimation(a,u):this.renderCurveStatically(p,a,u)}},{key:"render",value:function(){var a,u=this.props,m=u.hide,p=u.dot,l=u.points,P=u.className,A=u.xAxis,E=u.yAxis,k=u.top,D=u.left,j=u.width,G=u.height,U=u.isAnimationActive,F=u.id;if(m||!l||!l.length)return null;var X=this.state.isAnimationFinished,J=l.length===1,te=Or("recharts-line",P),le=A&&A.allowDataOverflow,Y=E&&E.allowDataOverflow,re=le||Y,de=kr(F)?this.id:F,ge=(a=fr(p,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},Ie=ge.r,We=Ie===void 0?3:Ie,Oe=ge.strokeWidth,Ve=Oe===void 0?2:Oe,Ke=Q4(p)?p:{},ot=Ke.clipDot,at=ot===void 0?!0:ot,st=We*2+Ve;return Ee.createElement(nn,{className:te},le||Y?Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clipPath-".concat(de)},Ee.createElement("rect",{x:le?D:D-j/2,y:Y?k:k-G/2,width:le?j:j*2,height:Y?G:G*2})),!at&&Ee.createElement("clipPath",{id:"clipPath-dots-".concat(de)},Ee.createElement("rect",{x:D-st/2,y:k-st/2,width:j+st,height:G+st}))):null,!J&&this.renderCurve(re,de),this.renderErrorBar(re,de),(J||p)&&this.renderDots(re,at,de),(!U||X)&&ku.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,u){return a.animationId!==u.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:u.curPoints}:a.points!==u.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,u){for(var m=a.length%2!==0?[].concat(Wf(a),[0]):a,p=[],l=0;l<u;++l)p=[].concat(Wf(p),Wf(m));return p}},{key:"renderDotItem",value:function(a,u){var m;if(Ee.isValidElement(a))m=Ee.cloneElement(a,u);else if(xr(a))m=a(u);else{var p=u.key,l=YI(u,rK),P=Or("recharts-line-dot",typeof a!="boolean"?a.className:"");m=Ee.createElement(__,Km({key:p},l,{className:P}))}return m}}])})(Ue.PureComponent);El(Ug,"displayName","Line");El(Ug,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Wd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});El(Ug,"getComposedData",function(e){var t=e.props,i=e.xAxis,a=e.yAxis,u=e.xAxisTicks,m=e.yAxisTicks,p=e.dataKey,l=e.bandSize,P=e.displayedData,A=e.offset,E=t.layout,k=P.map(function(D,j){var G=Wi(D,p);return E==="horizontal"?{x:tk({axis:i,ticks:u,bandSize:l,entry:D,index:j}),y:kr(G)?null:a.scale(G),value:G,payload:D}:{x:kr(G)?null:i.scale(G),y:tk({axis:a,ticks:m,bandSize:l,entry:D,index:j}),value:G,payload:D}});return Xo({points:k,layout:E},A)});function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function mK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gK(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Pj(a.key),a)}}function yK(e,t,i){return t&&gK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vK(e,t,i){return t=Fv(t),_K(e,wj()?Reflect.construct(t,i||[],Fv(e).constructor):t.apply(e,i))}function _K(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xK(e)}function xK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wj=function(){return!!e})()}function Fv(e){return Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Fv(e)}function bK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OS(e,t)}function OS(e,t){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},OS(e,t)}function Sj(e,t,i){return t=Pj(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Pj(e){var t=wK(e,"string");return Ap(t)=="symbol"?t:t+""}function wK(e,t){if(Ap(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ap(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RS(){return RS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},RS.apply(this,arguments)}function SK(e){var t=e.xAxisId,i=K2(),a=X2(),u=lj(t);return u==null?null:Ue.createElement(qp,RS({},u,{className:Or("recharts-".concat(u.axisType," ").concat(u.axisType),u.className),viewBox:{x:0,y:0,width:i,height:a},ticksGenerator:function(p){return Eu(p,!0)}}))}var Cp=(function(e){function t(){return mK(this,t),vK(this,t,arguments)}return bK(t,e),yK(t,[{key:"render",value:function(){return Ue.createElement(SK,this.props)}}])})(Ue.Component);Sj(Cp,"displayName","XAxis");Sj(Cp,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function PK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TK(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Cj(a.key),a)}}function AK(e,t,i){return t&&TK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CK(e,t,i){return t=$v(t),EK(e,Tj()?Reflect.construct(t,i||[],$v(e).constructor):t.apply(e,i))}function EK(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MK(e)}function MK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tj=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},$v(e)}function kK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DS(e,t)}function DS(e,t){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},DS(e,t)}function Aj(e,t,i){return t=Cj(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Cj(e){var t=IK(e,"string");return Ep(t)=="symbol"?t:t+""}function IK(e,t){if(Ep(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ep(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zS(){return zS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},zS.apply(this,arguments)}var OK=function(t){var i=t.yAxisId,a=K2(),u=X2(),m=cj(i);return m==null?null:Ue.createElement(qp,zS({},m,{className:Or("recharts-".concat(m.axisType," ").concat(m.axisType),m.className),viewBox:{x:0,y:0,width:a,height:u},ticksGenerator:function(l){return Eu(l,!0)}}))},Mp=(function(e){function t(){return PK(this,t),CK(this,t,arguments)}return kK(t,e),AK(t,[{key:"render",value:function(){return Ue.createElement(OK,this.props)}}])})(Ue.Component);Aj(Mp,"displayName","YAxis");Aj(Mp,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function eO(e){return jK(e)||zK(e)||DK(e)||RK()}function RK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DK(e,t){if(e){if(typeof e=="string")return jS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jS(e,t)}}function zK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jK(e){if(Array.isArray(e))return jS(e)}function jS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var LS=function(t,i,a,u,m){var p=ns(t,J2),l=ns(t,E_),P=[].concat(eO(p),eO(l)),A=ns(t,k_),E="".concat(u,"Id"),k=u[0],D=i;if(P.length&&(D=P.reduce(function(U,F){if(F.props[E]===a&&Tc(F.props,"extendDomain")&&Dt(F.props[k])){var X=F.props[k];return[Math.min(U[0],X),Math.max(U[1],X)]}return U},D)),A.length){var j="".concat(k,"1"),G="".concat(k,"2");D=A.reduce(function(U,F){if(F.props[E]===a&&Tc(F.props,"extendDomain")&&Dt(F.props[j])&&Dt(F.props[G])){var X=F.props[j],J=F.props[G];return[Math.min(U[0],X,J),Math.max(U[1],X,J)]}return U},D)}return m&&m.length&&(D=m.reduce(function(U,F){return Dt(F)?[Math.min(U[0],F),Math.max(U[1],F)]:U},D)),D},lw={exports:{}},tO;function LK(){return tO||(tO=1,(function(e){var t=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function u(P,A,E){this.fn=P,this.context=A,this.once=E||!1}function m(P,A,E,k,D){if(typeof E!="function")throw new TypeError("The listener must be a function");var j=new u(E,k||P,D),G=i?i+A:A;return P._events[G]?P._events[G].fn?P._events[G]=[P._events[G],j]:P._events[G].push(j):(P._events[G]=j,P._eventsCount++),P}function p(P,A){--P._eventsCount===0?P._events=new a:delete P._events[A]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var A=[],E,k;if(this._eventsCount===0)return A;for(k in E=this._events)t.call(E,k)&&A.push(i?k.slice(1):k);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(E)):A},l.prototype.listeners=function(A){var E=i?i+A:A,k=this._events[E];if(!k)return[];if(k.fn)return[k.fn];for(var D=0,j=k.length,G=new Array(j);D<j;D++)G[D]=k[D].fn;return G},l.prototype.listenerCount=function(A){var E=i?i+A:A,k=this._events[E];return k?k.fn?1:k.length:0},l.prototype.emit=function(A,E,k,D,j,G){var U=i?i+A:A;if(!this._events[U])return!1;var F=this._events[U],X=arguments.length,J,te;if(F.fn){switch(F.once&&this.removeListener(A,F.fn,void 0,!0),X){case 1:return F.fn.call(F.context),!0;case 2:return F.fn.call(F.context,E),!0;case 3:return F.fn.call(F.context,E,k),!0;case 4:return F.fn.call(F.context,E,k,D),!0;case 5:return F.fn.call(F.context,E,k,D,j),!0;case 6:return F.fn.call(F.context,E,k,D,j,G),!0}for(te=1,J=new Array(X-1);te<X;te++)J[te-1]=arguments[te];F.fn.apply(F.context,J)}else{var le=F.length,Y;for(te=0;te<le;te++)switch(F[te].once&&this.removeListener(A,F[te].fn,void 0,!0),X){case 1:F[te].fn.call(F[te].context);break;case 2:F[te].fn.call(F[te].context,E);break;case 3:F[te].fn.call(F[te].context,E,k);break;case 4:F[te].fn.call(F[te].context,E,k,D);break;default:if(!J)for(Y=1,J=new Array(X-1);Y<X;Y++)J[Y-1]=arguments[Y];F[te].fn.apply(F[te].context,J)}}return!0},l.prototype.on=function(A,E,k){return m(this,A,E,k,!1)},l.prototype.once=function(A,E,k){return m(this,A,E,k,!0)},l.prototype.removeListener=function(A,E,k,D){var j=i?i+A:A;if(!this._events[j])return this;if(!E)return p(this,j),this;var G=this._events[j];if(G.fn)G.fn===E&&(!D||G.once)&&(!k||G.context===k)&&p(this,j);else{for(var U=0,F=[],X=G.length;U<X;U++)(G[U].fn!==E||D&&!G[U].once||k&&G[U].context!==k)&&F.push(G[U]);F.length?this._events[j]=F.length===1?F[0]:F:p(this,j)}return this},l.prototype.removeAllListeners=function(A){var E;return A?(E=i?i+A:A,this._events[E]&&p(this,E)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l})(lw)),lw.exports}var NK=LK();const BK=mn(NK);var cw=new BK,uw="recharts.syncMouseEvents";function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function FK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $K(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ej(a.key),a)}}function UK(e,t,i){return t&&$K(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hw(e,t,i){return t=Ej(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ej(e){var t=VK(e,"string");return kg(t)=="symbol"?t:t+""}function VK(e,t){if(kg(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(kg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qK=(function(){function e(){FK(this,e),hw(this,"activeIndex",0),hw(this,"coordinateList",[]),hw(this,"layout","horizontal")}return UK(e,[{key:"setDetails",value:function(i){var a,u=i.coordinateList,m=u===void 0?null:u,p=i.container,l=p===void 0?null:p,P=i.layout,A=P===void 0?null:P,E=i.offset,k=E===void 0?null:E,D=i.mouseHandlerCallback,j=D===void 0?null:D;this.coordinateList=(a=m??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=A??this.layout,this.offset=k??this.offset,this.mouseHandlerCallback=j??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(i){if(this.coordinateList.length!==0)switch(i.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(i){this.activeIndex=i}},{key:"spoofMouse",value:function(){var i,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var u=this.container.getBoundingClientRect(),m=u.x,p=u.y,l=u.height,P=this.coordinateList[this.activeIndex].coordinate,A=((i=window)===null||i===void 0?void 0:i.scrollX)||0,E=((a=window)===null||a===void 0?void 0:a.scrollY)||0,k=m+P+A,D=p+this.offset.top+l/2+E;this.mouseHandlerCallback({pageX:k,pageY:D})}}}])})();function GK(e,t,i){if(i==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],u=e?.[1];if(a&&u&&Dt(a)&&Dt(u))return!0}return!1}function WK(e,t,i,a){var u=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-u:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-u,width:e==="horizontal"?a:i.width-1,height:e==="horizontal"?i.height-1:a}}function Mj(e){var t=e.cx,i=e.cy,a=e.radius,u=e.startAngle,m=e.endAngle,p=In(t,i,a,u),l=In(t,i,a,m);return{points:[p,l],cx:t,cy:i,radius:a,startAngle:u,endAngle:m}}function ZK(e,t,i){var a,u,m,p;if(e==="horizontal")a=t.x,m=a,u=i.top,p=i.top+i.height;else if(e==="vertical")u=t.y,p=u,a=i.left,m=i.left+i.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,P=t.cy,A=t.innerRadius,E=t.outerRadius,k=t.angle,D=In(l,P,A,k),j=In(l,P,E,k);a=D.x,u=D.y,m=j.x,p=j.y}else return Mj(t);return[{x:a,y:u},{x:m,y:p}]}function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function rO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function By(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(i),!0).forEach(function(a){HK(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function HK(e,t,i){return t=KK(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function KK(e){var t=XK(e,"string");return Ig(t)=="symbol"?t:t+""}function XK(e,t){if(Ig(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(Ig(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YK(e){var t,i,a=e.element,u=e.tooltipEventType,m=e.isActive,p=e.activeCoordinate,l=e.activePayload,P=e.offset,A=e.activeTooltipIndex,E=e.tooltipAxisBandSize,k=e.layout,D=e.chartName,j=(t=a.props.cursor)!==null&&t!==void 0?t:(i=a.type.defaultProps)===null||i===void 0?void 0:i.cursor;if(!a||!j||!m||!p||D!=="ScatterChart"&&u!=="axis")return null;var G,U=_v;if(D==="ScatterChart")G=p,U=_G;else if(D==="BarChart")G=WK(k,p,P,E),U=G2;else if(k==="radial"){var F=Mj(p),X=F.cx,J=F.cy,te=F.radius,le=F.startAngle,Y=F.endAngle;G={cx:X,cy:J,startAngle:le,endAngle:Y,innerRadius:te,outerRadius:te},U=kz}else G={points:ZK(k,p,P)},U=_v;var re=By(By(By(By({stroke:"#ccc",pointerEvents:"none"},P),G),fr(j,!1)),{},{payload:l,payloadIndex:A,className:Or("recharts-tooltip-cursor",j.className)});return Ue.isValidElement(j)?Ue.cloneElement(j,re):Ue.createElement(U,re)}var JK=["item"],QK=["children","className","width","height","style","compact","title","desc"];function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Qf.apply(this,arguments)}function nO(e,t){return rX(e)||tX(e,t)||Ij(e,t)||eX()}function eX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tX(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,m,p,l=[],P=!0,A=!1;try{if(m=(i=i.call(e)).next,t!==0)for(;!(P=(a=m.call(i)).done)&&(l.push(a.value),l.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&i.return!=null&&(p=i.return(),Object(p)!==p))return}finally{if(A)throw u}}return l}}function rX(e){if(Array.isArray(e))return e}function iO(e,t){if(e==null)return{};var i=nX(e,t),a,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)a=m[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function nX(e,t){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;i[a]=e[a]}return i}function iX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aX(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Oj(a.key),a)}}function oX(e,t,i){return t&&aX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sX(e,t,i){return t=Uv(t),lX(e,kj()?Reflect.construct(t,i||[],Uv(e).constructor):t.apply(e,i))}function lX(e,t){if(t&&(kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cX(e)}function cX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kj=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Uv(e)}function uX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NS(e,t)}function NS(e,t){return NS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},NS(e,t)}function Ip(e){return fX(e)||dX(e)||Ij(e)||hX()}function hX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ij(e,t){if(e){if(typeof e=="string")return BS(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return BS(e,t)}}function dX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fX(e){if(Array.isArray(e))return BS(e)}function BS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function aO(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,a)}return i}function ft(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(i),!0).forEach(function(a){yr(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aO(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function yr(e,t,i){return t=Oj(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Oj(e){var t=pX(e,"string");return kp(t)=="symbol"?t:t+""}function pX(e,t){if(kp(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(kp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mX={xAxis:["bottom","top"],yAxis:["left","right"]},gX={width:"100%",height:"100%"},Rj={x:0,y:0};function Fy(e){return e}var yX=function(t,i){return i==="horizontal"?t.x:i==="vertical"?t.y:i==="centric"?t.angle:t.radius},vX=function(t,i,a,u){var m=i.find(function(E){return E&&E.index===a});if(m){if(t==="horizontal")return{x:m.coordinate,y:u.y};if(t==="vertical")return{x:u.x,y:m.coordinate};if(t==="centric"){var p=m.coordinate,l=u.radius;return ft(ft(ft({},u),In(u.cx,u.cy,l,p)),{},{angle:p,radius:l})}var P=m.coordinate,A=u.angle;return ft(ft(ft({},u),In(u.cx,u.cy,P,A)),{},{angle:A,radius:P})}return Rj},I_=function(t,i){var a=i.graphicalItems,u=i.dataStartIndex,m=i.dataEndIndex,p=(a??[]).reduce(function(l,P){var A=P.props.data;return A&&A.length?[].concat(Ip(l),Ip(A)):l},[]);return p.length>0?p:t&&t.length&&Dt(u)&&Dt(m)?t.slice(u,m+1):[]};function Dj(e){return e==="number"?[0,"auto"]:void 0}var FS=function(t,i,a,u){var m=t.graphicalItems,p=t.tooltipAxis,l=I_(i,t);return a<0||!m||!m.length||a>=l.length?null:m.reduce(function(P,A){var E,k=(E=A.props.data)!==null&&E!==void 0?E:i;k&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(k=k.slice(t.dataStartIndex,t.dataEndIndex+1));var D;if(p.dataKey&&!p.allowDuplicatedCategory){var j=k===void 0?l:k;D=Gy(j,p.dataKey,u)}else D=k&&k[a]||l[a];return D?[].concat(Ip(P),[Pz(A,D)]):P},[])},oO=function(t,i,a,u){var m=u||{x:t.chartX,y:t.chartY},p=yX(m,a),l=t.orderedTooltipTicks,P=t.tooltipAxis,A=t.tooltipTicks,E=VV(p,l,A,P);if(E>=0&&A){var k=A[E]&&A[E].value,D=FS(t,i,E,k),j=vX(a,l,E,m);return{activeTooltipIndex:E,activeLabel:k,activePayload:D,activeCoordinate:j}}return null},_X=function(t,i){var a=i.axes,u=i.graphicalItems,m=i.axisType,p=i.axisIdKey,l=i.stackGroups,P=i.dataStartIndex,A=i.dataEndIndex,E=t.layout,k=t.children,D=t.stackOffset,j=vz(E,m);return a.reduce(function(G,U){var F,X=U.type.defaultProps!==void 0?ft(ft({},U.type.defaultProps),U.props):U.props,J=X.type,te=X.dataKey,le=X.allowDataOverflow,Y=X.allowDuplicatedCategory,re=X.scale,de=X.ticks,ge=X.includeHidden,Ie=X[p];if(G[Ie])return G;var We=I_(t.data,{graphicalItems:u.filter(function(qe){var yt,Rt=p in qe.props?qe.props[p]:(yt=qe.type.defaultProps)===null||yt===void 0?void 0:yt[p];return Rt===Ie}),dataStartIndex:P,dataEndIndex:A}),Oe=We.length,Ve,Ke,ot;GK(X.domain,le,J)&&(Ve=Qw(X.domain,null,le),j&&(J==="number"||re!=="auto")&&(ot=Gm(We,te,"category")));var at=Dj(J);if(!Ve||Ve.length===0){var st,lt=(st=X.domain)!==null&&st!==void 0?st:at;if(te){if(Ve=Gm(We,te,J),J==="category"&&j){var Le=V4(Ve);Y&&Le?(Ke=Ve,Ve=Mv(0,Oe)):Y||(Ve=ak(lt,Ve,U).reduce(function(qe,yt){return qe.indexOf(yt)>=0?qe:[].concat(Ip(qe),[yt])},[]))}else if(J==="category")Y?Ve=Ve.filter(function(qe){return qe!==""&&!kr(qe)}):Ve=ak(lt,Ve,U).reduce(function(qe,yt){return qe.indexOf(yt)>=0||yt===""||kr(yt)?qe:[].concat(Ip(qe),[yt])},[]);else if(J==="number"){var tt=HV(We,u.filter(function(qe){var yt,Rt,$t=p in qe.props?qe.props[p]:(yt=qe.type.defaultProps)===null||yt===void 0?void 0:yt[p],Wt="hide"in qe.props?qe.props.hide:(Rt=qe.type.defaultProps)===null||Rt===void 0?void 0:Rt.hide;return $t===Ie&&(ge||!Wt)}),te,m,E);tt&&(Ve=tt)}j&&(J==="number"||re!=="auto")&&(ot=Gm(We,te,"category"))}else j?Ve=Mv(0,Oe):l&&l[Ie]&&l[Ie].hasStack&&J==="number"?Ve=D==="expand"?[0,1]:Sz(l[Ie].stackGroups,P,A):Ve=yz(We,u.filter(function(qe){var yt=p in qe.props?qe.props[p]:qe.type.defaultProps[p],Rt="hide"in qe.props?qe.props.hide:qe.type.defaultProps.hide;return yt===Ie&&(ge||!Rt)}),J,E,!0);if(J==="number")Ve=LS(k,Ve,Ie,m,de),lt&&(Ve=Qw(lt,Ve,le));else if(J==="category"&&lt){var ut=lt,Ae=Ve.every(function(qe){return ut.indexOf(qe)>=0});Ae&&(Ve=ut)}}return ft(ft({},G),{},yr({},Ie,ft(ft({},X),{},{axisType:m,domain:Ve,categoricalDomain:ot,duplicateDomain:Ke,originalDomain:(F=X.domain)!==null&&F!==void 0?F:at,isCategorical:j,layout:E})))},{})},xX=function(t,i){var a=i.graphicalItems,u=i.Axis,m=i.axisType,p=i.axisIdKey,l=i.stackGroups,P=i.dataStartIndex,A=i.dataEndIndex,E=t.layout,k=t.children,D=I_(t.data,{graphicalItems:a,dataStartIndex:P,dataEndIndex:A}),j=D.length,G=vz(E,m),U=-1;return a.reduce(function(F,X){var J=X.type.defaultProps!==void 0?ft(ft({},X.type.defaultProps),X.props):X.props,te=J[p],le=Dj("number");if(!F[te]){U++;var Y;return G?Y=Mv(0,j):l&&l[te]&&l[te].hasStack?(Y=Sz(l[te].stackGroups,P,A),Y=LS(k,Y,te,m)):(Y=Qw(le,yz(D,a.filter(function(re){var de,ge,Ie=p in re.props?re.props[p]:(de=re.type.defaultProps)===null||de===void 0?void 0:de[p],We="hide"in re.props?re.props.hide:(ge=re.type.defaultProps)===null||ge===void 0?void 0:ge.hide;return Ie===te&&!We}),"number",E),u.defaultProps.allowDataOverflow),Y=LS(k,Y,te,m)),ft(ft({},F),{},yr({},te,ft(ft({axisType:m},u.defaultProps),{},{hide:!0,orientation:rs(mX,"".concat(m,".").concat(U%2),null),domain:Y,originalDomain:le,isCategorical:G,layout:E})))}return F},{})},bX=function(t,i){var a=i.axisType,u=a===void 0?"xAxis":a,m=i.AxisComp,p=i.graphicalItems,l=i.stackGroups,P=i.dataStartIndex,A=i.dataEndIndex,E=t.children,k="".concat(u,"Id"),D=ns(E,m),j={};return D&&D.length?j=_X(t,{axes:D,graphicalItems:p,axisType:u,axisIdKey:k,stackGroups:l,dataStartIndex:P,dataEndIndex:A}):p&&p.length&&(j=xX(t,{Axis:m,graphicalItems:p,axisType:u,axisIdKey:k,stackGroups:l,dataStartIndex:P,dataEndIndex:A})),j},wX=function(t){var i=wh(t),a=Eu(i,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:v2(a,function(u){return u.coordinate}),tooltipAxis:i,tooltipAxisBandSize:gv(i,a)}},sO=function(t){var i=t.children,a=t.defaultShowTooltip,u=Jo(i,_p),m=0,p=0;return t.data&&t.data.length!==0&&(p=t.data.length-1),u&&u.props&&(u.props.startIndex>=0&&(m=u.props.startIndex),u.props.endIndex>=0&&(p=u.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:m,dataEndIndex:p,activeTooltipIndex:-1,isTooltipActive:!!a}},SX=function(t){return!t||!t.length?!1:t.some(function(i){var a=Th(i&&i.type);return a&&a.indexOf("Bar")>=0})},lO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},PX=function(t,i){var a=t.props,u=t.graphicalItems,m=t.xAxisMap,p=m===void 0?{}:m,l=t.yAxisMap,P=l===void 0?{}:l,A=a.width,E=a.height,k=a.children,D=a.margin||{},j=Jo(k,_p),G=Jo(k,tp),U=Object.keys(P).reduce(function(Y,re){var de=P[re],ge=de.orientation;return!de.mirror&&!de.hide?ft(ft({},Y),{},yr({},ge,Y[ge]+de.width)):Y},{left:D.left||0,right:D.right||0}),F=Object.keys(p).reduce(function(Y,re){var de=p[re],ge=de.orientation;return!de.mirror&&!de.hide?ft(ft({},Y),{},yr({},ge,rs(Y,"".concat(ge))+de.height)):Y},{top:D.top||0,bottom:D.bottom||0}),X=ft(ft({},F),U),J=X.bottom;j&&(X.bottom+=j.props.height||_p.defaultProps.height),G&&i&&(X=WV(X,u,a,i));var te=A-X.left-X.right,le=E-X.top-X.bottom;return ft(ft({brushBottom:J},X),{},{width:Math.max(te,0),height:Math.max(le,0)})},TX=function(t,i){if(i==="xAxis")return t[i].width;if(i==="yAxis")return t[i].height},tP=function(t){var i=t.chartName,a=t.GraphicalChild,u=t.defaultTooltipEventType,m=u===void 0?"axis":u,p=t.validateTooltipEventTypes,l=p===void 0?["axis"]:p,P=t.axisComponents,A=t.legendContent,E=t.formatAxisMap,k=t.defaultProps,D=function(X,J){var te=J.graphicalItems,le=J.stackGroups,Y=J.offset,re=J.updateId,de=J.dataStartIndex,ge=J.dataEndIndex,Ie=X.barSize,We=X.layout,Oe=X.barGap,Ve=X.barCategoryGap,Ke=X.maxBarSize,ot=lO(We),at=ot.numericAxisName,st=ot.cateAxisName,lt=SX(te),Le=[];return te.forEach(function(tt,ut){var Ae=I_(X.data,{graphicalItems:[tt],dataStartIndex:de,dataEndIndex:ge}),qe=tt.type.defaultProps!==void 0?ft(ft({},tt.type.defaultProps),tt.props):tt.props,yt=qe.dataKey,Rt=qe.maxBarSize,$t=qe["".concat(at,"Id")],Wt=qe["".concat(st,"Id")],er={},tr=P.reduce(function(On,ni){var oa=J["".concat(ni.axisType,"Map")],Ba=qe["".concat(ni.axisType,"Id")];oa&&oa[Ba]||ni.axisType==="zAxis"||Vd();var Sa=oa[Ba];return ft(ft({},On),{},yr(yr({},ni.axisType,Sa),"".concat(ni.axisType,"Ticks"),Eu(Sa)))},er),vt=tr[st],Ft=tr["".concat(st,"Ticks")],ir=le&&le[$t]&&le[$t].hasStack&&nq(tt,le[$t].stackGroups),pt=Th(tt.type).indexOf("Bar")>=0,dr=gv(vt,Ft),rr=[],qr=lt&&qV({barSize:Ie,stackGroups:le,totalSize:TX(tr,st)});if(pt){var Zr,vn,qn=kr(Rt)?Ke:Rt,Kn=(Zr=(vn=gv(vt,Ft,!0))!==null&&vn!==void 0?vn:qn)!==null&&Zr!==void 0?Zr:0;rr=GV({barGap:Oe,barCategoryGap:Ve,bandSize:Kn!==dr?Kn:dr,sizeList:qr[Wt],maxBarSize:qn}),Kn!==dr&&(rr=rr.map(function(On){return ft(ft({},On),{},{position:ft(ft({},On.position),{},{offset:On.position.offset-Kn/2})})}))}var ki=tt&&tt.type&&tt.type.getComposedData;ki&&Le.push({props:ft(ft({},ki(ft(ft({},tr),{},{displayedData:Ae,props:X,dataKey:yt,item:tt,bandSize:dr,barPosition:rr,offset:Y,stackedData:ir,layout:We,dataStartIndex:de,dataEndIndex:ge}))),{},yr(yr(yr({key:tt.key||"item-".concat(ut)},at,tr[at]),st,tr[st]),"animationId",re)),childIndex:rN(tt,X.children),item:tt})}),Le},j=function(X,J){var te=X.props,le=X.dataStartIndex,Y=X.dataEndIndex,re=X.updateId;if(!bA({props:te}))return null;var de=te.children,ge=te.layout,Ie=te.stackOffset,We=te.data,Oe=te.reverseStackOrder,Ve=lO(ge),Ke=Ve.numericAxisName,ot=Ve.cateAxisName,at=ns(de,a),st=tq(We,at,"".concat(Ke,"Id"),"".concat(ot,"Id"),Ie,Oe),lt=P.reduce(function(qe,yt){var Rt="".concat(yt.axisType,"Map");return ft(ft({},qe),{},yr({},Rt,bX(te,ft(ft({},yt),{},{graphicalItems:at,stackGroups:yt.axisType===Ke&&st,dataStartIndex:le,dataEndIndex:Y}))))},{}),Le=PX(ft(ft({},lt),{},{props:te,graphicalItems:at}),J?.legendBBox);Object.keys(lt).forEach(function(qe){lt[qe]=E(te,lt[qe],Le,qe.replace("Map",""),i)});var tt=lt["".concat(ot,"Map")],ut=wX(tt),Ae=D(te,ft(ft({},lt),{},{dataStartIndex:le,dataEndIndex:Y,updateId:re,graphicalItems:at,stackGroups:st,offset:Le}));return ft(ft({formattedGraphicalItems:Ae,graphicalItems:at,offset:Le,stackGroups:st},ut),lt)},G=(function(F){function X(J){var te,le,Y;return iX(this,X),Y=sX(this,X,[J]),yr(Y,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),yr(Y,"accessibilityManager",new qK),yr(Y,"handleLegendBBoxUpdate",function(re){if(re){var de=Y.state,ge=de.dataStartIndex,Ie=de.dataEndIndex,We=de.updateId;Y.setState(ft({legendBBox:re},j({props:Y.props,dataStartIndex:ge,dataEndIndex:Ie,updateId:We},ft(ft({},Y.state),{},{legendBBox:re}))))}}),yr(Y,"handleReceiveSyncEvent",function(re,de,ge){if(Y.props.syncId===re){if(ge===Y.eventEmitterSymbol&&typeof Y.props.syncMethod!="function")return;Y.applySyncEvent(de)}}),yr(Y,"handleBrushChange",function(re){var de=re.startIndex,ge=re.endIndex;if(de!==Y.state.dataStartIndex||ge!==Y.state.dataEndIndex){var Ie=Y.state.updateId;Y.setState(function(){return ft({dataStartIndex:de,dataEndIndex:ge},j({props:Y.props,dataStartIndex:de,dataEndIndex:ge,updateId:Ie},Y.state))}),Y.triggerSyncEvent({dataStartIndex:de,dataEndIndex:ge})}}),yr(Y,"handleMouseEnter",function(re){var de=Y.getMouseInfo(re);if(de){var ge=ft(ft({},de),{},{isTooltipActive:!0});Y.setState(ge),Y.triggerSyncEvent(ge);var Ie=Y.props.onMouseEnter;xr(Ie)&&Ie(ge,re)}}),yr(Y,"triggeredAfterMouseMove",function(re){var de=Y.getMouseInfo(re),ge=de?ft(ft({},de),{},{isTooltipActive:!0}):{isTooltipActive:!1};Y.setState(ge),Y.triggerSyncEvent(ge);var Ie=Y.props.onMouseMove;xr(Ie)&&Ie(ge,re)}),yr(Y,"handleItemMouseEnter",function(re){Y.setState(function(){return{isTooltipActive:!0,activeItem:re,activePayload:re.tooltipPayload,activeCoordinate:re.tooltipPosition||{x:re.cx,y:re.cy}}})}),yr(Y,"handleItemMouseLeave",function(){Y.setState(function(){return{isTooltipActive:!1}})}),yr(Y,"handleMouseMove",function(re){re.persist(),Y.throttleTriggeredAfterMouseMove(re)}),yr(Y,"handleMouseLeave",function(re){Y.throttleTriggeredAfterMouseMove.cancel();var de={isTooltipActive:!1};Y.setState(de),Y.triggerSyncEvent(de);var ge=Y.props.onMouseLeave;xr(ge)&&ge(de,re)}),yr(Y,"handleOuterEvent",function(re){var de=tN(re),ge=rs(Y.props,"".concat(de));if(de&&xr(ge)){var Ie,We;/.*touch.*/i.test(de)?We=Y.getMouseInfo(re.changedTouches[0]):We=Y.getMouseInfo(re),ge((Ie=We)!==null&&Ie!==void 0?Ie:{},re)}}),yr(Y,"handleClick",function(re){var de=Y.getMouseInfo(re);if(de){var ge=ft(ft({},de),{},{isTooltipActive:!0});Y.setState(ge),Y.triggerSyncEvent(ge);var Ie=Y.props.onClick;xr(Ie)&&Ie(ge,re)}}),yr(Y,"handleMouseDown",function(re){var de=Y.props.onMouseDown;if(xr(de)){var ge=Y.getMouseInfo(re);de(ge,re)}}),yr(Y,"handleMouseUp",function(re){var de=Y.props.onMouseUp;if(xr(de)){var ge=Y.getMouseInfo(re);de(ge,re)}}),yr(Y,"handleTouchMove",function(re){re.changedTouches!=null&&re.changedTouches.length>0&&Y.throttleTriggeredAfterMouseMove(re.changedTouches[0])}),yr(Y,"handleTouchStart",function(re){re.changedTouches!=null&&re.changedTouches.length>0&&Y.handleMouseDown(re.changedTouches[0])}),yr(Y,"handleTouchEnd",function(re){re.changedTouches!=null&&re.changedTouches.length>0&&Y.handleMouseUp(re.changedTouches[0])}),yr(Y,"handleDoubleClick",function(re){var de=Y.props.onDoubleClick;if(xr(de)){var ge=Y.getMouseInfo(re);de(ge,re)}}),yr(Y,"handleContextMenu",function(re){var de=Y.props.onContextMenu;if(xr(de)){var ge=Y.getMouseInfo(re);de(ge,re)}}),yr(Y,"triggerSyncEvent",function(re){Y.props.syncId!==void 0&&cw.emit(uw,Y.props.syncId,re,Y.eventEmitterSymbol)}),yr(Y,"applySyncEvent",function(re){var de=Y.props,ge=de.layout,Ie=de.syncMethod,We=Y.state.updateId,Oe=re.dataStartIndex,Ve=re.dataEndIndex;if(re.dataStartIndex!==void 0||re.dataEndIndex!==void 0)Y.setState(ft({dataStartIndex:Oe,dataEndIndex:Ve},j({props:Y.props,dataStartIndex:Oe,dataEndIndex:Ve,updateId:We},Y.state)));else if(re.activeTooltipIndex!==void 0){var Ke=re.chartX,ot=re.chartY,at=re.activeTooltipIndex,st=Y.state,lt=st.offset,Le=st.tooltipTicks;if(!lt)return;if(typeof Ie=="function")at=Ie(Le,re);else if(Ie==="value"){at=-1;for(var tt=0;tt<Le.length;tt++)if(Le[tt].value===re.activeLabel){at=tt;break}}var ut=ft(ft({},lt),{},{x:lt.left,y:lt.top}),Ae=Math.min(Ke,ut.x+ut.width),qe=Math.min(ot,ut.y+ut.height),yt=Le[at]&&Le[at].value,Rt=FS(Y.state,Y.props.data,at),$t=Le[at]?{x:ge==="horizontal"?Le[at].coordinate:Ae,y:ge==="horizontal"?qe:Le[at].coordinate}:Rj;Y.setState(ft(ft({},re),{},{activeLabel:yt,activeCoordinate:$t,activePayload:Rt,activeTooltipIndex:at}))}else Y.setState(re)}),yr(Y,"renderCursor",function(re){var de,ge=Y.state,Ie=ge.isTooltipActive,We=ge.activeCoordinate,Oe=ge.activePayload,Ve=ge.offset,Ke=ge.activeTooltipIndex,ot=ge.tooltipAxisBandSize,at=Y.getTooltipEventType(),st=(de=re.props.active)!==null&&de!==void 0?de:Ie,lt=Y.props.layout,Le=re.key||"_recharts-cursor";return Ee.createElement(YK,{key:Le,activeCoordinate:We,activePayload:Oe,activeTooltipIndex:Ke,chartName:i,element:re,isActive:st,layout:lt,offset:Ve,tooltipAxisBandSize:ot,tooltipEventType:at})}),yr(Y,"renderPolarAxis",function(re,de,ge){var Ie=rs(re,"type.axisType"),We=rs(Y.state,"".concat(Ie,"Map")),Oe=re.type.defaultProps,Ve=Oe!==void 0?ft(ft({},Oe),re.props):re.props,Ke=We&&We[Ve["".concat(Ie,"Id")]];return Ue.cloneElement(re,ft(ft({},Ke),{},{className:Or(Ie,Ke.className),key:re.key||"".concat(de,"-").concat(ge),ticks:Eu(Ke,!0)}))}),yr(Y,"renderPolarGrid",function(re){var de=re.props,ge=de.radialLines,Ie=de.polarAngles,We=de.polarRadius,Oe=Y.state,Ve=Oe.radiusAxisMap,Ke=Oe.angleAxisMap,ot=wh(Ve),at=wh(Ke),st=at.cx,lt=at.cy,Le=at.innerRadius,tt=at.outerRadius;return Ue.cloneElement(re,{polarAngles:Array.isArray(Ie)?Ie:Eu(at,!0).map(function(ut){return ut.coordinate}),polarRadius:Array.isArray(We)?We:Eu(ot,!0).map(function(ut){return ut.coordinate}),cx:st,cy:lt,innerRadius:Le,outerRadius:tt,key:re.key||"polar-grid",radialLines:ge})}),yr(Y,"renderLegend",function(){var re=Y.state.formattedGraphicalItems,de=Y.props,ge=de.children,Ie=de.width,We=de.height,Oe=Y.props.margin||{},Ve=Ie-(Oe.left||0)-(Oe.right||0),Ke=mz({children:ge,formattedGraphicalItems:re,legendWidth:Ve,legendContent:A});if(!Ke)return null;var ot=Ke.item,at=iO(Ke,JK);return Ue.cloneElement(ot,ft(ft({},at),{},{chartWidth:Ie,chartHeight:We,margin:Oe,onBBoxUpdate:Y.handleLegendBBoxUpdate}))}),yr(Y,"renderTooltip",function(){var re,de=Y.props,ge=de.children,Ie=de.accessibilityLayer,We=Jo(ge,Al);if(!We)return null;var Oe=Y.state,Ve=Oe.isTooltipActive,Ke=Oe.activeCoordinate,ot=Oe.activePayload,at=Oe.activeLabel,st=Oe.offset,lt=(re=We.props.active)!==null&&re!==void 0?re:Ve;return Ue.cloneElement(We,{viewBox:ft(ft({},st),{},{x:st.left,y:st.top}),active:lt,label:at,payload:lt?ot:[],coordinate:Ke,accessibilityLayer:Ie})}),yr(Y,"renderBrush",function(re){var de=Y.props,ge=de.margin,Ie=de.data,We=Y.state,Oe=We.offset,Ve=We.dataStartIndex,Ke=We.dataEndIndex,ot=We.updateId;return Ue.cloneElement(re,{key:re.key||"_recharts-brush",onChange:zy(Y.handleBrushChange,re.props.onChange),data:Ie,x:Dt(re.props.x)?re.props.x:Oe.left,y:Dt(re.props.y)?re.props.y:Oe.top+Oe.height+Oe.brushBottom-(ge.bottom||0),width:Dt(re.props.width)?re.props.width:Oe.width,startIndex:Ve,endIndex:Ke,updateId:"brush-".concat(ot)})}),yr(Y,"renderReferenceElement",function(re,de,ge){if(!re)return null;var Ie=Y,We=Ie.clipPathId,Oe=Y.state,Ve=Oe.xAxisMap,Ke=Oe.yAxisMap,ot=Oe.offset,at=re.type.defaultProps||{},st=re.props,lt=st.xAxisId,Le=lt===void 0?at.xAxisId:lt,tt=st.yAxisId,ut=tt===void 0?at.yAxisId:tt;return Ue.cloneElement(re,{key:re.key||"".concat(de,"-").concat(ge),xAxis:Ve[Le],yAxis:Ke[ut],viewBox:{x:ot.left,y:ot.top,width:ot.width,height:ot.height},clipPathId:We})}),yr(Y,"renderActivePoints",function(re){var de=re.item,ge=re.activePoint,Ie=re.basePoint,We=re.childIndex,Oe=re.isRange,Ve=[],Ke=de.props.key,ot=de.item.type.defaultProps!==void 0?ft(ft({},de.item.type.defaultProps),de.item.props):de.item.props,at=ot.activeDot,st=ot.dataKey,lt=ft(ft({index:We,dataKey:st,cx:ge.x,cy:ge.y,r:4,fill:q2(de.item),strokeWidth:2,stroke:"#fff",payload:ge.payload,value:ge.value},fr(at,!1)),Wy(at));return Ve.push(X.renderActiveDot(at,lt,"".concat(Ke,"-activePoint-").concat(We))),Ie?Ve.push(X.renderActiveDot(at,ft(ft({},lt),{},{cx:Ie.x,cy:Ie.y}),"".concat(Ke,"-basePoint-").concat(We))):Oe&&Ve.push(null),Ve}),yr(Y,"renderGraphicChild",function(re,de,ge){var Ie=Y.filterFormatItem(re,de,ge);if(!Ie)return null;var We=Y.getTooltipEventType(),Oe=Y.state,Ve=Oe.isTooltipActive,Ke=Oe.tooltipAxis,ot=Oe.activeTooltipIndex,at=Oe.activeLabel,st=Y.props.children,lt=Jo(st,Al),Le=Ie.props,tt=Le.points,ut=Le.isRange,Ae=Le.baseLine,qe=Ie.item.type.defaultProps!==void 0?ft(ft({},Ie.item.type.defaultProps),Ie.item.props):Ie.item.props,yt=qe.activeDot,Rt=qe.hide,$t=qe.activeBar,Wt=qe.activeShape,er=!!(!Rt&&Ve&&lt&&(yt||$t||Wt)),tr={};We!=="axis"&&lt&&lt.props.trigger==="click"?tr={onClick:zy(Y.handleItemMouseEnter,re.props.onClick)}:We!=="axis"&&(tr={onMouseLeave:zy(Y.handleItemMouseLeave,re.props.onMouseLeave),onMouseEnter:zy(Y.handleItemMouseEnter,re.props.onMouseEnter)});var vt=Ue.cloneElement(re,ft(ft({},Ie.props),tr));function Ft(ni){return typeof Ke.dataKey=="function"?Ke.dataKey(ni.payload):null}if(er)if(ot>=0){var ir,pt;if(Ke.dataKey&&!Ke.allowDuplicatedCategory){var dr=typeof Ke.dataKey=="function"?Ft:"payload.".concat(Ke.dataKey.toString());ir=Gy(tt,dr,at),pt=ut&&Ae&&Gy(Ae,dr,at)}else ir=tt?.[ot],pt=ut&&Ae&&Ae[ot];if(Wt||$t){var rr=re.props.activeIndex!==void 0?re.props.activeIndex:ot;return[Ue.cloneElement(re,ft(ft(ft({},Ie.props),tr),{},{activeIndex:rr})),null,null]}if(!kr(ir))return[vt].concat(Ip(Y.renderActivePoints({item:Ie,activePoint:ir,basePoint:pt,childIndex:ot,isRange:ut})))}else{var qr,Zr=(qr=Y.getItemByXY(Y.state.activeCoordinate))!==null&&qr!==void 0?qr:{graphicalItem:vt},vn=Zr.graphicalItem,qn=vn.item,Kn=qn===void 0?re:qn,ki=vn.childIndex,On=ft(ft(ft({},Ie.props),tr),{},{activeIndex:ki});return[Ue.cloneElement(Kn,On),null,null]}return ut?[vt,null,null]:[vt,null]}),yr(Y,"renderCustomized",function(re,de,ge){return Ue.cloneElement(re,ft(ft({key:"recharts-customized-".concat(ge)},Y.props),Y.state))}),yr(Y,"renderMap",{CartesianGrid:{handler:Fy,once:!0},ReferenceArea:{handler:Y.renderReferenceElement},ReferenceLine:{handler:Fy},ReferenceDot:{handler:Y.renderReferenceElement},XAxis:{handler:Fy},YAxis:{handler:Fy},Brush:{handler:Y.renderBrush,once:!0},Bar:{handler:Y.renderGraphicChild},Line:{handler:Y.renderGraphicChild},Area:{handler:Y.renderGraphicChild},Radar:{handler:Y.renderGraphicChild},RadialBar:{handler:Y.renderGraphicChild},Scatter:{handler:Y.renderGraphicChild},Pie:{handler:Y.renderGraphicChild},Funnel:{handler:Y.renderGraphicChild},Tooltip:{handler:Y.renderCursor,once:!0},PolarGrid:{handler:Y.renderPolarGrid,once:!0},PolarAngleAxis:{handler:Y.renderPolarAxis},PolarRadiusAxis:{handler:Y.renderPolarAxis},Customized:{handler:Y.renderCustomized}}),Y.clipPathId="".concat((te=J.id)!==null&&te!==void 0?te:Bp("recharts"),"-clip"),Y.throttleTriggeredAfterMouseMove=E$(Y.triggeredAfterMouseMove,(le=J.throttleDelay)!==null&&le!==void 0?le:1e3/60),Y.state={},Y}return uX(X,F),oX(X,[{key:"componentDidMount",value:function(){var te,le;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(te=this.props.margin.left)!==null&&te!==void 0?te:0,top:(le=this.props.margin.top)!==null&&le!==void 0?le:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var te=this.props,le=te.children,Y=te.data,re=te.height,de=te.layout,ge=Jo(le,Al);if(ge){var Ie=ge.props.defaultIndex;if(!(typeof Ie!="number"||Ie<0||Ie>this.state.tooltipTicks.length-1)){var We=this.state.tooltipTicks[Ie]&&this.state.tooltipTicks[Ie].value,Oe=FS(this.state,Y,Ie,We),Ve=this.state.tooltipTicks[Ie].coordinate,Ke=(this.state.offset.top+re)/2,ot=de==="horizontal",at=ot?{x:Ve,y:Ke}:{y:Ve,x:Ke},st=this.state.formattedGraphicalItems.find(function(Le){var tt=Le.item;return tt.type.name==="Scatter"});st&&(at=ft(ft({},at),st.props.points[Ie].tooltipPosition),Oe=st.props.points[Ie].tooltipPayload);var lt={activeTooltipIndex:Ie,isTooltipActive:!0,activeLabel:We,activePayload:Oe,activeCoordinate:at};this.setState(lt),this.renderCursor(ge),this.accessibilityManager.setIndex(Ie)}}}},{key:"getSnapshotBeforeUpdate",value:function(te,le){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==le.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==te.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==te.margin){var Y,re;this.accessibilityManager.setDetails({offset:{left:(Y=this.props.margin.left)!==null&&Y!==void 0?Y:0,top:(re=this.props.margin.top)!==null&&re!==void 0?re:0}})}return null}},{key:"componentDidUpdate",value:function(te){bw([Jo(te.children,Al)],[Jo(this.props.children,Al)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var te=Jo(this.props.children,Al);if(te&&typeof te.props.shared=="boolean"){var le=te.props.shared?"axis":"item";return l.indexOf(le)>=0?le:m}return m}},{key:"getMouseInfo",value:function(te){if(!this.container)return null;var le=this.container,Y=le.getBoundingClientRect(),re=z$(Y),de={chartX:Math.round(te.pageX-re.left),chartY:Math.round(te.pageY-re.top)},ge=Y.width/le.offsetWidth||1,Ie=this.inRange(de.chartX,de.chartY,ge);if(!Ie)return null;var We=this.state,Oe=We.xAxisMap,Ve=We.yAxisMap,Ke=this.getTooltipEventType(),ot=oO(this.state,this.props.data,this.props.layout,Ie);if(Ke!=="axis"&&Oe&&Ve){var at=wh(Oe).scale,st=wh(Ve).scale,lt=at&&at.invert?at.invert(de.chartX):null,Le=st&&st.invert?st.invert(de.chartY):null;return ft(ft({},de),{},{xValue:lt,yValue:Le},ot)}return ot?ft(ft({},de),ot):null}},{key:"inRange",value:function(te,le){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,re=this.props.layout,de=te/Y,ge=le/Y;if(re==="horizontal"||re==="vertical"){var Ie=this.state.offset,We=de>=Ie.left&&de<=Ie.left+Ie.width&&ge>=Ie.top&&ge<=Ie.top+Ie.height;return We?{x:de,y:ge}:null}var Oe=this.state,Ve=Oe.angleAxisMap,Ke=Oe.radiusAxisMap;if(Ve&&Ke){var ot=wh(Ve);return lk({x:de,y:ge},ot)}return null}},{key:"parseEventsOfWrapper",value:function(){var te=this.props.children,le=this.getTooltipEventType(),Y=Jo(te,Al),re={};Y&&le==="axis"&&(Y.props.trigger==="click"?re={onClick:this.handleClick}:re={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var de=Wy(this.props,this.handleOuterEvent);return ft(ft({},de),re)}},{key:"addListener",value:function(){cw.on(uw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){cw.removeListener(uw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(te,le,Y){for(var re=this.state.formattedGraphicalItems,de=0,ge=re.length;de<ge;de++){var Ie=re[de];if(Ie.item===te||Ie.props.key===te.key||le===Th(Ie.item.type)&&Y===Ie.childIndex)return Ie}return null}},{key:"renderClipPath",value:function(){var te=this.clipPathId,le=this.state.offset,Y=le.left,re=le.top,de=le.height,ge=le.width;return Ee.createElement("defs",null,Ee.createElement("clipPath",{id:te},Ee.createElement("rect",{x:Y,y:re,height:de,width:ge})))}},{key:"getXScales",value:function(){var te=this.state.xAxisMap;return te?Object.entries(te).reduce(function(le,Y){var re=nO(Y,2),de=re[0],ge=re[1];return ft(ft({},le),{},yr({},de,ge.scale))},{}):null}},{key:"getYScales",value:function(){var te=this.state.yAxisMap;return te?Object.entries(te).reduce(function(le,Y){var re=nO(Y,2),de=re[0],ge=re[1];return ft(ft({},le),{},yr({},de,ge.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(te){var le;return(le=this.state.xAxisMap)===null||le===void 0||(le=le[te])===null||le===void 0?void 0:le.scale}},{key:"getYScaleByAxisId",value:function(te){var le;return(le=this.state.yAxisMap)===null||le===void 0||(le=le[te])===null||le===void 0?void 0:le.scale}},{key:"getItemByXY",value:function(te){var le=this.state,Y=le.formattedGraphicalItems,re=le.activeItem;if(Y&&Y.length)for(var de=0,ge=Y.length;de<ge;de++){var Ie=Y[de],We=Ie.props,Oe=Ie.item,Ve=Oe.type.defaultProps!==void 0?ft(ft({},Oe.type.defaultProps),Oe.props):Oe.props,Ke=Th(Oe.type);if(Ke==="Bar"){var ot=(We.data||[]).find(function(Le){return Q9(te,Le)});if(ot)return{graphicalItem:Ie,payload:ot}}else if(Ke==="RadialBar"){var at=(We.data||[]).find(function(Le){return lk(te,Le)});if(at)return{graphicalItem:Ie,payload:at}}else if(P_(Ie,re)||T_(Ie,re)||Tg(Ie,re)){var st=wW({graphicalItem:Ie,activeTooltipItem:re,itemData:Ve.data}),lt=Ve.activeIndex===void 0?st:Ve.activeIndex;return{graphicalItem:ft(ft({},Ie),{},{childIndex:lt}),payload:Tg(Ie,re)?Ve.data[st]:Ie.props.data[st]}}}return null}},{key:"render",value:function(){var te=this;if(!bA(this))return null;var le=this.props,Y=le.children,re=le.className,de=le.width,ge=le.height,Ie=le.style,We=le.compact,Oe=le.title,Ve=le.desc,Ke=iO(le,QK),ot=fr(Ke,!1);if(We)return Ee.createElement(NI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ee.createElement(Sw,Qf({},ot,{width:de,height:ge,title:Oe,desc:Ve}),this.renderClipPath(),SA(Y,this.renderMap)));if(this.props.accessibilityLayer){var at,st;ot.tabIndex=(at=this.props.tabIndex)!==null&&at!==void 0?at:0,ot.role=(st=this.props.role)!==null&&st!==void 0?st:"application",ot.onKeyDown=function(Le){te.accessibilityManager.keyboardEvent(Le)},ot.onFocus=function(){te.accessibilityManager.focus()}}var lt=this.parseEventsOfWrapper();return Ee.createElement(NI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ee.createElement("div",Qf({className:Or("recharts-wrapper",re),style:ft({position:"relative",cursor:"default",width:de,height:ge},Ie)},lt,{ref:function(tt){te.container=tt}}),Ee.createElement(Sw,Qf({},ot,{width:de,height:ge,title:Oe,desc:Ve,style:gX}),this.renderClipPath(),SA(Y,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(Ue.Component);yr(G,"displayName",i),yr(G,"defaultProps",ft({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},k)),yr(G,"getDerivedStateFromProps",function(F,X){var J=F.dataKey,te=F.data,le=F.children,Y=F.width,re=F.height,de=F.layout,ge=F.stackOffset,Ie=F.margin,We=X.dataStartIndex,Oe=X.dataEndIndex;if(X.updateId===void 0){var Ve=sO(F);return ft(ft(ft({},Ve),{},{updateId:0},j(ft(ft({props:F},Ve),{},{updateId:0}),X)),{},{prevDataKey:J,prevData:te,prevWidth:Y,prevHeight:re,prevLayout:de,prevStackOffset:ge,prevMargin:Ie,prevChildren:le})}if(J!==X.prevDataKey||te!==X.prevData||Y!==X.prevWidth||re!==X.prevHeight||de!==X.prevLayout||ge!==X.prevStackOffset||!ep(Ie,X.prevMargin)){var Ke=sO(F),ot={chartX:X.chartX,chartY:X.chartY,isTooltipActive:X.isTooltipActive},at=ft(ft({},oO(X,te,de)),{},{updateId:X.updateId+1}),st=ft(ft(ft({},Ke),ot),at);return ft(ft(ft({},st),j(ft({props:F},st),X)),{},{prevDataKey:J,prevData:te,prevWidth:Y,prevHeight:re,prevLayout:de,prevStackOffset:ge,prevMargin:Ie,prevChildren:le})}if(!bw(le,X.prevChildren)){var lt,Le,tt,ut,Ae=Jo(le,_p),qe=Ae&&(lt=(Le=Ae.props)===null||Le===void 0?void 0:Le.startIndex)!==null&&lt!==void 0?lt:We,yt=Ae&&(tt=(ut=Ae.props)===null||ut===void 0?void 0:ut.endIndex)!==null&&tt!==void 0?tt:Oe,Rt=qe!==We||yt!==Oe,$t=!kr(te),Wt=$t&&!Rt?X.updateId:X.updateId+1;return ft(ft({updateId:Wt},j(ft(ft({props:F},X),{},{updateId:Wt,dataStartIndex:qe,dataEndIndex:yt}),X)),{},{prevChildren:le,dataStartIndex:qe,dataEndIndex:yt})}return null}),yr(G,"renderActiveDot",function(F,X,J){var te;return Ue.isValidElement(F)?te=Ue.cloneElement(F,X):xr(F)?te=F(X):te=Ee.createElement(__,X),Ee.createElement(nn,{className:"recharts-active-dot",key:J},te)});var U=Ue.forwardRef(function(X,J){return Ee.createElement(G,Qf({},X,{ref:J}))});return U.displayName=G.displayName,U},AX=tP({chartName:"LineChart",GraphicalChild:Ug,axisComponents:[{axisType:"xAxis",AxisComp:Cp},{axisType:"yAxis",AxisComp:Mp}],formatAxisMap:ej}),CX=tP({chartName:"BarChart",GraphicalChild:Xd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Cp},{axisType:"yAxis",AxisComp:Mp}],formatAxisMap:ej}),EX=tP({chartName:"PieChart",GraphicalChild:Lu,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:S_},{axisType:"radiusAxis",AxisComp:b_}],formatAxisMap:fq,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Su({className:e,...t}){return ce.jsx("div",{"data-slot":"card",className:io("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Zf({className:e,...t}){return ce.jsx("div",{"data-slot":"card-header",className:io("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Hf({className:e,...t}){return ce.jsx("h4",{"data-slot":"card-title",className:io("leading-none",e),...t})}function Pu({className:e,...t}){return ce.jsx("div",{"data-slot":"card-content",className:io("px-6 [&:last-child]:pb-6",e),...t})}function MX({analysisResult:e,selectedFilters:t}){return console.log("InsightsView rendering:",{analysisResult:e,selectedFilters:t}),console.log("Analysis result data:",{totalPopulation:Math.round(e?.totalPopulation||0),matchingPopulation:Math.round(e?.matchingPopulation||0),percentage:e?.percentage,stateBreakdown:e?.stateBreakdown}),e?ce.jsxs("div",{className:"space-y-6 p-6",style:{padding:"24px",backgroundColor:"#f8fafc",minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:[ce.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",marginBottom:"32px"},children:[ce.jsx(Su,{style:{border:"2px solid #3b82f6",backgroundColor:"#eff6ff",borderRadius:"16px",boxShadow:"0 8px 25px -5px rgba(59, 130, 246, 0.3)",transition:"all 0.3s ease"},children:ce.jsxs(Pu,{style:{padding:"32px 24px",textAlign:"center"},children:[ce.jsxs("div",{style:{fontSize:"56px",fontWeight:"bold",color:"#1d4ed8",marginBottom:"12px",textShadow:"0 2px 4px rgba(29, 78, 216, 0.1)"},children:[e.percentage.toFixed(2),"%"]}),ce.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1e40af",marginBottom:"8px"},children:"Match Rate"}),ce.jsx("div",{style:{fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:"Population matching your filters"})]})}),ce.jsx(Su,{style:{border:"2px solid #10b981",backgroundColor:"#f0fdf4",borderRadius:"16px",boxShadow:"0 8px 25px -5px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease"},children:ce.jsxs(Pu,{style:{padding:"32px 24px",textAlign:"center"},children:[ce.jsxs("div",{style:{fontSize:"48px",fontWeight:"bold",color:"#059669",marginBottom:"12px",textShadow:"0 2px 4px rgba(5, 150, 105, 0.1)"},children:[Math.round(e.matchingPopulation/1e6),"M"]}),ce.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"#047857",marginBottom:"8px"},children:"Matching Population"}),ce.jsxs("div",{style:{fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:[Math.round(e.matchingPopulation).toLocaleString()," people"]})]})}),ce.jsx(Su,{style:{border:"2px solid #8b5cf6",backgroundColor:"#faf5ff",borderRadius:"16px",boxShadow:"0 8px 25px -5px rgba(139, 92, 246, 0.3)",transition:"all 0.3s ease"},children:ce.jsxs(Pu,{style:{padding:"32px 24px",textAlign:"center"},children:[ce.jsx("div",{style:{fontSize:"56px",fontWeight:"bold",color:"#7c3aed",marginBottom:"12px",textShadow:"0 2px 4px rgba(124, 58, 237, 0.1)"},children:t.size}),ce.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"#6b21a8",marginBottom:"8px"},children:"Filters Applied"}),ce.jsxs("div",{style:{fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:["Active filter",t.size!==1?"s":""]})]})})]}),ce.jsxs(Su,{style:{border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[ce.jsx(Zf,{style:{backgroundColor:"#f8fafc",padding:"20px 24px",borderBottom:"1px solid #e5e7eb"},children:ce.jsxs(Hf,{className:"flex items-center gap-2",style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[ce.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full",style:{width:"12px",height:"12px",backgroundColor:"#3b82f6",borderRadius:"50%"}}),"Population Distribution"]})}),ce.jsx(Pu,{style:{padding:"24px"},children:ce.jsxs("div",{className:"space-y-6",style:{display:"flex",flexDirection:"column",gap:"24px"},children:[ce.jsx("div",{className:"h-80",style:{height:"320px",display:"flex",justifyContent:"center",alignItems:"center"},children:ce.jsx(EX,{width:400,height:300,children:ce.jsxs(Lu,{data:[{name:"Matching",value:e.matchingPopulation},{name:"Remaining",value:e.totalPopulation-e.matchingPopulation}],cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,dataKey:"value",children:[ce.jsx(tg,{fill:"#3b82f6"}),ce.jsx(tg,{fill:"#e5e7eb"})]})})}),ce.jsxs("div",{className:"grid grid-cols-2 gap-4",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #dbeafe"},children:[ce.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full",style:{width:"16px",height:"16px",backgroundColor:"#3b82f6",borderRadius:"50%"}}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-sm font-medium text-blue-900",style:{fontSize:"14px",fontWeight:"500",color:"#1e40af"},children:"Matching Population"}),ce.jsx("div",{className:"text-xs text-blue-700",style:{fontSize:"12px",color:"#1d4ed8"},children:Math.round(e.matchingPopulation).toLocaleString()}),ce.jsxs("div",{className:"text-xs text-blue-600 font-semibold",style:{fontSize:"12px",color:"#1e40af",fontWeight:"600"},children:[e.percentage.toFixed(2),"%"]})]})]}),ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[ce.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded-full",style:{width:"16px",height:"16px",backgroundColor:"#9ca3af",borderRadius:"50%"}}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-sm font-medium text-gray-900",style:{fontSize:"14px",fontWeight:"500",color:"#111827"},children:"Remaining Population"}),ce.jsx("div",{className:"text-xs text-gray-700",style:{fontSize:"12px",color:"#4b5563"},children:Math.round(e.totalPopulation-e.matchingPopulation).toLocaleString()}),ce.jsxs("div",{className:"text-xs text-gray-600 font-semibold",style:{fontSize:"12px",color:"#4b5563",fontWeight:"600"},children:[(100-e.percentage).toFixed(2),"%"]})]})]})]})]})})]}),ce.jsxs(Su,{style:{border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[ce.jsx(Zf,{style:{backgroundColor:"#f0fdf4",padding:"20px 24px",borderBottom:"1px solid #e5e7eb"},children:ce.jsxs(Hf,{className:"flex items-center gap-2",style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[ce.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full",style:{width:"12px",height:"12px",backgroundColor:"#10b981",borderRadius:"50%"}}),"State Performance"]})}),ce.jsx(Pu,{style:{padding:"24px"},children:ce.jsxs("div",{className:"space-y-6",style:{display:"flex",flexDirection:"column",gap:"24px"},children:[ce.jsx("div",{className:"h-80",style:{height:"320px",display:"flex",justifyContent:"center",alignItems:"center"},children:ce.jsxs(CX,{width:600,height:300,data:e.stateBreakdown.slice(0,5).map((i,a)=>({state:i.state,percentage:i.percentage,matchingPopulation:i.matchingPopulation,population:i.population,rank:a+1})),margin:{top:20,right:30,left:20,bottom:5},children:[ce.jsx(MS,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),ce.jsx(Cp,{dataKey:"state",tick:{fontSize:12},axisLine:{stroke:"#e5e7eb"}}),ce.jsx(Mp,{tick:{fontSize:12},axisLine:{stroke:"#e5e7eb"},label:{value:"Match Rate (%)",angle:-90,position:"insideLeft"}}),ce.jsx(Al,{formatter:(i,a)=>[a==="percentage"?`${i.toFixed(2)}%`:Math.round(i).toLocaleString(),a==="percentage"?"Match Rate":"Population"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),ce.jsx(Xd,{dataKey:"percentage",fill:"#3b82f6",radius:[4,4,0,0]})]})}),ce.jsx("div",{className:"space-y-3",children:e.stateBreakdown.slice(0,5).map((i,a)=>{const u=a===0;return ce.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${u?"bg-green-50 border border-green-200":"bg-gray-50"}`,children:[ce.jsxs("div",{className:"flex items-center gap-3",children:[ce.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${u?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a+1}),ce.jsxs("div",{children:[ce.jsx("div",{className:"font-medium",children:i.state}),ce.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(i.population).toLocaleString()," total"]})]})]}),ce.jsxs("div",{className:"text-right",children:[ce.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[i.percentage.toFixed(2),"%"]}),ce.jsx("div",{className:"text-sm text-muted-foreground",children:Math.round(i.matchingPopulation).toLocaleString()})]})]},i.state)})})]})})]}),ce.jsxs(Su,{style:{border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[ce.jsx(Zf,{style:{backgroundColor:"#faf5ff",padding:"20px 24px",borderBottom:"1px solid #e5e7eb"},children:ce.jsxs(Hf,{className:"flex items-center gap-2",style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[ce.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full",style:{width:"12px",height:"12px",backgroundColor:"#8b5cf6",borderRadius:"50%"}}),"Population Trend Analysis"]})}),ce.jsx(Pu,{style:{padding:"24px"},children:ce.jsxs("div",{className:"space-y-6",style:{display:"flex",flexDirection:"column",gap:"24px"},children:[ce.jsx("div",{className:"h-80",style:{height:"320px",display:"flex",justifyContent:"center",alignItems:"center"},children:ce.jsxs(AX,{width:600,height:300,data:e.stateBreakdown.slice(0,6).map((i,a)=>({state:i.state,percentage:i.percentage,matchingPopulation:i.matchingPopulation,population:i.population,rank:a+1})),margin:{top:20,right:30,left:20,bottom:5},children:[ce.jsx(MS,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),ce.jsx(Cp,{dataKey:"state",tick:{fontSize:12},axisLine:{stroke:"#e5e7eb"}}),ce.jsx(Mp,{tick:{fontSize:12},axisLine:{stroke:"#e5e7eb"},label:{value:"Match Rate (%)",angle:-90,position:"insideLeft"}}),ce.jsx(Al,{formatter:(i,a)=>[a==="percentage"?`${i.toFixed(2)}%`:Math.round(i).toLocaleString(),a==="percentage"?"Match Rate":"Population"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),ce.jsx(Ug,{type:"monotone",dataKey:"percentage",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:6},activeDot:{r:8,stroke:"#3b82f6",strokeWidth:2}})]})}),ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ce.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[ce.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Average Match Rate"}),ce.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(e.stateBreakdown.reduce((i,a)=>i+a.percentage,0)/e.stateBreakdown.length).toFixed(2),"%"]})]}),ce.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[ce.jsx("div",{className:"text-sm font-medium text-green-900",children:"Top Performer"}),ce.jsxs("div",{className:"text-lg font-bold text-green-600",children:[e.stateBreakdown[0]?.state," (",e.stateBreakdown[0]?.percentage.toFixed(2),"%)"]})]})]})]})})]}),ce.jsxs(Su,{style:{border:"2px solid orange",marginBottom:"20px"},children:[ce.jsx(Zf,{style:{backgroundColor:"#f9fafb",padding:"16px"},children:ce.jsxs(Hf,{className:"flex items-center gap-2",style:{fontSize:"18px",fontWeight:"600"},children:[ce.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full",style:{width:"8px",height:"8px",backgroundColor:"#f97316",borderRadius:"50%"}}),"Complete State Analysis"]})}),ce.jsx(Pu,{style:{padding:"16px"},children:ce.jsx("div",{className:"overflow-x-auto",style:{overflowX:"auto"},children:ce.jsxs("table",{className:"w-full text-sm",style:{width:"100%",fontSize:"14px"},children:[ce.jsx("thead",{children:ce.jsxs("tr",{className:"border-b",style:{borderBottom:"1px solid #e5e7eb"},children:[ce.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",style:{textAlign:"left",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"State"}),ce.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",style:{textAlign:"right",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"Total Population"}),ce.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",style:{textAlign:"right",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"Matching Population"}),ce.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",style:{textAlign:"right",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"Match Rate"}),ce.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",style:{textAlign:"right",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"Rank"})]})}),ce.jsx("tbody",{children:e.stateBreakdown.map((i,a)=>ce.jsxs("tr",{className:"border-b hover:bg-gray-50",style:{borderBottom:"1px solid #e5e7eb",backgroundColor:a%2===0?"#ffffff":"#f9fafb"},children:[ce.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",style:{padding:"12px 16px",fontWeight:"500",color:"#111827"},children:i.state}),ce.jsx("td",{className:"py-3 px-4 text-right text-gray-600",style:{padding:"12px 16px",textAlign:"right",color:"#4b5563"},children:Math.round(i.population).toLocaleString()}),ce.jsx("td",{className:"py-3 px-4 text-right text-gray-600",style:{padding:"12px 16px",textAlign:"right",color:"#4b5563"},children:Math.round(i.matchingPopulation).toLocaleString()}),ce.jsx("td",{className:"py-3 px-4 text-right",style:{padding:"12px 16px",textAlign:"right"},children:ce.jsxs("span",{className:`font-semibold ${i.percentage>5?"text-green-600":i.percentage>2?"text-yellow-600":"text-red-600"}`,style:{fontWeight:"600",color:i.percentage>5?"#059669":i.percentage>2?"#d97706":"#dc2626"},children:[i.percentage.toFixed(2),"%"]})}),ce.jsx("td",{className:"py-3 px-4 text-right",style:{padding:"12px 16px",textAlign:"right"},children:ce.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a===0?"bg-green-100 text-green-800":a===1?"bg-blue-100 text-blue-800":a===2?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",borderRadius:"9999px",fontSize:"12px",fontWeight:"500",backgroundColor:a===0?"#dcfce7":a===1?"#dbeafe":a===2?"#e9d5ff":"#f3f4f6",color:a===0?"#166534":a===1?"#1e40af":a===2?"#7c3aed":"#374151"},children:["#",a+1]})})]},i.state))})]})})})]}),ce.jsxs(Su,{style:{border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[ce.jsx(Zf,{style:{backgroundColor:"#eef2ff",padding:"20px 24px",borderBottom:"1px solid #e5e7eb"},children:ce.jsxs(Hf,{className:"flex items-center gap-2",style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[ce.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full",style:{width:"12px",height:"12px",backgroundColor:"#6366f1",borderRadius:"50%"}}),"Filter Impact Analysis"]})}),ce.jsx(Pu,{style:{padding:"24px"},children:ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ce.jsxs("div",{className:"space-y-4",children:[ce.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Filter Categories"}),ce.jsx("div",{className:"space-y-3",children:Array.from(t).slice(0,6).map((i,a)=>{const u=i.split("_")[0],m=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500","bg-indigo-500"],p={voters:"Demographics",commercialdata:"Household",consumerdata:"Consumer",hs:"Political",ethnic:"Ethnicity",state:"Geography"};return ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[ce.jsx("div",{className:`w-4 h-4 rounded-full ${m[a%m.length]}`}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-sm font-medium text-gray-900",children:p[u]||u}),ce.jsx("div",{className:"text-xs text-muted-foreground",children:i.split("_").slice(1).join(" ")})]})]},i)})})]}),ce.jsxs("div",{className:"space-y-4",children:[ce.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Filter Distribution"}),ce.jsx("div",{className:"space-y-3",children:Array.from(t).slice(0,6).map((i,a)=>{const u=1/t.size*100,m=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500","bg-indigo-500"];return ce.jsxs("div",{className:"space-y-2",children:[ce.jsxs("div",{className:"flex justify-between items-center",children:[ce.jsx("span",{className:"text-sm font-medium text-gray-900",children:i.split("_").pop()}),ce.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.toFixed(2),"%"]})]}),ce.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:ce.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${m[a%m.length]}`,style:{width:`${u}%`}})})]},i)})})]})]}),ce.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[ce.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[ce.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.size}),ce.jsx("div",{className:"text-sm text-blue-700",children:"Active Filters"})]}),ce.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[ce.jsx("div",{className:"text-2xl font-bold text-green-600",children:Array.from(t).map(i=>i.split("_")[0]).filter((i,a,u)=>u.indexOf(i)===a).length}),ce.jsx("div",{className:"text-sm text-green-700",children:"Categories"})]}),ce.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[ce.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(e.percentage),"%"]}),ce.jsx("div",{className:"text-sm text-purple-700",children:"Match Rate"})]})]})]})})]}),ce.jsxs(Su,{style:{border:"2px solid pink",marginBottom:"20px"},children:[ce.jsx(Zf,{style:{backgroundColor:"#fdf2f8",padding:"16px"},children:ce.jsxs(Hf,{className:"flex items-center gap-2",style:{fontSize:"18px",fontWeight:"600"},children:[ce.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full",style:{width:"8px",height:"8px",backgroundColor:"#ec4899",borderRadius:"50%"}}),"Applied Filters"]})}),ce.jsx(Pu,{style:{padding:"16px"},children:ce.jsxs("div",{className:"space-y-4",style:{display:"flex",flexDirection:"column",gap:"16px"},children:[ce.jsxs("div",{className:"text-sm text-gray-600 mb-4",style:{fontSize:"14px",color:"#4b5563",marginBottom:"16px"},children:[t.size," filter",t.size!==1?"s":""," currently applied"]}),ce.jsx("div",{className:"flex flex-wrap gap-2",style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Array.from(t).map((i,a)=>{const u=["bg-blue-100 text-blue-800 border-blue-200","bg-green-100 text-green-800 border-green-200","bg-purple-100 text-purple-800 border-purple-200","bg-orange-100 text-orange-800 border-orange-200","bg-red-100 text-red-800 border-red-200","bg-indigo-100 text-indigo-800 border-indigo-200"];return ce.jsx(Xm,{variant:"outline",className:`px-3 py-1 text-sm font-medium border ${u[a%u.length]}`,style:{padding:"8px 12px",fontSize:"14px",fontWeight:"500",border:"1px solid",borderRadius:"6px",backgroundColor:a%6===0?"#dbeafe":a%6===1?"#dcfce7":a%6===2?"#e9d5ff":a%6===3?"#fed7aa":a%6===4?"#fecaca":"#e0e7ff",color:a%6===0?"#1e40af":a%6===1?"#166534":a%6===2?"#7c3aed":a%6===3?"#ea580c":a%6===4?"#dc2626":"#3730a3",borderColor:a%6===0?"#93c5fd":a%6===1?"#86efac":a%6===2?"#c4b5fd":a%6===3?"#fdba74":a%6===4?"#fca5a5":"#a5b4fc"},children:i.split("_").pop()?.replace(/_/g," ")},i)})})]})})]})]}):ce.jsx("div",{className:"h-full flex items-center justify-center",children:ce.jsxs("div",{className:"text-center space-y-4",children:[ce.jsx("div",{className:"text-2xl font-semibold text-muted-foreground",children:"No Analysis Results"}),ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Apply filters to see insights"})]})})}function kX({selectedFilters:e,analysisResult:t}){const[i,a]=Ue.useState("map"),[u,m]=Ue.useState(null),[p,l]=Ue.useState(null),P=Ue.useRef(null),A=Ue.useRef(null);Ue.useEffect(()=>(P.current&&!A.current&&(A.current=new dT.Map({container:P.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[-98.5795,39.8283],zoom:4}),A.current.addControl(new dT.NavigationControl),A.current.on("click","voter-heatmap",j=>{const G=j.features[0].properties,U=G.name==="California"?"CA":G.name==="New York"?"NY":G.name==="Wyoming"?"WY":G.name;m({name:G.name,state:U,population:G.density||0,matchingPopulation:G.matchingPopulation||0,percentage:G.percentage||0})}),A.current.on("mouseenter","voter-heatmap",()=>{A.current&&(A.current.getCanvas().style.cursor="pointer")}),A.current.on("mouseleave","voter-heatmap",()=>{A.current&&(A.current.getCanvas().style.cursor="")}),A.current.on("load",()=>{console.log("Map loaded, ready to add state boundaries and heatmap"),E(),k()})),()=>{A.current&&(A.current.remove(),A.current=null)}),[]);const E=()=>{if(A.current){if(console.log("Adding state boundaries..."),!bu||!bu.features){console.error("GeoJSON data not available");return}A.current.getSource("state-boundaries")&&(console.log("Removing existing state boundaries..."),A.current.getLayer("state-fill")&&A.current.removeLayer("state-fill"),A.current.getLayer("state-borders")&&A.current.removeLayer("state-borders"),A.current.removeSource("state-boundaries")),A.current.addSource("state-boundaries",{type:"geojson",data:bu}),A.current.addLayer({id:"state-fill",type:"fill",source:"state-boundaries",paint:{"fill-color":"#e1f5fe","fill-opacity":.3}}),A.current.addLayer({id:"state-borders",type:"line",source:"state-boundaries",paint:{"line-color":"#1976d2","line-width":2}}),console.log("State boundaries added")}},k=()=>{if(!A.current)return;if(console.log("Adding sample heatmap with state boundaries..."),!bu||!bu.features){console.error("GeoJSON data not available for sample heatmap");return}const j={type:"FeatureCollection",features:bu.features.map(G=>{const U=G.properties.name==="California"?"CA":G.properties.name==="New York"?"NY":G.properties.name==="Wyoming"?"WY":G.properties.name;let F=0,X=0;switch(U){case"CA":F=5e6,X=12.6;break;case"NY":F=25e5,X=12.8;break;case"WY":F=75e3,X=13;break}return{...G,properties:{...G.properties,matchingPopulation:F,percentage:X}}})};A.current.getSource("voter-heatmap")&&(A.current.removeLayer("voter-heatmap"),A.current.removeSource("voter-heatmap")),A.current.addSource("voter-heatmap",{type:"geojson",data:j}),A.current.addLayer({id:"voter-heatmap",type:"fill",source:"voter-heatmap",paint:{"fill-color":["interpolate",["linear"],["get","percentage"],0,"#e3f2fd",5,"#90caf9",10,"#64b5f6",15,"#42a5f5",20,"#4caf50",25,"#ff9800",30,"#ff5722"],"fill-opacity":.7}}),console.log("Sample heatmap added to map")},D=j=>{if(!A.current||j.stateBreakdown.length===0)return;if(console.log("Adding heatmap to map with analysis data:",j.stateBreakdown),!bu||!bu.features){console.error("GeoJSON data not available for heatmap");return}const G={};j.stateBreakdown.forEach(F=>{G[F.state]=F});const U={type:"FeatureCollection",features:bu.features.map(F=>{const X=F.properties.name==="California"?"CA":F.properties.name==="New York"?"NY":F.properties.name==="Wyoming"?"WY":F.properties.name,J=G[X];return J?{...F,properties:{...F.properties,matchingPopulation:Math.round(J.matchingPopulation),percentage:J.percentage,population:Math.round(J.population)}}:{...F,properties:{...F.properties,matchingPopulation:0,percentage:0,population:F.properties.density||0}}})};console.log("Heatmap data for map:",U),A.current.getSource("voter-heatmap")&&(A.current.removeLayer("voter-heatmap"),A.current.removeSource("voter-heatmap")),A.current.addSource("voter-heatmap",{type:"geojson",data:U}),A.current.addLayer({id:"voter-heatmap",type:"fill",source:"voter-heatmap",paint:{"fill-color":["interpolate",["linear"],["get","percentage"],0,"#e3f2fd",5,"#90caf9",10,"#64b5f6",15,"#42a5f5",20,"#4caf50",25,"#ff9800",30,"#ff5722"],"fill-opacity":.7}}),console.log("Heatmap added to map successfully")};return Ue.useEffect(()=>{A.current&&A.current.isStyleLoaded()&&(t&&t.stateBreakdown.length>0?D(t):k())},[t]),Ue.useEffect(()=>{const G=setTimeout(()=>{A.current&&A.current.resize()},100);return()=>clearTimeout(G)},[i]),Ue.useEffect(()=>{i==="map"&&A.current&&setTimeout(()=>{A.current&&(A.current.resize(),A.current.triggerRepaint())},150)},[i]),Ue.useEffect(()=>()=>{A.current&&(A.current.remove(),A.current=null)},[]),ce.jsx("div",{className:"flex-1 flex flex-col h-full",children:ce.jsxs(HL,{value:i,onValueChange:a,className:"flex-1 flex flex-col h-full",children:[ce.jsx("div",{className:"p-4 border-b border-border bg-white",children:ce.jsxs(KL,{className:"grid w-fit grid-cols-2",children:[ce.jsxs(cT,{value:"map",className:"flex items-center gap-2",children:[ce.jsx(I3,{className:"w-4 h-4"}),"Map View"]}),ce.jsxs(cT,{value:"insights",className:"flex items-center gap-2",children:[ce.jsx(S3,{className:"w-4 h-4"}),"Insights View"]})]})}),ce.jsx(uT,{value:"map",className:"flex-1 m-0",children:ce.jsxs("div",{className:"relative h-full",children:[ce.jsx("div",{ref:P,className:"w-full h-full"}),t&&t.totalPopulation>0&&ce.jsxs("div",{className:"absolute top-4 right-4 bg-white p-4 rounded-lg shadow-lg border border-border max-w-sm",children:[ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.round(t.matchingPopulation).toLocaleString()}),ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Matching Population"}),ce.jsxs("div",{className:"text-lg font-medium mt-1",children:["(",t.percentage.toFixed(2),"%)"]})]}),ce.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),ce.jsxs("span",{className:"text-sm",children:["Total Population: ",Math.round(t.totalPopulation).toLocaleString()]})]})})]}),ce.jsxs("div",{className:"absolute bottom-4 right-4 bg-white p-4 rounded-lg shadow-lg border border-border",children:[ce.jsx("h4",{className:"font-medium mb-3",children:"Voter Segment Heatmap"}),ce.jsxs("div",{className:"space-y-2",children:[ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#ff5722"}}),ce.jsx("span",{className:"text-sm",children:"Very High (25%+)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#ff9800"}}),ce.jsx("span",{className:"text-sm",children:"High (20-25%)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#4caf50"}}),ce.jsx("span",{className:"text-sm",children:"Medium (15-20%)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#42a5f5"}}),ce.jsx("span",{className:"text-sm",children:"Low (10-15%)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#64b5f6"}}),ce.jsx("span",{className:"text-sm",children:"Very Low (5-10%)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#e3f2fd"}}),ce.jsx("span",{className:"text-sm",children:"Minimal (0-5%)"})]})]}),ce.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Showing: CA, NY, WY states"})})]}),e.size>0&&ce.jsxs("div",{className:"absolute top-4 left-4 bg-white p-4 rounded-lg shadow-lg border border-border max-w-sm",children:[ce.jsx("h3",{className:"font-medium mb-2",children:"Active Filters"}),ce.jsxs("div",{className:"space-y-1",children:[Array.from(e).slice(0,3).map(j=>ce.jsx(Xm,{variant:"secondary",className:"mr-1 mb-1",children:j.split("-").pop()},j)),e.size>3&&ce.jsxs(Xm,{variant:"outline",children:["+",e.size-3," more"]})]})]})]})}),ce.jsx(uT,{value:"insights",className:"flex-1 m-0",children:ce.jsx(MX,{analysisResult:t||null,selectedFilters:e})})]})})}function IX(){const[e,t]=Ue.useState(new Set),[i,a]=Ue.useState(),[u,m]=Ue.useState(!1),p=(P,A)=>{const E=new Set(e);A?E.add(P):E.delete(P),t(E)},l=()=>{t(new Set),a(void 0)};return Ue.useEffect(()=>{if(e.size>0){console.log("Filters changed, scheduling analysis...",Array.from(e));const P=setTimeout(async()=>{console.log("Executing analysis..."),m(!0);try{const A=await gw.analyzeFilters(e);a(A)}catch(A){console.error("Error analyzing filters:",A)}finally{m(!1)}},500);return()=>clearTimeout(P)}else a(void 0)},[e]),ce.jsxs("div",{className:"h-screen w-full flex bg-background",children:[ce.jsx(EL,{selectedFilters:e,onFilterChange:p,onClearAll:l,analysisResult:i}),ce.jsx(kX,{selectedFilters:e,analysisResult:i})]})}y3.createRoot(document.getElementById("root")).render(ce.jsx(IX,{}));
