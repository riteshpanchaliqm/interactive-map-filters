function nL(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(e,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function n(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=n(u);fetch(u.href,f)}})();var zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ln(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _0={exports:{}},jm={},x0={exports:{}},Fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function iL(){if(hT)return Fr;hT=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),M=Symbol.iterator;function D(Ce){return Ce===null||typeof Ce!="object"?null:(Ce=M&&Ce[M]||Ce["@@iterator"],typeof Ce=="function"?Ce:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,F={};function $(Ce,qe,yt){this.props=Ce,this.context=qe,this.refs=F,this.updater=yt||j}$.prototype.isReactComponent={},$.prototype.setState=function(Ce,qe){if(typeof Ce!="object"&&typeof Ce!="function"&&Ce!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ce,qe,"setState")},$.prototype.forceUpdate=function(Ce){this.updater.enqueueForceUpdate(this,Ce,"forceUpdate")};function K(){}K.prototype=$.prototype;function J(Ce,qe,yt){this.props=Ce,this.context=qe,this.refs=F,this.updater=yt||j}var ee=J.prototype=new K;ee.constructor=J,G(ee,$.prototype),ee.isPureReactComponent=!0;var oe=Array.isArray,Y=Object.prototype.hasOwnProperty,re={current:null},ue={key:!0,ref:!0,__self:!0,__source:!0};function ge(Ce,qe,yt){var Rt,$t={},Wt=null,er=null;if(qe!=null)for(Rt in qe.ref!==void 0&&(er=qe.ref),qe.key!==void 0&&(Wt=""+qe.key),qe)Y.call(qe,Rt)&&!ue.hasOwnProperty(Rt)&&($t[Rt]=qe[Rt]);var tr=arguments.length-2;if(tr===1)$t.children=yt;else if(1<tr){for(var vt=Array(tr),Ft=0;Ft<tr;Ft++)vt[Ft]=arguments[Ft+2];$t.children=vt}if(Ce&&Ce.defaultProps)for(Rt in tr=Ce.defaultProps,tr)$t[Rt]===void 0&&($t[Rt]=tr[Rt]);return{$$typeof:e,type:Ce,key:Wt,ref:er,props:$t,_owner:re.current}}function Oe(Ce,qe){return{$$typeof:e,type:Ce.type,key:qe,ref:Ce.ref,props:Ce.props,_owner:Ce._owner}}function We(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===e}function Re(Ce){var qe={"=":"=0",":":"=2"};return"$"+Ce.replace(/[=:]/g,function(yt){return qe[yt]})}var Ve=/\/+/g;function Ye(Ce,qe){return typeof Ce=="object"&&Ce!==null&&Ce.key!=null?Re(""+Ce.key):qe.toString(36)}function ot(Ce,qe,yt,Rt,$t){var Wt=typeof Ce;(Wt==="undefined"||Wt==="boolean")&&(Ce=null);var er=!1;if(Ce===null)er=!0;else switch(Wt){case"string":case"number":er=!0;break;case"object":switch(Ce.$$typeof){case e:case t:er=!0}}if(er)return er=Ce,$t=$t(er),Ce=Rt===""?"."+Ye(er,0):Rt,oe($t)?(yt="",Ce!=null&&(yt=Ce.replace(Ve,"$&/")+"/"),ot($t,qe,yt,"",function(Ft){return Ft})):$t!=null&&(We($t)&&($t=Oe($t,yt+(!$t.key||er&&er.key===$t.key?"":(""+$t.key).replace(Ve,"$&/")+"/")+Ce)),qe.push($t)),1;if(er=0,Rt=Rt===""?".":Rt+":",oe(Ce))for(var tr=0;tr<Ce.length;tr++){Wt=Ce[tr];var vt=Rt+Ye(Wt,tr);er+=ot(Wt,qe,yt,vt,$t)}else if(vt=D(Ce),typeof vt=="function")for(Ce=vt.call(Ce),tr=0;!(Wt=Ce.next()).done;)Wt=Wt.value,vt=Rt+Ye(Wt,tr++),er+=ot(Wt,qe,yt,vt,$t);else if(Wt==="object")throw qe=String(Ce),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(Ce).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.");return er}function at(Ce,qe,yt){if(Ce==null)return Ce;var Rt=[],$t=0;return ot(Ce,Rt,"","",function(Wt){return qe.call(yt,Wt,$t++)}),Rt}function st(Ce){if(Ce._status===-1){var qe=Ce._result;qe=qe(),qe.then(function(yt){(Ce._status===0||Ce._status===-1)&&(Ce._status=1,Ce._result=yt)},function(yt){(Ce._status===0||Ce._status===-1)&&(Ce._status=2,Ce._result=yt)}),Ce._status===-1&&(Ce._status=0,Ce._result=qe)}if(Ce._status===1)return Ce._result.default;throw Ce._result}var lt={current:null},Ne={transition:null},tt={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Ne,ReactCurrentOwner:re};function ut(){throw Error("act(...) is not supported in production builds of React.")}return Fr.Children={map:at,forEach:function(Ce,qe,yt){at(Ce,function(){qe.apply(this,arguments)},yt)},count:function(Ce){var qe=0;return at(Ce,function(){qe++}),qe},toArray:function(Ce){return at(Ce,function(qe){return qe})||[]},only:function(Ce){if(!We(Ce))throw Error("React.Children.only expected to receive a single React element child.");return Ce}},Fr.Component=$,Fr.Fragment=n,Fr.Profiler=u,Fr.PureComponent=J,Fr.StrictMode=a,Fr.Suspense=P,Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tt,Fr.act=ut,Fr.cloneElement=function(Ce,qe,yt){if(Ce==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ce+".");var Rt=G({},Ce.props),$t=Ce.key,Wt=Ce.ref,er=Ce._owner;if(qe!=null){if(qe.ref!==void 0&&(Wt=qe.ref,er=re.current),qe.key!==void 0&&($t=""+qe.key),Ce.type&&Ce.type.defaultProps)var tr=Ce.type.defaultProps;for(vt in qe)Y.call(qe,vt)&&!ue.hasOwnProperty(vt)&&(Rt[vt]=qe[vt]===void 0&&tr!==void 0?tr[vt]:qe[vt])}var vt=arguments.length-2;if(vt===1)Rt.children=yt;else if(1<vt){tr=Array(vt);for(var Ft=0;Ft<vt;Ft++)tr[Ft]=arguments[Ft+2];Rt.children=tr}return{$$typeof:e,type:Ce.type,key:$t,ref:Wt,props:Rt,_owner:er}},Fr.createContext=function(Ce){return Ce={$$typeof:p,_currentValue:Ce,_currentValue2:Ce,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ce.Provider={$$typeof:f,_context:Ce},Ce.Consumer=Ce},Fr.createElement=ge,Fr.createFactory=function(Ce){var qe=ge.bind(null,Ce);return qe.type=Ce,qe},Fr.createRef=function(){return{current:null}},Fr.forwardRef=function(Ce){return{$$typeof:s,render:Ce}},Fr.isValidElement=We,Fr.lazy=function(Ce){return{$$typeof:E,_payload:{_status:-1,_result:Ce},_init:st}},Fr.memo=function(Ce,qe){return{$$typeof:A,type:Ce,compare:qe===void 0?null:qe}},Fr.startTransition=function(Ce){var qe=Ne.transition;Ne.transition={};try{Ce()}finally{Ne.transition=qe}},Fr.unstable_act=ut,Fr.useCallback=function(Ce,qe){return lt.current.useCallback(Ce,qe)},Fr.useContext=function(Ce){return lt.current.useContext(Ce)},Fr.useDebugValue=function(){},Fr.useDeferredValue=function(Ce){return lt.current.useDeferredValue(Ce)},Fr.useEffect=function(Ce,qe){return lt.current.useEffect(Ce,qe)},Fr.useId=function(){return lt.current.useId()},Fr.useImperativeHandle=function(Ce,qe,yt){return lt.current.useImperativeHandle(Ce,qe,yt)},Fr.useInsertionEffect=function(Ce,qe){return lt.current.useInsertionEffect(Ce,qe)},Fr.useLayoutEffect=function(Ce,qe){return lt.current.useLayoutEffect(Ce,qe)},Fr.useMemo=function(Ce,qe){return lt.current.useMemo(Ce,qe)},Fr.useReducer=function(Ce,qe,yt){return lt.current.useReducer(Ce,qe,yt)},Fr.useRef=function(Ce){return lt.current.useRef(Ce)},Fr.useState=function(Ce){return lt.current.useState(Ce)},Fr.useSyncExternalStore=function(Ce,qe,yt){return lt.current.useSyncExternalStore(Ce,qe,yt)},Fr.useTransition=function(){return lt.current.useTransition()},Fr.version="18.3.1",Fr}var dT;function u2(){return dT||(dT=1,x0.exports=iL()),x0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function aL(){if(fT)return jm;fT=1;var e=u2(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function p(s,P,A){var E,M={},D=null,j=null;A!==void 0&&(D=""+A),P.key!==void 0&&(D=""+P.key),P.ref!==void 0&&(j=P.ref);for(E in P)a.call(P,E)&&!f.hasOwnProperty(E)&&(M[E]=P[E]);if(s&&s.defaultProps)for(E in P=s.defaultProps,P)M[E]===void 0&&(M[E]=P[E]);return{$$typeof:t,type:s,key:D,ref:j,props:M,_owner:u.current}}return jm.Fragment=n,jm.jsx=p,jm.jsxs=p,jm}var pT;function oL(){return pT||(pT=1,_0.exports=aL()),_0.exports}var ce=oL(),jy={},b0={exports:{}},So={},w0={exports:{}},S0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function sL(){return mT||(mT=1,(function(e){function t(Ne,tt){var ut=Ne.length;Ne.push(tt);e:for(;0<ut;){var Ce=ut-1>>>1,qe=Ne[Ce];if(0<u(qe,tt))Ne[Ce]=tt,Ne[ut]=qe,ut=Ce;else break e}}function n(Ne){return Ne.length===0?null:Ne[0]}function a(Ne){if(Ne.length===0)return null;var tt=Ne[0],ut=Ne.pop();if(ut!==tt){Ne[0]=ut;e:for(var Ce=0,qe=Ne.length,yt=qe>>>1;Ce<yt;){var Rt=2*(Ce+1)-1,$t=Ne[Rt],Wt=Rt+1,er=Ne[Wt];if(0>u($t,ut))Wt<qe&&0>u(er,$t)?(Ne[Ce]=er,Ne[Wt]=ut,Ce=Wt):(Ne[Ce]=$t,Ne[Rt]=ut,Ce=Rt);else if(Wt<qe&&0>u(er,ut))Ne[Ce]=er,Ne[Wt]=ut,Ce=Wt;else break e}}return tt}function u(Ne,tt){var ut=Ne.sortIndex-tt.sortIndex;return ut!==0?ut:Ne.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var p=Date,s=p.now();e.unstable_now=function(){return p.now()-s}}var P=[],A=[],E=1,M=null,D=3,j=!1,G=!1,F=!1,$=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(Ne){for(var tt=n(A);tt!==null;){if(tt.callback===null)a(A);else if(tt.startTime<=Ne)a(A),tt.sortIndex=tt.expirationTime,t(P,tt);else break;tt=n(A)}}function oe(Ne){if(F=!1,ee(Ne),!G)if(n(P)!==null)G=!0,st(Y);else{var tt=n(A);tt!==null&&lt(oe,tt.startTime-Ne)}}function Y(Ne,tt){G=!1,F&&(F=!1,K(ge),ge=-1),j=!0;var ut=D;try{for(ee(tt),M=n(P);M!==null&&(!(M.expirationTime>tt)||Ne&&!Re());){var Ce=M.callback;if(typeof Ce=="function"){M.callback=null,D=M.priorityLevel;var qe=Ce(M.expirationTime<=tt);tt=e.unstable_now(),typeof qe=="function"?M.callback=qe:M===n(P)&&a(P),ee(tt)}else a(P);M=n(P)}if(M!==null)var yt=!0;else{var Rt=n(A);Rt!==null&&lt(oe,Rt.startTime-tt),yt=!1}return yt}finally{M=null,D=ut,j=!1}}var re=!1,ue=null,ge=-1,Oe=5,We=-1;function Re(){return!(e.unstable_now()-We<Oe)}function Ve(){if(ue!==null){var Ne=e.unstable_now();We=Ne;var tt=!0;try{tt=ue(!0,Ne)}finally{tt?Ye():(re=!1,ue=null)}}else re=!1}var Ye;if(typeof J=="function")Ye=function(){J(Ve)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,at=ot.port2;ot.port1.onmessage=Ve,Ye=function(){at.postMessage(null)}}else Ye=function(){$(Ve,0)};function st(Ne){ue=Ne,re||(re=!0,Ye())}function lt(Ne,tt){ge=$(function(){Ne(e.unstable_now())},tt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){G||j||(G=!0,st(Y))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Oe=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return n(P)},e.unstable_next=function(Ne){switch(D){case 1:case 2:case 3:var tt=3;break;default:tt=D}var ut=D;D=tt;try{return Ne()}finally{D=ut}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,tt){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var ut=D;D=Ne;try{return tt()}finally{D=ut}},e.unstable_scheduleCallback=function(Ne,tt,ut){var Ce=e.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Ce+ut:Ce):ut=Ce,Ne){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=ut+qe,Ne={id:E++,callback:tt,priorityLevel:Ne,startTime:ut,expirationTime:qe,sortIndex:-1},ut>Ce?(Ne.sortIndex=ut,t(A,Ne),n(P)===null&&Ne===n(A)&&(F?(K(ge),ge=-1):F=!0,lt(oe,ut-Ce))):(Ne.sortIndex=qe,t(P,Ne),G||j||(G=!0,st(Y))),Ne},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(Ne){var tt=D;return function(){var ut=D;D=tt;try{return Ne.apply(this,arguments)}finally{D=ut}}}})(S0)),S0}var gT;function lL(){return gT||(gT=1,w0.exports=sL()),w0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function cL(){if(yT)return So;yT=1;var e=u2(),t=lL();function n(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,S=1;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function f(h,g){p(h,g),p(h+"Capture",g)}function p(h,g){for(u[h]=g,h=0;h<g.length;h++)a.add(g[h])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},M={};function D(h){return P.call(M,h)?!0:P.call(E,h)?!1:A.test(h)?M[h]=!0:(E[h]=!0,!1)}function j(h,g,S,k){if(S!==null&&S.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return k?!1:S!==null?!S.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function G(h,g,S,k){if(g===null||typeof g>"u"||j(h,g,S,k))return!0;if(k)return!1;if(S!==null)switch(S.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function F(h,g,S,k,B,q,se){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=k,this.attributeNamespace=B,this.mustUseProperty=S,this.propertyName=h,this.type=g,this.sanitizeURL=q,this.removeEmptyString=se}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){$[h]=new F(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var g=h[0];$[g]=new F(g,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){$[h]=new F(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){$[h]=new F(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){$[h]=new F(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){$[h]=new F(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){$[h]=new F(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){$[h]=new F(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){$[h]=new F(h,5,!1,h.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function J(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var g=h.replace(K,J);$[g]=new F(g,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var g=h.replace(K,J);$[g]=new F(g,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var g=h.replace(K,J);$[g]=new F(g,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){$[h]=new F(h,1,!1,h.toLowerCase(),null,!1,!1)}),$.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){$[h]=new F(h,1,!1,h.toLowerCase(),null,!0,!0)});function ee(h,g,S,k){var B=$.hasOwnProperty(g)?$[g]:null;(B!==null?B.type!==0:k||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(G(g,S,B,k)&&(S=null),k||B===null?D(g)&&(S===null?h.removeAttribute(g):h.setAttribute(g,""+S)):B.mustUseProperty?h[B.propertyName]=S===null?B.type===3?!1:"":S:(g=B.attributeName,k=B.attributeNamespace,S===null?h.removeAttribute(g):(B=B.type,S=B===3||B===4&&S===!0?"":""+S,k?h.setAttributeNS(k,g,S):h.setAttribute(g,S))))}var oe=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),re=Symbol.for("react.portal"),ue=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Oe=Symbol.for("react.profiler"),We=Symbol.for("react.provider"),Re=Symbol.for("react.context"),Ve=Symbol.for("react.forward_ref"),Ye=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),lt=Symbol.for("react.offscreen"),Ne=Symbol.iterator;function tt(h){return h===null||typeof h!="object"?null:(h=Ne&&h[Ne]||h["@@iterator"],typeof h=="function"?h:null)}var ut=Object.assign,Ce;function qe(h){if(Ce===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);Ce=g&&g[1]||""}return`
`+Ce+h}var yt=!1;function Rt(h,g){if(!h||yt)return"";yt=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(it){var k=it}Reflect.construct(h,[],g)}else{try{g.call()}catch(it){k=it}h.call(g.prototype)}else{try{throw Error()}catch(it){k=it}h()}}catch(it){if(it&&k&&typeof it.stack=="string"){for(var B=it.stack.split(`
`),q=k.stack.split(`
`),se=B.length-1,Te=q.length-1;1<=se&&0<=Te&&B[se]!==q[Te];)Te--;for(;1<=se&&0<=Te;se--,Te--)if(B[se]!==q[Te]){if(se!==1||Te!==1)do if(se--,Te--,0>Te||B[se]!==q[Te]){var ze=`
`+B[se].replace(" at new "," at ");return h.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",h.displayName)),ze}while(1<=se&&0<=Te);break}}}finally{yt=!1,Error.prepareStackTrace=S}return(h=h?h.displayName||h.name:"")?qe(h):""}function $t(h){switch(h.tag){case 5:return qe(h.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return h=Rt(h.type,!1),h;case 11:return h=Rt(h.type.render,!1),h;case 1:return h=Rt(h.type,!0),h;default:return""}}function Wt(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case ue:return"Fragment";case re:return"Portal";case Oe:return"Profiler";case ge:return"StrictMode";case Ye:return"Suspense";case ot:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Re:return(h.displayName||"Context")+".Consumer";case We:return(h._context.displayName||"Context")+".Provider";case Ve:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case at:return g=h.displayName||null,g!==null?g:Wt(h.type)||"Memo";case st:g=h._payload,h=h._init;try{return Wt(h(g))}catch{}}return null}function er(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wt(g);case 8:return g===ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function tr(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function vt(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ft(h){var g=vt(h)?"checked":"value",S=Object.getOwnPropertyDescriptor(h.constructor.prototype,g),k=""+h[g];if(!h.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var B=S.get,q=S.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return B.call(this)},set:function(se){k=""+se,q.call(this,se)}}),Object.defineProperty(h,g,{enumerable:S.enumerable}),{getValue:function(){return k},setValue:function(se){k=""+se},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function ir(h){h._valueTracker||(h._valueTracker=Ft(h))}function pt(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var S=g.getValue(),k="";return h&&(k=vt(h)?h.checked?"true":"false":h.value),h=k,h!==S?(g.setValue(h),!0):!1}function dr(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function rr(h,g){var S=g.checked;return ut({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??h._wrapperState.initialChecked})}function qr(h,g){var S=g.defaultValue==null?"":g.defaultValue,k=g.checked!=null?g.checked:g.defaultChecked;S=tr(g.value!=null?g.value:S),h._wrapperState={initialChecked:k,initialValue:S,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function Hr(h,g){g=g.checked,g!=null&&ee(h,"checked",g,!1)}function vn(h,g){Hr(h,g);var S=tr(g.value),k=g.type;if(S!=null)k==="number"?(S===0&&h.value===""||h.value!=S)&&(h.value=""+S):h.value!==""+S&&(h.value=""+S);else if(k==="submit"||k==="reset"){h.removeAttribute("value");return}g.hasOwnProperty("value")?Xn(h,g.type,S):g.hasOwnProperty("defaultValue")&&Xn(h,g.type,tr(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(h.defaultChecked=!!g.defaultChecked)}function qn(h,g,S){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var k=g.type;if(!(k!=="submit"&&k!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+h._wrapperState.initialValue,S||g===h.value||(h.value=g),h.defaultValue=g}S=h.name,S!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,S!==""&&(h.name=S)}function Xn(h,g,S){(g!=="number"||dr(h.ownerDocument)!==h)&&(S==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+S&&(h.defaultValue=""+S))}var ki=Array.isArray;function On(h,g,S,k){if(h=h.options,g){g={};for(var B=0;B<S.length;B++)g["$"+S[B]]=!0;for(S=0;S<h.length;S++)B=g.hasOwnProperty("$"+h[S].value),h[S].selected!==B&&(h[S].selected=B),B&&k&&(h[S].defaultSelected=!0)}else{for(S=""+tr(S),g=null,B=0;B<h.length;B++){if(h[B].value===S){h[B].selected=!0,k&&(h[B].defaultSelected=!0);return}g!==null||h[B].disabled||(g=h[B])}g!==null&&(g.selected=!0)}}function ni(h,g){if(g.dangerouslySetInnerHTML!=null)throw Error(n(91));return ut({},g,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function oa(h,g){var S=g.value;if(S==null){if(S=g.children,g=g.defaultValue,S!=null){if(g!=null)throw Error(n(92));if(ki(S)){if(1<S.length)throw Error(n(93));S=S[0]}g=S}g==null&&(g=""),S=g}h._wrapperState={initialValue:tr(S)}}function Fa(h,g){var S=tr(g.value),k=tr(g.defaultValue);S!=null&&(S=""+S,S!==h.value&&(h.value=S),g.defaultValue==null&&h.defaultValue!==S&&(h.defaultValue=S)),k!=null&&(h.defaultValue=""+k)}function Pa(h){var g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function Ao(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oo(h,g){return h==null||h==="http://www.w3.org/1999/xhtml"?Ao(g):h==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Co,je=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,S,k,B){MSApp.execUnsafeLocalFunction(function(){return h(g,S,k,B)})}:h})(function(h,g){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=g;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Co.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;g.firstChild;)h.appendChild(g.firstChild)}});function ie(h,g){if(g){var S=h.firstChild;if(S&&S===h.lastChild&&S.nodeType===3){S.nodeValue=g;return}}h.textContent=g}var ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];Object.keys(ae).forEach(function(h){de.forEach(function(g){g=g+h.charAt(0).toUpperCase()+h.substring(1),ae[g]=ae[h]})});function Se(h,g,S){return g==null||typeof g=="boolean"||g===""?"":S||typeof g!="number"||g===0||ae.hasOwnProperty(h)&&ae[h]?(""+g).trim():g+"px"}function Ee(h,g){h=h.style;for(var S in g)if(g.hasOwnProperty(S)){var k=S.indexOf("--")===0,B=Se(S,g[S],k);S==="float"&&(S="cssFloat"),k?h.setProperty(S,B):h[S]=B}}var Le=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xe(h,g){if(g){if(Le[h]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(n(137,h));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(n(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(n(61))}if(g.style!=null&&typeof g.style!="object")throw Error(n(62))}}function $e(h,g){if(h.indexOf("-")===-1)return typeof g.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nt=null;function gt(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var ct=null,zt=null,Be=null;function sr(h){if(h=il(h)){if(typeof ct!="function")throw Error(n(280));var g=h.stateNode;g&&(g=au(g),ct(h.stateNode,h.type,g))}}function Cr(h){zt?Be?Be.push(h):Be=[h]:zt=h}function Ut(){if(zt){var h=zt,g=Be;if(Be=zt=null,sr(h),g)for(h=0;h<g.length;h++)sr(g[h])}}function pr(h,g){return h(g)}function en(){}var Rn=!1;function Gn(h,g,S){if(Rn)return h(g,S);Rn=!0;try{return pr(h,g,S)}finally{Rn=!1,(zt!==null||Be!==null)&&(en(),Ut())}}function gn(h,g){var S=h.stateNode;if(S===null)return null;var k=au(S);if(k===null)return null;S=k[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(S&&typeof S!="function")throw Error(n(231,g,typeof S));return S}var br=!1;if(s)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){br=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{br=!1}function Wn(h,g,S,k,B,q,se,Te,ze){var it=Array.prototype.slice.call(arguments,3);try{g.apply(S,it)}catch(bt){this.onError(bt)}}var _t=!1,Kn=null,cn=!1,so=null,Dl={onError:function(h){_t=!0,Kn=h}};function Ot(h,g,S,k,B,q,se,Te,ze){_t=!1,Kn=null,Wn.apply(Dl,arguments)}function Mr(h,g,S,k,B,q,se,Te,ze){if(Ot.apply(this,arguments),_t){if(_t){var it=Kn;_t=!1,Kn=null}else throw Error(n(198));cn||(cn=!0,so=it)}}function cr(h){var g=h,S=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(S=g.return),h=g.return;while(h)}return g.tag===3?S:null}function ii(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function is(h){if(cr(h)!==h)throw Error(n(188))}function as(h){var g=h.alternate;if(!g){if(g=cr(h),g===null)throw Error(n(188));return g!==h?null:h}for(var S=h,k=g;;){var B=S.return;if(B===null)break;var q=B.alternate;if(q===null){if(k=B.return,k!==null){S=k;continue}break}if(B.child===q.child){for(q=B.child;q;){if(q===S)return is(B),h;if(q===k)return is(B),g;q=q.sibling}throw Error(n(188))}if(S.return!==k.return)S=B,k=q;else{for(var se=!1,Te=B.child;Te;){if(Te===S){se=!0,S=B,k=q;break}if(Te===k){se=!0,k=B,S=q;break}Te=Te.sibling}if(!se){for(Te=q.child;Te;){if(Te===S){se=!0,S=q,k=B;break}if(Te===k){se=!0,k=q,S=B;break}Te=Te.sibling}if(!se)throw Error(n(189))}}if(S.alternate!==k)throw Error(n(190))}if(S.tag!==3)throw Error(n(188));return S.stateNode.current===S?h:g}function gr(h){return h=as(h),h!==null?Rc(h):null}function Rc(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=Rc(h);if(g!==null)return g;h=h.sibling}return null}var Eo=t.unstable_scheduleCallback,Dc=t.unstable_cancelCallback,lo=t.unstable_shouldYield,zl=t.unstable_requestPaint,wr=t.unstable_now,$u=t.unstable_getCurrentPriorityLevel,mi=t.unstable_ImmediatePriority,Kr=t.unstable_UserBlockingPriority,zc=t.unstable_NormalPriority,jc=t.unstable_LowPriority,Uu=t.unstable_IdlePriority,$a=null,ui=null;function Lh(h){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot($a,h,void 0,(h.current.flags&128)===128)}catch{}}var Ta=Math.clz32?Math.clz32:nf,rf=Math.log,jl=Math.LN2;function nf(h){return h>>>=0,h===0?32:31-(rf(h)/jl|0)|0}var Vu=64,qu=4194304;function Lc(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Ll(h,g){var S=h.pendingLanes;if(S===0)return 0;var k=0,B=h.suspendedLanes,q=h.pingedLanes,se=S&268435455;if(se!==0){var Te=se&~B;Te!==0?k=Lc(Te):(q&=se,q!==0&&(k=Lc(q)))}else se=S&~B,se!==0?k=Lc(se):q!==0&&(k=Lc(q));if(k===0)return 0;if(g!==0&&g!==k&&(g&B)===0&&(B=k&-k,q=g&-g,B>=q||B===16&&(q&4194240)!==0))return g;if((k&4)!==0&&(k|=S&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=k;0<g;)S=31-Ta(g),B=1<<S,k|=h[S],g&=~B;return k}function Nl(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nh(h,g){for(var S=h.suspendedLanes,k=h.pingedLanes,B=h.expirationTimes,q=h.pendingLanes;0<q;){var se=31-Ta(q),Te=1<<se,ze=B[se];ze===-1?((Te&S)===0||(Te&k)!==0)&&(B[se]=Nl(Te,g)):ze<=g&&(h.expiredLanes|=Te),q&=~Te}}function Nc(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Vs(){var h=Vu;return Vu<<=1,(Vu&4194240)===0&&(Vu=64),h}function Bc(h){for(var g=[],S=0;31>S;S++)g.push(h);return g}function qs(h,g,S){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-Ta(g),h[g]=S}function Jp(h,g){var S=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var k=h.eventTimes;for(h=h.expirationTimes;0<S;){var B=31-Ta(S),q=1<<B;g[B]=0,k[B]=-1,h[B]=-1,S&=~q}}function os(h,g){var S=h.entangledLanes|=g;for(h=h.entanglements;S;){var k=31-Ta(S),B=1<<k;B&g|h[k]&g&&(h[k]|=g),S&=~B}}var $r=0;function Aa(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Sr,Mo,ko,co,ss,_r=!1,uo=[],Ua=null,Va=null,Sn=null,Pn=new Map,Yn=new Map,on=[],tn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bh(h,g){switch(h){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Pn.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(g.pointerId)}}function Jn(h,g,S,k,B,q){return h===null||h.nativeEvent!==q?(h={blockedOn:g,domEventName:S,eventSystemFlags:k,nativeEvent:q,targetContainers:[B]},g!==null&&(g=il(g),g!==null&&Mo(g)),h):(h.eventSystemFlags|=k,g=h.targetContainers,B!==null&&g.indexOf(B)===-1&&g.push(B),h)}function sa(h,g,S,k,B){switch(g){case"focusin":return Ua=Jn(Ua,h,g,S,k,B),!0;case"dragenter":return Va=Jn(Va,h,g,S,k,B),!0;case"mouseover":return Sn=Jn(Sn,h,g,S,k,B),!0;case"pointerover":var q=B.pointerId;return Pn.set(q,Jn(Pn.get(q)||null,h,g,S,k,B)),!0;case"gotpointercapture":return q=B.pointerId,Yn.set(q,Jn(Yn.get(q)||null,h,g,S,k,B)),!0}return!1}function hi(h){var g=Xa(h.target);if(g!==null){var S=cr(g);if(S!==null){if(g=S.tag,g===13){if(g=ii(S),g!==null){h.blockedOn=g,ss(h.priority,function(){ko(S)});return}}else if(g===3&&S.stateNode.current.memoizedState.isDehydrated){h.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Yr(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var S=cs(h.domEventName,h.eventSystemFlags,g[0],h.nativeEvent);if(S===null){S=h.nativeEvent;var k=new S.constructor(S.type,S);nt=k,S.target.dispatchEvent(k),nt=null}else return g=il(S),g!==null&&Mo(g),h.blockedOn=S,!1;g.shift()}return!0}function ls(h,g,S){Yr(h)&&S.delete(g)}function nr(){_r=!1,Ua!==null&&Yr(Ua)&&(Ua=null),Va!==null&&Yr(Va)&&(Va=null),Sn!==null&&Yr(Sn)&&(Sn=null),Pn.forEach(ls),Yn.forEach(ls)}function lr(h,g){h.blockedOn===g&&(h.blockedOn=null,_r||(_r=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nr)))}function la(h){function g(B){return lr(B,h)}if(0<uo.length){lr(uo[0],h);for(var S=1;S<uo.length;S++){var k=uo[S];k.blockedOn===h&&(k.blockedOn=null)}}for(Ua!==null&&lr(Ua,h),Va!==null&&lr(Va,h),Sn!==null&&lr(Sn,h),Pn.forEach(g),Yn.forEach(g),S=0;S<on.length;S++)k=on[S],k.blockedOn===h&&(k.blockedOn=null);for(;0<on.length&&(S=on[0],S.blockedOn===null);)hi(S),S.blockedOn===null&&on.shift()}var Pr=oe.ReactCurrentBatchConfig,gi=!0;function ho(h,g,S,k){var B=$r,q=Pr.transition;Pr.transition=null;try{$r=1,Bl(h,g,S,k)}finally{$r=B,Pr.transition=q}}function fo(h,g,S,k){var B=$r,q=Pr.transition;Pr.transition=null;try{$r=4,Bl(h,g,S,k)}finally{$r=B,Pr.transition=q}}function Bl(h,g,S,k){if(gi){var B=cs(h,g,S,k);if(B===null)Js(h,g,k,Fl,S),Bh(h,k);else if(sa(B,h,g,S,k))k.stopPropagation();else if(Bh(h,k),g&4&&-1<tn.indexOf(h)){for(;B!==null;){var q=il(B);if(q!==null&&Sr(q),q=cs(h,g,S,k),q===null&&Js(h,g,k,Fl,S),q===B)break;B=q}B!==null&&k.stopPropagation()}else Js(h,g,k,null,S)}}var Fl=null;function cs(h,g,S,k){if(Fl=null,h=gt(k),h=Xa(h),h!==null)if(g=cr(h),g===null)h=null;else if(S=g.tag,S===13){if(h=ii(g),h!==null)return h;h=null}else if(S===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null);return Fl=h,null}function $l(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($u()){case mi:return 1;case Kr:return 4;case zc:case jc:return 16;case Uu:return 536870912;default:return 16}default:return 16}}var qa=null,Ul=null,Gs=null;function Ca(){if(Gs)return Gs;var h,g=Ul,S=g.length,k,B="value"in qa?qa.value:qa.textContent,q=B.length;for(h=0;h<S&&g[h]===B[h];h++);var se=S-h;for(k=1;k<=se&&g[S-k]===B[q-k];k++);return Gs=B.slice(h,1<k?1-k:void 0)}function Dn(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function Io(){return!0}function Vl(){return!1}function Qn(h){function g(S,k,B,q,se){this._reactName=S,this._targetInst=B,this.type=k,this.nativeEvent=q,this.target=se,this.currentTarget=null;for(var Te in h)h.hasOwnProperty(Te)&&(S=h[Te],this[Te]=S?S(q):q[Te]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Io:Vl,this.isPropagationStopped=Vl,this}return ut(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),g}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gu=Qn(sn),Oo=ut({},sn,{view:0,detail:0}),Fh=Qn(Oo),$h,us,zn,hs=ut({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ql,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==zn&&(zn&&h.type==="mousemove"?($h=h.screenX-zn.screenX,us=h.screenY-zn.screenY):us=$h=0,zn=h),$h)},movementY:function(h){return"movementY"in h?h.movementY:us}}),Ga=Qn(hs),Fc=ut({},hs,{dataTransfer:0}),$c=Qn(Fc),Uc=ut({},Oo,{relatedTarget:0}),ai=Qn(Uc),af=ut({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=Qn(af),Qp=ut({},sn,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Uh=Qn(Qp),em=ut({},sn,{data:0}),of=Qn(em),Hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ws={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qh(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=Ws[h])?!!g[h]:!1}function ql(){return qh}var Wa=ut({},Oo,{key:function(h){if(h.key){var g=Hu[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=Dn(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Vh[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ql,charCode:function(h){return h.type==="keypress"?Dn(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Dn(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),tm=Qn(Wa),Zu=ut({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gl=Qn(Zu),Vc=ut({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ql}),rm=Qn(Vc),Xu=ut({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),nm=Qn(Xu),Hs=ut({},hs,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),sf=Qn(Hs),Gh=[9,13,27,32],Wh=s&&"CompositionEvent"in window,Wl=null;s&&"documentMode"in document&&(Wl=document.documentMode);var Hh=s&&"TextEvent"in window&&!Wl,Zh=s&&(!Wh||Wl&&8<Wl&&11>=Wl),qc=" ",Xh=!1;function Kh(h,g){switch(h){case"keyup":return Gh.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ds(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var fs=!1;function Yh(h,g){switch(h){case"compositionend":return ds(g);case"keypress":return g.which!==32?null:(Xh=!0,qc);case"textInput":return h=g.data,h===qc&&Xh?null:h;default:return null}}function Gc(h,g){if(fs)return h==="compositionend"||!Wh&&Kh(h,g)?(h=Ca(),Gs=Ul=qa=null,fs=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Zh&&g.locale!=="ko"?null:g.data;default:return null}}var im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hl(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!im[h.type]:g==="textarea"}function Jh(h,g,S,k){Cr(k),g=eu(g,"onChange"),0<g.length&&(S=new Gu("onChange","change",null,S,k),h.push({event:S,listeners:g}))}var Wc=null,Zl=null;function lf(h){df(h,0)}function Xl(h){var g=al(h);if(pt(g))return h}function Qh(h,g){if(h==="change")return g}var ed=!1;if(s){var Kl;if(s){var Ha="oninput"in document;if(!Ha){var zr=document.createElement("div");zr.setAttribute("oninput","return;"),Ha=typeof zr.oninput=="function"}Kl=Ha}else Kl=!1;ed=Kl&&(!document.documentMode||9<document.documentMode)}function Ku(){Wc&&(Wc.detachEvent("onpropertychange",Yu),Zl=Wc=null)}function Yu(h){if(h.propertyName==="value"&&Xl(Zl)){var g=[];Jh(g,Zl,h,gt(h)),Gn(lf,g)}}function cf(h,g,S){h==="focusin"?(Ku(),Wc=g,Zl=S,Wc.attachEvent("onpropertychange",Yu)):h==="focusout"&&Ku()}function td(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Xl(Zl)}function Zs(h,g){if(h==="click")return Xl(g)}function rd(h,g){if(h==="input"||h==="change")return Xl(g)}function am(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var Za=typeof Object.is=="function"?Object.is:am;function Hc(h,g){if(Za(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var S=Object.keys(h),k=Object.keys(g);if(S.length!==k.length)return!1;for(k=0;k<S.length;k++){var B=S[k];if(!P.call(g,B)||!Za(h[B],g[B]))return!1}return!0}function uf(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function nd(h,g){var S=uf(h);h=0;for(var k;S;){if(S.nodeType===3){if(k=h+S.textContent.length,h<=g&&k>=g)return{node:S,offset:g-h};h=k}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=uf(S)}}function hf(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?hf(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function id(){for(var h=window,g=dr();g instanceof h.HTMLIFrameElement;){try{var S=typeof g.contentWindow.location.href=="string"}catch{S=!1}if(S)h=g.contentWindow;else break;g=dr(h.document)}return g}function Yl(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}function Ju(h){var g=id(),S=h.focusedElem,k=h.selectionRange;if(g!==S&&S&&S.ownerDocument&&hf(S.ownerDocument.documentElement,S)){if(k!==null&&Yl(S)){if(g=k.start,h=k.end,h===void 0&&(h=g),"selectionStart"in S)S.selectionStart=g,S.selectionEnd=Math.min(h,S.value.length);else if(h=(g=S.ownerDocument||document)&&g.defaultView||window,h.getSelection){h=h.getSelection();var B=S.textContent.length,q=Math.min(k.start,B);k=k.end===void 0?q:Math.min(k.end,B),!h.extend&&q>k&&(B=k,k=q,q=B),B=nd(S,q);var se=nd(S,k);B&&se&&(h.rangeCount!==1||h.anchorNode!==B.node||h.anchorOffset!==B.offset||h.focusNode!==se.node||h.focusOffset!==se.offset)&&(g=g.createRange(),g.setStart(B.node,B.offset),h.removeAllRanges(),q>k?(h.addRange(g),h.extend(se.node,se.offset)):(g.setEnd(se.node,se.offset),h.addRange(g)))}}for(g=[],h=S;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<g.length;S++)h=g[S],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Qu=s&&"documentMode"in document&&11>=document.documentMode,ps=null,Ro=null,Do=null,ms=!1;function ca(h,g,S){var k=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;ms||ps==null||ps!==dr(k)||(k=ps,"selectionStart"in k&&Yl(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Do&&Hc(Do,k)||(Do=k,k=eu(Ro,"onSelect"),0<k.length&&(g=new Gu("onSelect","select",null,g,S),h.push({event:g,listeners:k}),g.target=ps)))}function Zc(h,g){var S={};return S[h.toLowerCase()]=g.toLowerCase(),S["Webkit"+h]="webkit"+g,S["Moz"+h]="moz"+g,S}var Xs={animationend:Zc("Animation","AnimationEnd"),animationiteration:Zc("Animation","AnimationIteration"),animationstart:Zc("Animation","AnimationStart"),transitionend:Zc("Transition","TransitionEnd")},Xc={},gs={};s&&(gs=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function Ks(h){if(Xc[h])return Xc[h];if(!Xs[h])return h;var g=Xs[h],S;for(S in g)if(g.hasOwnProperty(S)&&S in gs)return Xc[h]=g[S];return h}var Kc=Ks("animationend"),Jl=Ks("animationiteration"),Yc=Ks("animationstart"),ad=Ks("transitionend"),Ys=new Map,zo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(h,g){Ys.set(h,g),f(g,[h])}for(var Jc=0;Jc<zo.length;Jc++){var Tr=zo[Jc],Qc=Tr.toLowerCase(),om=Tr[0].toUpperCase()+Tr.slice(1);jo(Qc,"on"+om)}jo(Kc,"onAnimationEnd"),jo(Jl,"onAnimationIteration"),jo(Yc,"onAnimationStart"),jo("dblclick","onDoubleClick"),jo("focusin","onFocus"),jo("focusout","onBlur"),jo(ad,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ys=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function od(h,g,S){var k=h.type||"unknown-event";h.currentTarget=S,Mr(k,g,void 0,h),h.currentTarget=null}function df(h,g){g=(g&4)!==0;for(var S=0;S<h.length;S++){var k=h[S],B=k.event;k=k.listeners;e:{var q=void 0;if(g)for(var se=k.length-1;0<=se;se--){var Te=k[se],ze=Te.instance,it=Te.currentTarget;if(Te=Te.listener,ze!==q&&B.isPropagationStopped())break e;od(B,Te,it),q=ze}else for(se=0;se<k.length;se++){if(Te=k[se],ze=Te.instance,it=Te.currentTarget,Te=Te.listener,ze!==q&&B.isPropagationStopped())break e;od(B,Te,it),q=ze}}}if(cn)throw h=so,cn=!1,so=null,h}function un(h,g){var S=g[iu];S===void 0&&(S=g[iu]=new Set);var k=h+"__bubble";S.has(k)||(tc(g,h,2,!1),S.add(k))}function sd(h,g,S){var k=0;g&&(k|=4),tc(S,h,k,g)}var ec="_reactListening"+Math.random().toString(36).slice(2);function vs(h){if(!h[ec]){h[ec]=!0,a.forEach(function(S){S!=="selectionchange"&&(ys.has(S)||sd(S,!1,h),sd(S,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[ec]||(g[ec]=!0,sd("selectionchange",!1,g))}}function tc(h,g,S,k){switch($l(g)){case 1:var B=ho;break;case 4:B=fo;break;default:B=Bl}S=B.bind(null,g,S,h),B=void 0,!br||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(B=!0),k?B!==void 0?h.addEventListener(g,S,{capture:!0,passive:B}):h.addEventListener(g,S,!0):B!==void 0?h.addEventListener(g,S,{passive:B}):h.addEventListener(g,S,!1)}function Js(h,g,S,k,B){var q=k;if((g&1)===0&&(g&2)===0&&k!==null)e:for(;;){if(k===null)return;var se=k.tag;if(se===3||se===4){var Te=k.stateNode.containerInfo;if(Te===B||Te.nodeType===8&&Te.parentNode===B)break;if(se===4)for(se=k.return;se!==null;){var ze=se.tag;if((ze===3||ze===4)&&(ze=se.stateNode.containerInfo,ze===B||ze.nodeType===8&&ze.parentNode===B))return;se=se.return}for(;Te!==null;){if(se=Xa(Te),se===null)return;if(ze=se.tag,ze===5||ze===6){k=q=se;continue e}Te=Te.parentNode}}k=k.return}Gn(function(){var it=q,bt=gt(S),Tt=[];e:{var xt=Ys.get(h);if(xt!==void 0){var Nt=Gu,Ht=h;switch(h){case"keypress":if(Dn(S)===0)break e;case"keydown":case"keyup":Nt=tm;break;case"focusin":Ht="focus",Nt=ai;break;case"focusout":Ht="blur",Nt=ai;break;case"beforeblur":case"afterblur":Nt=ai;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=Ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=$c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=rm;break;case Kc:case Jl:case Yc:Nt=Wu;break;case ad:Nt=nm;break;case"scroll":Nt=Fh;break;case"wheel":Nt=sf;break;case"copy":case"cut":case"paste":Nt=Uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Gl}var Xt=(g&4)!==0,Hn=!Xt&&h==="scroll",Je=Xt?xt!==null?xt+"Capture":null:xt;Xt=[];for(var Fe=it,Qe;Fe!==null;){Qe=Fe;var kt=Qe.stateNode;if(Qe.tag===5&&kt!==null&&(Qe=kt,Je!==null&&(kt=gn(Fe,Je),kt!=null&&Xt.push(Qs(Fe,kt,Qe)))),Hn)break;Fe=Fe.return}0<Xt.length&&(xt=new Nt(xt,Ht,null,S,bt),Tt.push({event:xt,listeners:Xt}))}}if((g&7)===0){e:{if(xt=h==="mouseover"||h==="pointerover",Nt=h==="mouseout"||h==="pointerout",xt&&S!==nt&&(Ht=S.relatedTarget||S.fromElement)&&(Xa(Ht)||Ht[Ma]))break e;if((Nt||xt)&&(xt=bt.window===bt?bt:(xt=bt.ownerDocument)?xt.defaultView||xt.parentWindow:window,Nt?(Ht=S.relatedTarget||S.toElement,Nt=it,Ht=Ht?Xa(Ht):null,Ht!==null&&(Hn=cr(Ht),Ht!==Hn||Ht.tag!==5&&Ht.tag!==6)&&(Ht=null)):(Nt=null,Ht=it),Nt!==Ht)){if(Xt=Ga,kt="onMouseLeave",Je="onMouseEnter",Fe="mouse",(h==="pointerout"||h==="pointerover")&&(Xt=Gl,kt="onPointerLeave",Je="onPointerEnter",Fe="pointer"),Hn=Nt==null?xt:al(Nt),Qe=Ht==null?xt:al(Ht),xt=new Xt(kt,Fe+"leave",Nt,S,bt),xt.target=Hn,xt.relatedTarget=Qe,kt=null,Xa(bt)===it&&(Xt=new Xt(Je,Fe+"enter",Ht,S,bt),Xt.target=Qe,Xt.relatedTarget=Hn,kt=Xt),Hn=kt,Nt&&Ht)t:{for(Xt=Nt,Je=Ht,Fe=0,Qe=Xt;Qe;Qe=po(Qe))Fe++;for(Qe=0,kt=Je;kt;kt=po(kt))Qe++;for(;0<Fe-Qe;)Xt=po(Xt),Fe--;for(;0<Qe-Fe;)Je=po(Je),Qe--;for(;Fe--;){if(Xt===Je||Je!==null&&Xt===Je.alternate)break t;Xt=po(Xt),Je=po(Je)}Xt=null}else Xt=null;Nt!==null&&rc(Tt,xt,Nt,Xt,!1),Ht!==null&&Hn!==null&&rc(Tt,Hn,Ht,Xt,!0)}}e:{if(xt=it?al(it):window,Nt=xt.nodeName&&xt.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&xt.type==="file")var Kt=Qh;else if(Hl(xt))if(ed)Kt=rd;else{Kt=td;var ur=cf}else(Nt=xt.nodeName)&&Nt.toLowerCase()==="input"&&(xt.type==="checkbox"||xt.type==="radio")&&(Kt=Zs);if(Kt&&(Kt=Kt(h,it))){Jh(Tt,Kt,S,bt);break e}ur&&ur(h,xt,it),h==="focusout"&&(ur=xt._wrapperState)&&ur.controlled&&xt.type==="number"&&Xn(xt,"number",xt.value)}switch(ur=it?al(it):window,h){case"focusin":(Hl(ur)||ur.contentEditable==="true")&&(ps=ur,Ro=it,Do=null);break;case"focusout":Do=Ro=ps=null;break;case"mousedown":ms=!0;break;case"contextmenu":case"mouseup":case"dragend":ms=!1,ca(Tt,S,bt);break;case"selectionchange":if(Qu)break;case"keydown":case"keyup":ca(Tt,S,bt)}var ar;if(Wh)e:{switch(h){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else fs?Kh(h,S)&&(mr="onCompositionEnd"):h==="keydown"&&S.keyCode===229&&(mr="onCompositionStart");mr&&(Zh&&S.locale!=="ko"&&(fs||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&fs&&(ar=Ca()):(qa=bt,Ul="value"in qa?qa.value:qa.textContent,fs=!0)),ur=eu(it,mr),0<ur.length&&(mr=new of(mr,h,null,S,bt),Tt.push({event:mr,listeners:ur}),ar?mr.data=ar:(ar=ds(S),ar!==null&&(mr.data=ar)))),(ar=Hh?Yh(h,S):Gc(h,S))&&(it=eu(it,"onBeforeInput"),0<it.length&&(bt=new of("onBeforeInput","beforeinput",null,S,bt),Tt.push({event:bt,listeners:it}),bt.data=ar))}df(Tt,g)})}function Qs(h,g,S){return{instance:h,listener:g,currentTarget:S}}function eu(h,g){for(var S=g+"Capture",k=[];h!==null;){var B=h,q=B.stateNode;B.tag===5&&q!==null&&(B=q,q=gn(h,S),q!=null&&k.unshift(Qs(h,q,B)),q=gn(h,g),q!=null&&k.push(Qs(h,q,B))),h=h.return}return k}function po(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function rc(h,g,S,k,B){for(var q=g._reactName,se=[];S!==null&&S!==k;){var Te=S,ze=Te.alternate,it=Te.stateNode;if(ze!==null&&ze===k)break;Te.tag===5&&it!==null&&(Te=it,B?(ze=gn(S,q),ze!=null&&se.unshift(Qs(S,ze,Te))):B||(ze=gn(S,q),ze!=null&&se.push(Qs(S,ze,Te)))),S=S.return}se.length!==0&&h.push({event:g,listeners:se})}var tu=/\r\n?/g,el=/\u0000|\uFFFD/g;function nc(h){return(typeof h=="string"?h:""+h).replace(tu,`
`).replace(el,"")}function ic(h,g,S){if(g=nc(g),nc(h)!==g&&S)throw Error(n(425))}function mo(){}var ru=null,tl=null;function ac(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var nu=typeof setTimeout=="function"?setTimeout:void 0,ff=typeof clearTimeout=="function"?clearTimeout:void 0,ld=typeof Promise=="function"?Promise:void 0,eh=typeof queueMicrotask=="function"?queueMicrotask:typeof ld<"u"?function(h){return ld.resolve(null).then(h).catch(cd)}:nu;function cd(h){setTimeout(function(){throw h})}function th(h,g){var S=g,k=0;do{var B=S.nextSibling;if(h.removeChild(S),B&&B.nodeType===8)if(S=B.data,S==="/$"){if(k===0){h.removeChild(B),la(g);return}k--}else S!=="$"&&S!=="$?"&&S!=="$!"||k++;S=B}while(S);la(g)}function go(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return h}function hn(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var S=h.data;if(S==="$"||S==="$!"||S==="$?"){if(g===0)return h;g--}else S==="/$"&&g++}h=h.previousSibling}return null}var Ea=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Ea,_s="__reactProps$"+Ea,Ma="__reactContainer$"+Ea,iu="__reactEvents$"+Ea,rl="__reactListeners$"+Ea,nl="__reactHandles$"+Ea;function Xa(h){var g=h[Tn];if(g)return g;for(var S=h.parentNode;S;){if(g=S[Ma]||S[Tn]){if(S=g.alternate,g.child!==null||S!==null&&S.child!==null)for(h=hn(h);h!==null;){if(S=h[Tn])return S;h=hn(h)}return g}h=S,S=h.parentNode}return null}function il(h){return h=h[Tn]||h[Ma],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function al(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(n(33))}function au(h){return h[_s]||null}var rh=[],ol=-1;function ua(h){return{current:h}}function jr(h){0>ol||(h.current=rh[ol],rh[ol]=null,ol--)}function Ir(h,g){ol++,rh[ol]=h.current,h.current=g}var ha={},oi=ua(ha),Ii=ua(!1),xs=ha;function Ka(h,g){var S=h.type.contextTypes;if(!S)return ha;var k=h.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===g)return k.__reactInternalMemoizedMaskedChildContext;var B={},q;for(q in S)B[q]=g[q];return k&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=B),B}function yi(h){return h=h.childContextTypes,h!=null}function sl(){jr(Ii),jr(oi)}function ou(h,g,S){if(oi.current!==ha)throw Error(n(168));Ir(oi,g),Ir(Ii,S)}function su(h,g,S){var k=h.stateNode;if(g=g.childContextTypes,typeof k.getChildContext!="function")return S;k=k.getChildContext();for(var B in k)if(!(B in g))throw Error(n(108,er(h)||"Unknown",B));return ut({},S,k)}function Oi(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||ha,xs=oi.current,Ir(oi,h),Ir(Ii,Ii.current),!0}function vi(h,g,S){var k=h.stateNode;if(!k)throw Error(n(169));S?(h=su(h,g,xs),k.__reactInternalMemoizedMergedChildContext=h,jr(Ii),jr(oi),Ir(oi,h)):jr(Ii),Ir(Ii,S)}var yo=null,Xi=!1,bs=!1;function oc(h){yo===null?yo=[h]:yo.push(h)}function sm(h){Xi=!0,oc(h)}function ws(){if(!bs&&yo!==null){bs=!0;var h=0,g=$r;try{var S=yo;for($r=1;h<S.length;h++){var k=S[h];do k=k(!0);while(k!==null)}yo=null,Xi=!1}catch(B){throw yo!==null&&(yo=yo.slice(h+1)),Eo(mi,ws),B}finally{$r=g,bs=!1}}return null}var Lo=[],ll=0,vo=null,Ri=0,At=[],Ki=0,_o=null,Ya=1,Di="";function ka(h,g){Lo[ll++]=Ri,Lo[ll++]=vo,vo=h,Ri=g}function nh(h,g,S){At[Ki++]=Ya,At[Ki++]=Di,At[Ki++]=_o,_o=h;var k=Ya;h=Di;var B=32-Ta(k)-1;k&=~(1<<B),S+=1;var q=32-Ta(g)+B;if(30<q){var se=B-B%5;q=(k&(1<<se)-1).toString(32),k>>=se,B-=se,Ya=1<<32-Ta(g)+B|S<<B|k,Di=q+h}else Ya=1<<q|S<<B|k,Di=h}function Ar(h){h.return!==null&&(ka(h,1),nh(h,1,0))}function lu(h){for(;h===vo;)vo=Lo[--ll],Lo[ll]=null,Ri=Lo[--ll],Lo[ll]=null;for(;h===_o;)_o=At[--Ki],At[Ki]=null,Di=At[--Ki],At[Ki]=null,Ya=At[--Ki],At[Ki]=null}var Yi=null,zi=null,yn=!1,Ia=null;function ud(h,g){var S=Qa(5,null,null,0);S.elementType="DELETED",S.stateNode=g,S.return=h,g=h.deletions,g===null?(h.deletions=[S],h.flags|=16):g.push(S)}function ih(h,g){switch(h.tag){case 5:var S=h.type;return g=g.nodeType!==1||S.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(h.stateNode=g,Yi=h,zi=go(g.firstChild),!0):!1;case 6:return g=h.pendingProps===""||g.nodeType!==3?null:g,g!==null?(h.stateNode=g,Yi=h,zi=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(S=_o!==null?{id:Ya,overflow:Di}:null,h.memoizedState={dehydrated:g,treeContext:S,retryLane:1073741824},S=Qa(18,null,null,0),S.stateNode=g,S.return=h,h.child=S,Yi=h,zi=null,!0):!1;default:return!1}}function cu(h){return(h.mode&1)!==0&&(h.flags&128)===0}function ah(h){if(yn){var g=zi;if(g){var S=g;if(!ih(h,g)){if(cu(h))throw Error(n(418));g=go(S.nextSibling);var k=Yi;g&&ih(h,g)?ud(k,S):(h.flags=h.flags&-4097|2,yn=!1,Yi=h)}}else{if(cu(h))throw Error(n(418));h.flags=h.flags&-4097|2,yn=!1,Yi=h}}}function oh(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Yi=h}function uu(h){if(h!==Yi)return!1;if(!yn)return oh(h),yn=!0,!1;var g;if((g=h.tag!==3)&&!(g=h.tag!==5)&&(g=h.type,g=g!=="head"&&g!=="body"&&!ac(h.type,h.memoizedProps)),g&&(g=zi)){if(cu(h))throw hu(),Error(n(418));for(;g;)ud(h,g),g=go(g.nextSibling)}if(oh(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));e:{for(h=h.nextSibling,g=0;h;){if(h.nodeType===8){var S=h.data;if(S==="/$"){if(g===0){zi=go(h.nextSibling);break e}g--}else S!=="$"&&S!=="$!"&&S!=="$?"||g++}h=h.nextSibling}zi=null}}else zi=Yi?go(h.stateNode.nextSibling):null;return!0}function hu(){for(var h=zi;h;)h=go(h.nextSibling)}function da(){zi=Yi=null,yn=!1}function Gr(h){Ia===null?Ia=[h]:Ia.push(h)}var lm=oe.ReactCurrentBatchConfig;function Ss(h,g,S){if(h=S.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(n(309));var k=S.stateNode}if(!k)throw Error(n(147,h));var B=k,q=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===q?g.ref:(g=function(se){var Te=B.refs;se===null?delete Te[q]:Te[q]=se},g._stringRef=q,g)}if(typeof h!="string")throw Error(n(284));if(!S._owner)throw Error(n(290,h))}return h}function cl(h,g){throw h=Object.prototype.toString.call(g),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function sh(h){var g=h._init;return g(h._payload)}function lh(h){function g(Je,Fe){if(h){var Qe=Je.deletions;Qe===null?(Je.deletions=[Fe],Je.flags|=16):Qe.push(Fe)}}function S(Je,Fe){if(!h)return null;for(;Fe!==null;)g(Je,Fe),Fe=Fe.sibling;return null}function k(Je,Fe){for(Je=new Map;Fe!==null;)Fe.key!==null?Je.set(Fe.key,Fe):Je.set(Fe.index,Fe),Fe=Fe.sibling;return Je}function B(Je,Fe){return Je=wo(Je,Fe),Je.index=0,Je.sibling=null,Je}function q(Je,Fe,Qe){return Je.index=Qe,h?(Qe=Je.alternate,Qe!==null?(Qe=Qe.index,Qe<Fe?(Je.flags|=2,Fe):Qe):(Je.flags|=2,Fe)):(Je.flags|=1048576,Fe)}function se(Je){return h&&Je.alternate===null&&(Je.flags|=2),Je}function Te(Je,Fe,Qe,kt){return Fe===null||Fe.tag!==6?(Fe=Rf(Qe,Je.mode,kt),Fe.return=Je,Fe):(Fe=B(Fe,Qe),Fe.return=Je,Fe)}function ze(Je,Fe,Qe,kt){var Kt=Qe.type;return Kt===ue?bt(Je,Fe,Qe.props.children,kt,Qe.key):Fe!==null&&(Fe.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===st&&sh(Kt)===Fe.type)?(kt=B(Fe,Qe.props),kt.ref=Ss(Je,Fe,Qe),kt.return=Je,kt):(kt=$n(Qe.type,Qe.key,Qe.props,null,Je.mode,kt),kt.ref=Ss(Je,Fe,Qe),kt.return=Je,kt)}function it(Je,Fe,Qe,kt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Qe.containerInfo||Fe.stateNode.implementation!==Qe.implementation?(Fe=Sd(Qe,Je.mode,kt),Fe.return=Je,Fe):(Fe=B(Fe,Qe.children||[]),Fe.return=Je,Fe)}function bt(Je,Fe,Qe,kt,Kt){return Fe===null||Fe.tag!==7?(Fe=bl(Qe,Je.mode,kt,Kt),Fe.return=Je,Fe):(Fe=B(Fe,Qe),Fe.return=Je,Fe)}function Tt(Je,Fe,Qe){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Fe=Rf(""+Fe,Je.mode,Qe),Fe.return=Je,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case Y:return Qe=$n(Fe.type,Fe.key,Fe.props,null,Je.mode,Qe),Qe.ref=Ss(Je,null,Fe),Qe.return=Je,Qe;case re:return Fe=Sd(Fe,Je.mode,Qe),Fe.return=Je,Fe;case st:var kt=Fe._init;return Tt(Je,kt(Fe._payload),Qe)}if(ki(Fe)||tt(Fe))return Fe=bl(Fe,Je.mode,Qe,null),Fe.return=Je,Fe;cl(Je,Fe)}return null}function xt(Je,Fe,Qe,kt){var Kt=Fe!==null?Fe.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Kt!==null?null:Te(Je,Fe,""+Qe,kt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case Y:return Qe.key===Kt?ze(Je,Fe,Qe,kt):null;case re:return Qe.key===Kt?it(Je,Fe,Qe,kt):null;case st:return Kt=Qe._init,xt(Je,Fe,Kt(Qe._payload),kt)}if(ki(Qe)||tt(Qe))return Kt!==null?null:bt(Je,Fe,Qe,kt,null);cl(Je,Qe)}return null}function Nt(Je,Fe,Qe,kt,Kt){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return Je=Je.get(Qe)||null,Te(Fe,Je,""+kt,Kt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case Y:return Je=Je.get(kt.key===null?Qe:kt.key)||null,ze(Fe,Je,kt,Kt);case re:return Je=Je.get(kt.key===null?Qe:kt.key)||null,it(Fe,Je,kt,Kt);case st:var ur=kt._init;return Nt(Je,Fe,Qe,ur(kt._payload),Kt)}if(ki(kt)||tt(kt))return Je=Je.get(Qe)||null,bt(Fe,Je,kt,Kt,null);cl(Fe,kt)}return null}function Ht(Je,Fe,Qe,kt){for(var Kt=null,ur=null,ar=Fe,mr=Fe=0,Si=null;ar!==null&&mr<Qe.length;mr++){ar.index>mr?(Si=ar,ar=null):Si=ar.sibling;var Wr=xt(Je,ar,Qe[mr],kt);if(Wr===null){ar===null&&(ar=Si);break}h&&ar&&Wr.alternate===null&&g(Je,ar),Fe=q(Wr,Fe,mr),ur===null?Kt=Wr:ur.sibling=Wr,ur=Wr,ar=Si}if(mr===Qe.length)return S(Je,ar),yn&&ka(Je,mr),Kt;if(ar===null){for(;mr<Qe.length;mr++)ar=Tt(Je,Qe[mr],kt),ar!==null&&(Fe=q(ar,Fe,mr),ur===null?Kt=ar:ur.sibling=ar,ur=ar);return yn&&ka(Je,mr),Kt}for(ar=k(Je,ar);mr<Qe.length;mr++)Si=Nt(ar,Je,mr,Qe[mr],kt),Si!==null&&(h&&Si.alternate!==null&&ar.delete(Si.key===null?mr:Si.key),Fe=q(Si,Fe,mr),ur===null?Kt=Si:ur.sibling=Si,ur=Si);return h&&ar.forEach(function(Ds){return g(Je,Ds)}),yn&&ka(Je,mr),Kt}function Xt(Je,Fe,Qe,kt){var Kt=tt(Qe);if(typeof Kt!="function")throw Error(n(150));if(Qe=Kt.call(Qe),Qe==null)throw Error(n(151));for(var ur=Kt=null,ar=Fe,mr=Fe=0,Si=null,Wr=Qe.next();ar!==null&&!Wr.done;mr++,Wr=Qe.next()){ar.index>mr?(Si=ar,ar=null):Si=ar.sibling;var Ds=xt(Je,ar,Wr.value,kt);if(Ds===null){ar===null&&(ar=Si);break}h&&ar&&Ds.alternate===null&&g(Je,ar),Fe=q(Ds,Fe,mr),ur===null?Kt=Ds:ur.sibling=Ds,ur=Ds,ar=Si}if(Wr.done)return S(Je,ar),yn&&ka(Je,mr),Kt;if(ar===null){for(;!Wr.done;mr++,Wr=Qe.next())Wr=Tt(Je,Wr.value,kt),Wr!==null&&(Fe=q(Wr,Fe,mr),ur===null?Kt=Wr:ur.sibling=Wr,ur=Wr);return yn&&ka(Je,mr),Kt}for(ar=k(Je,ar);!Wr.done;mr++,Wr=Qe.next())Wr=Nt(ar,Je,mr,Wr.value,kt),Wr!==null&&(h&&Wr.alternate!==null&&ar.delete(Wr.key===null?mr:Wr.key),Fe=q(Wr,Fe,mr),ur===null?Kt=Wr:ur.sibling=Wr,ur=Wr);return h&&ar.forEach(function(xh){return g(Je,xh)}),yn&&ka(Je,mr),Kt}function Hn(Je,Fe,Qe,kt){if(typeof Qe=="object"&&Qe!==null&&Qe.type===ue&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case Y:e:{for(var Kt=Qe.key,ur=Fe;ur!==null;){if(ur.key===Kt){if(Kt=Qe.type,Kt===ue){if(ur.tag===7){S(Je,ur.sibling),Fe=B(ur,Qe.props.children),Fe.return=Je,Je=Fe;break e}}else if(ur.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===st&&sh(Kt)===ur.type){S(Je,ur.sibling),Fe=B(ur,Qe.props),Fe.ref=Ss(Je,ur,Qe),Fe.return=Je,Je=Fe;break e}S(Je,ur);break}else g(Je,ur);ur=ur.sibling}Qe.type===ue?(Fe=bl(Qe.props.children,Je.mode,kt,Qe.key),Fe.return=Je,Je=Fe):(kt=$n(Qe.type,Qe.key,Qe.props,null,Je.mode,kt),kt.ref=Ss(Je,Fe,Qe),kt.return=Je,Je=kt)}return se(Je);case re:e:{for(ur=Qe.key;Fe!==null;){if(Fe.key===ur)if(Fe.tag===4&&Fe.stateNode.containerInfo===Qe.containerInfo&&Fe.stateNode.implementation===Qe.implementation){S(Je,Fe.sibling),Fe=B(Fe,Qe.children||[]),Fe.return=Je,Je=Fe;break e}else{S(Je,Fe);break}else g(Je,Fe);Fe=Fe.sibling}Fe=Sd(Qe,Je.mode,kt),Fe.return=Je,Je=Fe}return se(Je);case st:return ur=Qe._init,Hn(Je,Fe,ur(Qe._payload),kt)}if(ki(Qe))return Ht(Je,Fe,Qe,kt);if(tt(Qe))return Xt(Je,Fe,Qe,kt);cl(Je,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"?(Qe=""+Qe,Fe!==null&&Fe.tag===6?(S(Je,Fe.sibling),Fe=B(Fe,Qe),Fe.return=Je,Je=Fe):(S(Je,Fe),Fe=Rf(Qe,Je.mode,kt),Fe.return=Je,Je=Fe),se(Je)):S(Je,Fe)}return Hn}var ul=lh(!0),pf=lh(!1),fa=ua(null),hl=null,jt=null,Vt=null;function sc(){Vt=jt=hl=null}function du(h){var g=fa.current;jr(fa),h._currentValue=g}function lc(h,g,S){for(;h!==null;){var k=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,k!==null&&(k.childLanes|=g)):k!==null&&(k.childLanes&g)!==g&&(k.childLanes|=g),h===S)break;h=h.return}}function jn(h,g){hl=h,Vt=jt=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&g)!==0&&(Bi=!0),h.firstContext=null)}function pa(h){var g=h._currentValue;if(Vt!==h)if(h={context:h,memoizedValue:g,next:null},jt===null){if(hl===null)throw Error(n(308));jt=h,hl.dependencies={lanes:0,firstContext:h}}else jt=jt.next=h;return g}var di=null;function No(h){di===null?di=[h]:di.push(h)}function dl(h,g,S,k){var B=g.interleaved;return B===null?(S.next=S,No(g)):(S.next=B.next,B.next=S),g.interleaved=S,Ur(h,k)}function Ur(h,g){h.lanes|=g;var S=h.alternate;for(S!==null&&(S.lanes|=g),S=h,h=h.return;h!==null;)h.childLanes|=g,S=h.alternate,S!==null&&(S.childLanes|=g),S=h,h=h.return;return S.tag===3?S.stateNode:null}var Jr=!1;function cc(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uc(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ji(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function Ji(h,g,S){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,(Br&2)!==0){var B=k.pending;return B===null?g.next=g:(g.next=B.next,B.next=g),k.pending=g,Ur(h,S)}return B=k.interleaved,B===null?(g.next=g,No(k)):(g.next=B.next,B.next=g),k.interleaved=g,Ur(h,S)}function hc(h,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194240)!==0)){var k=g.lanes;k&=h.pendingLanes,S|=k,g.lanes=S,os(h,S)}}function fu(h,g){var S=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,S===k)){var B=null,q=null;if(S=S.firstBaseUpdate,S!==null){do{var se={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};q===null?B=q=se:q=q.next=se,S=S.next}while(S!==null);q===null?B=q=g:q=q.next=g}else B=q=g;S={baseState:k.baseState,firstBaseUpdate:B,lastBaseUpdate:q,shared:k.shared,effects:k.effects},h.updateQueue=S;return}h=S.lastBaseUpdate,h===null?S.firstBaseUpdate=g:h.next=g,S.lastBaseUpdate=g}function Oa(h,g,S,k){var B=h.updateQueue;Jr=!1;var q=B.firstBaseUpdate,se=B.lastBaseUpdate,Te=B.shared.pending;if(Te!==null){B.shared.pending=null;var ze=Te,it=ze.next;ze.next=null,se===null?q=it:se.next=it,se=ze;var bt=h.alternate;bt!==null&&(bt=bt.updateQueue,Te=bt.lastBaseUpdate,Te!==se&&(Te===null?bt.firstBaseUpdate=it:Te.next=it,bt.lastBaseUpdate=ze))}if(q!==null){var Tt=B.baseState;se=0,bt=it=ze=null,Te=q;do{var xt=Te.lane,Nt=Te.eventTime;if((k&xt)===xt){bt!==null&&(bt=bt.next={eventTime:Nt,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var Ht=h,Xt=Te;switch(xt=g,Nt=S,Xt.tag){case 1:if(Ht=Xt.payload,typeof Ht=="function"){Tt=Ht.call(Nt,Tt,xt);break e}Tt=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Xt.payload,xt=typeof Ht=="function"?Ht.call(Nt,Tt,xt):Ht,xt==null)break e;Tt=ut({},Tt,xt);break e;case 2:Jr=!0}}Te.callback!==null&&Te.lane!==0&&(h.flags|=64,xt=B.effects,xt===null?B.effects=[Te]:xt.push(Te))}else Nt={eventTime:Nt,lane:xt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},bt===null?(it=bt=Nt,ze=Tt):bt=bt.next=Nt,se|=xt;if(Te=Te.next,Te===null){if(Te=B.shared.pending,Te===null)break;xt=Te,Te=xt.next,xt.next=null,B.lastBaseUpdate=xt,B.shared.pending=null}}while(!0);if(bt===null&&(ze=Tt),B.baseState=ze,B.firstBaseUpdate=it,B.lastBaseUpdate=bt,g=B.shared.interleaved,g!==null){B=g;do se|=B.lane,B=B.next;while(B!==g)}else q===null&&(B.shared.lanes=0);ks|=se,h.lanes=se,h.memoizedState=Tt}}function ch(h,g,S){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var k=h[g],B=k.callback;if(B!==null){if(k.callback=null,k=S,typeof B!="function")throw Error(n(191,B));B.call(k)}}}var fl={},ma=ua(fl),pl=ua(fl),_=ua(fl);function r(h){if(h===fl)throw Error(n(174));return h}function c(h,g){switch(Ir(_,g),Ir(pl,h),Ir(ma,fl),h=g.nodeType,h){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:oo(null,"");break;default:h=h===8?g.parentNode:g,g=h.namespaceURI||null,h=h.tagName,g=oo(g,h)}jr(ma),Ir(ma,g)}function m(){jr(ma),jr(pl),jr(_)}function v(h){r(_.current);var g=r(ma.current),S=oo(g,h.type);g!==S&&(Ir(pl,h),Ir(ma,S))}function b(h){pl.current===h&&(jr(ma),jr(pl))}var T=ua(0);function O(h){for(var g=h;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var R=[];function L(){for(var h=0;h<R.length;h++)R[h]._workInProgressVersionPrimary=null;R.length=0}var U=oe.ReactCurrentDispatcher,H=oe.ReactCurrentBatchConfig,W=0,X=null,ne=null,he=null,pe=!1,me=!1,ye=0,we=0;function ve(){throw Error(n(321))}function Ae(h,g){if(g===null)return!1;for(var S=0;S<g.length&&S<h.length;S++)if(!Za(h[S],g[S]))return!1;return!0}function Ie(h,g,S,k,B,q){if(W=q,X=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,U.current=h===null||h.memoizedState===null?ei:cm,h=S(k,B),me){q=0;do{if(me=!1,ye=0,25<=q)throw Error(n(301));q+=1,he=ne=null,g.updateQueue=null,U.current=hd,h=S(k,B)}while(me)}if(U.current=bi,g=ne!==null&&ne.next!==null,W=0,he=ne=X=null,pe=!1,g)throw Error(n(300));return h}function xe(){var h=ye!==0;return ye=0,h}function De(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?X.memoizedState=he=h:he=he.next=h,he}function Ze(){if(ne===null){var h=X.alternate;h=h!==null?h.memoizedState:null}else h=ne.next;var g=he===null?X.memoizedState:he.next;if(g!==null)he=g,ne=h;else{if(h===null)throw Error(n(310));ne=h,h={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},he===null?X.memoizedState=he=h:he=he.next=h}return he}function Ge(h,g){return typeof g=="function"?g(h):g}function He(h){var g=Ze(),S=g.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=h;var k=ne,B=k.baseQueue,q=S.pending;if(q!==null){if(B!==null){var se=B.next;B.next=q.next,q.next=se}k.baseQueue=B=q,S.pending=null}if(B!==null){q=B.next,k=k.baseState;var Te=se=null,ze=null,it=q;do{var bt=it.lane;if((W&bt)===bt)ze!==null&&(ze=ze.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),k=it.hasEagerState?it.eagerState:h(k,it.action);else{var Tt={lane:bt,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};ze===null?(Te=ze=Tt,se=k):ze=ze.next=Tt,X.lanes|=bt,ks|=bt}it=it.next}while(it!==null&&it!==q);ze===null?se=k:ze.next=Te,Za(k,g.memoizedState)||(Bi=!0),g.memoizedState=k,g.baseState=se,g.baseQueue=ze,S.lastRenderedState=k}if(h=S.interleaved,h!==null){B=h;do q=B.lane,X.lanes|=q,ks|=q,B=B.next;while(B!==h)}else B===null&&(S.lanes=0);return[g.memoizedState,S.dispatch]}function et(h){var g=Ze(),S=g.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=h;var k=S.dispatch,B=S.pending,q=g.memoizedState;if(B!==null){S.pending=null;var se=B=B.next;do q=h(q,se.action),se=se.next;while(se!==B);Za(q,g.memoizedState)||(Bi=!0),g.memoizedState=q,g.baseQueue===null&&(g.baseState=q),S.lastRenderedState=q}return[q,k]}function Pt(){}function wt(h,g){var S=X,k=Ze(),B=g(),q=!Za(k.memoizedState,B);if(q&&(k.memoizedState=B,Bi=!0),k=k.queue,Ln(vr.bind(null,S,k,h),[h]),k.getSnapshot!==g||q||he!==null&&he.memoizedState.tag&1){if(S.flags|=2048,Vr(9,Lt.bind(null,S,k,B,g),void 0,null),ti===null)throw Error(n(349));(W&30)!==0||dt(S,g,B)}return B}function dt(h,g,S){h.flags|=16384,h={getSnapshot:g,value:S},g=X.updateQueue,g===null?(g={lastEffect:null,stores:null},X.updateQueue=g,g.stores=[h]):(S=g.stores,S===null?g.stores=[h]:S.push(h))}function Lt(h,g,S,k){g.value=S,g.getSnapshot=k,Nr(g)&&dn(h)}function vr(h,g,S){return S(function(){Nr(g)&&dn(h)})}function Nr(h){var g=h.getSnapshot;h=h.value;try{var S=g();return!Za(h,S)}catch{return!0}}function dn(h){var g=Ur(h,1);g!==null&&bo(g,h,1,-1)}function Qr(h){var g=De();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ge,lastRenderedState:h},g.queue=h,h=h.dispatch=Uo.bind(null,X,h),[g.memoizedState,h]}function Vr(h,g,S,k){return h={tag:h,create:g,destroy:S,deps:k,next:null},g=X.updateQueue,g===null?(g={lastEffect:null,stores:null},X.updateQueue=g,g.lastEffect=h.next=h):(S=g.lastEffect,S===null?g.lastEffect=h.next=h:(k=S.next,S.next=h,h.next=k,g.lastEffect=h)),h}function fn(){return Ze().memoizedState}function Xr(h,g,S,k){var B=De();X.flags|=h,B.memoizedState=Vr(1|g,S,void 0,k===void 0?null:k)}function Zr(h,g,S,k){var B=Ze();k=k===void 0?null:k;var q=void 0;if(ne!==null){var se=ne.memoizedState;if(q=se.destroy,k!==null&&Ae(k,se.deps)){B.memoizedState=Vr(g,S,q,k);return}}X.flags|=h,B.memoizedState=Vr(1|g,S,q,k)}function Rr(h,g){return Xr(8390656,8,h,g)}function Ln(h,g){return Zr(2048,8,h,g)}function Nn(h,g){return Zr(4,2,h,g)}function _i(h,g){return Zr(4,4,h,g)}function Bo(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function Fo(h,g,S){return S=S!=null?S.concat([h]):null,Zr(4,4,Bo.bind(null,g,h),S)}function ga(){}function Ps(h,g){var S=Ze();g=g===void 0?null:g;var k=S.memoizedState;return k!==null&&g!==null&&Ae(g,k[1])?k[0]:(S.memoizedState=[h,g],h)}function dc(h,g){var S=Ze();g=g===void 0?null:g;var k=S.memoizedState;return k!==null&&g!==null&&Ae(g,k[1])?k[0]:(h=h(),S.memoizedState=[h,g],h)}function pu(h,g,S){return(W&21)===0?(h.baseState&&(h.baseState=!1,Bi=!0),h.memoizedState=S):(Za(S,g)||(S=Vs(),X.lanes|=S,ks|=S,h.baseState=!0),g)}function Ts(h,g){var S=$r;$r=S!==0&&4>S?S:4,h(!0);var k=H.transition;H.transition={};try{h(!1),g()}finally{$r=S,H.transition=k}}function xi(){return Ze().memoizedState}function $o(h,g,S){var k=bc(h);if(S={lane:k,action:S,hasEagerState:!1,eagerState:null,next:null},Vo(h))rn(g,S);else if(S=dl(h,g,S,k),S!==null){var B=xa();bo(S,h,k,B),An(S,g,k)}}function Uo(h,g,S){var k=bc(h),B={lane:k,action:S,hasEagerState:!1,eagerState:null,next:null};if(Vo(h))rn(g,B);else{var q=h.alternate;if(h.lanes===0&&(q===null||q.lanes===0)&&(q=g.lastRenderedReducer,q!==null))try{var se=g.lastRenderedState,Te=q(se,S);if(B.hasEagerState=!0,B.eagerState=Te,Za(Te,se)){var ze=g.interleaved;ze===null?(B.next=B,No(g)):(B.next=ze.next,ze.next=B),g.interleaved=B;return}}catch{}finally{}S=dl(h,g,B,k),S!==null&&(B=xa(),bo(S,h,k,B),An(S,g,k))}}function Vo(h){var g=h.alternate;return h===X||g!==null&&g===X}function rn(h,g){me=pe=!0;var S=h.pending;S===null?g.next=g:(g.next=S.next,S.next=g),h.pending=g}function An(h,g,S){if((S&4194240)!==0){var k=g.lanes;k&=h.pendingLanes,S|=k,g.lanes=S,os(h,S)}}var bi={readContext:pa,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},ei={readContext:pa,useCallback:function(h,g){return De().memoizedState=[h,g===void 0?null:g],h},useContext:pa,useEffect:Rr,useImperativeHandle:function(h,g,S){return S=S!=null?S.concat([h]):null,Xr(4194308,4,Bo.bind(null,g,h),S)},useLayoutEffect:function(h,g){return Xr(4194308,4,h,g)},useInsertionEffect:function(h,g){return Xr(4,2,h,g)},useMemo:function(h,g){var S=De();return g=g===void 0?null:g,h=h(),S.memoizedState=[h,g],h},useReducer:function(h,g,S){var k=De();return g=S!==void 0?S(g):g,k.memoizedState=k.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},k.queue=h,h=h.dispatch=$o.bind(null,X,h),[k.memoizedState,h]},useRef:function(h){var g=De();return h={current:h},g.memoizedState=h},useState:Qr,useDebugValue:ga,useDeferredValue:function(h){return De().memoizedState=h},useTransition:function(){var h=Qr(!1),g=h[0];return h=Ts.bind(null,h[1]),De().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,S){var k=X,B=De();if(yn){if(S===void 0)throw Error(n(407));S=S()}else{if(S=g(),ti===null)throw Error(n(349));(W&30)!==0||dt(k,g,S)}B.memoizedState=S;var q={value:S,getSnapshot:g};return B.queue=q,Rr(vr.bind(null,k,q,h),[h]),k.flags|=2048,Vr(9,Lt.bind(null,k,q,S,g),void 0,null),S},useId:function(){var h=De(),g=ti.identifierPrefix;if(yn){var S=Di,k=Ya;S=(k&~(1<<32-Ta(k)-1)).toString(32)+S,g=":"+g+"R"+S,S=ye++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=we++,g=":"+g+"r"+S.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},cm={readContext:pa,useCallback:Ps,useContext:pa,useEffect:Ln,useImperativeHandle:Fo,useInsertionEffect:Nn,useLayoutEffect:_i,useMemo:dc,useReducer:He,useRef:fn,useState:function(){return He(Ge)},useDebugValue:ga,useDeferredValue:function(h){var g=Ze();return pu(g,ne.memoizedState,h)},useTransition:function(){var h=He(Ge)[0],g=Ze().memoizedState;return[h,g]},useMutableSource:Pt,useSyncExternalStore:wt,useId:xi,unstable_isNewReconciler:!1},hd={readContext:pa,useCallback:Ps,useContext:pa,useEffect:Ln,useImperativeHandle:Fo,useInsertionEffect:Nn,useLayoutEffect:_i,useMemo:dc,useReducer:et,useRef:fn,useState:function(){return et(Ge)},useDebugValue:ga,useDeferredValue:function(h){var g=Ze();return ne===null?g.memoizedState=h:pu(g,ne.memoizedState,h)},useTransition:function(){var h=et(Ge)[0],g=Ze().memoizedState;return[h,g]},useMutableSource:Pt,useSyncExternalStore:wt,useId:xi,unstable_isNewReconciler:!1};function Li(h,g){if(h&&h.defaultProps){g=ut({},g),h=h.defaultProps;for(var S in h)g[S]===void 0&&(g[S]=h[S]);return g}return g}function As(h,g,S,k){g=h.memoizedState,S=S(k,g),S=S==null?g:ut({},g,S),h.memoizedState=S,h.lanes===0&&(h.updateQueue.baseState=S)}var Ra={isMounted:function(h){return(h=h._reactInternals)?cr(h)===h:!1},enqueueSetState:function(h,g,S){h=h._reactInternals;var k=xa(),B=bc(h),q=ji(k,B);q.payload=g,S!=null&&(q.callback=S),g=Ji(h,q,B),g!==null&&(bo(g,h,B,k),hc(g,h,B))},enqueueReplaceState:function(h,g,S){h=h._reactInternals;var k=xa(),B=bc(h),q=ji(k,B);q.tag=1,q.payload=g,S!=null&&(q.callback=S),g=Ji(h,q,B),g!==null&&(bo(g,h,B,k),hc(g,h,B))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var S=xa(),k=bc(h),B=ji(S,k);B.tag=2,g!=null&&(B.callback=g),g=Ji(h,B,k),g!==null&&(bo(g,h,k,S),hc(g,h,k))}};function Da(h,g,S,k,B,q,se){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,q,se):g.prototype&&g.prototype.isPureReactComponent?!Hc(S,k)||!Hc(B,q):!0}function Ni(h,g,S){var k=!1,B=ha,q=g.contextType;return typeof q=="object"&&q!==null?q=pa(q):(B=yi(g)?xs:oi.current,k=g.contextTypes,q=(k=k!=null)?Ka(h,B):ha),g=new g(S,q),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ra,h.stateNode=g,g._reactInternals=h,k&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=B,h.__reactInternalMemoizedMaskedChildContext=q),g}function uh(h,g,S,k){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,k),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,k),g.state!==h&&Ra.enqueueReplaceState(g,g.state,null)}function xo(h,g,S,k){var B=h.stateNode;B.props=S,B.state=h.memoizedState,B.refs={},cc(h);var q=g.contextType;typeof q=="object"&&q!==null?B.context=pa(q):(q=yi(g)?xs:oi.current,B.context=Ka(h,q)),B.state=h.memoizedState,q=g.getDerivedStateFromProps,typeof q=="function"&&(As(h,g,q,S),B.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(g=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),g!==B.state&&Ra.enqueueReplaceState(B,B.state,null),Oa(h,S,B,k),B.state=h.memoizedState),typeof B.componentDidMount=="function"&&(h.flags|=4194308)}function ml(h,g){try{var S="",k=g;do S+=$t(k),k=k.return;while(k);var B=S}catch(q){B=`
Error generating stack: `+q.message+`
`+q.stack}return{value:h,source:g,stack:B,digest:null}}function fc(h,g,S){return{value:h,source:null,stack:S??null,digest:g??null}}function pc(h,g){try{console.error(g.value)}catch(S){setTimeout(function(){throw S})}}var hh=typeof WeakMap=="function"?WeakMap:Map;function mc(h,g,S){S=ji(-1,S),S.tag=3,S.payload={element:null};var k=g.value;return S.callback=function(){_c||(_c=!0,gd=k),pc(h,g)},S}function gc(h,g,S){S=ji(-1,S),S.tag=3;var k=h.type.getDerivedStateFromError;if(typeof k=="function"){var B=g.value;S.payload=function(){return k(B)},S.callback=function(){pc(h,g)}}var q=h.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(S.callback=function(){pc(h,g),typeof k!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var se=g.stack;this.componentDidCatch(g.value,{componentStack:se!==null?se:""})}),S}function um(h,g,S){var k=h.pingCache;if(k===null){k=h.pingCache=new hh;var B=new Set;k.set(g,B)}else B=k.get(g),B===void 0&&(B=new Set,k.set(g,B));B.has(S)||(B.add(S),h=J_.bind(null,h,g,S),g.then(h,h))}function ey(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function mf(h,g,S,k,B){return(h.mode&1)===0?(h===g?h.flags|=65536:(h.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(g=ji(-1,1),g.tag=2,Ji(S,g,1))),S.lanes|=1),h):(h.flags|=65536,h.lanes=B,h)}var ty=oe.ReactCurrentOwner,Bi=!1;function Qi(h,g,S,k){g.child=h===null?pf(g,null,S,k):ul(g,h.child,S,k)}function ry(h,g,S,k,B){S=S.render;var q=g.ref;return jn(g,B),k=Ie(h,g,S,k,q,B),S=xe(),h!==null&&!Bi?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~B,gl(h,g,B)):(yn&&S&&Ar(g),g.flags|=1,Qi(h,g,k,B),g.child)}function gf(h,g,S,k,B){if(h===null){var q=S.type;return typeof q=="function"&&!Em(q)&&q.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(g.tag=15,g.type=q,ny(h,g,q,k,B)):(h=$n(S.type,null,k,g,g.mode,B),h.ref=g.ref,h.return=g,g.child=h)}if(q=h.child,(h.lanes&B)===0){var se=q.memoizedProps;if(S=S.compare,S=S!==null?S:Hc,S(se,k)&&h.ref===g.ref)return gl(h,g,B)}return g.flags|=1,h=wo(q,k),h.ref=g.ref,h.return=g,g.child=h}function ny(h,g,S,k,B){if(h!==null){var q=h.memoizedProps;if(Hc(q,k)&&h.ref===g.ref)if(Bi=!1,g.pendingProps=k=q,(h.lanes&B)!==0)(h.flags&131072)!==0&&(Bi=!0);else return g.lanes=h.lanes,gl(h,g,B)}return vf(h,g,S,k,B)}function yf(h,g,S){var k=g.pendingProps,B=k.children,q=h!==null?h.memoizedState:null;if(k.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ir(Es,za),za|=S;else{if((S&1073741824)===0)return h=q!==null?q.baseLanes|S:S,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,Ir(Es,za),za|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=q!==null?q.baseLanes:S,Ir(Es,za),za|=k}else q!==null?(k=q.baseLanes|S,g.memoizedState=null):k=S,Ir(Es,za),za|=k;return Qi(h,g,B,S),g.child}function hm(h,g){var S=g.ref;(h===null&&S!==null||h!==null&&h.ref!==S)&&(g.flags|=512,g.flags|=2097152)}function vf(h,g,S,k,B){var q=yi(S)?xs:oi.current;return q=Ka(g,q),jn(g,B),S=Ie(h,g,S,k,q,B),k=xe(),h!==null&&!Bi?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~B,gl(h,g,B)):(yn&&k&&Ar(g),g.flags|=1,Qi(h,g,S,B),g.child)}function mu(h,g,S,k,B){if(yi(S)){var q=!0;Oi(g)}else q=!1;if(jn(g,B),g.stateNode===null)wf(h,g),Ni(g,S,k),xo(g,S,k,B),k=!0;else if(h===null){var se=g.stateNode,Te=g.memoizedProps;se.props=Te;var ze=se.context,it=S.contextType;typeof it=="object"&&it!==null?it=pa(it):(it=yi(S)?xs:oi.current,it=Ka(g,it));var bt=S.getDerivedStateFromProps,Tt=typeof bt=="function"||typeof se.getSnapshotBeforeUpdate=="function";Tt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Te!==k||ze!==it)&&uh(g,se,k,it),Jr=!1;var xt=g.memoizedState;se.state=xt,Oa(g,k,se,B),ze=g.memoizedState,Te!==k||xt!==ze||Ii.current||Jr?(typeof bt=="function"&&(As(g,S,bt,k),ze=g.memoizedState),(Te=Jr||Da(g,S,Te,k,xt,ze,it))?(Tt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(g.flags|=4194308)):(typeof se.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=k,g.memoizedState=ze),se.props=k,se.state=ze,se.context=it,k=Te):(typeof se.componentDidMount=="function"&&(g.flags|=4194308),k=!1)}else{se=g.stateNode,uc(h,g),Te=g.memoizedProps,it=g.type===g.elementType?Te:Li(g.type,Te),se.props=it,Tt=g.pendingProps,xt=se.context,ze=S.contextType,typeof ze=="object"&&ze!==null?ze=pa(ze):(ze=yi(S)?xs:oi.current,ze=Ka(g,ze));var Nt=S.getDerivedStateFromProps;(bt=typeof Nt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Te!==Tt||xt!==ze)&&uh(g,se,k,ze),Jr=!1,xt=g.memoizedState,se.state=xt,Oa(g,k,se,B);var Ht=g.memoizedState;Te!==Tt||xt!==Ht||Ii.current||Jr?(typeof Nt=="function"&&(As(g,S,Nt,k),Ht=g.memoizedState),(it=Jr||Da(g,S,it,k,xt,Ht,ze)||!1)?(bt||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(k,Ht,ze),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(k,Ht,ze)),typeof se.componentDidUpdate=="function"&&(g.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof se.componentDidUpdate!="function"||Te===h.memoizedProps&&xt===h.memoizedState||(g.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Te===h.memoizedProps&&xt===h.memoizedState||(g.flags|=1024),g.memoizedProps=k,g.memoizedState=Ht),se.props=k,se.state=Ht,se.context=ze,k=it):(typeof se.componentDidUpdate!="function"||Te===h.memoizedProps&&xt===h.memoizedState||(g.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Te===h.memoizedProps&&xt===h.memoizedState||(g.flags|=1024),k=!1)}return dm(h,g,S,k,q,B)}function dm(h,g,S,k,B,q){hm(h,g);var se=(g.flags&128)!==0;if(!k&&!se)return B&&vi(g,S,!1),gl(h,g,q);k=g.stateNode,ty.current=g;var Te=se&&typeof S.getDerivedStateFromError!="function"?null:k.render();return g.flags|=1,h!==null&&se?(g.child=ul(g,h.child,null,q),g.child=ul(g,null,Te,q)):Qi(h,g,Te,q),g.memoizedState=k.state,B&&vi(g,S,!0),g.child}function gu(h){var g=h.stateNode;g.pendingContext?ou(h,g.pendingContext,g.pendingContext!==g.context):g.context&&ou(h,g.context,!1),c(h,g.containerInfo)}function dd(h,g,S,k,B){return da(),Gr(B),g.flags|=256,Qi(h,g,S,k),g.child}var dh={dehydrated:null,treeContext:null,retryLane:0};function fm(h){return{baseLanes:h,cachePool:null,transitions:null}}function iy(h,g,S){var k=g.pendingProps,B=T.current,q=!1,se=(g.flags&128)!==0,Te;if((Te=se)||(Te=h!==null&&h.memoizedState===null?!1:(B&2)!==0),Te?(q=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(B|=1),Ir(T,B&1),h===null)return ah(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((g.mode&1)===0?g.lanes=1:h.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(se=k.children,h=k.fallback,q?(k=g.mode,q=g.child,se={mode:"hidden",children:se},(k&1)===0&&q!==null?(q.childLanes=0,q.pendingProps=se):q=wd(se,k,0,null),h=bl(h,k,S,null),q.return=g,h.return=g,q.sibling=h,g.child=q,g.child.memoizedState=fm(S),g.memoizedState=dh,h):pm(g,se));if(B=h.memoizedState,B!==null&&(Te=B.dehydrated,Te!==null))return ay(h,g,se,k,Te,B,S);if(q){q=k.fallback,se=g.mode,B=h.child,Te=B.sibling;var ze={mode:"hidden",children:k.children};return(se&1)===0&&g.child!==B?(k=g.child,k.childLanes=0,k.pendingProps=ze,g.deletions=null):(k=wo(B,ze),k.subtreeFlags=B.subtreeFlags&14680064),Te!==null?q=wo(Te,q):(q=bl(q,se,S,null),q.flags|=2),q.return=g,k.return=g,k.sibling=q,g.child=k,k=q,q=g.child,se=h.child.memoizedState,se=se===null?fm(S):{baseLanes:se.baseLanes|S,cachePool:null,transitions:se.transitions},q.memoizedState=se,q.childLanes=h.childLanes&~S,g.memoizedState=dh,k}return q=h.child,h=q.sibling,k=wo(q,{mode:"visible",children:k.children}),(g.mode&1)===0&&(k.lanes=S),k.return=g,k.sibling=null,h!==null&&(S=g.deletions,S===null?(g.deletions=[h],g.flags|=16):S.push(h)),g.child=k,g.memoizedState=null,k}function pm(h,g){return g=wd({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function _f(h,g,S,k){return k!==null&&Gr(k),ul(g,h.child,null,S),h=pm(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function ay(h,g,S,k,B,q,se){if(S)return g.flags&256?(g.flags&=-257,k=fc(Error(n(422))),_f(h,g,se,k)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(q=k.fallback,B=g.mode,k=wd({mode:"visible",children:k.children},B,0,null),q=bl(q,B,se,null),q.flags|=2,k.return=g,q.return=g,k.sibling=q,g.child=k,(g.mode&1)!==0&&ul(g,h.child,null,se),g.child.memoizedState=fm(se),g.memoizedState=dh,q);if((g.mode&1)===0)return _f(h,g,se,null);if(B.data==="$!"){if(k=B.nextSibling&&B.nextSibling.dataset,k)var Te=k.dgst;return k=Te,q=Error(n(419)),k=fc(q,k,void 0),_f(h,g,se,k)}if(Te=(se&h.childLanes)!==0,Bi||Te){if(k=ti,k!==null){switch(se&-se){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=(B&(k.suspendedLanes|se))!==0?0:B,B!==0&&B!==q.retryLane&&(q.retryLane=B,Ur(h,B),bo(k,h,B,-1))}return If(),k=fc(Error(n(421))),_f(h,g,se,k)}return B.data==="$?"?(g.flags|=128,g.child=h.child,g=Q_.bind(null,h),B._reactRetry=g,null):(h=q.treeContext,zi=go(B.nextSibling),Yi=g,yn=!0,Ia=null,h!==null&&(At[Ki++]=Ya,At[Ki++]=Di,At[Ki++]=_o,Ya=h.id,Di=h.overflow,_o=g),g=pm(g,k.children),g.flags|=4096,g)}function xf(h,g,S){h.lanes|=g;var k=h.alternate;k!==null&&(k.lanes|=g),lc(h.return,g,S)}function bf(h,g,S,k,B){var q=h.memoizedState;q===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:k,tail:S,tailMode:B}:(q.isBackwards=g,q.rendering=null,q.renderingStartTime=0,q.last=k,q.tail=S,q.tailMode=B)}function mm(h,g,S){var k=g.pendingProps,B=k.revealOrder,q=k.tail;if(Qi(h,g,k.children,S),k=T.current,(k&2)!==0)k=k&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&xf(h,S,g);else if(h.tag===19)xf(h,S,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}if(Ir(T,k),(g.mode&1)===0)g.memoizedState=null;else switch(B){case"forwards":for(S=g.child,B=null;S!==null;)h=S.alternate,h!==null&&O(h)===null&&(B=S),S=S.sibling;S=B,S===null?(B=g.child,g.child=null):(B=S.sibling,S.sibling=null),bf(g,!1,B,S,q);break;case"backwards":for(S=null,B=g.child,g.child=null;B!==null;){if(h=B.alternate,h!==null&&O(h)===null){g.child=B;break}h=B.sibling,B.sibling=S,S=B,B=h}bf(g,!0,S,null,q);break;case"together":bf(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function wf(h,g){(g.mode&1)===0&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function gl(h,g,S){if(h!==null&&(g.dependencies=h.dependencies),ks|=g.lanes,(S&g.childLanes)===0)return null;if(h!==null&&g.child!==h.child)throw Error(n(153));if(g.child!==null){for(h=g.child,S=wo(h,h.pendingProps),g.child=S,S.return=g;h.sibling!==null;)h=h.sibling,S=S.sibling=wo(h,h.pendingProps),S.return=g;S.sibling=null}return g.child}function oy(h,g,S){switch(g.tag){case 3:gu(g),da();break;case 5:v(g);break;case 1:yi(g.type)&&Oi(g);break;case 4:c(g,g.stateNode.containerInfo);break;case 10:var k=g.type._context,B=g.memoizedProps.value;Ir(fa,k._currentValue),k._currentValue=B;break;case 13:if(k=g.memoizedState,k!==null)return k.dehydrated!==null?(Ir(T,T.current&1),g.flags|=128,null):(S&g.child.childLanes)!==0?iy(h,g,S):(Ir(T,T.current&1),h=gl(h,g,S),h!==null?h.sibling:null);Ir(T,T.current&1);break;case 19:if(k=(S&g.childLanes)!==0,(h.flags&128)!==0){if(k)return mm(h,g,S);g.flags|=128}if(B=g.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Ir(T,T.current),k)break;return null;case 22:case 23:return g.lanes=0,yf(h,g,S)}return gl(h,g,S)}var gm,ym,Sf,vm;gm=function(h,g){for(var S=g.child;S!==null;){if(S.tag===5||S.tag===6)h.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},ym=function(){},Sf=function(h,g,S,k){var B=h.memoizedProps;if(B!==k){h=g.stateNode,r(ma.current);var q=null;switch(S){case"input":B=rr(h,B),k=rr(h,k),q=[];break;case"select":B=ut({},B,{value:void 0}),k=ut({},k,{value:void 0}),q=[];break;case"textarea":B=ni(h,B),k=ni(h,k),q=[];break;default:typeof B.onClick!="function"&&typeof k.onClick=="function"&&(h.onclick=mo)}Xe(S,k);var se;S=null;for(it in B)if(!k.hasOwnProperty(it)&&B.hasOwnProperty(it)&&B[it]!=null)if(it==="style"){var Te=B[it];for(se in Te)Te.hasOwnProperty(se)&&(S||(S={}),S[se]="")}else it!=="dangerouslySetInnerHTML"&&it!=="children"&&it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(u.hasOwnProperty(it)?q||(q=[]):(q=q||[]).push(it,null));for(it in k){var ze=k[it];if(Te=B?.[it],k.hasOwnProperty(it)&&ze!==Te&&(ze!=null||Te!=null))if(it==="style")if(Te){for(se in Te)!Te.hasOwnProperty(se)||ze&&ze.hasOwnProperty(se)||(S||(S={}),S[se]="");for(se in ze)ze.hasOwnProperty(se)&&Te[se]!==ze[se]&&(S||(S={}),S[se]=ze[se])}else S||(q||(q=[]),q.push(it,S)),S=ze;else it==="dangerouslySetInnerHTML"?(ze=ze?ze.__html:void 0,Te=Te?Te.__html:void 0,ze!=null&&Te!==ze&&(q=q||[]).push(it,ze)):it==="children"?typeof ze!="string"&&typeof ze!="number"||(q=q||[]).push(it,""+ze):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&(u.hasOwnProperty(it)?(ze!=null&&it==="onScroll"&&un("scroll",h),q||Te===ze||(q=[])):(q=q||[]).push(it,ze))}S&&(q=q||[]).push("style",S);var it=q;(g.updateQueue=it)&&(g.flags|=4)}},vm=function(h,g,S,k){S!==k&&(g.flags|=4)};function yu(h,g){if(!yn)switch(h.tailMode){case"hidden":g=h.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h.tail=null:S.sibling=null;break;case"collapsed":S=h.tail;for(var k=null;S!==null;)S.alternate!==null&&(k=S),S=S.sibling;k===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function si(h){var g=h.alternate!==null&&h.alternate.child===h.child,S=0,k=0;if(g)for(var B=h.child;B!==null;)S|=B.lanes|B.childLanes,k|=B.subtreeFlags&14680064,k|=B.flags&14680064,B.return=h,B=B.sibling;else for(B=h.child;B!==null;)S|=B.lanes|B.childLanes,k|=B.subtreeFlags,k|=B.flags,B.return=h,B=B.sibling;return h.subtreeFlags|=k,h.childLanes=S,g}function ya(h,g,S){var k=g.pendingProps;switch(lu(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(g),null;case 1:return yi(g.type)&&sl(),si(g),null;case 3:return k=g.stateNode,m(),jr(Ii),jr(oi),L(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(uu(g)?g.flags|=4:h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Ia!==null&&(_d(Ia),Ia=null))),ym(h,g),si(g),null;case 5:b(g);var B=r(_.current);if(S=g.type,h!==null&&g.stateNode!=null)Sf(h,g,S,k,B),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!k){if(g.stateNode===null)throw Error(n(166));return si(g),null}if(h=r(ma.current),uu(g)){k=g.stateNode,S=g.type;var q=g.memoizedProps;switch(k[Tn]=g,k[_s]=q,h=(g.mode&1)!==0,S){case"dialog":un("cancel",k),un("close",k);break;case"iframe":case"object":case"embed":un("load",k);break;case"video":case"audio":for(B=0;B<Ql.length;B++)un(Ql[B],k);break;case"source":un("error",k);break;case"img":case"image":case"link":un("error",k),un("load",k);break;case"details":un("toggle",k);break;case"input":qr(k,q),un("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!q.multiple},un("invalid",k);break;case"textarea":oa(k,q),un("invalid",k)}Xe(S,q),B=null;for(var se in q)if(q.hasOwnProperty(se)){var Te=q[se];se==="children"?typeof Te=="string"?k.textContent!==Te&&(q.suppressHydrationWarning!==!0&&ic(k.textContent,Te,h),B=["children",Te]):typeof Te=="number"&&k.textContent!==""+Te&&(q.suppressHydrationWarning!==!0&&ic(k.textContent,Te,h),B=["children",""+Te]):u.hasOwnProperty(se)&&Te!=null&&se==="onScroll"&&un("scroll",k)}switch(S){case"input":ir(k),qn(k,q,!0);break;case"textarea":ir(k),Pa(k);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(k.onclick=mo)}k=B,g.updateQueue=k,k!==null&&(g.flags|=4)}else{se=B.nodeType===9?B:B.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Ao(S)),h==="http://www.w3.org/1999/xhtml"?S==="script"?(h=se.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof k.is=="string"?h=se.createElement(S,{is:k.is}):(h=se.createElement(S),S==="select"&&(se=h,k.multiple?se.multiple=!0:k.size&&(se.size=k.size))):h=se.createElementNS(h,S),h[Tn]=g,h[_s]=k,gm(h,g,!1,!1),g.stateNode=h;e:{switch(se=$e(S,k),S){case"dialog":un("cancel",h),un("close",h),B=k;break;case"iframe":case"object":case"embed":un("load",h),B=k;break;case"video":case"audio":for(B=0;B<Ql.length;B++)un(Ql[B],h);B=k;break;case"source":un("error",h),B=k;break;case"img":case"image":case"link":un("error",h),un("load",h),B=k;break;case"details":un("toggle",h),B=k;break;case"input":qr(h,k),B=rr(h,k),un("invalid",h);break;case"option":B=k;break;case"select":h._wrapperState={wasMultiple:!!k.multiple},B=ut({},k,{value:void 0}),un("invalid",h);break;case"textarea":oa(h,k),B=ni(h,k),un("invalid",h);break;default:B=k}Xe(S,B),Te=B;for(q in Te)if(Te.hasOwnProperty(q)){var ze=Te[q];q==="style"?Ee(h,ze):q==="dangerouslySetInnerHTML"?(ze=ze?ze.__html:void 0,ze!=null&&je(h,ze)):q==="children"?typeof ze=="string"?(S!=="textarea"||ze!=="")&&ie(h,ze):typeof ze=="number"&&ie(h,""+ze):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(u.hasOwnProperty(q)?ze!=null&&q==="onScroll"&&un("scroll",h):ze!=null&&ee(h,q,ze,se))}switch(S){case"input":ir(h),qn(h,k,!1);break;case"textarea":ir(h),Pa(h);break;case"option":k.value!=null&&h.setAttribute("value",""+tr(k.value));break;case"select":h.multiple=!!k.multiple,q=k.value,q!=null?On(h,!!k.multiple,q,!1):k.defaultValue!=null&&On(h,!!k.multiple,k.defaultValue,!0);break;default:typeof B.onClick=="function"&&(h.onclick=mo)}switch(S){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return si(g),null;case 6:if(h&&g.stateNode!=null)vm(h,g,h.memoizedProps,k);else{if(typeof k!="string"&&g.stateNode===null)throw Error(n(166));if(S=r(_.current),r(ma.current),uu(g)){if(k=g.stateNode,S=g.memoizedProps,k[Tn]=g,(q=k.nodeValue!==S)&&(h=Yi,h!==null))switch(h.tag){case 3:ic(k.nodeValue,S,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&ic(k.nodeValue,S,(h.mode&1)!==0)}q&&(g.flags|=4)}else k=(S.nodeType===9?S:S.ownerDocument).createTextNode(k),k[Tn]=g,g.stateNode=k}return si(g),null;case 13:if(jr(T),k=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(yn&&zi!==null&&(g.mode&1)!==0&&(g.flags&128)===0)hu(),da(),g.flags|=98560,q=!1;else if(q=uu(g),k!==null&&k.dehydrated!==null){if(h===null){if(!q)throw Error(n(318));if(q=g.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(n(317));q[Tn]=g}else da(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;si(g),q=!1}else Ia!==null&&(_d(Ia),Ia=null),q=!0;if(!q)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=S,g):(k=k!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(g.child.flags|=8192,(g.mode&1)!==0&&(h===null||(T.current&1)!==0?ri===0&&(ri=3):If())),g.updateQueue!==null&&(g.flags|=4),si(g),null);case 4:return m(),ym(h,g),h===null&&vs(g.stateNode.containerInfo),si(g),null;case 10:return du(g.type._context),si(g),null;case 17:return yi(g.type)&&sl(),si(g),null;case 19:if(jr(T),q=g.memoizedState,q===null)return si(g),null;if(k=(g.flags&128)!==0,se=q.rendering,se===null)if(k)yu(q,!1);else{if(ri!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(se=O(h),se!==null){for(g.flags|=128,yu(q,!1),k=se.updateQueue,k!==null&&(g.updateQueue=k,g.flags|=4),g.subtreeFlags=0,k=S,S=g.child;S!==null;)q=S,h=k,q.flags&=14680066,se=q.alternate,se===null?(q.childLanes=0,q.lanes=h,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=se.childLanes,q.lanes=se.lanes,q.child=se.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=se.memoizedProps,q.memoizedState=se.memoizedState,q.updateQueue=se.updateQueue,q.type=se.type,h=se.dependencies,q.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),S=S.sibling;return Ir(T,T.current&1|2),g.child}h=h.sibling}q.tail!==null&&wr()>yh&&(g.flags|=128,k=!0,yu(q,!1),g.lanes=4194304)}else{if(!k)if(h=O(se),h!==null){if(g.flags|=128,k=!0,S=h.updateQueue,S!==null&&(g.updateQueue=S,g.flags|=4),yu(q,!0),q.tail===null&&q.tailMode==="hidden"&&!se.alternate&&!yn)return si(g),null}else 2*wr()-q.renderingStartTime>yh&&S!==1073741824&&(g.flags|=128,k=!0,yu(q,!1),g.lanes=4194304);q.isBackwards?(se.sibling=g.child,g.child=se):(S=q.last,S!==null?S.sibling=se:g.child=se,q.last=se)}return q.tail!==null?(g=q.tail,q.rendering=g,q.tail=g.sibling,q.renderingStartTime=wr(),g.sibling=null,S=T.current,Ir(T,k?S&1|2:S&1),g):(si(g),null);case 22:case 23:return kf(),k=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(g.flags|=8192),k&&(g.mode&1)!==0?(za&1073741824)!==0&&(si(g),g.subtreeFlags&6&&(g.flags|=8192)):si(g),null;case 24:return null;case 25:return null}throw Error(n(156,g.tag))}function sy(h,g){switch(lu(g),g.tag){case 1:return yi(g.type)&&sl(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return m(),jr(Ii),jr(oi),L(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 5:return b(g),null;case 13:if(jr(T),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(n(340));da()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return jr(T),null;case 4:return m(),null;case 10:return du(g.type._context),null;case 22:case 23:return kf(),null;case 24:return null;default:return null}}var fh=!1,ea=!1,ly=typeof WeakSet=="function"?WeakSet:Set,qt=null;function ph(h,g){var S=h.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(k){Fn(h,g,k)}else S.current=null}function Pf(h,g,S){try{S()}catch(k){Fn(h,g,k)}}var cy=!1;function _m(h,g){if(ru=gi,h=id(),Yl(h)){if("selectionStart"in h)var S={start:h.selectionStart,end:h.selectionEnd};else e:{S=(S=h.ownerDocument)&&S.defaultView||window;var k=S.getSelection&&S.getSelection();if(k&&k.rangeCount!==0){S=k.anchorNode;var B=k.anchorOffset,q=k.focusNode;k=k.focusOffset;try{S.nodeType,q.nodeType}catch{S=null;break e}var se=0,Te=-1,ze=-1,it=0,bt=0,Tt=h,xt=null;t:for(;;){for(var Nt;Tt!==S||B!==0&&Tt.nodeType!==3||(Te=se+B),Tt!==q||k!==0&&Tt.nodeType!==3||(ze=se+k),Tt.nodeType===3&&(se+=Tt.nodeValue.length),(Nt=Tt.firstChild)!==null;)xt=Tt,Tt=Nt;for(;;){if(Tt===h)break t;if(xt===S&&++it===B&&(Te=se),xt===q&&++bt===k&&(ze=se),(Nt=Tt.nextSibling)!==null)break;Tt=xt,xt=Tt.parentNode}Tt=Nt}S=Te===-1||ze===-1?null:{start:Te,end:ze}}else S=null}S=S||{start:0,end:0}}else S=null;for(tl={focusedElem:h,selectionRange:S},gi=!1,qt=g;qt!==null;)if(g=qt,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,qt=h;else for(;qt!==null;){g=qt;try{var Ht=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Ht!==null){var Xt=Ht.memoizedProps,Hn=Ht.memoizedState,Je=g.stateNode,Fe=Je.getSnapshotBeforeUpdate(g.elementType===g.type?Xt:Li(g.type,Xt),Hn);Je.__reactInternalSnapshotBeforeUpdate=Fe}break;case 3:var Qe=g.stateNode.containerInfo;Qe.nodeType===1?Qe.textContent="":Qe.nodeType===9&&Qe.documentElement&&Qe.removeChild(Qe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(kt){Fn(g,g.return,kt)}if(h=g.sibling,h!==null){h.return=g.return,qt=h;break}qt=g.return}return Ht=cy,cy=!1,Ht}function mh(h,g,S){var k=g.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var B=k=k.next;do{if((B.tag&h)===h){var q=B.destroy;B.destroy=void 0,q!==void 0&&Pf(g,S,q)}B=B.next}while(B!==k)}}function fd(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&h)===h){var k=S.create;S.destroy=k()}S=S.next}while(S!==g)}}function xm(h){var g=h.ref;if(g!==null){var S=h.stateNode;switch(h.tag){case 5:h=S;break;default:h=S}typeof g=="function"?g(h):g.current=h}}function uy(h){var g=h.alternate;g!==null&&(h.alternate=null,uy(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&(delete g[Tn],delete g[_s],delete g[iu],delete g[rl],delete g[nl])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function hy(h){return h.tag===5||h.tag===3||h.tag===4}function Tf(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||hy(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function pd(h,g,S){var k=h.tag;if(k===5||k===6)h=h.stateNode,g?S.nodeType===8?S.parentNode.insertBefore(h,g):S.insertBefore(h,g):(S.nodeType===8?(g=S.parentNode,g.insertBefore(h,S)):(g=S,g.appendChild(h)),S=S._reactRootContainer,S!=null||g.onclick!==null||(g.onclick=mo));else if(k!==4&&(h=h.child,h!==null))for(pd(h,g,S),h=h.sibling;h!==null;)pd(h,g,S),h=h.sibling}function Af(h,g,S){var k=h.tag;if(k===5||k===6)h=h.stateNode,g?S.insertBefore(h,g):S.appendChild(h);else if(k!==4&&(h=h.child,h!==null))for(Af(h,g,S),h=h.sibling;h!==null;)Af(h,g,S),h=h.sibling}var Bn=null,va=!1;function yc(h,g,S){for(S=S.child;S!==null;)dy(h,g,S),S=S.sibling}function dy(h,g,S){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount($a,S)}catch{}switch(S.tag){case 5:ea||ph(S,g);case 6:var k=Bn,B=va;Bn=null,yc(h,g,S),Bn=k,va=B,Bn!==null&&(va?(h=Bn,S=S.stateNode,h.nodeType===8?h.parentNode.removeChild(S):h.removeChild(S)):Bn.removeChild(S.stateNode));break;case 18:Bn!==null&&(va?(h=Bn,S=S.stateNode,h.nodeType===8?th(h.parentNode,S):h.nodeType===1&&th(h,S),la(h)):th(Bn,S.stateNode));break;case 4:k=Bn,B=va,Bn=S.stateNode.containerInfo,va=!0,yc(h,g,S),Bn=k,va=B;break;case 0:case 11:case 14:case 15:if(!ea&&(k=S.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){B=k=k.next;do{var q=B,se=q.destroy;q=q.tag,se!==void 0&&((q&2)!==0||(q&4)!==0)&&Pf(S,g,se),B=B.next}while(B!==k)}yc(h,g,S);break;case 1:if(!ea&&(ph(S,g),k=S.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=S.memoizedProps,k.state=S.memoizedState,k.componentWillUnmount()}catch(Te){Fn(S,g,Te)}yc(h,g,S);break;case 21:yc(h,g,S);break;case 22:S.mode&1?(ea=(k=ea)||S.memoizedState!==null,yc(h,g,S),ea=k):yc(h,g,S);break;default:yc(h,g,S)}}function fy(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var S=h.stateNode;S===null&&(S=h.stateNode=new ly),g.forEach(function(k){var B=xy.bind(null,h,k);S.has(k)||(S.add(k),k.then(B,B))})}}function qo(h,g){var S=g.deletions;if(S!==null)for(var k=0;k<S.length;k++){var B=S[k];try{var q=h,se=g,Te=se;e:for(;Te!==null;){switch(Te.tag){case 5:Bn=Te.stateNode,va=!1;break e;case 3:Bn=Te.stateNode.containerInfo,va=!0;break e;case 4:Bn=Te.stateNode.containerInfo,va=!0;break e}Te=Te.return}if(Bn===null)throw Error(n(160));dy(q,se,B),Bn=null,va=!1;var ze=B.alternate;ze!==null&&(ze.return=null),B.return=null}catch(it){Fn(B,g,it)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)py(g,h),g=g.sibling}function py(h,g){var S=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(qo(g,h),Cs(h),k&4){try{mh(3,h,h.return),fd(3,h)}catch(Xt){Fn(h,h.return,Xt)}try{mh(5,h,h.return)}catch(Xt){Fn(h,h.return,Xt)}}break;case 1:qo(g,h),Cs(h),k&512&&S!==null&&ph(S,S.return);break;case 5:if(qo(g,h),Cs(h),k&512&&S!==null&&ph(S,S.return),h.flags&32){var B=h.stateNode;try{ie(B,"")}catch(Xt){Fn(h,h.return,Xt)}}if(k&4&&(B=h.stateNode,B!=null)){var q=h.memoizedProps,se=S!==null?S.memoizedProps:q,Te=h.type,ze=h.updateQueue;if(h.updateQueue=null,ze!==null)try{Te==="input"&&q.type==="radio"&&q.name!=null&&Hr(B,q),$e(Te,se);var it=$e(Te,q);for(se=0;se<ze.length;se+=2){var bt=ze[se],Tt=ze[se+1];bt==="style"?Ee(B,Tt):bt==="dangerouslySetInnerHTML"?je(B,Tt):bt==="children"?ie(B,Tt):ee(B,bt,Tt,it)}switch(Te){case"input":vn(B,q);break;case"textarea":Fa(B,q);break;case"select":var xt=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!q.multiple;var Nt=q.value;Nt!=null?On(B,!!q.multiple,Nt,!1):xt!==!!q.multiple&&(q.defaultValue!=null?On(B,!!q.multiple,q.defaultValue,!0):On(B,!!q.multiple,q.multiple?[]:"",!1))}B[_s]=q}catch(Xt){Fn(h,h.return,Xt)}}break;case 6:if(qo(g,h),Cs(h),k&4){if(h.stateNode===null)throw Error(n(162));B=h.stateNode,q=h.memoizedProps;try{B.nodeValue=q}catch(Xt){Fn(h,h.return,Xt)}}break;case 3:if(qo(g,h),Cs(h),k&4&&S!==null&&S.memoizedState.isDehydrated)try{la(g.containerInfo)}catch(Xt){Fn(h,h.return,Xt)}break;case 4:qo(g,h),Cs(h);break;case 13:qo(g,h),Cs(h),B=h.child,B.flags&8192&&(q=B.memoizedState!==null,B.stateNode.isHidden=q,!q||B.alternate!==null&&B.alternate.memoizedState!==null||(vl=wr())),k&4&&fy(h);break;case 22:if(bt=S!==null&&S.memoizedState!==null,h.mode&1?(ea=(it=ea)||bt,qo(g,h),ea=it):qo(g,h),Cs(h),k&8192){if(it=h.memoizedState!==null,(h.stateNode.isHidden=it)&&!bt&&(h.mode&1)!==0)for(qt=h,bt=h.child;bt!==null;){for(Tt=qt=bt;qt!==null;){switch(xt=qt,Nt=xt.child,xt.tag){case 0:case 11:case 14:case 15:mh(4,xt,xt.return);break;case 1:ph(xt,xt.return);var Ht=xt.stateNode;if(typeof Ht.componentWillUnmount=="function"){k=xt,S=xt.return;try{g=k,Ht.props=g.memoizedProps,Ht.state=g.memoizedState,Ht.componentWillUnmount()}catch(Xt){Fn(k,S,Xt)}}break;case 5:ph(xt,xt.return);break;case 22:if(xt.memoizedState!==null){bm(Tt);continue}}Nt!==null?(Nt.return=xt,qt=Nt):bm(Tt)}bt=bt.sibling}e:for(bt=null,Tt=h;;){if(Tt.tag===5){if(bt===null){bt=Tt;try{B=Tt.stateNode,it?(q=B.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(Te=Tt.stateNode,ze=Tt.memoizedProps.style,se=ze!=null&&ze.hasOwnProperty("display")?ze.display:null,Te.style.display=Se("display",se))}catch(Xt){Fn(h,h.return,Xt)}}}else if(Tt.tag===6){if(bt===null)try{Tt.stateNode.nodeValue=it?"":Tt.memoizedProps}catch(Xt){Fn(h,h.return,Xt)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===h)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===h)break e;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===h)break e;bt===Tt&&(bt=null),Tt=Tt.return}bt===Tt&&(bt=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}break;case 19:qo(g,h),Cs(h),k&4&&fy(h);break;case 21:break;default:qo(g,h),Cs(h)}}function Cs(h){var g=h.flags;if(g&2){try{e:{for(var S=h.return;S!==null;){if(hy(S)){var k=S;break e}S=S.return}throw Error(n(160))}switch(k.tag){case 5:var B=k.stateNode;k.flags&32&&(ie(B,""),k.flags&=-33);var q=Tf(h);Af(h,q,B);break;case 3:case 4:var se=k.stateNode.containerInfo,Te=Tf(h);pd(h,Te,se);break;default:throw Error(n(161))}}catch(ze){Fn(h,h.return,ze)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function Z_(h,g,S){qt=h,Cf(h)}function Cf(h,g,S){for(var k=(h.mode&1)!==0;qt!==null;){var B=qt,q=B.child;if(B.tag===22&&k){var se=B.memoizedState!==null||fh;if(!se){var Te=B.alternate,ze=Te!==null&&Te.memoizedState!==null||ea;Te=fh;var it=ea;if(fh=se,(ea=ze)&&!it)for(qt=B;qt!==null;)se=qt,ze=se.child,se.tag===22&&se.memoizedState!==null?gh(B):ze!==null?(ze.return=se,qt=ze):gh(B);for(;q!==null;)qt=q,Cf(q),q=q.sibling;qt=B,fh=Te,ea=it}my(h)}else(B.subtreeFlags&8772)!==0&&q!==null?(q.return=B,qt=q):my(h)}}function my(h){for(;qt!==null;){var g=qt;if((g.flags&8772)!==0){var S=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:ea||fd(5,g);break;case 1:var k=g.stateNode;if(g.flags&4&&!ea)if(S===null)k.componentDidMount();else{var B=g.elementType===g.type?S.memoizedProps:Li(g.type,S.memoizedProps);k.componentDidUpdate(B,S.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var q=g.updateQueue;q!==null&&ch(g,q,k);break;case 3:var se=g.updateQueue;if(se!==null){if(S=null,g.child!==null)switch(g.child.tag){case 5:S=g.child.stateNode;break;case 1:S=g.child.stateNode}ch(g,se,S)}break;case 5:var Te=g.stateNode;if(S===null&&g.flags&4){S=Te;var ze=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":ze.autoFocus&&S.focus();break;case"img":ze.src&&(S.src=ze.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var it=g.alternate;if(it!==null){var bt=it.memoizedState;if(bt!==null){var Tt=bt.dehydrated;Tt!==null&&la(Tt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ea||g.flags&512&&xm(g)}catch(xt){Fn(g,g.return,xt)}}if(g===h){qt=null;break}if(S=g.sibling,S!==null){S.return=g.return,qt=S;break}qt=g.return}}function bm(h){for(;qt!==null;){var g=qt;if(g===h){qt=null;break}var S=g.sibling;if(S!==null){S.return=g.return,qt=S;break}qt=g.return}}function gh(h){for(;qt!==null;){var g=qt;try{switch(g.tag){case 0:case 11:case 15:var S=g.return;try{fd(4,g)}catch(ze){Fn(g,S,ze)}break;case 1:var k=g.stateNode;if(typeof k.componentDidMount=="function"){var B=g.return;try{k.componentDidMount()}catch(ze){Fn(g,B,ze)}}var q=g.return;try{xm(g)}catch(ze){Fn(g,q,ze)}break;case 5:var se=g.return;try{xm(g)}catch(ze){Fn(g,se,ze)}}}catch(ze){Fn(g,g.return,ze)}if(g===h){qt=null;break}var Te=g.sibling;if(Te!==null){Te.return=g.return,qt=Te;break}qt=g.return}}var X_=Math.ceil,_n=oe.ReactCurrentDispatcher,vc=oe.ReactCurrentOwner,Ja=oe.ReactCurrentBatchConfig,Br=0,ti=null,Cn=null,wi=0,za=0,Es=ua(0),ri=0,Ms=null,ks=0,yl=0,vu=0,md=null,_a=null,vl=0,yh=1/0,Is=null,_c=!1,gd=null,_l=null,yd=!1,xc=null,Ef=0,vd=0,wm=null,Mf=-1,xl=0;function xa(){return(Br&6)!==0?wr():Mf!==-1?Mf:Mf=wr()}function bc(h){return(h.mode&1)===0?1:(Br&2)!==0&&wi!==0?wi&-wi:lm.transition!==null?(xl===0&&(xl=Vs()),xl):(h=$r,h!==0||(h=window.event,h=h===void 0?16:$l(h.type)),h)}function bo(h,g,S,k){if(50<vd)throw vd=0,wm=null,Error(n(185));qs(h,S,k),((Br&2)===0||h!==ti)&&(h===ti&&((Br&2)===0&&(yl|=S),ri===4&&Os(h,wi)),ja(h,k),S===1&&Br===0&&(g.mode&1)===0&&(yh=wr()+500,Xi&&ws()))}function ja(h,g){var S=h.callbackNode;Nh(h,g);var k=Ll(h,h===ti?wi:0);if(k===0)S!==null&&Dc(S),h.callbackNode=null,h.callbackPriority=0;else if(g=k&-k,h.callbackPriority!==g){if(S!=null&&Dc(S),g===1)h.tag===0?sm(gy.bind(null,h)):oc(gy.bind(null,h)),eh(function(){(Br&6)===0&&ws()}),S=null;else{switch(Aa(k)){case 1:S=mi;break;case 4:S=Kr;break;case 16:S=zc;break;case 536870912:S=Uu;break;default:S=zc}S=wy(S,Sm.bind(null,h))}h.callbackPriority=g,h.callbackNode=S}}function Sm(h,g){if(Mf=-1,xl=0,(Br&6)!==0)throw Error(n(327));var S=h.callbackNode;if(xu()&&h.callbackNode!==S)return null;var k=Ll(h,h===ti?wi:0);if(k===0)return null;if((k&30)!==0||(k&h.expiredLanes)!==0||g)g=Of(h,k);else{g=k;var B=Br;Br|=2;var q=vh();(ti!==h||wi!==g)&&(Is=null,yh=wr()+500,_u(h,g));do try{Y_();break}catch(Te){yy(h,Te)}while(!0);sc(),_n.current=q,Br=B,Cn!==null?g=0:(ti=null,wi=0,g=ri)}if(g!==0){if(g===2&&(B=Nc(h),B!==0&&(k=B,g=Pm(h,B))),g===1)throw S=Ms,_u(h,0),Os(h,k),ja(h,wr()),S;if(g===6)Os(h,k);else{if(B=h.current.alternate,(k&30)===0&&!xd(B)&&(g=Of(h,k),g===2&&(q=Nc(h),q!==0&&(k=q,g=Pm(h,q))),g===1))throw S=Ms,_u(h,0),Os(h,k),ja(h,wr()),S;switch(h.finishedWork=B,h.finishedLanes=k,g){case 0:case 1:throw Error(n(345));case 2:Sc(h,_a,Is);break;case 3:if(Os(h,k),(k&130023424)===k&&(g=vl+500-wr(),10<g)){if(Ll(h,0)!==0)break;if(B=h.suspendedLanes,(B&k)!==k){xa(),h.pingedLanes|=h.suspendedLanes&B;break}h.timeoutHandle=nu(Sc.bind(null,h,_a,Is),g);break}Sc(h,_a,Is);break;case 4:if(Os(h,k),(k&4194240)===k)break;for(g=h.eventTimes,B=-1;0<k;){var se=31-Ta(k);q=1<<se,se=g[se],se>B&&(B=se),k&=~q}if(k=B,k=wr()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*X_(k/1960))-k,10<k){h.timeoutHandle=nu(Sc.bind(null,h,_a,Is),k);break}Sc(h,_a,Is);break;case 5:Sc(h,_a,Is);break;default:throw Error(n(329))}}}return ja(h,wr()),h.callbackNode===S?Sm.bind(null,h):null}function Pm(h,g){var S=md;return h.current.memoizedState.isDehydrated&&(_u(h,g).flags|=256),h=Of(h,g),h!==2&&(g=_a,_a=S,g!==null&&_d(g)),h}function _d(h){_a===null?_a=h:_a.push.apply(_a,h)}function xd(h){for(var g=h;;){if(g.flags&16384){var S=g.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var k=0;k<S.length;k++){var B=S[k],q=B.getSnapshot;B=B.value;try{if(!Za(q(),B))return!1}catch{return!1}}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Os(h,g){for(g&=~vu,g&=~yl,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var S=31-Ta(g),k=1<<S;h[S]=-1,g&=~k}}function gy(h){if((Br&6)!==0)throw Error(n(327));xu();var g=Ll(h,0);if((g&1)===0)return ja(h,wr()),null;var S=Of(h,g);if(h.tag!==0&&S===2){var k=Nc(h);k!==0&&(g=k,S=Pm(h,k))}if(S===1)throw S=Ms,_u(h,0),Os(h,g),ja(h,wr()),S;if(S===6)throw Error(n(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,Sc(h,_a,Is),ja(h,wr()),null}function Tm(h,g){var S=Br;Br|=1;try{return h(g)}finally{Br=S,Br===0&&(yh=wr()+500,Xi&&ws())}}function wc(h){xc!==null&&xc.tag===0&&(Br&6)===0&&xu();var g=Br;Br|=1;var S=Ja.transition,k=$r;try{if(Ja.transition=null,$r=1,h)return h()}finally{$r=k,Ja.transition=S,Br=g,(Br&6)===0&&ws()}}function kf(){za=Es.current,jr(Es)}function _u(h,g){h.finishedWork=null,h.finishedLanes=0;var S=h.timeoutHandle;if(S!==-1&&(h.timeoutHandle=-1,ff(S)),Cn!==null)for(S=Cn.return;S!==null;){var k=S;switch(lu(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&sl();break;case 3:m(),jr(Ii),jr(oi),L();break;case 5:b(k);break;case 4:m();break;case 13:jr(T);break;case 19:jr(T);break;case 10:du(k.type._context);break;case 22:case 23:kf()}S=S.return}if(ti=h,Cn=h=wo(h.current,null),wi=za=g,ri=0,Ms=null,vu=yl=ks=0,_a=md=null,di!==null){for(g=0;g<di.length;g++)if(S=di[g],k=S.interleaved,k!==null){S.interleaved=null;var B=k.next,q=S.pending;if(q!==null){var se=q.next;q.next=B,k.next=se}S.pending=k}di=null}return h}function yy(h,g){do{var S=Cn;try{if(sc(),U.current=bi,pe){for(var k=X.memoizedState;k!==null;){var B=k.queue;B!==null&&(B.pending=null),k=k.next}pe=!1}if(W=0,he=ne=X=null,me=!1,ye=0,vc.current=null,S===null||S.return===null){ri=1,Ms=g,Cn=null;break}e:{var q=h,se=S.return,Te=S,ze=g;if(g=wi,Te.flags|=32768,ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var it=ze,bt=Te,Tt=bt.tag;if((bt.mode&1)===0&&(Tt===0||Tt===11||Tt===15)){var xt=bt.alternate;xt?(bt.updateQueue=xt.updateQueue,bt.memoizedState=xt.memoizedState,bt.lanes=xt.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var Nt=ey(se);if(Nt!==null){Nt.flags&=-257,mf(Nt,se,Te,q,g),Nt.mode&1&&um(q,it,g),g=Nt,ze=it;var Ht=g.updateQueue;if(Ht===null){var Xt=new Set;Xt.add(ze),g.updateQueue=Xt}else Ht.add(ze);break e}else{if((g&1)===0){um(q,it,g),If();break e}ze=Error(n(426))}}else if(yn&&Te.mode&1){var Hn=ey(se);if(Hn!==null){(Hn.flags&65536)===0&&(Hn.flags|=256),mf(Hn,se,Te,q,g),Gr(ml(ze,Te));break e}}q=ze=ml(ze,Te),ri!==4&&(ri=2),md===null?md=[q]:md.push(q),q=se;do{switch(q.tag){case 3:q.flags|=65536,g&=-g,q.lanes|=g;var Je=mc(q,ze,g);fu(q,Je);break e;case 1:Te=ze;var Fe=q.type,Qe=q.stateNode;if((q.flags&128)===0&&(typeof Fe.getDerivedStateFromError=="function"||Qe!==null&&typeof Qe.componentDidCatch=="function"&&(_l===null||!_l.has(Qe)))){q.flags|=65536,g&=-g,q.lanes|=g;var kt=gc(q,Te,g);fu(q,kt);break e}}q=q.return}while(q!==null)}_y(S)}catch(Kt){g=Kt,Cn===S&&S!==null&&(Cn=S=S.return);continue}break}while(!0)}function vh(){var h=_n.current;return _n.current=bi,h===null?bi:h}function If(){(ri===0||ri===3||ri===2)&&(ri=4),ti===null||(ks&268435455)===0&&(yl&268435455)===0||Os(ti,wi)}function Of(h,g){var S=Br;Br|=2;var k=vh();(ti!==h||wi!==g)&&(Is=null,_u(h,g));do try{K_();break}catch(B){yy(h,B)}while(!0);if(sc(),Br=S,_n.current=k,Cn!==null)throw Error(n(261));return ti=null,wi=0,ri}function K_(){for(;Cn!==null;)vy(Cn)}function Y_(){for(;Cn!==null&&!lo();)vy(Cn)}function vy(h){var g=by(h.alternate,h,za);h.memoizedProps=h.pendingProps,g===null?_y(h):Cn=g,vc.current=null}function _y(h){var g=h;do{var S=g.alternate;if(h=g.return,(g.flags&32768)===0){if(S=ya(S,g,za),S!==null){Cn=S;return}}else{if(S=sy(S,g),S!==null){S.flags&=32767,Cn=S;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{ri=6,Cn=null;return}}if(g=g.sibling,g!==null){Cn=g;return}Cn=g=h}while(g!==null);ri===0&&(ri=5)}function Sc(h,g,S){var k=$r,B=Ja.transition;try{Ja.transition=null,$r=1,Am(h,g,S,k)}finally{Ja.transition=B,$r=k}return null}function Am(h,g,S,k){do xu();while(xc!==null);if((Br&6)!==0)throw Error(n(327));S=h.finishedWork;var B=h.finishedLanes;if(S===null)return null;if(h.finishedWork=null,h.finishedLanes=0,S===h.current)throw Error(n(177));h.callbackNode=null,h.callbackPriority=0;var q=S.lanes|S.childLanes;if(Jp(h,q),h===ti&&(Cn=ti=null,wi=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||yd||(yd=!0,wy(zc,function(){return xu(),null})),q=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||q){q=Ja.transition,Ja.transition=null;var se=$r;$r=1;var Te=Br;Br|=4,vc.current=null,_m(h,S),py(S,h),Ju(tl),gi=!!ru,tl=ru=null,h.current=S,Z_(S),zl(),Br=Te,$r=se,Ja.transition=q}else h.current=S;if(yd&&(yd=!1,xc=h,Ef=B),q=h.pendingLanes,q===0&&(_l=null),Lh(S.stateNode),ja(h,wr()),g!==null)for(k=h.onRecoverableError,S=0;S<g.length;S++)B=g[S],k(B.value,{componentStack:B.stack,digest:B.digest});if(_c)throw _c=!1,h=gd,gd=null,h;return(Ef&1)!==0&&h.tag!==0&&xu(),q=h.pendingLanes,(q&1)!==0?h===wm?vd++:(vd=0,wm=h):vd=0,ws(),null}function xu(){if(xc!==null){var h=Aa(Ef),g=Ja.transition,S=$r;try{if(Ja.transition=null,$r=16>h?16:h,xc===null)var k=!1;else{if(h=xc,xc=null,Ef=0,(Br&6)!==0)throw Error(n(331));var B=Br;for(Br|=4,qt=h.current;qt!==null;){var q=qt,se=q.child;if((qt.flags&16)!==0){var Te=q.deletions;if(Te!==null){for(var ze=0;ze<Te.length;ze++){var it=Te[ze];for(qt=it;qt!==null;){var bt=qt;switch(bt.tag){case 0:case 11:case 15:mh(8,bt,q)}var Tt=bt.child;if(Tt!==null)Tt.return=bt,qt=Tt;else for(;qt!==null;){bt=qt;var xt=bt.sibling,Nt=bt.return;if(uy(bt),bt===it){qt=null;break}if(xt!==null){xt.return=Nt,qt=xt;break}qt=Nt}}}var Ht=q.alternate;if(Ht!==null){var Xt=Ht.child;if(Xt!==null){Ht.child=null;do{var Hn=Xt.sibling;Xt.sibling=null,Xt=Hn}while(Xt!==null)}}qt=q}}if((q.subtreeFlags&2064)!==0&&se!==null)se.return=q,qt=se;else e:for(;qt!==null;){if(q=qt,(q.flags&2048)!==0)switch(q.tag){case 0:case 11:case 15:mh(9,q,q.return)}var Je=q.sibling;if(Je!==null){Je.return=q.return,qt=Je;break e}qt=q.return}}var Fe=h.current;for(qt=Fe;qt!==null;){se=qt;var Qe=se.child;if((se.subtreeFlags&2064)!==0&&Qe!==null)Qe.return=se,qt=Qe;else e:for(se=Fe;qt!==null;){if(Te=qt,(Te.flags&2048)!==0)try{switch(Te.tag){case 0:case 11:case 15:fd(9,Te)}}catch(Kt){Fn(Te,Te.return,Kt)}if(Te===se){qt=null;break e}var kt=Te.sibling;if(kt!==null){kt.return=Te.return,qt=kt;break e}qt=Te.return}}if(Br=B,ws(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot($a,h)}catch{}k=!0}return k}finally{$r=S,Ja.transition=g}}return!1}function Cm(h,g,S){g=ml(S,g),g=mc(h,g,1),h=Ji(h,g,1),g=xa(),h!==null&&(qs(h,1,g),ja(h,g))}function Fn(h,g,S){if(h.tag===3)Cm(h,h,S);else for(;g!==null;){if(g.tag===3){Cm(g,h,S);break}else if(g.tag===1){var k=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(_l===null||!_l.has(k))){h=ml(S,h),h=gc(g,h,1),g=Ji(g,h,1),h=xa(),g!==null&&(qs(g,1,h),ja(g,h));break}}g=g.return}}function J_(h,g,S){var k=h.pingCache;k!==null&&k.delete(g),g=xa(),h.pingedLanes|=h.suspendedLanes&S,ti===h&&(wi&S)===S&&(ri===4||ri===3&&(wi&130023424)===wi&&500>wr()-vl?_u(h,0):vu|=S),ja(h,g)}function bd(h,g){g===0&&((h.mode&1)===0?g=1:(g=qu,qu<<=1,(qu&130023424)===0&&(qu=4194304)));var S=xa();h=Ur(h,g),h!==null&&(qs(h,g,S),ja(h,S))}function Q_(h){var g=h.memoizedState,S=0;g!==null&&(S=g.retryLane),bd(h,S)}function xy(h,g){var S=0;switch(h.tag){case 13:var k=h.stateNode,B=h.memoizedState;B!==null&&(S=B.retryLane);break;case 19:k=h.stateNode;break;default:throw Error(n(314))}k!==null&&k.delete(g),bd(h,S)}var by;by=function(h,g,S){if(h!==null)if(h.memoizedProps!==g.pendingProps||Ii.current)Bi=!0;else{if((h.lanes&S)===0&&(g.flags&128)===0)return Bi=!1,oy(h,g,S);Bi=(h.flags&131072)!==0}else Bi=!1,yn&&(g.flags&1048576)!==0&&nh(g,Ri,g.index);switch(g.lanes=0,g.tag){case 2:var k=g.type;wf(h,g),h=g.pendingProps;var B=Ka(g,oi.current);jn(g,S),B=Ie(null,g,k,h,B,S);var q=xe();return g.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,yi(k)?(q=!0,Oi(g)):q=!1,g.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,cc(g),B.updater=Ra,g.stateNode=B,B._reactInternals=g,xo(g,k,h,S),g=dm(null,g,k,!0,q,S)):(g.tag=0,yn&&q&&Ar(g),Qi(null,g,B,S),g=g.child),g;case 16:k=g.elementType;e:{switch(wf(h,g),h=g.pendingProps,B=k._init,k=B(k._payload),g.type=k,B=g.tag=t0(k),h=Li(k,h),B){case 0:g=vf(null,g,k,h,S);break e;case 1:g=mu(null,g,k,h,S);break e;case 11:g=ry(null,g,k,h,S);break e;case 14:g=gf(null,g,k,Li(k.type,h),S);break e}throw Error(n(306,k,""))}return g;case 0:return k=g.type,B=g.pendingProps,B=g.elementType===k?B:Li(k,B),vf(h,g,k,B,S);case 1:return k=g.type,B=g.pendingProps,B=g.elementType===k?B:Li(k,B),mu(h,g,k,B,S);case 3:e:{if(gu(g),h===null)throw Error(n(387));k=g.pendingProps,q=g.memoizedState,B=q.element,uc(h,g),Oa(g,k,null,S);var se=g.memoizedState;if(k=se.element,q.isDehydrated)if(q={element:k,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},g.updateQueue.baseState=q,g.memoizedState=q,g.flags&256){B=ml(Error(n(423)),g),g=dd(h,g,k,S,B);break e}else if(k!==B){B=ml(Error(n(424)),g),g=dd(h,g,k,S,B);break e}else for(zi=go(g.stateNode.containerInfo.firstChild),Yi=g,yn=!0,Ia=null,S=pf(g,null,k,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(da(),k===B){g=gl(h,g,S);break e}Qi(h,g,k,S)}g=g.child}return g;case 5:return v(g),h===null&&ah(g),k=g.type,B=g.pendingProps,q=h!==null?h.memoizedProps:null,se=B.children,ac(k,B)?se=null:q!==null&&ac(k,q)&&(g.flags|=32),hm(h,g),Qi(h,g,se,S),g.child;case 6:return h===null&&ah(g),null;case 13:return iy(h,g,S);case 4:return c(g,g.stateNode.containerInfo),k=g.pendingProps,h===null?g.child=ul(g,null,k,S):Qi(h,g,k,S),g.child;case 11:return k=g.type,B=g.pendingProps,B=g.elementType===k?B:Li(k,B),ry(h,g,k,B,S);case 7:return Qi(h,g,g.pendingProps,S),g.child;case 8:return Qi(h,g,g.pendingProps.children,S),g.child;case 12:return Qi(h,g,g.pendingProps.children,S),g.child;case 10:e:{if(k=g.type._context,B=g.pendingProps,q=g.memoizedProps,se=B.value,Ir(fa,k._currentValue),k._currentValue=se,q!==null)if(Za(q.value,se)){if(q.children===B.children&&!Ii.current){g=gl(h,g,S);break e}}else for(q=g.child,q!==null&&(q.return=g);q!==null;){var Te=q.dependencies;if(Te!==null){se=q.child;for(var ze=Te.firstContext;ze!==null;){if(ze.context===k){if(q.tag===1){ze=ji(-1,S&-S),ze.tag=2;var it=q.updateQueue;if(it!==null){it=it.shared;var bt=it.pending;bt===null?ze.next=ze:(ze.next=bt.next,bt.next=ze),it.pending=ze}}q.lanes|=S,ze=q.alternate,ze!==null&&(ze.lanes|=S),lc(q.return,S,g),Te.lanes|=S;break}ze=ze.next}}else if(q.tag===10)se=q.type===g.type?null:q.child;else if(q.tag===18){if(se=q.return,se===null)throw Error(n(341));se.lanes|=S,Te=se.alternate,Te!==null&&(Te.lanes|=S),lc(se,S,g),se=q.sibling}else se=q.child;if(se!==null)se.return=q;else for(se=q;se!==null;){if(se===g){se=null;break}if(q=se.sibling,q!==null){q.return=se.return,se=q;break}se=se.return}q=se}Qi(h,g,B.children,S),g=g.child}return g;case 9:return B=g.type,k=g.pendingProps.children,jn(g,S),B=pa(B),k=k(B),g.flags|=1,Qi(h,g,k,S),g.child;case 14:return k=g.type,B=Li(k,g.pendingProps),B=Li(k.type,B),gf(h,g,k,B,S);case 15:return ny(h,g,g.type,g.pendingProps,S);case 17:return k=g.type,B=g.pendingProps,B=g.elementType===k?B:Li(k,B),wf(h,g),g.tag=1,yi(k)?(h=!0,Oi(g)):h=!1,jn(g,S),Ni(g,k,B),xo(g,k,B,S),dm(null,g,k,!0,h,S);case 19:return mm(h,g,S);case 22:return yf(h,g,S)}throw Error(n(156,g.tag))};function wy(h,g){return Eo(h,g)}function e0(h,g,S,k){this.tag=h,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(h,g,S,k){return new e0(h,g,S,k)}function Em(h){return h=h.prototype,!(!h||!h.isReactComponent)}function t0(h){if(typeof h=="function")return Em(h)?1:0;if(h!=null){if(h=h.$$typeof,h===Ve)return 11;if(h===at)return 14}return 2}function wo(h,g){var S=h.alternate;return S===null?(S=Qa(h.tag,g,h.key,h.mode),S.elementType=h.elementType,S.type=h.type,S.stateNode=h.stateNode,S.alternate=h,h.alternate=S):(S.pendingProps=g,S.type=h.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=h.flags&14680064,S.childLanes=h.childLanes,S.lanes=h.lanes,S.child=h.child,S.memoizedProps=h.memoizedProps,S.memoizedState=h.memoizedState,S.updateQueue=h.updateQueue,g=h.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=h.sibling,S.index=h.index,S.ref=h.ref,S}function $n(h,g,S,k,B,q){var se=2;if(k=h,typeof h=="function")Em(h)&&(se=1);else if(typeof h=="string")se=5;else e:switch(h){case ue:return bl(S.children,B,q,g);case ge:se=8,B|=8;break;case Oe:return h=Qa(12,S,g,B|2),h.elementType=Oe,h.lanes=q,h;case Ye:return h=Qa(13,S,g,B),h.elementType=Ye,h.lanes=q,h;case ot:return h=Qa(19,S,g,B),h.elementType=ot,h.lanes=q,h;case lt:return wd(S,B,q,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case We:se=10;break e;case Re:se=9;break e;case Ve:se=11;break e;case at:se=14;break e;case st:se=16,k=null;break e}throw Error(n(130,h==null?h:typeof h,""))}return g=Qa(se,S,g,B),g.elementType=h,g.type=k,g.lanes=q,g}function bl(h,g,S,k){return h=Qa(7,h,k,g),h.lanes=S,h}function wd(h,g,S,k){return h=Qa(22,h,k,g),h.elementType=lt,h.lanes=S,h.stateNode={isHidden:!1},h}function Rf(h,g,S){return h=Qa(6,h,null,g),h.lanes=S,h}function Sd(h,g,S){return g=Qa(4,h.children!==null?h.children:[],h.key,g),g.lanes=S,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function _h(h,g,S,k,B){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bc(0),this.expirationTimes=Bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bc(0),this.identifierPrefix=k,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function Df(h,g,S,k,B,q,se,Te,ze){return h=new _h(h,g,S,Te,ze),g===1?(g=1,q===!0&&(g|=8)):g=0,q=Qa(3,null,null,g),h.current=q,q.stateNode=h,q.memoizedState={element:k,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(q),h}function r0(h,g,S){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:k==null?null:""+k,children:h,containerInfo:g,implementation:S}}function Sy(h){if(!h)return ha;h=h._reactInternals;e:{if(cr(h)!==h||h.tag!==1)throw Error(n(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(yi(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(n(171))}if(h.tag===1){var S=h.type;if(yi(S))return su(h,S,g)}return g}function Py(h,g,S,k,B,q,se,Te,ze){return h=Df(S,k,!0,h,B,q,se,Te,ze),h.context=Sy(null),S=h.current,k=xa(),B=bc(S),q=ji(k,B),q.callback=g??null,Ji(S,q,B),h.current.lanes=B,qs(h,B,k),ja(h,k),h}function zf(h,g,S,k){var B=g.current,q=xa(),se=bc(B);return S=Sy(S),g.context===null?g.context=S:g.pendingContext=S,g=ji(q,se),g.payload={element:h},k=k===void 0?null:k,k!==null&&(g.callback=k),h=Ji(B,g,se),h!==null&&(bo(h,B,se,q),hc(h,B,se)),se}function jf(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function Ty(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var S=h.retryLane;h.retryLane=S!==0&&S<g?S:g}}function Mm(h,g){Ty(h,g),(h=h.alternate)&&Ty(h,g)}function n0(){return null}var Ay=typeof reportError=="function"?reportError:function(h){console.error(h)};function km(h){this._internalRoot=h}Lf.prototype.render=km.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(n(409));zf(h,g,null,null)},Lf.prototype.unmount=km.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;wc(function(){zf(null,h,null,null)}),g[Ma]=null}};function Lf(h){this._internalRoot=h}Lf.prototype.unstable_scheduleHydration=function(h){if(h){var g=co();h={blockedOn:null,target:h,priority:g};for(var S=0;S<on.length&&g!==0&&g<on[S].priority;S++);on.splice(S,0,h),S===0&&hi(h)}};function Im(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Pd(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function Nf(){}function Cy(h,g,S,k,B){if(B){if(typeof k=="function"){var q=k;k=function(){var it=jf(se);q.call(it)}}var se=Py(g,k,h,0,null,!1,!1,"",Nf);return h._reactRootContainer=se,h[Ma]=se.current,vs(h.nodeType===8?h.parentNode:h),wc(),se}for(;B=h.lastChild;)h.removeChild(B);if(typeof k=="function"){var Te=k;k=function(){var it=jf(ze);Te.call(it)}}var ze=Df(h,0,!1,null,null,!1,!1,"",Nf);return h._reactRootContainer=ze,h[Ma]=ze.current,vs(h.nodeType===8?h.parentNode:h),wc(function(){zf(g,ze,S,k)}),ze}function Go(h,g,S,k,B){var q=S._reactRootContainer;if(q){var se=q;if(typeof B=="function"){var Te=B;B=function(){var ze=jf(se);Te.call(ze)}}zf(g,se,h,B)}else se=Cy(S,g,h,B,k);return jf(se)}Sr=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var S=Lc(g.pendingLanes);S!==0&&(os(g,S|1),ja(g,wr()),(Br&6)===0&&(yh=wr()+500,ws()))}break;case 13:wc(function(){var k=Ur(h,1);if(k!==null){var B=xa();bo(k,h,1,B)}}),Mm(h,1)}},Mo=function(h){if(h.tag===13){var g=Ur(h,134217728);if(g!==null){var S=xa();bo(g,h,134217728,S)}Mm(h,134217728)}},ko=function(h){if(h.tag===13){var g=bc(h),S=Ur(h,g);if(S!==null){var k=xa();bo(S,h,g,k)}Mm(h,g)}},co=function(){return $r},ss=function(h,g){var S=$r;try{return $r=h,g()}finally{$r=S}},ct=function(h,g,S){switch(g){case"input":if(vn(h,S),g=S.name,S.type==="radio"&&g!=null){for(S=h;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<S.length;g++){var k=S[g];if(k!==h&&k.form===h.form){var B=au(k);if(!B)throw Error(n(90));pt(k),vn(k,B)}}}break;case"textarea":Fa(h,S);break;case"select":g=S.value,g!=null&&On(h,!!S.multiple,g,!1)}},pr=Tm,en=wc;var Td={usingClientEntryPoint:!1,Events:[il,al,au,Cr,Ut,Tm]},Rs={findFiberByHostInstance:Xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bf={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=gr(h),h===null?null:h.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||n0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{$a=bu.inject(Bf),ui=bu}catch{}}return So.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Td,So.createPortal=function(h,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Im(g))throw Error(n(200));return r0(h,g,null,S)},So.createRoot=function(h,g){if(!Im(h))throw Error(n(299));var S=!1,k="",B=Ay;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(k=g.identifierPrefix),g.onRecoverableError!==void 0&&(B=g.onRecoverableError)),g=Df(h,1,!1,null,null,S,!1,k,B),h[Ma]=g.current,vs(h.nodeType===8?h.parentNode:h),new km(g)},So.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=gr(g),h=h===null?null:h.stateNode,h},So.flushSync=function(h){return wc(h)},So.hydrate=function(h,g,S){if(!Pd(g))throw Error(n(200));return Go(null,h,g,!0,S)},So.hydrateRoot=function(h,g,S){if(!Im(h))throw Error(n(405));var k=S!=null&&S.hydratedSources||null,B=!1,q="",se=Ay;if(S!=null&&(S.unstable_strictMode===!0&&(B=!0),S.identifierPrefix!==void 0&&(q=S.identifierPrefix),S.onRecoverableError!==void 0&&(se=S.onRecoverableError)),g=Py(g,null,h,1,S??null,B,!1,q,se),h[Ma]=g.current,vs(h),k)for(h=0;h<k.length;h++)S=k[h],B=S._getVersion,B=B(S._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[S,B]:g.mutableSourceEagerHydrationData.push(S,B);return new Lf(g)},So.render=function(h,g,S){if(!Pd(g))throw Error(n(200));return Go(null,h,g,!1,S)},So.unmountComponentAtNode=function(h){if(!Pd(h))throw Error(n(40));return h._reactRootContainer?(wc(function(){Go(null,null,h,!1,function(){h._reactRootContainer=null,h[Ma]=null})}),!0):!1},So.unstable_batchedUpdates=Tm,So.unstable_renderSubtreeIntoContainer=function(h,g,S,k){if(!Pd(S))throw Error(n(200));if(h==null||h._reactInternals===void 0)throw Error(n(38));return Go(h,g,S,!1,k)},So.version="18.3.1-next-f1338f8080-20240426",So}var vT;function VO(){if(vT)return b0.exports;vT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),b0.exports=cL(),b0.exports}var _T;function uL(){if(_T)return jy;_T=1;var e=VO();return jy.createRoot=e.createRoot,jy.hydrateRoot=e.hydrateRoot,jy}var hL=uL(),be=u2();const Me=ln(be),qO=nL({__proto__:null,default:Me},[be]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fL=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,a)=>a?a.toUpperCase():n.toLowerCase()),xT=e=>{const t=fL(e);return t.charAt(0).toUpperCase()+t.slice(1)},GO=(...e)=>e.filter((t,n,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=be.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:u="",children:f,iconNode:p,...s},P)=>be.createElement("svg",{ref:P,...pL,width:t,height:t,stroke:e,strokeWidth:a?Number(n)*24/Number(t):n,className:GO("lucide",u),...s},[...p.map(([A,E])=>be.createElement(A,E)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=(e,t)=>{const n=be.forwardRef(({className:a,...u},f)=>be.createElement(mL,{ref:f,iconNode:t,className:GO(`lucide-${dL(xT(e))}`,`lucide-${e}`,a),...u}));return n.displayName=xT(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],yL=Fp("chart-column",gL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_L=Fp("check",vL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bL=Fp("chevron-down",xL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],SL=Fp("funnel",wL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],bT=Fp("search",PL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],AL=Fp("x",TL);function WO(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=WO(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Or(){for(var e,t,n=0,a="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=WO(e))&&(a&&(a+=" "),a+=t);return a}const h2="-",CL=e=>{const t=ML(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:p=>{const s=p.split(h2);return s[0]===""&&s.length!==1&&s.shift(),HO(s,t)||EL(p)},getConflictingClassGroupIds:(p,s)=>{const P=n[p]||[];return s&&a[p]?[...P,...a[p]]:P}}},HO=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),u=a?HO(e.slice(1),a):void 0;if(u)return u;if(t.validators.length===0)return;const f=e.join(h2);return t.validators.find(({validator:p})=>p(f))?.classGroupId},wT=/^\[(.+)\]$/,EL=e=>{if(wT.test(e)){const t=wT.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},ML=e=>{const{theme:t,classGroups:n}=e,a={nextPart:new Map,validators:[]};for(const u in n)Dw(n[u],a,u,t);return a},Dw=(e,t,n,a)=>{e.forEach(u=>{if(typeof u=="string"){const f=u===""?t:ST(t,u);f.classGroupId=n;return}if(typeof u=="function"){if(kL(u)){Dw(u(a),t,n,a);return}t.validators.push({validator:u,classGroupId:n});return}Object.entries(u).forEach(([f,p])=>{Dw(p,ST(t,f),n,a)})})},ST=(e,t)=>{let n=e;return t.split(h2).forEach(a=>{n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n},kL=e=>e.isThemeGetter,IL=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,a=new Map;const u=(f,p)=>{n.set(f,p),t++,t>e&&(t=0,a=n,n=new Map)};return{get(f){let p=n.get(f);if(p!==void 0)return p;if((p=a.get(f))!==void 0)return u(f,p),p},set(f,p){n.has(f)?n.set(f,p):u(f,p)}}},zw="!",jw=":",OL=jw.length,RL=e=>{const{prefix:t,experimentalParseClassName:n}=e;let a=u=>{const f=[];let p=0,s=0,P=0,A;for(let G=0;G<u.length;G++){let F=u[G];if(p===0&&s===0){if(F===jw){f.push(u.slice(P,G)),P=G+OL;continue}if(F==="/"){A=G;continue}}F==="["?p++:F==="]"?p--:F==="("?s++:F===")"&&s--}const E=f.length===0?u:u.substring(P),M=DL(E),D=M!==E,j=A&&A>P?A-P:void 0;return{modifiers:f,hasImportantModifier:D,baseClassName:M,maybePostfixModifierPosition:j}};if(t){const u=t+jw,f=a;a=p=>p.startsWith(u)?f(p.substring(u.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:p,maybePostfixModifierPosition:void 0}}if(n){const u=a;a=f=>n({className:f,parseClassName:u})}return a},DL=e=>e.endsWith(zw)?e.substring(0,e.length-1):e.startsWith(zw)?e.substring(1):e,zL=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const u=[];let f=[];return a.forEach(p=>{p[0]==="["||t[p]?(u.push(...f.sort(),p),f=[]):f.push(p)}),u.push(...f.sort()),u}},jL=e=>({cache:IL(e.cacheSize),parseClassName:RL(e),sortModifiers:zL(e),...CL(e)}),LL=/\s+/,NL=(e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:u,sortModifiers:f}=t,p=[],s=e.trim().split(LL);let P="";for(let A=s.length-1;A>=0;A-=1){const E=s[A],{isExternal:M,modifiers:D,hasImportantModifier:j,baseClassName:G,maybePostfixModifierPosition:F}=n(E);if(M){P=E+(P.length>0?" "+P:P);continue}let $=!!F,K=a($?G.substring(0,F):G);if(!K){if(!$){P=E+(P.length>0?" "+P:P);continue}if(K=a(G),!K){P=E+(P.length>0?" "+P:P);continue}$=!1}const J=f(D).join(":"),ee=j?J+zw:J,oe=ee+K;if(p.includes(oe))continue;p.push(oe);const Y=u(K,$);for(let re=0;re<Y.length;++re){const ue=Y[re];p.push(ee+ue)}P=E+(P.length>0?" "+P:P)}return P};function BL(){let e=0,t,n,a="";for(;e<arguments.length;)(t=arguments[e++])&&(n=ZO(t))&&(a&&(a+=" "),a+=n);return a}const ZO=e=>{if(typeof e=="string")return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=ZO(e[a]))&&(n&&(n+=" "),n+=t);return n};function FL(e,...t){let n,a,u,f=p;function p(P){const A=t.reduce((E,M)=>M(E),e());return n=jL(A),a=n.cache.get,u=n.cache.set,f=s,s(P)}function s(P){const A=a(P);if(A)return A;const E=NL(P,n);return u(P,E),E}return function(){return f(BL.apply(null,arguments))}}const Vi=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},XO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,KO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,$L=/^\d+\/\d+$/,UL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,VL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,GL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,WL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hf=e=>$L.test(e),Lr=e=>!!e&&!Number.isNaN(Number(e)),Sh=e=>!!e&&Number.isInteger(Number(e)),P0=e=>e.endsWith("%")&&Lr(e.slice(0,-1)),Su=e=>UL.test(e),HL=()=>!0,ZL=e=>VL.test(e)&&!qL.test(e),YO=()=>!1,XL=e=>GL.test(e),KL=e=>WL.test(e),YL=e=>!Yt(e)&&!Jt(e),JL=e=>$p(e,eR,YO),Yt=e=>XO.test(e),kd=e=>$p(e,tR,ZL),T0=e=>$p(e,n5,Lr),PT=e=>$p(e,JO,YO),QL=e=>$p(e,QO,KL),Ly=e=>$p(e,rR,XL),Jt=e=>KO.test(e),Lm=e=>Up(e,tR),e5=e=>Up(e,i5),TT=e=>Up(e,JO),t5=e=>Up(e,eR),r5=e=>Up(e,QO),Ny=e=>Up(e,rR,!0),$p=(e,t,n)=>{const a=XO.exec(e);return a?a[1]?t(a[1]):n(a[2]):!1},Up=(e,t,n=!1)=>{const a=KO.exec(e);return a?a[1]?t(a[1]):n:!1},JO=e=>e==="position"||e==="percentage",QO=e=>e==="image"||e==="url",eR=e=>e==="length"||e==="size"||e==="bg-size",tR=e=>e==="length",n5=e=>e==="number",i5=e=>e==="family-name",rR=e=>e==="shadow",a5=()=>{const e=Vi("color"),t=Vi("font"),n=Vi("text"),a=Vi("font-weight"),u=Vi("tracking"),f=Vi("leading"),p=Vi("breakpoint"),s=Vi("container"),P=Vi("spacing"),A=Vi("radius"),E=Vi("shadow"),M=Vi("inset-shadow"),D=Vi("text-shadow"),j=Vi("drop-shadow"),G=Vi("blur"),F=Vi("perspective"),$=Vi("aspect"),K=Vi("ease"),J=Vi("animate"),ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Y=()=>[...oe(),Jt,Yt],re=()=>["auto","hidden","clip","visible","scroll"],ue=()=>["auto","contain","none"],ge=()=>[Jt,Yt,P],Oe=()=>[Hf,"full","auto",...ge()],We=()=>[Sh,"none","subgrid",Jt,Yt],Re=()=>["auto",{span:["full",Sh,Jt,Yt]},Sh,Jt,Yt],Ve=()=>[Sh,"auto",Jt,Yt],Ye=()=>["auto","min","max","fr",Jt,Yt],ot=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],at=()=>["start","end","center","stretch","center-safe","end-safe"],st=()=>["auto",...ge()],lt=()=>[Hf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ge()],Ne=()=>[e,Jt,Yt],tt=()=>[...oe(),TT,PT,{position:[Jt,Yt]}],ut=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ce=()=>["auto","cover","contain",t5,JL,{size:[Jt,Yt]}],qe=()=>[P0,Lm,kd],yt=()=>["","none","full",A,Jt,Yt],Rt=()=>["",Lr,Lm,kd],$t=()=>["solid","dashed","dotted","double"],Wt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],er=()=>[Lr,P0,TT,PT],tr=()=>["","none",G,Jt,Yt],vt=()=>["none",Lr,Jt,Yt],Ft=()=>["none",Lr,Jt,Yt],ir=()=>[Lr,Jt,Yt],pt=()=>[Hf,"full",...ge()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Su],breakpoint:[Su],color:[HL],container:[Su],"drop-shadow":[Su],ease:["in","out","in-out"],font:[YL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Su],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Su],shadow:[Su],spacing:["px",Lr],text:[Su],"text-shadow":[Su],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Hf,Yt,Jt,$]}],container:["container"],columns:[{columns:[Lr,Yt,Jt,s]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Y()}],overflow:[{overflow:re()}],"overflow-x":[{"overflow-x":re()}],"overflow-y":[{"overflow-y":re()}],overscroll:[{overscroll:ue()}],"overscroll-x":[{"overscroll-x":ue()}],"overscroll-y":[{"overscroll-y":ue()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Oe()}],"inset-x":[{"inset-x":Oe()}],"inset-y":[{"inset-y":Oe()}],start:[{start:Oe()}],end:[{end:Oe()}],top:[{top:Oe()}],right:[{right:Oe()}],bottom:[{bottom:Oe()}],left:[{left:Oe()}],visibility:["visible","invisible","collapse"],z:[{z:[Sh,"auto",Jt,Yt]}],basis:[{basis:[Hf,"full","auto",s,...ge()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Lr,Hf,"auto","initial","none",Yt]}],grow:[{grow:["",Lr,Jt,Yt]}],shrink:[{shrink:["",Lr,Jt,Yt]}],order:[{order:[Sh,"first","last","none",Jt,Yt]}],"grid-cols":[{"grid-cols":We()}],"col-start-end":[{col:Re()}],"col-start":[{"col-start":Ve()}],"col-end":[{"col-end":Ve()}],"grid-rows":[{"grid-rows":We()}],"row-start-end":[{row:Re()}],"row-start":[{"row-start":Ve()}],"row-end":[{"row-end":Ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ye()}],"auto-rows":[{"auto-rows":Ye()}],gap:[{gap:ge()}],"gap-x":[{"gap-x":ge()}],"gap-y":[{"gap-y":ge()}],"justify-content":[{justify:[...ot(),"normal"]}],"justify-items":[{"justify-items":[...at(),"normal"]}],"justify-self":[{"justify-self":["auto",...at()]}],"align-content":[{content:["normal",...ot()]}],"align-items":[{items:[...at(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...at(),{baseline:["","last"]}]}],"place-content":[{"place-content":ot()}],"place-items":[{"place-items":[...at(),"baseline"]}],"place-self":[{"place-self":["auto",...at()]}],p:[{p:ge()}],px:[{px:ge()}],py:[{py:ge()}],ps:[{ps:ge()}],pe:[{pe:ge()}],pt:[{pt:ge()}],pr:[{pr:ge()}],pb:[{pb:ge()}],pl:[{pl:ge()}],m:[{m:st()}],mx:[{mx:st()}],my:[{my:st()}],ms:[{ms:st()}],me:[{me:st()}],mt:[{mt:st()}],mr:[{mr:st()}],mb:[{mb:st()}],ml:[{ml:st()}],"space-x":[{"space-x":ge()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ge()}],"space-y-reverse":["space-y-reverse"],size:[{size:lt()}],w:[{w:[s,"screen",...lt()]}],"min-w":[{"min-w":[s,"screen","none",...lt()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[p]},...lt()]}],h:[{h:["screen","lh",...lt()]}],"min-h":[{"min-h":["screen","lh","none",...lt()]}],"max-h":[{"max-h":["screen","lh",...lt()]}],"font-size":[{text:["base",n,Lm,kd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Jt,T0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",P0,Yt]}],"font-family":[{font:[e5,Yt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,Jt,Yt]}],"line-clamp":[{"line-clamp":[Lr,"none",Jt,T0]}],leading:[{leading:[f,...ge()]}],"list-image":[{"list-image":["none",Jt,Yt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Jt,Yt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Ne()}],"text-color":[{text:Ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$t(),"wavy"]}],"text-decoration-thickness":[{decoration:[Lr,"from-font","auto",Jt,kd]}],"text-decoration-color":[{decoration:Ne()}],"underline-offset":[{"underline-offset":[Lr,"auto",Jt,Yt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ge()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jt,Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jt,Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:tt()}],"bg-repeat":[{bg:ut()}],"bg-size":[{bg:Ce()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Sh,Jt,Yt],radial:["",Jt,Yt],conic:[Sh,Jt,Yt]},r5,QL]}],"bg-color":[{bg:Ne()}],"gradient-from-pos":[{from:qe()}],"gradient-via-pos":[{via:qe()}],"gradient-to-pos":[{to:qe()}],"gradient-from":[{from:Ne()}],"gradient-via":[{via:Ne()}],"gradient-to":[{to:Ne()}],rounded:[{rounded:yt()}],"rounded-s":[{"rounded-s":yt()}],"rounded-e":[{"rounded-e":yt()}],"rounded-t":[{"rounded-t":yt()}],"rounded-r":[{"rounded-r":yt()}],"rounded-b":[{"rounded-b":yt()}],"rounded-l":[{"rounded-l":yt()}],"rounded-ss":[{"rounded-ss":yt()}],"rounded-se":[{"rounded-se":yt()}],"rounded-ee":[{"rounded-ee":yt()}],"rounded-es":[{"rounded-es":yt()}],"rounded-tl":[{"rounded-tl":yt()}],"rounded-tr":[{"rounded-tr":yt()}],"rounded-br":[{"rounded-br":yt()}],"rounded-bl":[{"rounded-bl":yt()}],"border-w":[{border:Rt()}],"border-w-x":[{"border-x":Rt()}],"border-w-y":[{"border-y":Rt()}],"border-w-s":[{"border-s":Rt()}],"border-w-e":[{"border-e":Rt()}],"border-w-t":[{"border-t":Rt()}],"border-w-r":[{"border-r":Rt()}],"border-w-b":[{"border-b":Rt()}],"border-w-l":[{"border-l":Rt()}],"divide-x":[{"divide-x":Rt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Rt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...$t(),"hidden","none"]}],"divide-style":[{divide:[...$t(),"hidden","none"]}],"border-color":[{border:Ne()}],"border-color-x":[{"border-x":Ne()}],"border-color-y":[{"border-y":Ne()}],"border-color-s":[{"border-s":Ne()}],"border-color-e":[{"border-e":Ne()}],"border-color-t":[{"border-t":Ne()}],"border-color-r":[{"border-r":Ne()}],"border-color-b":[{"border-b":Ne()}],"border-color-l":[{"border-l":Ne()}],"divide-color":[{divide:Ne()}],"outline-style":[{outline:[...$t(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Lr,Jt,Yt]}],"outline-w":[{outline:["",Lr,Lm,kd]}],"outline-color":[{outline:Ne()}],shadow:[{shadow:["","none",E,Ny,Ly]}],"shadow-color":[{shadow:Ne()}],"inset-shadow":[{"inset-shadow":["none",M,Ny,Ly]}],"inset-shadow-color":[{"inset-shadow":Ne()}],"ring-w":[{ring:Rt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Ne()}],"ring-offset-w":[{"ring-offset":[Lr,kd]}],"ring-offset-color":[{"ring-offset":Ne()}],"inset-ring-w":[{"inset-ring":Rt()}],"inset-ring-color":[{"inset-ring":Ne()}],"text-shadow":[{"text-shadow":["none",D,Ny,Ly]}],"text-shadow-color":[{"text-shadow":Ne()}],opacity:[{opacity:[Lr,Jt,Yt]}],"mix-blend":[{"mix-blend":[...Wt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Wt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Lr]}],"mask-image-linear-from-pos":[{"mask-linear-from":er()}],"mask-image-linear-to-pos":[{"mask-linear-to":er()}],"mask-image-linear-from-color":[{"mask-linear-from":Ne()}],"mask-image-linear-to-color":[{"mask-linear-to":Ne()}],"mask-image-t-from-pos":[{"mask-t-from":er()}],"mask-image-t-to-pos":[{"mask-t-to":er()}],"mask-image-t-from-color":[{"mask-t-from":Ne()}],"mask-image-t-to-color":[{"mask-t-to":Ne()}],"mask-image-r-from-pos":[{"mask-r-from":er()}],"mask-image-r-to-pos":[{"mask-r-to":er()}],"mask-image-r-from-color":[{"mask-r-from":Ne()}],"mask-image-r-to-color":[{"mask-r-to":Ne()}],"mask-image-b-from-pos":[{"mask-b-from":er()}],"mask-image-b-to-pos":[{"mask-b-to":er()}],"mask-image-b-from-color":[{"mask-b-from":Ne()}],"mask-image-b-to-color":[{"mask-b-to":Ne()}],"mask-image-l-from-pos":[{"mask-l-from":er()}],"mask-image-l-to-pos":[{"mask-l-to":er()}],"mask-image-l-from-color":[{"mask-l-from":Ne()}],"mask-image-l-to-color":[{"mask-l-to":Ne()}],"mask-image-x-from-pos":[{"mask-x-from":er()}],"mask-image-x-to-pos":[{"mask-x-to":er()}],"mask-image-x-from-color":[{"mask-x-from":Ne()}],"mask-image-x-to-color":[{"mask-x-to":Ne()}],"mask-image-y-from-pos":[{"mask-y-from":er()}],"mask-image-y-to-pos":[{"mask-y-to":er()}],"mask-image-y-from-color":[{"mask-y-from":Ne()}],"mask-image-y-to-color":[{"mask-y-to":Ne()}],"mask-image-radial":[{"mask-radial":[Jt,Yt]}],"mask-image-radial-from-pos":[{"mask-radial-from":er()}],"mask-image-radial-to-pos":[{"mask-radial-to":er()}],"mask-image-radial-from-color":[{"mask-radial-from":Ne()}],"mask-image-radial-to-color":[{"mask-radial-to":Ne()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":oe()}],"mask-image-conic-pos":[{"mask-conic":[Lr]}],"mask-image-conic-from-pos":[{"mask-conic-from":er()}],"mask-image-conic-to-pos":[{"mask-conic-to":er()}],"mask-image-conic-from-color":[{"mask-conic-from":Ne()}],"mask-image-conic-to-color":[{"mask-conic-to":Ne()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:tt()}],"mask-repeat":[{mask:ut()}],"mask-size":[{mask:Ce()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Jt,Yt]}],filter:[{filter:["","none",Jt,Yt]}],blur:[{blur:tr()}],brightness:[{brightness:[Lr,Jt,Yt]}],contrast:[{contrast:[Lr,Jt,Yt]}],"drop-shadow":[{"drop-shadow":["","none",j,Ny,Ly]}],"drop-shadow-color":[{"drop-shadow":Ne()}],grayscale:[{grayscale:["",Lr,Jt,Yt]}],"hue-rotate":[{"hue-rotate":[Lr,Jt,Yt]}],invert:[{invert:["",Lr,Jt,Yt]}],saturate:[{saturate:[Lr,Jt,Yt]}],sepia:[{sepia:["",Lr,Jt,Yt]}],"backdrop-filter":[{"backdrop-filter":["","none",Jt,Yt]}],"backdrop-blur":[{"backdrop-blur":tr()}],"backdrop-brightness":[{"backdrop-brightness":[Lr,Jt,Yt]}],"backdrop-contrast":[{"backdrop-contrast":[Lr,Jt,Yt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Lr,Jt,Yt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Lr,Jt,Yt]}],"backdrop-invert":[{"backdrop-invert":["",Lr,Jt,Yt]}],"backdrop-opacity":[{"backdrop-opacity":[Lr,Jt,Yt]}],"backdrop-saturate":[{"backdrop-saturate":[Lr,Jt,Yt]}],"backdrop-sepia":[{"backdrop-sepia":["",Lr,Jt,Yt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ge()}],"border-spacing-x":[{"border-spacing-x":ge()}],"border-spacing-y":[{"border-spacing-y":ge()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Jt,Yt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Lr,"initial",Jt,Yt]}],ease:[{ease:["linear","initial",K,Jt,Yt]}],delay:[{delay:[Lr,Jt,Yt]}],animate:[{animate:["none",J,Jt,Yt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[F,Jt,Yt]}],"perspective-origin":[{"perspective-origin":Y()}],rotate:[{rotate:vt()}],"rotate-x":[{"rotate-x":vt()}],"rotate-y":[{"rotate-y":vt()}],"rotate-z":[{"rotate-z":vt()}],scale:[{scale:Ft()}],"scale-x":[{"scale-x":Ft()}],"scale-y":[{"scale-y":Ft()}],"scale-z":[{"scale-z":Ft()}],"scale-3d":["scale-3d"],skew:[{skew:ir()}],"skew-x":[{"skew-x":ir()}],"skew-y":[{"skew-y":ir()}],transform:[{transform:[Jt,Yt,"","none","gpu","cpu"]}],"transform-origin":[{origin:Y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pt()}],"translate-x":[{"translate-x":pt()}],"translate-y":[{"translate-y":pt()}],"translate-z":[{"translate-z":pt()}],"translate-none":["translate-none"],accent:[{accent:Ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jt,Yt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ge()}],"scroll-mx":[{"scroll-mx":ge()}],"scroll-my":[{"scroll-my":ge()}],"scroll-ms":[{"scroll-ms":ge()}],"scroll-me":[{"scroll-me":ge()}],"scroll-mt":[{"scroll-mt":ge()}],"scroll-mr":[{"scroll-mr":ge()}],"scroll-mb":[{"scroll-mb":ge()}],"scroll-ml":[{"scroll-ml":ge()}],"scroll-p":[{"scroll-p":ge()}],"scroll-px":[{"scroll-px":ge()}],"scroll-py":[{"scroll-py":ge()}],"scroll-ps":[{"scroll-ps":ge()}],"scroll-pe":[{"scroll-pe":ge()}],"scroll-pt":[{"scroll-pt":ge()}],"scroll-pr":[{"scroll-pr":ge()}],"scroll-pb":[{"scroll-pb":ge()}],"scroll-pl":[{"scroll-pl":ge()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jt,Yt]}],fill:[{fill:["none",...Ne()]}],"stroke-w":[{stroke:[Lr,Lm,kd,T0]}],stroke:[{stroke:["none",...Ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},o5=FL(a5);function ao(...e){return o5(Or(e))}function AT({className:e,type:t,...n}){return ce.jsx("input",{type:t,"data-slot":"input",className:ao("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function CT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function nR(...e){return t=>{let n=!1;const a=e.map(u=>{const f=CT(u,t);return!n&&typeof f=="function"&&(n=!0),f});if(n)return()=>{for(let u=0;u<a.length;u++){const f=a[u];typeof f=="function"?f():CT(e[u],null)}}}}function ns(...e){return be.useCallback(nR(...e),e)}function ig(e){const t=s5(e),n=be.forwardRef((a,u)=>{const{children:f,...p}=a,s=be.Children.toArray(f),P=s.find(c5);if(P){const A=P.props.children,E=s.map(M=>M===P?be.Children.count(A)>1?be.Children.only(null):be.isValidElement(A)?A.props.children:null:M);return ce.jsx(t,{...p,ref:u,children:be.isValidElement(A)?be.cloneElement(A,void 0,E):null})}return ce.jsx(t,{...p,ref:u,children:f})});return n.displayName=`${e}.Slot`,n}var iR=ig("Slot");function s5(e){const t=be.forwardRef((n,a)=>{const{children:u,...f}=n;if(be.isValidElement(u)){const p=h5(u),s=u5(f,u.props);return u.type!==be.Fragment&&(s.ref=a?nR(a,p):p),be.cloneElement(u,s)}return be.Children.count(u)>1?be.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var l5=Symbol("radix.slottable");function c5(e){return be.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===l5}function u5(e,t){const n={...t};for(const a in t){const u=e[a],f=t[a];/^on[A-Z]/.test(a)?u&&f?n[a]=(...s)=>{const P=f(...s);return u(...s),P}:u&&(n[a]=u):a==="style"?n[a]={...u,...f}:a==="className"&&(n[a]=[u,f].filter(Boolean).join(" "))}return{...e,...n}}function h5(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const ET=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,MT=Or,aR=(e,t)=>n=>{var a;if(t?.variants==null)return MT(e,n?.class,n?.className);const{variants:u,defaultVariants:f}=t,p=Object.keys(u).map(A=>{const E=n?.[A],M=f?.[A];if(E===null)return null;const D=ET(E)||ET(M);return u[A][D]}),s=n&&Object.entries(n).reduce((A,E)=>{let[M,D]=E;return D===void 0||(A[M]=D),A},{}),P=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((A,E)=>{let{class:M,className:D,...j}=E;return Object.entries(j).every(G=>{let[F,$]=G;return Array.isArray($)?$.includes({...f,...s}[F]):{...f,...s}[F]===$})?[...A,M,D]:A},[]);return MT(e,p,P,n?.class,n?.className)},d5=aR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Ph({className:e,variant:t,size:n,asChild:a=!1,...u}){const f=a?iR:"button";return ce.jsx(f,{"data-slot":"button",className:ao(d5({variant:t,size:n,className:e})),...u})}function f5(e,t){const n=be.createContext(t),a=f=>{const{children:p,...s}=f,P=be.useMemo(()=>s,Object.values(s));return ce.jsx(n.Provider,{value:P,children:p})};a.displayName=e+"Provider";function u(f){const p=be.useContext(n);if(p)return p;if(t!==void 0)return t;throw new Error(`\`${f}\` must be used within \`${e}\``)}return[a,u]}function Ug(e,t=[]){let n=[];function a(f,p){const s=be.createContext(p),P=n.length;n=[...n,p];const A=M=>{const{scope:D,children:j,...G}=M,F=D?.[e]?.[P]||s,$=be.useMemo(()=>G,Object.values(G));return ce.jsx(F.Provider,{value:$,children:j})};A.displayName=f+"Provider";function E(M,D){const j=D?.[e]?.[P]||s,G=be.useContext(j);if(G)return G;if(p!==void 0)return p;throw new Error(`\`${M}\` must be used within \`${f}\``)}return[A,E]}const u=()=>{const f=n.map(p=>be.createContext(p));return function(s){const P=s?.[e]||f;return be.useMemo(()=>({[`__scope${e}`]:{...s,[e]:P}}),[s,P])}};return u.scopeName=e,[a,p5(u,...t)]}function p5(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const a=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(f){const p=a.reduce((s,{useScope:P,scopeName:A})=>{const M=P(f)[`__scope${A}`];return{...s,...M}},{});return be.useMemo(()=>({[`__scope${t.scopeName}`]:p}),[p])}};return n.scopeName=t.scopeName,n}function Fs(e,t,{checkForDefaultPrevented:n=!0}={}){return function(u){if(e?.(u),n===!1||!u.defaultPrevented)return t?.(u)}}var Ud=globalThis?.document?be.useLayoutEffect:()=>{},m5=qO[" useInsertionEffect ".trim().toString()]||Ud;function Vg({prop:e,defaultProp:t,onChange:n=()=>{},caller:a}){const[u,f,p]=g5({defaultProp:t,onChange:n}),s=e!==void 0,P=s?e:u;{const E=be.useRef(e!==void 0);be.useEffect(()=>{const M=E.current;M!==s&&console.warn(`${a} is changing from ${M?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),E.current=s},[s,a])}const A=be.useCallback(E=>{if(s){const M=y5(E)?E(e):E;M!==e&&p.current?.(M)}else f(E)},[s,e,f,p]);return[P,A]}function g5({defaultProp:e,onChange:t}){const[n,a]=be.useState(e),u=be.useRef(n),f=be.useRef(t);return m5(()=>{f.current=t},[t]),be.useEffect(()=>{u.current!==n&&(f.current?.(n),u.current=n)},[n,u]),[n,a,f]}function y5(e){return typeof e=="function"}function v5(e){const t=be.useRef({value:e,previous:e});return be.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function _5(e){const[t,n]=be.useState(void 0);return Ud(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const f=u[0];let p,s;if("borderBoxSize"in f){const P=f.borderBoxSize,A=Array.isArray(P)?P[0]:P;p=A.inlineSize,s=A.blockSize}else p=e.offsetWidth,s=e.offsetHeight;n({width:p,height:s})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else n(void 0)},[e]),t}function x5(e,t){return be.useReducer((n,a)=>t[n][a]??n,e)}var Vp=e=>{const{present:t,children:n}=e,a=b5(t),u=typeof n=="function"?n({present:a.isPresent}):be.Children.only(n),f=ns(a.ref,w5(u));return typeof n=="function"||a.isPresent?be.cloneElement(u,{ref:f}):null};Vp.displayName="Presence";function b5(e){const[t,n]=be.useState(),a=be.useRef(null),u=be.useRef(e),f=be.useRef("none"),p=e?"mounted":"unmounted",[s,P]=x5(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return be.useEffect(()=>{const A=By(a.current);f.current=s==="mounted"?A:"none"},[s]),Ud(()=>{const A=a.current,E=u.current;if(E!==e){const D=f.current,j=By(A);e?P("MOUNT"):j==="none"||A?.display==="none"?P("UNMOUNT"):P(E&&D!==j?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,P]),Ud(()=>{if(t){let A;const E=t.ownerDocument.defaultView??window,M=j=>{const F=By(a.current).includes(CSS.escape(j.animationName));if(j.target===t&&F&&(P("ANIMATION_END"),!u.current)){const $=t.style.animationFillMode;t.style.animationFillMode="forwards",A=E.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=$)})}},D=j=>{j.target===t&&(f.current=By(a.current))};return t.addEventListener("animationstart",D),t.addEventListener("animationcancel",M),t.addEventListener("animationend",M),()=>{E.clearTimeout(A),t.removeEventListener("animationstart",D),t.removeEventListener("animationcancel",M),t.removeEventListener("animationend",M)}}else P("ANIMATION_END")},[t,P]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:be.useCallback(A=>{a.current=A?getComputedStyle(A):null,n(A)},[])}}function By(e){return e?.animationName||"none"}function w5(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var oR=VO();const S5=ln(oR);var P5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Sa=P5.reduce((e,t)=>{const n=ig(`Primitive.${t}`),a=be.forwardRef((u,f)=>{const{asChild:p,...s}=u,P=p?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ce.jsx(P,{...s,ref:f})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function T5(e,t){e&&oR.flushSync(()=>e.dispatchEvent(t))}var o_="Checkbox",[A5]=Ug(o_),[C5,d2]=A5(o_);function E5(e){const{__scopeCheckbox:t,checked:n,children:a,defaultChecked:u,disabled:f,form:p,name:s,onCheckedChange:P,required:A,value:E="on",internal_do_not_use_render:M}=e,[D,j]=Vg({prop:n,defaultProp:u??!1,onChange:P,caller:o_}),[G,F]=be.useState(null),[$,K]=be.useState(null),J=be.useRef(!1),ee=G?!!p||!!G.closest("form"):!0,oe={checked:D,disabled:f,setChecked:j,control:G,setControl:F,name:s,form:p,value:E,hasConsumerStoppedPropagationRef:J,required:A,defaultChecked:Mh(u)?!1:u,isFormControl:ee,bubbleInput:$,setBubbleInput:K};return ce.jsx(C5,{scope:t,...oe,children:M5(M)?M(oe):a})}var sR="CheckboxTrigger",lR=be.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...a},u)=>{const{control:f,value:p,disabled:s,checked:P,required:A,setControl:E,setChecked:M,hasConsumerStoppedPropagationRef:D,isFormControl:j,bubbleInput:G}=d2(sR,e),F=ns(u,E),$=be.useRef(P);return be.useEffect(()=>{const K=f?.form;if(K){const J=()=>M($.current);return K.addEventListener("reset",J),()=>K.removeEventListener("reset",J)}},[f,M]),ce.jsx(Sa.button,{type:"button",role:"checkbox","aria-checked":Mh(P)?"mixed":P,"aria-required":A,"data-state":pR(P),"data-disabled":s?"":void 0,disabled:s,value:p,...a,ref:F,onKeyDown:Fs(t,K=>{K.key==="Enter"&&K.preventDefault()}),onClick:Fs(n,K=>{M(J=>Mh(J)?!0:!J),G&&j&&(D.current=K.isPropagationStopped(),D.current||K.stopPropagation())})})});lR.displayName=sR;var cR=be.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:a,checked:u,defaultChecked:f,required:p,disabled:s,value:P,onCheckedChange:A,form:E,...M}=e;return ce.jsx(E5,{__scopeCheckbox:n,checked:u,defaultChecked:f,disabled:s,required:p,onCheckedChange:A,name:a,form:E,value:P,internal_do_not_use_render:({isFormControl:D})=>ce.jsxs(ce.Fragment,{children:[ce.jsx(lR,{...M,ref:t,__scopeCheckbox:n}),D&&ce.jsx(fR,{__scopeCheckbox:n})]})})});cR.displayName=o_;var uR="CheckboxIndicator",hR=be.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:a,...u}=e,f=d2(uR,n);return ce.jsx(Vp,{present:a||Mh(f.checked)||f.checked===!0,children:ce.jsx(Sa.span,{"data-state":pR(f.checked),"data-disabled":f.disabled?"":void 0,...u,ref:t,style:{pointerEvents:"none",...e.style}})})});hR.displayName=uR;var dR="CheckboxBubbleInput",fR=be.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:a,hasConsumerStoppedPropagationRef:u,checked:f,defaultChecked:p,required:s,disabled:P,name:A,value:E,form:M,bubbleInput:D,setBubbleInput:j}=d2(dR,e),G=ns(n,j),F=v5(f),$=_5(a);be.useEffect(()=>{const J=D;if(!J)return;const ee=window.HTMLInputElement.prototype,Y=Object.getOwnPropertyDescriptor(ee,"checked").set,re=!u.current;if(F!==f&&Y){const ue=new Event("click",{bubbles:re});J.indeterminate=Mh(f),Y.call(J,Mh(f)?!1:f),J.dispatchEvent(ue)}},[D,F,f,u]);const K=be.useRef(Mh(f)?!1:f);return ce.jsx(Sa.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??K.current,required:s,disabled:P,name:A,value:E,form:M,...t,tabIndex:-1,ref:G,style:{...t.style,...$,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});fR.displayName=dR;function M5(e){return typeof e=="function"}function Mh(e){return e==="indeterminate"}function pR(e){return Mh(e)?"indeterminate":e?"checked":"unchecked"}function k5({className:e,...t}){return ce.jsx(cR,{"data-slot":"checkbox",className:ao("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:ce.jsx(hR,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:ce.jsx(_L,{className:"size-3.5"})})})}function I5(e){const t=e+"CollectionProvider",[n,a]=Ug(t),[u,f]=n(t,{collectionRef:{current:null},itemMap:new Map}),p=F=>{const{scope:$,children:K}=F,J=Me.useRef(null),ee=Me.useRef(new Map).current;return ce.jsx(u,{scope:$,itemMap:ee,collectionRef:J,children:K})};p.displayName=t;const s=e+"CollectionSlot",P=ig(s),A=Me.forwardRef((F,$)=>{const{scope:K,children:J}=F,ee=f(s,K),oe=ns($,ee.collectionRef);return ce.jsx(P,{ref:oe,children:J})});A.displayName=s;const E=e+"CollectionItemSlot",M="data-radix-collection-item",D=ig(E),j=Me.forwardRef((F,$)=>{const{scope:K,children:J,...ee}=F,oe=Me.useRef(null),Y=ns($,oe),re=f(E,K);return Me.useEffect(()=>(re.itemMap.set(oe,{ref:oe,...ee}),()=>void re.itemMap.delete(oe))),ce.jsx(D,{[M]:"",ref:Y,children:J})});j.displayName=E;function G(F){const $=f(e+"CollectionConsumer",F);return Me.useCallback(()=>{const J=$.collectionRef.current;if(!J)return[];const ee=Array.from(J.querySelectorAll(`[${M}]`));return Array.from($.itemMap.values()).sort((re,ue)=>ee.indexOf(re.ref.current)-ee.indexOf(ue.ref.current))},[$.collectionRef,$.itemMap])}return[{Provider:p,Slot:A,ItemSlot:j},G,a]}var O5=qO[" useId ".trim().toString()]||(()=>{}),R5=0;function Km(e){const[t,n]=be.useState(O5());return Ud(()=>{n(a=>a??String(R5++))},[e]),t?`radix-${t}`:""}var s_="Collapsible",[D5,mR]=Ug(s_),[z5,f2]=D5(s_),gR=be.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:a,defaultOpen:u,disabled:f,onOpenChange:p,...s}=e,[P,A]=Vg({prop:a,defaultProp:u??!1,onChange:p,caller:s_});return ce.jsx(z5,{scope:n,disabled:f,contentId:Km(),open:P,onOpenToggle:be.useCallback(()=>A(E=>!E),[A]),children:ce.jsx(Sa.div,{"data-state":m2(P),"data-disabled":f?"":void 0,...s,ref:t})})});gR.displayName=s_;var yR="CollapsibleTrigger",vR=be.forwardRef((e,t)=>{const{__scopeCollapsible:n,...a}=e,u=f2(yR,n);return ce.jsx(Sa.button,{type:"button","aria-controls":u.contentId,"aria-expanded":u.open||!1,"data-state":m2(u.open),"data-disabled":u.disabled?"":void 0,disabled:u.disabled,...a,ref:t,onClick:Fs(e.onClick,u.onOpenToggle)})});vR.displayName=yR;var p2="CollapsibleContent",_R=be.forwardRef((e,t)=>{const{forceMount:n,...a}=e,u=f2(p2,e.__scopeCollapsible);return ce.jsx(Vp,{present:n||u.open,children:({present:f})=>ce.jsx(j5,{...a,ref:t,present:f})})});_R.displayName=p2;var j5=be.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:a,children:u,...f}=e,p=f2(p2,n),[s,P]=be.useState(a),A=be.useRef(null),E=ns(t,A),M=be.useRef(0),D=M.current,j=be.useRef(0),G=j.current,F=p.open||s,$=be.useRef(F),K=be.useRef(void 0);return be.useEffect(()=>{const J=requestAnimationFrame(()=>$.current=!1);return()=>cancelAnimationFrame(J)},[]),Ud(()=>{const J=A.current;if(J){K.current=K.current||{transitionDuration:J.style.transitionDuration,animationName:J.style.animationName},J.style.transitionDuration="0s",J.style.animationName="none";const ee=J.getBoundingClientRect();M.current=ee.height,j.current=ee.width,$.current||(J.style.transitionDuration=K.current.transitionDuration,J.style.animationName=K.current.animationName),P(a)}},[p.open,a]),ce.jsx(Sa.div,{"data-state":m2(p.open),"data-disabled":p.disabled?"":void 0,id:p.contentId,hidden:!F,...f,ref:E,style:{"--radix-collapsible-content-height":D?`${D}px`:void 0,"--radix-collapsible-content-width":G?`${G}px`:void 0,...e.style},children:F&&u})});function m2(e){return e?"open":"closed"}var L5=gR,N5=vR,B5=_R,F5=be.createContext(void 0);function $5(e){const t=be.useContext(F5);return e||t||"ltr"}var Il="Accordion",U5=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[g2,V5,q5]=I5(Il),[l_]=Ug(Il,[q5,mR]),y2=mR(),xR=Me.forwardRef((e,t)=>{const{type:n,...a}=e,u=a,f=a;return ce.jsx(g2.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?ce.jsx(Z5,{...f,ref:t}):ce.jsx(H5,{...u,ref:t})})});xR.displayName=Il;var[bR,G5]=l_(Il),[wR,W5]=l_(Il,{collapsible:!1}),H5=Me.forwardRef((e,t)=>{const{value:n,defaultValue:a,onValueChange:u=()=>{},collapsible:f=!1,...p}=e,[s,P]=Vg({prop:n,defaultProp:a??"",onChange:u,caller:Il});return ce.jsx(bR,{scope:e.__scopeAccordion,value:Me.useMemo(()=>s?[s]:[],[s]),onItemOpen:P,onItemClose:Me.useCallback(()=>f&&P(""),[f,P]),children:ce.jsx(wR,{scope:e.__scopeAccordion,collapsible:f,children:ce.jsx(SR,{...p,ref:t})})})}),Z5=Me.forwardRef((e,t)=>{const{value:n,defaultValue:a,onValueChange:u=()=>{},...f}=e,[p,s]=Vg({prop:n,defaultProp:a??[],onChange:u,caller:Il}),P=Me.useCallback(E=>s((M=[])=>[...M,E]),[s]),A=Me.useCallback(E=>s((M=[])=>M.filter(D=>D!==E)),[s]);return ce.jsx(bR,{scope:e.__scopeAccordion,value:p,onItemOpen:P,onItemClose:A,children:ce.jsx(wR,{scope:e.__scopeAccordion,collapsible:!0,children:ce.jsx(SR,{...f,ref:t})})})}),[X5,c_]=l_(Il),SR=Me.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:a,dir:u,orientation:f="vertical",...p}=e,s=Me.useRef(null),P=ns(s,t),A=V5(n),M=$5(u)==="ltr",D=Fs(e.onKeyDown,j=>{if(!U5.includes(j.key))return;const G=j.target,F=A().filter(ge=>!ge.ref.current?.disabled),$=F.findIndex(ge=>ge.ref.current===G),K=F.length;if($===-1)return;j.preventDefault();let J=$;const ee=0,oe=K-1,Y=()=>{J=$+1,J>oe&&(J=ee)},re=()=>{J=$-1,J<ee&&(J=oe)};switch(j.key){case"Home":J=ee;break;case"End":J=oe;break;case"ArrowRight":f==="horizontal"&&(M?Y():re());break;case"ArrowDown":f==="vertical"&&Y();break;case"ArrowLeft":f==="horizontal"&&(M?re():Y());break;case"ArrowUp":f==="vertical"&&re();break}const ue=J%K;F[ue].ref.current?.focus()});return ce.jsx(X5,{scope:n,disabled:a,direction:u,orientation:f,children:ce.jsx(g2.Slot,{scope:n,children:ce.jsx(Sa.div,{...p,"data-orientation":f,ref:P,onKeyDown:a?void 0:D})})})}),ov="AccordionItem",[K5,v2]=l_(ov),PR=Me.forwardRef((e,t)=>{const{__scopeAccordion:n,value:a,...u}=e,f=c_(ov,n),p=G5(ov,n),s=y2(n),P=Km(),A=a&&p.value.includes(a)||!1,E=f.disabled||e.disabled;return ce.jsx(K5,{scope:n,open:A,disabled:E,triggerId:P,children:ce.jsx(L5,{"data-orientation":f.orientation,"data-state":kR(A),...s,...u,ref:t,disabled:E,open:A,onOpenChange:M=>{M?p.onItemOpen(a):p.onItemClose(a)}})})});PR.displayName=ov;var TR="AccordionHeader",AR=Me.forwardRef((e,t)=>{const{__scopeAccordion:n,...a}=e,u=c_(Il,n),f=v2(TR,n);return ce.jsx(Sa.h3,{"data-orientation":u.orientation,"data-state":kR(f.open),"data-disabled":f.disabled?"":void 0,...a,ref:t})});AR.displayName=TR;var Lw="AccordionTrigger",CR=Me.forwardRef((e,t)=>{const{__scopeAccordion:n,...a}=e,u=c_(Il,n),f=v2(Lw,n),p=W5(Lw,n),s=y2(n);return ce.jsx(g2.ItemSlot,{scope:n,children:ce.jsx(N5,{"aria-disabled":f.open&&!p.collapsible||void 0,"data-orientation":u.orientation,id:f.triggerId,...s,...a,ref:t})})});CR.displayName=Lw;var ER="AccordionContent",MR=Me.forwardRef((e,t)=>{const{__scopeAccordion:n,...a}=e,u=c_(Il,n),f=v2(ER,n),p=y2(n);return ce.jsx(B5,{role:"region","aria-labelledby":f.triggerId,"data-orientation":u.orientation,...p,...a,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});MR.displayName=ER;function kR(e){return e?"open":"closed"}var Y5=xR,J5=PR,Q5=AR,eN=CR,tN=MR;function rN({...e}){return ce.jsx(Y5,{"data-slot":"accordion",...e})}function nN({className:e,...t}){return ce.jsx(J5,{"data-slot":"accordion-item",className:ao("border-b last:border-b-0",e),...t})}function iN({className:e,children:t,...n}){return ce.jsx(Q5,{className:"flex",children:ce.jsxs(eN,{"data-slot":"accordion-trigger",className:ao("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,ce.jsx(bL,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function aN({className:e,children:t,...n}){return ce.jsx(tN,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:ce.jsx("div",{className:ao("pt-0 pb-4",e),children:t})})}const oN=aR("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ag({className:e,variant:t,asChild:n=!1,...a}){const u=n?iR:"span";return ce.jsx(u,{"data-slot":"badge",className:ao(oN({variant:t}),e),...a})}const kT=[{id:"core-demographics",title:"Core Demographics",icon:"👥",description:"Basic demographic information including gender, age, and ethnicity",sections:[{title:"Gender",description:"Voter gender distribution",searchable:!0,collapsible:!0,items:[{id:"voters_gender_male",label:"Male Voters (M)",description:"Male voter segments - M = Male",category:"Demographics",taxonomy:"voters_gender",count:0,states:[]},{id:"voters_gender_female",label:"Female Voters (F)",description:"Female voter segments - F = Female",category:"Demographics",taxonomy:"voters_gender",count:0,states:[]}]},{title:"Age Groups",description:"Single age buckets (25, 30, ..., 75). Use combined ranges (e.g., >=45 includes 45, 50, 55...)",searchable:!0,collapsible:!0,items:[{id:"voters_age_25_34",label:"Ages 25-34",description:"Young adult voters (25, 30)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_35_44",label:"Ages 35-44",description:"Middle-aged voters (35, 40)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_45_54",label:"Ages 45-54",description:"Mature voters (45, 50)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_55_64",label:"Ages 55-64",description:"Pre-retirement voters (55, 60)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_65_75",label:"Ages 65-75",description:"Senior voters (65, 70, 75)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_45_plus",label:"Ages 45+",description:"Combined range >=45 (includes 45, 50, 55, 60, 65, 70, 75)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]}]},{title:"Ethnicity",description:"Ethnic and racial demographics - Segments: African American, Hispanic, White, Asian, Other",searchable:!0,collapsible:!0,items:[{id:"ethnic_description_african_american",label:"African American",description:"African American voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_hispanic",label:"Hispanic",description:"Hispanic voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_white",label:"White",description:"White voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_asian",label:"Asian",description:"Asian voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_other",label:"Other",description:"Other ethnicities",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]}]}]},{id:"geography",title:"Geography",icon:"🗺️",description:"Geographic districts, ZIP codes, and administrative boundaries",sections:[{title:"State Senate Districts",description:"2010 state senate districts - WY: 01-30, CA: 01-40. Normalize leading zeros (e.g., 01, 09). Always use 2010 version.",searchable:!0,collapsible:!0,items:[{id:"2010_state_senate_district_wy",label:"Wyoming Senate Districts (01-30)",description:"Wyoming state senate districts 01-30 with normalized leading zeros",category:"Geography",taxonomy:"2010_state_senate_district",count:0,states:["WY"]},{id:"2010_state_senate_district_ca",label:"California Senate Districts (01-40)",description:"California state senate districts 01-40 with normalized leading zeros",category:"Geography",taxonomy:"2010_state_senate_district",count:0,states:["CA"]}]},{title:"Congressional Districts",description:"2001 US Congressional districts - CA: 01-53, NY: 01-29. Normalize leading zeros.",searchable:!0,collapsible:!0,items:[{id:"2001_us_congressional_district_ca",label:"California Congressional Districts (01-53)",description:"California US Congressional districts 01-53 with normalized leading zeros",category:"Geography",taxonomy:"2001_us_congressional_district",count:0,states:["CA"]},{id:"2001_us_congressional_district_ny",label:"New York Congressional Districts (01-29)",description:"New York US Congressional districts 01-29 with normalized leading zeros",category:"Geography",taxonomy:"2001_us_congressional_district",count:0,states:["NY"]}]},{title:"ZIP Codes",description:"Standard 5-digit ZIPs (e.g., 90210)",searchable:!0,collapsible:!0,items:[{id:"2001_us_zipcode",label:"ZIP Codes",description:"Standard 5-digit ZIP codes (e.g., 90210)",category:"Geography",taxonomy:"2001_us_zipcode",count:0,states:[]}]}]},{id:"household-income",title:"Household & Income",icon:"🏠",description:"Household composition and income brackets",sections:[{title:"Household Composition",description:"Categories of household types. Always include all variants with children.",searchable:!0,collapsible:!0,items:[{id:"commercialdata_hhcomposition_children",label:"Households with Children",description:"Households with children - Always include all variants with children",category:"Household",taxonomy:"commercialdata_hhcomposition",count:0,states:[]},{id:"commercialdata_hhcomposition_no_children",label:"Households without Children",description:"Households without children",category:"Household",taxonomy:"commercialdata_hhcomposition",count:0,states:[]}]},{title:"Income Brackets",description:"Brackets: <25k, 25-50k, 50-75k, 75-100k, >100k. For estimation, aggregate all 100,001+ ranges.",searchable:!0,collapsible:!0,items:[{id:"commercialdata_estimatedhhincome_under_25k",label:"Under $25,000",description:"Households earning under $25,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_25k_50k",label:"$25,000 - $50,000",description:"Households earning $25,000 - $50,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_50k_75k",label:"$50,000 - $75,000",description:"Households earning $50,000 - $75,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_75k_100k",label:"$75,000 - $100,000",description:"Households earning $75,000 - $100,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_over_100k",label:"Over $100,000",description:"Households earning over $100,000 (aggregate all 100,001+ ranges)",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]}]}]},{id:"consumer-data",title:"Consumer Data",icon:"🚗",description:"Consumer behavior and purchasing patterns",sections:[{title:"Automotive",description:"Car ownership (Ford, Toyota, Kia, Hyundai, etc.). If multiple cars, second taxonomy captures overflow.",searchable:!0,collapsible:!0,items:[{id:"consumerdata_auto_make_1_ford",label:"Ford Owners (Primary)",description:"Ford vehicle owners - Primary car",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_1_toyota",label:"Toyota Owners (Primary)",description:"Toyota vehicle owners - Primary car",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_1_kia",label:"Kia Owners (Primary)",description:"Kia vehicle owners - Primary car",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_1_hyundai",label:"Hyundai Owners (Primary)",description:"Hyundai vehicle owners - Primary car",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_2_ford",label:"Ford Owners (Secondary)",description:"Ford vehicle owners - Secondary car",category:"Consumer",taxonomy:"consumerdata_auto_make_2",count:0,states:[]},{id:"consumerdata_auto_make_2_toyota",label:"Toyota Owners (Secondary)",description:"Toyota vehicle owners - Secondary car",category:"Consumer",taxonomy:"consumerdata_auto_make_2",count:0,states:[]}]}]},{id:"military-family",title:"Military & Family Background",icon:"🎖️",description:"Military service and family background",sections:[{title:"Military Service",description:"Military service in household - Segment >65 = Yes, Segment <=65 = No",searchable:!0,collapsible:!0,items:[{id:"hs_military_family_relationship_yes",label:"Military in Household",description:"Military service in household - Segment >65 = Yes (military family present)",category:"Military",taxonomy:"hs_military_family_relationship_yes",count:0,states:[]},{id:"hs_military_family_relationship_no",label:"No Military in Household",description:"No military service in household - Segment <=65 = No (no military family)",category:"Military",taxonomy:"hs_military_family_relationship_no",count:0,states:[]}]}]},{id:"political-views",title:"Political Views & Attitudes",icon:"🗳️",description:"All hs_* taxonomies = scaled opinion scores. Rule: >65 = Supporter/Positive, <=65 = Opposer/Negative",sections:[{title:"Israel & Foreign Policy",description:"Views on Israel, military actions, and foreign policy",searchable:!0,collapsible:!0,items:[{id:"hs_israel_military_actions_gop_support",label:"Israel Military Actions GOP Support",description:"Support for GOP stance on Israel military actions (segment >65 = Supporter)",category:"Foreign Policy",taxonomy:"hs_israel_military_actions_gop_support",count:0,states:[]},{id:"hs_ro_khanna_disapproval",label:"Ro Khanna Disapproval",description:"Disapproval of Representative Ro Khanna (segment >65 = Disapprover)",category:"Political Figures",taxonomy:"hs_ro_khanna_disapproval",count:0,states:[]}]},{title:"Ideology & Values",description:"Core ideological beliefs and value systems",searchable:!0,collapsible:!0,items:[{id:"hs_ideology_fiscal_conserv",label:"Fiscal Conservative",description:"Conservative fiscal policy views",category:"Economic Policy",taxonomy:"hs_ideology_fiscal_conserv",count:0,states:[]},{id:"hs_wealth_acquired_hardwork",label:"Wealth Through Hard Work",description:"Belief that wealth is acquired through hard work",category:"Economic Views",taxonomy:"hs_wealth_acquired_hardwork",count:0,states:[]},{id:"hs_wealth_acquired_advantages",label:"Wealth Through Advantages",description:"Belief that wealth comes from advantages",category:"Economic Views",taxonomy:"hs_wealth_acquired_advantages",count:0,states:[]}]},{title:"Voting & Democracy",description:"Views on voting, democracy, and political participation",searchable:!0,collapsible:!0,items:[{id:"hs_voting_fraud_concern_oppression",label:"Voting Fraud Concern",description:"Concern about voting fraud and oppression",category:"Democracy",taxonomy:"hs_voting_fraud_concern_oppression",count:0,states:[]}]}]},{id:"social-issues",title:"Social Issues",icon:"👥",description:"Social policy positions and community views",sections:[{title:"Gun Control",description:"Views on gun control and firearm regulations",searchable:!0,collapsible:!0,items:[{id:"hs_gun_control_support",label:"Gun Control Support",description:"Support for gun control measures",category:"Public Safety",taxonomy:"hs_gun_control_support",count:0,states:[]}]},{title:"Crime & Safety",description:"Views on crime, safety, and law enforcement",searchable:!0,collapsible:!0,items:[{id:"hs_violent_crime_not_worried",label:"Not Worried About Violent Crime",description:"Not concerned about violent crime",category:"Public Safety",taxonomy:"hs_violent_crime_not_worried",count:0,states:[]}]},{title:"Labor & Unions",description:"Views on labor unions and workers rights",searchable:!0,collapsible:!0,items:[{id:"hs_unions_beneficial",label:"Unions Beneficial",description:"Belief that unions are beneficial",category:"Labor",taxonomy:"hs_unions_beneficial",count:0,states:[]}]}]},{id:"media-trust",title:"Media & Trust",icon:"📺",description:"Media consumption and trust in information sources",sections:[{title:"News Sources",description:"Preferred news sources and media trust",searchable:!0,collapsible:!0,items:[{id:"hs_tv_most_trusted_news_msnbc",label:"MSNBC Most Trusted News",description:"MSNBC as most trusted news source",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_msnbc",count:0,states:[]}]},{title:"Science Trust",description:"Trust in science and scientific institutions",searchable:!0,collapsible:!0,items:[{id:"hs_trust_science_rarely",label:"Rarely Trust Science",description:"Rarely trust scientific institutions",category:"Science",taxonomy:"hs_trust_science_rarely",count:0,states:[]},{id:"hs_trust_science_always",label:"Always Trust Science",description:"Always trust scientific institutions",category:"Science",taxonomy:"hs_trust_science_always",count:0,states:[]}]}]},{id:"candidates",title:"Candidates & Elections",icon:"🏛️",description:"Candidate preferences and electoral choices",sections:[{title:"2024 Election",description:"Views on 2024 presidential candidates",searchable:!0,collapsible:!0,items:[{id:"hs_trump_vs_harris_favor_harris",label:"Favor Harris Over Trump",description:"Prefer Harris over Trump in 2024",category:"2024 Election",taxonomy:"hs_trump_vs_harris_favor_harris",count:0,states:[]}]},{title:"Political Teams",description:"Team affiliation and political identity",searchable:!0,collapsible:!0,items:[{id:"hs_tribalism_team_gop",label:"Team GOP",description:"Identify with GOP team",category:"Political Identity",taxonomy:"hs_tribalism_team_gop",count:0,states:[]},{id:"hs_tribalism_team_dem",label:"Team Democratic",description:"Identify with Democratic team",category:"Political Identity",taxonomy:"hs_tribalism_team_dem",count:0,states:[]}]}]},{id:"conspiracy-theories",title:"Conspiracy Theories",icon:"🛸",description:"Beliefs in conspiracy theories and alternative explanations",sections:[{title:"Government Disclosure",description:"Views on government transparency and disclosure",searchable:!0,collapsible:!0,items:[{id:"hs_aliens_governenment_disclosed_all",label:"Government Disclosed All About Aliens",description:"Belief that government has disclosed all about aliens",category:"Conspiracy Theories",taxonomy:"hs_aliens_governenment_disclosed_all",count:0,states:[]}]}]},{id:"geographic-areas",title:"Geographic Areas",icon:"🗺️",description:"Geographic and administrative boundaries",sections:[{title:"Administrative Districts",description:"Various administrative and political districts",searchable:!0,collapsible:!0,items:[{id:"hamlet_community_area",label:"Hamlet Community Area",description:"Hamlet community areas",category:"Administrative",taxonomy:"hamlet_community_area",count:1165,states:[]},{id:"unified_school_district",label:"Unified School District",description:"Unified school districts",category:"Education",taxonomy:"unified_school_district",count:1037,states:[]},{id:"town_district",label:"Town District",description:"Town districts",category:"Administrative",taxonomy:"town_district",count:1035,states:[]},{id:"county_legislative_district",label:"County Legislative District",description:"County legislative districts",category:"Political",taxonomy:"county_legislative_district",count:578,states:[]},{id:"village",label:"Village",description:"Villages",category:"Administrative",taxonomy:"village",count:556,states:[]},{id:"city",label:"City",description:"Cities",category:"Administrative",taxonomy:"city",count:543,states:[]}]}]},{id:"economic-data",title:"Economic Data",icon:"💰",description:"Economic indicators and income data",sections:[{title:"Income Data",description:"Estimated household income and economic status",searchable:!0,collapsible:!0,items:[{id:"consumerdata_estimated_income_amount",label:"Estimated Income Amount",description:"Consumer data estimated income amount",category:"Income",taxonomy:"consumerdata_estimated_income_amount",count:443,states:[]},{id:"commercialdata_estimatedhhincomeamount",label:"Estimated HH Income Amount",description:"Commercial data estimated household income",category:"Income",taxonomy:"commercialdata_estimatedhhincomeamount",count:443,states:[]},{id:"consumerdata_estimatedareamedianhhincome",label:"Area Median HH Income",description:"Consumer data estimated area median household income",category:"Income",taxonomy:"consumerdata_estimatedareamedianhhincome",count:425,states:[]}]}]},{id:"migration",title:"Migration",icon:"🚚",description:"Coded by origin state (NJ, OH, VA, ...). Summation shows % migrated into given state.",sections:[{title:"Migration Origins",description:"States where voters moved from. Summation shows % migrated into given state.",searchable:!0,collapsible:!0,items:[{id:"voters_movedfrom_state_nj",label:"Moved from New Jersey",description:"Voters who moved from New Jersey",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_oh",label:"Moved from Ohio",description:"Voters who moved from Ohio",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_va",label:"Moved from Virginia",description:"Voters who moved from Virginia",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]}]}]}];async function sN(){try{const n=(await(await fetch("/Data/wycany.csv")).text()).split(`
`),a=[];for(let A=1;A<n.length;A++){const E=n[A].trim();if(!E)continue;const M=E.split(",");if(M.length>=4){const[D,j,G,F]=M;if(D&&j&&G&&F){const $=parseInt(G),K=parseFloat(F);!isNaN($)&&!isNaN(K)&&a.push({state_code:D.trim(),taxonomy:j.trim(),segment:$,population_pct:K})}}}console.log(`Analyzed ${a.length} records from CSV`);const u=new Map,f=new Map;a.forEach(A=>{u.has(A.taxonomy)||u.set(A.taxonomy,{count:0,states:new Set,segments:new Set,populationPcts:[]});const E=u.get(A.taxonomy);E.count++,E.states.add(A.state_code),E.segments.add(A.segment),E.populationPcts.push(A.population_pct),f.has(A.state_code)||f.set(A.state_code,{totalRecords:0,uniqueTaxonomies:new Set,totalPopulationPct:0});const M=f.get(A.state_code);M.totalRecords++,M.uniqueTaxonomies.add(A.taxonomy),M.totalPopulationPct+=A.population_pct});const p=Array.from(u.entries()).map(([A,E])=>({taxonomy:A,count:E.count,states:Array.from(E.states),segments:Array.from(E.segments),avgPopulationPct:E.populationPcts.reduce((M,D)=>M+D,0)/E.populationPcts.length,maxPopulationPct:Math.max(...E.populationPcts),minPopulationPct:Math.min(...E.populationPcts)})).sort((A,E)=>E.count-A.count),s=Array.from(f.entries()).map(([A,E])=>({state:A,totalRecords:E.totalRecords,uniqueTaxonomies:E.uniqueTaxonomies.size,totalPopulationPct:E.totalPopulationPct})).sort((A,E)=>E.totalRecords-A.totalRecords),P={};return p.forEach(A=>{const E=lN(A.taxonomy);P[E]||(P[E]=[]),P[E].push(A)}),{totalRecords:a.length,uniqueTaxonomies:p.length,states:s,taxonomies:p,taxonomyCategories:P}}catch(e){throw console.error("Error analyzing CSV data:",e),e}}function lN(e){const t=e.toLowerCase();return t.includes("hs_")?t.includes("israel")||t.includes("military")||t.includes("foreign")?"Foreign Policy":t.includes("ideology")||t.includes("fiscal")||t.includes("conserv")?"Political Ideology":t.includes("voting")||t.includes("fraud")||t.includes("democracy")?"Democracy & Voting":t.includes("gun")||t.includes("crime")||t.includes("safety")?"Public Safety":t.includes("union")||t.includes("labor")||t.includes("worker")?"Labor & Unions":t.includes("tv")||t.includes("news")||t.includes("media")?"Media & News":t.includes("science")||t.includes("trust")?"Science & Trust":t.includes("trump")||t.includes("harris")||t.includes("election")?"Elections & Candidates":t.includes("tribalism")||t.includes("team")?"Political Identity":t.includes("wealth")||t.includes("income")||t.includes("economic")?"Economic Views":t.includes("alien")||t.includes("conspiracy")||t.includes("disclosure")?"Conspiracy Theories":"Political Views":t.includes("consumerdata")||t.includes("commercialdata")?"Economic Data":t.includes("hamlet")||t.includes("district")||t.includes("city")||t.includes("village")?"Geographic Areas":"Other"}async function cN(){console.log("Starting data source validation...");const e=await fetch("/Data/wycany.csv");if(!e.ok)throw new Error(`Failed to load CSV: ${e.status} ${e.statusText}`);const n=(await e.text()).split(`
`),a=[];for(let E=1;E<n.length;E++){const M=n[E].trim();if(!M)continue;const D=M.split(",");if(D.length>=4){const[j,G,F,$]=D;if(j&&G&&F&&$){const K=parseFloat($);if(!isNaN(K)){const J=parseInt(F),ee=isNaN(J)?F.trim():J;a.push({state_code:j.trim(),taxonomy:G.trim(),segment:ee,population_pct:K})}}}}console.log(`Parsed ${a.length} records for validation`);const u=new Map;a.forEach(E=>{u.has(E.taxonomy)||u.set(E.taxonomy,{segments:{},states:new Set,totalRecords:0});const M=u.get(E.taxonomy),D=E.segment.toString();M.segments[D]=(M.segments[D]||0)+1,M.states.add(E.state_code),M.totalRecords++});const f=Array.from(u.entries()).map(([E,M])=>({taxonomy:E,segments:M.segments,states:Array.from(M.states).sort(),totalRecords:M.totalRecords})),p={};if(u.has("commercialdata_estimatedhhincome")){const E=u.get("commercialdata_estimatedhhincome"),M=Object.keys(E.segments);p.commercialdata_estimatedhhincome={under_25k:M.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j<25e3}),"25k_50k":M.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j>=25e3&&j<5e4}),"50k_75k":M.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j>=5e4&&j<75e3}),"75k_100k":M.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j>=75e3&&j<1e5}),over_100k:M.filter(D=>{const j=parseFloat(D.replace(/[$,]/g,""));return!isNaN(j)&&j>=1e5})}}if(u.has("voters_age")){const E=u.get("voters_age"),M=Object.keys(E.segments).map(Number).sort((D,j)=>D-j);p.voters_age={"18_34":M.filter(D=>D>=18&&D<=34).map(String),"35_54":M.filter(D=>D>=35&&D<=54).map(String),"55_74":M.filter(D=>D>=55&&D<=74).map(String),"75_plus":M.filter(D=>D>=75).map(String)}}if(u.has("voters_gender")&&(p.voters_gender={male:["M"],female:["F"]}),u.has("ethnic_description")){const E=u.get("ethnic_description"),M=Object.keys(E.segments);p.ethnic_description={african_american:M.filter(D=>D.includes("African")||D.includes("Af-Am")||D.includes("Af-Am")),hispanic:M.filter(D=>D.includes("Hispanic")),white:M.filter(D=>D.includes("White")||D.includes("European")||D.includes("German")||D.includes("Irish")||D.includes("Italian")||D.includes("English")||D.includes("French")||D.includes("Dutch")||D.includes("Swedish")||D.includes("Norwegian")||D.includes("Danish")),asian:M.filter(D=>D.includes("Asian")||D.includes("Chinese")||D.includes("Japanese")||D.includes("Korean")||D.includes("Vietnamese")||D.includes("Filipino")||D.includes("Indian")||D.includes("Pakistani")||D.includes("Bangladeshi"))}}const s=[];["voters_gender","voters_age","ethnic_description","commercialdata_estimatedhhincome","commercialdata_hhcomposition","consumerdata_auto_make_1","consumerdata_auto_make_2","hs_military_family_relationship_yes","hs_military_family_relationship_no","hs_israel_military_actions_gop_support","hs_ro_khanna_disapproval","hs_ideology_fiscal_conserv","hs_ideology_social_liberal","hs_voting_fraud_concern_oppression","hs_gun_control_support","hs_violent_crime_not_worried","hs_unions_beneficial","hs_tv_most_trusted_news_msnbc","hs_trust_science_rarely","hs_trust_science_always","hs_trump_vs_harris_favor_harris","hs_tribalism_team_gop","hs_tribalism_team_dem","hs_aliens_governenment_disclosed_all","voters_movedfrom_state"].forEach(E=>{u.has(E)||s.push(E)});const A={availableTaxonomies:f,missingTaxonomies:s,segmentMappings:p};return console.log("Data validation completed:",A),A}const IR={voters_age_18_34:{filterId:"voters_age_18_34",taxonomy:"voters_age",calculationType:"sum",sourceSegments:[18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34],description:"Sum of ages 18-34"},voters_age_35_54:{filterId:"voters_age_35_54",taxonomy:"voters_age",calculationType:"sum",sourceSegments:[35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54],description:"Sum of ages 35-54"},voters_age_55_74:{filterId:"voters_age_55_74",taxonomy:"voters_age",calculationType:"sum",sourceSegments:[55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],description:"Sum of ages 55-74"},voters_age_75_plus:{filterId:"voters_age_75_plus",taxonomy:"voters_age",calculationType:"sum",sourceSegments:[75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],description:"Sum of ages 75+"},ethnic_description_african_american:{filterId:"ethnic_description_african_american",taxonomy:"ethnic_description",calculationType:"sum",sourceSegments:["African or Af-Am Self Reported","Likely Af-Am (Modeled)"],description:"Sum of African American related ethnicities"},ethnic_description_white:{filterId:"ethnic_description_white",taxonomy:"ethnic_description",calculationType:"sum",sourceSegments:["English/Welsh","German","Irish","Italian","French","Dutch (Netherlands)","Norwegian","Swedish","Danish","Finnish","Polish","Czech","Hungarian","Austrian","Swiss","Scots"],description:"Sum of European descent ethnicities"},ethnic_description_asian:{filterId:"ethnic_description_asian",taxonomy:"ethnic_description",calculationType:"sum",sourceSegments:["Chinese","Japanese","Korean","Vietnamese","Filipino","Indian/Hindu","Pakistani","Bangladeshi","Sri Lankan","Thai","Indonesian","Malay","Myanmar (Burmese)","Laotian","Khmer","Tibetan","Bhutanese","Tonga","Unknown Asian"],description:"Sum of Asian descent ethnicities"},ethnic_description_other:{filterId:"ethnic_description_other",taxonomy:"ethnic_description",calculationType:"sum",sourceSegments:["Native American","Hawaiian","Arab","Armenian","Persian","Turkish","Albanian","Bulgarian","Croatian","Serbian","Slovenian","Slovakian","Romanian","Russian (omitting former Soviet States)","Ukrainian","Byelorussian","Estonian","Latvian","Lithuanian","Georgian","Azerb","Kazak","Uzbek","Turkmenistan","Mongolian","Afghan","Belgian","Greek","Portuguese"],description:"Sum of other ethnicities"},commercialdata_estimatedhhincome_under_25k:{filterId:"commercialdata_estimatedhhincome_under_25k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$1-25000"],description:"Household income under $25,000"},commercialdata_estimatedhhincome_25k_50k:{filterId:"commercialdata_estimatedhhincome_25k_50k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$25001-50000"],description:"Household income $25,000-$50,000"},commercialdata_estimatedhhincome_50k_75k:{filterId:"commercialdata_estimatedhhincome_50k_75k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$50001-75000"],description:"Household income $50,000-$75,000"},commercialdata_estimatedhhincome_75k_100k:{filterId:"commercialdata_estimatedhhincome_75k_100k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$75001-100000"],description:"Household income $75,000-$100,000"},commercialdata_estimatedhhincome_over_100k:{filterId:"commercialdata_estimatedhhincome_over_100k",taxonomy:"commercialdata_estimatedhhincome",calculationType:"sum",sourceSegments:["$100001-125000","$125001-150000","$150001-175000","$175001-200000","$200001-225000","$225001-250000","$250000+"],description:"Household income over $100,000"}};function uN(e){return e in IR}function hN(e){return IR[e]}const dN=[{taxonomy:"voters_gender",rule:"segment_exact",segments:[77,78],description:"Gender segments: M = Male, F = Female"},{taxonomy:"voters_age",rule:"segment_range",range:[25,75],description:"Single age buckets (25, 30, ..., 75). Use combined ranges (e.g., >=45 includes 45, 50, 55...)"},{taxonomy:"ethnic_description",rule:"segment_exact",segments:[],description:"Segments: African American, Hispanic, White, Asian, Other"},{taxonomy:"2010_state_senate_district",rule:"segment_range",range:[1,40],description:"WY: 01-30, CA: 01-40. Normalize leading zeros (e.g., 01, 09). Always use 2010 version."},{taxonomy:"2001_us_congressional_district",rule:"segment_range",range:[1,53],description:"CA: 01-53, NY: 01-29. Normalize leading zeros."},{taxonomy:"2001_us_zipcode",rule:"segment_exact",segments:[],description:"Standard 5-digit ZIPs (e.g., 90210)"},{taxonomy:"commercialdata_hhcomposition",rule:"segment_aggregate",segments:[],description:"Categories of household types. Always include all variants with children."},{taxonomy:"commercialdata_estimatedhhincome",rule:"segment_aggregate",segments:[],description:"Brackets: <25k, 25-50k, 50-75k, 75-100k, >100k. For estimation, aggregate all 100,001+ ranges."},{taxonomy:"consumerdata_auto_make_1",rule:"segment_exact",segments:[],description:"Car ownership (Ford, Toyota, Kia, Hyundai, etc.)"},{taxonomy:"consumerdata_auto_make_2",rule:"segment_exact",segments:[],description:"If multiple cars, second taxonomy captures overflow."},{taxonomy:"hs_military_family_relationship_yes",rule:"segment_threshold",threshold:65,description:"Segment >65 = Yes (military family present)"},{taxonomy:"hs_military_family_relationship_no",rule:"segment_threshold",threshold:65,description:"Segment <=65 = No (no military family)"},{taxonomy:"voters_movedfrom_state",rule:"segment_exact",segments:[],description:"Coded by origin state (NJ, OH, VA, ...). Summation shows % migrated into given state."}],fN={taxonomy:"hs_*",rule:"segment_threshold",threshold:65,description:"All hs_* taxonomies = scaled opinion scores. Rule: >65 = Supporter/Positive, <=65 = Opposer/Negative"},IT={CA:39538223,NY:20201249,WY:576851};async function pN(e,t){if(t.size===0)return{totalPopulation:0,matchingPopulation:0,percentage:0,stateBreakdown:[]};console.log(`Applying estimation logic for ${t.size} selected filters`),console.log("Selected filters:",Array.from(t));const n=await cN();console.log("Validation result loaded:",n),console.log("Segment mappings for voters_gender:",n.segmentMappings.voters_gender);const a=mN(t,n);console.log("Filter combinations:",a);const u=new Map;Object.keys(IT).forEach(E=>{u.set(E,{total:0,matching:0})});const f=a.filter(E=>E.isGeographicFilter),p=a.filter(E=>!E.isGeographicFilter);if(f.length>0){const E=f.map(M=>M.targetState).filter(Boolean);console.log("Geographic filters selected for states:",E),console.log("Data filters to apply:",p.length),u.forEach((M,D)=>{if(E.includes(D)){if(p.length>0){const j=e.filter(F=>F.state_code===D);console.log(`Processing state ${D} with ${j.length} records and ${p.length} data filters`);const G=OT(j,p);M.matching=G,console.log(`State ${D} (selected with data filters): ${M.matching}%`)}else M.matching=100,console.log(`State ${D} (selected, no data filters): 100%`);M.total=100}else M.matching=0,M.total=100,console.log(`State ${D} (not selected): 0%`)})}else u.forEach((E,M)=>{const D=e.filter(G=>G.state_code===M);console.log(`Processing state ${M} with ${D.length} records`);const j=OT(D,a);console.log(`State ${M} intersection: ${j}%`),E.matching=j,E.total=100});const s=[];let P=0,A=0;return u.forEach((E,M)=>{const D=IT[M]||0,j=E.matching/100*D;j>0&&s.push({state:M,population:D,matchingPopulation:j,percentage:E.matching}),P+=D,A+=j}),console.log(`Estimation complete: ${A.toLocaleString()} matching population out of ${P.toLocaleString()} total`),{totalPopulation:P,matchingPopulation:A,percentage:P>0?A/P*100:0,stateBreakdown:s.sort((E,M)=>M.matchingPopulation-E.matchingPopulation)}}function mN(e,t){const n=[];return e.forEach(a=>{if(a.startsWith("state-")){const s=a.replace("state-","");n.push({taxonomy:"geographic_filter",segment:"all",rule:"geographic_filter",isGeographicFilter:!0,targetState:s});return}const u=bN(a);if(!u)return;const f=gN(a,u,t),p=wN(u).rule;console.log(`Creating combination for ${a}: taxonomy=${u}, segment=${f}, rule=${p}`),n.push({taxonomy:u,segment:f,rule:p})}),n}function gN(e,t,n){if(uN(e)){const a=hN(e);if(a)return console.log(`Using calculated filter: ${e} -> ${a.sourceSegments.length} source segments`),a.sourceSegments}if(n&&n.segmentMappings[t]){const a=n.segmentMappings[t];console.log(`Using validation mappings for ${t}:`,a);for(const[u,f]of Object.entries(a))if(console.log(`Checking validation mapping: ${u} against filterId: ${e}`),e.endsWith(`_${u}`))return console.log(`Found validation mapping: ${u} -> ${f}`),f}if(t==="voters_gender"){console.log(`Processing gender filter: ${e}, taxonomy: ${t}`);const a=e.includes("male")?"M":"F";return console.log(`Gender filter ${e} mapped to segment: ${a}`),a}if(t==="2010_state_senate_district")return e.includes("wy")?[1,30]:e.includes("ca")?[1,40]:[1,40];if(t==="2001_us_congressional_district")return e.includes("ca")?[1,53]:e.includes("ny")?[1,29]:[1,53];if(t==="2001_us_zipcode")return"All";if(t==="commercialdata_hhcomposition")return e.includes("children")?"children":"no_children";if(t==="commercialdata_estimatedhhincome")return e.includes("under_25k")?["$1-25000"]:e.includes("25k_50k")?["$25001-50000"]:e.includes("50k_75k")?["$50001-75000"]:e.includes("75k_100k")?["$75001-100000"]:e.includes("over_100k")?["$100001-125000","$125001-150000","$150001-175000","$175001-200000","$200001-225000","$225001-250000","$250000+"]:["$1-25000","$25001-50000","$50001-75000","$75001-100000","$100001-125000","$125001-150000","$150001-175000","$175001-200000","$200001-225000","$225001-250000","$250000+"];if(t==="consumerdata_auto_make_1"||t==="consumerdata_auto_make_2")return console.log(`Processing consumer data filter: ${e}, taxonomy: ${t}`),console.log(`Filter ID includes 'toyota': ${e.includes("toyota")}`),e.includes("ford")?(console.log("Ford filter mapped to segment: Ford"),"Ford"):e.includes("toyota")?(console.log("Toyota filter mapped to segment: Toyota"),"Toyota"):e.includes("honda")?(console.log("Honda filter mapped to segment: Honda"),"Honda"):e.includes("chevrolet")?(console.log("Chevrolet filter mapped to segment: Chevrolet"),"Chevrolet"):e.includes("nissan")?(console.log("Nissan filter mapped to segment: Nissan"),"Nissan"):e.includes("kia")?(console.log("Kia filter mapped to segment: Kia"),"Kia"):e.includes("hyundai")?(console.log("Hyundai filter mapped to segment: Hyundai"),"Hyundai"):e.includes("bmw")?(console.log("BMW filter mapped to segment: BMW"),"BMW"):e.includes("mercedes")?(console.log("Mercedes filter mapped to segment: Mercedes-Benz"),"Mercedes-Benz"):e.includes("audi")?(console.log("Audi filter mapped to segment: Audi"),"Audi"):(console.log(`Consumer data filter ${e} mapped to 'All'`),"All");if(t==="hs_military_family_relationship_yes")return">65";if(t==="hs_military_family_relationship_no")return"<=65";if(t==="ethnic_description"){if(console.log(`Processing ethnicity filter: ${e}, taxonomy: ${t}`),e.includes("african_american")){const a=["African or Af-Am Self Reported","Likely Af-Am (Modeled)"];return console.log(`African American filter mapped to segments: ${a.join(", ")}`),a}if(e.includes("hispanic"))return console.log("Hispanic filter mapped to segment: Hispanic"),"Hispanic";if(e.includes("white")){const a=["English/Welsh","German","Irish","Italian","French","Dutch (Netherlands)","Norwegian","Swedish","Danish","Finnish","Polish","Czech","Hungarian","Austrian","Swiss","Scots"];return console.log(`White filter mapped to ${a.length} segments`),a}if(e.includes("asian")){const a=["Chinese","Japanese","Korean","Vietnamese","Filipino","Indian/Hindu","Pakistani","Bangladeshi","Sri Lankan","Thai","Indonesian","Malay","Myanmar (Burmese)","Laotian","Khmer","Tibetan","Bhutanese","Tonga","Unknown Asian"];return console.log(`Asian filter mapped to ${a.length} segments`),a}if(e.includes("other")){const a=["Native American","Hawaiian","Arab","Armenian","Persian","Turkish","Albanian","Bulgarian","Croatian","Serbian","Slovenian","Slovakian","Romanian","Russian (omitting former Soviet States)","Ukrainian","Byelorussian","Estonian","Latvian","Lithuanian","Georgian","Azerb","Kazak","Uzbek","Turkmenistan","Mongolian","Afghan","Belgian","Greek","Portuguese"];return console.log(`Other ethnicity filter mapped to ${a.length} segments`),a}return console.log(`Ethnicity filter ${e} mapped to 'All'`),"All"}return t==="voters_movedfrom_state"?(console.log(`Processing migration filter: ${e}, taxonomy: ${t}`),e.includes("ca")?(console.log("CA migration filter mapped to segment: CA"),"CA"):e.includes("ny")?(console.log("NY migration filter mapped to segment: NY"),"NY"):e.includes("tx")?(console.log("TX migration filter mapped to segment: TX"),"TX"):e.includes("fl")?(console.log("FL migration filter mapped to segment: FL"),"FL"):e.includes("nj")?(console.log("NJ migration filter mapped to segment: NJ"),"NJ"):e.includes("oh")?(console.log("OH migration filter mapped to segment: OH"),"OH"):e.includes("va")?(console.log("VA migration filter mapped to segment: VA"),"VA"):e.includes("il")?(console.log("IL migration filter mapped to segment: IL"),"IL"):e.includes("pa")?(console.log("PA migration filter mapped to segment: PA"),"PA"):e.includes("ga")?(console.log("GA migration filter mapped to segment: GA"),"GA"):(console.log(`Migration filter ${e} mapped to 'All'`),"All")):t.startsWith("hs_")?e.includes("supporter")?"supporter":e.includes("opposer")?"opposer":"supporter":"All"}function OT(e,t){if(t.length===0)return 0;const n=t.filter(s=>s.isGeographicFilter),a=t.filter(s=>!s.isGeographicFilter);if(n.length>0)if(a.length>0)console.log(`Applying ${a.length} data filters to state data`);else return 100;if(a.length===0)return 0;const u=new Map;a.forEach(s=>{u.has(s.taxonomy)||u.set(s.taxonomy,[]),u.get(s.taxonomy).push(s)});const f=[];if(u.forEach((s,P)=>{if(yN(P)){const A=vN(e,s,P);f.push(A),console.log(`Demographic filter ${P} (UNION): ${A}%`)}else{const A=xN(e,s,P);f.push(A),console.log(`Political filter ${P} (INTERSECTION): ${A}%`)}}),f.length===0)return 0;const p=f.reduce((s,P)=>s*(P/100),100);return console.log(`Final calculation: ${f.join(" × ")} = ${p}%`),p}function yN(e){return["voters_gender","voters_age","ethnic_description","commercialdata_estimatedhhincome","consumerdata_auto_make_1","consumerdata_auto_make_2","voters_movedfrom_state"].includes(e)}function vN(e,t,n){if(console.log(`Calculating union for ${n} with filters:`,t),console.log(`Available ${n} data:`,e.filter(f=>f.taxonomy===n).map(f=>({segment:f.segment,pct:f.population_pct}))),n==="voters_age")return console.log(`Using calculated filter logic for age taxonomy: ${n}`),_N(e,t,n);console.log(`Processing union for ${n} with ${t.length} filters:`,t.map(f=>({taxonomy:f.taxonomy,segment:f.segment,rule:f.rule})));const a=e.filter(f=>f.taxonomy===n&&t.some(p=>{const s=OR(f,p);return console.log(`Row ${f.segment} matches filter ${p.segment}: ${s}`),s}));console.log(`Found ${a.length} matching rows for ${n}:`,a),console.log(`All available ${n} rows in data:`,e.filter(f=>f.taxonomy===n));const u=a.reduce((f,p)=>f+p.population_pct,0);return console.log(`Total percentage for ${n}: ${u}%`),u}function _N(e,t,n){console.log(`Calculating percentage for calculated filters in ${n}`);const a=e.filter(f=>f.taxonomy!==n?!1:t.some(p=>Array.isArray(p.segment)?p.segment.includes(f.segment):f.segment===p.segment)),u=a.reduce((f,p)=>f+p.population_pct,0);return console.log(`Calculated filter percentage for ${n}: ${u}% (${a.length} matching rows)`),u}function xN(e,t,n){const a=[];return t.forEach(f=>{const s=e.filter(P=>P.taxonomy===n&&OR(P,f)).reduce((P,A)=>P+A.population_pct,0);a.push(s)}),a.length===0?0:a.reduce((f,p)=>f*(p/100),100)}function OR(e,t){if(t.taxonomy==="2010_state_senate_district"||t.taxonomy==="2001_us_congressional_district"){if(e.segment.toString().padStart(2,"0"),Array.isArray(t.segment)&&t.segment.length===2){const[n,a]=t.segment;if(typeof e.segment=="number")return e.segment>=n&&e.segment<=a}return!1}if(t.taxonomy==="commercialdata_estimatedhhincome"){if(Array.isArray(t.segment)){const n=e.segment.toString(),a=t.segment.includes(n);return console.log(`Checking income segment ${n} against brackets:`,t.segment,"Match:",a),a}return!1}if(t.taxonomy==="commercialdata_hhcomposition")return t.segment==="children";if(t.taxonomy.startsWith("hs_"))return t.segment==="supporter"||t.segment===">65"?typeof e.segment=="number"&&e.segment>65:t.segment==="opposer"||t.segment==="<=65"?typeof e.segment=="number"&&e.segment<=65:!1;if(typeof t.segment=="number")return e.segment===t.segment;if(Array.isArray(t.segment))return t.segment.length>0&&typeof t.segment[0]=="string"?t.segment.includes(e.segment.toString()):t.segment.includes(e.segment);if(typeof t.segment=="string"){const n=e.segment.toString()===t.segment;return console.log(`String matching: row.segment="${e.segment}" vs filter.segment="${t.segment}" = ${n}`),n}return!1}function bN(e){if(e.includes("_")){const t=e.split("_");if(t.length>=2)return e.startsWith("commercialdata_estimatedhhincome_")?"commercialdata_estimatedhhincome":e.startsWith("voters_age_")?"voters_age":e.startsWith("consumerdata_auto_make_")?"consumerdata_auto_make_1":e.startsWith("ethnic_description_")?"ethnic_description":e.startsWith("voters_movedfrom_state_")?"voters_movedfrom_state":t.slice(0,-1).join("_")}return e}function wN(e){const t=dN.find(n=>n.taxonomy===e);return t||(e.startsWith("hs_")?fN:{taxonomy:e,rule:"segment_exact",segments:[],description:"Default rule for unknown taxonomy"})}const SN=[{id:"area-selection",title:"Area Selection",icon:"🗺️",description:"Geographic area selection for analysis",sections:[{title:"States",description:"Select states to analyze",searchable:!0,collapsible:!0,items:[{id:"state-CA",label:"California (CA)",description:"California state - 39.5M population",category:"Geographic Areas",taxonomy:"state",count:0,states:["CA"]},{id:"state-NY",label:"New York (NY)",description:"New York state - 20.2M population",category:"Geographic Areas",taxonomy:"state",count:0,states:["NY"]},{id:"state-WY",label:"Wyoming (WY)",description:"Wyoming state - 576K population",category:"Geographic Areas",taxonomy:"state",count:0,states:["WY"]}]}]},{id:"core-demographics",title:"Core Demographics",icon:"👥",description:"Basic demographic information",sections:[{title:"Gender",description:"Voter gender distribution (6 records)",searchable:!0,collapsible:!0,items:[{id:"voters_gender_male",label:"Male Voters",description:"Male voter segments (M)",category:"Demographics",taxonomy:"voters_gender",count:0,states:[]},{id:"voters_gender_female",label:"Female Voters",description:"Female voter segments (F)",category:"Demographics",taxonomy:"voters_gender",count:0,states:[]}]},{title:"Age Groups",description:"Voter age distribution (243 records, ages 18-100)",searchable:!0,collapsible:!0,items:[{id:"voters_age_18_34",label:"Ages 18-34",description:"Young adult voters (18-34)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_35_54",label:"Ages 35-54",description:"Middle-aged voters (35-54)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_55_74",label:"Ages 55-74",description:"Mature voters (55-74)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]},{id:"voters_age_75_plus",label:"Ages 75+",description:"Senior voters (75+)",category:"Demographics",taxonomy:"voters_age",count:0,states:[]}]},{title:"Ethnicity",description:"Ethnic and racial demographics (172 records)",searchable:!0,collapsible:!0,items:[{id:"ethnic_description_african_american",label:"African American",description:"African American voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_hispanic",label:"Hispanic",description:"Hispanic voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_white",label:"White",description:"White voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]},{id:"ethnic_description_asian",label:"Asian",description:"Asian voters",category:"Demographics",taxonomy:"ethnic_description",count:0,states:[]}]}]},{id:"household-income",title:"Household & Income",icon:"🏠",description:"Household composition and income brackets",sections:[{title:"Income Brackets",description:"Household income distribution (32 records)",searchable:!0,collapsible:!0,items:[{id:"commercialdata_estimatedhhincome_under_25k",label:"Under $25,000",description:"Households earning under $25,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_25k_50k",label:"$25,000 - $50,000",description:"Households earning $25,000 - $50,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_50k_75k",label:"$50,000 - $75,000",description:"Households earning $50,000 - $75,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_75k_100k",label:"$75,000 - $100,000",description:"Households earning $75,000 - $100,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]},{id:"commercialdata_estimatedhhincome_over_100k",label:"Over $100,000",description:"Households earning over $100,000",category:"Income",taxonomy:"commercialdata_estimatedhhincome",count:0,states:[]}]}]},{id:"consumer-data",title:"Consumer Data",icon:"🚗",description:"Consumer behavior and purchasing patterns",sections:[{title:"Automotive",description:"Car ownership and preferences (114 primary, 101 secondary)",searchable:!0,collapsible:!0,items:[{id:"consumerdata_auto_make_ford",label:"Ford Owners",description:"Ford vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_toyota",label:"Toyota Owners",description:"Toyota vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_honda",label:"Honda Owners",description:"Honda vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_chevrolet",label:"Chevrolet Owners",description:"Chevrolet vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]},{id:"consumerdata_auto_make_nissan",label:"Nissan Owners",description:"Nissan vehicle owners",category:"Consumer",taxonomy:"consumerdata_auto_make_1",count:0,states:[]}]}]},{id:"political-views",title:"Political Views & Attitudes",icon:"🗳️",description:"Political opinions, attitudes, and ideological positions (390+ filters)",sections:[{title:"Elections & Candidates",description:"2024 election preferences and candidate views",searchable:!0,collapsible:!0,items:[{id:"hs_trump_vs_harris_favor_harris_supporter",label:"Harris vs Trump (Favor Harris)",description:"Favors Harris in Trump vs Harris matchup (segment >65)",category:"Elections",taxonomy:"hs_trump_vs_harris_favor_harris",count:0,states:[]},{id:"hs_trump_vs_harris_favor_harris_opposer",label:"Harris vs Trump (Oppose Harris)",description:"Opposes Harris in Trump vs Harris matchup (segment ≤65)",category:"Elections",taxonomy:"hs_trump_vs_harris_favor_harris",count:0,states:[]},{id:"hs_biden_approval_supporter",label:"Biden Approval (Supporter)",description:"Approves of Biden (segment >65)",category:"Elections",taxonomy:"hs_biden_approval",count:0,states:[]},{id:"hs_biden_approval_opposer",label:"Biden Approval (Opposer)",description:"Disapproves of Biden (segment ≤65)",category:"Elections",taxonomy:"hs_biden_approval",count:0,states:[]},{id:"hs_trump_approval_supporter",label:"Trump Approval (Supporter)",description:"Approves of Trump (segment >65)",category:"Elections",taxonomy:"hs_trump_approval",count:0,states:[]},{id:"hs_trump_approval_opposer",label:"Trump Approval (Opposer)",description:"Disapproves of Trump (segment ≤65)",category:"Elections",taxonomy:"hs_trump_approval",count:0,states:[]},{id:"hs_harris_approval_supporter",label:"Harris Approval (Supporter)",description:"Approves of Harris (segment >65)",category:"Elections",taxonomy:"hs_harris_approval",count:0,states:[]},{id:"hs_harris_approval_opposer",label:"Harris Approval (Opposer)",description:"Disapproves of Harris (segment ≤65)",category:"Elections",taxonomy:"hs_harris_approval",count:0,states:[]},{id:"hs_newsom_approval_supporter",label:"Newsom Approval (Supporter)",description:"Approves of Newsom (segment >65)",category:"Elections",taxonomy:"hs_newsom_approval",count:0,states:[]},{id:"hs_newsom_approval_opposer",label:"Newsom Approval (Opposer)",description:"Disapproves of Newsom (segment ≤65)",category:"Elections",taxonomy:"hs_newsom_approval",count:0,states:[]},{id:"hs_bernie_approval_supporter",label:"Bernie Sanders Approval (Supporter)",description:"Approves of Bernie Sanders (segment >65)",category:"Elections",taxonomy:"hs_bernie_approval",count:0,states:[]},{id:"hs_bernie_approval_opposer",label:"Bernie Sanders Approval (Opposer)",description:"Disapproves of Bernie Sanders (segment ≤65)",category:"Elections",taxonomy:"hs_bernie_approval",count:0,states:[]},{id:"hs_aoc_approval_supporter",label:"AOC Approval (Supporter)",description:"Approves of Alexandria Ocasio-Cortez (segment >65)",category:"Elections",taxonomy:"hs_aoc_approval",count:0,states:[]},{id:"hs_aoc_approval_opposer",label:"AOC Approval (Opposer)",description:"Disapproves of Alexandria Ocasio-Cortez (segment ≤65)",category:"Elections",taxonomy:"hs_aoc_approval",count:0,states:[]}]},{title:"Party Affiliation",description:"Political party identification and loyalty",searchable:!0,collapsible:!0,items:[{id:"hs_tribalism_team_dem_supporter",label:"Team Democrat (Supporter)",description:"Strongly identifies with Democratic party (segment >65)",category:"Party Affiliation",taxonomy:"hs_tribalism_team_dem",count:0,states:[]},{id:"hs_tribalism_team_dem_opposer",label:"Team Democrat (Opposer)",description:"Does not identify with Democratic party (segment ≤65)",category:"Party Affiliation",taxonomy:"hs_tribalism_team_dem",count:0,states:[]},{id:"hs_tribalism_team_gop_supporter",label:"Team GOP (Supporter)",description:"Strongly identifies with Republican party (segment >65)",category:"Party Affiliation",taxonomy:"hs_tribalism_team_gop",count:0,states:[]},{id:"hs_tribalism_team_gop_opposer",label:"Team GOP (Opposer)",description:"Does not identify with Republican party (segment ≤65)",category:"Party Affiliation",taxonomy:"hs_tribalism_team_gop",count:0,states:[]}]},{title:"Social Issues",description:"Views on social and cultural issues",searchable:!0,collapsible:!0,items:[{id:"hs_gun_control_support_supporter",label:"Gun Control Support (Supporter)",description:"Supports stricter gun control (segment >65)",category:"Social Issues",taxonomy:"hs_gun_control_support",count:0,states:[]},{id:"hs_gun_control_support_opposer",label:"Gun Control Support (Opposer)",description:"Opposes stricter gun control (segment ≤65)",category:"Social Issues",taxonomy:"hs_gun_control_support",count:0,states:[]},{id:"hs_same_sex_marriage_support_supporter",label:"Same-Sex Marriage Support (Supporter)",description:"Supports same-sex marriage (segment >65)",category:"Social Issues",taxonomy:"hs_same_sex_marriage_support",count:0,states:[]},{id:"hs_same_sex_marriage_support_opposer",label:"Same-Sex Marriage Support (Opposer)",description:"Opposes same-sex marriage (segment ≤65)",category:"Social Issues",taxonomy:"hs_same_sex_marriage_support",count:0,states:[]}]},{title:"Economic Issues",description:"Views on economic and fiscal policies",searchable:!0,collapsible:!0,items:[{id:"hs_ideology_fiscal_conserv_supporter",label:"Fiscal Conservative (Supporter)",description:"Identifies as fiscally conservative (segment >65)",category:"Economic Issues",taxonomy:"hs_ideology_fiscal_conserv",count:0,states:[]},{id:"hs_ideology_fiscal_conserv_opposer",label:"Fiscal Conservative (Opposer)",description:"Does not identify as fiscally conservative (segment ≤65)",category:"Economic Issues",taxonomy:"hs_ideology_fiscal_conserv",count:0,states:[]},{id:"hs_medicare_for_all_support_supporter",label:"Medicare for All Support (Supporter)",description:"Supports Medicare for All (segment >65)",category:"Economic Issues",taxonomy:"hs_medicare_for_all_support",count:0,states:[]},{id:"hs_medicare_for_all_support_opposer",label:"Medicare for All Support (Opposer)",description:"Opposes Medicare for All (segment ≤65)",category:"Economic Issues",taxonomy:"hs_medicare_for_all_support",count:0,states:[]}]},{title:"Foreign Policy",description:"Views on international relations and foreign policy",searchable:!0,collapsible:!0,items:[{id:"hs_israel_military_actions_gop_support_supporter",label:"Israel Military Actions GOP Support (Supporter)",description:"Supports GOP stance on Israel military actions (segment >65)",category:"Foreign Policy",taxonomy:"hs_israel_military_actions_gop_support",count:0,states:[]},{id:"hs_israel_military_actions_gop_support_opposer",label:"Israel Military Actions GOP Support (Opposer)",description:"Opposes GOP stance on Israel military actions (segment ≤65)",category:"Foreign Policy",taxonomy:"hs_israel_military_actions_gop_support",count:0,states:[]}]},{title:"Economic Policy",description:"Views on economic and fiscal policies",searchable:!0,collapsible:!0,items:[{id:"hs_medicare_for_all_support_supporter",label:"Medicare for All (Supporter)",description:"Supports Medicare for All (segment >65)",category:"Economic Policy",taxonomy:"hs_medicare_for_all_support",count:0,states:[]},{id:"hs_medicare_for_all_support_opposer",label:"Medicare for All (Opposer)",description:"Opposes Medicare for All (segment ≤65)",category:"Economic Policy",taxonomy:"hs_medicare_for_all_support",count:0,states:[]},{id:"hs_min_wage_15_increase_support_supporter",label:"$15 Minimum Wage (Supporter)",description:"Supports $15 minimum wage increase (segment >65)",category:"Economic Policy",taxonomy:"hs_min_wage_15_increase_support",count:0,states:[]},{id:"hs_min_wage_15_increase_support_opposer",label:"$15 Minimum Wage (Opposer)",description:"Opposes $15 minimum wage increase (segment ≤65)",category:"Economic Policy",taxonomy:"hs_min_wage_15_increase_support",count:0,states:[]},{id:"hs_tax_cuts_support_supporter",label:"Tax Cuts (Supporter)",description:"Supports tax cuts (segment >65)",category:"Economic Policy",taxonomy:"hs_tax_cuts_support",count:0,states:[]},{id:"hs_tax_cuts_support_opposer",label:"Tax Cuts (Opposer)",description:"Opposes tax cuts (segment ≤65)",category:"Economic Policy",taxonomy:"hs_tax_cuts_support",count:0,states:[]},{id:"hs_income_inequality_serious_supporter",label:"Income Inequality Serious (Supporter)",description:"Views income inequality as serious (segment >65)",category:"Economic Policy",taxonomy:"hs_income_inequality_serious",count:0,states:[]},{id:"hs_income_inequality_serious_opposer",label:"Income Inequality Serious (Opposer)",description:"Does not view income inequality as serious (segment ≤65)",category:"Economic Policy",taxonomy:"hs_income_inequality_serious",count:0,states:[]}]},{title:"Environment & Climate",description:"Views on environmental and climate policies",searchable:!0,collapsible:!0,items:[{id:"hs_climate_change_believer_supporter",label:"Climate Change Believer (Supporter)",description:"Believes in climate change (segment >65)",category:"Environment",taxonomy:"hs_climate_change_believer",count:0,states:[]},{id:"hs_climate_change_believer_opposer",label:"Climate Change Believer (Opposer)",description:"Does not believe in climate change (segment ≤65)",category:"Environment",taxonomy:"hs_climate_change_believer",count:0,states:[]},{id:"hs_green_new_deal_support_supporter",label:"Green New Deal (Supporter)",description:"Supports Green New Deal (segment >65)",category:"Environment",taxonomy:"hs_green_new_deal_support",count:0,states:[]},{id:"hs_green_new_deal_support_opposer",label:"Green New Deal (Opposer)",description:"Opposes Green New Deal (segment ≤65)",category:"Environment",taxonomy:"hs_green_new_deal_support",count:0,states:[]},{id:"hs_consumer_value_environment_supporter",label:"Environmental Values (Supporter)",description:"Values environmental protection (segment >65)",category:"Environment",taxonomy:"hs_consumer_value_environment",count:0,states:[]},{id:"hs_consumer_value_environment_opposer",label:"Environmental Values (Opposer)",description:"Does not prioritize environmental protection (segment ≤65)",category:"Environment",taxonomy:"hs_consumer_value_environment",count:0,states:[]}]},{title:"Immigration & Border",description:"Views on immigration and border policies",searchable:!0,collapsible:!0,items:[{id:"hs_immigration_undesirable_supporter",label:"Immigration Undesirable (Supporter)",description:"Views immigration as undesirable (segment >65)",category:"Immigration",taxonomy:"hs_immigration_undesirable",count:0,states:[]},{id:"hs_immigration_undesirable_opposer",label:"Immigration Undesirable (Opposer)",description:"Does not view immigration as undesirable (segment ≤65)",category:"Immigration",taxonomy:"hs_immigration_undesirable",count:0,states:[]},{id:"hs_mexican_wall_support_supporter",label:"Mexican Wall (Supporter)",description:"Supports Mexican border wall (segment >65)",category:"Immigration",taxonomy:"hs_mexican_wall_support",count:0,states:[]},{id:"hs_mexican_wall_support_opposer",label:"Mexican Wall (Opposer)",description:"Opposes Mexican border wall (segment ≤65)",category:"Immigration",taxonomy:"hs_mexican_wall_support",count:0,states:[]},{id:"hs_mass_deporations_support_supporter",label:"Mass Deportations (Supporter)",description:"Supports mass deportations (segment >65)",category:"Immigration",taxonomy:"hs_mass_deporations_support",count:0,states:[]},{id:"hs_mass_deporations_support_opposer",label:"Mass Deportations (Opposer)",description:"Opposes mass deportations (segment ≤65)",category:"Immigration",taxonomy:"hs_mass_deporations_support",count:0,states:[]}]},{title:"Media & Trust",description:"Trust in news sources and information",searchable:!0,collapsible:!0,items:[{id:"hs_tv_most_trusted_news_fox_supporter",label:"Fox News Trusted (Supporter)",description:"Trusts Fox News most (segment >65)",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_fox",count:0,states:[]},{id:"hs_tv_most_trusted_news_fox_opposer",label:"Fox News Trusted (Opposer)",description:"Does not trust Fox News most (segment ≤65)",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_fox",count:0,states:[]},{id:"hs_tv_most_trusted_news_cnn_supporter",label:"CNN Trusted (Supporter)",description:"Trusts CNN most (segment >65)",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_cnn",count:0,states:[]},{id:"hs_tv_most_trusted_news_cnn_opposer",label:"CNN Trusted (Opposer)",description:"Does not trust CNN most (segment ≤65)",category:"Media Trust",taxonomy:"hs_tv_most_trusted_news_cnn",count:0,states:[]},{id:"hs_trust_science_always_supporter",label:"Always Trusts Science (Supporter)",description:"Always trusts scientific information (segment >65)",category:"Media Trust",taxonomy:"hs_trust_science_always",count:0,states:[]},{id:"hs_trust_science_always_opposer",label:"Always Trusts Science (Opposer)",description:"Does not always trust scientific information (segment ≤65)",category:"Media Trust",taxonomy:"hs_trust_science_always",count:0,states:[]}]},{title:"Conspiracy Theories",description:"Beliefs in conspiracy theories",searchable:!0,collapsible:!0,items:[{id:"hs_qanon_believer_supporter",label:"QAnon Believer (Supporter)",description:"Believes in QAnon (segment >65)",category:"Conspiracy",taxonomy:"hs_qanon_believer",count:0,states:[]},{id:"hs_qanon_believer_opposer",label:"QAnon Believer (Opposer)",description:"Does not believe in QAnon (segment ≤65)",category:"Conspiracy",taxonomy:"hs_qanon_believer",count:0,states:[]},{id:"hs_aliens_governenment_hiding_much_supporter",label:"Aliens Government Hiding (Supporter)",description:"Believes government is hiding alien information (segment >65)",category:"Conspiracy",taxonomy:"hs_aliens_governenment_hiding_much",count:0,states:[]},{id:"hs_aliens_governenment_hiding_much_opposer",label:"Aliens Government Hiding (Opposer)",description:"Does not believe government is hiding alien information (segment ≤65)",category:"Conspiracy",taxonomy:"hs_aliens_governenment_hiding_much",count:0,states:[]},{id:"hs_conspiracy_believer_supporter",label:"Conspiracy Believer (Supporter)",description:"Believes in government conspiracies (segment >65)",category:"Conspiracy",taxonomy:"hs_conspiracy_believer",count:0,states:[]},{id:"hs_conspiracy_believer_opposer",label:"Conspiracy Believer (Opposer)",description:"Does not believe in government conspiracies (segment ≤65)",category:"Conspiracy",taxonomy:"hs_conspiracy_believer",count:0,states:[]}]}]},{id:"migration",title:"Migration",icon:"🚚",description:"Migration patterns and origins",sections:[{title:"Migration Origins",description:"States where voters moved from (123 records)",searchable:!0,collapsible:!0,items:[{id:"voters_movedfrom_state_ca",label:"Moved from California",description:"Voters who moved from California",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_ny",label:"Moved from New York",description:"Voters who moved from New York",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_tx",label:"Moved from Texas",description:"Voters who moved from Texas",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]},{id:"voters_movedfrom_state_fl",label:"Moved from Florida",description:"Voters who moved from Florida",category:"Migration",taxonomy:"voters_movedfrom_state",count:0,states:[]}]}]}];function PN(){return SN}const TN={hs_:"Political Attitudes",consumerdata_:"Consumer Data",commercialdata_:"Commercial Data",hamlet_:"Geographic Areas",unified_school_district:"Education",town_district:"Geographic Areas",county_legislative_district:"Political Districts",village:"Geographic Areas",city:"Geographic Areas"};class AN{data=[];taxonomies=[];csvAnalysis=null;debugMode=!0;async loadData(){try{console.log("Loading voter data from CSV...");const t=await fetch("/Data/wycany.csv");if(!t.ok)throw new Error(`Failed to load CSV: ${t.status} ${t.statusText}`);const n=await t.text();console.log("CSV loaded, parsing data..."),this.data=this.parseCSV(n),console.log(`Parsed ${this.data.length} voter data records`),this.taxonomies=this.extractTaxonomies(),console.log(`Extracted ${this.taxonomies.length} taxonomies`),this.csvAnalysis=await sN(),console.log("CSV Analysis completed:",this.csvAnalysis)}catch(t){throw console.error("Error loading voter data:",t),t}}parseCSV(t){const n=t.split(`
`),a=[];console.log(`Processing ${n.length} lines from CSV`);for(let u=1;u<n.length;u++){const f=n[u].trim();if(!f)continue;const p=f.split(",");if(p.length>=4){const[s,P,A,E]=p;if(s&&P&&A&&E){const M=parseFloat(E);if(!isNaN(M)){const D=parseInt(A),j=isNaN(D)?A.trim():D;a.push({state_code:s.trim(),taxonomy:P.trim(),segment:j,population_pct:M})}}}}return console.log(`Successfully parsed ${a.length} valid records`),a}extractTaxonomies(){const t=new Map;return this.data.forEach(n=>{const a=n.taxonomy;t.set(a,(t.get(a)||0)+1)}),Array.from(t.entries()).map(([n,a])=>({name:n,count:a,category:this.getTaxonomyCategory(n)})).sort((n,a)=>a.count-n.count)}getTaxonomyCategory(t){for(const[n,a]of Object.entries(TN))if(t.startsWith(n))return a;return"Other"}getFilterCategories(){return kT}async getEnhancedFilterCategories(){if(!this.csvAnalysis)return console.warn("CSV analysis not available, returning basic catalog"),kT;console.log("Using finalized filter catalog with verified data sources");const n=PN().map(a=>({...a,sections:a.sections.map(u=>({...u,items:u.items.map(f=>{const p=this.csvAnalysis.taxonomies.find(s=>s.taxonomy===f.taxonomy);return{...f,count:p?.count||0,states:p?.states||[]}})}))}));return console.log("Enhanced validated filter catalog created"),n}getCategoryIcon(t){return{"Political Attitudes":"🗳️","Consumer Data":"💰","Commercial Data":"🏢","Geographic Areas":"🗺️",Education:"🎓","Political Districts":"🏛️",Other:"📊"}[t]||"📊"}getSectionTitle(t){return t.startsWith("hs_")?"Political Attitudes":t.includes("income")?"Income Data":t.includes("district")?"Districts":t.includes("school")?"Education":t.includes("hamlet")||t.includes("city")||t.includes("village")?"Geographic Areas":"Other"}formatTaxonomyLabel(t){return t.replace(/hs_/g,"").replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}async analyzeFilters(t){if(t.size===0)return{totalPopulation:0,matchingPopulation:0,percentage:0,stateBreakdown:[]};console.log(`Analyzing ${t.size} selected filters using estimation logic`);const n=await pN(this.data,t);return console.log(`Estimation complete: ${n.matchingPopulation.toLocaleString()} matching population out of ${n.totalPopulation.toLocaleString()} total`),n}extractTaxonomyFromFilterId(t){if(t.startsWith("state-"))return null;for(const n of this.getFilterCategories())for(const a of n.sections)for(const u of a.items)if(u.id===t&&u.taxonomy)return u.taxonomy;return null}getData(){return this.data}getTaxonomies(){return this.taxonomies}}const Nw=new AN;function CN({selectedFilters:e,onFilterChange:t,onClearAll:n,analysisResult:a}){const[u,f]=be.useState(""),[p,s]=be.useState({}),[P,A]=be.useState([]),[E,M]=be.useState(!0);be.useEffect(()=>{(async()=>{try{await Nw.loadData();const F=await Nw.getEnhancedFilterCategories();A(F),M(!1)}catch(F){console.error("Error loading filter categories:",F),M(!1)}})()},[]);const D=(G,F)=>{s($=>({...$,[G]:F}))},j=P.filter(G=>G.title.toLowerCase().includes(u.toLowerCase())||G.sections.some(F=>F.title.toLowerCase().includes(u.toLowerCase())||F.items.some($=>$.label.toLowerCase().includes(u.toLowerCase()))));return E?ce.jsx("div",{className:"w-80 bg-white border-r border-border flex flex-col h-full",children:ce.jsxs("div",{className:"p-4 border-b border-border",children:[ce.jsx("h2",{className:"mb-4",children:"Filters"}),ce.jsx("div",{className:"flex items-center justify-center h-32",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),ce.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading voter data..."}),ce.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Parsing 137K+ records"})]})})]})}):ce.jsxs("div",{className:"w-80 bg-white border-r border-border flex flex-col h-screen",children:[ce.jsxs("div",{className:"p-4 border-b border-border",children:[ce.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ce.jsxs("h2",{className:"flex items-center gap-2",children:[ce.jsx(SL,{className:"w-5 h-5"}),"Filters"]}),e.size>0&&ce.jsxs(ag,{variant:"default",className:"bg-blue-600",children:[e.size," selected"]})]}),ce.jsxs("div",{className:"relative",children:[ce.jsx(bT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),ce.jsx(AT,{placeholder:"Search by Filter Name",value:u,onChange:G=>f(G.target.value),className:"pl-10"})]})]}),ce.jsx("div",{className:"flex-1 overflow-y-auto",children:ce.jsx("div",{className:"p-4",children:ce.jsx(rN,{type:"multiple",className:"space-y-2",children:j.map(G=>ce.jsxs(nN,{value:G.id,className:"border border-border rounded-lg",children:[ce.jsx(iN,{className:"px-4 py-3 hover:no-underline",children:ce.jsxs("div",{className:"flex items-center gap-3",children:[ce.jsx("span",{className:"text-lg",children:G.icon}),ce.jsx("span",{children:G.title}),ce.jsx(ag,{variant:"secondary",className:"ml-auto",children:G.sections.reduce((F,$)=>F+$.items.length,0)})]})}),ce.jsx(aN,{className:"px-4 pb-4",children:ce.jsx("div",{className:"space-y-4",children:G.sections.map((F,$)=>{const K=`${G.id}-${$}`,J=p[K]||"",ee=F.items.filter(oe=>oe.label.toLowerCase().includes(J.toLowerCase()));return ce.jsxs("div",{className:"space-y-2",children:[ce.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:F.title}),F.searchable&&ce.jsxs("div",{className:"relative",children:[ce.jsx(bT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-3 h-3"}),ce.jsx(AT,{placeholder:`Search ${F.title}`,value:J,onChange:oe=>D(K,oe.target.value),className:"pl-8 h-8 text-sm"})]}),ce.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:ee.map((oe,Y)=>{const re=oe.id;return ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(k5,{id:re,checked:e.has(re),onCheckedChange:ue=>t(re,ue)}),ce.jsx("label",{htmlFor:re,className:"text-sm cursor-pointer flex-1",children:oe.label})]},Y)})})]},$)})})})]},G.id))})})}),ce.jsxs("div",{className:"p-2 border-t border-border bg-gray-50",children:[ce.jsx("h3",{className:"text-xs font-medium mb-1",children:"Quick Filters"}),ce.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[ce.jsx(Ph,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("hs_gun_control_support_supporter",!0),t("hs_ideology_fiscal_conserv_supporter",!0)},children:"🏛️ Conservative Voters"}),ce.jsx(Ph,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("commercialdata_estimatedhhincome_over_100k",!0)},children:"💰 High Income Voters"}),ce.jsx(Ph,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("voters_age_18_34",!0)},children:"👥 Young Voters (18-34)"}),ce.jsx(Ph,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("consumerdata_auto_make_toyota",!0)},children:"🚗 Toyota Owners"}),ce.jsx(Ph,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("ethnic_description_hispanic",!0)},children:"🌎 Hispanic Voters"}),ce.jsx(Ph,{variant:"outline",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:()=>{e.forEach(G=>{t(G,!1)}),t("state-CA",!0)},children:"🗺️ California Only"}),ce.jsx(Ph,{variant:"destructive",size:"sm",className:"w-full text-xs py-1 px-2 h-6",onClick:n,children:"🗑️ Clear All Filters"})]})]}),a&&a.totalPopulation>0&&ce.jsxs("div",{className:"p-4 border-t border-border bg-blue-50",children:[ce.jsx("h3",{className:"text-sm font-medium mb-2",children:"Analysis Results"}),ce.jsxs("div",{className:"space-y-1 text-xs",children:[ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"Total Population:"}),ce.jsx("span",{className:"font-medium",children:a.totalPopulation.toLocaleString()})]}),ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"Matching Population:"}),ce.jsx("span",{className:"font-medium text-blue-600",children:a.matchingPopulation.toLocaleString()})]}),ce.jsxs("div",{className:"flex justify-between",children:[ce.jsx("span",{children:"Percentage:"}),ce.jsxs("span",{className:"font-medium text-blue-600",children:[a.percentage.toFixed(2),"%"]})]})]})]})]})}function og(e){const t=be.useRef(e);return be.useEffect(()=>{t.current=e}),be.useMemo(()=>(...n)=>t.current?.(...n),[])}function EN(e,t=globalThis?.document){const n=og(e);be.useEffect(()=>{const a=u=>{u.key==="Escape"&&n(u)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[n,t])}var MN="DismissableLayer",Bw="dismissableLayer.update",kN="dismissableLayer.pointerDownOutside",IN="dismissableLayer.focusOutside",RT,RR=be.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DR=be.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:s,...P}=e,A=be.useContext(RR),[E,M]=be.useState(null),D=E?.ownerDocument??globalThis?.document,[,j]=be.useState({}),G=ns(t,ue=>M(ue)),F=Array.from(A.layers),[$]=[...A.layersWithOutsidePointerEventsDisabled].slice(-1),K=F.indexOf($),J=E?F.indexOf(E):-1,ee=A.layersWithOutsidePointerEventsDisabled.size>0,oe=J>=K,Y=DN(ue=>{const ge=ue.target,Oe=[...A.branches].some(We=>We.contains(ge));!oe||Oe||(u?.(ue),p?.(ue),ue.defaultPrevented||s?.())},D),re=zN(ue=>{const ge=ue.target;[...A.branches].some(We=>We.contains(ge))||(f?.(ue),p?.(ue),ue.defaultPrevented||s?.())},D);return EN(ue=>{J===A.layers.size-1&&(a?.(ue),!ue.defaultPrevented&&s&&(ue.preventDefault(),s()))},D),be.useEffect(()=>{if(E)return n&&(A.layersWithOutsidePointerEventsDisabled.size===0&&(RT=D.body.style.pointerEvents,D.body.style.pointerEvents="none"),A.layersWithOutsidePointerEventsDisabled.add(E)),A.layers.add(E),DT(),()=>{n&&A.layersWithOutsidePointerEventsDisabled.size===1&&(D.body.style.pointerEvents=RT)}},[E,D,n,A]),be.useEffect(()=>()=>{E&&(A.layers.delete(E),A.layersWithOutsidePointerEventsDisabled.delete(E),DT())},[E,A]),be.useEffect(()=>{const ue=()=>j({});return document.addEventListener(Bw,ue),()=>document.removeEventListener(Bw,ue)},[]),ce.jsx(Sa.div,{...P,ref:G,style:{pointerEvents:ee?oe?"auto":"none":void 0,...e.style},onFocusCapture:Fs(e.onFocusCapture,re.onFocusCapture),onBlurCapture:Fs(e.onBlurCapture,re.onBlurCapture),onPointerDownCapture:Fs(e.onPointerDownCapture,Y.onPointerDownCapture)})});DR.displayName=MN;var ON="DismissableLayerBranch",RN=be.forwardRef((e,t)=>{const n=be.useContext(RR),a=be.useRef(null),u=ns(t,a);return be.useEffect(()=>{const f=a.current;if(f)return n.branches.add(f),()=>{n.branches.delete(f)}},[n.branches]),ce.jsx(Sa.div,{...e,ref:u})});RN.displayName=ON;function DN(e,t=globalThis?.document){const n=og(e),a=be.useRef(!1),u=be.useRef(()=>{});return be.useEffect(()=>{const f=s=>{if(s.target&&!a.current){let P=function(){zR(kN,n,A,{discrete:!0})};const A={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",u.current),u.current=P,t.addEventListener("click",u.current,{once:!0})):P()}else t.removeEventListener("click",u.current);a.current=!1},p=window.setTimeout(()=>{t.addEventListener("pointerdown",f)},0);return()=>{window.clearTimeout(p),t.removeEventListener("pointerdown",f),t.removeEventListener("click",u.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}function zN(e,t=globalThis?.document){const n=og(e),a=be.useRef(!1);return be.useEffect(()=>{const u=f=>{f.target&&!a.current&&zR(IN,n,{originalEvent:f},{discrete:!1})};return t.addEventListener("focusin",u),()=>t.removeEventListener("focusin",u)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function DT(){const e=new CustomEvent(Bw);document.dispatchEvent(e)}function zR(e,t,n,{discrete:a}){const u=n.originalEvent.target,f=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&u.addEventListener(e,t,{once:!0}),a?T5(u,f):u.dispatchEvent(f)}var A0="focusScope.autoFocusOnMount",C0="focusScope.autoFocusOnUnmount",zT={bubbles:!1,cancelable:!0},jN="FocusScope",jR=be.forwardRef((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:u,onUnmountAutoFocus:f,...p}=e,[s,P]=be.useState(null),A=og(u),E=og(f),M=be.useRef(null),D=ns(t,F=>P(F)),j=be.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;be.useEffect(()=>{if(a){let F=function(ee){if(j.paused||!s)return;const oe=ee.target;s.contains(oe)?M.current=oe:Th(M.current,{select:!0})},$=function(ee){if(j.paused||!s)return;const oe=ee.relatedTarget;oe!==null&&(s.contains(oe)||Th(M.current,{select:!0}))},K=function(ee){if(document.activeElement===document.body)for(const Y of ee)Y.removedNodes.length>0&&Th(s)};document.addEventListener("focusin",F),document.addEventListener("focusout",$);const J=new MutationObserver(K);return s&&J.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",F),document.removeEventListener("focusout",$),J.disconnect()}}},[a,s,j.paused]),be.useEffect(()=>{if(s){LT.add(j);const F=document.activeElement;if(!s.contains(F)){const K=new CustomEvent(A0,zT);s.addEventListener(A0,A),s.dispatchEvent(K),K.defaultPrevented||(LN(UN(LR(s)),{select:!0}),document.activeElement===F&&Th(s))}return()=>{s.removeEventListener(A0,A),setTimeout(()=>{const K=new CustomEvent(C0,zT);s.addEventListener(C0,E),s.dispatchEvent(K),K.defaultPrevented||Th(F??document.body,{select:!0}),s.removeEventListener(C0,E),LT.remove(j)},0)}}},[s,A,E,j]);const G=be.useCallback(F=>{if(!n&&!a||j.paused)return;const $=F.key==="Tab"&&!F.altKey&&!F.ctrlKey&&!F.metaKey,K=document.activeElement;if($&&K){const J=F.currentTarget,[ee,oe]=NN(J);ee&&oe?!F.shiftKey&&K===oe?(F.preventDefault(),n&&Th(ee,{select:!0})):F.shiftKey&&K===ee&&(F.preventDefault(),n&&Th(oe,{select:!0})):K===J&&F.preventDefault()}},[n,a,j.paused]);return ce.jsx(Sa.div,{tabIndex:-1,...p,ref:D,onKeyDown:G})});jR.displayName=jN;function LN(e,{select:t=!1}={}){const n=document.activeElement;for(const a of e)if(Th(a,{select:t}),document.activeElement!==n)return}function NN(e){const t=LR(e),n=jT(t,e),a=jT(t.reverse(),e);return[n,a]}function LR(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const u=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||u?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function jT(e,t){for(const n of e)if(!BN(n,{upTo:t}))return n}function BN(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function FN(e){return e instanceof HTMLInputElement&&"select"in e}function Th(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&FN(e)&&t&&e.select()}}var LT=$N();function $N(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=NT(e,t),e.unshift(t)},remove(t){e=NT(e,t),e[0]?.resume()}}}function NT(e,t){const n=[...e],a=n.indexOf(t);return a!==-1&&n.splice(a,1),n}function UN(e){return e.filter(t=>t.tagName!=="A")}var VN="Portal",NR=be.forwardRef((e,t)=>{const{container:n,...a}=e,[u,f]=be.useState(!1);Ud(()=>f(!0),[]);const p=n||u&&globalThis?.document?.body;return p?S5.createPortal(ce.jsx(Sa.div,{...a,ref:t}),p):null});NR.displayName=VN;var E0=0;function qN(){be.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??BT()),document.body.insertAdjacentElement("beforeend",e[1]??BT()),E0++,()=>{E0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),E0--}},[])}function BT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Tc=function(){return Tc=Object.assign||function(t){for(var n,a=1,u=arguments.length;a<u;a++){n=arguments[a];for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(t[f]=n[f])}return t},Tc.apply(this,arguments)};function BR(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(e);u<a.length;u++)t.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(e,a[u])&&(n[a[u]]=e[a[u]]);return n}function GN(e,t,n){if(n||arguments.length===2)for(var a=0,u=t.length,f;a<u;a++)(f||!(a in t))&&(f||(f=Array.prototype.slice.call(t,0,a)),f[a]=t[a]);return e.concat(f||Array.prototype.slice.call(t))}var rv="right-scroll-bar-position",nv="width-before-scroll-bar",WN="with-scroll-bars-hidden",HN="--removed-body-scroll-bar-size";function M0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ZN(e,t){var n=be.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(a){var u=n.value;u!==a&&(n.value=a,n.callback(a,u))}}}})[0];return n.callback=t,n.facade}var XN=typeof window<"u"?be.useLayoutEffect:be.useEffect,FT=new WeakMap;function KN(e,t){var n=ZN(null,function(a){return e.forEach(function(u){return M0(u,a)})});return XN(function(){var a=FT.get(n);if(a){var u=new Set(a),f=new Set(e),p=n.current;u.forEach(function(s){f.has(s)||M0(s,null)}),f.forEach(function(s){u.has(s)||M0(s,p)})}FT.set(n,e)},[e]),n}function YN(e){return e}function JN(e,t){t===void 0&&(t=YN);var n=[],a=!1,u={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(f){var p=t(f,a);return n.push(p),function(){n=n.filter(function(s){return s!==p})}},assignSyncMedium:function(f){for(a=!0;n.length;){var p=n;n=[],p.forEach(f)}n={push:function(s){return f(s)},filter:function(){return n}}},assignMedium:function(f){a=!0;var p=[];if(n.length){var s=n;n=[],s.forEach(f),p=n}var P=function(){var E=p;p=[],E.forEach(f)},A=function(){return Promise.resolve().then(P)};A(),n={push:function(E){p.push(E),A()},filter:function(E){return p=p.filter(E),n}}}};return u}function QN(e){e===void 0&&(e={});var t=JN(null);return t.options=Tc({async:!0,ssr:!1},e),t}var FR=function(e){var t=e.sideCar,n=BR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return be.createElement(a,Tc({},n))};FR.isSideCarExport=!0;function e4(e,t){return e.useMedium(t),FR}var $R=QN(),k0=function(){},u_=be.forwardRef(function(e,t){var n=be.useRef(null),a=be.useState({onScrollCapture:k0,onWheelCapture:k0,onTouchMoveCapture:k0}),u=a[0],f=a[1],p=e.forwardProps,s=e.children,P=e.className,A=e.removeScrollBar,E=e.enabled,M=e.shards,D=e.sideCar,j=e.noRelative,G=e.noIsolation,F=e.inert,$=e.allowPinchZoom,K=e.as,J=K===void 0?"div":K,ee=e.gapMode,oe=BR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Y=D,re=KN([n,t]),ue=Tc(Tc({},oe),u);return be.createElement(be.Fragment,null,E&&be.createElement(Y,{sideCar:$R,removeScrollBar:A,shards:M,noRelative:j,noIsolation:G,inert:F,setCallbacks:f,allowPinchZoom:!!$,lockRef:n,gapMode:ee}),p?be.cloneElement(be.Children.only(s),Tc(Tc({},ue),{ref:re})):be.createElement(J,Tc({},ue,{className:P,ref:re}),s))});u_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};u_.classNames={fullWidth:nv,zeroRight:rv};var t4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function r4(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=t4();return t&&e.setAttribute("nonce",t),e}function n4(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function i4(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var a4=function(){var e=0,t=null;return{add:function(n){e==0&&(t=r4())&&(n4(t,n),i4(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},o4=function(){var e=a4();return function(t,n){be.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},UR=function(){var e=o4(),t=function(n){var a=n.styles,u=n.dynamic;return e(a,u),null};return t},s4={left:0,top:0,right:0,gap:0},I0=function(e){return parseInt(e||"",10)||0},l4=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],u=t[e==="padding"?"paddingRight":"marginRight"];return[I0(n),I0(a),I0(u)]},c4=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return s4;var t=l4(e),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-n+t[2]-t[0])}},u4=UR(),lp="data-scroll-locked",h4=function(e,t,n,a){var u=e.left,f=e.top,p=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(WN,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(s,"px ").concat(a,`;
  }
  body[`).concat(lp,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),n==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(f,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(a,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rv,` {
    right: `).concat(s,"px ").concat(a,`;
  }
  
  .`).concat(nv,` {
    margin-right: `).concat(s,"px ").concat(a,`;
  }
  
  .`).concat(rv," .").concat(rv,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(nv," .").concat(nv,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(lp,`] {
    `).concat(HN,": ").concat(s,`px;
  }
`)},$T=function(){var e=parseInt(document.body.getAttribute(lp)||"0",10);return isFinite(e)?e:0},d4=function(){be.useEffect(function(){return document.body.setAttribute(lp,($T()+1).toString()),function(){var e=$T()-1;e<=0?document.body.removeAttribute(lp):document.body.setAttribute(lp,e.toString())}},[])},f4=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,u=a===void 0?"margin":a;d4();var f=be.useMemo(function(){return c4(u)},[u]);return be.createElement(u4,{styles:h4(f,!t,u,n?"":"!important")})},Fw=!1;if(typeof window<"u")try{var Fy=Object.defineProperty({},"passive",{get:function(){return Fw=!0,!0}});window.addEventListener("test",Fy,Fy),window.removeEventListener("test",Fy,Fy)}catch{Fw=!1}var Zf=Fw?{passive:!1}:!1,p4=function(e){return e.tagName==="TEXTAREA"},VR=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!p4(e)&&n[t]==="visible")},m4=function(e){return VR(e,"overflowY")},g4=function(e){return VR(e,"overflowX")},UT=function(e,t){var n=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var u=qR(e,a);if(u){var f=GR(e,a),p=f[1],s=f[2];if(p>s)return!0}a=a.parentNode}while(a&&a!==n.body);return!1},y4=function(e){var t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight;return[t,n,a]},v4=function(e){var t=e.scrollLeft,n=e.scrollWidth,a=e.clientWidth;return[t,n,a]},qR=function(e,t){return e==="v"?m4(t):g4(t)},GR=function(e,t){return e==="v"?y4(t):v4(t)},_4=function(e,t){return e==="h"&&t==="rtl"?-1:1},x4=function(e,t,n,a,u){var f=_4(e,window.getComputedStyle(t).direction),p=f*a,s=n.target,P=t.contains(s),A=!1,E=p>0,M=0,D=0;do{if(!s)break;var j=GR(e,s),G=j[0],F=j[1],$=j[2],K=F-$-f*G;(G||K)&&qR(e,s)&&(M+=K,D+=G);var J=s.parentNode;s=J&&J.nodeType===Node.DOCUMENT_FRAGMENT_NODE?J.host:J}while(!P&&s!==document.body||P&&(t.contains(s)||t===s));return(E&&Math.abs(M)<1||!E&&Math.abs(D)<1)&&(A=!0),A},$y=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},VT=function(e){return[e.deltaX,e.deltaY]},qT=function(e){return e&&"current"in e?e.current:e},b4=function(e,t){return e[0]===t[0]&&e[1]===t[1]},w4=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},S4=0,Xf=[];function P4(e){var t=be.useRef([]),n=be.useRef([0,0]),a=be.useRef(),u=be.useState(S4++)[0],f=be.useState(UR)[0],p=be.useRef(e);be.useEffect(function(){p.current=e},[e]),be.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(u));var F=GN([e.lockRef.current],(e.shards||[]).map(qT),!0).filter(Boolean);return F.forEach(function($){return $.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),F.forEach(function($){return $.classList.remove("allow-interactivity-".concat(u))})}}},[e.inert,e.lockRef.current,e.shards]);var s=be.useCallback(function(F,$){if("touches"in F&&F.touches.length===2||F.type==="wheel"&&F.ctrlKey)return!p.current.allowPinchZoom;var K=$y(F),J=n.current,ee="deltaX"in F?F.deltaX:J[0]-K[0],oe="deltaY"in F?F.deltaY:J[1]-K[1],Y,re=F.target,ue=Math.abs(ee)>Math.abs(oe)?"h":"v";if("touches"in F&&ue==="h"&&re.type==="range")return!1;var ge=UT(ue,re);if(!ge)return!0;if(ge?Y=ue:(Y=ue==="v"?"h":"v",ge=UT(ue,re)),!ge)return!1;if(!a.current&&"changedTouches"in F&&(ee||oe)&&(a.current=Y),!Y)return!0;var Oe=a.current||Y;return x4(Oe,$,F,Oe==="h"?ee:oe)},[]),P=be.useCallback(function(F){var $=F;if(!(!Xf.length||Xf[Xf.length-1]!==f)){var K="deltaY"in $?VT($):$y($),J=t.current.filter(function(Y){return Y.name===$.type&&(Y.target===$.target||$.target===Y.shadowParent)&&b4(Y.delta,K)})[0];if(J&&J.should){$.cancelable&&$.preventDefault();return}if(!J){var ee=(p.current.shards||[]).map(qT).filter(Boolean).filter(function(Y){return Y.contains($.target)}),oe=ee.length>0?s($,ee[0]):!p.current.noIsolation;oe&&$.cancelable&&$.preventDefault()}}},[]),A=be.useCallback(function(F,$,K,J){var ee={name:F,delta:$,target:K,should:J,shadowParent:T4(K)};t.current.push(ee),setTimeout(function(){t.current=t.current.filter(function(oe){return oe!==ee})},1)},[]),E=be.useCallback(function(F){n.current=$y(F),a.current=void 0},[]),M=be.useCallback(function(F){A(F.type,VT(F),F.target,s(F,e.lockRef.current))},[]),D=be.useCallback(function(F){A(F.type,$y(F),F.target,s(F,e.lockRef.current))},[]);be.useEffect(function(){return Xf.push(f),e.setCallbacks({onScrollCapture:M,onWheelCapture:M,onTouchMoveCapture:D}),document.addEventListener("wheel",P,Zf),document.addEventListener("touchmove",P,Zf),document.addEventListener("touchstart",E,Zf),function(){Xf=Xf.filter(function(F){return F!==f}),document.removeEventListener("wheel",P,Zf),document.removeEventListener("touchmove",P,Zf),document.removeEventListener("touchstart",E,Zf)}},[]);var j=e.removeScrollBar,G=e.inert;return be.createElement(be.Fragment,null,G?be.createElement(f,{styles:w4(u)}):null,j?be.createElement(f4,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function T4(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const A4=e4($R,P4);var WR=be.forwardRef(function(e,t){return be.createElement(u_,Tc({},e,{ref:t,sideCar:A4}))});WR.classNames=u_.classNames;var C4=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Kf=new WeakMap,Uy=new WeakMap,Vy={},O0=0,HR=function(e){return e&&(e.host||HR(e.parentNode))},E4=function(e,t){return t.map(function(n){if(e.contains(n))return n;var a=HR(n);return a&&e.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},M4=function(e,t,n,a){var u=E4(t,Array.isArray(e)?e:[e]);Vy[n]||(Vy[n]=new WeakMap);var f=Vy[n],p=[],s=new Set,P=new Set(u),A=function(M){!M||s.has(M)||(s.add(M),A(M.parentNode))};u.forEach(A);var E=function(M){!M||P.has(M)||Array.prototype.forEach.call(M.children,function(D){if(s.has(D))E(D);else try{var j=D.getAttribute(a),G=j!==null&&j!=="false",F=(Kf.get(D)||0)+1,$=(f.get(D)||0)+1;Kf.set(D,F),f.set(D,$),p.push(D),F===1&&G&&Uy.set(D,!0),$===1&&D.setAttribute(n,"true"),G||D.setAttribute(a,"true")}catch(K){console.error("aria-hidden: cannot operate on ",D,K)}})};return E(t),s.clear(),O0++,function(){p.forEach(function(M){var D=Kf.get(M)-1,j=f.get(M)-1;Kf.set(M,D),f.set(M,j),D||(Uy.has(M)||M.removeAttribute(a),Uy.delete(M)),j||M.removeAttribute(n)}),O0--,O0||(Kf=new WeakMap,Kf=new WeakMap,Uy=new WeakMap,Vy={})}},k4=function(e,t,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),u=C4(e);return u?(a.push.apply(a,Array.from(u.querySelectorAll("[aria-live], script"))),M4(a,u,n,"aria-hidden")):function(){return null}},h_="Dialog",[ZR]=Ug(h_),[I4,Ol]=ZR(h_),XR=e=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:u,onOpenChange:f,modal:p=!0}=e,s=be.useRef(null),P=be.useRef(null),[A,E]=Vg({prop:a,defaultProp:u??!1,onChange:f,caller:h_});return ce.jsx(I4,{scope:t,triggerRef:s,contentRef:P,contentId:Km(),titleId:Km(),descriptionId:Km(),open:A,onOpenChange:E,onOpenToggle:be.useCallback(()=>E(M=>!M),[E]),modal:p,children:n})};XR.displayName=h_;var KR="DialogTrigger",YR=be.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,u=Ol(KR,n),f=ns(t,u.triggerRef);return ce.jsx(Sa.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":b2(u.open),...a,ref:f,onClick:Fs(e.onClick,u.onOpenToggle)})});YR.displayName=KR;var _2="DialogPortal",[O4,JR]=ZR(_2,{forceMount:void 0}),QR=e=>{const{__scopeDialog:t,forceMount:n,children:a,container:u}=e,f=Ol(_2,t);return ce.jsx(O4,{scope:t,forceMount:n,children:be.Children.map(a,p=>ce.jsx(Vp,{present:n||f.open,children:ce.jsx(NR,{asChild:!0,container:u,children:p})}))})};QR.displayName=_2;var sv="DialogOverlay",eD=be.forwardRef((e,t)=>{const n=JR(sv,e.__scopeDialog),{forceMount:a=n.forceMount,...u}=e,f=Ol(sv,e.__scopeDialog);return f.modal?ce.jsx(Vp,{present:a||f.open,children:ce.jsx(D4,{...u,ref:t})}):null});eD.displayName=sv;var R4=ig("DialogOverlay.RemoveScroll"),D4=be.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,u=Ol(sv,n);return ce.jsx(WR,{as:R4,allowPinchZoom:!0,shards:[u.contentRef],children:ce.jsx(Sa.div,{"data-state":b2(u.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Vd="DialogContent",tD=be.forwardRef((e,t)=>{const n=JR(Vd,e.__scopeDialog),{forceMount:a=n.forceMount,...u}=e,f=Ol(Vd,e.__scopeDialog);return ce.jsx(Vp,{present:a||f.open,children:f.modal?ce.jsx(z4,{...u,ref:t}):ce.jsx(j4,{...u,ref:t})})});tD.displayName=Vd;var z4=be.forwardRef((e,t)=>{const n=Ol(Vd,e.__scopeDialog),a=be.useRef(null),u=ns(t,n.contentRef,a);return be.useEffect(()=>{const f=a.current;if(f)return k4(f)},[]),ce.jsx(rD,{...e,ref:u,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fs(e.onCloseAutoFocus,f=>{f.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Fs(e.onPointerDownOutside,f=>{const p=f.detail.originalEvent,s=p.button===0&&p.ctrlKey===!0;(p.button===2||s)&&f.preventDefault()}),onFocusOutside:Fs(e.onFocusOutside,f=>f.preventDefault())})}),j4=be.forwardRef((e,t)=>{const n=Ol(Vd,e.__scopeDialog),a=be.useRef(!1),u=be.useRef(!1);return ce.jsx(rD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:f=>{e.onCloseAutoFocus?.(f),f.defaultPrevented||(a.current||n.triggerRef.current?.focus(),f.preventDefault()),a.current=!1,u.current=!1},onInteractOutside:f=>{e.onInteractOutside?.(f),f.defaultPrevented||(a.current=!0,f.detail.originalEvent.type==="pointerdown"&&(u.current=!0));const p=f.target;n.triggerRef.current?.contains(p)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&u.current&&f.preventDefault()}})}),rD=be.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:u,onCloseAutoFocus:f,...p}=e,s=Ol(Vd,n),P=be.useRef(null),A=ns(t,P);return qN(),ce.jsxs(ce.Fragment,{children:[ce.jsx(jR,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:u,onUnmountAutoFocus:f,children:ce.jsx(DR,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":b2(s.open),...p,ref:A,onDismiss:()=>s.onOpenChange(!1)})}),ce.jsxs(ce.Fragment,{children:[ce.jsx(N4,{titleId:s.titleId}),ce.jsx(F4,{contentRef:P,descriptionId:s.descriptionId})]})]})}),x2="DialogTitle",nD=be.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,u=Ol(x2,n);return ce.jsx(Sa.h2,{id:u.titleId,...a,ref:t})});nD.displayName=x2;var iD="DialogDescription",L4=be.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,u=Ol(iD,n);return ce.jsx(Sa.p,{id:u.descriptionId,...a,ref:t})});L4.displayName=iD;var aD="DialogClose",oD=be.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,u=Ol(aD,n);return ce.jsx(Sa.button,{type:"button",...a,ref:t,onClick:Fs(e.onClick,()=>u.onOpenChange(!1))})});oD.displayName=aD;function b2(e){return e?"open":"closed"}var sD="DialogTitleWarning",[LJ,lD]=f5(sD,{contentName:Vd,titleName:x2,docsSlug:"dialog"}),N4=({titleId:e})=>{const t=lD(sD),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return be.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},B4="DialogDescriptionWarning",F4=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${lD(B4).contentName}}.`;return be.useEffect(()=>{const u=e.current?.getAttribute("aria-describedby");t&&u&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},$4=XR,U4=YR,V4=QR,q4=eD,G4=tD,W4=nD,H4=oD;function Z4({...e}){return ce.jsx($4,{"data-slot":"dialog",...e})}function X4({...e}){return ce.jsx(U4,{"data-slot":"dialog-trigger",...e})}function K4({...e}){return ce.jsx(V4,{"data-slot":"dialog-portal",...e})}function Y4({className:e,...t}){return ce.jsx(q4,{"data-slot":"dialog-overlay",className:ao("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function J4({className:e,children:t,...n}){return ce.jsxs(K4,{"data-slot":"dialog-portal",children:[ce.jsx(Y4,{}),ce.jsxs(G4,{"data-slot":"dialog-content",className:ao("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,ce.jsxs(H4,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[ce.jsx(AL,{}),ce.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Q4({className:e,...t}){return ce.jsx("div",{"data-slot":"dialog-header",className:ao("flex flex-col gap-2 text-center sm:text-left",e),...t})}function eB({className:e,...t}){return ce.jsx(W4,{"data-slot":"dialog-title",className:ao("text-lg leading-none font-semibold",e),...t})}const tB="FeatureCollection",rB=[{type:"Feature",id:"06",properties:{name:"California",density:241.7},geometry:{type:"Polygon",coordinates:[[[-123.233256,42.006186],[-122.378853,42.011663],[-121.037003,41.995232],[-120.001861,41.995232],[-119.996384,40.264519],[-120.001861,38.999346],[-118.71478,38.101128],[-117.498899,37.21934],[-116.540435,36.501861],[-115.85034,35.970598],[-114.634459,35.00118],[-114.634459,34.87521],[-114.470151,34.710902],[-114.333228,34.448009],[-114.136058,34.305608],[-114.256551,34.174162],[-114.415382,34.108438],[-114.535874,33.933176],[-114.497536,33.697668],[-114.524921,33.54979],[-114.727567,33.40739],[-114.661844,33.034958],[-114.524921,33.029481],[-114.470151,32.843265],[-114.524921,32.755634],[-114.72209,32.717295],[-116.04751,32.624187],[-117.126467,32.536556],[-117.24696,32.668003],[-117.252437,32.876127],[-117.329114,33.122589],[-117.471515,33.297851],[-117.7837,33.538836],[-118.183517,33.763391],[-118.260194,33.703145],[-118.413548,33.741483],[-118.391641,33.840068],[-118.566903,34.042715],[-118.802411,33.998899],[-119.218659,34.146777],[-119.278905,34.26727],[-119.558229,34.415147],[-119.875891,34.40967],[-120.138784,34.475393],[-120.472878,34.448009],[-120.64814,34.579455],[-120.609801,34.858779],[-120.670048,34.902595],[-120.631709,35.099764],[-120.894602,35.247642],[-120.905556,35.450289],[-121.004141,35.461243],[-121.168449,35.636505],[-121.283465,35.674843],[-121.332757,35.784382],[-121.716143,36.195153],[-121.896882,36.315645],[-121.935221,36.638785],[-121.858544,36.6114],[-121.787344,36.803093],[-121.929744,36.978355],[-122.105006,36.956447],[-122.335038,37.115279],[-122.417192,37.241248],[-122.400761,37.361741],[-122.515777,37.520572],[-122.515777,37.783465],[-122.329561,37.783465],[-122.406238,38.15042],[-122.488392,38.112082],[-122.504823,37.931343],[-122.701993,37.893004],[-122.937501,38.029928],[-122.97584,38.265436],[-123.129194,38.451652],[-123.331841,38.566668],[-123.44138,38.698114],[-123.737134,38.95553],[-123.687842,39.032208],[-123.824765,39.366301],[-123.764519,39.552517],[-123.85215,39.831841],[-124.109566,40.105688],[-124.361506,40.259042],[-124.410798,40.439781],[-124.158859,40.877937],[-124.109566,41.025814],[-124.158859,41.14083],[-124.065751,41.442061],[-124.147905,41.715908],[-124.257444,41.781632],[-124.213628,42.000709],[-123.233256,42.006186]]]}},{type:"Feature",id:"36",properties:{name:"New York",density:412.3},geometry:{type:"Polygon",coordinates:[[[-73.343806,45.013027],[-73.332852,44.804903],[-73.387622,44.618687],[-73.294514,44.437948],[-73.321898,44.246255],[-73.436914,44.043608],[-73.349283,43.769761],[-73.404052,43.687607],[-73.245221,43.523299],[-73.278083,42.833204],[-73.267129,42.745573],[-73.508114,42.08834],[-73.486206,42.050002],[-73.55193,41.294184],[-73.48073,41.21203],[-73.727192,41.102491],[-73.655992,40.987475],[-73.22879,40.905321],[-73.141159,40.965568],[-72.774204,40.965568],[-72.587988,40.998429],[-72.28128,41.157261],[-72.259372,41.042245],[-72.100541,40.992952],[-72.467496,40.845075],[-73.239744,40.625997],[-73.562884,40.582182],[-73.776484,40.593136],[-73.935316,40.543843],[-74.022947,40.708151],[-73.902454,40.998429],[-74.236547,41.14083],[-74.69661,41.359907],[-74.740426,41.431108],[-74.89378,41.436584],[-75.074519,41.60637],[-75.052611,41.754247],[-75.173104,41.869263],[-75.249781,41.863786],[-75.35932,42.000709],[-79.76278,42.000709],[-79.76278,42.252649],[-79.76278,42.269079],[-79.149363,42.55388],[-79.050778,42.690804],[-78.853608,42.783912],[-78.930285,42.953697],[-79.012439,42.986559],[-79.072686,43.260406],[-78.486653,43.375421],[-77.966344,43.369944],[-77.75822,43.34256],[-77.533665,43.233021],[-77.391265,43.276836],[-76.958587,43.271359],[-76.695693,43.34256],[-76.41637,43.523299],[-76.235631,43.528776],[-76.230154,43.802623],[-76.137046,43.961454],[-76.3616,44.070993],[-76.312308,44.196962],[-75.912491,44.366748],[-75.764614,44.514625],[-75.282643,44.848718],[-74.828057,45.018503],[-74.148916,44.991119],[-73.343806,45.013027]]]}},{type:"Feature",id:"56",properties:{name:"Wyoming",density:5.851},geometry:{type:"Polygon",coordinates:[[[-109.080842,45.002073],[-105.91517,45.002073],[-104.058488,44.996596],[-104.053011,43.002989],[-104.053011,41.003906],[-105.728954,40.998429],[-107.919731,41.003906],[-109.04798,40.998429],[-111.047063,40.998429],[-111.047063,42.000709],[-111.047063,44.476286],[-111.05254,45.002073],[-109.080842,45.002073]]]}}],Pu={type:tB,features:rB};var iv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.3/LICENSE.txt
 */var nB=iv.exports,GT;function iB(){return GT||(GT=1,(function(e,t){(function(n,a){e.exports=a()})(nB,(function(){var n={},a={};function u(p,s,P){if(a[p]=P,p==="index"){var A="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",E={};return a.shared(E),a.index(n,E),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([A],{type:"text/javascript"}))),n}}u("shared",["exports"],(function(p){function s(l,i,o,d){return new(o||(o=Promise))((function(y,x){function w(z){try{I(d.next(z))}catch(N){x(N)}}function C(z){try{I(d.throw(z))}catch(N){x(N)}}function I(z){var N;z.done?y(z.value):(N=z.value,N instanceof o?N:new o((function(V){V(N)}))).then(w,C)}I((d=d.apply(l,i||[])).next())}))}function P(l,i){this.x=l,this.y=i}function A(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var E,M;typeof SuppressedError=="function"&&SuppressedError,P.prototype={clone(){return new P(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,i){return this.clone()._rotateAround(l,i)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const i=l.x-this.x,o=l.y-this.y;return i*i+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,i){return Math.atan2(this.x*i-this.y*l,this.x*l+this.y*i)},_matMult(l){const i=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=i,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const i=Math.cos(l),o=Math.sin(l),d=o*this.x+i*this.y;return this.x=i*this.x-o*this.y,this.y=d,this},_rotateAround(l,i){const o=Math.cos(l),d=Math.sin(l),y=i.y+d*(this.x-i.x)+o*(this.y-i.y);return this.x=i.x+o*(this.x-i.x)-d*(this.y-i.y),this.y=y,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:P},P.convert=function(l){if(l instanceof P)return l;if(Array.isArray(l))return new P(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new P(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var D=(function(){if(M)return E;function l(i,o,d,y){this.cx=3*i,this.bx=3*(d-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(y-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=o,this.p2x=d,this.p2y=y}return M=1,E=l,l.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,o){if(o===void 0&&(o=1e-6),i<0)return 0;if(i>1)return 1;for(var d=i,y=0;y<8;y++){var x=this.sampleCurveX(d)-i;if(Math.abs(x)<o)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=x/w}var C=0,I=1;for(d=i,y=0;y<20&&(x=this.sampleCurveX(d),!(Math.abs(x-i)<o));y++)i>x?C=d:I=d,d=.5*(I-C)+C;return d},solve:function(i,o){return this.sampleCurveY(this.solveCurveX(i,o))}},E})(),j=A(D);let G,F;function $(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function K(){if(F==null&&(F=!1,$())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let d=0;d<25;d++){const y=4*d;i.fillStyle=`rgb(${y},${y+1},${y+2})`,i.fillRect(d%5,Math.floor(d/5),1,1)}const o=i.getImageData(0,0,5,5).data;for(let d=0;d<100;d++)if(d%4!=3&&o[d]!==d){F=!0;break}}}return F||!1}var J=1e-6,ee=typeof Float32Array<"u"?Float32Array:Array;function oe(){var l=new ee(9);return ee!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function Y(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function re(){var l=new ee(3);return ee!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function ue(l){var i=l[0],o=l[1],d=l[2];return Math.sqrt(i*i+o*o+d*d)}function ge(l,i,o){var d=new ee(3);return d[0]=l,d[1]=i,d[2]=o,d}function Oe(l,i,o){return l[0]=i[0]+o[0],l[1]=i[1]+o[1],l[2]=i[2]+o[2],l}function We(l,i,o){return l[0]=i[0]*o,l[1]=i[1]*o,l[2]=i[2]*o,l}function Re(l,i,o){var d=i[0],y=i[1],x=i[2],w=o[0],C=o[1],I=o[2];return l[0]=y*I-x*C,l[1]=x*w-d*I,l[2]=d*C-y*w,l}var Ve,Ye=ue;function ot(l,i,o){var d=i[0],y=i[1],x=i[2],w=i[3];return l[0]=o[0]*d+o[4]*y+o[8]*x+o[12]*w,l[1]=o[1]*d+o[5]*y+o[9]*x+o[13]*w,l[2]=o[2]*d+o[6]*y+o[10]*x+o[14]*w,l[3]=o[3]*d+o[7]*y+o[11]*x+o[15]*w,l}function at(){var l=new ee(4);return ee!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function st(l,i,o,d){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;i*=x,d*=x,o*=x;var w=Math.sin(i),C=Math.cos(i),I=Math.sin(o),z=Math.cos(o),N=Math.sin(d),V=Math.cos(d);switch(y){case"xyz":l[0]=w*z*V+C*I*N,l[1]=C*I*V-w*z*N,l[2]=C*z*N+w*I*V,l[3]=C*z*V-w*I*N;break;case"xzy":l[0]=w*z*V-C*I*N,l[1]=C*I*V-w*z*N,l[2]=C*z*N+w*I*V,l[3]=C*z*V+w*I*N;break;case"yxz":l[0]=w*z*V+C*I*N,l[1]=C*I*V-w*z*N,l[2]=C*z*N-w*I*V,l[3]=C*z*V+w*I*N;break;case"yzx":l[0]=w*z*V+C*I*N,l[1]=C*I*V+w*z*N,l[2]=C*z*N-w*I*V,l[3]=C*z*V-w*I*N;break;case"zxy":l[0]=w*z*V-C*I*N,l[1]=C*I*V+w*z*N,l[2]=C*z*N+w*I*V,l[3]=C*z*V-w*I*N;break;case"zyx":l[0]=w*z*V-C*I*N,l[1]=C*I*V+w*z*N,l[2]=C*z*N-w*I*V,l[3]=C*z*V+w*I*N;break;default:throw new Error("Unknown angle order "+y)}return l}function lt(){var l=new ee(2);return ee!=Float32Array&&(l[0]=0,l[1]=0),l}function Ne(l,i){var o=new ee(2);return o[0]=l,o[1]=i,o}re(),Ve=new ee(4),ee!=Float32Array&&(Ve[0]=0,Ve[1]=0,Ve[2]=0,Ve[3]=0),re(),ge(1,0,0),ge(0,1,0),at(),at(),oe(),lt();const tt=8192;function ut(l,i,o){return i*(tt/(l.tileSize*Math.pow(2,o-l.tileID.overscaledZ)))}function Ce(l,i){return(l%i+i)%i}function qe(l,i,o){return l*(1-o)+i*o}function yt(l){if(l<=0)return 0;if(l>=1)return 1;const i=l*l,o=i*l;return 4*(l<.5?o:3*(l-i)+o-.75)}function Rt(l,i,o,d){const y=new j(l,i,o,d);return x=>y.solve(x)}const $t=Rt(.25,.1,.25,1);function Wt(l,i,o){return Math.min(o,Math.max(i,l))}function er(l,i,o){const d=o-i,y=((l-i)%d+d)%d+i;return y===i?o:y}function tr(l,...i){for(const o of i)for(const d in o)l[d]=o[d];return l}let vt=1;function Ft(l,i,o){const d={};for(const y in l)d[y]=i.call(this,l[y],y,l);return d}function ir(l,i,o){const d={};for(const y in l)i.call(this,l[y],y,l)&&(d[y]=l[y]);return d}function pt(l){return Array.isArray(l)?l.map(pt):typeof l=="object"&&l?Ft(l,pt):l}const dr={};function rr(l){dr[l]||(typeof console<"u"&&console.warn(l),dr[l]=!0)}function qr(l,i,o){return(o.y-l.y)*(i.x-l.x)>(i.y-l.y)*(o.x-l.x)}function Hr(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let vn=null;function qn(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const Xn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ki(l,i,o,d,y){return s(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(l,{timestamp:0});try{const w=x?.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const C=w.startsWith("BGR"),I=new Uint8ClampedArray(d*y*4);if(yield x.copyTo(I,(function(z,N,V,Z,Q){const te=4*Math.max(-N,0),le=(Math.max(0,V)-V)*Z*4+te,fe=4*Z,_e=Math.max(0,N),Ue=Math.max(0,V);return{rect:{x:_e,y:Ue,width:Math.min(z.width,N+Z)-_e,height:Math.min(z.height,V+Q)-Ue},layout:[{offset:le,stride:fe}]}})(l,i,o,d,y)),C)for(let z=0;z<I.length;z+=4){const N=I[z];I[z]=I[z+2],I[z+2]=N}return I}finally{x.close()}}))}let On,ni;function oa(l,i,o,d){return l.addEventListener(i,o,d),{unsubscribe:()=>{l.removeEventListener(i,o,d)}}}function Fa(l){return l*Math.PI/180}function Pa(l){return l/Math.PI*180}const Ao={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},oo={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Co="AbortError";function je(){return new Error(Co)}const ie={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ae(l){return ie.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const de="global-dispatcher";class Se extends Error{constructor(i,o,d,y){super(`AJAXError: ${o} (${i}): ${d}`),this.status=i,this.statusText=o,this.url=d,this.body=y}}const Ee=()=>Hr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Le=function(l,i){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const d=ae(l.url);if(d)return d(l,i);if(Hr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:de},i)}if(!(/^file:/.test(o=l.url)||/^file:/.test(Ee())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(d,y){return s(this,void 0,void 0,(function*(){const x=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Ee(),signal:y.signal});let w,C;d.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{w=yield fetch(x)}catch(z){throw new Se(0,z.message,d.url,new Blob)}if(!w.ok){const z=yield w.blob();throw new Se(w.status,w.statusText,d.url,z)}C=d.type==="arrayBuffer"||d.type==="image"?w.arrayBuffer():d.type==="json"?w.json():w.text();const I=yield C;if(y.signal.aborted)throw je();return{data:I,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}}))})(l,i);if(Hr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:de},i)}var o;return(function(d,y){return new Promise(((x,w)=>{var C;const I=new XMLHttpRequest;I.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(I.responseType="arraybuffer");for(const z in d.headers)I.setRequestHeader(z,d.headers[z]);d.type==="json"&&(I.responseType="text",!((C=d.headers)===null||C===void 0)&&C.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=d.credentials==="include",I.onerror=()=>{w(new Error(I.statusText))},I.onload=()=>{if(!y.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let z=I.response;if(d.type==="json")try{z=JSON.parse(I.response)}catch(N){return void w(N)}x({data:z,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const z=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});w(new Se(I.status,I.statusText,d.url,z))}},y.signal.addEventListener("abort",(()=>{I.abort(),w(je())})),I.send(d.body)}))})(l,i)};function Xe(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const i=new URL(l),o=window.location;return i.protocol===o.protocol&&i.host===o.host}function $e(l,i,o){o[l]&&o[l].indexOf(i)!==-1||(o[l]=o[l]||[],o[l].push(i))}function nt(l,i,o){if(o&&o[l]){const d=o[l].indexOf(i);d!==-1&&o[l].splice(d,1)}}class gt{constructor(i,o={}){tr(this,o),this.type=i}}class ct extends gt{constructor(i,o={}){super("error",tr({error:i},o))}}class zt{on(i,o){return this._listeners=this._listeners||{},$e(i,o,this._listeners),{unsubscribe:()=>{this.off(i,o)}}}off(i,o){return nt(i,o,this._listeners),nt(i,o,this._oneTimeListeners),this}once(i,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},$e(i,o,this._oneTimeListeners),this):new Promise((d=>this.once(i,d)))}fire(i,o){typeof i=="string"&&(i=new gt(i,o||{}));const d=i.type;if(this.listens(d)){i.target=this;const y=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const C of y)C.call(this,i);const x=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const C of x)nt(d,C,this._oneTimeListeners),C.call(this,i);const w=this._eventedParent;w&&(tr(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(i))}else i instanceof ct&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,o){return this._eventedParent=i,this._eventedParentData=o,this}}var Be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const sr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Cr(l,i){const o={};for(const d in l)d!=="ref"&&(o[d]=l[d]);return sr.forEach((d=>{d in i&&(o[d]=i[d])})),o}function Ut(l,i){if(Array.isArray(l)){if(!Array.isArray(i)||l.length!==i.length)return!1;for(let o=0;o<l.length;o++)if(!Ut(l[o],i[o]))return!1;return!0}if(typeof l=="object"&&l!==null&&i!==null){if(typeof i!="object"||Object.keys(l).length!==Object.keys(i).length)return!1;for(const o in l)if(!Ut(l[o],i[o]))return!1;return!0}return l===i}function pr(l,i){l.push(i)}function en(l,i,o){pr(o,{command:"addSource",args:[l,i[l]]})}function Rn(l,i,o){pr(i,{command:"removeSource",args:[l]}),o[l]=!0}function Gn(l,i,o,d){Rn(l,o,d),en(l,i,o)}function gn(l,i,o){let d;for(d in l[o])if(Object.prototype.hasOwnProperty.call(l[o],d)&&d!=="data"&&!Ut(l[o][d],i[o][d]))return!1;for(d in i[o])if(Object.prototype.hasOwnProperty.call(i[o],d)&&d!=="data"&&!Ut(l[o][d],i[o][d]))return!1;return!0}function br(l,i,o,d,y,x){l=l||{},i=i||{};for(const w in l)Object.prototype.hasOwnProperty.call(l,w)&&(Ut(l[w],i[w])||o.push({command:x,args:[d,w,i[w],y]}));for(const w in i)Object.prototype.hasOwnProperty.call(i,w)&&!Object.prototype.hasOwnProperty.call(l,w)&&(Ut(l[w],i[w])||o.push({command:x,args:[d,w,i[w],y]}))}function Er(l){return l.id}function Wn(l,i){return l[i.id]=i,l}class _t{constructor(i,o,d,y){this.message=(i?`${i}: `:"")+d,y&&(this.identifier=y),o!=null&&o.__line__&&(this.line=o.__line__)}}function Kn(l,...i){for(const o of i)for(const d in o)l[d]=o[d];return l}class cn extends Error{constructor(i,o){super(o),this.message=o,this.key=i}}class so{constructor(i,o=[]){this.parent=i,this.bindings={};for(const[d,y]of o)this.bindings[d]=y}concat(i){return new so(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Dl={kind:"null"},Ot={kind:"number"},Mr={kind:"string"},cr={kind:"boolean"},ii={kind:"color"},is={kind:"projectionDefinition"},as={kind:"object"},gr={kind:"value"},Rc={kind:"collator"},Eo={kind:"formatted"},Dc={kind:"padding"},lo={kind:"colorArray"},zl={kind:"numberArray"},wr={kind:"resolvedImage"},$u={kind:"variableAnchorOffsetCollection"};function mi(l,i){return{kind:"array",itemType:l,N:i}}function Kr(l){if(l.kind==="array"){const i=Kr(l.itemType);return typeof l.N=="number"?`array<${i}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${i}>`}return l.kind}const zc=[Dl,Ot,Mr,cr,ii,is,Eo,as,mi(gr),Dc,zl,lo,wr,$u];function jc(l,i){if(i.kind==="error")return null;if(l.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!jc(l.itemType,i.itemType))&&(typeof l.N!="number"||l.N===i.N))return null}else{if(l.kind===i.kind)return null;if(l.kind==="value"){for(const o of zc)if(!jc(o,i))return null}}return`Expected ${Kr(l)} but found ${Kr(i)} instead.`}function Uu(l,i){return i.some((o=>o.kind===l.kind))}function $a(l,i){return i.some((o=>o==="null"?l===null:o==="array"?Array.isArray(l):o==="object"?l&&!Array.isArray(l)&&typeof l=="object":o===typeof l))}function ui(l,i){return l.kind==="array"&&i.kind==="array"?l.itemType.kind===i.itemType.kind&&typeof l.N=="number":l.kind===i.kind}const Lh=.96422,Ta=.82521,rf=4/29,jl=6/29,nf=3*jl*jl,Vu=jl*jl*jl,qu=Math.PI/180,Lc=180/Math.PI;function Ll(l){return(l%=360)<0&&(l+=360),l}function Nl([l,i,o,d]){let y,x;const w=Nc((.2225045*(l=Nh(l))+.7168786*(i=Nh(i))+.0606169*(o=Nh(o)))/1);l===i&&i===o?y=x=w:(y=Nc((.4360747*l+.3850649*i+.1430804*o)/Lh),x=Nc((.0139322*l+.0971045*i+.7141733*o)/Ta));const C=116*w-16;return[C<0?0:C,500*(y-w),200*(w-x),d]}function Nh(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Nc(l){return l>Vu?Math.pow(l,1/3):l/nf+rf}function Vs([l,i,o,d]){let y=(l+16)/116,x=isNaN(i)?y:y+i/500,w=isNaN(o)?y:y-o/200;return y=1*qs(y),x=Lh*qs(x),w=Ta*qs(w),[Bc(3.1338561*x-1.6168667*y-.4906146*w),Bc(-.9787684*x+1.9161415*y+.033454*w),Bc(.0719453*x-.2289914*y+1.4052427*w),d]}function Bc(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function qs(l){return l>jl?l*l*l:nf*(l-rf)}const Jp=Object.hasOwn||function(l,i){return Object.prototype.hasOwnProperty.call(l,i)};function os(l,i){return Jp(l,i)?l[i]:void 0}function $r(l){return parseInt(l.padEnd(2,l),16)/255}function Aa(l,i){return Sr(i?l/100:l,0,1)}function Sr(l,i,o){return Math.min(Math.max(i,l),o)}function Mo(l){return!l.some(Number.isNaN)}const ko={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function co(l,i,o){return l+o*(i-l)}function ss(l,i,o){return l.map(((d,y)=>co(d,i[y],o)))}class _r{constructor(i,o,d,y=1,x=!0){this.r=i,this.g=o,this.b=d,this.a=y,x||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[i,o,d,y]))}static parse(i){if(i instanceof _r)return i;if(typeof i!="string")return;const o=(function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=os(ko,d);if(y){const[w,C,I]=y;return[w/255,C/255,I/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const w=d.length<6?1:2;let C=1;return[$r(d.slice(C,C+=w)),$r(d.slice(C,C+=w)),$r(d.slice(C,C+=w)),$r(d.slice(C,C+w)||"ff")]}if(d.startsWith("rgb")){const w=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[C,I,z,N,V,Z,Q,te,le,fe,_e,Ue]=w,Pe=[N||" ",Q||" ",fe].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const ke=[z,Z,le].join(""),Ke=ke==="%%%"?100:ke===""?255:0;if(Ke){const rt=[Sr(+I/Ke,0,1),Sr(+V/Ke,0,1),Sr(+te/Ke,0,1),_e?Aa(+_e,Ue):1];if(Mo(rt))return rt}}return}}const x=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,C,I,z,N,V,Z,Q,te]=x,le=[I||" ",N||" ",Z].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const fe=[+C,Sr(+z,0,100),Sr(+V,0,100),Q?Aa(+Q,te):1];if(Mo(fe))return(function([_e,Ue,Pe,ke]){function Ke(rt){const mt=(rt+_e/30)%12,It=Ue*Math.min(Pe,1-Pe);return Pe-It*Math.max(-1,Math.min(mt-3,9-mt,1))}return _e=Ll(_e),Ue/=100,Pe/=100,[Ke(0),Ke(8),Ke(4),ke]})(fe)}}})(i);return o?new _r(...o,!1):void 0}get rgb(){const{r:i,g:o,b:d,a:y}=this,x=y||1/0;return this.overwriteGetter("rgb",[i/x,o/x,d/x,y])}get hcl(){return this.overwriteGetter("hcl",(function(i){const[o,d,y,x]=Nl(i),w=Math.sqrt(d*d+y*y);return[Math.round(1e4*w)?Ll(Math.atan2(y,d)*Lc):NaN,w,o,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Nl(this.rgb))}overwriteGetter(i,o){return Object.defineProperty(this,i,{value:o}),o}toString(){const[i,o,d,y]=this.rgb;return`rgba(${[i,o,d].map((x=>Math.round(255*x))).join(",")},${y})`}static interpolate(i,o,d,y="rgb"){switch(y){case"rgb":{const[x,w,C,I]=ss(i.rgb,o.rgb,d);return new _r(x,w,C,I,!1)}case"hcl":{const[x,w,C,I]=i.hcl,[z,N,V,Z]=o.hcl;let Q,te;if(isNaN(x)||isNaN(z))isNaN(x)?isNaN(z)?Q=NaN:(Q=z,C!==1&&C!==0||(te=N)):(Q=x,V!==1&&V!==0||(te=w));else{let Pe=z-x;z>x&&Pe>180?Pe-=360:z<x&&x-z>180&&(Pe+=360),Q=x+d*Pe}const[le,fe,_e,Ue]=(function([Pe,ke,Ke,rt]){return Pe=isNaN(Pe)?0:Pe*qu,Vs([Ke,Math.cos(Pe)*ke,Math.sin(Pe)*ke,rt])})([Q,te??co(w,N,d),co(C,V,d),co(I,Z,d)]);return new _r(le,fe,_e,Ue,!1)}case"lab":{const[x,w,C,I]=Vs(ss(i.lab,o.lab,d));return new _r(x,w,C,I,!1)}}}}_r.black=new _r(0,0,0,1),_r.white=new _r(1,1,1,1),_r.transparent=new _r(0,0,0,0),_r.red=new _r(1,0,0,1);class uo{constructor(i,o,d){this.sensitivity=i?o?"variant":"case":o?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,o){return this.collator.compare(i,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ua=["bottom","center","top"];class Va{constructor(i,o,d,y,x,w){this.text=i,this.image=o,this.scale=d,this.fontStack=y,this.textColor=x,this.verticalAlign=w}}class Sn{constructor(i){this.sections=i}static fromString(i){return new Sn([new Va(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((i=>i.text.length!==0||i.image&&i.image.name.length!==0))}static factory(i){return i instanceof Sn?i:Sn.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map((i=>i.text)).join("")}}class Pn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Pn)return i;if(typeof i=="number")return new Pn([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const o of i)if(typeof o!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Pn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,o,d){return new Pn(ss(i.values,o.values,d))}}class Yn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Yn)return i;if(typeof i=="number")return new Yn([i]);if(Array.isArray(i)){for(const o of i)if(typeof o!="number")return;return new Yn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,o,d){return new Yn(ss(i.values,o.values,d))}}class on{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof on)return i;if(typeof i=="string"){const d=_r.parse(i);return d?new on([d]):void 0}if(!Array.isArray(i))return;const o=[];for(const d of i){if(typeof d!="string")return;const y=_r.parse(d);if(!y)return;o.push(y)}return new on(o)}toString(){return JSON.stringify(this.values)}static interpolate(i,o,d,y="rgb"){const x=[];if(i.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let w=0;w<i.values.length;w++)x.push(_r.interpolate(i.values[w],o.values[w],d,y));return new on(x)}}class tn extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}const Bh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Jn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Jn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let o=0;o<i.length;o+=2){const d=i[o],y=i[o+1];if(typeof d!="string"||!Bh.has(d)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new Jn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,o,d){const y=i.values,x=o.values;if(y.length!==x.length)throw new tn(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${o.toString()}`);const w=[];for(let C=0;C<y.length;C+=2){if(y[C]!==x[C])throw new tn(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${y[C]}, to[${C}]: ${x[C]}`);w.push(y[C]);const[I,z]=y[C+1],[N,V]=x[C+1];w.push([co(I,N,d),co(z,V,d)])}return new Jn(w)}}class sa{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new sa({name:i,available:!1}):null}}class hi{constructor(i,o,d){this.from=i,this.to=o,this.transition=d}static interpolate(i,o,d){return new hi(i,o,d)}static parse(i){return i instanceof hi?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new hi(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new hi(i.from,i.to,i.transition):typeof i=="string"?new hi(i,i,1):void 0}}function Yr(l,i,o,d){return typeof l=="number"&&l>=0&&l<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof o=="number"&&o>=0&&o<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[l,i,o,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[l,i,o,d]:[l,i,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ls(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof hi||l instanceof _r||l instanceof uo||l instanceof Sn||l instanceof Pn||l instanceof Yn||l instanceof on||l instanceof Jn||l instanceof sa)return!0;if(Array.isArray(l)){for(const i of l)if(!ls(i))return!1;return!0}if(typeof l=="object"){for(const i in l)if(!ls(l[i]))return!1;return!0}return!1}function nr(l){if(l===null)return Dl;if(typeof l=="string")return Mr;if(typeof l=="boolean")return cr;if(typeof l=="number")return Ot;if(l instanceof _r)return ii;if(l instanceof hi)return is;if(l instanceof uo)return Rc;if(l instanceof Sn)return Eo;if(l instanceof Pn)return Dc;if(l instanceof Yn)return zl;if(l instanceof on)return lo;if(l instanceof Jn)return $u;if(l instanceof sa)return wr;if(Array.isArray(l)){const i=l.length;let o;for(const d of l){const y=nr(d);if(o){if(o===y)continue;o=gr;break}o=y}return mi(o||gr,i)}return as}function lr(l){const i=typeof l;return l===null?"":i==="string"||i==="number"||i==="boolean"?String(l):l instanceof _r||l instanceof hi||l instanceof Sn||l instanceof Pn||l instanceof Yn||l instanceof on||l instanceof Jn||l instanceof sa?l.toString():JSON.stringify(l)}class la{constructor(i,o){this.type=i,this.value=o}static parse(i,o){if(i.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!ls(i[1]))return o.error("invalid value");const d=i[1];let y=nr(d);const x=o.expectedType;return y.kind!=="array"||y.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(y=x),new la(y,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Pr={string:Mr,number:Ot,boolean:cr,object:as};class gi{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let d,y=1;const x=i[0];if(x==="array"){let C,I;if(i.length>2){const z=i[1];if(typeof z!="string"||!(z in Pr)||z==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);C=Pr[z],y++}else C=gr;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return o.error('The length argument to "array" must be a positive integer literal',2);I=i[2],y++}d=mi(C,I)}else{if(!Pr[x])throw new Error(`Types doesn't contain name = ${x}`);d=Pr[x]}const w=[];for(;y<i.length;y++){const C=o.parse(i[y],y,gr);if(!C)return null;w.push(C)}return new gi(d,w)}evaluate(i){for(let o=0;o<this.args.length;o++){const d=this.args[o].evaluate(i);if(!jc(this.type,nr(d)))return d;if(o===this.args.length-1)throw new tn(`Expected value to be of type ${Kr(this.type)}, but found ${Kr(nr(d))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}const ho={"to-boolean":cr,"to-color":ii,"to-number":Ot,"to-string":Mr};class fo{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");const d=i[0];if(!ho[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&i.length!==2)return o.error("Expected one argument.");const y=ho[d],x=[];for(let w=1;w<i.length;w++){const C=o.parse(i[w],w,gr);if(!C)return null;x.push(C)}return new fo(y,x)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let o,d;for(const y of this.args){if(o=y.evaluate(i),d=null,o instanceof _r)return o;if(typeof o=="string"){const x=i.parseColor(o);if(x)return x}else if(Array.isArray(o)&&(d=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Yr(o[0],o[1],o[2],o[3]),!d))return new _r(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new tn(d||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const d of this.args){o=d.evaluate(i);const y=Pn.parse(o);if(y)return y}throw new tn(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(const d of this.args){o=d.evaluate(i);const y=Yn.parse(o);if(y)return y}throw new tn(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(const d of this.args){o=d.evaluate(i);const y=on.parse(o);if(y)return y}throw new tn(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const d of this.args){o=d.evaluate(i);const y=Jn.parse(o);if(y)return y}throw new tn(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const d of this.args){if(o=d.evaluate(i),o===null)return 0;const y=Number(o);if(!isNaN(y))return y}throw new tn(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Sn.fromString(lr(this.args[0].evaluate(i)));case"resolvedImage":return sa.fromString(lr(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return lr(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}const Bl=["Unknown","Point","LineString","Polygon"];class Fl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let o=this._parseColorCache.get(i);return o||(o=_r.parse(i),this._parseColorCache.set(i,o)),o}}class cs{constructor(i,o,d=[],y,x=new so,w=[]){this.registry=i,this.path=d,this.key=d.map((C=>`[${C}]`)).join(""),this.scope=x,this.errors=w,this.expectedType=y,this._isConstant=o}parse(i,o,d,y,x={}){return o?this.concat(o,d,y)._parse(i,x):this._parse(i,x)}_parse(i,o){function d(y,x,w){return w==="assert"?new gi(x,[y]):w==="coerce"?new fo(x,[y]):y}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=i[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[y];if(x){let w=x.parse(i,this);if(!w)return null;if(this.expectedType){const C=this.expectedType,I=w.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||I.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(I.kind)||C.kind==="colorArray"&&["value","string","array"].includes(I.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))w=d(w,C,o.typeAnnotation||"coerce");else if(this.checkSubtype(C,I))return null}else w=d(w,C,o.typeAnnotation||"assert")}if(!(w instanceof la)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const C=new Fl;try{w=new la(w.type,w.evaluate(C))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,o,d){const y=typeof i=="number"?this.path.concat(i):this.path,x=d?this.scope.concat(d):this.scope;return new cs(this.registry,this._isConstant,y,o||null,x,this.errors)}error(i,...o){const d=`${this.key}${o.map((y=>`[${y}]`)).join("")}`;this.errors.push(new cn(d,i))}checkSubtype(i,o){const d=jc(i,o);return d&&this.error(d),d}}class $l{constructor(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const o of this.bindings)i(o[1]);i(this.result)}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const d=[];for(let x=1;x<i.length-1;x+=2){const w=i[x];if(typeof w!="string")return o.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return o.error("Variable names must contain only alphanumeric characters or '_'.",x);const C=o.parse(i[x+1],x+1);if(!C)return null;d.push([w,C])}const y=o.parse(i[i.length-1],i.length-1,o.expectedType,d);return y?new $l(d,y):null}outputDefined(){return this.result.outputDefined()}}class qa{constructor(i,o){this.type=o.type,this.name=i,this.boundExpression=o}static parse(i,o){if(i.length!==2||typeof i[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const d=i[1];return o.scope.has(d)?new qa(d,o.scope.get(d)):o.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Ul{constructor(i,o,d){this.type=i,this.index=o,this.input=d}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=o.parse(i[1],1,Ot),y=o.parse(i[2],2,mi(o.expectedType||gr));return d&&y?new Ul(y.type.itemType,d,y):null}evaluate(i){const o=this.index.evaluate(i),d=this.input.evaluate(i);if(o<0)throw new tn(`Array index out of bounds: ${o} < 0.`);if(o>=d.length)throw new tn(`Array index out of bounds: ${o} > ${d.length-1}.`);if(o!==Math.floor(o))throw new tn(`Array index must be an integer, but found ${o} instead.`);return d[o]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Gs{constructor(i,o){this.type=cr,this.needle=i,this.haystack=o}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=o.parse(i[1],1,gr),y=o.parse(i[2],2,gr);return d&&y?Uu(d.type,[cr,Mr,Ot,Dl,gr])?new Gs(d,y):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kr(d.type)} instead`):null}evaluate(i){const o=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!d)return!1;if(!$a(o,["boolean","string","number","null"]))throw new tn(`Expected first argument to be of type boolean, string, number or null, but found ${Kr(nr(o))} instead.`);if(!$a(d,["string","array"]))throw new tn(`Expected second argument to be of type array or string, but found ${Kr(nr(d))} instead.`);return d.indexOf(o)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Ca{constructor(i,o,d){this.type=Ot,this.needle=i,this.haystack=o,this.fromIndex=d}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${i.length-1} instead.`);const d=o.parse(i[1],1,gr),y=o.parse(i[2],2,gr);if(!d||!y)return null;if(!Uu(d.type,[cr,Mr,Ot,Dl,gr]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kr(d.type)} instead`);if(i.length===4){const x=o.parse(i[3],3,Ot);return x?new Ca(d,y,x):null}return new Ca(d,y)}evaluate(i){const o=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!$a(o,["boolean","string","number","null"]))throw new tn(`Expected first argument to be of type boolean, string, number or null, but found ${Kr(nr(o))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(i)),$a(d,["string"])){const x=d.indexOf(o,y);return x===-1?-1:[...d.slice(0,x)].length}if($a(d,["array"]))return d.indexOf(o,y);throw new tn(`Expected second argument to be of type array or string, but found ${Kr(nr(d))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Dn{constructor(i,o,d,y,x,w){this.inputType=i,this.type=o,this.input=d,this.cases=y,this.outputs=x,this.otherwise=w}static parse(i,o){if(i.length<5)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return o.error("Expected an even number of arguments.");let d,y;o.expectedType&&o.expectedType.kind!=="value"&&(y=o.expectedType);const x={},w=[];for(let z=2;z<i.length-1;z+=2){let N=i[z];const V=i[z+1];Array.isArray(N)||(N=[N]);const Z=o.concat(z);if(N.length===0)return Z.error("Expected at least one branch label.");for(const te of N){if(typeof te!="number"&&typeof te!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return Z.error("Numeric branch labels must be integer values.");if(d){if(Z.checkSubtype(d,nr(te)))return null}else d=nr(te);if(x[String(te)]!==void 0)return Z.error("Branch labels must be unique.");x[String(te)]=w.length}const Q=o.parse(V,z,y);if(!Q)return null;y=y||Q.type,w.push(Q)}const C=o.parse(i[1],1,gr);if(!C)return null;const I=o.parse(i[i.length-1],i.length-1,y);return I?C.type.kind!=="value"&&o.concat(1).checkSubtype(d,C.type)?null:new Dn(d,y,C,x,w,I):null}evaluate(i){const o=this.input.evaluate(i);return(nr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))&&this.otherwise.outputDefined()}}class Io{constructor(i,o,d){this.type=i,this.branches=o,this.otherwise=d}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return o.error("Expected an odd number of arguments.");let d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);const y=[];for(let w=1;w<i.length-1;w+=2){const C=o.parse(i[w],w,cr);if(!C)return null;const I=o.parse(i[w+1],w+1,d);if(!I)return null;y.push([C,I]),d=d||I.type}const x=o.parse(i[i.length-1],i.length-1,d);if(!x)return null;if(!d)throw new Error("Can't infer output type");return new Io(d,y,x)}evaluate(i){for(const[o,d]of this.branches)if(o.evaluate(i))return d.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[o,d]of this.branches)i(o),i(d);i(this.otherwise)}outputDefined(){return this.branches.every((([i,o])=>o.outputDefined()))&&this.otherwise.outputDefined()}}class Vl{constructor(i,o,d,y){this.type=i,this.input=o,this.beginIndex=d,this.endIndex=y}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${i.length-1} instead.`);const d=o.parse(i[1],1,gr),y=o.parse(i[2],2,Ot);if(!d||!y)return null;if(!Uu(d.type,[mi(gr),Mr,gr]))return o.error(`Expected first argument to be of type array or string, but found ${Kr(d.type)} instead`);if(i.length===4){const x=o.parse(i[3],3,Ot);return x?new Vl(d.type,d,y,x):null}return new Vl(d.type,d,y)}evaluate(i){const o=this.input.evaluate(i),d=this.beginIndex.evaluate(i);let y;if(this.endIndex&&(y=this.endIndex.evaluate(i)),$a(o,["string"]))return[...o].slice(d,y).join("");if($a(o,["array"]))return o.slice(d,y);throw new tn(`Expected first argument to be of type array or string, but found ${Kr(nr(o))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Qn(l,i){const o=l.length-1;let d,y,x=0,w=o,C=0;for(;x<=w;)if(C=Math.floor((x+w)/2),d=l[C],y=l[C+1],d<=i){if(C===o||i<y)return C;x=C+1}else{if(!(d>i))throw new tn("Input is not a number.");w=C-1}return 0}class sn{constructor(i,o,d){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(const[y,x]of d)this.labels.push(y),this.outputs.push(x)}static parse(i,o){if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");const d=o.parse(i[1],1,Ot);if(!d)return null;const y=[];let x=null;o.expectedType&&o.expectedType.kind!=="value"&&(x=o.expectedType);for(let w=1;w<i.length;w+=2){const C=w===1?-1/0:i[w],I=i[w+1],z=w,N=w+1;if(typeof C!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(y.length&&y[y.length-1][0]>=C)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const V=o.parse(I,N,x);if(!V)return null;x=x||V.type,y.push([C,V])}return new sn(x,d,y)}evaluate(i){const o=this.labels,d=this.outputs;if(o.length===1)return d[0].evaluate(i);const y=this.input.evaluate(i);if(y<=o[0])return d[0].evaluate(i);const x=o.length;return y>=o[x-1]?d[x-1].evaluate(i):d[Qn(o,y)].evaluate(i)}eachChild(i){i(this.input);for(const o of this.outputs)i(o)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))}}function Gu(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Oo,Fh,$h=(function(){if(Fh)return Oo;function l(i,o,d,y){this.cx=3*i,this.bx=3*(d-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(y-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=o,this.p2x=d,this.p2y=y}return Fh=1,Oo=l,l.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,o){if(o===void 0&&(o=1e-6),i<0)return 0;if(i>1)return 1;for(var d=i,y=0;y<8;y++){var x=this.sampleCurveX(d)-i;if(Math.abs(x)<o)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=x/w}var C=0,I=1;for(d=i,y=0;y<20&&(x=this.sampleCurveX(d),!(Math.abs(x-i)<o));y++)i>x?C=d:I=d,d=.5*(I-C)+C;return d},solve:function(i,o){return this.sampleCurveY(this.solveCurveX(i,o))}},Oo})(),us=Gu($h);class zn{constructor(i,o,d,y,x){this.type=i,this.operator=o,this.interpolation=d,this.input=y,this.labels=[],this.outputs=[];for(const[w,C]of x)this.labels.push(w),this.outputs.push(C)}static interpolationFactor(i,o,d,y){let x=0;if(i.name==="exponential")x=hs(o,i.base,d,y);else if(i.name==="linear")x=hs(o,1,d,y);else if(i.name==="cubic-bezier"){const w=i.controlPoints;x=new us(w[0],w[1],w[2],w[3]).solve(hs(o,1,d,y))}return x}static parse(i,o){let[d,y,x,...w]=i;if(!Array.isArray(y)||y.length===0)return o.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const z=y[1];if(typeof z!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:z}}else{if(y[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const z=y.slice(1);if(z.length!==4||z.some((N=>typeof N!="number"||N<0||N>1)))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:z}}}if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(x=o.parse(x,2,Ot),!x)return null;const C=[];let I=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||o.expectedType==lo?o.expectedType&&o.expectedType.kind!=="value"&&(I=o.expectedType):I=ii;for(let z=0;z<w.length;z+=2){const N=w[z],V=w[z+1],Z=z+3,Q=z+4;if(typeof N!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(C.length&&C[C.length-1][0]>=N)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const te=o.parse(V,Q,I);if(!te)return null;I=I||te.type,C.push([N,te])}return ui(I,Ot)||ui(I,is)||ui(I,ii)||ui(I,Dc)||ui(I,zl)||ui(I,lo)||ui(I,$u)||ui(I,mi(Ot))?new zn(I,d,y,x,C):o.error(`Type ${Kr(I)} is not interpolatable.`)}evaluate(i){const o=this.labels,d=this.outputs;if(o.length===1)return d[0].evaluate(i);const y=this.input.evaluate(i);if(y<=o[0])return d[0].evaluate(i);const x=o.length;if(y>=o[x-1])return d[x-1].evaluate(i);const w=Qn(o,y),C=zn.interpolationFactor(this.interpolation,y,o[w],o[w+1]),I=d[w].evaluate(i),z=d[w+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return co(I,z,C);case"color":return _r.interpolate(I,z,C);case"padding":return Pn.interpolate(I,z,C);case"colorArray":return on.interpolate(I,z,C);case"numberArray":return Yn.interpolate(I,z,C);case"variableAnchorOffsetCollection":return Jn.interpolate(I,z,C);case"array":return ss(I,z,C);case"projectionDefinition":return hi.interpolate(I,z,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return _r.interpolate(I,z,C,"hcl");case"colorArray":return on.interpolate(I,z,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return _r.interpolate(I,z,C,"lab");case"colorArray":return on.interpolate(I,z,C,"lab")}}}eachChild(i){i(this.input);for(const o of this.outputs)i(o)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))}}function hs(l,i,o,d){const y=d-o,x=l-o;return y===0?0:i===1?x/y:(Math.pow(i,x)-1)/(Math.pow(i,y)-1)}const Ga={color:_r.interpolate,number:co,padding:Pn.interpolate,numberArray:Yn.interpolate,colorArray:on.interpolate,variableAnchorOffsetCollection:Jn.interpolate,array:ss};class Fc{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let d=null;const y=o.expectedType;y&&y.kind!=="value"&&(d=y);const x=[];for(const C of i.slice(1)){const I=o.parse(C,1+x.length,d,void 0,{typeAnnotation:"omit"});if(!I)return null;d=d||I.type,x.push(I)}if(!d)throw new Error("No output type");const w=y&&x.some((C=>jc(y,C.type)));return new Fc(w?gr:d,x)}evaluate(i){let o,d=null,y=0;for(const x of this.args)if(y++,d=x.evaluate(i),d&&d instanceof sa&&!d.available&&(o||(o=d.name),d=null,y===this.args.length&&(d=o)),d!==null)break;return d}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}function $c(l,i){return l==="=="||l==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Uc(l,i,o,d){return d.compare(i,o)===0}function ai(l,i,o){const d=l!=="=="&&l!=="!=";return class cD{constructor(x,w,C){this.type=cr,this.lhs=x,this.rhs=w,this.collator=C,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const C=x[0];let I=w.parse(x[1],1,gr);if(!I)return null;if(!$c(C,I.type))return w.concat(1).error(`"${C}" comparisons are not supported for type '${Kr(I.type)}'.`);let z=w.parse(x[2],2,gr);if(!z)return null;if(!$c(C,z.type))return w.concat(2).error(`"${C}" comparisons are not supported for type '${Kr(z.type)}'.`);if(I.type.kind!==z.type.kind&&I.type.kind!=="value"&&z.type.kind!=="value")return w.error(`Cannot compare types '${Kr(I.type)}' and '${Kr(z.type)}'.`);d&&(I.type.kind==="value"&&z.type.kind!=="value"?I=new gi(z.type,[I]):I.type.kind!=="value"&&z.type.kind==="value"&&(z=new gi(I.type,[z])));let N=null;if(x.length===4){if(I.type.kind!=="string"&&z.type.kind!=="string"&&I.type.kind!=="value"&&z.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(N=w.parse(x[3],3,Rc),!N)return null}return new cD(I,z,N)}evaluate(x){const w=this.lhs.evaluate(x),C=this.rhs.evaluate(x);if(d&&this.hasUntypedArgument){const I=nr(w),z=nr(C);if(I.kind!==z.kind||I.kind!=="string"&&I.kind!=="number")throw new tn(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${I.kind}, ${z.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const I=nr(w),z=nr(C);if(I.kind!=="string"||z.kind!=="string")return i(x,w,C)}return this.collator?o(x,w,C,this.collator.evaluate(x)):i(x,w,C)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const af=ai("==",(function(l,i,o){return i===o}),Uc),Wu=ai("!=",(function(l,i,o){return i!==o}),(function(l,i,o,d){return!Uc(0,i,o,d)})),Qp=ai("<",(function(l,i,o){return i<o}),(function(l,i,o,d){return d.compare(i,o)<0})),Uh=ai(">",(function(l,i,o){return i>o}),(function(l,i,o,d){return d.compare(i,o)>0})),em=ai("<=",(function(l,i,o){return i<=o}),(function(l,i,o,d){return d.compare(i,o)<=0})),of=ai(">=",(function(l,i,o){return i>=o}),(function(l,i,o,d){return d.compare(i,o)>=0}));class Hu{constructor(i,o,d){this.type=Rc,this.locale=d,this.caseSensitive=i,this.diacriticSensitive=o}static parse(i,o){if(i.length!==2)return o.error("Expected one argument.");const d=i[1];if(typeof d!="object"||Array.isArray(d))return o.error("Collator options argument must be an object.");const y=o.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,cr);if(!y)return null;const x=o.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,cr);if(!x)return null;let w=null;return d.locale&&(w=o.parse(d.locale,1,Mr),!w)?null:new Hu(y,x,w)}evaluate(i){return new uo(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class Vh{constructor(i,o,d,y,x){this.type=Mr,this.number=i,this.locale=o,this.currency=d,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(i,o){if(i.length!==3)return o.error("Expected two arguments.");const d=o.parse(i[1],1,Ot);if(!d)return null;const y=i[2];if(typeof y!="object"||Array.isArray(y))return o.error("NumberFormat options argument must be an object.");let x=null;if(y.locale&&(x=o.parse(y.locale,1,Mr),!x))return null;let w=null;if(y.currency&&(w=o.parse(y.currency,1,Mr),!w))return null;let C=null;if(y["min-fraction-digits"]&&(C=o.parse(y["min-fraction-digits"],1,Ot),!C))return null;let I=null;return y["max-fraction-digits"]&&(I=o.parse(y["max-fraction-digits"],1,Ot),!I)?null:new Vh(d,x,w,C,I)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Ws{constructor(i){this.type=Eo,this.sections=i}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");const d=i[1];if(!Array.isArray(d)&&typeof d=="object")return o.error("First argument must be an image or text section.");const y=[];let x=!1;for(let w=1;w<=i.length-1;++w){const C=i[w];if(x&&typeof C=="object"&&!Array.isArray(C)){x=!1;let I=null;if(C["font-scale"]&&(I=o.parse(C["font-scale"],1,Ot),!I))return null;let z=null;if(C["text-font"]&&(z=o.parse(C["text-font"],1,mi(Mr)),!z))return null;let N=null;if(C["text-color"]&&(N=o.parse(C["text-color"],1,ii),!N))return null;let V=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!Ua.includes(C["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(V=o.parse(C["vertical-align"],1,Mr),!V)return null}const Z=y[y.length-1];Z.scale=I,Z.font=z,Z.textColor=N,Z.verticalAlign=V}else{const I=o.parse(i[w],1,gr);if(!I)return null;const z=I.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,y.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ws(y)}evaluate(i){return new Sn(this.sections.map((o=>{const d=o.content.evaluate(i);return nr(d)===wr?new Va("",d,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(i):null):new Va(lr(d),null,o.scale?o.scale.evaluate(i):null,o.font?o.font.evaluate(i).join(","):null,o.textColor?o.textColor.evaluate(i):null,o.verticalAlign?o.verticalAlign.evaluate(i):null)})))}eachChild(i){for(const o of this.sections)i(o.content),o.scale&&i(o.scale),o.font&&i(o.font),o.textColor&&i(o.textColor),o.verticalAlign&&i(o.verticalAlign)}outputDefined(){return!1}}class qh{constructor(i){this.type=wr,this.input=i}static parse(i,o){if(i.length!==2)return o.error("Expected two arguments.");const d=o.parse(i[1],1,Mr);return d?new qh(d):o.error("No image name provided.")}evaluate(i){const o=this.input.evaluate(i),d=sa.fromString(o);return d&&i.availableImages&&(d.available=i.availableImages.indexOf(o)>-1),d}eachChild(i){i(this.input)}outputDefined(){return!1}}class ql{constructor(i){this.type=Ot,this.input=i}static parse(i,o){if(i.length!==2)return o.error(`Expected 1 argument, but found ${i.length-1} instead.`);const d=o.parse(i[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Kr(d.type)} instead.`):new ql(d):null}evaluate(i){const o=this.input.evaluate(i);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new tn(`Expected value to be of type string or array, but found ${Kr(nr(o))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Wa=8192;function tm(l,i){const o=(180+l[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,y=Math.pow(2,i.z);return[Math.round(o*y*Wa),Math.round(d*y*Wa)]}function Zu(l,i){const o=Math.pow(2,i.z);return[(y=(l[0]/Wa+i.x)/o,360*y-180),(d=(l[1]/Wa+i.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,y}function Gl(l,i){l[0]=Math.min(l[0],i[0]),l[1]=Math.min(l[1],i[1]),l[2]=Math.max(l[2],i[0]),l[3]=Math.max(l[3],i[1])}function Vc(l,i){return!(l[0]<=i[0]||l[2]>=i[2]||l[1]<=i[1]||l[3]>=i[3])}function rm(l,i,o){const d=l[0]-i[0],y=l[1]-i[1],x=l[0]-o[0],w=l[1]-o[1];return d*w-x*y==0&&d*x<=0&&y*w<=0}function Xu(l,i,o,d){return(y=[d[0]-o[0],d[1]-o[1]])[0]*(x=[i[0]-l[0],i[1]-l[1]])[1]-y[1]*x[0]!=0&&!(!Wl(l,i,o,d)||!Wl(o,d,l,i));var y,x}function nm(l,i,o){for(const d of o)for(let y=0;y<d.length-1;++y)if(Xu(l,i,d[y],d[y+1]))return!0;return!1}function Hs(l,i,o=!1){let d=!1;for(const C of i)for(let I=0;I<C.length-1;I++){if(rm(l,C[I],C[I+1]))return o;(x=C[I])[1]>(y=l)[1]!=(w=C[I+1])[1]>y[1]&&y[0]<(w[0]-x[0])*(y[1]-x[1])/(w[1]-x[1])+x[0]&&(d=!d)}var y,x,w;return d}function sf(l,i){for(const o of i)if(Hs(l,o))return!0;return!1}function Gh(l,i){for(const o of l)if(!Hs(o,i))return!1;for(let o=0;o<l.length-1;++o)if(nm(l[o],l[o+1],i))return!1;return!0}function Wh(l,i){for(const o of i)if(Gh(l,o))return!0;return!1}function Wl(l,i,o,d){const y=d[0]-o[0],x=d[1]-o[1],w=(l[0]-o[0])*x-y*(l[1]-o[1]),C=(i[0]-o[0])*x-y*(i[1]-o[1]);return w>0&&C<0||w<0&&C>0}function Hh(l,i,o){const d=[];for(let y=0;y<l.length;y++){const x=[];for(let w=0;w<l[y].length;w++){const C=tm(l[y][w],o);Gl(i,C),x.push(C)}d.push(x)}return d}function Zh(l,i,o){const d=[];for(let y=0;y<l.length;y++){const x=Hh(l[y],i,o);d.push(x)}return d}function qc(l,i,o,d){if(l[0]<o[0]||l[0]>o[2]){const y=.5*d;let x=l[0]-o[0]>y?-d:o[0]-l[0]>y?d:0;x===0&&(x=l[0]-o[2]>y?-d:o[2]-l[0]>y?d:0),l[0]+=x}Gl(i,l)}function Xh(l,i,o,d){const y=Math.pow(2,d.z)*Wa,x=[d.x*Wa,d.y*Wa],w=[];for(const C of l)for(const I of C){const z=[I.x+x[0],I.y+x[1]];qc(z,i,o,y),w.push(z)}return w}function Kh(l,i,o,d){const y=Math.pow(2,d.z)*Wa,x=[d.x*Wa,d.y*Wa],w=[];for(const I of l){const z=[];for(const N of I){const V=[N.x+x[0],N.y+x[1]];Gl(i,V),z.push(V)}w.push(z)}if(i[2]-i[0]<=y/2){(C=i)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const I of w)for(const z of I)qc(z,i,o,y)}var C;return w}class ds{constructor(i,o){this.type=cr,this.geojson=i,this.geometries=o}static parse(i,o){if(i.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(ls(i[1])){const d=i[1];if(d.type==="FeatureCollection"){const y=[];for(const x of d.features){const{type:w,coordinates:C}=x.geometry;w==="Polygon"&&y.push(C),w==="MultiPolygon"&&y.push(...C)}if(y.length)return new ds(d,{type:"MultiPolygon",coordinates:y})}else if(d.type==="Feature"){const y=d.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new ds(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ds(d,d)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return(function(o,d){const y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(d.type==="Polygon"){const C=Hh(d.coordinates,x,w),I=Xh(o.geometry(),y,x,w);if(!Vc(y,x))return!1;for(const z of I)if(!Hs(z,C))return!1}if(d.type==="MultiPolygon"){const C=Zh(d.coordinates,x,w),I=Xh(o.geometry(),y,x,w);if(!Vc(y,x))return!1;for(const z of I)if(!sf(z,C))return!1}return!0})(i,this.geometries);if(i.geometryType()==="LineString")return(function(o,d){const y=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(d.type==="Polygon"){const C=Hh(d.coordinates,x,w),I=Kh(o.geometry(),y,x,w);if(!Vc(y,x))return!1;for(const z of I)if(!Gh(z,C))return!1}if(d.type==="MultiPolygon"){const C=Zh(d.coordinates,x,w),I=Kh(o.geometry(),y,x,w);if(!Vc(y,x))return!1;for(const z of I)if(!Wh(z,C))return!1}return!0})(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let fs=class{constructor(l=[],i=(o,d)=>o<d?-1:o>d?1:0){if(this.data=l,this.length=this.data.length,this.compare=i,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:i,compare:o}=this,d=i[l];for(;l>0;){const y=l-1>>1,x=i[y];if(o(d,x)>=0)break;i[l]=x,l=y}i[l]=d}_down(l){const{data:i,compare:o}=this,d=this.length>>1,y=i[l];for(;l<d;){let x=1+(l<<1);const w=x+1;if(w<this.length&&o(i[w],i[x])<0&&(x=w),o(i[x],y)>=0)break;i[l]=i[x],l=x}i[l]=y}};function Yh(l,i,o=0,d=l.length-1,y=im){for(;d>o;){if(d-o>600){const I=d-o+1,z=i-o+1,N=Math.log(I),V=.5*Math.exp(2*N/3),Z=.5*Math.sqrt(N*V*(I-V)/I)*(z-I/2<0?-1:1);Yh(l,i,Math.max(o,Math.floor(i-z*V/I+Z)),Math.min(d,Math.floor(i+(I-z)*V/I+Z)),y)}const x=l[i];let w=o,C=d;for(Gc(l,o,i),y(l[d],x)>0&&Gc(l,o,d);w<C;){for(Gc(l,w,C),w++,C--;y(l[w],x)<0;)w++;for(;y(l[C],x)>0;)C--}y(l[o],x)===0?Gc(l,o,C):(C++,Gc(l,C,d)),C<=i&&(o=C+1),i<=C&&(d=C-1)}}function Gc(l,i,o){const d=l[i];l[i]=l[o],l[o]=d}function im(l,i){return l<i?-1:l>i?1:0}function Hl(l,i){if(l.length<=1)return[l];const o=[];let d,y;for(const x of l){const w=Wc(x);w!==0&&(x.area=Math.abs(w),y===void 0&&(y=w<0),y===w<0?(d&&o.push(d),d=[x]):d.push(x))}if(d&&o.push(d),i>1)for(let x=0;x<o.length;x++)o[x].length<=i||(Yh(o[x],i,1,o[x].length-1,Jh),o[x]=o[x].slice(0,i));return o}function Jh(l,i){return i.area-l.area}function Wc(l){let i=0;for(let o,d,y=0,x=l.length,w=x-1;y<x;w=y++)o=l[y],d=l[w],i+=(d.x-o.x)*(o.y+d.y);return i}const Zl=1/298.257223563,lf=Zl*(2-Zl),Xl=Math.PI/180;class Qh{constructor(i){const o=6378.137*Xl*1e3,d=Math.cos(i*Xl),y=1/(1-lf*(1-d*d)),x=Math.sqrt(y);this.kx=o*x*d,this.ky=o*x*y*(1-lf)}distance(i,o){const d=this.wrap(i[0]-o[0])*this.kx,y=(i[1]-o[1])*this.ky;return Math.sqrt(d*d+y*y)}pointOnLine(i,o){let d,y,x,w,C=1/0;for(let I=0;I<i.length-1;I++){let z=i[I][0],N=i[I][1],V=this.wrap(i[I+1][0]-z)*this.kx,Z=(i[I+1][1]-N)*this.ky,Q=0;V===0&&Z===0||(Q=(this.wrap(o[0]-z)*this.kx*V+(o[1]-N)*this.ky*Z)/(V*V+Z*Z),Q>1?(z=i[I+1][0],N=i[I+1][1]):Q>0&&(z+=V/this.kx*Q,N+=Z/this.ky*Q)),V=this.wrap(o[0]-z)*this.kx,Z=(o[1]-N)*this.ky;const te=V*V+Z*Z;te<C&&(C=te,d=z,y=N,x=I,w=Q)}return{point:[d,y],index:x,t:Math.max(0,Math.min(1,w))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function ed(l,i){return i[0]-l[0]}function Kl(l){return l[1]-l[0]+1}function Ha(l,i){return l[1]>=l[0]&&l[1]<i}function zr(l,i){if(l[0]>l[1])return[null,null];const o=Kl(l);if(i){if(o===2)return[l,null];const y=Math.floor(o/2);return[[l[0],l[0]+y],[l[0]+y,l[1]]]}if(o===1)return[l,null];const d=Math.floor(o/2)-1;return[[l[0],l[0]+d],[l[0]+d+1,l[1]]]}function Ku(l,i){if(!Ha(i,l.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let d=i[0];d<=i[1];++d)Gl(o,l[d]);return o}function Yu(l){const i=[1/0,1/0,-1/0,-1/0];for(const o of l)for(const d of o)Gl(i,d);return i}function cf(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function td(l,i,o){if(!cf(l)||!cf(i))return NaN;let d=0,y=0;return l[2]<i[0]&&(d=i[0]-l[2]),l[0]>i[2]&&(d=l[0]-i[2]),l[1]>i[3]&&(y=l[1]-i[3]),l[3]<i[1]&&(y=i[1]-l[3]),o.distance([0,0],[d,y])}function Zs(l,i,o){const d=o.pointOnLine(i,l);return o.distance(l,d.point)}function rd(l,i,o,d,y){const x=Math.min(Zs(l,[o,d],y),Zs(i,[o,d],y)),w=Math.min(Zs(o,[l,i],y),Zs(d,[l,i],y));return Math.min(x,w)}function am(l,i,o,d,y){if(!Ha(i,l.length)||!Ha(d,o.length))return 1/0;let x=1/0;for(let w=i[0];w<i[1];++w){const C=l[w],I=l[w+1];for(let z=d[0];z<d[1];++z){const N=o[z],V=o[z+1];if(Xu(C,I,N,V))return 0;x=Math.min(x,rd(C,I,N,V,y))}}return x}function Za(l,i,o,d,y){if(!Ha(i,l.length)||!Ha(d,o.length))return NaN;let x=1/0;for(let w=i[0];w<=i[1];++w)for(let C=d[0];C<=d[1];++C)if(x=Math.min(x,y.distance(l[w],o[C])),x===0)return x;return x}function Hc(l,i,o){if(Hs(l,i,!0))return 0;let d=1/0;for(const y of i){const x=y[0],w=y[y.length-1];if(x!==w&&(d=Math.min(d,Zs(l,[w,x],o)),d===0))return d;const C=o.pointOnLine(y,l);if(d=Math.min(d,o.distance(l,C.point)),d===0)return d}return d}function uf(l,i,o,d){if(!Ha(i,l.length))return NaN;for(let x=i[0];x<=i[1];++x)if(Hs(l[x],o,!0))return 0;let y=1/0;for(let x=i[0];x<i[1];++x){const w=l[x],C=l[x+1];for(const I of o)for(let z=0,N=I.length,V=N-1;z<N;V=z++){const Z=I[V],Q=I[z];if(Xu(w,C,Z,Q))return 0;y=Math.min(y,rd(w,C,Z,Q,d))}}return y}function nd(l,i){for(const o of l)for(const d of o)if(Hs(d,i,!0))return!0;return!1}function hf(l,i,o,d=1/0){const y=Yu(l),x=Yu(i);if(d!==1/0&&td(y,x,o)>=d)return d;if(Vc(y,x)){if(nd(l,i))return 0}else if(nd(i,l))return 0;let w=1/0;for(const C of l)for(let I=0,z=C.length,N=z-1;I<z;N=I++){const V=C[N],Z=C[I];for(const Q of i)for(let te=0,le=Q.length,fe=le-1;te<le;fe=te++){const _e=Q[fe],Ue=Q[te];if(Xu(V,Z,_e,Ue))return 0;w=Math.min(w,rd(V,Z,_e,Ue,o))}}return w}function id(l,i,o,d,y,x){if(!x)return;const w=td(Ku(d,x),y,o);w<i&&l.push([w,x,[0,0]])}function Yl(l,i,o,d,y,x,w){if(!x||!w)return;const C=td(Ku(d,x),Ku(y,w),o);C<i&&l.push([C,x,w])}function Ju(l,i,o,d,y=1/0){let x=Math.min(d.distance(l[0],o[0][0]),y);if(x===0)return x;const w=new fs([[0,[0,l.length-1],[0,0]]],ed),C=Yu(o);for(;w.length>0;){const I=w.pop();if(I[0]>=x)continue;const z=I[1],N=i?50:100;if(Kl(z)<=N){if(!Ha(z,l.length))return NaN;if(i){const V=uf(l,z,o,d);if(isNaN(V)||V===0)return V;x=Math.min(x,V)}else for(let V=z[0];V<=z[1];++V){const Z=Hc(l[V],o,d);if(x=Math.min(x,Z),x===0)return 0}}else{const V=zr(z,i);id(w,x,d,l,C,V[0]),id(w,x,d,l,C,V[1])}}return x}function Qu(l,i,o,d,y,x=1/0){let w=Math.min(x,y.distance(l[0],o[0]));if(w===0)return w;const C=new fs([[0,[0,l.length-1],[0,o.length-1]]],ed);for(;C.length>0;){const I=C.pop();if(I[0]>=w)continue;const z=I[1],N=I[2],V=i?50:100,Z=d?50:100;if(Kl(z)<=V&&Kl(N)<=Z){if(!Ha(z,l.length)&&Ha(N,o.length))return NaN;let Q;if(i&&d)Q=am(l,z,o,N,y),w=Math.min(w,Q);else if(i&&!d){const te=l.slice(z[0],z[1]+1);for(let le=N[0];le<=N[1];++le)if(Q=Zs(o[le],te,y),w=Math.min(w,Q),w===0)return w}else if(!i&&d){const te=o.slice(N[0],N[1]+1);for(let le=z[0];le<=z[1];++le)if(Q=Zs(l[le],te,y),w=Math.min(w,Q),w===0)return w}else Q=Za(l,z,o,N,y),w=Math.min(w,Q)}else{const Q=zr(z,i),te=zr(N,d);Yl(C,w,y,l,o,Q[0],te[0]),Yl(C,w,y,l,o,Q[0],te[1]),Yl(C,w,y,l,o,Q[1],te[0]),Yl(C,w,y,l,o,Q[1],te[1])}}return w}function ps(l){return l.type==="MultiPolygon"?l.coordinates.map((i=>({type:"Polygon",coordinates:i}))):l.type==="MultiLineString"?l.coordinates.map((i=>({type:"LineString",coordinates:i}))):l.type==="MultiPoint"?l.coordinates.map((i=>({type:"Point",coordinates:i}))):[l]}class Ro{constructor(i,o){this.type=Ot,this.geojson=i,this.geometries=o}static parse(i,o){if(i.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(ls(i[1])){const d=i[1];if(d.type==="FeatureCollection")return new Ro(d,d.features.map((y=>ps(y.geometry))).flat());if(d.type==="Feature")return new Ro(d,ps(d.geometry));if("type"in d&&"coordinates"in d)return new Ro(d,ps(d))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return(function(o,d){const y=o.geometry(),x=y.flat().map((I=>Zu([I.x,I.y],o.canonical)));if(y.length===0)return NaN;const w=new Qh(x[0][1]);let C=1/0;for(const I of d){switch(I.type){case"Point":C=Math.min(C,Qu(x,!1,[I.coordinates],!1,w,C));break;case"LineString":C=Math.min(C,Qu(x,!1,I.coordinates,!0,w,C));break;case"Polygon":C=Math.min(C,Ju(x,!1,I.coordinates,w,C))}if(C===0)return C}return C})(i,this.geometries);if(i.geometryType()==="LineString")return(function(o,d){const y=o.geometry(),x=y.flat().map((I=>Zu([I.x,I.y],o.canonical)));if(y.length===0)return NaN;const w=new Qh(x[0][1]);let C=1/0;for(const I of d){switch(I.type){case"Point":C=Math.min(C,Qu(x,!0,[I.coordinates],!1,w,C));break;case"LineString":C=Math.min(C,Qu(x,!0,I.coordinates,!0,w,C));break;case"Polygon":C=Math.min(C,Ju(x,!0,I.coordinates,w,C))}if(C===0)return C}return C})(i,this.geometries);if(i.geometryType()==="Polygon")return(function(o,d){const y=o.geometry();if(y.length===0||y[0].length===0)return NaN;const x=Hl(y,0).map((I=>I.map((z=>z.map((N=>Zu([N.x,N.y],o.canonical))))))),w=new Qh(x[0][0][0][1]);let C=1/0;for(const I of d)for(const z of x){switch(I.type){case"Point":C=Math.min(C,Ju([I.coordinates],!1,z,w,C));break;case"LineString":C=Math.min(C,Ju(I.coordinates,!0,z,w,C));break;case"Polygon":C=Math.min(C,hf(z,I.coordinates,w,C))}if(C===0)return C}return C})(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Do{constructor(i){this.type=gr,this.key=i}static parse(i,o){if(i.length!==2)return o.error(`Expected 1 argument, but found ${i.length-1} instead.`);const d=i[1];return d==null?o.error("Global state property must be defined."):typeof d!="string"?o.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new Do(d)}evaluate(i){var o;const d=(o=i.globals)===null||o===void 0?void 0:o.globalState;return d&&Object.keys(d).length!==0?os(d,this.key):null}eachChild(){}outputDefined(){return!1}}const ms={"==":af,"!=":Wu,">":Uh,"<":Qp,">=":of,"<=":em,array:gi,at:Ul,boolean:gi,case:Io,coalesce:Fc,collator:Hu,format:Ws,image:qh,in:Gs,"index-of":Ca,interpolate:zn,"interpolate-hcl":zn,"interpolate-lab":zn,length:ql,let:$l,literal:la,match:Dn,number:gi,"number-format":Vh,object:gi,slice:Vl,step:sn,string:gi,"to-boolean":fo,"to-color":fo,"to-number":fo,"to-string":fo,var:qa,within:ds,distance:Ro,"global-state":Do};class ca{constructor(i,o,d,y){this.name=i,this.type=o,this._evaluate=d,this.args=y}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,o){const d=i[0],y=ca.definitions[d];if(!y)return o.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(y)?y[0]:y.type,w=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,C=w.filter((([z])=>!Array.isArray(z)||z.length===i.length-1));let I=null;for(const[z,N]of C){I=new cs(o.registry,Ks,o.path,null,o.scope);const V=[];let Z=!1;for(let Q=1;Q<i.length;Q++){const te=i[Q],le=Array.isArray(z)?z[Q-1]:z.type,fe=I.parse(te,1+V.length,le);if(!fe){Z=!0;break}V.push(fe)}if(!Z)if(Array.isArray(z)&&z.length!==V.length)I.error(`Expected ${z.length} arguments, but found ${V.length} instead.`);else{for(let Q=0;Q<V.length;Q++){const te=Array.isArray(z)?z[Q]:z.type,le=V[Q];I.concat(Q+1).checkSubtype(te,le.type)}if(I.errors.length===0)return new ca(d,x,N,V)}}if(C.length===1)o.errors.push(...I.errors);else{const z=(C.length?C:w).map((([V])=>{return Z=V,Array.isArray(Z)?`(${Z.map(Kr).join(", ")})`:`(${Kr(Z.type)}...)`;var Z})).join(" | "),N=[];for(let V=1;V<i.length;V++){const Z=o.parse(i[V],1+N.length);if(!Z)return null;N.push(Kr(Z.type))}o.error(`Expected arguments of type ${z}, but found (${N.join(", ")}) instead.`)}return null}static register(i,o){ca.definitions=o;for(const d in o)i[d]=ca}}function Zc(l,[i,o,d,y]){i=i.evaluate(l),o=o.evaluate(l),d=d.evaluate(l);const x=y?y.evaluate(l):1,w=Yr(i,o,d,x);if(w)throw new tn(w);return new _r(i/255,o/255,d/255,x,!1)}function Xs(l,i){return l in i}function Xc(l,i){const o=i[l];return o===void 0?null:o}function gs(l){return{type:l}}function Ks(l){if(l instanceof qa)return Ks(l.boundExpression);if(l instanceof ca&&l.name==="error"||l instanceof Hu||l instanceof ds||l instanceof Ro||l instanceof Do)return!1;const i=l instanceof fo||l instanceof gi;let o=!0;return l.eachChild((d=>{o=i?o&&Ks(d):o&&d instanceof la})),!!o&&Kc(l)&&Yc(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Kc(l){if(l instanceof ca&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof ds||l instanceof Ro)return!1;let i=!0;return l.eachChild((o=>{i&&!Kc(o)&&(i=!1)})),i}function Jl(l){if(l instanceof ca&&l.name==="feature-state")return!1;let i=!0;return l.eachChild((o=>{i&&!Jl(o)&&(i=!1)})),i}function Yc(l,i){if(l instanceof ca&&i.indexOf(l.name)>=0)return!1;let o=!0;return l.eachChild((d=>{o&&!Yc(d,i)&&(o=!1)})),o}function ad(l){return{result:"success",value:l}}function Ys(l){return{result:"error",value:l}}function zo(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function jo(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Jc(l){return!!l.expression&&l.expression.interpolated}function Tr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Qc(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&nr(l)===as}function om(l){return l}function Ql(l,i){const o=l.stops&&typeof l.stops[0][0]=="object",d=o||!(o||l.property!==void 0),y=l.type||(Jc(i)?"exponential":"interval"),x=(function(N){switch(N.type){case"color":return _r.parse;case"padding":return Pn.parse;case"numberArray":return Yn.parse;case"colorArray":return on.parse;default:return null}})(i);if(x&&((l=Kn({},l)).stops&&(l.stops=l.stops.map((N=>[N[0],x(N[1])]))),l.default=x(l.default?l.default:i.default)),l.colorSpace&&(w=l.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var w;const C=(function(N){switch(N){case"exponential":return un;case"interval":return df;case"categorical":return od;case"identity":return sd;default:throw new Error(`Unknown function type "${N}"`)}})(y);let I,z;if(y==="categorical"){I=Object.create(null);for(const N of l.stops)I[N[0]]=N[1];z=typeof l.stops[0][0]}if(o){const N={},V=[];for(let te=0;te<l.stops.length;te++){const le=l.stops[te],fe=le[0].zoom;N[fe]===void 0&&(N[fe]={zoom:fe,type:l.type,property:l.property,default:l.default,stops:[]},V.push(fe)),N[fe].stops.push([le[0].value,le[1]])}const Z=[];for(const te of V)Z.push([N[te].zoom,Ql(N[te],i)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:zn.interpolationFactor.bind(void 0,Q),zoomStops:Z.map((te=>te[0])),evaluate:({zoom:te},le)=>un({stops:Z,base:l.base},i,te).evaluate(te,le)}}if(d){const N=y==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:zn.interpolationFactor.bind(void 0,N),zoomStops:l.stops.map((V=>V[0])),evaluate:({zoom:V})=>C(l,i,V,I,z)}}return{kind:"source",evaluate(N,V){const Z=V&&V.properties?V.properties[l.property]:void 0;return Z===void 0?ys(l.default,i.default):C(l,i,Z,I,z)}}}function ys(l,i,o){return l!==void 0?l:i!==void 0?i:o!==void 0?o:void 0}function od(l,i,o,d,y){return ys(typeof o===y?d[o]:void 0,l.default,i.default)}function df(l,i,o){if(Tr(o)!=="number")return ys(l.default,i.default);const d=l.stops.length;if(d===1||o<=l.stops[0][0])return l.stops[0][1];if(o>=l.stops[d-1][0])return l.stops[d-1][1];const y=Qn(l.stops.map((x=>x[0])),o);return l.stops[y][1]}function un(l,i,o){const d=l.base!==void 0?l.base:1;if(Tr(o)!=="number")return ys(l.default,i.default);const y=l.stops.length;if(y===1||o<=l.stops[0][0])return l.stops[0][1];if(o>=l.stops[y-1][0])return l.stops[y-1][1];const x=Qn(l.stops.map((N=>N[0])),o),w=(function(N,V,Z,Q){const te=Q-Z,le=N-Z;return te===0?0:V===1?le/te:(Math.pow(V,le)-1)/(Math.pow(V,te)-1)})(o,d,l.stops[x][0],l.stops[x+1][0]),C=l.stops[x][1],I=l.stops[x+1][1],z=Ga[i.type]||om;return typeof C.evaluate=="function"?{evaluate(...N){const V=C.evaluate.apply(void 0,N),Z=I.evaluate.apply(void 0,N);if(V!==void 0&&Z!==void 0)return z(V,Z,w,l.colorSpace)}}:z(C,I,w,l.colorSpace)}function sd(l,i,o){switch(i.type){case"color":o=_r.parse(o);break;case"formatted":o=Sn.fromString(o.toString());break;case"resolvedImage":o=sa.fromString(o.toString());break;case"padding":o=Pn.parse(o);break;case"colorArray":o=on.parse(o);break;case"numberArray":o=Yn.parse(o);break;default:Tr(o)===i.type||i.type==="enum"&&i.values[o]||(o=void 0)}return ys(o,l.default,i.default)}ca.register(ms,{error:[{kind:"error"},[Mr],(l,[i])=>{throw new tn(i.evaluate(l))}],typeof:[Mr,[gr],(l,[i])=>Kr(nr(i.evaluate(l)))],"to-rgba":[mi(Ot,4),[ii],(l,[i])=>{const[o,d,y,x]=i.evaluate(l).rgb;return[255*o,255*d,255*y,x]}],rgb:[ii,[Ot,Ot,Ot],Zc],rgba:[ii,[Ot,Ot,Ot,Ot],Zc],has:{type:cr,overloads:[[[Mr],(l,[i])=>Xs(i.evaluate(l),l.properties())],[[Mr,as],(l,[i,o])=>Xs(i.evaluate(l),o.evaluate(l))]]},get:{type:gr,overloads:[[[Mr],(l,[i])=>Xc(i.evaluate(l),l.properties())],[[Mr,as],(l,[i,o])=>Xc(i.evaluate(l),o.evaluate(l))]]},"feature-state":[gr,[Mr],(l,[i])=>Xc(i.evaluate(l),l.featureState||{})],properties:[as,[],l=>l.properties()],"geometry-type":[Mr,[],l=>l.geometryType()],id:[gr,[],l=>l.id()],zoom:[Ot,[],l=>l.globals.zoom],"heatmap-density":[Ot,[],l=>l.globals.heatmapDensity||0],elevation:[Ot,[],l=>l.globals.elevation||0],"line-progress":[Ot,[],l=>l.globals.lineProgress||0],accumulated:[gr,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[Ot,gs(Ot),(l,i)=>{let o=0;for(const d of i)o+=d.evaluate(l);return o}],"*":[Ot,gs(Ot),(l,i)=>{let o=1;for(const d of i)o*=d.evaluate(l);return o}],"-":{type:Ot,overloads:[[[Ot,Ot],(l,[i,o])=>i.evaluate(l)-o.evaluate(l)],[[Ot],(l,[i])=>-i.evaluate(l)]]},"/":[Ot,[Ot,Ot],(l,[i,o])=>i.evaluate(l)/o.evaluate(l)],"%":[Ot,[Ot,Ot],(l,[i,o])=>i.evaluate(l)%o.evaluate(l)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(l,[i,o])=>Math.pow(i.evaluate(l),o.evaluate(l))],sqrt:[Ot,[Ot],(l,[i])=>Math.sqrt(i.evaluate(l))],log10:[Ot,[Ot],(l,[i])=>Math.log(i.evaluate(l))/Math.LN10],ln:[Ot,[Ot],(l,[i])=>Math.log(i.evaluate(l))],log2:[Ot,[Ot],(l,[i])=>Math.log(i.evaluate(l))/Math.LN2],sin:[Ot,[Ot],(l,[i])=>Math.sin(i.evaluate(l))],cos:[Ot,[Ot],(l,[i])=>Math.cos(i.evaluate(l))],tan:[Ot,[Ot],(l,[i])=>Math.tan(i.evaluate(l))],asin:[Ot,[Ot],(l,[i])=>Math.asin(i.evaluate(l))],acos:[Ot,[Ot],(l,[i])=>Math.acos(i.evaluate(l))],atan:[Ot,[Ot],(l,[i])=>Math.atan(i.evaluate(l))],min:[Ot,gs(Ot),(l,i)=>Math.min(...i.map((o=>o.evaluate(l))))],max:[Ot,gs(Ot),(l,i)=>Math.max(...i.map((o=>o.evaluate(l))))],abs:[Ot,[Ot],(l,[i])=>Math.abs(i.evaluate(l))],round:[Ot,[Ot],(l,[i])=>{const o=i.evaluate(l);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ot,[Ot],(l,[i])=>Math.floor(i.evaluate(l))],ceil:[Ot,[Ot],(l,[i])=>Math.ceil(i.evaluate(l))],"filter-==":[cr,[Mr,gr],(l,[i,o])=>l.properties()[i.value]===o.value],"filter-id-==":[cr,[gr],(l,[i])=>l.id()===i.value],"filter-type-==":[cr,[Mr],(l,[i])=>l.geometryType()===i.value],"filter-<":[cr,[Mr,gr],(l,[i,o])=>{const d=l.properties()[i.value],y=o.value;return typeof d==typeof y&&d<y}],"filter-id-<":[cr,[gr],(l,[i])=>{const o=l.id(),d=i.value;return typeof o==typeof d&&o<d}],"filter->":[cr,[Mr,gr],(l,[i,o])=>{const d=l.properties()[i.value],y=o.value;return typeof d==typeof y&&d>y}],"filter-id->":[cr,[gr],(l,[i])=>{const o=l.id(),d=i.value;return typeof o==typeof d&&o>d}],"filter-<=":[cr,[Mr,gr],(l,[i,o])=>{const d=l.properties()[i.value],y=o.value;return typeof d==typeof y&&d<=y}],"filter-id-<=":[cr,[gr],(l,[i])=>{const o=l.id(),d=i.value;return typeof o==typeof d&&o<=d}],"filter->=":[cr,[Mr,gr],(l,[i,o])=>{const d=l.properties()[i.value],y=o.value;return typeof d==typeof y&&d>=y}],"filter-id->=":[cr,[gr],(l,[i])=>{const o=l.id(),d=i.value;return typeof o==typeof d&&o>=d}],"filter-has":[cr,[gr],(l,[i])=>i.value in l.properties()],"filter-has-id":[cr,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[cr,[mi(Mr)],(l,[i])=>i.value.indexOf(l.geometryType())>=0],"filter-id-in":[cr,[mi(gr)],(l,[i])=>i.value.indexOf(l.id())>=0],"filter-in-small":[cr,[Mr,mi(gr)],(l,[i,o])=>o.value.indexOf(l.properties()[i.value])>=0],"filter-in-large":[cr,[Mr,mi(gr)],(l,[i,o])=>(function(d,y,x,w){for(;x<=w;){const C=x+w>>1;if(y[C]===d)return!0;y[C]>d?w=C-1:x=C+1}return!1})(l.properties()[i.value],o.value,0,o.value.length-1)],all:{type:cr,overloads:[[[cr,cr],(l,[i,o])=>i.evaluate(l)&&o.evaluate(l)],[gs(cr),(l,i)=>{for(const o of i)if(!o.evaluate(l))return!1;return!0}]]},any:{type:cr,overloads:[[[cr,cr],(l,[i,o])=>i.evaluate(l)||o.evaluate(l)],[gs(cr),(l,i)=>{for(const o of i)if(o.evaluate(l))return!0;return!1}]]},"!":[cr,[cr],(l,[i])=>!i.evaluate(l)],"is-supported-script":[cr,[Mr],(l,[i])=>{const o=l.globals&&l.globals.isSupportedScript;return!o||o(i.evaluate(l))}],upcase:[Mr,[Mr],(l,[i])=>i.evaluate(l).toUpperCase()],downcase:[Mr,[Mr],(l,[i])=>i.evaluate(l).toLowerCase()],concat:[Mr,gs(gr),(l,i)=>i.map((o=>lr(o.evaluate(l)))).join("")],"resolved-locale":[Mr,[Rc],(l,[i])=>i.evaluate(l).resolvedLocale()]});class ec{constructor(i,o,d){this.expression=i,this._warningHistory={},this._evaluator=new Fl,this._defaultValue=o?(function(y){if(y.type==="color"&&Qc(y.default))return new _r(0,0,0,0);switch(y.type){case"color":return _r.parse(y.default)||null;case"padding":return Pn.parse(y.default)||null;case"numberArray":return Yn.parse(y.default)||null;case"colorArray":return on.parse(y.default)||null;case"variableAnchorOffsetCollection":return Jn.parse(y.default)||null;case"projectionDefinition":return hi.parse(y.default)||null;default:return y.default===void 0?null:y.default}})(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this._globalState=d}evaluateWithoutErrorHandling(i,o,d,y,x,w){return this._globalState&&(i=el(i,this._globalState)),this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=d,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(i,o,d,y,x,w){this._globalState&&(i=el(i,this._globalState)),this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=d||null,this._evaluator.canonical=y,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new tn(`Expected value to be one of ${Object.keys(this._enumValues).map((I=>JSON.stringify(I))).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function vs(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in ms}function tc(l,i,o){const d=new cs(ms,Ks,[],i?(function(x){const w={color:ii,string:Mr,number:Ot,enum:Mr,boolean:cr,formatted:Eo,padding:Dc,numberArray:zl,colorArray:lo,projectionDefinition:is,resolvedImage:wr,variableAnchorOffsetCollection:$u};return x.type==="array"?mi(w[x.value]||gr,x.length):w[x.type]})(i):void 0),y=d.parse(l,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?ad(new ec(y,i,o)):Ys(d.errors)}class Js{constructor(i,o,d){this.kind=i,this._styleExpression=o,this.isStateDependent=i!=="constant"&&!Jl(o.expression),this.globalStateRefs=tu(o.expression),this._globalState=d}evaluateWithoutErrorHandling(i,o,d,y,x,w){return this._globalState&&(i=el(i,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(i,o,d,y,x,w)}evaluate(i,o,d,y,x,w){return this._globalState&&(i=el(i,this._globalState)),this._styleExpression.evaluate(i,o,d,y,x,w)}}class Qs{constructor(i,o,d,y,x){this.kind=i,this.zoomStops=d,this._styleExpression=o,this.isStateDependent=i!=="camera"&&!Jl(o.expression),this.globalStateRefs=tu(o.expression),this.interpolationType=y,this._globalState=x}evaluateWithoutErrorHandling(i,o,d,y,x,w){return this._globalState&&(i=el(i,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(i,o,d,y,x,w)}evaluate(i,o,d,y,x,w){return this._globalState&&(i=el(i,this._globalState)),this._styleExpression.evaluate(i,o,d,y,x,w)}interpolationFactor(i,o,d){return this.interpolationType?zn.interpolationFactor(this.interpolationType,i,o,d):0}}function eu(l,i,o){const d=tc(l,i,o);if(d.result==="error")return d;const y=d.value.expression,x=Kc(y);if(!x&&!zo(i))return Ys([new cn("","data expressions not supported")]);const w=Yc(y,["zoom"]);if(!w&&!jo(i))return Ys([new cn("","zoom expressions not supported")]);const C=rc(y);return C||w?C instanceof cn?Ys([C]):C instanceof zn&&!Jc(i)?Ys([new cn("",'"interpolate" expressions cannot be used with this property')]):ad(C?new Qs(x?"camera":"composite",d.value,C.labels,C instanceof zn?C.interpolation:void 0,o):new Js(x?"constant":"source",d.value,o)):Ys([new cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class po{constructor(i,o){this._parameters=i,this._specification=o,Kn(this,Ql(this._parameters,this._specification))}static deserialize(i){return new po(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function rc(l){let i=null;if(l instanceof $l)i=rc(l.result);else if(l instanceof Fc){for(const o of l.args)if(i=rc(o),i)break}else(l instanceof sn||l instanceof zn)&&l.input instanceof ca&&l.input.name==="zoom"&&(i=l);return i instanceof cn||l.eachChild((o=>{const d=rc(o);d instanceof cn?i=d:!i&&d?i=new cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&d&&i!==d&&(i=new cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}function tu(l,i=new Set){return l instanceof Do&&i.add(l.key),l.eachChild((o=>{tu(o,i)})),i}function el(l,i){const{zoom:o,heatmapDensity:d,elevation:y,lineProgress:x,isSupportedScript:w,accumulated:C}=l??{};return{zoom:o,heatmapDensity:d,elevation:y,lineProgress:x,isSupportedScript:w,accumulated:C,globalState:i}}function nc(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const i of l.slice(1))if(!nc(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const ic={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mo(l,i){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};nc(l)||(l=ac(l));const o=tc(l,ic,i);if(o.result==="error")throw new Error(o.value.map((d=>`${d.key}: ${d.message}`)).join(", "));return{filter:(d,y,x)=>o.value.evaluate(d,y,{},x),needGeometry:tl(l),getGlobalStateRefs:()=>tu(o.value.expression)}}function ru(l,i){return l<i?-1:l>i?1:0}function tl(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let i=1;i<l.length;i++)if(tl(l[i]))return!0;return!1}function ac(l){if(!l)return!0;const i=l[0];return l.length<=1?i!=="any":i==="=="?nu(l[1],l[2],"=="):i==="!="?eh(nu(l[1],l[2],"==")):i==="<"||i===">"||i==="<="||i===">="?nu(l[1],l[2],i):i==="any"?(o=l.slice(1),["any"].concat(o.map(ac))):i==="all"?["all"].concat(l.slice(1).map(ac)):i==="none"?["all"].concat(l.slice(1).map(ac).map(eh)):i==="in"?ff(l[1],l.slice(2)):i==="!in"?eh(ff(l[1],l.slice(2))):i==="has"?ld(l[1]):i!=="!has"||eh(ld(l[1]));var o}function nu(l,i,o){switch(l){case"$type":return[`filter-type-${o}`,i];case"$id":return[`filter-id-${o}`,i];default:return[`filter-${o}`,l,i]}}function ff(l,i){if(i.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some((o=>typeof o!=typeof i[0]))?["filter-in-large",l,["literal",i.sort(ru)]]:["filter-in-small",l,["literal",i]]}}function ld(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function eh(l){return["!",l]}function cd(l){const i=typeof l;if(i==="number"||i==="boolean"||i==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let y="[";for(const x of l)y+=`${cd(x)},`;return`${y}]`}const o=Object.keys(l).sort();let d="{";for(let y=0;y<o.length;y++)d+=`${JSON.stringify(o[y])}:${cd(l[o[y]])},`;return`${d}}`}function th(l){let i="";for(const o of sr)i+=`/${cd(l[o])}`;return i}function go(l){const i=l.value;return i?[new _t(l.key,i,"constants have been deprecated as of v8")]:[]}function hn(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Ea(l){if(Array.isArray(l))return l.map(Ea);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const i={};for(const o in l)i[o]=Ea(l[o]);return i}return hn(l)}function Tn(l){const i=l.key,o=l.value,d=l.valueSpec||{},y=l.objectElementValidators||{},x=l.style,w=l.styleSpec,C=l.validateSpec;let I=[];const z=Tr(o);if(z!=="object")return[new _t(i,o,`object expected, ${z} found`)];for(const N in o){const V=N.split(".")[0],Z=os(d,V)||d["*"];let Q;if(os(y,V))Q=y[V];else if(os(d,V))Q=C;else if(y["*"])Q=y["*"];else{if(!d["*"]){I.push(new _t(i,o[N],`unknown property "${N}"`));continue}Q=C}I=I.concat(Q({key:(i&&`${i}.`)+N,value:o[N],valueSpec:Z,style:x,styleSpec:w,object:o,objectKey:N,validateSpec:C},o))}for(const N in d)y[N]||d[N].required&&d[N].default===void 0&&o[N]===void 0&&I.push(new _t(i,o,`missing required property "${N}"`));return I}function _s(l){const i=l.value,o=l.valueSpec,d=l.style,y=l.styleSpec,x=l.key,w=l.arrayElementValidator||l.validateSpec;if(Tr(i)!=="array")return[new _t(x,i,`array expected, ${Tr(i)} found`)];if(o.length&&i.length!==o.length)return[new _t(x,i,`array length ${o.length} expected, length ${i.length} found`)];if(o["min-length"]&&i.length<o["min-length"])return[new _t(x,i,`array length at least ${o["min-length"]} expected, length ${i.length} found`)];let C={type:o.value,values:o.values};y.$version<7&&(C.function=o.function),Tr(o.value)==="object"&&(C=o.value);let I=[];for(let z=0;z<i.length;z++)I=I.concat(w({array:i,arrayIndex:z,value:i[z],valueSpec:C,validateSpec:l.validateSpec,style:d,styleSpec:y,key:`${x}[${z}]`}));return I}function Ma(l){const i=l.key,o=l.value,d=l.valueSpec;let y=Tr(o);return y==="number"&&o!=o&&(y="NaN"),y!=="number"?[new _t(i,o,`number expected, ${y} found`)]:"minimum"in d&&o<d.minimum?[new _t(i,o,`${o} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&o>d.maximum?[new _t(i,o,`${o} is greater than the maximum value ${d.maximum}`)]:[]}function iu(l){const i=l.valueSpec,o=hn(l.value.type);let d,y,x,w={};const C=o!=="categorical"&&l.value.property===void 0,I=!C,z=Tr(l.value.stops)==="array"&&Tr(l.value.stops[0])==="array"&&Tr(l.value.stops[0][0])==="object",N=Tn({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(Q){if(o==="identity")return[new _t(Q.key,Q.value,'identity function may not have a "stops" property')];let te=[];const le=Q.value;return te=te.concat(_s({key:Q.key,value:le,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:V})),Tr(le)==="array"&&le.length===0&&te.push(new _t(Q.key,le,"array must have at least one stop")),te},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:i,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return o==="identity"&&C&&N.push(new _t(l.key,l.value,'missing required property "property"')),o==="identity"||l.value.stops||N.push(new _t(l.key,l.value,'missing required property "stops"')),o==="exponential"&&l.valueSpec.expression&&!Jc(l.valueSpec)&&N.push(new _t(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(I&&!zo(l.valueSpec)?N.push(new _t(l.key,l.value,"property functions not supported")):C&&!jo(l.valueSpec)&&N.push(new _t(l.key,l.value,"zoom functions not supported"))),o!=="categorical"&&!z||l.value.property!==void 0||N.push(new _t(l.key,l.value,'"property" property is required')),N;function V(Q){let te=[];const le=Q.value,fe=Q.key;if(Tr(le)!=="array")return[new _t(fe,le,`array expected, ${Tr(le)} found`)];if(le.length!==2)return[new _t(fe,le,`array length 2 expected, length ${le.length} found`)];if(z){if(Tr(le[0])!=="object")return[new _t(fe,le,`object expected, ${Tr(le[0])} found`)];if(le[0].zoom===void 0)return[new _t(fe,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new _t(fe,le,"object stop key must have value")];if(x&&x>hn(le[0].zoom))return[new _t(fe,le[0].zoom,"stop zoom values must appear in ascending order")];hn(le[0].zoom)!==x&&(x=hn(le[0].zoom),y=void 0,w={}),te=te.concat(Tn({key:`${fe}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Ma,value:Z}}))}else te=te.concat(Z({key:`${fe}[0]`,value:le[0],validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},le));return vs(Ea(le[1]))?te.concat([new _t(`${fe}[1]`,le[1],"expressions are not allowed in function stops.")]):te.concat(Q.validateSpec({key:`${fe}[1]`,value:le[1],valueSpec:i,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function Z(Q,te){const le=Tr(Q.value),fe=hn(Q.value),_e=Q.value!==null?Q.value:te;if(d){if(le!==d)return[new _t(Q.key,_e,`${le} stop domain type must match previous stop domain type ${d}`)]}else d=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new _t(Q.key,_e,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&o!=="categorical"){let Ue=`number expected, ${le} found`;return zo(i)&&o===void 0&&(Ue+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _t(Q.key,_e,Ue)]}return o!=="categorical"||le!=="number"||isFinite(fe)&&Math.floor(fe)===fe?o!=="categorical"&&le==="number"&&y!==void 0&&fe<y?[new _t(Q.key,_e,"stop domain values must appear in ascending order")]:(y=fe,o==="categorical"&&fe in w?[new _t(Q.key,_e,"stop domain values must be unique")]:(w[fe]=!0,[])):[new _t(Q.key,_e,`integer expected, found ${fe}`)]}}function rl(l){const i=(l.expressionContext==="property"?eu:tc)(Ea(l.value),l.valueSpec);if(i.result==="error")return i.value.map((d=>new _t(`${l.key}${d.key}`,l.value,d.message)));const o=i.value.expression||i.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!o.outputDefined())return[new _t(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Jl(o))return[new _t(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Jl(o))return[new _t(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Yc(o,["zoom","feature-state"]))return[new _t(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Kc(o))return[new _t(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nl(l){const i=l.key,o=l.value,d=Tr(o);return d!=="string"?[new _t(i,o,`color expected, ${d} found`)]:_r.parse(String(o))?[]:[new _t(i,o,`color expected, "${o}" found`)]}function Xa(l){const i=l.key,o=l.value,d=l.valueSpec,y=[];return Array.isArray(d.values)?d.values.indexOf(hn(o))===-1&&y.push(new _t(i,o,`expected one of [${d.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(d.values).indexOf(hn(o))===-1&&y.push(new _t(i,o,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(o)} found`)),y}function il(l){return nc(Ea(l.value))?rl(Kn({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):al(l)}function al(l){const i=l.value,o=l.key;if(Tr(i)!=="array")return[new _t(o,i,`array expected, ${Tr(i)} found`)];const d=l.styleSpec;let y,x=[];if(i.length<1)return[new _t(o,i,"filter array must have at least 1 element")];switch(x=x.concat(Xa({key:`${o}[0]`,value:i[0],valueSpec:d.filter_operator,style:l.style,styleSpec:l.styleSpec})),hn(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&hn(i[1])==="$type"&&x.push(new _t(o,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&x.push(new _t(o,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(y=Tr(i[1]),y!=="string"&&x.push(new _t(`${o}[1]`,i[1],`string expected, ${y} found`)));for(let w=2;w<i.length;w++)y=Tr(i[w]),hn(i[1])==="$type"?x=x.concat(Xa({key:`${o}[${w}]`,value:i[w],valueSpec:d.geometry_type,style:l.style,styleSpec:l.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&x.push(new _t(`${o}[${w}]`,i[w],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let w=1;w<i.length;w++)x=x.concat(al({key:`${o}[${w}]`,value:i[w],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":y=Tr(i[1]),i.length!==2?x.push(new _t(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):y!=="string"&&x.push(new _t(`${o}[1]`,i[1],`string expected, ${y} found`))}return x}function au(l,i){const o=l.key,d=l.validateSpec,y=l.style,x=l.styleSpec,w=l.value,C=l.objectKey,I=x[`${i}_${l.layerType}`];if(!I)return[];const z=C.match(/^(.*)-transition$/);if(i==="paint"&&z&&I[z[1]]&&I[z[1]].transition)return d({key:o,value:w,valueSpec:x.transition,style:y,styleSpec:x});const N=l.valueSpec||I[C];if(!N)return[new _t(o,w,`unknown property "${C}"`)];let V;if(Tr(w)==="string"&&zo(N)&&!N.tokens&&(V=/^{([^}]+)}$/.exec(w)))return[new _t(o,w,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const Z=[];return l.layerType==="symbol"&&(C==="text-field"&&y&&!y.glyphs&&Z.push(new _t(o,w,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&Qc(Ea(w))&&hn(w.type)==="identity"&&Z.push(new _t(o,w,'"text-font" does not support identity functions'))),Z.concat(d({key:l.key,value:w,valueSpec:N,style:y,styleSpec:x,expressionContext:"property",propertyType:i,propertyKey:C}))}function rh(l){return au(l,"paint")}function ol(l){return au(l,"layout")}function ua(l){let i=[];const o=l.value,d=l.key,y=l.style,x=l.styleSpec;if(Tr(o)!=="object")return[new _t(d,o,`object expected, ${Tr(o)} found`)];o.type||o.ref||i.push(new _t(d,o,'either "type" or "ref" is required'));let w=hn(o.type);const C=hn(o.ref);if(o.id){const I=hn(o.id);for(let z=0;z<l.arrayIndex;z++){const N=y.layers[z];hn(N.id)===I&&i.push(new _t(d,o.id,`duplicate layer id "${o.id}", previously used at line ${N.id.__line__}`))}}if("ref"in o){let I;["type","source","source-layer","filter","layout"].forEach((z=>{z in o&&i.push(new _t(d,o[z],`"${z}" is prohibited for ref layers`))})),y.layers.forEach((z=>{hn(z.id)===C&&(I=z)})),I?I.ref?i.push(new _t(d,o.ref,"ref cannot reference another ref layer")):w=hn(I.type):i.push(new _t(d,o.ref,`ref layer "${C}" not found`))}else if(w!=="background")if(o.source){const I=y.sources&&y.sources[o.source],z=I&&hn(I.type);I?z==="vector"&&w==="raster"?i.push(new _t(d,o.source,`layer "${o.id}" requires a raster source`)):z!=="raster-dem"&&w==="hillshade"||z!=="raster-dem"&&w==="color-relief"?i.push(new _t(d,o.source,`layer "${o.id}" requires a raster-dem source`)):z==="raster"&&w!=="raster"?i.push(new _t(d,o.source,`layer "${o.id}" requires a vector source`)):z!=="vector"||o["source-layer"]?z==="raster-dem"&&w!=="hillshade"&&w!=="color-relief"?i.push(new _t(d,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):w!=="line"||!o.paint||!o.paint["line-gradient"]||z==="geojson"&&I.lineMetrics||i.push(new _t(d,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new _t(d,o,`layer "${o.id}" must specify a "source-layer"`)):i.push(new _t(d,o.source,`source "${o.source}" not found`))}else i.push(new _t(d,o,'missing required property "source"'));return i=i.concat(Tn({key:d,value:o,valueSpec:x.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${d}.type`,value:o.type,valueSpec:x.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:o,objectKey:"type"}),filter:il,layout:I=>Tn({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":z=>ol(Kn({layerType:w},z))}}),paint:I=>Tn({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":z=>rh(Kn({layerType:w},z))}})}})),i}function jr(l){const i=l.value,o=l.key,d=Tr(i);return d!=="string"?[new _t(o,i,`string expected, ${d} found`)]:[]}const Ir={promoteId:function({key:l,value:i}){if(Tr(i)==="string")return jr({key:l,value:i});{const o=[];for(const d in i)o.push(...jr({key:`${l}.${d}`,value:i[d]}));return o}}};function ha(l){const i=l.value,o=l.key,d=l.styleSpec,y=l.style,x=l.validateSpec;if(!i.type)return[new _t(o,i,'"type" is required')];const w=hn(i.type);let C;switch(w){case"vector":case"raster":return C=Tn({key:o,value:i,valueSpec:d[`source_${w.replace("-","_")}`],style:l.style,styleSpec:d,objectElementValidators:Ir,validateSpec:x}),C;case"raster-dem":return C=(function(I){var z;const N=(z=I.sourceName)!==null&&z!==void 0?z:"",V=I.value,Z=I.styleSpec,Q=Z.source_raster_dem,te=I.style;let le=[];const fe=Tr(V);if(V===void 0)return le;if(fe!=="object")return le.push(new _t("source_raster_dem",V,`object expected, ${fe} found`)),le;const _e=hn(V.encoding)==="custom",Ue=["redFactor","greenFactor","blueFactor","baseShift"],Pe=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const ke in V)!_e&&Ue.includes(ke)?le.push(new _t(ke,V[ke],`In "${N}": "${ke}" is only valid when "encoding" is set to "custom". ${Pe} encoding found`)):Q[ke]?le=le.concat(I.validateSpec({key:ke,value:V[ke],valueSpec:Q[ke],validateSpec:I.validateSpec,style:te,styleSpec:Z})):le.push(new _t(ke,V[ke],`unknown property "${ke}"`));return le})({sourceName:o,value:i,style:l.style,styleSpec:d,validateSpec:x}),C;case"geojson":if(C=Tn({key:o,value:i,valueSpec:d.source_geojson,style:y,styleSpec:d,validateSpec:x,objectElementValidators:Ir}),i.cluster)for(const I in i.clusterProperties){const[z,N]=i.clusterProperties[I],V=typeof z=="string"?[z,["accumulated"],["get",I]]:z;C.push(...rl({key:`${o}.${I}.map`,value:N,expressionContext:"cluster-map"})),C.push(...rl({key:`${o}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return C;case"video":return Tn({key:o,value:i,valueSpec:d.source_video,style:y,validateSpec:x,styleSpec:d});case"image":return Tn({key:o,value:i,valueSpec:d.source_image,style:y,validateSpec:x,styleSpec:d});case"canvas":return[new _t(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xa({key:`${o}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function oi(l){const i=l.value,o=l.styleSpec,d=o.light,y=l.style;let x=[];const w=Tr(i);if(i===void 0)return x;if(w!=="object")return x=x.concat([new _t("light",i,`object expected, ${w} found`)]),x;for(const C in i){const I=C.match(/^(.*)-transition$/);x=x.concat(I&&d[I[1]]&&d[I[1]].transition?l.validateSpec({key:C,value:i[C],valueSpec:o.transition,validateSpec:l.validateSpec,style:y,styleSpec:o}):d[C]?l.validateSpec({key:C,value:i[C],valueSpec:d[C],validateSpec:l.validateSpec,style:y,styleSpec:o}):[new _t(C,i[C],`unknown property "${C}"`)])}return x}function Ii(l){const i=l.value,o=l.styleSpec,d=o.sky,y=l.style,x=Tr(i);if(i===void 0)return[];if(x!=="object")return[new _t("sky",i,`object expected, ${x} found`)];let w=[];for(const C in i)w=w.concat(d[C]?l.validateSpec({key:C,value:i[C],valueSpec:d[C],style:y,styleSpec:o}):[new _t(C,i[C],`unknown property "${C}"`)]);return w}function xs(l){const i=l.value,o=l.styleSpec,d=o.terrain,y=l.style;let x=[];const w=Tr(i);if(i===void 0)return x;if(w!=="object")return x=x.concat([new _t("terrain",i,`object expected, ${w} found`)]),x;for(const C in i)x=x.concat(d[C]?l.validateSpec({key:C,value:i[C],valueSpec:d[C],validateSpec:l.validateSpec,style:y,styleSpec:o}):[new _t(C,i[C],`unknown property "${C}"`)]);return x}function Ka(l){let i=[];const o=l.value,d=l.key;if(Array.isArray(o)){const y=[],x=[];for(const w in o)o[w].id&&y.includes(o[w].id)&&i.push(new _t(d,o,`all the sprites' ids must be unique, but ${o[w].id} is duplicated`)),y.push(o[w].id),o[w].url&&x.includes(o[w].url)&&i.push(new _t(d,o,`all the sprites' URLs must be unique, but ${o[w].url} is duplicated`)),x.push(o[w].url),i=i.concat(Tn({key:`${d}[${w}]`,value:o[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return i}return jr({key:d,value:o})}function yi(l){return i=l.value,i&&i.constructor===Object?[]:[new _t(l.key,l.value,`object expected, ${Tr(l.value)} found`)];var i}const sl={"*":()=>[],array:_s,boolean:function(l){const i=l.value,o=l.key,d=Tr(i);return d!=="boolean"?[new _t(o,i,`boolean expected, ${d} found`)]:[]},number:Ma,color:nl,constants:go,enum:Xa,filter:il,function:iu,layer:ua,object:Tn,source:ha,light:oi,sky:Ii,terrain:xs,projection:function(l){const i=l.value,o=l.styleSpec,d=o.projection,y=l.style,x=Tr(i);if(i===void 0)return[];if(x!=="object")return[new _t("projection",i,`object expected, ${x} found`)];let w=[];for(const C in i)w=w.concat(d[C]?l.validateSpec({key:C,value:i[C],valueSpec:d[C],style:y,styleSpec:o}):[new _t(C,i[C],`unknown property "${C}"`)]);return w},projectionDefinition:function(l){const i=l.key;let o=l.value;o=o instanceof String?o.valueOf():o;const d=Tr(o);return d!=="array"||(function(y){return Array.isArray(y)&&y.length===3&&typeof y[0]=="string"&&typeof y[1]=="string"&&typeof y[2]=="number"})(o)||(function(y){return!!["interpolate","step","literal"].includes(y[0])})(o)?["array","string"].includes(d)?[]:[new _t(i,o,`projection expected, invalid type "${d}" found`)]:[new _t(i,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:jr,formatted:function(l){return jr(l).length===0?[]:rl(l)},resolvedImage:function(l){return jr(l).length===0?[]:rl(l)},padding:function(l){const i=l.key,o=l.value;if(Tr(o)==="array"){if(o.length<1||o.length>4)return[new _t(i,o,`padding requires 1 to 4 values; ${o.length} values found`)];const d={type:"number"};let y=[];for(let x=0;x<o.length;x++)y=y.concat(l.validateSpec({key:`${i}[${x}]`,value:o[x],validateSpec:l.validateSpec,valueSpec:d}));return y}return Ma({key:i,value:o,valueSpec:{}})},numberArray:function(l){const i=l.key,o=l.value;if(Tr(o)==="array"){const d={type:"number"};if(o.length<1)return[new _t(i,o,"array length at least 1 expected, length 0 found")];let y=[];for(let x=0;x<o.length;x++)y=y.concat(l.validateSpec({key:`${i}[${x}]`,value:o[x],validateSpec:l.validateSpec,valueSpec:d}));return y}return Ma({key:i,value:o,valueSpec:{}})},colorArray:function(l){const i=l.key,o=l.value;if(Tr(o)==="array"){if(o.length<1)return[new _t(i,o,"array length at least 1 expected, length 0 found")];let d=[];for(let y=0;y<o.length;y++)d=d.concat(nl({key:`${i}[${y}]`,value:o[y]}));return d}return nl({key:i,value:o})},variableAnchorOffsetCollection:function(l){const i=l.key,o=l.value,d=Tr(o),y=l.styleSpec;if(d!=="array"||o.length<1||o.length%2!=0)return[new _t(i,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<o.length;w+=2)x=x.concat(Xa({key:`${i}[${w}]`,value:o[w],valueSpec:y.layout_symbol["text-anchor"]})),x=x.concat(_s({key:`${i}[${w+1}]`,value:o[w+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:y}));return x},sprite:Ka,state:yi};function ou(l){const i=l.value,o=l.valueSpec,d=l.styleSpec;return l.validateSpec=ou,o.expression&&Qc(hn(i))?iu(l):o.expression&&vs(Ea(i))?rl(l):o.type&&sl[o.type]?sl[o.type](l):Tn(Kn({},l,{valueSpec:o.type?d[o.type]:o}))}function su(l){const i=l.value,o=l.key,d=jr(l);return d.length||(i.indexOf("{fontstack}")===-1&&d.push(new _t(o,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&d.push(new _t(o,i,'"glyphs" url must include a "{range}" token'))),d}function Oi(l,i=Be){let o=[];return o=o.concat(ou({key:"",value:l,valueSpec:i.$root,styleSpec:i,style:l,validateSpec:ou,objectElementValidators:{glyphs:su,"*":()=>[]}})),l.constants&&(o=o.concat(go({key:"constants",value:l.constants}))),yo(o)}function vi(l){return function(i){return l({...i,validateSpec:ou})}}function yo(l){return[].concat(l).sort(((i,o)=>i.line-o.line))}function Xi(l){return function(...i){return yo(l.apply(this,i))}}Oi.source=Xi(vi(ha)),Oi.sprite=Xi(vi(Ka)),Oi.glyphs=Xi(vi(su)),Oi.light=Xi(vi(oi)),Oi.sky=Xi(vi(Ii)),Oi.terrain=Xi(vi(xs)),Oi.state=Xi(vi(yi)),Oi.layer=Xi(vi(ua)),Oi.filter=Xi(vi(il)),Oi.paintProperty=Xi(vi(rh)),Oi.layoutProperty=Xi(vi(ol));const bs=Oi,oc=bs.light,sm=bs.sky,ws=bs.paintProperty,Lo=bs.layoutProperty;function ll(l,i){let o=!1;if(i&&i.length)for(const d of i)l.fire(new ct(new Error(d.message))),o=!0;return o}class vo{constructor(i,o,d){const y=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const w=new Int32Array(this.arrayBuffer);i=w[0],this.d=(o=w[1])+2*(d=w[2]);for(let I=0;I<this.d*this.d;I++){const z=w[3+I],N=w[3+I+1];y.push(z===N?null:w.subarray(z,N))}const C=w[3+y.length+1];this.keys=w.subarray(w[3+y.length],C),this.bboxes=w.subarray(C),this.insert=this._insertReadonly}else{this.d=o+2*d;for(let w=0;w<this.d*this.d;w++)y.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=i,this.padding=d,this.scale=o/i,this.uid=0;const x=d/o*i;this.min=-x,this.max=i+x}insert(i,o,d,y,x){this._forEachCell(o,d,y,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,o,d,y,x,w){this.cells[x].push(w)}query(i,o,d,y,x){const w=this.min,C=this.max;if(i<=w&&o<=w&&C<=d&&C<=y&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(i,o,d,y,this._queryCell,I,{},x),I}}_queryCell(i,o,d,y,x,w,C,I){const z=this.cells[x];if(z!==null){const N=this.keys,V=this.bboxes;for(let Z=0;Z<z.length;Z++){const Q=z[Z];if(C[Q]===void 0){const te=4*Q;(I?I(V[te+0],V[te+1],V[te+2],V[te+3]):i<=V[te+2]&&o<=V[te+3]&&d>=V[te+0]&&y>=V[te+1])?(C[Q]=!0,w.push(N[Q])):C[Q]=!1}}}}_forEachCell(i,o,d,y,x,w,C,I){const z=this._convertToCellCoord(i),N=this._convertToCellCoord(o),V=this._convertToCellCoord(d),Z=this._convertToCellCoord(y);for(let Q=z;Q<=V;Q++)for(let te=N;te<=Z;te++){const le=this.d*te+Q;if((!I||I(this._convertFromCellCoord(Q),this._convertFromCellCoord(te),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(te+1)))&&x.call(this,i,o,d,y,le,w,C,I))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,o=3+this.cells.length+1+1;let d=0;for(let w=0;w<this.cells.length;w++)d+=this.cells[w].length;const y=new Int32Array(o+d+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let x=o;for(let w=0;w<i.length;w++){const C=i[w];y[3+w]=x,y.set(C,x),x+=C.length}return y[3+i.length]=x,y.set(this.keys,x),x+=this.keys.length,y[3+i.length+1]=x,y.set(this.bboxes,x),x+=this.bboxes.length,y.buffer}static serialize(i,o){const d=i.toArrayBuffer();return o&&o.push(d),{buffer:d}}static deserialize(i){return new vo(i.buffer)}}const Ri={};function At(l,i,o={}){if(Ri[l])throw new Error(`${l} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:l,writeable:!1}),Ri[l]={klass:i,omit:o.omit||[],shallow:o.shallow||[]}}At("Object",Object),At("Set",Set),At("TransferableGridIndex",vo),At("Color",_r),At("Error",Error),At("AJAXError",Se),At("ResolvedImage",sa),At("StylePropertyFunction",po),At("StyleExpression",ec,{omit:["_evaluator"]}),At("ZoomDependentExpression",Qs),At("ZoomConstantExpression",Js),At("CompoundExpression",ca,{omit:["_evaluate"]});for(const l in ms)ms[l]._classRegistryKey||At(`Expression_${l}`,ms[l]);function Ki(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function _o(l){return l.$name||l.constructor._classRegistryKey}function Ya(l){return!(function(i){if(i===null||typeof i!="object")return!1;const o=_o(i);return!(!o||o==="Object")})(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Ki(l)||qn(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function Di(l,i){if(Ya(l))return(Ki(l)||qn(l))&&i&&i.push(l),ArrayBuffer.isView(l)&&i&&i.push(l.buffer),l instanceof ImageData&&i&&i.push(l.data.buffer),l;if(Array.isArray(l)){const x=[];for(const w of l)x.push(Di(w,i));return x}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const o=_o(l);if(!o)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Ri[o])throw new Error(`${o} is not registered.`);const{klass:d}=Ri[o],y=d.serialize?d.serialize(l,i):{};if(d.serialize){if(i&&y===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in l){if(!l.hasOwnProperty(x)||Ri[o].omit.indexOf(x)>=0)continue;const w=l[x];y[x]=Ri[o].shallow.indexOf(x)>=0?w:Di(w,i)}l instanceof Error&&(y.message=l.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(y.$name=o),y}function ka(l){if(Ya(l))return l;if(Array.isArray(l))return l.map(ka);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const i=_o(l)||"Object";if(!Ri[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:o}=Ri[i];if(!o)throw new Error(`can't deserialize unregistered class ${i}`);if(o.deserialize)return o.deserialize(l);const d=Object.create(o.prototype);for(const y of Object.keys(l)){if(y==="$name")continue;const x=l[y];d[y]=Ri[i].shallow.indexOf(y)>=0?x:ka(x)}return d}class nh{constructor(){this.first=!0}update(i,o){const d=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=o),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=d,!0))}}const Ar={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Hangul Syllables":l=>l>=44032&&l<=55215,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function lu(l){for(const i of l)if(ih(i.charCodeAt(0)))return!0;return!1}function Yi(l){for(const i of l)if(!Ia(i.charCodeAt(0)))return!1;return!0}function zi(l){const i=l.map((o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}})).filter((o=>o));return new RegExp(i.join("|"),"u")}const yn=zi(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ia(l){return!yn.test(String.fromCodePoint(l))}const ud=zi(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ih(l){return!(l!==746&&l!==747&&(l<4352||!(Ar["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Ar["CJK Compatibility"](l)||Ar["CJK Strokes"](l)||!(!Ar["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Ar["Enclosed CJK Letters and Months"](l)||Ar["Ideographic Description Characters"](l)||Ar.Kanbun(l)||Ar.Katakana(l)&&l!==12540||!(!Ar["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!Ar["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Ar["Vertical Forms"](l)||Ar["Yijing Hexagram Symbols"](l)||/\p{sc=Cans}/u.test(String.fromCodePoint(l))||/\p{sc=Hang}/u.test(String.fromCodePoint(l))||ud.test(String.fromCodePoint(l)))))}function cu(l){return!(ih(l)||(function(i){return!!(Ar["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Ar["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Ar["Letterlike Symbols"](i)||Ar["Number Forms"](i)||Ar["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Ar["Control Pictures"](i)&&i!==9251||Ar["Optical Character Recognition"](i)||Ar["Enclosed Alphanumerics"](i)||Ar["Geometric Shapes"](i)||Ar["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Ar["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Ar["CJK Symbols and Punctuation"](i)||Ar.Katakana(i)||Ar["Private Use Area"](i)||Ar["CJK Compatibility Forms"](i)||Ar["Small Form Variants"](i)||Ar["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)})(l))}const ah=zi(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function oh(l){return ah.test(String.fromCodePoint(l))}function uu(l,i){return!(!i&&oh(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Ar.Khmer(l))}function hu(l){for(const i of l)if(oh(i.charCodeAt(0)))return!0;return!1}const da=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(da.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,i){return s(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const o=l.pluginURL,d=new Promise((x=>{this.loadScriptResolve=x}));i(o);const y=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([d,y]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:o};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)}))}};class Gr{constructor(i,o){this.isSupportedScript=lm,this.zoom=i,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new nh,this.transition=o.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nh,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,o=i-Math.floor(i),d=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*o}}}function lm(l){return(function(i,o){for(const d of i)if(!uu(d.charCodeAt(0),o))return!1;return!0})(l,da.getRTLTextPluginStatus()==="loaded")}class Ss{constructor(i,o,d){this.property=i,this.value=o,this.expression=(function(y,x,w){if(Qc(y))return new po(y,x);if(vs(y)){const C=eu(y,x,w);if(C.result==="error")throw new Error(C.value.map((I=>`${I.key}: ${I.message}`)).join(", "));return C.value}{let C=y;return x.type==="color"&&typeof y=="string"?C=_r.parse(y):x.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?x.type!=="numberArray"||typeof y!="number"&&!Array.isArray(y)?x.type!=="colorArray"||typeof y!="string"&&!Array.isArray(y)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(y)?C=Jn.parse(y):x.type==="projectionDefinition"&&typeof y=="string"&&(C=hi.parse(y)):C=on.parse(y):C=Yn.parse(y):C=Pn.parse(y),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>C}}})(o===void 0?i.specification.default:o,i.specification,d)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,o,d){return this.property.possiblyEvaluate(this,i,o,d)}}class cl{constructor(i,o){this.property=i,this.value=new Ss(i,void 0,o)}transitioned(i,o){return new lh(this.property,this.value,o,tr({},i.transition,this.transition),i.now)}untransitioned(){return new lh(this.property,this.value,null,{},0)}}class sh{constructor(i,o){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._globalState=o}getValue(i){return pt(this._values[i].value.value)}setValue(i,o){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new cl(this._values[i].property,this._globalState)),this._values[i].value=new Ss(this._values[i].property,o===null?void 0:pt(o),this._globalState)}getTransition(i){return pt(this._values[i].transition)}setTransition(i,o){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new cl(this._values[i].property,this._globalState)),this._values[i].transition=pt(o)||void 0}serialize(){const i={};for(const o of Object.keys(this._values)){const d=this.getValue(o);d!==void 0&&(i[o]=d);const y=this.getTransition(o);y!==void 0&&(i[`${o}-transition`]=y)}return i}transitioned(i,o){const d=new ul(this._properties);for(const y of Object.keys(this._values))d._values[y]=this._values[y].transitioned(i,o._values[y]);return d}untransitioned(){const i=new ul(this._properties);for(const o of Object.keys(this._values))i._values[o]=this._values[o].untransitioned();return i}}class lh{constructor(i,o,d,y,x){this.property=i,this.value=o,this.begin=x+y.delay||0,this.end=this.begin+y.duration||0,i.specification.transition&&(y.delay||y.duration)&&(this.prior=d)}possiblyEvaluate(i,o,d){const y=i.now||0,x=this.value.possiblyEvaluate(i,o,d),w=this.prior;if(w){if(y>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(y<this.begin)return w.possiblyEvaluate(i,o,d);{const C=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(i,o,d),x,yt(C))}}return x}}class ul{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,o,d){const y=new hl(this._properties);for(const x of Object.keys(this._values))y._values[x]=this._values[x].possiblyEvaluate(i,o,d);return y}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class pf{constructor(i,o){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._globalState=o}hasValue(i){return this._values[i].value!==void 0}getValue(i){return pt(this._values[i].value)}setValue(i,o){this._values[i]=new Ss(this._values[i].property,o===null?void 0:pt(o),this._globalState)}serialize(){const i={};for(const o of Object.keys(this._values)){const d=this.getValue(o);d!==void 0&&(i[o]=d)}return i}possiblyEvaluate(i,o,d){const y=new hl(this._properties);for(const x of Object.keys(this._values))y._values[x]=this._values[x].possiblyEvaluate(i,o,d);return y}}class fa{constructor(i,o,d){this.property=i,this.value=o,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,o,d,y){return this.property.evaluate(this.value,this.parameters,i,o,d,y)}}class hl{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class jt{constructor(i){this.specification=i}possiblyEvaluate(i,o){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(o)}interpolate(i,o,d){const y=Ga[this.specification.type];return y?y(i,o,d):i}}class Vt{constructor(i,o){this.specification=i,this.overrides=o}possiblyEvaluate(i,o,d,y){return new fa(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(o,null,{},d,y)}:i.expression,o)}interpolate(i,o,d){if(i.value.kind!=="constant"||o.value.kind!=="constant")return i;if(i.value.value===void 0||o.value.value===void 0)return new fa(this,{kind:"constant",value:void 0},i.parameters);const y=Ga[this.specification.type];if(y){const x=y(i.value.value,o.value.value,d);return new fa(this,{kind:"constant",value:x},i.parameters)}return i}evaluate(i,o,d,y,x,w){return i.kind==="constant"?i.value:i.evaluate(o,d,y,x,w)}}class sc extends Vt{possiblyEvaluate(i,o,d,y){if(i.value===void 0)return new fa(this,{kind:"constant",value:void 0},o);if(i.expression.kind==="constant"){const x=i.expression.evaluate(o,null,{},d,y),w=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(w,w,w,o);return new fa(this,{kind:"constant",value:C},o)}if(i.expression.kind==="camera"){const x=this._calculate(i.expression.evaluate({zoom:o.zoom-1}),i.expression.evaluate({zoom:o.zoom}),i.expression.evaluate({zoom:o.zoom+1}),o);return new fa(this,{kind:"constant",value:x},o)}return new fa(this,i.expression,o)}evaluate(i,o,d,y,x,w){if(i.kind==="source"){const C=i.evaluate(o,d,y,x,w);return this._calculate(C,C,C,o)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(o.zoom)-1},d,y),i.evaluate({zoom:Math.floor(o.zoom)},d,y),i.evaluate({zoom:Math.floor(o.zoom)+1},d,y),o):i.value}_calculate(i,o,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:d,to:o}}interpolate(i){return i}}class du{constructor(i){this.specification=i}possiblyEvaluate(i,o,d,y){if(i.value!==void 0){if(i.expression.kind==="constant"){const x=i.expression.evaluate(o,null,{},d,y);return this._calculate(x,x,x,o)}return this._calculate(i.expression.evaluate(new Gr(Math.floor(o.zoom-1),o)),i.expression.evaluate(new Gr(Math.floor(o.zoom),o)),i.expression.evaluate(new Gr(Math.floor(o.zoom+1),o)),o)}}_calculate(i,o,d,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:d,to:o}}interpolate(i){return i}}class lc{constructor(i){this.specification=i}possiblyEvaluate(i,o,d,y){return!!i.expression.evaluate(o,null,{},d,y)}interpolate(){return!1}}class jn{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in i){const d=i[o];d.specification.overridable&&this.overridableProperties.push(o);const y=this.defaultPropertyValues[o]=new Ss(d,void 0,void 0),x=this.defaultTransitionablePropertyValues[o]=new cl(d,void 0);this.defaultTransitioningPropertyValues[o]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=y.possiblyEvaluate({})}}}At("DataDrivenProperty",Vt),At("DataConstantProperty",jt),At("CrossFadedDataDrivenProperty",sc),At("CrossFadedProperty",du),At("ColorRampProperty",lc);const pa="-transition";class di extends zt{constructor(i,o,d){if(super(),this.id=i.id,this.type=i.type,this._globalState=d,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=mo(i.filter,d)),o.layout&&(this._unevaluatedLayout=new pf(o.layout,d)),o.paint)){this._transitionablePaint=new sh(o.paint,d);for(const y in i.paint)this.setPaintProperty(y,i.paint[y],{validate:!1});for(const y in i.layout)this.setLayoutProperty(y,i.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hl(o.paint)}}setFilter(i){this.filter=i,this._featureFilter=mo(i,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){const i=new Set;if(this._unevaluatedLayout)for(const o in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[o];for(const y of d.getGlobalStateRefs())i.add(y)}for(const o of this._featureFilter.getGlobalStateRefs())i.add(o);return i}getPaintAffectingGlobalStateRefs(){var i;const o=new globalThis.Map;if(this._transitionablePaint)for(const d in this._transitionablePaint._values){const y=this._transitionablePaint._values[d].value;for(const x of y.getGlobalStateRefs()){const w=(i=o.get(x))!==null&&i!==void 0?i:[];w.push({name:d,value:y.value}),o.set(x,w)}}return o}setLayoutProperty(i,o,d={}){o!=null&&this._validate(Lo,`layers.${this.id}.layout.${i}`,i,o,d)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,o):this.visibility=o)}getPaintProperty(i){return i.endsWith(pa)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,o,d={}){if(o!=null&&this._validate(ws,`layers.${this.id}.paint.${i}`,i,o,d))return!1;if(i.endsWith(pa))return this._transitionablePaint.setTransition(i.slice(0,-11),o||void 0),!1;{const y=this._transitionablePaint._values[i],x=y.property.specification["property-type"]==="cross-faded-data-driven",w=y.value.isDataDriven(),C=y.value;this._transitionablePaint.setValue(i,o),this._handleSpecialPaintPropertyUpdate(i);const I=this._transitionablePaint._values[i].value;return I.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(i,C,I)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,o,d){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,o){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,o)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),ir(i,((o,d)=>!(o===void 0||d==="layout"&&!Object.keys(o).length||d==="paint"&&!Object.keys(o).length)))}_validate(i,o,d,y,x={}){return(!x||x.validate!==!1)&&ll(this,i.call(bs,{key:o,layerType:this.type,objectKey:d,value:y,styleSpec:Be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const o=this.paint.get(i);if(o instanceof fa&&zo(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const No={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class dl{constructor(i,o){this._structArray=i,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ur{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,o){return i._trim(),o&&(i.isTransferred=!0,o.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const o=Object.create(this.prototype);return o.arrayBuffer=i.arrayBuffer,o.length=i.length,o.capacity=i.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Jr(l,i=1){let o=0,d=0;return{members:l.map((y=>{const x=No[y.type].BYTES_PER_ELEMENT,w=o=cc(o,Math.max(i,x)),C=y.components||1;return d=Math.max(d,x),o+=x*C,{name:y.name,type:y.type,components:C,offset:w}})),size:cc(o,Math.max(d,i)),alignment:i}}function cc(l,i){return Math.ceil(l/i)*i}class uc extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o){const d=this.length;return this.resize(d+1),this.emplace(d,i,o)}emplace(i,o,d){const y=2*i;return this.int16[y+0]=o,this.int16[y+1]=d,i}}uc.prototype.bytesPerElement=4,At("StructArrayLayout2i4",uc);class ji extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,i,o,d)}emplace(i,o,d,y){const x=3*i;return this.int16[x+0]=o,this.int16[x+1]=d,this.int16[x+2]=y,i}}ji.prototype.bytesPerElement=6,At("StructArrayLayout3i6",ji);class Ji extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,d,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,o,d,y)}emplace(i,o,d,y,x){const w=4*i;return this.int16[w+0]=o,this.int16[w+1]=d,this.int16[w+2]=y,this.int16[w+3]=x,i}}Ji.prototype.bytesPerElement=8,At("StructArrayLayout4i8",Ji);class hc extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,o,d,y,x,w)}emplace(i,o,d,y,x,w,C){const I=6*i;return this.int16[I+0]=o,this.int16[I+1]=d,this.int16[I+2]=y,this.int16[I+3]=x,this.int16[I+4]=w,this.int16[I+5]=C,i}}hc.prototype.bytesPerElement=12,At("StructArrayLayout2i4i12",hc);class fu extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,o,d,y,x,w)}emplace(i,o,d,y,x,w,C){const I=4*i,z=8*i;return this.int16[I+0]=o,this.int16[I+1]=d,this.uint8[z+4]=y,this.uint8[z+5]=x,this.uint8[z+6]=w,this.uint8[z+7]=C,i}}fu.prototype.bytesPerElement=8,At("StructArrayLayout2i4ub8",fu);class Oa extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o){const d=this.length;return this.resize(d+1),this.emplace(d,i,o)}emplace(i,o,d){const y=2*i;return this.float32[y+0]=o,this.float32[y+1]=d,i}}Oa.prototype.bytesPerElement=8,At("StructArrayLayout2f8",Oa);class ch extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w,C,I,z,N){const V=this.length;return this.resize(V+1),this.emplace(V,i,o,d,y,x,w,C,I,z,N)}emplace(i,o,d,y,x,w,C,I,z,N,V){const Z=10*i;return this.uint16[Z+0]=o,this.uint16[Z+1]=d,this.uint16[Z+2]=y,this.uint16[Z+3]=x,this.uint16[Z+4]=w,this.uint16[Z+5]=C,this.uint16[Z+6]=I,this.uint16[Z+7]=z,this.uint16[Z+8]=N,this.uint16[Z+9]=V,i}}ch.prototype.bytesPerElement=20,At("StructArrayLayout10ui20",ch);class fl extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w,C,I,z,N,V,Z){const Q=this.length;return this.resize(Q+1),this.emplace(Q,i,o,d,y,x,w,C,I,z,N,V,Z)}emplace(i,o,d,y,x,w,C,I,z,N,V,Z,Q){const te=12*i;return this.int16[te+0]=o,this.int16[te+1]=d,this.int16[te+2]=y,this.int16[te+3]=x,this.uint16[te+4]=w,this.uint16[te+5]=C,this.uint16[te+6]=I,this.uint16[te+7]=z,this.int16[te+8]=N,this.int16[te+9]=V,this.int16[te+10]=Z,this.int16[te+11]=Q,i}}fl.prototype.bytesPerElement=24,At("StructArrayLayout4i4ui4i24",fl);class ma extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,i,o,d)}emplace(i,o,d,y){const x=3*i;return this.float32[x+0]=o,this.float32[x+1]=d,this.float32[x+2]=y,i}}ma.prototype.bytesPerElement=12,At("StructArrayLayout3f12",ma);class pl extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.uint32[1*i+0]=o,i}}pl.prototype.bytesPerElement=4,At("StructArrayLayout1ul4",pl);class _ extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w,C,I,z){const N=this.length;return this.resize(N+1),this.emplace(N,i,o,d,y,x,w,C,I,z)}emplace(i,o,d,y,x,w,C,I,z,N){const V=10*i,Z=5*i;return this.int16[V+0]=o,this.int16[V+1]=d,this.int16[V+2]=y,this.int16[V+3]=x,this.int16[V+4]=w,this.int16[V+5]=C,this.uint32[Z+3]=I,this.uint16[V+8]=z,this.uint16[V+9]=N,i}}_.prototype.bytesPerElement=20,At("StructArrayLayout6i1ul2ui20",_);class r extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,o,d,y,x,w)}emplace(i,o,d,y,x,w,C){const I=6*i;return this.int16[I+0]=o,this.int16[I+1]=d,this.int16[I+2]=y,this.int16[I+3]=x,this.int16[I+4]=w,this.int16[I+5]=C,i}}r.prototype.bytesPerElement=12,At("StructArrayLayout2i2i2i12",r);class c extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,o,d,y,x)}emplace(i,o,d,y,x,w){const C=4*i,I=8*i;return this.float32[C+0]=o,this.float32[C+1]=d,this.float32[C+2]=y,this.int16[I+6]=x,this.int16[I+7]=w,i}}c.prototype.bytesPerElement=16,At("StructArrayLayout2f1f2i16",c);class m extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,o,d,y,x,w)}emplace(i,o,d,y,x,w,C){const I=16*i,z=4*i,N=8*i;return this.uint8[I+0]=o,this.uint8[I+1]=d,this.float32[z+1]=y,this.float32[z+2]=x,this.int16[N+6]=w,this.int16[N+7]=C,i}}m.prototype.bytesPerElement=16,At("StructArrayLayout2ub2f2i16",m);class v extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,i,o,d)}emplace(i,o,d,y){const x=3*i;return this.uint16[x+0]=o,this.uint16[x+1]=d,this.uint16[x+2]=y,i}}v.prototype.bytesPerElement=6,At("StructArrayLayout3ui6",v);class b extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w,C,I,z,N,V,Z,Q,te,le,fe,_e){const Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,i,o,d,y,x,w,C,I,z,N,V,Z,Q,te,le,fe,_e)}emplace(i,o,d,y,x,w,C,I,z,N,V,Z,Q,te,le,fe,_e,Ue){const Pe=24*i,ke=12*i,Ke=48*i;return this.int16[Pe+0]=o,this.int16[Pe+1]=d,this.uint16[Pe+2]=y,this.uint16[Pe+3]=x,this.uint32[ke+2]=w,this.uint32[ke+3]=C,this.uint32[ke+4]=I,this.uint16[Pe+10]=z,this.uint16[Pe+11]=N,this.uint16[Pe+12]=V,this.float32[ke+7]=Z,this.float32[ke+8]=Q,this.uint8[Ke+36]=te,this.uint8[Ke+37]=le,this.uint8[Ke+38]=fe,this.uint32[ke+10]=_e,this.int16[Pe+22]=Ue,i}}b.prototype.bytesPerElement=48,At("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",b);class T extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,d,y,x,w,C,I,z,N,V,Z,Q,te,le,fe,_e,Ue,Pe,ke,Ke,rt,mt,It,St,Et,Gt,Ct){const Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,i,o,d,y,x,w,C,I,z,N,V,Z,Q,te,le,fe,_e,Ue,Pe,ke,Ke,rt,mt,It,St,Et,Gt,Ct)}emplace(i,o,d,y,x,w,C,I,z,N,V,Z,Q,te,le,fe,_e,Ue,Pe,ke,Ke,rt,mt,It,St,Et,Gt,Ct,Mt){const ht=32*i,or=16*i;return this.int16[ht+0]=o,this.int16[ht+1]=d,this.int16[ht+2]=y,this.int16[ht+3]=x,this.int16[ht+4]=w,this.int16[ht+5]=C,this.int16[ht+6]=I,this.int16[ht+7]=z,this.uint16[ht+8]=N,this.uint16[ht+9]=V,this.uint16[ht+10]=Z,this.uint16[ht+11]=Q,this.uint16[ht+12]=te,this.uint16[ht+13]=le,this.uint16[ht+14]=fe,this.uint16[ht+15]=_e,this.uint16[ht+16]=Ue,this.uint16[ht+17]=Pe,this.uint16[ht+18]=ke,this.uint16[ht+19]=Ke,this.uint16[ht+20]=rt,this.uint16[ht+21]=mt,this.uint16[ht+22]=It,this.uint32[or+12]=St,this.float32[or+13]=Et,this.float32[or+14]=Gt,this.uint16[ht+30]=Ct,this.uint16[ht+31]=Mt,i}}T.prototype.bytesPerElement=64,At("StructArrayLayout8i15ui1ul2f2ui64",T);class O extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.float32[1*i+0]=o,i}}O.prototype.bytesPerElement=4,At("StructArrayLayout1f4",O);class R extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,i,o,d)}emplace(i,o,d,y){const x=3*i;return this.uint16[6*i+0]=o,this.float32[x+1]=d,this.float32[x+2]=y,i}}R.prototype.bytesPerElement=12,At("StructArrayLayout1ui2f12",R);class L extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,d){const y=this.length;return this.resize(y+1),this.emplace(y,i,o,d)}emplace(i,o,d,y){const x=4*i;return this.uint32[2*i+0]=o,this.uint16[x+2]=d,this.uint16[x+3]=y,i}}L.prototype.bytesPerElement=8,At("StructArrayLayout1ul2ui8",L);class U extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o){const d=this.length;return this.resize(d+1),this.emplace(d,i,o)}emplace(i,o,d){const y=2*i;return this.uint16[y+0]=o,this.uint16[y+1]=d,i}}U.prototype.bytesPerElement=4,At("StructArrayLayout2ui4",U);class H extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.uint16[1*i+0]=o,i}}H.prototype.bytesPerElement=2,At("StructArrayLayout1ui2",H);class W extends Ur{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,d,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,o,d,y)}emplace(i,o,d,y,x){const w=4*i;return this.float32[w+0]=o,this.float32[w+1]=d,this.float32[w+2]=y,this.float32[w+3]=x,i}}W.prototype.bytesPerElement=16,At("StructArrayLayout4f16",W);class X extends dl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}X.prototype.size=20;class ne extends _{get(i){return new X(this,i)}}At("CollisionBoxArray",ne);class he extends dl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}he.prototype.size=48;class pe extends b{get(i){return new he(this,i)}}At("PlacedSymbolArray",pe);class me extends dl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}me.prototype.size=64;class ye extends T{get(i){return new me(this,i)}}At("SymbolInstanceArray",ye);class we extends O{getoffsetX(i){return this.float32[1*i+0]}}At("GlyphOffsetArray",we);class ve extends ji{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}At("SymbolLineVertexArray",ve);class Ae extends dl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ae.prototype.size=12;class Ie extends R{get(i){return new Ae(this,i)}}At("TextAnchorOffsetArray",Ie);class xe extends dl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}xe.prototype.size=8;class De extends L{get(i){return new xe(this,i)}}At("FeatureIndexArray",De);class Ze extends uc{}class Ge extends uc{}class He extends uc{}class et extends hc{}class Pt extends fu{}class wt extends Oa{}class dt extends ch{}class Lt extends fl{}class vr extends ma{}class Nr extends pl{}class dn extends r{}class Qr extends m{}class Vr extends v{}class fn extends U{}const Xr=Jr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zr}=Xr;class Rr{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,o,d,y){const x=this.segments[this.segments.length-1];return i>Rr.MAX_VERTEX_ARRAY_LENGTH&&rr(`Max vertices per segment is ${Rr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Rr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+i>Rr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==y?this.createNewSegment(o,d,y):x}createNewSegment(i,o,d){const y={vertexOffset:i.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(y.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(y),y}getOrCreateLatestSegment(i,o,d){return this.prepareSegment(0,i,o,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const o in i.vaos)i.vaos[o].destroy()}static simpleSegment(i,o,d,y){return new Rr([{vertexOffset:i,primitiveOffset:o,vertexLength:d,primitiveLength:y,vaos:{},sortKey:0}])}}function Ln(l,i){return 256*(l=Wt(Math.floor(l),0,255))+Wt(Math.floor(i),0,255)}Rr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,At("SegmentVector",Rr);const Nn=Jr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var _i,Bo,Fo,ga={exports:{}},Ps={exports:{}},dc={exports:{}},pu=(function(){if(Fo)return ga.exports;Fo=1;var l=(_i||(_i=1,Ps.exports=function(o,d){var y,x,w,C,I,z,N,V;for(x=o.length-(y=3&o.length),w=d,I=3432918353,z=461845907,V=0;V<x;)N=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,w=27492+(65535&(C=5*(65535&(w=(w^=N=(65535&(N=(N=(65535&N)*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*z+(((N>>>16)*z&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(N=0,y){case 3:N^=(255&o.charCodeAt(V+2))<<16;case 2:N^=(255&o.charCodeAt(V+1))<<8;case 1:w^=N=(65535&(N=(N=(65535&(N^=255&o.charCodeAt(V)))*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*z+(((N>>>16)*z&65535)<<16)&4294967295}return w^=o.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),Ps.exports),i=(Bo||(Bo=1,dc.exports=function(o,d){for(var y,x=o.length,w=d^x,C=0;x>=4;)y=1540483477*(65535&(y=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(y>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),x-=4,++C;switch(x){case 3:w^=(255&o.charCodeAt(C+2))<<16;case 2:w^=(255&o.charCodeAt(C+1))<<8;case 1:w=1540483477*(65535&(w^=255&o.charCodeAt(C)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),dc.exports);return ga.exports=l,ga.exports.murmur3=l,ga.exports.murmur2=i,ga.exports})(),Ts=A(pu);class xi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,o,d,y){this.ids.push($o(i)),this.positions.push(o,d,y)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=$o(i);let d=0,y=this.ids.length-1;for(;d<y;){const w=d+y>>1;this.ids[w]>=o?y=w:d=w+1}const x=[];for(;this.ids[d]===o;)x.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return x}static serialize(i,o){const d=new Float64Array(i.ids),y=new Uint32Array(i.positions);return Uo(d,y,0,d.length-1),o&&o.push(d.buffer,y.buffer),{ids:d,positions:y}}static deserialize(i){const o=new xi;return o.ids=i.ids,o.positions=i.positions,o.indexed=!0,o}}function $o(l){const i=+l;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Ts(String(l))}function Uo(l,i,o,d){for(;o<d;){const y=l[o+d>>1];let x=o-1,w=d+1;for(;;){do x++;while(l[x]<y);do w--;while(l[w]>y);if(x>=w)break;Vo(l,x,w),Vo(i,3*x,3*w),Vo(i,3*x+1,3*w+1),Vo(i,3*x+2,3*w+2)}w-o<d-w?(Uo(l,i,o,w),o=w+1):(Uo(l,i,w+1,d),d=w)}}function Vo(l,i,o){const d=l[i];l[i]=l[o],l[o]=d}At("FeaturePositionMap",xi);class rn{constructor(i,o){this.gl=i.gl,this.location=o}}class An extends rn{constructor(i,o){super(i,o),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class bi extends rn{constructor(i,o){super(i,o),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class ei extends rn{constructor(i,o){super(i,o),this.current=_r.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const cm=new Float32Array(16);function hd(l){return[Ln(255*l.r,255*l.g),Ln(255*l.b,255*l.a)]}class Li{constructor(i,o,d){this.value=i,this.uniformNames=o.map((y=>`u_${y}`)),this.type=d}setUniform(i,o,d){i.set(d.constantOr(this.value))}getBinding(i,o,d){return this.type==="color"?new ei(i,o):new An(i,o)}}class As{constructor(i,o){this.uniformNames=o.map((d=>`u_${d}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=i.tlbr}setUniform(i,o,d,y){const x=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&i.set(x)}getBinding(i,o,d){return d.substr(0,9)==="u_pattern"?new bi(i,o):new An(i,o)}}class Ra{constructor(i,o,d,y){this.expression=i,this.type=d,this.maxValue=0,this.paintVertexAttributes=o.map((x=>({name:`a_${x}`,type:"Float32",components:d==="color"?2:1,offset:0}))),this.paintVertexArray=new y}populatePaintArray(i,o,d){const y=this.paintVertexArray.length,x=this.expression.evaluate(new Gr(0,d),o,{},d.canonical,[],d.formattedSection);this.paintVertexArray.resize(i),this._setPaintValue(y,i,x)}updatePaintArray(i,o,d,y,x){const w=this.expression.evaluate(new Gr(0,x),d,y);this._setPaintValue(i,o,w)}_setPaintValue(i,o,d){if(this.type==="color"){const y=hd(d);for(let x=i;x<o;x++)this.paintVertexArray.emplace(x,y[0],y[1])}else{for(let y=i;y<o;y++)this.paintVertexArray.emplace(y,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Da{constructor(i,o,d,y,x,w){this.expression=i,this.uniformNames=o.map((C=>`u_${C}_t`)),this.type=d,this.useIntegerZoom=y,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=o.map((C=>({name:`a_${C}`,type:"Float32",components:d==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(i,o,d){const y=this.expression.evaluate(new Gr(this.zoom,d),o,{},d.canonical,[],d.formattedSection),x=this.expression.evaluate(new Gr(this.zoom+1,d),o,{},d.canonical,[],d.formattedSection),w=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(w,i,y,x)}updatePaintArray(i,o,d,y,x){const w=this.expression.evaluate(new Gr(this.zoom,x),d,y),C=this.expression.evaluate(new Gr(this.zoom+1,x),d,y);this._setPaintValue(i,o,w,C)}_setPaintValue(i,o,d,y){if(this.type==="color"){const x=hd(d),w=hd(y);for(let C=i;C<o;C++)this.paintVertexArray.emplace(C,x[0],x[1],w[0],w[1])}else{for(let x=i;x<o;x++)this.paintVertexArray.emplace(x,d,y);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(y))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,o){const d=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,y=Wt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);i.set(y)}getBinding(i,o,d){return new An(i,o)}}class Ni{constructor(i,o,d,y,x,w){this.expression=i,this.type=o,this.useIntegerZoom=d,this.zoom=y,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(i,o,d){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(y,i,o.patterns&&o.patterns[this.layerId],d.imagePositions)}updatePaintArray(i,o,d,y,x){this._setPaintValues(i,o,d.patterns&&d.patterns[this.layerId],x.imagePositions)}_setPaintValues(i,o,d,y){if(!y||!d)return;const{min:x,mid:w,max:C}=d,I=y[x],z=y[w],N=y[C];if(I&&z&&N)for(let V=i;V<o;V++)this.zoomInPaintVertexArray.emplace(V,z.tl[0],z.tl[1],z.br[0],z.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],z.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,z.tl[0],z.tl[1],z.br[0],z.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],z.pixelRatio,N.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,Nn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,Nn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class uh{constructor(i,o,d){this.binders={},this._buffers=[];const y=[];for(const x in i.paint._values){if(!d(x))continue;const w=i.paint.get(x);if(!(w instanceof fa&&zo(w.property.specification)))continue;const C=ml(x,i.type),I=w.value,z=w.property.specification.type,N=w.property.useIntegerZoom,V=w.property.specification["property-type"],Z=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=Z?new As(I.value,C):new Li(I.value,C,z),y.push(`/u_${x}`);else if(I.kind==="source"||Z){const Q=fc(x,z,"source");this.binders[x]=Z?new Ni(I,z,N,o,Q,i.id):new Ra(I,C,z,Q),y.push(`/a_${x}`)}else{const Q=fc(x,z,"composite");this.binders[x]=new Da(I,C,z,N,o,Q),y.push(`/z_${x}`)}}this.cacheKey=y.sort().join("")}getMaxValue(i){const o=this.binders[i];return o instanceof Ra||o instanceof Da?o.maxValue:0}populatePaintArrays(i,o,d){for(const y in this.binders){const x=this.binders[y];(x instanceof Ra||x instanceof Da||x instanceof Ni)&&x.populatePaintArray(i,o,d)}}setConstantPatternPositions(i,o){for(const d in this.binders){const y=this.binders[d];y instanceof As&&y.setConstantPatternPositions(i,o)}}updatePaintArrays(i,o,d,y,x){let w=!1;for(const C in i){const I=o.getPositions(C);for(const z of I){const N=d.feature(z.index);for(const V in this.binders){const Z=this.binders[V];if((Z instanceof Ra||Z instanceof Da||Z instanceof Ni)&&Z.expression.isStateDependent===!0){const Q=y.paint.get(V);Z.expression=Q.value,Z.updatePaintArray(z.start,z.end,N,i[C],x),w=!0}}}}return w}defines(){const i=[];for(const o in this.binders){const d=this.binders[o];(d instanceof Li||d instanceof As)&&i.push(...d.uniformNames.map((y=>`#define HAS_UNIFORM_${y}`)))}return i}getBinderAttributes(){const i=[];for(const o in this.binders){const d=this.binders[o];if(d instanceof Ra||d instanceof Da)for(let y=0;y<d.paintVertexAttributes.length;y++)i.push(d.paintVertexAttributes[y].name);else if(d instanceof Ni)for(let y=0;y<Nn.members.length;y++)i.push(Nn.members[y].name)}return i}getBinderUniforms(){const i=[];for(const o in this.binders){const d=this.binders[o];if(d instanceof Li||d instanceof As||d instanceof Da)for(const y of d.uniformNames)i.push(y)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,o){const d=[];for(const y in this.binders){const x=this.binders[y];if(x instanceof Li||x instanceof As||x instanceof Da){for(const w of x.uniformNames)if(o[w]){const C=x.getBinding(i,o[w],w);d.push({name:w,property:y,binding:C})}}}return d}setUniforms(i,o,d,y){for(const{name:x,property:w,binding:C}of o)this.binders[w].setUniform(C,y,d.get(w),x)}updatePaintBuffers(i){this._buffers=[];for(const o in this.binders){const d=this.binders[o];if(i&&d instanceof Ni){const y=i.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(d instanceof Ra||d instanceof Da)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(i){for(const o in this.binders){const d=this.binders[o];(d instanceof Ra||d instanceof Da||d instanceof Ni)&&d.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const o=this.binders[i];(o instanceof Ra||o instanceof Da||o instanceof Ni)&&o.destroy()}}}class xo{constructor(i,o,d=()=>!0){this.programConfigurations={};for(const y of i)this.programConfigurations[y.id]=new uh(y,o,d);this.needsUpload=!1,this._featureMap=new xi,this._bufferOffset=0}populatePaintArrays(i,o,d,y){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(i,o,y);o.id!==void 0&&this._featureMap.add(o.id,d,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,o,d,y){for(const x of d)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(i,this._featureMap,o,x,y)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function ml(l,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${i}-`,"").replace(/-/g,"_")]}function fc(l,i,o){const d={color:{source:Oa,composite:W},number:{source:O,composite:Oa}},y=(function(x){return{"line-pattern":{source:dt,composite:dt},"fill-pattern":{source:dt,composite:dt},"fill-extrusion-pattern":{source:dt,composite:dt}}[x]})(l);return y&&y[o]||d[i][o]}At("ConstantBinder",Li),At("CrossFadedConstantBinder",As),At("SourceExpressionBinder",Ra),At("CrossFadedCompositeBinder",Ni),At("CompositeExpressionBinder",Da),At("ProgramConfiguration",uh,{omit:["_buffers"]}),At("ProgramConfigurationSet",xo);const pc=Math.pow(2,14)-1,hh=-pc-1;function mc(l){const i=tt/l.extent,o=l.loadGeometry();for(let d=0;d<o.length;d++){const y=o[d];for(let x=0;x<y.length;x++){const w=y[x],C=Math.round(w.x*i),I=Math.round(w.y*i);w.x=Wt(C,hh,pc),w.y=Wt(I,hh,pc),(C<w.x||C>w.x+1||I<w.y||I>w.y+1)&&rr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function gc(l,i){return{type:l.type,id:l.id,properties:l.properties,geometry:i?mc(l):[]}}const um=-32768;function ey(l,i,o,d,y){l.emplaceBack(um+8*i+d,um+8*o+y)}class mf{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Ge,this.indexArray=new Vr,this.segments=new Rr,this.programConfigurations=new xo(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(i,o,d){const y=this.layers[0],x=[];let w=null,C=!1,I=y.type==="heatmap";if(y.type==="circle"){const N=y;w=N.layout.get("circle-sort-key"),C=!w.isConstant(),I=I||N.paint.get("circle-pitch-alignment")==="map"}const z=I?o.subdivisionGranularity.circle:1;for(const{feature:N,id:V,index:Z,sourceLayerIndex:Q}of i){const te=this.layers[0]._featureFilter.needGeometry,le=gc(N,te);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),le,d))continue;const fe=C?w.evaluate(le,{},d):void 0,_e={id:V,properties:N.properties,type:N.type,sourceLayerIndex:Q,index:Z,geometry:te?le.geometry:mc(N),patterns:{},sortKey:fe};x.push(_e)}C&&x.sort(((N,V)=>N.sortKey-V.sortKey));for(const N of x){const{geometry:V,index:Z,sourceLayerIndex:Q}=N,te=i[Z].feature;this.addFeature(N,V,Z,d,z),o.featureIndex.insert(te,V,Z,Q,this.index)}}update(i,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Zr),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,o,d,y,x=1){let w;switch(x){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const C=w.length;for(const I of o)for(const z of I){const N=z.x,V=z.y;if(N<0||N>=tt||V<0||V>=tt)continue;const Z=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,i.sortKey),Q=Z.vertexLength;for(let te=0;te<C;te++)for(let le=0;le<C;le++)ey(this.layoutVertexArray,N,V,w[le],w[te]);for(let te=0;te<C-1;te++)for(let le=0;le<C-1;le++){const fe=Q+te*C+le,_e=Q+(te+1)*C+le;this.indexArray.emplaceBack(fe,_e+1,fe+1),this.indexArray.emplaceBack(fe,_e,_e+1)}Z.vertexLength+=C*C,Z.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{imagePositions:{},canonical:y})}}function ty(l,i){for(let o=0;o<l.length;o++)if(mu(i,l[o]))return!0;for(let o=0;o<i.length;o++)if(mu(l,i[o]))return!0;return!!gf(l,i)}function Bi(l,i,o){return!!mu(l,i)||!!yf(i,l,o)}function Qi(l,i){if(l.length===1)return vf(i,l[0]);for(let o=0;o<i.length;o++){const d=i[o];for(let y=0;y<d.length;y++)if(mu(l,d[y]))return!0}for(let o=0;o<l.length;o++)if(vf(i,l[o]))return!0;for(let o=0;o<i.length;o++)if(gf(l,i[o]))return!0;return!1}function ry(l,i,o){if(l.length>1){if(gf(l,i))return!0;for(let d=0;d<i.length;d++)if(yf(i[d],l,o))return!0}for(let d=0;d<l.length;d++)if(yf(l[d],i,o))return!0;return!1}function gf(l,i){if(l.length===0||i.length===0)return!1;for(let o=0;o<l.length-1;o++){const d=l[o],y=l[o+1];for(let x=0;x<i.length-1;x++)if(ny(d,y,i[x],i[x+1]))return!0}return!1}function ny(l,i,o,d){return qr(l,o,d)!==qr(i,o,d)&&qr(l,i,o)!==qr(l,i,d)}function yf(l,i,o){const d=o*o;if(i.length===1)return l.distSqr(i[0])<d;for(let y=1;y<i.length;y++)if(hm(l,i[y-1],i[y])<d)return!0;return!1}function hm(l,i,o){const d=i.distSqr(o);if(d===0)return l.distSqr(i);const y=((l.x-i.x)*(o.x-i.x)+(l.y-i.y)*(o.y-i.y))/d;return l.distSqr(y<0?i:y>1?o:o.sub(i)._mult(y)._add(i))}function vf(l,i){let o,d,y,x=!1;for(let w=0;w<l.length;w++){o=l[w];for(let C=0,I=o.length-1;C<o.length;I=C++)d=o[C],y=o[I],d.y>i.y!=y.y>i.y&&i.x<(y.x-d.x)*(i.y-d.y)/(y.y-d.y)+d.x&&(x=!x)}return x}function mu(l,i){let o=!1;for(let d=0,y=l.length-1;d<l.length;y=d++){const x=l[d],w=l[y];x.y>i.y!=w.y>i.y&&i.x<(w.x-x.x)*(i.y-x.y)/(w.y-x.y)+x.x&&(o=!o)}return o}function dm(l,i,o){const d=o[0],y=o[2];if(l.x<d.x&&i.x<d.x||l.x>y.x&&i.x>y.x||l.y<d.y&&i.y<d.y||l.y>y.y&&i.y>y.y)return!1;const x=qr(l,i,o[0]);return x!==qr(l,i,o[1])||x!==qr(l,i,o[2])||x!==qr(l,i,o[3])}function gu(l,i,o){const d=i.paint.get(l).value;return d.kind==="constant"?d.value:o.programConfigurations.get(i.id).getMaxValue(l)}function dd(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function dh(l,i,o,d,y){if(!i[0]&&!i[1])return l;const x=P.convert(i)._mult(y);o==="viewport"&&x._rotate(-d);const w=[];for(let C=0;C<l.length;C++)w.push(l[C].sub(x));return w}function fm({queryGeometry:l,size:i},o){return Bi(l,o,i)}function iy({queryGeometry:l,size:i,transform:o,unwrappedTileID:d,getElevation:y},x){return Bi(l,x,i*(o.projectTileCoordinates(x.x,x.y,d,y).signedDistanceFromCamera/o.cameraToCenterDistance))}function pm({queryGeometry:l,size:i,transform:o,unwrappedTileID:d,getElevation:y},x){const w=o.projectTileCoordinates(x.x,x.y,d,y).signedDistanceFromCamera,C=i*(o.cameraToCenterDistance/w);return Bi(l,xf(x,o,d,y),C)}function _f({queryGeometry:l,size:i,transform:o,unwrappedTileID:d,getElevation:y},x){return Bi(l,xf(x,o,d,y),i)}function ay({queryGeometry:l,size:i,transform:o,unwrappedTileID:d,getElevation:y,pitchAlignment:x="map",pitchScale:w="map"},C){const I=x==="map"?w==="map"?fm:iy:w==="map"?pm:_f,z={queryGeometry:l,size:i,transform:o,unwrappedTileID:d,getElevation:y};for(const N of C)for(const V of N)if(I(z,V))return!0;return!1}function xf(l,i,o,d){const y=i.projectTileCoordinates(l.x,l.y,o,d).point;return new P((.5*y.x+.5)*i.width,(.5*-y.y+.5)*i.height)}let bf,mm;At("CircleBucket",mf,{omit:["layers"]});var wf={get paint(){return mm=mm||new jn({"circle-radius":new Vt(Be.paint_circle["circle-radius"]),"circle-color":new Vt(Be.paint_circle["circle-color"]),"circle-blur":new Vt(Be.paint_circle["circle-blur"]),"circle-opacity":new Vt(Be.paint_circle["circle-opacity"]),"circle-translate":new jt(Be.paint_circle["circle-translate"]),"circle-translate-anchor":new jt(Be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt(Be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt(Be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vt(Be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vt(Be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vt(Be.paint_circle["circle-stroke-opacity"])})},get layout(){return bf=bf||new jn({"circle-sort-key":new Vt(Be.layout_circle["circle-sort-key"])})}};class gl extends di{constructor(i,o){super(i,wf,o)}createBucket(i){return new mf(i)}queryRadius(i){const o=i;return gu("circle-radius",this,o)+gu("circle-stroke-width",this,o)+dd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:o,featureState:d,geometry:y,transform:x,pixelsToTileUnits:w,unwrappedTileID:C,getElevation:I}){const z=dh(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,w),N=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d),V=this.paint.get("circle-pitch-scale"),Z=this.paint.get("circle-pitch-alignment");let Q,te;return Z==="map"?(Q=z,te=N*w):(Q=(function(le,fe,_e,Ue){return le.map((Pe=>xf(Pe,fe,_e,Ue)))})(z,x,C,I),te=N),ay({queryGeometry:Q,size:te,transform:x,unwrappedTileID:C,getElevation:I,pitchAlignment:Z,pitchScale:V},y)}}class oy extends mf{}let gm;At("HeatmapBucket",oy,{omit:["layers"]});var ym={get paint(){return gm=gm||new jn({"heatmap-radius":new Vt(Be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vt(Be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt(Be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lc(Be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt(Be.paint_heatmap["heatmap-opacity"])})}};function Sf(l,{width:i,height:o},d,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==i*o*d)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${i*o*d}`)}else y=new Uint8Array(i*o*d);return l.width=i,l.height=o,l.data=y,l}function vm(l,{width:i,height:o},d){if(i===l.width&&o===l.height)return;const y=Sf({},{width:i,height:o},d);yu(l,y,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,i),height:Math.min(l.height,o)},d),l.width=i,l.height=o,l.data=y.data}function yu(l,i,o,d,y,x){if(y.width===0||y.height===0)return i;if(y.width>l.width||y.height>l.height||o.x>l.width-y.width||o.y>l.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>i.width||y.height>i.height||d.x>i.width-y.width||d.y>i.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const w=l.data,C=i.data;if(w===C)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<y.height;I++){const z=((o.y+I)*l.width+o.x)*x,N=((d.y+I)*i.width+d.x)*x;for(let V=0;V<y.width*x;V++)C[N+V]=w[z+V]}return i}class si{constructor(i,o){Sf(this,i,1,o)}resize(i){vm(this,i,1)}clone(){return new si({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,o,d,y,x){yu(i,o,d,y,x,1)}}class ya{constructor(i,o){Sf(this,i,4,o)}resize(i){vm(this,i,4)}replace(i,o){o?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new ya({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,o,d,y,x){yu(i,o,d,y,x,4)}setPixel(i,o,d){const y=4*(i*this.width+o);this.data[y+0]=Math.round(255*d.r/d.a),this.data[y+1]=Math.round(255*d.g/d.a),this.data[y+2]=Math.round(255*d.b/d.a),this.data[y+3]=Math.round(255*d.a)}}function sy(l){const i={},o=l.resolution||256,d=l.clips?l.clips.length:1,y=l.image||new ya({width:o,height:d});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const x=(w,C,I)=>{i[l.evaluationKey]=I;const z=l.expression.evaluate(i);y.setPixel(w/4/o,C/4,z)};if(l.clips)for(let w=0,C=0;w<d;++w,C+=4*o)for(let I=0,z=0;I<o;I++,z+=4){const N=I/(o-1),{start:V,end:Z}=l.clips[w];x(C,z,V*(1-N)+Z*N)}else for(let w=0,C=0;w<o;w++,C+=4)x(0,C,w/(o-1));return y}At("AlphaImage",si),At("RGBAImage",ya);const fh="big-fb";class ea extends di{createBucket(i){return new oy(i)}constructor(i,o){super(i,ym,o),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=sy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(fh)&&this.heatmapFbos.delete(fh)}queryRadius(i){return gu("heatmap-radius",this,i)}queryIntersectsFeature({queryGeometry:i,feature:o,featureState:d,geometry:y,transform:x,pixelsToTileUnits:w,unwrappedTileID:C,getElevation:I}){return ay({queryGeometry:i,size:this.paint.get("heatmap-radius").evaluate(o,d)*w,transform:x,unwrappedTileID:C,getElevation:I},y)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ly;var qt={get paint(){return ly=ly||new jn({"hillshade-illumination-direction":new jt(Be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new jt(Be.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new jt(Be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt(Be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt(Be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt(Be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt(Be.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new jt(Be.paint_hillshade["hillshade-method"])})}};class ph extends di{constructor(i,o){super(i,qt,o),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,y=this.paint.get("hillshade-shadow-color").values;const x=Math.max(i.length,o.length,d.length,y.length);i=i.concat(Array(x-i.length).fill(i.at(-1))),o=o.concat(Array(x-o.length).fill(o.at(-1))),d=d.concat(Array(x-d.length).fill(d.at(-1))),y=y.concat(Array(x-y.length).fill(y.at(-1)));const w=o.map(Fa);return{directionRadians:i.map(Fa),altitudeRadians:w,shadowColor:y,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Pf;var cy={get paint(){return Pf=Pf||new jn({"color-relief-opacity":new jt(Be["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new lc(Be["paint_color-relief"]["color-relief-color"])})}};class _m{constructor(i,o,d,y){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(o,y)}update(i,o,d){const{width:y,height:x}=i,w=!(this.size&&this.size[0]===y&&this.size[1]===x||d),{context:C}=this,{gl:I}=C;if(this.useMipmap=!!(o&&o.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!o||o.premultiply!==!1)),w)this.size=[y,x],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||qn(i)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,i):I.texImage2D(I.TEXTURE_2D,0,this.format,y,x,0,this.format,I.UNSIGNED_BYTE,i.data);else{const{x:z,y:N}=d||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||qn(i)?I.texSubImage2D(I.TEXTURE_2D,0,z,N,I.RGBA,I.UNSIGNED_BYTE,i):I.texSubImage2D(I.TEXTURE_2D,0,z,N,y,x,I.RGBA,I.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,o,d){const{context:y}=this,{gl:x}=y;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||i),this.filter=i),o!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class mh{constructor(i,o,d,y=1,x=1,w=1,C=0){if(this.uid=i,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void rr(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const I=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=x,this.blueFactor=w,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<I;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(I,z)]=this.data[this._idx(I-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,I)]=this.data[this._idx(z,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<I;z++)for(let N=0;N<I;N++){const V=this.get(z,N);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(i,o){const d=new Uint8Array(this.data.buffer),y=4*this._idx(i,o);return this.unpack(d[y],d[y+1],d[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,o){if(i<-1||i>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(i+1)}unpack(i,o,d){return i*this.redFactor+o*this.greenFactor+d*this.blueFactor-this.baseShift}pack(i){return fd(i,this.getUnpackVector())}getPixels(){return new ya({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,o,d){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let y=o*this.dim,x=o*this.dim+this.dim,w=d*this.dim,C=d*this.dim+this.dim;switch(o){case-1:y=x-1;break;case 1:x=y+1}switch(d){case-1:w=C-1;break;case 1:C=w+1}const I=-o*this.dim,z=-d*this.dim;for(let N=w;N<C;N++)for(let V=y;V<x;V++)this.data[this._idx(V,N)]=i.data[this._idx(V+I,N+z)]}}function fd(l,i){const o=i[0],d=i[1],y=i[2],x=i[3],w=Math.min(o,d,y),C=Math.round((l+x)/w);return{r:Math.floor(C*w/o)%256,g:Math.floor(C*w/d)%256,b:Math.floor(C*w/y)%256}}At("DEMData",mh);class xm extends di{constructor(i,o){super(i,cy,o)}_createColorRamp(i){const o={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof Js&&d._styleExpression.expression instanceof zn){this.colorRampExpression=d;const w=d._styleExpression.expression;o.elevationStops=w.labels,o.colorStops=[];for(const C of o.elevationStops)o.colorStops.push(w.evaluate({globals:{elevation:C}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[_r.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=i)return o;const y={elevationStops:[],colorStops:[]},x=(o.elevationStops.length-1)/(i-1);for(let w=0;w<o.elevationStops.length-.5;w+=x)y.elevationStops.push(o.elevationStops[Math.round(w)]),y.colorStops.push(o.colorStops[Math.round(w)]);return rr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),y}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,o,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const y=this._createColorRamp(o),x=new ya({width:y.colorStops.length,height:1}),w=new ya({width:y.colorStops.length,height:1});for(let C=0;C<y.elevationStops.length;C++){const I=fd(y.elevationStops[C],d);w.setPixel(0,C,new _r(I.r/255,I.g/255,I.b/255,1)),x.setPixel(0,C,y.colorStops[C])}return this.colorRampTextures={elevationTexture:new _m(i,w,i.gl.RGBA),colorTexture:new _m(i,x,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const uy=Jr([{name:"a_pos",components:2,type:"Int16"}],4),{members:hy}=uy;function Tf(l,i,o){const d=o.patternDependencies;let y=!1;for(const x of i){const w=x.paint.get(`${l}-pattern`);w.isConstant()||(y=!0);const C=w.constantOr(null);C&&(y=!0,d[C.to]=!0,d[C.from]=!0)}return y}function pd(l,i,o,d,y){const{zoom:x}=d,w=y.patternDependencies;for(const C of i){const I=C.paint.get(`${l}-pattern`).value;if(I.kind!=="constant"){let z=I.evaluate({zoom:x-1},o,{},y.availableImages),N=I.evaluate({zoom:x},o,{},y.availableImages),V=I.evaluate({zoom:x+1},o,{},y.availableImages);z=z&&z.name?z.name:z,N=N&&N.name?N.name:N,V=V&&V.name?V.name:V,w[z]=!0,w[N]=!0,w[V]=!0,o.patterns[C.id]={min:z,mid:N,max:V}}}return o}function Af(l,i,o,d,y){let x;if(y===(function(w,C,I,z){let N=0;for(let V=C,Z=I-z;V<I;V+=z)N+=(w[Z]-w[V])*(w[V+1]+w[Z+1]),Z=V;return N})(l,i,o,d)>0)for(let w=i;w<o;w+=d)x=za(w/d|0,l[w],l[w+1],x);else for(let w=o-d;w>=i;w-=d)x=za(w/d|0,l[w],l[w+1],x);return x&&vc(x,x.next)&&(Es(x),x=x.next),x}function Bn(l,i){if(!l)return l;i||(i=l);let o,d=l;do if(o=!1,d.steiner||!vc(d,d.next)&&_n(d.prev,d,d.next)!==0)d=d.next;else{if(Es(d),d=i=d.prev,d===d.next)break;o=!0}while(o||d!==i);return i}function va(l,i,o,d,y,x,w){if(!l)return;!w&&x&&(function(I,z,N,V){let Z=I;do Z.z===0&&(Z.z=Cf(Z.x,Z.y,z,N,V)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==I);Z.prevZ.nextZ=null,Z.prevZ=null,(function(Q){let te,le=1;do{let fe,_e=Q;Q=null;let Ue=null;for(te=0;_e;){te++;let Pe=_e,ke=0;for(let rt=0;rt<le&&(ke++,Pe=Pe.nextZ,Pe);rt++);let Ke=le;for(;ke>0||Ke>0&&Pe;)ke!==0&&(Ke===0||!Pe||_e.z<=Pe.z)?(fe=_e,_e=_e.nextZ,ke--):(fe=Pe,Pe=Pe.nextZ,Ke--),Ue?Ue.nextZ=fe:Q=fe,fe.prevZ=Ue,Ue=fe;_e=Pe}Ue.nextZ=null,le*=2}while(te>1)})(Z)})(l,d,y,x);let C=l;for(;l.prev!==l.next;){const I=l.prev,z=l.next;if(x?dy(l,d,y,x):yc(l))i.push(I.i,l.i,z.i),Es(l),l=z.next,C=z.next;else if((l=z)===C){w?w===1?va(l=fy(Bn(l),i),i,o,d,y,x,2):w===2&&qo(l,i,o,d,y,x):va(Bn(l),i,o,d,y,x,1);break}}}function yc(l){const i=l.prev,o=l,d=l.next;if(_n(i,o,d)>=0)return!1;const y=i.x,x=o.x,w=d.x,C=i.y,I=o.y,z=d.y,N=Math.min(y,x,w),V=Math.min(C,I,z),Z=Math.max(y,x,w),Q=Math.max(C,I,z);let te=d.next;for(;te!==i;){if(te.x>=N&&te.x<=Z&&te.y>=V&&te.y<=Q&&gh(y,C,x,I,w,z,te.x,te.y)&&_n(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function dy(l,i,o,d){const y=l.prev,x=l,w=l.next;if(_n(y,x,w)>=0)return!1;const C=y.x,I=x.x,z=w.x,N=y.y,V=x.y,Z=w.y,Q=Math.min(C,I,z),te=Math.min(N,V,Z),le=Math.max(C,I,z),fe=Math.max(N,V,Z),_e=Cf(Q,te,i,o,d),Ue=Cf(le,fe,i,o,d);let Pe=l.prevZ,ke=l.nextZ;for(;Pe&&Pe.z>=_e&&ke&&ke.z<=Ue;){if(Pe.x>=Q&&Pe.x<=le&&Pe.y>=te&&Pe.y<=fe&&Pe!==y&&Pe!==w&&gh(C,N,I,V,z,Z,Pe.x,Pe.y)&&_n(Pe.prev,Pe,Pe.next)>=0||(Pe=Pe.prevZ,ke.x>=Q&&ke.x<=le&&ke.y>=te&&ke.y<=fe&&ke!==y&&ke!==w&&gh(C,N,I,V,z,Z,ke.x,ke.y)&&_n(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;Pe&&Pe.z>=_e;){if(Pe.x>=Q&&Pe.x<=le&&Pe.y>=te&&Pe.y<=fe&&Pe!==y&&Pe!==w&&gh(C,N,I,V,z,Z,Pe.x,Pe.y)&&_n(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.prevZ}for(;ke&&ke.z<=Ue;){if(ke.x>=Q&&ke.x<=le&&ke.y>=te&&ke.y<=fe&&ke!==y&&ke!==w&&gh(C,N,I,V,z,Z,ke.x,ke.y)&&_n(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function fy(l,i){let o=l;do{const d=o.prev,y=o.next.next;!vc(d,y)&&Ja(d,o,o.next,y)&&Cn(d,y)&&Cn(y,d)&&(i.push(d.i,o.i,y.i),Es(o),Es(o.next),o=l=y),o=o.next}while(o!==l);return Bn(o)}function qo(l,i,o,d,y,x){let w=l;do{let C=w.next.next;for(;C!==w.prev;){if(w.i!==C.i&&X_(w,C)){let I=wi(w,C);return w=Bn(w,w.next),I=Bn(I,I.next),va(w,i,o,d,y,x,0),void va(I,i,o,d,y,x,0)}C=C.next}w=w.next}while(w!==l)}function py(l,i){let o=l.x-i.x;return o===0&&(o=l.y-i.y,o===0)&&(o=(l.next.y-l.y)/(l.next.x-l.x)-(i.next.y-i.y)/(i.next.x-i.x)),o}function Cs(l,i){const o=(function(y,x){let w=x;const C=y.x,I=y.y;let z,N=-1/0;if(vc(y,w))return w;do{if(vc(y,w.next))return w.next;if(I<=w.y&&I>=w.next.y&&w.next.y!==w.y){const le=w.x+(I-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(le<=C&&le>N&&(N=le,z=w.x<w.next.x?w:w.next,le===C))return z}w=w.next}while(w!==x);if(!z)return null;const V=z,Z=z.x,Q=z.y;let te=1/0;w=z;do{if(C>=w.x&&w.x>=Z&&C!==w.x&&bm(I<Q?C:N,I,Z,Q,I<Q?N:C,I,w.x,w.y)){const le=Math.abs(I-w.y)/(C-w.x);Cn(w,y)&&(le<te||le===te&&(w.x>z.x||w.x===z.x&&Z_(z,w)))&&(z=w,te=le)}w=w.next}while(w!==V);return z})(l,i);if(!o)return i;const d=wi(o,l);return Bn(d,d.next),Bn(o,o.next)}function Z_(l,i){return _n(l.prev,l,i.prev)<0&&_n(i.next,l,l.next)<0}function Cf(l,i,o,d,y){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-o)*y|0)|l<<8))|l<<4))|l<<2))|l<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-d)*y|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function my(l){let i=l,o=l;do(i.x<o.x||i.x===o.x&&i.y<o.y)&&(o=i),i=i.next;while(i!==l);return o}function bm(l,i,o,d,y,x,w,C){return(y-w)*(i-C)>=(l-w)*(x-C)&&(l-w)*(d-C)>=(o-w)*(i-C)&&(o-w)*(x-C)>=(y-w)*(d-C)}function gh(l,i,o,d,y,x,w,C){return!(l===w&&i===C)&&bm(l,i,o,d,y,x,w,C)}function X_(l,i){return l.next.i!==i.i&&l.prev.i!==i.i&&!(function(o,d){let y=o;do{if(y.i!==o.i&&y.next.i!==o.i&&y.i!==d.i&&y.next.i!==d.i&&Ja(y,y.next,o,d))return!0;y=y.next}while(y!==o);return!1})(l,i)&&(Cn(l,i)&&Cn(i,l)&&(function(o,d){let y=o,x=!1;const w=(o.x+d.x)/2,C=(o.y+d.y)/2;do y.y>C!=y.next.y>C&&y.next.y!==y.y&&w<(y.next.x-y.x)*(C-y.y)/(y.next.y-y.y)+y.x&&(x=!x),y=y.next;while(y!==o);return x})(l,i)&&(_n(l.prev,l,i.prev)||_n(l,i.prev,i))||vc(l,i)&&_n(l.prev,l,l.next)>0&&_n(i.prev,i,i.next)>0)}function _n(l,i,o){return(i.y-l.y)*(o.x-i.x)-(i.x-l.x)*(o.y-i.y)}function vc(l,i){return l.x===i.x&&l.y===i.y}function Ja(l,i,o,d){const y=ti(_n(l,i,o)),x=ti(_n(l,i,d)),w=ti(_n(o,d,l)),C=ti(_n(o,d,i));return y!==x&&w!==C||!(y!==0||!Br(l,o,i))||!(x!==0||!Br(l,d,i))||!(w!==0||!Br(o,l,d))||!(C!==0||!Br(o,i,d))}function Br(l,i,o){return i.x<=Math.max(l.x,o.x)&&i.x>=Math.min(l.x,o.x)&&i.y<=Math.max(l.y,o.y)&&i.y>=Math.min(l.y,o.y)}function ti(l){return l>0?1:l<0?-1:0}function Cn(l,i){return _n(l.prev,l,l.next)<0?_n(l,i,l.next)>=0&&_n(l,l.prev,i)>=0:_n(l,i,l.prev)<0||_n(l,l.next,i)<0}function wi(l,i){const o=ri(l.i,l.x,l.y),d=ri(i.i,i.x,i.y),y=l.next,x=i.prev;return l.next=i,i.prev=l,o.next=y,y.prev=o,d.next=o,o.prev=d,x.next=d,d.prev=x,d}function za(l,i,o,d){const y=ri(l,i,o);return d?(y.next=d.next,y.prev=d,d.next.prev=y,d.next=y):(y.prev=y,y.next=y),y}function Es(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function ri(l,i,o){return{i:l,x:i,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ms{constructor(i,o){if(o>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=o}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class ks{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}ks.noSubdivision=new ks({fill:new Ms(0,0),line:new Ms(0,0),tile:new Ms(0,0),stencil:new Ms(0,0),circle:1}),At("SubdivisionGranularityExpression",Ms),At("SubdivisionGranularitySetting",ks);const yl=-32768,vu=32767;class md{constructor(i,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=tt/i,this._canonical=o}_getKey(i,o){return(i+=32768)<<16|o+32768}_vertexToIndex(i,o){if(i<-32768||o<-32768||i>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(i),y=0|Math.round(o),x=this._getKey(d,y);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,w),this._vertexBuffer.push(d,y),w}_subdivideTrianglesScanline(i){if(this._granularity<2)return(function(y,x){const w=[];for(let C=0;C<x.length;C+=3){const I=x[C],z=x[C+1],N=x[C+2],V=y[2*I],Z=y[2*I+1];(y[2*z]-V)*(y[2*N+1]-Z)-(y[2*z+1]-Z)*(y[2*N]-V)>0?(w.push(I),w.push(N),w.push(z)):(w.push(I),w.push(z),w.push(N))}return w})(this._vertexBuffer,i);const o=[],d=i.length;for(let y=0;y<d;y+=3){const x=[i[y+0],i[y+1],i[y+2]],w=[this._vertexBuffer[2*i[y+0]+0],this._vertexBuffer[2*i[y+0]+1],this._vertexBuffer[2*i[y+1]+0],this._vertexBuffer[2*i[y+1]+1],this._vertexBuffer[2*i[y+2]+0],this._vertexBuffer[2*i[y+2]+1]];let C=1/0,I=1/0,z=-1/0,N=-1/0;for(let le=0;le<3;le++){const fe=w[2*le],_e=w[2*le+1];C=Math.min(C,fe),z=Math.max(z,fe),I=Math.min(I,_e),N=Math.max(N,_e)}if(C===z||I===N)continue;const V=Math.floor(C/this._granularityCellSize),Z=Math.ceil(z/this._granularityCellSize),Q=Math.floor(I/this._granularityCellSize),te=Math.ceil(N/this._granularityCellSize);if(V!==Z||Q!==te)for(let le=Q;le<te;le++){const fe=this._scanlineGenerateVertexRingForCellRow(le,w,x);yh(this._vertexBuffer,fe,o)}else o.push(...x)}return o}_scanlineGenerateVertexRingForCellRow(i,o,d){const y=i*this._granularityCellSize,x=y+this._granularityCellSize,w=[];for(let C=0;C<3;C++){const I=o[2*C],z=o[2*C+1],N=o[2*(C+1)%6],V=o[(2*(C+1)+1)%6],Z=o[2*(C+2)%6],Q=o[(2*(C+2)+1)%6],te=N-I,le=V-z,fe=te===0,_e=le===0,Ue=(y-z)/le,Pe=(x-z)/le,ke=Math.min(Ue,Pe),Ke=Math.max(Ue,Pe);if(!_e&&(ke>=1||Ke<=0)||_e&&(z<y||z>x)){V>=y&&V<=x&&w.push(d[(C+1)%3]);continue}!_e&&ke>0&&w.push(this._vertexToIndex(I+te*ke,z+le*ke));const rt=I+te*Math.max(ke,0),mt=I+te*Math.min(Ke,1);fe||this._generateIntraEdgeVertices(w,I,z,N,V,rt,mt),!_e&&Ke<1&&w.push(this._vertexToIndex(I+te*Ke,z+le*Ke)),(_e||V>=y&&V<=x)&&w.push(d[(C+1)%3]),!_e&&(V<=y||V>=x)&&this._generateInterEdgeVertices(w,I,z,N,V,Z,Q,mt,y,x)}return w}_generateIntraEdgeVertices(i,o,d,y,x,w,C){const I=y-o,z=x-d,N=z===0,V=N?Math.min(o,y):Math.min(w,C),Z=N?Math.max(o,y):Math.max(w,C),Q=Math.floor(V/this._granularityCellSize)+1,te=Math.ceil(Z/this._granularityCellSize)-1;if(N?o<y:w<C)for(let le=Q;le<=te;le++){const fe=le*this._granularityCellSize;i.push(this._vertexToIndex(fe,d+z*(fe-o)/I))}else for(let le=te;le>=Q;le--){const fe=le*this._granularityCellSize;i.push(this._vertexToIndex(fe,d+z*(fe-o)/I))}}_generateInterEdgeVertices(i,o,d,y,x,w,C,I,z,N){const V=x-d,Z=w-y,Q=C-x,te=(z-x)/Q,le=(N-x)/Q,fe=Math.min(te,le),_e=Math.max(te,le),Ue=y+Z*fe;let Pe=Math.floor(Math.min(Ue,I)/this._granularityCellSize)+1,ke=Math.ceil(Math.max(Ue,I)/this._granularityCellSize)-1,Ke=I<Ue;const rt=Q===0;if(rt&&(C===z||C===N))return;if(rt||fe>=1||_e<=0){const It=d-C,St=w+(o-w)*Math.min((z-C)/It,(N-C)/It);Pe=Math.floor(Math.min(St,I)/this._granularityCellSize)+1,ke=Math.ceil(Math.max(St,I)/this._granularityCellSize)-1,Ke=I<St}const mt=V>0?N:z;if(Ke)for(let It=Pe;It<=ke;It++)i.push(this._vertexToIndex(It*this._granularityCellSize,mt));else for(let It=ke;It>=Pe;It--)i.push(this._vertexToIndex(It*this._granularityCellSize,mt))}_generateOutline(i){const o=[];for(const d of i){const y=vl(d,this._granularity,!0),x=this._pointArrayToIndices(y),w=[];for(let C=1;C<x.length;C++)w.push(x[C-1]),w.push(x[C]);o.push(w)}return o}_handlePoles(i){let o=!1,d=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(o||d)&&this._fillPoles(i,o,d)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let o=0;o<i.length;o+=2){const d=i[o+1];d===yl&&(i[o+1]=-32767),d===vu&&(i[o+1]=32766)}}_generatePoleQuad(i,o,d,y,x,w){y>x!=(w===yl)?(i.push(o),i.push(d),i.push(this._vertexToIndex(y,w)),i.push(d),i.push(this._vertexToIndex(x,w)),i.push(this._vertexToIndex(y,w))):(i.push(d),i.push(o),i.push(this._vertexToIndex(y,w)),i.push(this._vertexToIndex(x,w)),i.push(d),i.push(this._vertexToIndex(y,w)))}_fillPoles(i,o,d){const y=this._vertexBuffer,x=tt,w=i.length;for(let C=2;C<w;C+=3){const I=i[C-2],z=i[C-1],N=i[C],V=y[2*I],Z=y[2*I+1],Q=y[2*z],te=y[2*z+1],le=y[2*N],fe=y[2*N+1];o&&(Z===0&&te===0&&this._generatePoleQuad(i,I,z,V,Q,yl),te===0&&fe===0&&this._generatePoleQuad(i,z,N,Q,le,yl),fe===0&&Z===0&&this._generatePoleQuad(i,N,I,le,V,yl)),d&&(Z===x&&te===x&&this._generatePoleQuad(i,I,z,V,Q,vu),te===x&&fe===x&&this._generatePoleQuad(i,z,N,Q,le,vu),fe===x&&Z===x&&this._generatePoleQuad(i,N,I,le,V,vu))}}_initializeVertices(i){for(let o=0;o<i.length;o+=2)this._vertexToIndex(i[o],i[o+1])}subdividePolygonInternal(i,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:y}=(function(C){const I=[],z=[];for(const N of C)if(N.length!==0){N!==C[0]&&I.push(z.length/2);for(let V=0;V<N.length;V++)z.push(N[V].x),z.push(N[V].y)}return{flattened:z,holeIndices:I}})(i);let x;this._initializeVertices(d);try{const C=(function(z,N,V=2){const Z=N&&N.length,Q=Z?N[0]*V:z.length;let te=Af(z,0,Q,V,!0);const le=[];if(!te||te.next===te.prev)return le;let fe,_e,Ue;if(Z&&(te=(function(Pe,ke,Ke,rt){const mt=[];for(let It=0,St=ke.length;It<St;It++){const Et=Af(Pe,ke[It]*rt,It<St-1?ke[It+1]*rt:Pe.length,rt,!1);Et===Et.next&&(Et.steiner=!0),mt.push(my(Et))}mt.sort(py);for(let It=0;It<mt.length;It++)Ke=Cs(mt[It],Ke);return Ke})(z,N,te,V)),z.length>80*V){fe=z[0],_e=z[1];let Pe=fe,ke=_e;for(let Ke=V;Ke<Q;Ke+=V){const rt=z[Ke],mt=z[Ke+1];rt<fe&&(fe=rt),mt<_e&&(_e=mt),rt>Pe&&(Pe=rt),mt>ke&&(ke=mt)}Ue=Math.max(Pe-fe,ke-_e),Ue=Ue!==0?32767/Ue:0}return va(te,le,V,fe,_e,Ue,0),le})(d,y),I=this._convertIndices(d,C);x=this._subdivideTrianglesScanline(I)}catch(C){console.error(C)}let w=[];return o&&(w=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:w}}_convertIndices(i,o){const d=[];for(let y=0;y<o.length;y++)d.push(this._vertexToIndex(i[2*o[y]],i[2*o[y]+1]));return d}_pointArrayToIndices(i){const o=[];for(let d=0;d<i.length;d++){const y=i[d];o.push(this._vertexToIndex(y.x,y.y))}return o}}function _a(l,i,o,d=!0){return new md(o,i).subdividePolygonInternal(l,d)}function vl(l,i,o=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const d=l[0],y=l[l.length-1],x=o&&(d.x!==y.x||d.y!==y.y);if(i<2)return x?[...l,l[0]]:[...l];const w=Math.floor(tt/i),C=[];C.push(new P(l[0].x,l[0].y));const I=l.length,z=x?I:I-1;for(let N=0;N<z;N++){const V=l[N],Z=N<I-1?l[N+1]:l[0],Q=V.x,te=V.y,le=Z.x,fe=Z.y,_e=Q!==le,Ue=te!==fe;if(!_e&&!Ue)continue;const Pe=le-Q,ke=fe-te,Ke=Math.abs(Pe),rt=Math.abs(ke);let mt=Q,It=te;for(;;){const Et=Pe>0?(Math.floor(mt/w)+1)*w:(Math.ceil(mt/w)-1)*w,Gt=ke>0?(Math.floor(It/w)+1)*w:(Math.ceil(It/w)-1)*w,Ct=Math.abs(mt-Et),Mt=Math.abs(It-Gt),ht=Math.abs(mt-le),or=Math.abs(It-fe),hr=_e?Ct/Ke:Number.POSITIVE_INFINITY,Qt=Ue?Mt/rt:Number.POSITIVE_INFINITY;if((ht<=Ct||!_e)&&(or<=Mt||!Ue))break;if(hr<Qt&&_e||!Ue){mt=Et,It+=ke*hr;const Bt=new P(mt,Math.round(It));C[C.length-1].x===Bt.x&&C[C.length-1].y===Bt.y||C.push(Bt)}else{mt+=Pe*Qt,It=Gt;const Bt=new P(Math.round(mt),It);C[C.length-1].x===Bt.x&&C[C.length-1].y===Bt.y||C.push(Bt)}}const St=new P(le,fe);C[C.length-1].x===St.x&&C[C.length-1].y===St.y||C.push(St)}return C}function yh(l,i,o){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,y=l[2*i[0]];for(let I=1;I<i.length;I++){const z=l[2*i[I]];z<y&&(y=z,d=I)}const x=i.length;let w=d,C=(w+1)%x;for(;;){const I=w-1>=0?w-1:x-1,z=(C+1)%x,N=l[2*i[I]],V=l[2*i[z]],Z=l[2*i[w]],Q=l[2*i[w]+1],te=l[2*i[C]+1];let le=!1;if(N<V)le=!0;else if(N>V)le=!1;else{const fe=te-Q,_e=-(l[2*i[C]]-Z),Ue=Q<te?1:-1;((N-Z)*fe+(l[2*i[I]+1]-Q)*_e)*Ue>((V-Z)*fe+(l[2*i[z]+1]-Q)*_e)*Ue&&(le=!0)}if(le){const fe=i[I],_e=i[w],Ue=i[C];fe!==_e&&fe!==Ue&&_e!==Ue&&o.push(Ue,_e,fe),w--,w<0&&(w=x-1)}else{const fe=i[z],_e=i[w],Ue=i[C];fe!==_e&&fe!==Ue&&_e!==Ue&&o.push(Ue,_e,fe),C++,C>=x&&(C=0)}if(I===z)break}}function Is(l,i,o,d,y,x,w,C,I){const z=y.length/2,N=w&&C&&I;if(z<Rr.MAX_VERTEX_ARRAY_LENGTH){const V=i.prepareSegment(z,o,d),Z=V.vertexLength;for(let le=0;le<x.length;le+=3)d.emplaceBack(Z+x[le],Z+x[le+1],Z+x[le+2]);let Q,te;V.vertexLength+=z,V.primitiveLength+=x.length/3,N&&(te=w.prepareSegment(z,o,C),Q=te.vertexLength,te.vertexLength+=z);for(let le=0;le<y.length;le+=2)l(y[le],y[le+1]);if(N)for(let le=0;le<I.length;le++){const fe=I[le];for(let _e=1;_e<fe.length;_e+=2)C.emplaceBack(Q+fe[_e-1],Q+fe[_e]);te.primitiveLength+=fe.length/2}}else(function(V,Z,Q,te,le,fe){const _e=[];for(let rt=0;rt<te.length/2;rt++)_e.push(-1);const Ue={count:0};let Pe=0,ke=V.getOrCreateLatestSegment(Z,Q),Ke=ke.vertexLength;for(let rt=2;rt<le.length;rt+=3){const mt=le[rt-2],It=le[rt-1],St=le[rt];let Et=_e[mt]<Pe,Gt=_e[It]<Pe,Ct=_e[St]<Pe;ke.vertexLength+((Et?1:0)+(Gt?1:0)+(Ct?1:0))>Rr.MAX_VERTEX_ARRAY_LENGTH&&(ke=V.createNewSegment(Z,Q),Pe=Ue.count,Et=!0,Gt=!0,Ct=!0,Ke=0);const Mt=_c(_e,te,fe,Ue,mt,Et,ke),ht=_c(_e,te,fe,Ue,It,Gt,ke),or=_c(_e,te,fe,Ue,St,Ct,ke);Q.emplaceBack(Ke+Mt-Pe,Ke+ht-Pe,Ke+or-Pe),ke.primitiveLength++}})(i,o,d,y,x,l),N&&(function(V,Z,Q,te,le,fe){const _e=[];for(let rt=0;rt<te.length/2;rt++)_e.push(-1);const Ue={count:0};let Pe=0,ke=V.getOrCreateLatestSegment(Z,Q),Ke=ke.vertexLength;for(let rt=0;rt<le.length;rt++){const mt=le[rt];for(let It=1;It<le[rt].length;It+=2){const St=mt[It-1],Et=mt[It];let Gt=_e[St]<Pe,Ct=_e[Et]<Pe;ke.vertexLength+((Gt?1:0)+(Ct?1:0))>Rr.MAX_VERTEX_ARRAY_LENGTH&&(ke=V.createNewSegment(Z,Q),Pe=Ue.count,Gt=!0,Ct=!0,Ke=0);const Mt=_c(_e,te,fe,Ue,St,Gt,ke),ht=_c(_e,te,fe,Ue,Et,Ct,ke);Q.emplaceBack(Ke+Mt-Pe,Ke+ht-Pe),ke.primitiveLength++}}})(w,o,C,y,I,l),i.forceNewSegmentOnNextPrepare(),w?.forceNewSegmentOnNextPrepare()}function _c(l,i,o,d,y,x,w){if(x){const C=d.count;return o(i[2*y],i[2*y+1]),l[y]=d.count,d.count++,w.vertexLength++,C}return l[y]}class gd{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new He,this.indexArray=new Vr,this.indexArray2=new fn,this.programConfigurations=new xo(i.layers,i.zoom),this.segments=new Rr,this.segments2=new Rr,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(i,o,d){this.hasPattern=Tf("fill",this.layers,o);const y=this.layers[0].layout.get("fill-sort-key"),x=!y.isConstant(),w=[];for(const{feature:C,id:I,index:z,sourceLayerIndex:N}of i){const V=this.layers[0]._featureFilter.needGeometry,Z=gc(C,V);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),Z,d))continue;const Q=x?y.evaluate(Z,{},d,o.availableImages):void 0,te={id:I,properties:C.properties,type:C.type,sourceLayerIndex:N,index:z,geometry:V?Z.geometry:mc(C),patterns:{},sortKey:Q};w.push(te)}x&&w.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of w){const{geometry:I,index:z,sourceLayerIndex:N}=C;if(this.hasPattern){const V=pd("fill",this.layers,C,{zoom:this.zoom},o);this.patternFeatures.push(V)}else this.addFeature(C,I,z,d,{},o.subdivisionGranularity);o.featureIndex.insert(i[z].feature,I,z,N,this.index)}}update(i,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,{imagePositions:d})}addFeatures(i,o,d){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,o,d,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,hy),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,o,d,y,x,w){for(const C of Hl(o,500)){const I=_a(C,y,w.fill.getGranularityForZoomLevel(y.z)),z=this.layoutVertexArray;Is(((N,V)=>{z.emplaceBack(N,V)}),this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{imagePositions:x,canonical:y})}}let _l,yd;At("FillBucket",gd,{omit:["layers","patternFeatures"]});var xc={get paint(){return yd=yd||new jn({"fill-antialias":new jt(Be.paint_fill["fill-antialias"]),"fill-opacity":new Vt(Be.paint_fill["fill-opacity"]),"fill-color":new Vt(Be.paint_fill["fill-color"]),"fill-outline-color":new Vt(Be.paint_fill["fill-outline-color"]),"fill-translate":new jt(Be.paint_fill["fill-translate"]),"fill-translate-anchor":new jt(Be.paint_fill["fill-translate-anchor"]),"fill-pattern":new sc(Be.paint_fill["fill-pattern"])})},get layout(){return _l=_l||new jn({"fill-sort-key":new Vt(Be.layout_fill["fill-sort-key"])})}};class Ef extends di{constructor(i,o){super(i,xc,o)}recalculate(i,o){super.recalculate(i,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new gd(i)}queryRadius(){return dd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:o,transform:d,pixelsToTileUnits:y}){return Qi(dh(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,y),o)}isTileClipped(){return!0}}const vd=Jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),wm=Jr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Mf}=vd;class xl{constructor(i,o,d,y,x){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=i,this._geometry=-1,this._keys=y,this._values=x,i.readFields(xa,this,o)}loadGeometry(){const i=this._pbf;i.pos=this._geometry;const o=i.readVarint()+i.pos,d=[];let y,x=1,w=0,C=0,I=0;for(;i.pos<o;){if(w<=0){const z=i.readVarint();x=7&z,w=z>>3}if(w--,x===1||x===2)C+=i.readSVarint(),I+=i.readSVarint(),x===1&&(y&&d.push(y),y=[]),y&&y.push(new P(C,I));else{if(x!==7)throw new Error(`unknown command ${x}`);y&&y.push(y[0].clone())}}return y&&d.push(y),d}bbox(){const i=this._pbf;i.pos=this._geometry;const o=i.readVarint()+i.pos;let d=1,y=0,x=0,w=0,C=1/0,I=-1/0,z=1/0,N=-1/0;for(;i.pos<o;){if(y<=0){const V=i.readVarint();d=7&V,y=V>>3}if(y--,d===1||d===2)x+=i.readSVarint(),w+=i.readSVarint(),x<C&&(C=x),x>I&&(I=x),w<z&&(z=w),w>N&&(N=w);else if(d!==7)throw new Error(`unknown command ${d}`)}return[C,z,I,N]}toGeoJSON(i,o,d){const y=this.extent*Math.pow(2,d),x=this.extent*i,w=this.extent*o,C=this.loadGeometry();function I(Z){return[360*(Z.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((1-2*(Z.y+w)/y)*Math.PI))-90]}function z(Z){return Z.map(I)}let N;if(this.type===1){const Z=[];for(const te of C)Z.push(te[0]);const Q=z(Z);N=Z.length===1?{type:"Point",coordinates:Q[0]}:{type:"MultiPoint",coordinates:Q}}else if(this.type===2){const Z=C.map(z);N=Z.length===1?{type:"LineString",coordinates:Z[0]}:{type:"MultiLineString",coordinates:Z}}else{if(this.type!==3)throw new Error("unknown feature type");{const Z=(function(te){const le=te.length;if(le<=1)return[te];const fe=[];let _e,Ue;for(let Pe=0;Pe<le;Pe++){const ke=bc(te[Pe]);ke!==0&&(Ue===void 0&&(Ue=ke<0),Ue===ke<0?(_e&&fe.push(_e),_e=[te[Pe]]):_e&&_e.push(te[Pe]))}return _e&&fe.push(_e),fe})(C),Q=[];for(const te of Z)Q.push(te.map(z));N=Q.length===1?{type:"Polygon",coordinates:Q[0]}:{type:"MultiPolygon",coordinates:Q}}}const V={type:"Feature",geometry:N,properties:this.properties};return this.id!=null&&(V.id=this.id),V}}function xa(l,i,o){l===1?i.id=o.readVarint():l===2?(function(d,y){const x=d.readVarint()+d.pos;for(;d.pos<x;){const w=y._keys[d.readVarint()],C=y._values[d.readVarint()];y.properties[w]=C}})(o,i):l===3?i.type=o.readVarint():l===4&&(i._geometry=o.pos)}function bc(l){let i=0;for(let o,d,y=0,x=l.length,w=x-1;y<x;w=y++)o=l[y],d=l[w],i+=(d.x-o.x)*(o.y+d.y);return i}xl.types=["Unknown","Point","LineString","Polygon"];class bo{constructor(i,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(ja,this,o),this.length=this._features.length}feature(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];const o=this._pbf.readVarint()+this._pbf.pos;return new xl(this._pbf,o,this.extent,this._keys,this._values)}}function ja(l,i,o){l===15?i.version=o.readVarint():l===1?i.name=o.readString():l===5?i.extent=o.readVarint():l===2?i._features.push(o.pos):l===3?i._keys.push(o.readString()):l===4&&i._values.push((function(d){let y=null;const x=d.readVarint()+d.pos;for(;d.pos<x;){const w=d.readVarint()>>3;y=w===1?d.readString():w===2?d.readFloat():w===3?d.readDouble():w===4?d.readVarint64():w===5?d.readVarint():w===6?d.readSVarint():w===7?d.readBoolean():null}if(y==null)throw new Error("unknown feature value");return y})(o))}class Sm{constructor(i,o){this.layers=i.readFields(Pm,{},o)}}function Pm(l,i,o){if(l===3){const d=new bo(o,o.readVarint()+o.pos);d.length&&(i[d.name]=d)}}const _d=Math.pow(2,13);function xd(l,i,o,d,y,x,w,C){l.emplaceBack(i,o,2*Math.floor(d*_d)+w,y*_d*2,x*_d*2,Math.round(C))}class Os{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new et,this.centroidVertexArray=new Ze,this.indexArray=new Vr,this.programConfigurations=new xo(i.layers,i.zoom),this.segments=new Rr,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(i,o,d){this.features=[],this.hasPattern=Tf("fill-extrusion",this.layers,o);for(const{feature:y,id:x,index:w,sourceLayerIndex:C}of i){const I=this.layers[0]._featureFilter.needGeometry,z=gc(y,I);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),z,d))continue;const N={id:x,sourceLayerIndex:C,index:w,geometry:I?z.geometry:mc(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(pd("fill-extrusion",this.layers,N,{zoom:this.zoom},o)):this.addFeature(N,N.geometry,w,d,{},o.subdivisionGranularity),o.featureIndex.insert(y,N.geometry,w,C,this.index,!0)}}addFeatures(i,o,d){for(const y of this.features){const{geometry:x}=y;this.addFeature(y,x,y.index,o,d,i.subdivisionGranularity)}}update(i,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Mf),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,wm.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,o,d,y,x,w){for(const C of Hl(o,500)){const I={x:0,y:0,sampleCount:0},z=this.layoutVertexArray.length;this.processPolygon(I,y,i,C,w);const N=this.layoutVertexArray.length-z,V=Math.floor(I.x/I.sampleCount),Z=Math.floor(I.y/I.sampleCount);for(let Q=0;Q<N;Q++)this.centroidVertexArray.emplaceBack(V,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{imagePositions:x,canonical:y})}processPolygon(i,o,d,y,x){if(y.length<1||wc(y[0]))return;for(const V of y)V.length!==0&&gy(i,V);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=x.fill.getGranularityForZoomLevel(o.z),I=xl.types[d.type]==="Polygon";for(const V of y){if(V.length===0||wc(V))continue;const Z=vl(V,C,I);this._generateSideFaces(Z,w)}if(!I)return;const z=_a(y,o,C,!1),N=this.layoutVertexArray;Is(((V,Z)=>{xd(N,V,Z,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles)}_generateSideFaces(i,o){let d=0;for(let y=1;y<i.length;y++){const x=i[y],w=i[y-1];if(Tm(x,w))continue;o.segment.vertexLength+4>Rr.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=x.sub(w)._perp()._unit(),I=w.dist(x);d+I>32768&&(d=0),xd(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,0,d),xd(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,1,d),d+=I,xd(this.layoutVertexArray,w.x,w.y,C.x,C.y,0,0,d),xd(this.layoutVertexArray,w.x,w.y,C.x,C.y,0,1,d);const z=o.segment.vertexLength;this.indexArray.emplaceBack(z,z+2,z+1),this.indexArray.emplaceBack(z+1,z+2,z+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function gy(l,i){for(let o=0;o<i.length;o++){const d=i[o];o===i.length-1&&i[0].x===d.x&&i[0].y===d.y||(l.x+=d.x,l.y+=d.y,l.sampleCount++)}}function Tm(l,i){return l.x===i.x&&(l.x<0||l.x>tt)||l.y===i.y&&(l.y<0||l.y>tt)}function wc(l){return l.every((i=>i.x<0))||l.every((i=>i.x>tt))||l.every((i=>i.y<0))||l.every((i=>i.y>tt))}let kf;At("FillExtrusionBucket",Os,{omit:["layers","features"]});var _u={get paint(){return kf=kf||new jn({"fill-extrusion-opacity":new jt(Be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vt(Be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt(Be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt(Be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sc(Be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vt(Be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vt(Be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt(Be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class yy extends di{constructor(i,o){super(i,_u,o)}createBucket(i){return new Os(i)}queryRadius(){return dd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:o,featureState:d,geometry:y,transform:x,pixelsToTileUnits:w,pixelPosMatrix:C}){const I=dh(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,w),z=this.paint.get("fill-extrusion-height").evaluate(o,d),N=this.paint.get("fill-extrusion-base").evaluate(o,d),V=(function(Q,te){const le=[];for(const fe of Q){const _e=[fe.x,fe.y,0,1];ot(_e,_e,te),le.push(new P(_e[0]/_e[3],_e[1]/_e[3]))}return le})(I,C),Z=(function(Q,te,le,fe){const _e=[],Ue=[],Pe=fe[8]*te,ke=fe[9]*te,Ke=fe[10]*te,rt=fe[11]*te,mt=fe[8]*le,It=fe[9]*le,St=fe[10]*le,Et=fe[11]*le;for(const Gt of Q){const Ct=[],Mt=[];for(const ht of Gt){const or=ht.x,hr=ht.y,Qt=fe[0]*or+fe[4]*hr+fe[12],Bt=fe[1]*or+fe[5]*hr+fe[13],Dr=fe[2]*or+fe[6]*hr+fe[14],Un=fe[3]*or+fe[7]*hr+fe[15],fi=Dr+Ke,ra=Un+rt,Ho=Qt+mt,eo=Bt+It,Fi=Dr+St,En=Un+Et,Pi=new P((Qt+Pe)/ra,(Bt+ke)/ra);Pi.z=fi/ra,Ct.push(Pi);const $i=new P(Ho/En,eo/En);$i.z=Fi/En,Mt.push($i)}_e.push(Ct),Ue.push(Mt)}return[_e,Ue]})(y,N,z,C);return(function(Q,te,le){let fe=1/0;Qi(le,te)&&(fe=If(le,te[0]));for(let _e=0;_e<te.length;_e++){const Ue=te[_e],Pe=Q[_e];for(let ke=0;ke<Ue.length-1;ke++){const Ke=Ue[ke],rt=[Ke,Ue[ke+1],Pe[ke+1],Pe[ke],Ke];ty(le,rt)&&(fe=Math.min(fe,If(le,rt)))}}return fe!==1/0&&fe})(Z[0],Z[1],V)}}function vh(l,i){return l.x*i.x+l.y*i.y}function If(l,i){if(l.length===1){let o=0;const d=i[o++];let y;for(;!y||d.equals(y);)if(y=i[o++],!y)return 1/0;for(;o<i.length;o++){const x=i[o],w=l[0],C=y.sub(d),I=x.sub(d),z=w.sub(d),N=vh(C,C),V=vh(C,I),Z=vh(I,I),Q=vh(z,C),te=vh(z,I),le=N*Z-V*V,fe=(Z*Q-V*te)/le,_e=(N*te-V*Q)/le,Ue=d.z*(1-fe-_e)+y.z*fe+x.z*_e;if(isFinite(Ue))return Ue}return 1/0}{let o=1/0;for(const d of i)o=Math.min(o,d.z);return o}}const Of=Jr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:K_}=Of,Y_=Jr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:vy}=Y_,_y=Math.cos(Math.PI/180*37.5),Sc=Math.pow(2,14)/.5;class Am{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((o=>{this.gradients[o.id]={}})),this.layoutVertexArray=new Pt,this.layoutVertexArray2=new wt,this.indexArray=new Vr,this.programConfigurations=new xo(i.layers,i.zoom),this.segments=new Rr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(i,o,d){this.hasPattern=Tf("line",this.layers,o);const y=this.layers[0].layout.get("line-sort-key"),x=!y.isConstant(),w=[];for(const{feature:C,id:I,index:z,sourceLayerIndex:N}of i){const V=this.layers[0]._featureFilter.needGeometry,Z=gc(C,V);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),Z,d))continue;const Q=x?y.evaluate(Z,{},d):void 0,te={id:I,properties:C.properties,type:C.type,sourceLayerIndex:N,index:z,geometry:V?Z.geometry:mc(C),patterns:{},sortKey:Q};w.push(te)}x&&w.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of w){const{geometry:I,index:z,sourceLayerIndex:N}=C;if(this.hasPattern){const V=pd("line",this.layers,C,{zoom:this.zoom},o);this.patternFeatures.push(V)}else this.addFeature(C,I,z,d,{},o.subdivisionGranularity);o.featureIndex.insert(i[z].feature,I,z,N,this.index)}}update(i,o,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,{imagePositions:d})}addFeatures(i,o,d){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,o,d,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,vy)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,K_),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,o,d,y,x,w){const C=this.layers[0].layout,I=C.get("line-join").evaluate(i,{}),z=C.get("line-cap"),N=C.get("line-miter-limit"),V=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const Z of o)this.addLine(Z,i,I,z,N,V,y,w);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{imagePositions:x,canonical:y})}addLine(i,o,d,y,x,w,C,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=vl(i,C?I.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pe=0;Pe<i.length-1;Pe++)this.totalDistance+=i[Pe].dist(i[Pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=xl.types[o.type]==="Polygon";let N=i.length;for(;N>=2&&i[N-1].equals(i[N-2]);)N--;let V=0;for(;V<N-1&&i[V].equals(i[V+1]);)V++;if(N<(z?3:2))return;d==="bevel"&&(x=1.05);const Z=this.overscaling<=16?122880/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let te,le,fe,_e,Ue;this.e1=this.e2=-1,z&&(te=i[N-2],Ue=i[V].sub(te)._unit()._perp());for(let Pe=V;Pe<N;Pe++){if(fe=Pe===N-1?z?i[V+1]:void 0:i[Pe+1],fe&&i[Pe].equals(fe))continue;Ue&&(_e=Ue),te&&(le=te),te=i[Pe],Ue=fe?fe.sub(te)._unit()._perp():_e,_e=_e||Ue;let ke=_e.add(Ue);ke.x===0&&ke.y===0||ke._unit();const Ke=_e.x*Ue.x+_e.y*Ue.y,rt=ke.x*Ue.x+ke.y*Ue.y,mt=rt!==0?1/rt:1/0,It=2*Math.sqrt(2-2*rt),St=rt<_y&&le&&fe,Et=_e.x*Ue.y-_e.y*Ue.x>0;if(St&&Pe>V){const Mt=te.dist(le);if(Mt>2*Z){const ht=te.sub(te.sub(le)._mult(Z/Mt)._round());this.updateDistance(le,ht),this.addCurrentVertex(ht,_e,0,0,Q),le=ht}}const Gt=le&&fe;let Ct=Gt?d:z?"butt":y;if(Gt&&Ct==="round"&&(mt<w?Ct="miter":mt<=2&&(Ct="fakeround")),Ct==="miter"&&mt>x&&(Ct="bevel"),Ct==="bevel"&&(mt>2&&(Ct="flipbevel"),mt<x&&(Ct="miter")),le&&this.updateDistance(le,te),Ct==="miter")ke._mult(mt),this.addCurrentVertex(te,ke,0,0,Q);else if(Ct==="flipbevel"){if(mt>100)ke=Ue.mult(-1);else{const Mt=mt*_e.add(Ue).mag()/_e.sub(Ue).mag();ke._perp()._mult(Mt*(Et?-1:1))}this.addCurrentVertex(te,ke,0,0,Q),this.addCurrentVertex(te,ke.mult(-1),0,0,Q)}else if(Ct==="bevel"||Ct==="fakeround"){const Mt=-Math.sqrt(mt*mt-1),ht=Et?Mt:0,or=Et?0:Mt;if(le&&this.addCurrentVertex(te,_e,ht,or,Q),Ct==="fakeround"){const hr=Math.round(180*It/Math.PI/20);for(let Qt=1;Qt<hr;Qt++){let Bt=Qt/hr;if(Bt!==.5){const Un=Bt-.5;Bt+=Bt*Un*(Bt-1)*((1.0904+Ke*(Ke*(3.55645-1.43519*Ke)-3.2452))*Un*Un+(.848013+Ke*(.215638*Ke-1.06021)))}const Dr=Ue.sub(_e)._mult(Bt)._add(_e)._unit()._mult(Et?-1:1);this.addHalfVertex(te,Dr.x,Dr.y,!1,Et,0,Q)}}fe&&this.addCurrentVertex(te,Ue,-ht,-or,Q)}else if(Ct==="butt")this.addCurrentVertex(te,ke,0,0,Q);else if(Ct==="square"){const Mt=le?1:-1;this.addCurrentVertex(te,ke,Mt,Mt,Q)}else Ct==="round"&&(le&&(this.addCurrentVertex(te,_e,0,0,Q),this.addCurrentVertex(te,_e,1,1,Q,!0)),fe&&(this.addCurrentVertex(te,Ue,-1,-1,Q,!0),this.addCurrentVertex(te,Ue,0,0,Q)));if(St&&Pe<N-1){const Mt=te.dist(fe);if(Mt>2*Z){const ht=te.add(fe.sub(te)._mult(Z/Mt)._round());this.updateDistance(te,ht),this.addCurrentVertex(ht,Ue,0,0,Q),te=ht}}}}addCurrentVertex(i,o,d,y,x,w=!1){const C=o.y*y-o.x,I=-o.y-o.x*y;this.addHalfVertex(i,o.x+o.y*d,o.y-o.x*d,w,!1,d,x),this.addHalfVertex(i,C,I,w,!0,-y,x),this.distance>Sc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,o,d,y,x,w))}addHalfVertex({x:i,y:o},d,y,x,w,C,I){const z=.5*(this.lineClips?this.scaledDistance*(Sc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(x?1:0),(o<<1)+(w?1:0),Math.round(63*d)+128,Math.round(63*y)+128,1+(C===0?0:C<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),I.primitiveLength++),w?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,o){this.distance+=i.dist(o),this.updateScaledDistance()}}let xu,Cm;At("LineBucket",Am,{omit:["layers","patternFeatures"]});var Fn={get paint(){return Cm=Cm||new jn({"line-opacity":new Vt(Be.paint_line["line-opacity"]),"line-color":new Vt(Be.paint_line["line-color"]),"line-translate":new jt(Be.paint_line["line-translate"]),"line-translate-anchor":new jt(Be.paint_line["line-translate-anchor"]),"line-width":new Vt(Be.paint_line["line-width"]),"line-gap-width":new Vt(Be.paint_line["line-gap-width"]),"line-offset":new Vt(Be.paint_line["line-offset"]),"line-blur":new Vt(Be.paint_line["line-blur"]),"line-dasharray":new du(Be.paint_line["line-dasharray"]),"line-pattern":new sc(Be.paint_line["line-pattern"]),"line-gradient":new lc(Be.paint_line["line-gradient"])})},get layout(){return xu=xu||new jn({"line-cap":new jt(Be.layout_line["line-cap"]),"line-join":new Vt(Be.layout_line["line-join"]),"line-miter-limit":new jt(Be.layout_line["line-miter-limit"]),"line-round-limit":new jt(Be.layout_line["line-round-limit"]),"line-sort-key":new Vt(Be.layout_line["line-sort-key"])})}};class J_ extends Vt{possiblyEvaluate(i,o){return o=new Gr(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(i,o)}evaluate(i,o,d,y){return o=tr({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(i,o,d,y)}}let bd;class Q_ extends di{constructor(i,o){super(i,Fn,o),this.gradientVersion=0,bd||(bd=new J_(Fn.paint.properties["line-width"].specification),bd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!(function(d){return d._styleExpression!==void 0})(o)&&o._styleExpression.expression instanceof sn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,o){super.recalculate(i,o),this.paint._values["line-floorwidth"]=bd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Am(i)}queryRadius(i){const o=i,d=xy(gu("line-width",this,o),gu("line-gap-width",this,o)),y=gu("line-offset",this,o);return d/2+Math.abs(y)+dd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:o,featureState:d,geometry:y,transform:x,pixelsToTileUnits:w}){const C=dh(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,w),I=w/2*xy(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),z=this.paint.get("line-offset").evaluate(o,d);return z&&(y=(function(N,V){const Z=[];for(let Q=0;Q<N.length;Q++){const te=N[Q],le=[];for(let fe=0;fe<te.length;fe++){const _e=te[fe-1],Ue=te[fe],Pe=te[fe+1],ke=fe===0?new P(0,0):Ue.sub(_e)._unit()._perp(),Ke=fe===te.length-1?new P(0,0):Pe.sub(Ue)._unit()._perp(),rt=ke._add(Ke)._unit(),mt=rt.x*Ke.x+rt.y*Ke.y;mt!==0&&rt._mult(1/mt),le.push(rt._mult(V)._add(Ue))}Z.push(le)}return Z})(y,z*w)),(function(N,V,Z){for(let Q=0;Q<V.length;Q++){const te=V[Q];if(N.length>=3){for(let le=0;le<te.length;le++)if(mu(N,te[le]))return!0}if(ry(N,te,Z))return!0}return!1})(C,y,I)}isTileClipped(){return!0}}function xy(l,i){return i>0?i+2*l:l}const by=Jr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wy=Jr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Jr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const e0=Jr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Jr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Qa=Jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Em=Jr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function t0(l,i,o){return l.sections.forEach((d=>{d.text=(function(y,x,w){const C=x.layout.get("text-transform").evaluate(w,{});return C==="uppercase"?y=y.toLocaleUpperCase():C==="lowercase"&&(y=y.toLocaleLowerCase()),da.applyArabicShaping&&(y=da.applyArabicShaping(y)),y})(d.text,i,o)})),l}Jr([{name:"triangle",components:3,type:"Uint16"}]),Jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Jr([{type:"Float32",name:"offsetX"}]),Jr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Jr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const wo={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var $n=24;const bl=4294967296,wd=1/bl,Rf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Sd{constructor(i=new Uint8Array(16)){this.buf=ArrayBuffer.isView(i)?i:new Uint8Array(i),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(i,o,d=this.length){for(;this.pos<d;){const y=this.readVarint(),x=y>>3,w=this.pos;this.type=7&y,i(x,o,this),this.pos===w&&this.skip(y)}return o}readMessage(i,o){return this.readFields(i,o,this.readVarint()+this.pos)}readFixed32(){const i=this.dataView.getUint32(this.pos,!0);return this.pos+=4,i}readSFixed32(){const i=this.dataView.getInt32(this.pos,!0);return this.pos+=4,i}readFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*bl;return this.pos+=8,i}readSFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*bl;return this.pos+=8,i}readFloat(){const i=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,i}readDouble(){const i=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,i}readVarint(i){const o=this.buf;let d,y;return y=o[this.pos++],d=127&y,y<128?d:(y=o[this.pos++],d|=(127&y)<<7,y<128?d:(y=o[this.pos++],d|=(127&y)<<14,y<128?d:(y=o[this.pos++],d|=(127&y)<<21,y<128?d:(y=o[this.pos],d|=(15&y)<<28,(function(x,w,C){const I=C.buf;let z,N;if(N=I[C.pos++],z=(112&N)>>4,N<128||(N=I[C.pos++],z|=(127&N)<<3,N<128)||(N=I[C.pos++],z|=(127&N)<<10,N<128)||(N=I[C.pos++],z|=(127&N)<<17,N<128)||(N=I[C.pos++],z|=(127&N)<<24,N<128)||(N=I[C.pos++],z|=(1&N)<<31,N<128))return _h(x,z,w);throw new Error("Expected varint not more than 10 bytes")})(d,i,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const i=this.readVarint();return i%2==1?(i+1)/-2:i/2}readBoolean(){return!!this.readVarint()}readString(){const i=this.readVarint()+this.pos,o=this.pos;return this.pos=i,i-o>=12&&Rf?Rf.decode(this.buf.subarray(o,i)):(function(d,y,x){let w="",C=y;for(;C<x;){const I=d[C];let z,N,V,Z=null,Q=I>239?4:I>223?3:I>191?2:1;if(C+Q>x)break;Q===1?I<128&&(Z=I):Q===2?(z=d[C+1],(192&z)==128&&(Z=(31&I)<<6|63&z,Z<=127&&(Z=null))):Q===3?(z=d[C+1],N=d[C+2],(192&z)==128&&(192&N)==128&&(Z=(15&I)<<12|(63&z)<<6|63&N,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):Q===4&&(z=d[C+1],N=d[C+2],V=d[C+3],(192&z)==128&&(192&N)==128&&(192&V)==128&&(Z=(15&I)<<18|(63&z)<<12|(63&N)<<6|63&V,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,Q=1):Z>65535&&(Z-=65536,w+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),w+=String.fromCharCode(Z),C+=Q}return w})(this.buf,o,i)}readBytes(){const i=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,i);return this.pos=i,o}readPackedVarint(i=[],o){const d=this.readPackedEnd();for(;this.pos<d;)i.push(this.readVarint(o));return i}readPackedSVarint(i=[]){const o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSVarint());return i}readPackedBoolean(i=[]){const o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readBoolean());return i}readPackedFloat(i=[]){const o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFloat());return i}readPackedDouble(i=[]){const o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readDouble());return i}readPackedFixed32(i=[]){const o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFixed32());return i}readPackedSFixed32(i=[]){const o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSFixed32());return i}readPackedFixed64(i=[]){const o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFixed64());return i}readPackedSFixed64(i=[]){const o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSFixed64());return i}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(i){const o=7&i;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(i,o){this.writeVarint(i<<3|o)}realloc(i){let o=this.length||16;for(;o<this.pos+i;)o*=2;if(o!==this.length){const d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.dataView=new DataView(d.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeSFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*wd),!0),this.pos+=8}writeSFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*wd),!0),this.pos+=8}writeVarint(i){(i=+i||0)>268435455||i<0?(function(o,d){let y,x;if(o>=0?(y=o%4294967296|0,x=o/4294967296|0):(y=~(-o%4294967296),x=~(-o/4294967296),4294967295^y?y=y+1|0:(y=0,x=x+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(w,C,I){I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,I.buf[I.pos]=127&(w>>>=7)})(y,0,d),(function(w,C){const I=(7&w)<<4;C.buf[C.pos++]|=I|((w>>>=3)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w)))))})(x,d)})(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))}writeSVarint(i){this.writeVarint(i<0?2*-i-1:2*i)}writeBoolean(i){this.writeVarint(+i)}writeString(i){i=String(i),this.realloc(4*i.length),this.pos++;const o=this.pos;this.pos=(function(y,x,w){for(let C,I,z=0;z<x.length;z++){if(C=x.charCodeAt(z),C>55295&&C<57344){if(!I){C>56319||z+1===x.length?(y[w++]=239,y[w++]=191,y[w++]=189):I=C;continue}if(C<56320){y[w++]=239,y[w++]=191,y[w++]=189,I=C;continue}C=I-55296<<10|C-56320|65536,I=null}else I&&(y[w++]=239,y[w++]=191,y[w++]=189,I=null);C<128?y[w++]=C:(C<2048?y[w++]=C>>6|192:(C<65536?y[w++]=C>>12|224:(y[w++]=C>>18|240,y[w++]=C>>12&63|128),y[w++]=C>>6&63|128),y[w++]=63&C|128)}return w})(this.buf,i,this.pos);const d=this.pos-o;d>=128&&Df(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d}writeFloat(i){this.realloc(4),this.dataView.setFloat32(this.pos,i,!0),this.pos+=4}writeDouble(i){this.realloc(8),this.dataView.setFloat64(this.pos,i,!0),this.pos+=8}writeBytes(i){const o=i.length;this.writeVarint(o),this.realloc(o);for(let d=0;d<o;d++)this.buf[this.pos++]=i[d]}writeRawMessage(i,o){this.pos++;const d=this.pos;i(o,this);const y=this.pos-d;y>=128&&Df(d,y,this),this.pos=d-1,this.writeVarint(y),this.pos+=y}writeMessage(i,o,d){this.writeTag(i,2),this.writeRawMessage(o,d)}writePackedVarint(i,o){o.length&&this.writeMessage(i,r0,o)}writePackedSVarint(i,o){o.length&&this.writeMessage(i,Sy,o)}writePackedBoolean(i,o){o.length&&this.writeMessage(i,jf,o)}writePackedFloat(i,o){o.length&&this.writeMessage(i,Py,o)}writePackedDouble(i,o){o.length&&this.writeMessage(i,zf,o)}writePackedFixed32(i,o){o.length&&this.writeMessage(i,Ty,o)}writePackedSFixed32(i,o){o.length&&this.writeMessage(i,Mm,o)}writePackedFixed64(i,o){o.length&&this.writeMessage(i,n0,o)}writePackedSFixed64(i,o){o.length&&this.writeMessage(i,Ay,o)}writeBytesField(i,o){this.writeTag(i,2),this.writeBytes(o)}writeFixed32Field(i,o){this.writeTag(i,5),this.writeFixed32(o)}writeSFixed32Field(i,o){this.writeTag(i,5),this.writeSFixed32(o)}writeFixed64Field(i,o){this.writeTag(i,1),this.writeFixed64(o)}writeSFixed64Field(i,o){this.writeTag(i,1),this.writeSFixed64(o)}writeVarintField(i,o){this.writeTag(i,0),this.writeVarint(o)}writeSVarintField(i,o){this.writeTag(i,0),this.writeSVarint(o)}writeStringField(i,o){this.writeTag(i,2),this.writeString(o)}writeFloatField(i,o){this.writeTag(i,5),this.writeFloat(o)}writeDoubleField(i,o){this.writeTag(i,1),this.writeDouble(o)}writeBooleanField(i,o){this.writeVarintField(i,+o)}}function _h(l,i,o){return o?4294967296*i+(l>>>0):4294967296*(i>>>0)+(l>>>0)}function Df(l,i,o){const d=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));o.realloc(d);for(let y=o.pos-1;y>=l;y--)o.buf[y+d]=o.buf[y]}function r0(l,i){for(let o=0;o<l.length;o++)i.writeVarint(l[o])}function Sy(l,i){for(let o=0;o<l.length;o++)i.writeSVarint(l[o])}function Py(l,i){for(let o=0;o<l.length;o++)i.writeFloat(l[o])}function zf(l,i){for(let o=0;o<l.length;o++)i.writeDouble(l[o])}function jf(l,i){for(let o=0;o<l.length;o++)i.writeBoolean(l[o])}function Ty(l,i){for(let o=0;o<l.length;o++)i.writeFixed32(l[o])}function Mm(l,i){for(let o=0;o<l.length;o++)i.writeSFixed32(l[o])}function n0(l,i){for(let o=0;o<l.length;o++)i.writeFixed64(l[o])}function Ay(l,i){for(let o=0;o<l.length;o++)i.writeSFixed64(l[o])}function km(l,i,o){l===1&&o.readMessage(Lf,i)}function Lf(l,i,o){if(l===3){const{id:d,bitmap:y,width:x,height:w,left:C,top:I,advance:z}=o.readMessage(Im,{});i.push({id:d,bitmap:new si({width:x+6,height:w+6},y),metrics:{width:x,height:w,left:C,top:I,advance:z}})}}function Im(l,i,o){l===1?i.id=o.readVarint():l===2?i.bitmap=o.readBytes():l===3?i.width=o.readVarint():l===4?i.height=o.readVarint():l===5?i.left=o.readSVarint():l===6?i.top=o.readSVarint():l===7&&(i.advance=o.readVarint())}function Pd(l){let i=0,o=0;for(const w of l)i+=w.w*w.h,o=Math.max(o,w.w);l.sort(((w,C)=>C.h-w.h));const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),o),h:1/0}];let y=0,x=0;for(const w of l)for(let C=d.length-1;C>=0;C--){const I=d[C];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,x=Math.max(x,w.y+w.h),y=Math.max(y,w.x+w.w),w.w===I.w&&w.h===I.h){const z=d.pop();z&&C<d.length&&(d[C]=z)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(d.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:y,h:x,fill:i/(y*x)||0}}class Nf{constructor(i,{pixelRatio:o,version:d,stretchX:y,stretchY:x,content:w,textFitWidth:C,textFitHeight:I}){this.paddedRect=i,this.pixelRatio=o,this.stretchX=y,this.stretchY=x,this.content=w,this.version=d,this.textFitWidth=C,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Cy{constructor(i,o){const d={},y={};this.haveRenderCallbacks=[];const x=[];this.addImages(i,d,x),this.addImages(o,y,x);const{w,h:C}=Pd(x),I=new ya({width:w||1,height:C||1});for(const z in i){const N=i[z],V=d[z].paddedRect;ya.copy(N.data,I,{x:0,y:0},{x:V.x+1,y:V.y+1},N.data)}for(const z in o){const N=o[z],V=y[z].paddedRect,Z=V.x+1,Q=V.y+1,te=N.data.width,le=N.data.height;ya.copy(N.data,I,{x:0,y:0},{x:Z,y:Q},N.data),ya.copy(N.data,I,{x:0,y:le-1},{x:Z,y:Q-1},{width:te,height:1}),ya.copy(N.data,I,{x:0,y:0},{x:Z,y:Q+le},{width:te,height:1}),ya.copy(N.data,I,{x:te-1,y:0},{x:Z-1,y:Q},{width:1,height:le}),ya.copy(N.data,I,{x:0,y:0},{x:Z+te,y:Q},{width:1,height:le})}this.image=I,this.iconPositions=d,this.patternPositions=y}addImages(i,o,d){for(const y in i){const x=i[y],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};d.push(w),o[y]=new Nf(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(i,o){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in i.updatedImages)this.patchUpdatedImage(this.iconPositions[d],i.getImage(d),o),this.patchUpdatedImage(this.patternPositions[d],i.getImage(d),o)}patchUpdatedImage(i,o,d){if(!i||!o||i.version===o.version)return;i.version=o.version;const[y,x]=i.tl;d.update(o.data,void 0,{x:y,y:x})}}var Go;At("ImagePosition",Nf),At("ImageAtlas",Cy),p.ao=void 0,(Go=p.ao||(p.ao={}))[Go.none=0]="none",Go[Go.horizontal=1]="horizontal",Go[Go.vertical=2]="vertical",Go[Go.horizontalOnly=3]="horizontalOnly";class Td{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,o,d){const y=new Td;return y.scale=i||1,y.fontStack=o,y.verticalAlign=d||"bottom",y}static forImage(i,o){const d=new Td;return d.imageName=i,d.verticalAlign=o||"bottom",d}}class Rs{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,o){const d=new Rs;for(let y=0;y<i.sections.length;y++){const x=i.sections[y];x.image?d.addImageSection(x):d.addTextSection(x,o)}return d}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=(function(i){let o="";for(let d=0;d<i.length;d++){const y=i.charCodeAt(d+1)||null,x=i.charCodeAt(d-1)||null;o+=y&&cu(y)&&!wo[i[d+1]]||x&&cu(x)&&!wo[i[d-1]]||!wo[i[d]]?i[d]:wo[i[d]]}return o})(this.text)}trim(){let i=0;for(let d=0;d<this.text.length&&bu[this.text.charCodeAt(d)];d++)i++;let o=this.text.length;for(let d=this.text.length-1;d>=0&&d>=i&&bu[this.text.charCodeAt(d)];d--)o--;this.text=this.text.substring(i,o),this.sectionIndex=this.sectionIndex.slice(i,o)}substring(i,o){const d=new Rs;return d.text=this.text.substring(i,o),d.sectionIndex=this.sectionIndex.slice(i,o),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((i,o)=>Math.max(i,this.sections[o].scale)),0)}getMaxImageSize(i){let o=0,d=0;for(let y=0;y<this.length();y++){const x=this.getSection(y);if(x.imageName){const w=i[x.imageName];if(!w)continue;const C=w.displaySize;o=Math.max(o,C[0]),d=Math.max(d,C[1])}}return{maxImageWidth:o,maxImageHeight:d}}addTextSection(i,o){this.text+=i.text,this.sections.push(Td.forText(i.scale,i.fontStack||o,i.verticalAlign));const d=this.sections.length-1;for(let y=0;y<i.text.length;++y)this.sectionIndex.push(d)}addImageSection(i){const o=i.image?i.image.name:"";if(o.length===0)return void rr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Td.forImage(o,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):rr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Bf(l,i,o,d,y,x,w,C,I,z,N,V,Z,Q,te){const le=Rs.fromFeature(l,y);let fe;V===p.ao.vertical&&le.verticalizePunctuation();const{processBidirectionalText:_e,processStyledBidirectionalText:Ue}=da;if(_e&&le.sections.length===1){fe=[];const Ke=_e(le.toString(),Te(le,z,x,i,d,Q));for(const rt of Ke){const mt=new Rs;mt.text=rt,mt.sections=le.sections;for(let It=0;It<rt.length;It++)mt.sectionIndex.push(0);fe.push(mt)}}else if(Ue){fe=[];const Ke=Ue(le.text,le.sectionIndex,Te(le,z,x,i,d,Q));for(const rt of Ke){const mt=new Rs;mt.text=rt[0],mt.sectionIndex=rt[1],mt.sections=le.sections,fe.push(mt)}}else fe=(function(Ke,rt){const mt=[],It=Ke.text;let St=0;for(const Et of rt)mt.push(Ke.substring(St,Et)),St=Et;return St<It.length&&mt.push(Ke.substring(St,It.length)),mt})(le,Te(le,z,x,i,d,Q));const Pe=[],ke={positionedLines:Pe,text:le.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return(function(Ke,rt,mt,It,St,Et,Gt,Ct,Mt,ht,or,hr){let Qt=0,Bt=0,Dr=0,Un=0;const fi=Ct==="right"?1:Ct==="left"?0:.5,ra=$n/hr;let Ho=0;for(const En of St){En.trim();const Pi=En.getMaxScale(),$i={positionedGlyphs:[],lineOffset:0};Ke.positionedLines[Ho]=$i;const Ui=$i.positionedGlyphs;let La=0;if(!En.length()){Bt+=Et,++Ho;continue}const Zo=it(It,En,ra);for(let to=0;to<En.length();to++){const pi=En.getSection(to),Ai=En.getSectionIndex(to),Ci=En.getCharCode(to),li=Tt(Mt,or,Ci);let xn;if(pi.imageName){if(Ke.iconsInText=!0,pi.scale=pi.scale*ra,xn=Nt(pi,li,Pi,Zo,It),!xn)continue;La=Math.max(La,xn.imageOffset)}else if(xn=xt(pi,Ci,li,Zo,rt,mt),!xn)continue;const{rect:wl,metrics:Uf,baselineOffset:Sl}=xn;Ui.push({glyph:Ci,imageName:pi.imageName,x:Qt,y:Bt+Sl+-17,vertical:li,scale:pi.scale,fontStack:pi.fontStack,sectionIndex:Ai,metrics:Uf,rect:wl}),li?(Ke.verticalizable=!0,Qt+=(pi.imageName?Uf.advance:$n)*pi.scale+ht):Qt+=Uf.advance*pi.scale+ht}Ui.length!==0&&(Dr=Math.max(Qt-ht,Dr),Ht(Ui,0,Ui.length-1,fi)),Qt=0,$i.lineOffset=Math.max(La,(Pi-1)*$n);const Ti=Et*Pi+La;Bt+=Ti,Un=Math.max(Ti,Un),++Ho}const{horizontalAlign:eo,verticalAlign:Fi}=ze(Gt);(function(En,Pi,$i,Ui,La,Zo,Ti,to,pi){const Ai=(Pi-$i)*La;let Ci=0;Ci=Zo!==Ti?-to*Ui- -17:-Ui*pi*Ti+.5*Ti;for(const li of En)for(const xn of li.positionedGlyphs)xn.x+=Ai,xn.y+=Ci})(Ke.positionedLines,fi,eo,Fi,Dr,Un,Et,Bt,St.length),Ke.top+=-Fi*Bt,Ke.bottom=Ke.top+Bt,Ke.left+=-eo*Dr,Ke.right=Ke.left+Dr})(ke,i,o,d,fe,w,C,I,V,z,Z,te),!(function(Ke){for(const rt of Ke)if(rt.positionedGlyphs.length!==0)return!1;return!0})(Pe)&&ke}const bu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},h={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},g={40:!0};function S(l,i,o,d,y,x){if(i.imageName){const w=d[i.imageName];return w?w.displaySize[0]*i.scale*$n/x+y:0}{const w=o[i.fontStack],C=w&&w[l];return C?C.metrics.advance*i.scale+y:0}}function k(l,i,o,d){const y=Math.pow(l-i,2);return d?l<i?y/2:2*y:y+Math.abs(o)*o}function B(l,i,o){let d=0;return l===10&&(d-=1e4),o&&(d+=150),l!==40&&l!==65288||(d+=50),i!==41&&i!==65289||(d+=50),d}function q(l,i,o,d,y,x){let w=null,C=k(i,o,y,x);for(const I of d){const z=k(i-I.x,o,y,x)+I.badness;z<=C&&(w=I,C=z)}return{index:l,x:i,priorBreak:w,badness:C}}function se(l){return l?se(l.priorBreak).concat(l.index):[]}function Te(l,i,o,d,y,x){if(!l)return[];const w=[],C=(function(V,Z,Q,te,le,fe){let _e=0;for(let Ue=0;Ue<V.length();Ue++){const Pe=V.getSection(Ue);_e+=S(V.getCharCode(Ue),Pe,te,le,Z,fe)}return _e/Math.max(1,Math.ceil(_e/Q))})(l,i,o,d,y,x),I=l.text.indexOf("​")>=0;let z=0;for(let V=0;V<l.length();V++){const Z=l.getSection(V),Q=l.getCharCode(V);if(bu[Q]||(z+=S(Q,Z,d,y,i,x)),V<l.length()-1){const te=!((N=Q)<11904)&&(!!Ar["CJK Compatibility Forms"](N)||!!Ar["CJK Compatibility"](N)||!!Ar["CJK Strokes"](N)||!!Ar["CJK Symbols and Punctuation"](N)||!!Ar["Enclosed CJK Letters and Months"](N)||!!Ar["Halfwidth and Fullwidth Forms"](N)||!!Ar["Ideographic Description Characters"](N)||!!Ar["Vertical Forms"](N)||ud.test(String.fromCodePoint(N)));(h[Q]||te||Z.imageName||V!==l.length()-2&&g[l.getCharCode(V+1)])&&w.push(q(V+1,z,C,w,B(Q,l.getCharCode(V+1),te&&I),!1))}}var N;return se(q(l.length(),z,C,w,0,!0))}function ze(l){let i=.5,o=.5;switch(l){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:i,verticalAlign:o}}function it(l,i,o){const d=i.getMaxScale()*$n,{maxImageWidth:y,maxImageHeight:x}=i.getMaxImageSize(l),w=Math.max(d,x*o);return{verticalLineContentWidth:Math.max(d,y*o),horizontalLineContentHeight:w}}function bt(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Tt(l,i,o){return!(l===p.ao.horizontal||!i&&!ih(o)||i&&(bu[o]||(d=o,/\p{sc=Arab}/u.test(String.fromCodePoint(d)))));var d}function xt(l,i,o,d,y,x){const w=x[l.fontStack],C=(function(z,N,V,Z){if(z&&z.rect)return z;const Q=N[V.fontStack],te=Q&&Q[Z];return te?{rect:null,metrics:te.metrics}:null})(w&&w[i],y,l,i);if(C===null)return null;let I;if(o)I=d.verticalLineContentWidth-l.scale*$n;else{const z=bt(l.verticalAlign);I=(d.horizontalLineContentHeight-l.scale*$n)*z}return{rect:C.rect,metrics:C.metrics,baselineOffset:I}}function Nt(l,i,o,d,y){const x=y[l.imageName];if(!x)return null;const w=x.paddedRect,C=x.displaySize,I={width:C[0],height:C[1],left:1,top:-3,advance:i?C[1]:C[0]};let z;if(i)z=d.verticalLineContentWidth-C[1]*l.scale;else{const N=bt(l.verticalAlign);z=(d.horizontalLineContentHeight-C[1]*l.scale)*N}return{rect:w,metrics:I,baselineOffset:z,imageOffset:(i?C[0]:C[1])*l.scale-$n*o}}function Ht(l,i,o,d){if(d===0)return;const y=l[o],x=(l[o].x+y.metrics.advance*y.scale)*d;for(let w=i;w<=o;w++)l[w].x-=x}function Xt(l,i,o){const{horizontalAlign:d,verticalAlign:y}=ze(o),x=i[0]-l.displaySize[0]*d,w=i[1]-l.displaySize[1]*y;return{image:l,top:w,bottom:w+l.displaySize[1],left:x,right:x+l.displaySize[0]}}function Hn(l){var i,o;let d=l.left,y=l.top,x=l.right-d,w=l.bottom-y;const C=(i=l.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",I=(o=l.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",z=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(I==="proportional"){if(C==="stretchOnly"&&x/w<z||C==="proportional"){const N=Math.ceil(w*z);d*=N/x,x=N}}else if(C==="proportional"&&I==="stretchOnly"&&z!==0&&x/w>z){const N=Math.ceil(x/z);y*=N/w,w=N}return{x1:d,y1:y,x2:d+x,y2:y+w}}function Je(l,i,o,d,y,x){const w=l.image;let C;if(w.content){const fe=w.content,_e=w.pixelRatio||1;C=[fe[0]/_e,fe[1]/_e,w.displaySize[0]-fe[2]/_e,w.displaySize[1]-fe[3]/_e]}const I=i.left*x,z=i.right*x;let N,V,Z,Q;o==="width"||o==="both"?(Q=y[0]+I-d[3],V=y[0]+z+d[1]):(Q=y[0]+(I+z-w.displaySize[0])/2,V=Q+w.displaySize[0]);const te=i.top*x,le=i.bottom*x;return o==="height"||o==="both"?(N=y[1]+te-d[0],Z=y[1]+le+d[2]):(N=y[1]+(te+le-w.displaySize[1])/2,Z=N+w.displaySize[1]),{image:w,top:N,right:V,bottom:Z,left:Q,collisionPadding:C}}const Fe=128,Qe=32640;function kt(l,i){const{expression:o}=i;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Gr(l+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:y}=o;let x=0;for(;x<d.length&&d[x]<=l;)x++;x=Math.max(0,x-1);let w=x;for(;w<d.length&&d[w]<l+1;)w++;w=Math.min(d.length-1,w);const C=d[x],I=d[w];return o.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:I,interpolationType:y}:{kind:"camera",minZoom:C,maxZoom:I,minSize:o.evaluate(new Gr(C)),maxSize:o.evaluate(new Gr(I)),interpolationType:y}}}function Kt(l,i,o){let d="never";const y=l.get(i);return y?d=y:l.get(o)&&(d="always"),d}const ur=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ar(l,i,o,d,y,x,w,C,I,z,N,V,Z){const Q=C?Math.min(Qe,Math.round(C[0])):0,te=C?Math.min(Qe,Math.round(C[1])):0;l.emplaceBack(i,o,Math.round(32*d),Math.round(32*y),x,w,(Q<<1)+(I?1:0),te,16*z,16*N,256*V,256*Z)}function mr(l,i,o){l.emplaceBack(i.x,i.y,o),l.emplaceBack(i.x,i.y,o),l.emplaceBack(i.x,i.y,o),l.emplaceBack(i.x,i.y,o)}function Si(l){for(const i of l.sections)if(hu(i.text))return!0;return!1}class Wr{constructor(i){this.layoutVertexArray=new Lt,this.indexArray=new Vr,this.programConfigurations=i,this.segments=new Rr,this.dynamicLayoutVertexArray=new vr,this.opacityVertexArray=new Nr,this.hasVisibleVertices=!1,this.placedSymbolArray=new pe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,o,d,y){this.isEmpty()||(d&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,by.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,wy.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,ur,!0),this.opacityVertexBuffer.itemSize=1),(d||y)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}At("SymbolBuffers",Wr);class Ds{constructor(i,o,d){this.layoutVertexArray=new i,this.layoutAttributes=o,this.indexArray=new d,this.segments=new Rr,this.collisionVertexArray=new Qr}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,e0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}At("CollisionBuffers",Ds);class xh{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kt(this.zoom,o["text-size"]),this.iconSizeData=kt(this.zoom,o["icon-size"]);const d=this.layers[0].layout,y=d.get("symbol-sort-key"),x=d.get("symbol-z-order");this.canOverlap=Kt(d,"text-overlap","text-allow-overlap")!=="never"||Kt(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map((w=>p.ao[w]))),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=i.sourceID}createArrays(){this.text=new Wr(new xo(this.layers,this.zoom,(i=>/^text/.test(i)))),this.icon=new Wr(new xo(this.layers,this.zoom,(i=>/^icon/.test(i)))),this.glyphOffsetArray=new we,this.lineVertexArray=new ve,this.symbolInstances=new ye,this.textAnchorOffsets=new Ie}calculateGlyphDependencies(i,o,d,y,x){for(let w=0;w<i.length;w++)if(o[i.charCodeAt(w)]=!0,(d||y)&&x){const C=wo[i.charAt(w)];C&&(o[C.charCodeAt(0)]=!0)}}populate(i,o,d){const y=this.layers[0],x=y.layout,w=x.get("text-font"),C=x.get("text-field"),I=x.get("icon-image"),z=(C.value.kind!=="constant"||C.value.value instanceof Sn&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),N=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=x.get("symbol-sort-key");if(this.features=[],!z&&!N)return;const Z=o.iconDependencies,Q=o.glyphDependencies,te=o.availableImages,le=new Gr(this.zoom);for(const{feature:fe,id:_e,index:Ue,sourceLayerIndex:Pe}of i){const ke=y._featureFilter.needGeometry,Ke=gc(fe,ke);if(!y._featureFilter.filter(le,Ke,d))continue;let rt,mt;if(ke||(Ke.geometry=mc(fe)),z){const St=y.getValueAndResolveTokens("text-field",Ke,d,te),Et=Sn.factory(St),Gt=this.hasRTLText=this.hasRTLText||Si(Et);(!Gt||da.getRTLTextPluginStatus()==="unavailable"||Gt&&da.isParsed())&&(rt=t0(Et,y,Ke))}if(N){const St=y.getValueAndResolveTokens("icon-image",Ke,d,te);mt=St instanceof sa?St:sa.fromString(St)}if(!rt&&!mt)continue;const It=this.sortFeaturesByKey?V.evaluate(Ke,{},d):void 0;if(this.features.push({id:_e,text:rt,icon:mt,index:Ue,sourceLayerIndex:Pe,geometry:Ke.geometry,properties:fe.properties,type:xl.types[fe.type],sortKey:It}),mt&&(Z[mt.name]=!0),rt){const St=w.evaluate(Ke,{},d).join(","),Et=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.ao.vertical)>=0;for(const Gt of rt.sections)if(Gt.image)Z[Gt.image.name]=!0;else{const Ct=lu(rt.toString()),Mt=Gt.fontStack||St,ht=Q[Mt]=Q[Mt]||{};this.calculateGlyphDependencies(Gt.text,ht,Et,this.allowVerticalPlacement,Ct)}}}x.get("symbol-placement")==="line"&&(this.features=(function(fe){const _e={},Ue={},Pe=[];let ke=0;function Ke(St){Pe.push(fe[St]),ke++}function rt(St,Et,Gt){const Ct=Ue[St];return delete Ue[St],Ue[Et]=Ct,Pe[Ct].geometry[0].pop(),Pe[Ct].geometry[0]=Pe[Ct].geometry[0].concat(Gt[0]),Ct}function mt(St,Et,Gt){const Ct=_e[Et];return delete _e[Et],_e[St]=Ct,Pe[Ct].geometry[0].shift(),Pe[Ct].geometry[0]=Gt[0].concat(Pe[Ct].geometry[0]),Ct}function It(St,Et,Gt){const Ct=Gt?Et[0][Et[0].length-1]:Et[0][0];return`${St}:${Ct.x}:${Ct.y}`}for(let St=0;St<fe.length;St++){const Et=fe[St],Gt=Et.geometry,Ct=Et.text?Et.text.toString():null;if(!Ct){Ke(St);continue}const Mt=It(Ct,Gt),ht=It(Ct,Gt,!0);if(Mt in Ue&&ht in _e&&Ue[Mt]!==_e[ht]){const or=mt(Mt,ht,Gt),hr=rt(Mt,ht,Pe[or].geometry);delete _e[Mt],delete Ue[ht],Ue[It(Ct,Pe[hr].geometry,!0)]=hr,Pe[or].geometry=null}else Mt in Ue?rt(Mt,ht,Gt):ht in _e?mt(Mt,ht,Gt):(Ke(St),_e[Mt]=ke-1,Ue[ht]=ke-1)}return Pe.filter((St=>St.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((fe,_e)=>fe.sortKey-_e.sortKey))}update(i,o,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,o,this.layers,{imagePositions:d}),this.icon.programConfigurations.updatePaintArrays(i,o,this.layers,{imagePositions:d}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,o){const d=this.lineVertexArray.length;if(i.segment!==void 0){let y=i.dist(o[i.segment+1]),x=i.dist(o[i.segment]);const w={};for(let C=i.segment+1;C<o.length;C++)w[C]={x:o[C].x,y:o[C].y,tileUnitDistanceFromAnchor:y},C<o.length-1&&(y+=o[C+1].dist(o[C]));for(let C=i.segment||0;C>=0;C--)w[C]={x:o[C].x,y:o[C].y,tileUnitDistanceFromAnchor:x},C>0&&(x+=o[C-1].dist(o[C]));for(let C=0;C<o.length;C++){const I=w[C];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(i,o,d,y,x,w,C,I,z,N,V,Z){const Q=i.indexArray,te=i.layoutVertexArray,le=i.segments.prepareSegment(4*o.length,te,Q,this.canOverlap?w.sortKey:void 0),fe=this.glyphOffsetArray.length,_e=le.vertexLength,Ue=this.allowVerticalPlacement&&C===p.ao.vertical?Math.PI/2:0,Pe=w.text&&w.text.sections;for(let ke=0;ke<o.length;ke++){const{tl:Ke,tr:rt,bl:mt,br:It,tex:St,pixelOffsetTL:Et,pixelOffsetBR:Gt,minFontScaleX:Ct,minFontScaleY:Mt,glyphOffset:ht,isSDF:or,sectionIndex:hr}=o[ke],Qt=le.vertexLength,Bt=ht[1];ar(te,I.x,I.y,Ke.x,Bt+Ke.y,St.x,St.y,d,or,Et.x,Et.y,Ct,Mt),ar(te,I.x,I.y,rt.x,Bt+rt.y,St.x+St.w,St.y,d,or,Gt.x,Et.y,Ct,Mt),ar(te,I.x,I.y,mt.x,Bt+mt.y,St.x,St.y+St.h,d,or,Et.x,Gt.y,Ct,Mt),ar(te,I.x,I.y,It.x,Bt+It.y,St.x+St.w,St.y+St.h,d,or,Gt.x,Gt.y,Ct,Mt),mr(i.dynamicLayoutVertexArray,I,Ue),Q.emplaceBack(Qt,Qt+2,Qt+1),Q.emplaceBack(Qt+1,Qt+2,Qt+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ht[0]),ke!==o.length-1&&hr===o[ke+1].sectionIndex||i.programConfigurations.populatePaintArrays(te.length,w,w.index,{imagePositions:{},canonical:Z,formattedSection:Pe&&Pe[hr]})}i.placedSymbolArray.emplaceBack(I.x,I.y,fe,this.glyphOffsetArray.length-fe,_e,z,N,I.segment,d?d[0]:0,d?d[1]:0,y[0],y[1],C,0,!1,0,V)}_addCollisionDebugVertex(i,o,d,y,x,w){return o.emplaceBack(0,0),i.emplaceBack(d.x,d.y,y,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(i,o,d,y,x,w,C){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),z=I.vertexLength,N=x.layoutVertexArray,V=x.collisionVertexArray,Z=C.anchorX,Q=C.anchorY;this._addCollisionDebugVertex(N,V,w,Z,Q,new P(i,o)),this._addCollisionDebugVertex(N,V,w,Z,Q,new P(d,o)),this._addCollisionDebugVertex(N,V,w,Z,Q,new P(d,y)),this._addCollisionDebugVertex(N,V,w,Z,Q,new P(i,y)),I.vertexLength+=4;const te=x.indexArray;te.emplaceBack(z,z+1),te.emplaceBack(z+1,z+2),te.emplaceBack(z+2,z+3),te.emplaceBack(z+3,z),I.primitiveLength+=4}addDebugCollisionBoxes(i,o,d,y){for(let x=i;x<o;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,y?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ds(dn,Qa.members,fn),this.iconCollisionBox=new Ds(dn,Qa.members,fn);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(i,o,d,y,x,w,C,I,z){const N={};for(let V=o;V<d;V++){const Z=i.get(V);N.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.textFeatureIndex=Z.featureIndex;break}for(let V=y;V<x;V++){const Z=i.get(V);N.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.verticalTextFeatureIndex=Z.featureIndex;break}for(let V=w;V<C;V++){const Z=i.get(V);N.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.iconFeatureIndex=Z.featureIndex;break}for(let V=I;V<z;V++){const Z=i.get(V);N.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.verticalIconFeatureIndex=Z.featureIndex;break}return N}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,o){const d=i.placedSymbolArray.get(o),y=d.vertexStartIndex+4*d.numGlyphs;for(let x=d.vertexStartIndex;x<y;x+=4)i.indexArray.emplaceBack(x,x+2,x+1),i.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(i),d=Math.cos(i),y=[],x=[],w=[];for(let C=0;C<this.symbolInstances.length;++C){w.push(C);const I=this.symbolInstances.get(C);y.push(0|Math.round(o*I.anchorX+d*I.anchorY)),x.push(I.featureIndex)}return w.sort(((C,I)=>y[C]-y[I]||x[I]-x[C])),w}addToSortKeyRanges(i,o){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===o?d.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const d=this.symbolInstances.get(o);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach(((y,x,w)=>{y>=0&&w.indexOf(y)===x&&this.addIndicesForPlacedSymbol(this.text,y)})),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let AP,CP;At("SymbolBucket",xh,{omit:["layers","collisionBoxArray","features","compareText"]}),xh.MAX_GLYPHS=65535,xh.addDynamicAttributes=mr;var i0={get paint(){return CP=CP||new jn({"icon-opacity":new Vt(Be.paint_symbol["icon-opacity"]),"icon-color":new Vt(Be.paint_symbol["icon-color"]),"icon-halo-color":new Vt(Be.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vt(Be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vt(Be.paint_symbol["icon-halo-blur"]),"icon-translate":new jt(Be.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt(Be.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vt(Be.paint_symbol["text-opacity"]),"text-color":new Vt(Be.paint_symbol["text-color"],{runtimeType:ii,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Vt(Be.paint_symbol["text-halo-color"]),"text-halo-width":new Vt(Be.paint_symbol["text-halo-width"]),"text-halo-blur":new Vt(Be.paint_symbol["text-halo-blur"]),"text-translate":new jt(Be.paint_symbol["text-translate"]),"text-translate-anchor":new jt(Be.paint_symbol["text-translate-anchor"])})},get layout(){return AP=AP||new jn({"symbol-placement":new jt(Be.layout_symbol["symbol-placement"]),"symbol-spacing":new jt(Be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt(Be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vt(Be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt(Be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt(Be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jt(Be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jt(Be.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt(Be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt(Be.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vt(Be.layout_symbol["icon-size"]),"icon-text-fit":new jt(Be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt(Be.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vt(Be.layout_symbol["icon-image"]),"icon-rotate":new Vt(Be.layout_symbol["icon-rotate"]),"icon-padding":new Vt(Be.layout_symbol["icon-padding"]),"icon-keep-upright":new jt(Be.layout_symbol["icon-keep-upright"]),"icon-offset":new Vt(Be.layout_symbol["icon-offset"]),"icon-anchor":new Vt(Be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt(Be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt(Be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt(Be.layout_symbol["text-rotation-alignment"]),"text-field":new Vt(Be.layout_symbol["text-field"]),"text-font":new Vt(Be.layout_symbol["text-font"]),"text-size":new Vt(Be.layout_symbol["text-size"]),"text-max-width":new Vt(Be.layout_symbol["text-max-width"]),"text-line-height":new jt(Be.layout_symbol["text-line-height"]),"text-letter-spacing":new Vt(Be.layout_symbol["text-letter-spacing"]),"text-justify":new Vt(Be.layout_symbol["text-justify"]),"text-radial-offset":new Vt(Be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt(Be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Vt(Be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Vt(Be.layout_symbol["text-anchor"]),"text-max-angle":new jt(Be.layout_symbol["text-max-angle"]),"text-writing-mode":new jt(Be.layout_symbol["text-writing-mode"]),"text-rotate":new Vt(Be.layout_symbol["text-rotate"]),"text-padding":new jt(Be.layout_symbol["text-padding"]),"text-keep-upright":new jt(Be.layout_symbol["text-keep-upright"]),"text-transform":new Vt(Be.layout_symbol["text-transform"]),"text-offset":new Vt(Be.layout_symbol["text-offset"]),"text-allow-overlap":new jt(Be.layout_symbol["text-allow-overlap"]),"text-overlap":new jt(Be.layout_symbol["text-overlap"]),"text-ignore-placement":new jt(Be.layout_symbol["text-ignore-placement"]),"text-optional":new jt(Be.layout_symbol["text-optional"])})}};class EP{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Dl,this.defaultValue=i}evaluate(i){if(i.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(i.formattedSection))return o.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}At("FormatSectionOverride",EP,{omit:["defaultValue"]});class Ey extends di{constructor(i,o){super(i,i0,o)}recalculate(i,o){if(super.recalculate(i,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const y=[];for(const x of d)y.indexOf(x)<0&&y.push(x);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,o,d,y){const x=this.layout.get(i).evaluate(o,{},d,y),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||vs(w.value)||!x?x:(function(C,I){return I.replace(/{([^{}]+)}/g,((z,N)=>C&&N in C?String(C[N]):""))})(o.properties,x)}createBucket(i){return new xh(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of i0.paint.overridableProperties){if(!Ey.hasPaintOverride(this.layout,i))continue;const o=this.paint.get(i),d=new EP(o),y=new ec(d,o.property.specification);let x=null;x=o.value.kind==="constant"||o.value.kind==="source"?new Js("source",y):new Qs("composite",y,o.value.zoomStops),this.paint._values[i]=new fa(o.property,x,o.parameters)}}_handleOverridablePaintPropertyUpdate(i,o,d){return!(!this.layout||o.isDataDriven()||d.isDataDriven())&&Ey.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,o){const d=i.get("text-field"),y=i0.paint.properties[o];let x=!1;const w=C=>{for(const I of C)if(y.overrides&&y.overrides.hasOverride(I))return void(x=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Sn)w(d.value.value.sections);else if(d.value.kind==="source"||d.value.kind==="composite"){const C=z=>{x||(z instanceof la&&nr(z.value)===Eo?w(z.value.sections):z instanceof Ws?w(z.sections):z.eachChild(C))},I=d.value;I._styleExpression&&C(I._styleExpression.expression)}return x}}let MP;var M3={get paint(){return MP=MP||new jn({"background-color":new jt(Be.paint_background["background-color"]),"background-pattern":new du(Be.paint_background["background-pattern"]),"background-opacity":new jt(Be.paint_background["background-opacity"])})}};class k3 extends di{constructor(i,o){super(i,M3,o)}}let kP;var I3={get paint(){return kP=kP||new jn({"raster-opacity":new jt(Be.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt(Be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt(Be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt(Be.paint_raster["raster-brightness-max"]),"raster-saturation":new jt(Be.paint_raster["raster-saturation"]),"raster-contrast":new jt(Be.paint_raster["raster-contrast"]),"raster-resampling":new jt(Be.paint_raster["raster-resampling"]),"raster-fade-duration":new jt(Be.paint_raster["raster-fade-duration"])})}};class O3 extends di{constructor(i,o){super(i,I3,o)}}class R3 extends di{constructor(i,o){super(i,{},o),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class D3{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const z3={once:!0},a0=63710088e-1;class bh{constructor(i,o){if(isNaN(i)||isNaN(o))throw new Error(`Invalid LngLat object: (${i}, ${o})`);if(this.lng=+i,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new bh(er(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const o=Math.PI/180,d=this.lat*o,y=i.lat*o,x=Math.sin(d)*Math.sin(y)+Math.cos(d)*Math.cos(y)*Math.cos((i.lng-this.lng)*o);return a0*Math.acos(Math.min(x,1))}static convert(i){if(i instanceof bh)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new bh(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new bh(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const IP=2*Math.PI*a0;function OP(l){return IP*Math.cos(l*Math.PI/180)}function RP(l){return(180+l)/360}function DP(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function zP(l,i){return l/OP(i)}function o0(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function jP(l,i){return l*OP(o0(i))}class Om{constructor(i,o,d=0){this.x=+i,this.y=+o,this.z=+d}static fromLngLat(i,o=0){const d=bh.convert(i);return new Om(RP(d.lng),DP(d.lat),zP(o,d.lat))}toLngLat(){return new bh(360*this.x-180,o0(this.y))}toAltitude(){return jP(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/IP*(i=o0(this.y),1/Math.cos(i*Math.PI/180));var i}}function LP(l,i,o){var d=2*Math.PI*6378137/256/Math.pow(2,o);return[l*d-2*Math.PI*6378137/2,i*d-2*Math.PI*6378137/2]}class s0{constructor(i,o,d){if(!(function(y,x,w){return!(y<0||y>25||w<0||w>=Math.pow(2,y)||x<0||x>=Math.pow(2,y))})(i,o,d))throw new Error(`x=${o}, y=${d}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=o,this.y=d,this.key=Ff(0,i,i,o,d)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,o,d){const y=(w=this.y,C=this.z,I=LP(256*(x=this.x),256*(w=Math.pow(2,C)-w-1),C),z=LP(256*(x+1),256*(w+1),C),I[0]+","+I[1]+","+z[0]+","+z[1]);var x,w,C,I,z;const N=(function(V,Z,Q){let te,le="";for(let fe=V;fe>0;fe--)te=1<<fe-1,le+=(Z&te?1:0)+(Q&te?2:0);return le})(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,y)}isChildOf(i){const o=this.z-i.z;return o>0&&i.x===this.x>>o&&i.y===this.y>>o}getTilePoint(i){const o=Math.pow(2,this.z);return new P((i.x*o-this.x)*tt,(i.y*o-this.y)*tt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class NP{constructor(i,o){this.wrap=i,this.canonical=o,this.key=Ff(i,o.z,o.z,o.x,o.y)}}class Wo{constructor(i,o,d,y,x){if(this.terrainRttPosMatrix32f=null,i<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${d}`);this.overscaledZ=i,this.wrap=o,this.canonical=new s0(d,+y,+x),this.key=Ff(o,i,d,y,x)}clone(){return new Wo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-i;return i>this.canonical.z?new Wo(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wo(i,this.wrap,i,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(i,o){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-i;return i>this.canonical.z?Ff(this.wrap*+o,i,this.canonical.z,this.canonical.x,this.canonical.y):Ff(this.wrap*+o,i,i,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(i){if(i.wrap!==this.wrap||this.overscaledZ-i.overscaledZ<=0)return!1;if(i.overscaledZ===0)return this.overscaledZ>0;const o=this.canonical.z-i.canonical.z;return!(o<0)&&i.canonical.x===this.canonical.x>>o&&i.canonical.y===this.canonical.y>>o}children(i){if(this.overscaledZ>=i)return[new Wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,d=2*this.canonical.x,y=2*this.canonical.y;return[new Wo(o,this.wrap,o,d,y),new Wo(o,this.wrap,o,d+1,y),new Wo(o,this.wrap,o,d,y+1),new Wo(o,this.wrap,o,d+1,y+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Wo(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new NP(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Om(i.x-this.wrap,i.y))}}function Ff(l,i,o,d,y){(l*=2)<0&&(l=-1*l-1);const x=1<<o;return(x*x*l+x*y+d).toString(36)+o.toString(36)+i.toString(36)}function Rm(l,i){return i?l.properties[i]:l.id}At("CanonicalTileID",s0),At("OverscaledTileID",Wo,{omit:["terrainRttPosMatrix32f"]});class Ad{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){const o=new Ad;return o.extend(i(new P(this.minX,this.minY))),o.extend(i(new P(this.maxX,this.minY))),o.extend(i(new P(this.minX,this.maxY))),o.extend(i(new P(this.maxX,this.maxY))),o}static fromPoints(i){const o=new Ad;for(const d of i)o.extend(d);return o}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}class BP{constructor(i){this._stringToNumber={},this._numberToString=[];for(let o=0;o<i.length;o++){const d=i[o];this._stringToNumber[d]=o,this._numberToString[o]=d}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class FP{constructor(i,o,d,y,x){this.type="Feature",this._vectorTileFeature=i,i._z=o,i._x=d,i._y=y,this.properties=i.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(i[o]=this[o]);return i}}class $P{constructor(i,o){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new vo(tt,16,0),this.grid3D=new vo(tt,16,0),this.featureIndexArray=new De,this.promoteId=o}insert(i,o,d,y,x,w){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,y,x);const I=w?this.grid3D:this.grid;for(let z=0;z<o.length;z++){const N=o[z],V=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<N.length;Z++){const Q=N[Z];V[0]=Math.min(V[0],Q.x),V[1]=Math.min(V[1],Q.y),V[2]=Math.max(V[2],Q.x),V[3]=Math.max(V[3],Q.y)}V[0]<tt&&V[1]<tt&&V[2]>=0&&V[3]>=0&&I.insert(C,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sm(new Sd(this.rawTileData)).layers,this.sourceLayerCoder=new BP(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,o,d,y){this.loadVTLayers();const x=i.params,w=tt/i.tileSize/i.scale,C=mo(x.filter,x.globalState),I=i.queryGeometry,z=i.queryPadding*w,N=Ad.fromPoints(I),V=this.grid.query(N.minX-z,N.minY-z,N.maxX+z,N.maxY+z),Z=Ad.fromPoints(i.cameraQueryGeometry).expandBy(z),Q=this.grid3D.query(Z.minX,Z.minY,Z.maxX,Z.maxY,((fe,_e,Ue,Pe)=>(function(ke,Ke,rt,mt,It){for(const Et of ke)if(Ke<=Et.x&&rt<=Et.y&&mt>=Et.x&&It>=Et.y)return!0;const St=[new P(Ke,rt),new P(Ke,It),new P(mt,It),new P(mt,rt)];if(ke.length>2){for(const Et of St)if(mu(ke,Et))return!0}for(let Et=0;Et<ke.length-1;Et++)if(dm(ke[Et],ke[Et+1],St))return!0;return!1})(i.cameraQueryGeometry,fe-z,_e-z,Ue+z,Pe+z)));for(const fe of Q)V.push(fe);V.sort(j3);const te={};let le;for(let fe=0;fe<V.length;fe++){const _e=V[fe];if(_e===le)continue;le=_e;const Ue=this.featureIndexArray.get(_e);let Pe=null;this.loadMatchingFeature(te,Ue.bucketIndex,Ue.sourceLayerIndex,Ue.featureIndex,C,x.layers,x.availableImages,o,d,y,((ke,Ke,rt)=>(Pe||(Pe=mc(ke)),Ke.queryIntersectsFeature({queryGeometry:I,feature:ke,featureState:rt,geometry:Pe,zoom:this.z,transform:i.transform,pixelsToTileUnits:w,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation}))))}return te}loadMatchingFeature(i,o,d,y,x,w,C,I,z,N,V){const Z=this.bucketLayerIDs[o];if(w&&!Z.some((fe=>w.has(fe))))return;const Q=this.sourceLayerCoder.decode(d),te=this.vtLayers[Q].feature(y);if(x.needGeometry){const fe=gc(te,!0);if(!x.filter(new Gr(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!x.filter(new Gr(this.tileID.overscaledZ),te))return;const le=this.getId(te,Q);for(let fe=0;fe<Z.length;fe++){const _e=Z[fe];if(w&&!w.has(_e))continue;const Ue=I[_e];if(!Ue)continue;let Pe={};le&&N&&(Pe=N.getState(Ue.sourceLayer||"_geojsonTileLayer",le));const ke=tr({},z[_e]);ke.paint=UP(ke.paint,Ue.paint,te,Pe,C),ke.layout=UP(ke.layout,Ue.layout,te,Pe,C);const Ke=!V||V(te,Ue,Pe);if(!Ke)continue;const rt=new FP(te,this.z,this.x,this.y,le);rt.layer=ke;let mt=i[_e];mt===void 0&&(mt=i[_e]=[]),mt.push({featureIndex:y,feature:rt,intersectionZ:Ke})}}lookupSymbolFeatures(i,o,d,y,x,w,C,I){const z={};this.loadVTLayers();const N=mo(x.filterSpec,x.globalState);for(const V of i)this.loadMatchingFeature(z,d,y,V,N,w,C,I,o);return z}hasLayer(i){for(const o of this.bucketLayerIDs)for(const d of o)if(i===d)return!0;return!1}getId(i,o){var d;let y=i.id;return this.promoteId&&(y=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof y=="boolean"&&(y=Number(y)),y===void 0&&(!((d=i.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(y=Number(i.properties.cluster_id))),y}}function UP(l,i,o,d,y){return Ft(l,((x,w)=>{const C=i instanceof hl?i.get(w):null;return C&&C.evaluate?C.evaluate(o,d,y):C}))}function j3(l,i){return i-l}function VP(l,i,o,d,y){const x=[];for(let w=0;w<l.length;w++){const C=l[w];let I;for(let z=0;z<C.length-1;z++){let N=C[z],V=C[z+1];N.x<i&&V.x<i||(N.x<i?N=new P(i,N.y+(i-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<i&&(V=new P(i,N.y+(i-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<o&&V.y<o||(N.y<o?N=new P(N.x+(o-N.y)/(V.y-N.y)*(V.x-N.x),o)._round():V.y<o&&(V=new P(N.x+(o-N.y)/(V.y-N.y)*(V.x-N.x),o)._round()),N.x>=d&&V.x>=d||(N.x>=d?N=new P(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=d&&(V=new P(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=y&&V.y>=y||(N.y>=y?N=new P(N.x+(y-N.y)/(V.y-N.y)*(V.x-N.x),y)._round():V.y>=y&&(V=new P(N.x+(y-N.y)/(V.y-N.y)*(V.x-N.x),y)._round()),I&&N.equals(I[I.length-1])||(I=[N],x.push(I)),I.push(V)))))}}return x}At("FeatureIndex",$P,{omit:["rawTileData","sourceLayerCoder"]});class wh extends P{constructor(i,o,d,y){super(i,o),this.angle=d,y!==void 0&&(this.segment=y)}clone(){return new wh(this.x,this.y,this.angle,this.segment)}}function qP(l,i,o,d,y){if(i.segment===void 0||o===0)return!0;let x=i,w=i.segment+1,C=0;for(;C>-o/2;){if(w--,w<0)return!1;C-=l[w].dist(x),x=l[w]}C+=l[w].dist(l[w+1]),w++;const I=[];let z=0;for(;C<o/2;){const N=l[w],V=l[w+1];if(!V)return!1;let Z=l[w-1].angleTo(N)-N.angleTo(V);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:C,angleDelta:Z}),z+=Z;C-I[0].distance>d;)z-=I.shift().angleDelta;if(z>y)return!1;w++,C+=N.dist(V)}return!0}function GP(l){let i=0;for(let o=0;o<l.length-1;o++)i+=l[o].dist(l[o+1]);return i}function WP(l,i,o){return l?.6*i*o:0}function HP(l,i){return Math.max(l?l.right-l.left:0,i?i.right-i.left:0)}function L3(l,i,o,d,y,x){const w=WP(o,y,x),C=HP(o,d)*x;let I=0;const z=GP(l)/2;for(let N=0;N<l.length-1;N++){const V=l[N],Z=l[N+1],Q=V.dist(Z);if(I+Q>z){const te=(z-I)/Q,le=Ga.number(V.x,Z.x,te),fe=Ga.number(V.y,Z.y,te),_e=new wh(le,fe,Z.angleTo(V),N);return _e._round(),!w||qP(l,_e,C,w,i)?_e:void 0}I+=Q}}function N3(l,i,o,d,y,x,w,C,I){const z=WP(d,x,w),N=HP(d,y),V=N*w,Z=l[0].x===0||l[0].x===I||l[0].y===0||l[0].y===I;return i-V<i/4&&(i=V+i/4),ZP(l,Z?i/2*C%i:(N/2+2*x)*w*C%i,i,z,o,V,Z,!1,I)}function ZP(l,i,o,d,y,x,w,C,I){const z=x/2,N=GP(l);let V=0,Z=i-o,Q=[];for(let te=0;te<l.length-1;te++){const le=l[te],fe=l[te+1],_e=le.dist(fe),Ue=fe.angleTo(le);for(;Z+o<V+_e;){Z+=o;const Pe=(Z-V)/_e,ke=Ga.number(le.x,fe.x,Pe),Ke=Ga.number(le.y,fe.y,Pe);if(ke>=0&&ke<I&&Ke>=0&&Ke<I&&Z-z>=0&&Z+z<=N){const rt=new wh(ke,Ke,Ue,te);rt._round(),d&&!qP(l,rt,x,d,y)||Q.push(rt)}}V+=_e}return C||Q.length||w||(Q=ZP(l,V/2,o,d,y,x,w,!0,I)),Q}function XP(l,i,o,d){const y=[],x=l.image,w=x.pixelRatio,C=x.paddedRect.w-2,I=x.paddedRect.h-2;let z={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const N=x.stretchX||[[0,C]],V=x.stretchY||[[0,I]],Z=(ht,or)=>ht+or[1]-or[0],Q=N.reduce(Z,0),te=V.reduce(Z,0),le=C-Q,fe=I-te;let _e=0,Ue=Q,Pe=0,ke=te,Ke=0,rt=le,mt=0,It=fe;if(x.content&&d){const ht=x.content,or=ht[2]-ht[0],hr=ht[3]-ht[1];(x.textFitWidth||x.textFitHeight)&&(z=Hn(l)),_e=My(N,0,ht[0]),Pe=My(V,0,ht[1]),Ue=My(N,ht[0],ht[2]),ke=My(V,ht[1],ht[3]),Ke=ht[0]-_e,mt=ht[1]-Pe,rt=or-Ue,It=hr-ke}const St=z.x1,Et=z.y1,Gt=z.x2-St,Ct=z.y2-Et,Mt=(ht,or,hr,Qt)=>{const Bt=ky(ht.stretch-_e,Ue,Gt,St),Dr=Iy(ht.fixed-Ke,rt,ht.stretch,Q),Un=ky(or.stretch-Pe,ke,Ct,Et),fi=Iy(or.fixed-mt,It,or.stretch,te),ra=ky(hr.stretch-_e,Ue,Gt,St),Ho=Iy(hr.fixed-Ke,rt,hr.stretch,Q),eo=ky(Qt.stretch-Pe,ke,Ct,Et),Fi=Iy(Qt.fixed-mt,It,Qt.stretch,te),En=new P(Bt,Un),Pi=new P(ra,Un),$i=new P(ra,eo),Ui=new P(Bt,eo),La=new P(Dr/w,fi/w),Zo=new P(Ho/w,Fi/w),Ti=i*Math.PI/180;if(Ti){const Ai=Math.sin(Ti),Ci=Math.cos(Ti),li=[Ci,-Ai,Ai,Ci];En._matMult(li),Pi._matMult(li),Ui._matMult(li),$i._matMult(li)}const to=ht.stretch+ht.fixed,pi=or.stretch+or.fixed;return{tl:En,tr:Pi,bl:Ui,br:$i,tex:{x:x.paddedRect.x+1+to,y:x.paddedRect.y+1+pi,w:hr.stretch+hr.fixed-to,h:Qt.stretch+Qt.fixed-pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:La,pixelOffsetBR:Zo,minFontScaleX:rt/w/Gt,minFontScaleY:It/w/Ct,isSDF:o}};if(d&&(x.stretchX||x.stretchY)){const ht=KP(N,le,Q),or=KP(V,fe,te);for(let hr=0;hr<ht.length-1;hr++){const Qt=ht[hr],Bt=ht[hr+1];for(let Dr=0;Dr<or.length-1;Dr++)y.push(Mt(Qt,or[Dr],Bt,or[Dr+1]))}}else y.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:I+1}));return y}function My(l,i,o){let d=0;for(const y of l)d+=Math.max(i,Math.min(o,y[1]))-Math.max(i,Math.min(o,y[0]));return d}function KP(l,i,o){const d=[{fixed:-1,stretch:0}];for(const[y,x]of l){const w=d[d.length-1];d.push({fixed:y-w.stretch,stretch:w.stretch}),d.push({fixed:y-w.stretch,stretch:w.stretch+(x-y)})}return d.push({fixed:i+1,stretch:o}),d}function ky(l,i,o,d){return l/i*o+d}function Iy(l,i,o,d){return l-i*o/d}At("Anchor",wh);class Oy{constructor(i,o,d,y,x,w,C,I,z,N){var V;if(this.boxStartIndex=i.length,z){let Z=w.top,Q=w.bottom;const te=w.collisionPadding;te&&(Z-=te[1],Q+=te[3]);let le=Q-Z;le>0&&(le=Math.max(10,le),this.circleDiameter=le)}else{const Z=!((V=w.image)===null||V===void 0)&&V.content&&(w.image.textFitWidth||w.image.textFitHeight)?Hn(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};Z.y1=Z.y1*C-I[0],Z.y2=Z.y2*C+I[2],Z.x1=Z.x1*C-I[3],Z.x2=Z.x2*C+I[1];const Q=w.collisionPadding;if(Q&&(Z.x1-=Q[0]*C,Z.y1-=Q[1]*C,Z.x2+=Q[2]*C,Z.y2+=Q[3]*C),N){const te=new P(Z.x1,Z.y1),le=new P(Z.x2,Z.y1),fe=new P(Z.x1,Z.y2),_e=new P(Z.x2,Z.y2),Ue=N*Math.PI/180;te._rotate(Ue),le._rotate(Ue),fe._rotate(Ue),_e._rotate(Ue),Z.x1=Math.min(te.x,le.x,fe.x,_e.x),Z.x2=Math.max(te.x,le.x,fe.x,_e.x),Z.y1=Math.min(te.y,le.y,fe.y,_e.y),Z.y2=Math.max(te.y,le.y,fe.y,_e.y)}i.emplaceBack(o.x,o.y,Z.x1,Z.y1,Z.x2,Z.y2,d,y,x)}this.boxEndIndex=i.length}}class B3{constructor(i=[],o=(d,y)=>d<y?-1:d>y?1:0){if(this.data=i,this.length=this.data.length,this.compare=o,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:o,compare:d}=this,y=o[i];for(;i>0;){const x=i-1>>1,w=o[x];if(d(y,w)>=0)break;o[i]=w,i=x}o[i]=y}_down(i){const{data:o,compare:d}=this,y=this.length>>1,x=o[i];for(;i<y;){let w=1+(i<<1);const C=w+1;if(C<this.length&&d(o[C],o[w])<0&&(w=C),d(o[w],x)>=0)break;o[i]=o[w],i=w}o[i]=x}}function F3(l,i=1,o=!1){const d=Ad.fromPoints(l[0]),y=Math.min(d.width(),d.height());let x=y/2;const w=new B3([],$3),{minX:C,minY:I,maxX:z,maxY:N}=d;if(y===0)return new P(C,I);for(let Q=C;Q<z;Q+=y)for(let te=I;te<N;te+=y)w.push(new $f(Q+x,te+x,x,l));let V=(function(Q){let te=0,le=0,fe=0;const _e=Q[0];for(let Ue=0,Pe=_e.length,ke=Pe-1;Ue<Pe;ke=Ue++){const Ke=_e[Ue],rt=_e[ke],mt=Ke.x*rt.y-rt.x*Ke.y;le+=(Ke.x+rt.x)*mt,fe+=(Ke.y+rt.y)*mt,te+=3*mt}return new $f(le/te,fe/te,0,Q)})(l),Z=w.length;for(;w.length;){const Q=w.pop();(Q.d>V.d||!V.d)&&(V=Q,o&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,Z)),Q.max-V.d<=i||(x=Q.h/2,w.push(new $f(Q.p.x-x,Q.p.y-x,x,l)),w.push(new $f(Q.p.x+x,Q.p.y-x,x,l)),w.push(new $f(Q.p.x-x,Q.p.y+x,x,l)),w.push(new $f(Q.p.x+x,Q.p.y+x,x,l)),Z+=4)}return o&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${V.d}`)),V.p}function $3(l,i){return i.max-l.max}function $f(l,i,o,d){this.p=new P(l,i),this.h=o,this.d=(function(y,x){let w=!1,C=1/0;for(let I=0;I<x.length;I++){const z=x[I];for(let N=0,V=z.length,Z=V-1;N<V;Z=N++){const Q=z[N],te=z[Z];Q.y>y.y!=te.y>y.y&&y.x<(te.x-Q.x)*(y.y-Q.y)/(te.y-Q.y)+Q.x&&(w=!w),C=Math.min(C,hm(y,Q,te))}}return(w?1:-1)*Math.sqrt(C)})(this.p,d),this.max=this.d+this.h*Math.SQRT2}var ta;p.aE=void 0,(ta=p.aE||(p.aE={}))[ta.center=1]="center",ta[ta.left=2]="left",ta[ta.right=3]="right",ta[ta.top=4]="top",ta[ta.bottom=5]="bottom",ta[ta["top-left"]=6]="top-left",ta[ta["top-right"]=7]="top-right",ta[ta["bottom-left"]=8]="bottom-left",ta[ta["bottom-right"]=9]="bottom-right";const l0=Number.POSITIVE_INFINITY;function YP(l,i){return i[1]!==l0?(function(o,d,y){let x=0,w=0;switch(d=Math.abs(d),y=Math.abs(y),o){case"top-right":case"top-left":case"top":w=y-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-y}switch(o){case"top-right":case"bottom-right":case"right":x=-d;break;case"top-left":case"bottom-left":case"left":x=d}return[x,w]})(l,i[0],i[1]):(function(o,d){let y=0,x=0;d<0&&(d=0);const w=d/Math.SQRT2;switch(o){case"top-right":case"top-left":x=w-7;break;case"bottom-right":case"bottom-left":x=7-w;break;case"bottom":x=7-d;break;case"top":x=d-7}switch(o){case"top-right":case"bottom-right":y=-w;break;case"top-left":case"bottom-left":y=w;break;case"left":y=d;break;case"right":y=-d}return[y,x]})(l,i[0])}function JP(l,i,o){var d;const y=l.layout,x=(d=y.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(i,{},o);if(x){const C=x.values,I=[];for(let z=0;z<C.length;z+=2){const N=I[z]=C[z],V=C[z+1].map((Z=>Z*$n));N.startsWith("top")?V[1]-=7:N.startsWith("bottom")&&(V[1]+=7),I[z+1]=V}return new Jn(I)}const w=y.get("text-variable-anchor");if(w){let C;C=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(i,{},o)*$n,l0]:y.get("text-offset").evaluate(i,{},o).map((z=>z*$n));const I=[];for(const z of w)I.push(z,YP(z,C));return new Jn(I)}return null}function c0(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function U3(l,i,o,d,y,x,w,C,I,z,N,V){let Z=x.textMaxSize.evaluate(i,{});Z===void 0&&(Z=w);const Q=l.layers[0].layout,te=Q.get("icon-offset").evaluate(i,{},N),le=eT(o.horizontal),fe=w/24,_e=l.tilePixelRatio*fe,Ue=l.tilePixelRatio*Z/24,Pe=l.tilePixelRatio*C,ke=l.tilePixelRatio*Q.get("symbol-spacing"),Ke=Q.get("text-padding")*l.tilePixelRatio,rt=(function(hr,Qt,Bt,Dr=1){const Un=hr.get("icon-padding").evaluate(Qt,{},Bt),fi=Un&&Un.values;return[fi[0]*Dr,fi[1]*Dr,fi[2]*Dr,fi[3]*Dr]})(Q,i,N,l.tilePixelRatio),mt=Q.get("text-max-angle")/180*Math.PI,It=Q.get("text-rotation-alignment")!=="viewport"&&Q.get("symbol-placement")!=="point",St=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Et=Q.get("symbol-placement"),Gt=ke/2,Ct=Q.get("icon-text-fit");let Mt;d&&Ct!=="none"&&(l.allowVerticalPlacement&&o.vertical&&(Mt=Je(d,o.vertical,Ct,Q.get("icon-text-fit-padding"),te,fe)),le&&(d=Je(d,le,Ct,Q.get("icon-text-fit-padding"),te,fe)));const ht=N?V.line.getGranularityForZoomLevel(N.z):1,or=(hr,Qt)=>{Qt.x<0||Qt.x>=tt||Qt.y<0||Qt.y>=tt||(function(Bt,Dr,Un,fi,ra,Ho,eo,Fi,En,Pi,$i,Ui,La,Zo,Ti,to,pi,Ai,Ci,li,xn,wl,Uf,Sl,G3){const Vf=Bt.addToLineVertexArray(Dr,Un);let Cd,qf,Gf,Wf,iT=0,aT=0,oT=0,sT=0,y0=-1,v0=-1;const wu={};let lT=Ts("");if(Bt.allowVerticalPlacement&&fi.vertical){const ba=Fi.layout.get("text-rotate").evaluate(xn,{},Sl)+90;Gf=new Oy(En,Dr,Pi,$i,Ui,fi.vertical,La,Zo,Ti,ba),eo&&(Wf=new Oy(En,Dr,Pi,$i,Ui,eo,pi,Ai,Ti,ba))}if(ra){const ba=Fi.layout.get("icon-rotate").evaluate(xn,{}),Xo=Fi.layout.get("icon-text-fit")!=="none",Ed=XP(ra,ba,Uf,Xo),Tl=eo?XP(eo,ba,Uf,Xo):void 0;qf=new Oy(En,Dr,Pi,$i,Ui,ra,pi,Ai,!1,ba),iT=4*Ed.length;const Md=Bt.iconSizeData;let Pc=null;Md.kind==="source"?(Pc=[Fe*Fi.layout.get("icon-size").evaluate(xn,{})],Pc[0]>Qe&&rr(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Md.kind==="composite"&&(Pc=[Fe*wl.compositeIconSizes[0].evaluate(xn,{},Sl),Fe*wl.compositeIconSizes[1].evaluate(xn,{},Sl)],(Pc[0]>Qe||Pc[1]>Qe)&&rr(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,Ed,Pc,li,Ci,xn,p.ao.none,Dr,Vf.lineStartIndex,Vf.lineLength,-1,Sl),y0=Bt.icon.placedSymbolArray.length-1,Tl&&(aT=4*Tl.length,Bt.addSymbols(Bt.icon,Tl,Pc,li,Ci,xn,p.ao.vertical,Dr,Vf.lineStartIndex,Vf.lineLength,-1,Sl),v0=Bt.icon.placedSymbolArray.length-1)}const cT=Object.keys(fi.horizontal);for(const ba of cT){const Xo=fi.horizontal[ba];if(!Cd){lT=Ts(Xo.text);const Tl=Fi.layout.get("text-rotate").evaluate(xn,{},Sl);Cd=new Oy(En,Dr,Pi,$i,Ui,Xo,La,Zo,Ti,Tl)}const Ed=Xo.positionedLines.length===1;if(oT+=QP(Bt,Dr,Xo,Ho,Fi,Ti,xn,to,Vf,fi.vertical?p.ao.horizontal:p.ao.horizontalOnly,Ed?cT:[ba],wu,y0,wl,Sl),Ed)break}fi.vertical&&(sT+=QP(Bt,Dr,fi.vertical,Ho,Fi,Ti,xn,to,Vf,p.ao.vertical,["vertical"],wu,v0,wl,Sl));const W3=Cd?Cd.boxStartIndex:Bt.collisionBoxArray.length,H3=Cd?Cd.boxEndIndex:Bt.collisionBoxArray.length,Z3=Gf?Gf.boxStartIndex:Bt.collisionBoxArray.length,X3=Gf?Gf.boxEndIndex:Bt.collisionBoxArray.length,K3=qf?qf.boxStartIndex:Bt.collisionBoxArray.length,Y3=qf?qf.boxEndIndex:Bt.collisionBoxArray.length,J3=Wf?Wf.boxStartIndex:Bt.collisionBoxArray.length,Q3=Wf?Wf.boxEndIndex:Bt.collisionBoxArray.length;let Pl=-1;const Dy=(ba,Xo)=>ba&&ba.circleDiameter?Math.max(ba.circleDiameter,Xo):Xo;Pl=Dy(Cd,Pl),Pl=Dy(Gf,Pl),Pl=Dy(qf,Pl),Pl=Dy(Wf,Pl);const uT=Pl>-1?1:0;uT&&(Pl*=G3/$n),Bt.glyphOffsetArray.length>=xh.MAX_GLYPHS&&rr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xn.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,xn.sortKey);const eL=JP(Fi,xn,Sl),[tL,rL]=(function(ba,Xo){const Ed=ba.length,Tl=Xo?.values;if(Tl?.length>0)for(let Md=0;Md<Tl.length;Md+=2){const Pc=Tl[Md+1];ba.emplaceBack(p.aE[Tl[Md]],Pc[0],Pc[1])}return[Ed,ba.length]})(Bt.textAnchorOffsets,eL);Bt.symbolInstances.emplaceBack(Dr.x,Dr.y,wu.right>=0?wu.right:-1,wu.center>=0?wu.center:-1,wu.left>=0?wu.left:-1,wu.vertical||-1,y0,v0,lT,W3,H3,Z3,X3,K3,Y3,J3,Q3,Pi,oT,sT,iT,aT,uT,0,La,Pl,tL,rL)})(l,Qt,hr,o,d,y,Mt,l.layers[0],l.collisionBoxArray,i.index,i.sourceLayerIndex,l.index,_e,[Ke,Ke,Ke,Ke],It,I,Pe,rt,St,te,i,x,z,N,w)};if(Et==="line")for(const hr of VP(i.geometry,0,0,tt,tt)){const Qt=vl(hr,ht),Bt=N3(Qt,ke,mt,o.vertical||le,d,24,Ue,l.overscaling,tt);for(const Dr of Bt)le&&V3(l,le.text,Gt,Dr)||or(Qt,Dr)}else if(Et==="line-center"){for(const hr of i.geometry)if(hr.length>1){const Qt=vl(hr,ht),Bt=L3(Qt,mt,o.vertical||le,d,24,Ue);Bt&&or(Qt,Bt)}}else if(i.type==="Polygon")for(const hr of Hl(i.geometry,0)){const Qt=F3(hr,16);or(vl(hr[0],ht,!0),new wh(Qt.x,Qt.y,0))}else if(i.type==="LineString")for(const hr of i.geometry){const Qt=vl(hr,ht);or(Qt,new wh(Qt[0].x,Qt[0].y,0))}else if(i.type==="Point")for(const hr of i.geometry)for(const Qt of hr)or([Qt],new wh(Qt.x,Qt.y,0))}function QP(l,i,o,d,y,x,w,C,I,z,N,V,Z,Q,te){const le=(function(Ue,Pe,ke,Ke,rt,mt,It,St){const Et=Ke.layout.get("text-rotate").evaluate(mt,{})*Math.PI/180,Gt=[];for(const Ct of Pe.positionedLines)for(const Mt of Ct.positionedGlyphs){if(!Mt.rect)continue;const ht=Mt.rect||{};let or=4,hr=!0,Qt=1,Bt=0;const Dr=(rt||St)&&Mt.vertical,Un=Mt.metrics.advance*Mt.scale/2;if(St&&Pe.verticalizable&&(Bt=Ct.lineOffset/2-(Mt.imageName?-($n-Mt.metrics.width*Mt.scale)/2:(Mt.scale-1)*$n)),Mt.imageName){const Ai=It[Mt.imageName];hr=Ai.sdf,Qt=Ai.pixelRatio,or=1/Qt}const fi=rt?[Mt.x+Un,Mt.y]:[0,0];let ra=rt?[0,0]:[Mt.x+Un+ke[0],Mt.y+ke[1]-Bt],Ho=[0,0];Dr&&(Ho=ra,ra=[0,0]);const eo=Mt.metrics.isDoubleResolution?2:1,Fi=(Mt.metrics.left-or)*Mt.scale-Un+ra[0],En=(-Mt.metrics.top-or)*Mt.scale+ra[1],Pi=Fi+ht.w/eo*Mt.scale/Qt,$i=En+ht.h/eo*Mt.scale/Qt,Ui=new P(Fi,En),La=new P(Pi,En),Zo=new P(Fi,$i),Ti=new P(Pi,$i);if(Dr){const Ai=new P(-Un,Un- -17),Ci=-Math.PI/2,li=12-Un,xn=new P(22-li,-(Mt.imageName?li:0)),wl=new P(...Ho);Ui._rotateAround(Ci,Ai)._add(xn)._add(wl),La._rotateAround(Ci,Ai)._add(xn)._add(wl),Zo._rotateAround(Ci,Ai)._add(xn)._add(wl),Ti._rotateAround(Ci,Ai)._add(xn)._add(wl)}if(Et){const Ai=Math.sin(Et),Ci=Math.cos(Et),li=[Ci,-Ai,Ai,Ci];Ui._matMult(li),La._matMult(li),Zo._matMult(li),Ti._matMult(li)}const to=new P(0,0),pi=new P(0,0);Gt.push({tl:Ui,tr:La,bl:Zo,br:Ti,tex:ht,writingMode:Pe.writingMode,glyphOffset:fi,sectionIndex:Mt.sectionIndex,isSDF:hr,pixelOffsetTL:to,pixelOffsetBR:pi,minFontScaleX:0,minFontScaleY:0})}return Gt})(0,o,C,y,x,w,d,l.allowVerticalPlacement),fe=l.textSizeData;let _e=null;fe.kind==="source"?(_e=[Fe*y.layout.get("text-size").evaluate(w,{})],_e[0]>Qe&&rr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):fe.kind==="composite"&&(_e=[Fe*Q.compositeTextSizes[0].evaluate(w,{},te),Fe*Q.compositeTextSizes[1].evaluate(w,{},te)],(_e[0]>Qe||_e[1]>Qe)&&rr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,le,_e,C,x,w,z,i,I.lineStartIndex,I.lineLength,Z,te);for(const Ue of N)V[Ue]=l.text.placedSymbolArray.length-1;return 4*le.length}function eT(l){for(const i in l)return l[i];return null}function V3(l,i,o,d){const y=l.compareText;if(i in y){const x=y[i];for(let w=x.length-1;w>=0;w--)if(d.dist(x[w])<o)return!0}else y[i]=[];return y[i].push(d),!1}const tT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class u0{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,d]=new Uint8Array(i,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=d>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const x=tT[15&d];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(i,2,1),[C]=new Uint32Array(i,4,1);return new u0(C,w,x,i)}constructor(i,o=64,d=Float64Array,y){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=d,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const x=tT.indexOf(this.ArrayType),w=2*i*this.ArrayType.BYTES_PER_ELEMENT,C=i*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-C%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${d}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+C+I,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+w+C+I),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+C+I,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=i)}add(i,o){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=i,this.coords[this._pos++]=o,d}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return h0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,o,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:C}=this,I=[0,x.length-1,0],z=[];for(;I.length;){const N=I.pop()||0,V=I.pop()||0,Z=I.pop()||0;if(V-Z<=C){for(let fe=Z;fe<=V;fe++){const _e=w[2*fe],Ue=w[2*fe+1];_e>=i&&_e<=d&&Ue>=o&&Ue<=y&&z.push(x[fe])}continue}const Q=Z+V>>1,te=w[2*Q],le=w[2*Q+1];te>=i&&te<=d&&le>=o&&le<=y&&z.push(x[Q]),(N===0?i<=te:o<=le)&&(I.push(Z),I.push(Q-1),I.push(1-N)),(N===0?d>=te:y>=le)&&(I.push(Q+1),I.push(V),I.push(1-N))}return z}within(i,o,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:w}=this,C=[0,y.length-1,0],I=[],z=d*d;for(;C.length;){const N=C.pop()||0,V=C.pop()||0,Z=C.pop()||0;if(V-Z<=w){for(let fe=Z;fe<=V;fe++)nT(x[2*fe],x[2*fe+1],i,o)<=z&&I.push(y[fe]);continue}const Q=Z+V>>1,te=x[2*Q],le=x[2*Q+1];nT(te,le,i,o)<=z&&I.push(y[Q]),(N===0?i-d<=te:o-d<=le)&&(C.push(Z),C.push(Q-1),C.push(1-N)),(N===0?i+d>=te:o+d>=le)&&(C.push(Q+1),C.push(V),C.push(1-N))}return I}}function h0(l,i,o,d,y,x){if(y-d<=o)return;const w=d+y>>1;rT(l,i,w,d,y,x),h0(l,i,o,d,w-1,1-x),h0(l,i,o,w+1,y,1-x)}function rT(l,i,o,d,y,x){for(;y>d;){if(y-d>600){const z=y-d+1,N=o-d+1,V=Math.log(z),Z=.5*Math.exp(2*V/3),Q=.5*Math.sqrt(V*Z*(z-Z)/z)*(N-z/2<0?-1:1);rT(l,i,o,Math.max(d,Math.floor(o-N*Z/z+Q)),Math.min(y,Math.floor(o+(z-N)*Z/z+Q)),x)}const w=i[2*o+x];let C=d,I=y;for(Dm(l,i,d,o),i[2*y+x]>w&&Dm(l,i,d,y);C<I;){for(Dm(l,i,C,I),C++,I--;i[2*C+x]<w;)C++;for(;i[2*I+x]>w;)I--}i[2*d+x]===w?Dm(l,i,d,I):(I++,Dm(l,i,I,y)),I<=o&&(d=I+1),o<=I&&(y=I-1)}}function Dm(l,i,o,d){d0(l,o,d),d0(i,2*o,2*d),d0(i,2*o+1,2*d+1)}function d0(l,i,o){const d=l[i];l[i]=l[o],l[o]=d}function nT(l,i,o,d){const y=l-o,x=i-d;return y*y+x*x}var f0;p.cx=void 0,(f0=p.cx||(p.cx={})).create="create",f0.load="load",f0.fullLoad="fullLoad";let Ry=null,zm=[];const p0=1e3/60,m0="loadTime",g0="fullLoadTime",q3={mark(l){performance.mark(l)},frame(l){const i=l;Ry!=null&&zm.push(i-Ry),Ry=i},clearMetrics(){Ry=null,zm=[],performance.clearMeasures(m0),performance.clearMeasures(g0);for(const l in p.cx)performance.clearMarks(p.cx[l])},getPerformanceMetrics(){performance.measure(m0,p.cx.create,p.cx.load),performance.measure(g0,p.cx.create,p.cx.fullLoad);const l=performance.getEntriesByName(m0)[0].duration,i=performance.getEntriesByName(g0)[0].duration,o=zm.length,d=1/(zm.reduce(((x,w)=>x+w),0)/o/1e3),y=zm.filter((x=>x>p0)).reduce(((x,w)=>x+(w-p0)/p0),0);return{loadTime:l,fullLoadTime:i,fps:d,percentDroppedFrames:y/(o+y)*100,totalFrames:o}}};p.$=tt,p.A=ee,p.B=function([l,i,o]){return i+=90,i*=Math.PI/180,o*=Math.PI/180,{x:l*Math.cos(i)*Math.sin(o),y:l*Math.sin(i)*Math.sin(o),z:l*Math.cos(o)}},p.C=Ga,p.D=jt,p.E=zt,p.F=Gr,p.G=sm,p.H=function(l){if(vn==null){const i=l.navigator?l.navigator.userAgent:null;vn=!!l.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return vn},p.I=Nf,p.J=class{constructor(l,i){this.target=l,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new D3((()=>this.process())),this.subscription=oa(this.target,"message",(o=>this.receive(o)),!1),this.globalScope=Hr(self)?l:window}registerMessageHandler(l,i){this.messageHandlers[l]=i}sendAsync(l,i){return new Promise(((o,d)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=i?oa(i.signal,"abort",(()=>{x?.unsubscribe(),delete this.resolveRejects[y];const I={id:y,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),z3):null;this.resolveRejects[y]={resolve:I=>{x?.unsubscribe(),o(I)},reject:I=>{x?.unsubscribe(),d(I)}};const w=[],C=Object.assign(Object.assign({},l),{id:y,sourceMapId:this.mapId,origin:location.origin,data:Di(l.data,w)});this.target.postMessage(C,{transfer:w})}))}receive(l){const i=l.data,o=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[o];const d=this.abortControllers[o];return delete this.abortControllers[o],void(d&&d.abort())}if(Hr(self)||i.mustQueue)return this.tasks[o]=i,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,i)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),i=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(l,i)}processTask(l,i){return s(this,void 0,void 0,(function*(){if(i.type==="<response>"){const y=this.resolveRejects[l];return delete this.resolveRejects[l],y?void(i.error?y.reject(ka(i.error)):y.resolve(ka(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=ka(i.data),d=new AbortController;this.abortControllers[l]=d;try{const y=yield this.messageHandlers[i.type](i.sourceMapId,o,d);this.completeTask(l,null,y)}catch(y){this.completeTask(l,y)}}))}completeTask(l,i,o){const d=[];delete this.abortControllers[l];const y={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Di(i):null,data:Di(o,d)};this.target.postMessage(y,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.K=de,p.L=function(){var l=new ee(16);return ee!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},p.M=function(l,i,o){var d,y,x,w,C,I,z,N,V,Z,Q,te,le=o[0],fe=o[1],_e=o[2];return i===l?(l[12]=i[0]*le+i[4]*fe+i[8]*_e+i[12],l[13]=i[1]*le+i[5]*fe+i[9]*_e+i[13],l[14]=i[2]*le+i[6]*fe+i[10]*_e+i[14],l[15]=i[3]*le+i[7]*fe+i[11]*_e+i[15]):(y=i[1],x=i[2],w=i[3],C=i[4],I=i[5],z=i[6],N=i[7],V=i[8],Z=i[9],Q=i[10],te=i[11],l[0]=d=i[0],l[1]=y,l[2]=x,l[3]=w,l[4]=C,l[5]=I,l[6]=z,l[7]=N,l[8]=V,l[9]=Z,l[10]=Q,l[11]=te,l[12]=d*le+C*fe+V*_e+i[12],l[13]=y*le+I*fe+Z*_e+i[13],l[14]=x*le+z*fe+Q*_e+i[14],l[15]=w*le+N*fe+te*_e+i[15]),l},p.N=function(l,i,o){var d=o[0],y=o[1],x=o[2];return l[0]=i[0]*d,l[1]=i[1]*d,l[2]=i[2]*d,l[3]=i[3]*d,l[4]=i[4]*y,l[5]=i[5]*y,l[6]=i[6]*y,l[7]=i[7]*y,l[8]=i[8]*x,l[9]=i[9]*x,l[10]=i[10]*x,l[11]=i[11]*x,l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15],l},p.O=function(l,i,o){var d=i[0],y=i[1],x=i[2],w=i[3],C=i[4],I=i[5],z=i[6],N=i[7],V=i[8],Z=i[9],Q=i[10],te=i[11],le=i[12],fe=i[13],_e=i[14],Ue=i[15],Pe=o[0],ke=o[1],Ke=o[2],rt=o[3];return l[0]=Pe*d+ke*C+Ke*V+rt*le,l[1]=Pe*y+ke*I+Ke*Z+rt*fe,l[2]=Pe*x+ke*z+Ke*Q+rt*_e,l[3]=Pe*w+ke*N+Ke*te+rt*Ue,l[4]=(Pe=o[4])*d+(ke=o[5])*C+(Ke=o[6])*V+(rt=o[7])*le,l[5]=Pe*y+ke*I+Ke*Z+rt*fe,l[6]=Pe*x+ke*z+Ke*Q+rt*_e,l[7]=Pe*w+ke*N+Ke*te+rt*Ue,l[8]=(Pe=o[8])*d+(ke=o[9])*C+(Ke=o[10])*V+(rt=o[11])*le,l[9]=Pe*y+ke*I+Ke*Z+rt*fe,l[10]=Pe*x+ke*z+Ke*Q+rt*_e,l[11]=Pe*w+ke*N+Ke*te+rt*Ue,l[12]=(Pe=o[12])*d+(ke=o[13])*C+(Ke=o[14])*V+(rt=o[15])*le,l[13]=Pe*y+ke*I+Ke*Z+rt*fe,l[14]=Pe*x+ke*z+Ke*Q+rt*_e,l[15]=Pe*w+ke*N+Ke*te+rt*Ue,l},p.P=P,p.Q=function(l,i){const o={};for(let d=0;d<i.length;d++){const y=i[d];y in l&&(o[y]=l[y])}return o},p.R=ya,p.S=bh,p.T=_m,p.U=DP,p.V=RP,p.W=$,p.X=K,p.Y=ki,p.Z=Wo,p._=s,p.a=ie,p.a$=Ye,p.a0=function(l,i){var o,d,y,x,w;if(!l)return i??{};if(!i)return l;let C=Object.assign({},l);if(i.removeAll&&(C={removeAll:!0}),i.remove){const I=new Set(i.remove);C.add&&(C.add=C.add.filter((N=>!I.has(N.id)))),C.update&&(C.update=C.update.filter((N=>!I.has(N.id))));const z=new Set(((o=l.add)!==null&&o!==void 0?o:[]).map((N=>N.id)));i.remove=i.remove.filter((N=>!z.has(N)))}if(i.remove){const I=new Set(C.remove?C.remove.concat(i.remove):i.remove);C.remove=Array.from(I.values())}if(i.add){const I=C.add?C.add.concat(i.add):i.add,z=new Map(I.map((N=>[N.id,N])));C.add=Array.from(z.values())}if(i.update){const I=new Map((d=C.update)===null||d===void 0?void 0:d.map((z=>[z.id,z])));for(const z of i.update){const N=(y=I.get(z.id))!==null&&y!==void 0?y:{id:z.id};z.newGeometry&&(N.newGeometry=z.newGeometry),z.addOrUpdateProperties&&(N.addOrUpdateProperties=((x=N.addOrUpdateProperties)!==null&&x!==void 0?x:[]).concat(z.addOrUpdateProperties)),z.removeProperties&&(N.removeProperties=((w=N.removeProperties)!==null&&w!==void 0?w:[]).concat(z.removeProperties)),z.removeAllProperties&&(N.removeAllProperties=!0),I.set(z.id,N)}C.update=Array.from(I.values())}return C.remove&&C.add&&(C.remove=C.remove.filter((I=>C.add.findIndex((z=>z.id===I))===-1))),C},p.a1=Om,p.a2=Ad,p.a3=25,p.a4=s0,p.a5=l=>{const i=window.document.createElement("video");return i.muted=!0,new Promise((o=>{i.onloadstart=()=>{o(i)};for(const d of l){const y=window.document.createElement("source");Xe(d)||(i.crossOrigin="Anonymous"),y.src=d,i.appendChild(y)}}))},p.a6=_t,p.a7=function(){return vt++},p.a8=ne,p.a9=xh,p.aA=function(l){let i=1/0,o=1/0,d=-1/0,y=-1/0;for(const x of l)i=Math.min(i,x.x),o=Math.min(o,x.y),d=Math.max(d,x.x),y=Math.max(y,x.y);return[i,o,d,y]},p.aB=$n,p.aC=ut,p.aD=function(l,i,o,d,y=!1){if(!o[0]&&!o[1])return[0,0];const x=y?d==="map"?-l.bearingInRadians:0:d==="viewport"?l.bearingInRadians:0;if(x){const w=Math.sin(x),C=Math.cos(x);o=[o[0]*C-o[1]*w,o[0]*w+o[1]*C]}return[y?o[0]:ut(i,o[0],l.zoom),y?o[1]:ut(i,o[1],l.zoom)]},p.aF=Kt,p.aG=c0,p.aH=ze,p.aI=u0,p.aJ=Jr,p.aK=ks,p.aL=Ze,p.aM=Rr,p.aN=Vr,p.aO=er,p.aP=Pa,p.aQ=jP,p.aR=We,p.aS=Oe,p.aT=function(l){var i=new ee(3);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i},p.aU=function(l,i,o){return l[0]=i[0]-o[0],l[1]=i[1]-o[1],l[2]=i[2]-o[2],l},p.aV=function(l,i){var o=i[0],d=i[1],y=i[2],x=o*o+d*d+y*y;return x>0&&(x=1/Math.sqrt(x)),l[0]=i[0]*x,l[1]=i[1]*x,l[2]=i[2]*x,l},p.aW=Re,p.aX=function(l,i){return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]},p.aY=function(l,i,o){return l[0]=i[0]*o[0],l[1]=i[1]*o[1],l[2]=i[2]*o[2],l[3]=i[3]*o[3],l},p.aZ=ue,p.a_=function(l,i,o){const d=i[0]*o[0]+i[1]*o[1]+i[2]*o[2];return d===0?null:(-(l[0]*o[0]+l[1]*o[1]+l[2]*o[2])-o[3])/d},p.aa=mo,p.ab=gc,p.ac=FP,p.ad=function(l){const i={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((o,d,y,x)=>{const w=y||x;return i[d]=!w||w.toLowerCase(),""})),i["max-age"]){const o=parseInt(i["max-age"],10);isNaN(o)?delete i["max-age"]:i["max-age"]=o}return i},p.ae=Fa,p.af=function(l){return Math.pow(2,l)},p.ag=Y,p.ah=Wt,p.ai=85.051129,p.aj=zP,p.ak=function(l){return Math.log(l)/Math.LN2},p.al=function(l){var i=l[0],o=l[1];return i*i+o*o},p.am=function(l,i){const o=[];for(const d in l)d in i||o.push(d);return o},p.an=function(l,i){let o=0,d=0;if(l.kind==="constant")d=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:y,minZoom:x,maxZoom:w}=l,C=y?Wt(zn.interpolationFactor(y,i,x,w),0,1):0;l.kind==="camera"?d=Ga.number(l.minSize,l.maxSize,C):o=C}return{uSizeT:o,uSize:d}},p.ap=function(l,{uSize:i,uSizeT:o},{lowerSize:d,upperSize:y}){return l.kind==="source"?d/Fe:l.kind==="composite"?Ga.number(d/Fe,y/Fe,o):i},p.aq=function(l,i){var o=i[0],d=i[1],y=i[2],x=i[3],w=i[4],C=i[5],I=i[6],z=i[7],N=i[8],V=i[9],Z=i[10],Q=i[11],te=i[12],le=i[13],fe=i[14],_e=i[15],Ue=o*C-d*w,Pe=o*I-y*w,ke=o*z-x*w,Ke=d*I-y*C,rt=d*z-x*C,mt=y*z-x*I,It=N*le-V*te,St=N*fe-Z*te,Et=N*_e-Q*te,Gt=V*fe-Z*le,Ct=V*_e-Q*le,Mt=Z*_e-Q*fe,ht=Ue*Mt-Pe*Ct+ke*Gt+Ke*Et-rt*St+mt*It;return ht?(l[0]=(C*Mt-I*Ct+z*Gt)*(ht=1/ht),l[1]=(y*Ct-d*Mt-x*Gt)*ht,l[2]=(le*mt-fe*rt+_e*Ke)*ht,l[3]=(Z*rt-V*mt-Q*Ke)*ht,l[4]=(I*Et-w*Mt-z*St)*ht,l[5]=(o*Mt-y*Et+x*St)*ht,l[6]=(fe*ke-te*mt-_e*Pe)*ht,l[7]=(N*mt-Z*ke+Q*Pe)*ht,l[8]=(w*Ct-C*Et+z*It)*ht,l[9]=(d*Et-o*Ct-x*It)*ht,l[10]=(te*rt-le*ke+_e*Ue)*ht,l[11]=(V*ke-N*rt-Q*Ue)*ht,l[12]=(C*St-w*Gt-I*It)*ht,l[13]=(o*Gt-d*St+y*It)*ht,l[14]=(le*Pe-te*Ke-fe*Ue)*ht,l[15]=(N*Ke-V*Pe+Z*Ue)*ht,l):null},p.ar=lt,p.as=function(l){var i=l[0],o=l[1];return Math.sqrt(i*i+o*o)},p.at=function(l){return l[0]=0,l[1]=0,l},p.au=function(l,i,o){return l[0]=i[0]*o,l[1]=i[1]*o,l},p.av=mr,p.aw=ot,p.ax=function(l,i,o,d){const y=i.y-l.y,x=i.x-l.x,w=d.y-o.y,C=d.x-o.x,I=w*x-C*y;if(I===0)return null;const z=(C*(l.y-o.y)-w*(l.x-o.x))/I;return new P(l.x+z*x,l.y+z*y)},p.ay=VP,p.az=ty,p.b=qn,p.b$=class extends c{},p.b0=function(l,i,o){return l[0]=i[0]*o,l[1]=i[1]*o,l[2]=i[2]*o,l[3]=i[3]*o,l},p.b1=function(l,i){return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]+l[3]},p.b2=NP,p.b3=Ff,p.b4=function(l,i,o,d,y){var x=1/Math.tan(i/2);if(l[0]=x/o,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=x,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,y!=null&&y!==1/0){var w=1/(d-y);l[10]=(y+d)*w,l[14]=2*y*d*w}else l[10]=-1,l[14]=-2*d;return l},p.b5=function(l){var i=new ee(16);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],i[9]=l[9],i[10]=l[10],i[11]=l[11],i[12]=l[12],i[13]=l[13],i[14]=l[14],i[15]=l[15],i},p.b6=function(l,i,o){var d=Math.sin(o),y=Math.cos(o),x=i[0],w=i[1],C=i[2],I=i[3],z=i[4],N=i[5],V=i[6],Z=i[7];return i!==l&&(l[8]=i[8],l[9]=i[9],l[10]=i[10],l[11]=i[11],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=x*y+z*d,l[1]=w*y+N*d,l[2]=C*y+V*d,l[3]=I*y+Z*d,l[4]=z*y-x*d,l[5]=N*y-w*d,l[6]=V*y-C*d,l[7]=Z*y-I*d,l},p.b7=function(l,i,o){var d=Math.sin(o),y=Math.cos(o),x=i[4],w=i[5],C=i[6],I=i[7],z=i[8],N=i[9],V=i[10],Z=i[11];return i!==l&&(l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[4]=x*y+z*d,l[5]=w*y+N*d,l[6]=C*y+V*d,l[7]=I*y+Z*d,l[8]=z*y-x*d,l[9]=N*y-w*d,l[10]=V*y-C*d,l[11]=Z*y-I*d,l},p.b8=function(){const l=new Float32Array(16);return Y(l),l},p.b9=function(){const l=new Float64Array(16);return Y(l),l},p.bA=function(l,i){const o=Ce(l,360),d=Ce(i,360),y=d-o,x=d>o?y-360:y+360;return Math.abs(y)<Math.abs(x)?y:x},p.bB=function(l){return l[0]=0,l[1]=0,l[2]=0,l},p.bC=function(l,i,o,d){const y=Math.sqrt(l*l+i*i),x=Math.sqrt(o*o+d*d);l/=y,i/=y,o/=x,d/=x;const w=Math.acos(l*o+i*d);return-i*o+l*d>0?w:-w},p.bD=function(l,i){const o=Ce(l,2*Math.PI),d=Ce(i,2*Math.PI);return Math.min(Math.abs(o-d),Math.abs(o-d+2*Math.PI),Math.abs(o-d-2*Math.PI))},p.bE=function(){const l={},i=Be.$version;for(const o in Be.$root){const d=Be.$root[o];if(d.required){let y=null;y=o==="version"?i:d.type==="array"?[]:{},y!=null&&(l[o]=y)}}return l},p.bF=nh,p.bG=Ee,p.bH=function l(i,o){if(Array.isArray(i)){if(!Array.isArray(o)||i.length!==o.length)return!1;for(let d=0;d<i.length;d++)if(!l(i[d],o[d]))return!1;return!0}if(typeof i=="object"&&i!==null&&o!==null){if(typeof o!="object"||Object.keys(i).length!==Object.keys(o).length)return!1;for(const d in i)if(!l(i[d],o[d]))return!1;return!0}return i===o},p.bI=function(l){l=l.slice();const i=Object.create(null);for(let o=0;o<l.length;o++)i[l[o].id]=l[o];for(let o=0;o<l.length;o++)"ref"in l[o]&&(l[o]=Cr(l[o],i[l[o].ref]));return l},p.bJ=function(l,i){if(l.type==="custom")return new R3(l,i);switch(l.type){case"background":return new k3(l,i);case"circle":return new gl(l,i);case"color-relief":return new xm(l,i);case"fill":return new Ef(l,i);case"fill-extrusion":return new yy(l,i);case"heatmap":return new ea(l,i);case"hillshade":return new ph(l,i);case"line":return new Q_(l,i);case"raster":return new O3(l,i);case"symbol":return new Ey(l,i)}},p.bK=pt,p.bL=function(l,i){if(!l)return[{command:"setStyle",args:[i]}];let o=[];try{if(!Ut(l.version,i.version))return[{command:"setStyle",args:[i]}];Ut(l.center,i.center)||o.push({command:"setCenter",args:[i.center]}),Ut(l.state,i.state)||o.push({command:"setGlobalState",args:[i.state]}),Ut(l.centerAltitude,i.centerAltitude)||o.push({command:"setCenterAltitude",args:[i.centerAltitude]}),Ut(l.zoom,i.zoom)||o.push({command:"setZoom",args:[i.zoom]}),Ut(l.bearing,i.bearing)||o.push({command:"setBearing",args:[i.bearing]}),Ut(l.pitch,i.pitch)||o.push({command:"setPitch",args:[i.pitch]}),Ut(l.roll,i.roll)||o.push({command:"setRoll",args:[i.roll]}),Ut(l.sprite,i.sprite)||o.push({command:"setSprite",args:[i.sprite]}),Ut(l.glyphs,i.glyphs)||o.push({command:"setGlyphs",args:[i.glyphs]}),Ut(l.transition,i.transition)||o.push({command:"setTransition",args:[i.transition]}),Ut(l.light,i.light)||o.push({command:"setLight",args:[i.light]}),Ut(l.terrain,i.terrain)||o.push({command:"setTerrain",args:[i.terrain]}),Ut(l.sky,i.sky)||o.push({command:"setSky",args:[i.sky]}),Ut(l.projection,i.projection)||o.push({command:"setProjection",args:[i.projection]});const d={},y=[];(function(w,C,I,z){let N;for(N in C=C||{},w=w||{})Object.prototype.hasOwnProperty.call(w,N)&&(Object.prototype.hasOwnProperty.call(C,N)||Rn(N,I,z));for(N in C)Object.prototype.hasOwnProperty.call(C,N)&&(Object.prototype.hasOwnProperty.call(w,N)?Ut(w[N],C[N])||(w[N].type==="geojson"&&C[N].type==="geojson"&&gn(w,C,N)?pr(I,{command:"setGeoJSONSourceData",args:[N,C[N].data]}):Gn(N,C,I,z)):en(N,C,I))})(l.sources,i.sources,y,d);const x=[];l.layers&&l.layers.forEach((w=>{"source"in w&&d[w.source]?o.push({command:"removeLayer",args:[w.id]}):x.push(w)})),o=o.concat(y),(function(w,C,I){C=C||[];const z=(w=w||[]).map(Er),N=C.map(Er),V=w.reduce(Wn,{}),Z=C.reduce(Wn,{}),Q=z.slice(),te=Object.create(null);let le,fe,_e,Ue,Pe;for(let ke=0,Ke=0;ke<z.length;ke++)le=z[ke],Object.prototype.hasOwnProperty.call(Z,le)?Ke++:(pr(I,{command:"removeLayer",args:[le]}),Q.splice(Q.indexOf(le,Ke),1));for(let ke=0,Ke=0;ke<N.length;ke++)le=N[N.length-1-ke],Q[Q.length-1-ke]!==le&&(Object.prototype.hasOwnProperty.call(V,le)?(pr(I,{command:"removeLayer",args:[le]}),Q.splice(Q.lastIndexOf(le,Q.length-Ke),1)):Ke++,Ue=Q[Q.length-ke],pr(I,{command:"addLayer",args:[Z[le],Ue]}),Q.splice(Q.length-ke,0,le),te[le]=!0);for(let ke=0;ke<N.length;ke++)if(le=N[ke],fe=V[le],_e=Z[le],!te[le]&&!Ut(fe,_e))if(Ut(fe.source,_e.source)&&Ut(fe["source-layer"],_e["source-layer"])&&Ut(fe.type,_e.type)){for(Pe in br(fe.layout,_e.layout,I,le,null,"setLayoutProperty"),br(fe.paint,_e.paint,I,le,null,"setPaintProperty"),Ut(fe.filter,_e.filter)||pr(I,{command:"setFilter",args:[le,_e.filter]}),Ut(fe.minzoom,_e.minzoom)&&Ut(fe.maxzoom,_e.maxzoom)||pr(I,{command:"setLayerZoomRange",args:[le,_e.minzoom,_e.maxzoom]}),fe)Object.prototype.hasOwnProperty.call(fe,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?br(fe[Pe],_e[Pe],I,le,Pe.slice(6),"setPaintProperty"):Ut(fe[Pe],_e[Pe])||pr(I,{command:"setLayerProperty",args:[le,Pe,_e[Pe]]}));for(Pe in _e)Object.prototype.hasOwnProperty.call(_e,Pe)&&!Object.prototype.hasOwnProperty.call(fe,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?br(fe[Pe],_e[Pe],I,le,Pe.slice(6),"setPaintProperty"):Ut(fe[Pe],_e[Pe])||pr(I,{command:"setLayerProperty",args:[le,Pe,_e[Pe]]}))}else pr(I,{command:"removeLayer",args:[le]}),Ue=Q[Q.lastIndexOf(le)+1],pr(I,{command:"addLayer",args:[_e,Ue]})})(x,i.layers,o)}catch(d){console.warn("Unable to compute style diff:",d),o=[{command:"setStyle",args:[i]}]}return o},p.bM=function(l){const i=[],o=l.id;return o===void 0&&i.push({message:`layers.${o}: missing required property "id"`}),l.render===void 0&&i.push({message:`layers.${o}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&i.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),i},p.bN=Ft,p.bO=ir,p.bP=class extends rn{constructor(l,i){super(l,i),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},p.bQ=ei,p.bR=class extends rn{constructor(l,i){super(l,i),this.current=cm}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let i=1;i<16;i++)if(l[i]!==this.current[i]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},p.bS=bi,p.bT=class extends rn{constructor(l,i){super(l,i),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},p.bU=class extends rn{constructor(l,i){super(l,i),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},p.bV=oe,p.bW=function(l,i){var o=Math.sin(i),d=Math.cos(i);return l[0]=d,l[1]=o,l[2]=0,l[3]=-o,l[4]=d,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},p.bX=function(l,i,o){var d=i[0],y=i[1],x=i[2];return l[0]=d*o[0]+y*o[3]+x*o[6],l[1]=d*o[1]+y*o[4]+x*o[7],l[2]=d*o[2]+y*o[5]+x*o[8],l},p.bY=function(l,i,o,d,y,x,w){var C=1/(i-o),I=1/(d-y),z=1/(x-w);return l[0]=-2*C,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*I,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*z,l[11]=0,l[12]=(i+o)*C,l[13]=(y+d)*I,l[14]=(w+x)*z,l[15]=1,l},p.bZ=class extends rn{constructor(l,i){super(l,i),this.current=new Array}set(l){if(l!=this.current){this.current=l;const i=new Float32Array(4*l.length);for(let o=0;o<l.length;o++)i[4*o]=l[o].r,i[4*o+1]=l[o].g,i[4*o+2]=l[o].b,i[4*o+3]=l[o].a;this.gl.uniform4fv(this.location,i)}}},p.b_=class extends rn{constructor(l,i){super(l,i),this.current=new Array}set(l){if(l!=this.current){this.current=l;const i=new Float32Array(l);this.gl.uniform1fv(this.location,i)}}},p.ba=function(){return new Float64Array(16)},p.bb=function(l,i,o){const d=new Float64Array(4);return st(d,l,i-90,o),d},p.bc=function(l,i,o,d){var y,x,w,C,I,z=i[0],N=i[1],V=i[2],Z=i[3],Q=o[0],te=o[1],le=o[2],fe=o[3];return(x=z*Q+N*te+V*le+Z*fe)<0&&(x=-x,Q=-Q,te=-te,le=-le,fe=-fe),1-x>J?(y=Math.acos(x),w=Math.sin(y),C=Math.sin((1-d)*y)/w,I=Math.sin(d*y)/w):(C=1-d,I=d),l[0]=C*z+I*Q,l[1]=C*N+I*te,l[2]=C*V+I*le,l[3]=C*Z+I*fe,l},p.bd=function(l){const i=new Float64Array(9);var o,d,y,x,w,C,I,z,N,V,Z,Q,te,le,fe,_e,Ue,Pe;V=(y=(d=l)[0])*(I=y+y),Z=(x=d[1])*I,te=(w=d[2])*I,le=w*(z=x+x),_e=(C=d[3])*I,Ue=C*z,Pe=C*(N=w+w),(o=i)[0]=1-(Q=x*z)-(fe=w*N),o[3]=Z-Pe,o[6]=te+Ue,o[1]=Z+Pe,o[4]=1-V-fe,o[7]=le-_e,o[2]=te-Ue,o[5]=le+_e,o[8]=1-V-Q;const ke=Pa(-Math.asin(Wt(i[2],-1,1)));let Ke,rt;return Math.hypot(i[5],i[8])<.001?(Ke=0,rt=-Pa(Math.atan2(i[3],i[4]))):(Ke=Pa(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),rt=Pa(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:Ke,pitch:ke+90,bearing:rt}},p.be=function(l,i){return l.roll==i.roll&&l.pitch==i.pitch&&l.bearing==i.bearing},p.bf=_r,p.bg=An,p.bh=yl,p.bi=vu,p.bj=Ms,p.bk=qe,p.bl=yt,p.bm=hi,p.bn=function(l,i,o,d,y){return qe(d,y,Wt((l-i)/(o-i),0,1))},p.bo=Ce,p.bp=function(){return new Float64Array(3)},p.bq=function(l,i,o,d){return l[0]=i[0]+o[0]*d,l[1]=i[1]+o[1]*d,l[2]=i[2]+o[2]*d,l},p.br=st,p.bs=function(l,i,o){var d=o[0],y=o[1],x=o[2],w=o[3],C=i[0],I=i[1],z=i[2],N=y*z-x*I,V=x*C-d*z,Z=d*I-y*C;return l[0]=C+w*(N+=N)+y*(Z+=Z)-x*(V+=V),l[1]=I+w*V+x*N-d*Z,l[2]=z+w*Z+d*V-y*N,l},p.bt=function(l,i,o){const d=(y=[l[0],l[1],l[2],i[0],i[1],i[2],o[0],o[1],o[2]])[0]*((N=y[8])*(w=y[4])-(C=y[5])*(z=y[7]))+y[1]*(-N*(x=y[3])+C*(I=y[6]))+y[2]*(z*x-w*I);var y,x,w,C,I,z,N;if(d===0)return null;const V=Re([],[i[0],i[1],i[2]],[o[0],o[1],o[2]]),Z=Re([],[o[0],o[1],o[2]],[l[0],l[1],l[2]]),Q=Re([],[l[0],l[1],l[2]],[i[0],i[1],i[2]]),te=We([],V,-l[3]);return Oe(te,te,We([],Z,-i[3])),Oe(te,te,We([],Q,-o[3])),We(te,te,1/d),te},p.bu=a0,p.bv=function(){return new Float64Array(4)},p.bw=function(l,i,o,d){var y=[],x=[];return y[0]=i[0]-o[0],y[1]=i[1]-o[1],y[2]=i[2]-o[2],x[0]=y[0]*Math.cos(d)-y[1]*Math.sin(d),x[1]=y[0]*Math.sin(d)+y[1]*Math.cos(d),x[2]=y[2],l[0]=x[0]+o[0],l[1]=x[1]+o[1],l[2]=x[2]+o[2],l},p.bx=function(l,i,o,d){var y=[],x=[];return y[0]=i[0]-o[0],y[1]=i[1]-o[1],y[2]=i[2]-o[2],x[0]=y[0],x[1]=y[1]*Math.cos(d)-y[2]*Math.sin(d),x[2]=y[1]*Math.sin(d)+y[2]*Math.cos(d),l[0]=x[0]+o[0],l[1]=x[1]+o[1],l[2]=x[2]+o[2],l},p.by=function(l,i,o,d){var y=[],x=[];return y[0]=i[0]-o[0],y[1]=i[1]-o[1],y[2]=i[2]-o[2],x[0]=y[2]*Math.sin(d)+y[0]*Math.cos(d),x[1]=y[1],x[2]=y[2]*Math.cos(d)-y[0]*Math.sin(d),l[0]=x[0]+o[0],l[1]=x[1]+o[1],l[2]=x[2]+o[2],l},p.bz=function(l,i,o){var d=Math.sin(o),y=Math.cos(o),x=i[0],w=i[1],C=i[2],I=i[3],z=i[8],N=i[9],V=i[10],Z=i[11];return i!==l&&(l[4]=i[4],l[5]=i[5],l[6]=i[6],l[7]=i[7],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=x*y-z*d,l[1]=w*y-N*d,l[2]=C*y-V*d,l[3]=I*y-Z*d,l[8]=x*d+z*y,l[9]=w*d+N*y,l[10]=C*d+V*y,l[11]=I*d+Z*y,l},p.c=je,p.c0=Em,p.c1=class extends v{},p.c2=fh,p.c3=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},p.c4=sy,p.c5=function(l,i,o){var d=i[0],y=i[1],x=i[2],w=o[3]*d+o[7]*y+o[11]*x+o[15];return l[0]=(o[0]*d+o[4]*y+o[8]*x+o[12])/(w=w||1),l[1]=(o[1]*d+o[5]*y+o[9]*x+o[13])/w,l[2]=(o[2]*d+o[6]*y+o[10]*x+o[14])/w,l},p.c6=class extends Ji{},p.c7=class extends H{},p.c8=function(l,i){return l[0]===i[0]&&l[1]===i[1]&&l[2]===i[2]&&l[3]===i[3]&&l[4]===i[4]&&l[5]===i[5]&&l[6]===i[6]&&l[7]===i[7]&&l[8]===i[8]&&l[9]===i[9]&&l[10]===i[10]&&l[11]===i[11]&&l[12]===i[12]&&l[13]===i[13]&&l[14]===i[14]&&l[15]===i[15]},p.c9=function(l,i){var o=l[0],d=l[1],y=l[2],x=l[3],w=l[4],C=l[5],I=l[6],z=l[7],N=l[8],V=l[9],Z=l[10],Q=l[11],te=l[12],le=l[13],fe=l[14],_e=l[15],Ue=i[0],Pe=i[1],ke=i[2],Ke=i[3],rt=i[4],mt=i[5],It=i[6],St=i[7],Et=i[8],Gt=i[9],Ct=i[10],Mt=i[11],ht=i[12],or=i[13],hr=i[14],Qt=i[15];return Math.abs(o-Ue)<=J*Math.max(1,Math.abs(o),Math.abs(Ue))&&Math.abs(d-Pe)<=J*Math.max(1,Math.abs(d),Math.abs(Pe))&&Math.abs(y-ke)<=J*Math.max(1,Math.abs(y),Math.abs(ke))&&Math.abs(x-Ke)<=J*Math.max(1,Math.abs(x),Math.abs(Ke))&&Math.abs(w-rt)<=J*Math.max(1,Math.abs(w),Math.abs(rt))&&Math.abs(C-mt)<=J*Math.max(1,Math.abs(C),Math.abs(mt))&&Math.abs(I-It)<=J*Math.max(1,Math.abs(I),Math.abs(It))&&Math.abs(z-St)<=J*Math.max(1,Math.abs(z),Math.abs(St))&&Math.abs(N-Et)<=J*Math.max(1,Math.abs(N),Math.abs(Et))&&Math.abs(V-Gt)<=J*Math.max(1,Math.abs(V),Math.abs(Gt))&&Math.abs(Z-Ct)<=J*Math.max(1,Math.abs(Z),Math.abs(Ct))&&Math.abs(Q-Mt)<=J*Math.max(1,Math.abs(Q),Math.abs(Mt))&&Math.abs(te-ht)<=J*Math.max(1,Math.abs(te),Math.abs(ht))&&Math.abs(le-or)<=J*Math.max(1,Math.abs(le),Math.abs(or))&&Math.abs(fe-hr)<=J*Math.max(1,Math.abs(fe),Math.abs(hr))&&Math.abs(_e-Qt)<=J*Math.max(1,Math.abs(_e),Math.abs(Qt))},p.cA=function(l,i){ie.REGISTERED_PROTOCOLS[l]=i},p.cB=function(l){delete ie.REGISTERED_PROTOCOLS[l]},p.cC=function(l,i){const o={};for(let y=0;y<l.length;y++){const x=i&&i[l[y].id]||th(l[y]);i&&(i[l[y].id]=x);let w=o[x];w||(w=o[x]=[]),w.push(l[y])}const d=[];for(const y in o)d.push(o[y]);return d},p.cD=At,p.cE=BP,p.cF=$P,p.cG=Cy,p.cH=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=tt/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const i=l.bucket.layers[0],o=i.layout,d=i._unevaluatedLayout._values,y={layoutIconSize:d["icon-size"].possiblyEvaluate(new Gr(l.bucket.zoom+1),l.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Gr(l.bucket.zoom+1),l.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Gr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:N}=l.bucket.textSizeData;y.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Gr(z),l.canonical),d["text-size"].possiblyEvaluate(new Gr(N),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:N}=l.bucket.iconSizeData;y.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Gr(z),l.canonical),d["icon-size"].possiblyEvaluate(new Gr(N),l.canonical)]}const x=o.get("text-line-height")*$n,w=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",C=o.get("text-keep-upright"),I=o.get("text-size");for(const z of l.bucket.features){const N=o.get("text-font").evaluate(z,{},l.canonical).join(","),V=I.evaluate(z,{},l.canonical),Z=y.layoutTextSize.evaluate(z,{},l.canonical),Q=y.layoutIconSize.evaluate(z,{},l.canonical),te={horizontal:{},vertical:void 0},le=z.text;let fe,_e=[0,0];if(le){const ke=le.toString(),Ke=o.get("text-letter-spacing").evaluate(z,{},l.canonical)*$n,rt=Yi(ke)?Ke:0,mt=o.get("text-anchor").evaluate(z,{},l.canonical),It=JP(i,z,l.canonical);if(!It){const Ct=o.get("text-radial-offset").evaluate(z,{},l.canonical);_e=Ct?YP(mt,[Ct*$n,l0]):o.get("text-offset").evaluate(z,{},l.canonical).map((Mt=>Mt*$n))}let St=w?"center":o.get("text-justify").evaluate(z,{},l.canonical);const Et=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(z,{},l.canonical)*$n:1/0,Gt=()=>{l.bucket.allowVerticalPlacement&&lu(ke)&&(te.vertical=Bf(le,l.glyphMap,l.glyphPositions,l.imagePositions,N,Et,x,mt,"left",rt,_e,p.ao.vertical,!0,Z,V))};if(!w&&It){const Ct=new Set;if(St==="auto")for(let ht=0;ht<It.values.length;ht+=2)Ct.add(c0(It.values[ht]));else Ct.add(St);let Mt=!1;for(const ht of Ct)if(!te.horizontal[ht])if(Mt)te.horizontal[ht]=te.horizontal[0];else{const or=Bf(le,l.glyphMap,l.glyphPositions,l.imagePositions,N,Et,x,"center",ht,rt,_e,p.ao.horizontal,!1,Z,V);or&&(te.horizontal[ht]=or,Mt=or.positionedLines.length===1)}Gt()}else{St==="auto"&&(St=c0(mt));const Ct=Bf(le,l.glyphMap,l.glyphPositions,l.imagePositions,N,Et,x,mt,St,rt,_e,p.ao.horizontal,!1,Z,V);Ct&&(te.horizontal[St]=Ct),Gt(),lu(ke)&&w&&C&&(te.vertical=Bf(le,l.glyphMap,l.glyphPositions,l.imagePositions,N,Et,x,mt,St,rt,_e,p.ao.vertical,!1,Z,V))}}let Ue=!1;if(z.icon&&z.icon.name){const ke=l.imageMap[z.icon.name];ke&&(fe=Xt(l.imagePositions[z.icon.name],o.get("icon-offset").evaluate(z,{},l.canonical),o.get("icon-anchor").evaluate(z,{},l.canonical)),Ue=!!ke.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=Ue:l.bucket.sdfIcons!==Ue&&rr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ke.pixelRatio!==l.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const Pe=eT(te.horizontal)||te.vertical;l.bucket.iconsInText=!!Pe&&Pe.iconsInText,(Pe||fe)&&U3(l.bucket,z,te,fe,l.imageMap,y,Z,Q,_e,Ue,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},p.cI=Am,p.cJ=gd,p.cK=Os,p.cL=Sm,p.cM=Sd,p.cN=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},p.cO=function(l,i,o,d,y){return s(this,void 0,void 0,(function*(){if(K())try{return yield ki(l,i,o,d,y)}catch{}return(function(x,w,C,I,z){const N=x.width,V=x.height;On&&ni||(On=new OffscreenCanvas(N,V),ni=On.getContext("2d",{willReadFrequently:!0})),On.width=N,On.height=V,ni.drawImage(x,0,0,N,V);const Z=ni.getImageData(w,C,I,z);return ni.clearRect(0,0,N,V),Z.data})(l,i,o,d,y)}))},p.cP=mh,p.cQ=A,p.cR=bo,p.cS=xl,p.cT=tc,p.cU=function(l,i){const o=new Map;if(l!=null)if(l.type==="Feature")o.set(Rm(l,i),l);else for(const d of l.features)o.set(Rm(d,i),d);return o},p.cV=function(l,i){if(l==null)return!0;if(l.type==="Feature")return Rm(l,i)!=null;if(l.type==="FeatureCollection"){const o=new Set;for(const d of l.features){const y=Rm(d,i);if(y==null||o.has(y))return!1;o.add(y)}return!0}return!1},p.cW=function(l,i,o){var d,y,x,w;if(i.removeAll&&l.clear(),i.remove)for(const C of i.remove)l.delete(C);if(i.add)for(const C of i.add){const I=Rm(C,o);I!=null&&l.set(I,C)}if(i.update)for(const C of i.update){let I=l.get(C.id);if(I==null)continue;const z=!C.removeAllProperties&&(((d=C.removeProperties)===null||d===void 0?void 0:d.length)>0||((y=C.addOrUpdateProperties)===null||y===void 0?void 0:y.length)>0);if((C.newGeometry||C.removeAllProperties||z)&&(I=Object.assign({},I),l.set(C.id,I),z&&(I.properties=Object.assign({},I.properties))),C.newGeometry&&(I.geometry=C.newGeometry),C.removeAllProperties)I.properties={};else if(((x=C.removeProperties)===null||x===void 0?void 0:x.length)>0)for(const N of C.removeProperties)Object.prototype.hasOwnProperty.call(I.properties,N)&&delete I.properties[N];if(((w=C.addOrUpdateProperties)===null||w===void 0?void 0:w.length)>0)for(const{key:N,value:V}of C.addOrUpdateProperties)I.properties[N]=V}},p.cX=da,p.ca=function(l,i){return l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],l[4]=i[4],l[5]=i[5],l[6]=i[6],l[7]=i[7],l[8]=i[8],l[9]=i[9],l[10]=i[10],l[11]=i[11],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15],l},p.cb=l=>l.type==="symbol",p.cc=l=>l.type==="circle",p.cd=l=>l.type==="heatmap",p.ce=l=>l.type==="line",p.cf=l=>l.type==="fill",p.cg=l=>l.type==="fill-extrusion",p.ch=l=>l.type==="hillshade",p.ci=l=>l.type==="color-relief",p.cj=l=>l.type==="raster",p.ck=l=>l.type==="background",p.cl=l=>l.type==="custom",p.cm=Rt,p.cn=function(l,i,o){const d=Ne(i.x-o.x,i.y-o.y),y=Ne(l.x-o.x,l.y-o.y);var x,w;return Pa(Math.atan2(d[0]*y[1]-d[1]*y[0],(x=d)[0]*(w=y)[0]+x[1]*w[1]))},p.co=$t,p.cp=function(l,i){return oo[i]&&(l instanceof MouseEvent||l instanceof WheelEvent)},p.cq=function(l,i){return Ao[i]&&"touches"in l},p.cr=function(l){return Ao[l]||oo[l]},p.cs=function(l,i,o){var d=i[0],y=i[1];return l[0]=o[0]*d+o[4]*y+o[12],l[1]=o[1]*d+o[5]*y+o[13],l},p.ct=function(l,i){const{x:o,y:d}=Om.fromLngLat(i);return!(l<0||l>25||d<0||d>=1||o<0||o>=1)},p.cu=function(l,i){return l[0]=i[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=i[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=i[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},p.cv=class extends ji{},p.cw=q3,p.cy=function(l){return l.message===Co},p.cz=Se,p.d=Xe,p.e=tr,p.f=l=>s(void 0,void 0,void 0,(function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(i)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),p.g=ae,p.h=l=>new Promise(((i,o)=>{const d=new Image;d.onload=()=>{i(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame((()=>{d.src=Xn}))},d.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(l)],{type:"image/png"});d.src=l.byteLength?URL.createObjectURL(y):Xn})),p.i=Hr,p.j=(l,i)=>Le(tr(l,{type:"json"}),i),p.k=ct,p.l=gt,p.m=Le,p.n=(l,i)=>Le(tr(l,{type:"arrayBuffer"}),i),p.o=function(l){return new Sd(l).readFields(km,[])},p.p=Pd,p.q=si,p.r=jn,p.s=oa,p.t=sh,p.u=Ar,p.v=Be,p.w=rr,p.x=oc,p.y=ll,p.z=bs})),u("worker",["./shared"],(function(p){class s{constructor(ie,ae){this.keyCache={},ie&&this.replace(ie,ae)}replace(ie,ae){this._layerConfigs={},this._layers={},this.update(ie,[],ae)}update(ie,ae,de){for(const Ee of ie){this._layerConfigs[Ee.id]=Ee;const Le=this._layers[Ee.id]=p.bJ(Ee,de);Le._featureFilter=p.aa(Le.filter,de),this.keyCache[Ee.id]&&delete this.keyCache[Ee.id]}for(const Ee of ae)delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee];this.familiesBySource={};const Se=p.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ee of Se){const Le=Ee.map((zt=>this._layers[zt.id])),Xe=Le[0];if(Xe.visibility==="none")continue;const $e=Xe.source||"";let nt=this.familiesBySource[$e];nt||(nt=this.familiesBySource[$e]={});const gt=Xe.sourceLayer||"_geojsonTileLayer";let ct=nt[gt];ct||(ct=nt[gt]=[]),ct.push(Le)}}}class P{constructor(ie){const ae={},de=[];for(const Xe in ie){const $e=ie[Xe],nt=ae[Xe]={};for(const gt in $e){const ct=$e[+gt];if(!ct||ct.bitmap.width===0||ct.bitmap.height===0)continue;const zt={x:0,y:0,w:ct.bitmap.width+2,h:ct.bitmap.height+2};de.push(zt),nt[gt]={rect:zt,metrics:ct.metrics}}}const{w:Se,h:Ee}=p.p(de),Le=new p.q({width:Se||1,height:Ee||1});for(const Xe in ie){const $e=ie[Xe];for(const nt in $e){const gt=$e[+nt];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const ct=ae[Xe][nt].rect;p.q.copy(gt.bitmap,Le,{x:0,y:0},{x:ct.x+1,y:ct.y+1},gt.bitmap)}}this.image=Le,this.positions=ae}}p.cD("GlyphAtlas",P);class A{constructor(ie){this.tileID=new p.Z(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,ae,de,Se,Ee){return p._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new p.a8;const Le=new p.cE(Object.keys(ie.layers).sort()),Xe=new p.cF(this.tileID,this.promoteId);Xe.bucketLayerIDs=[];const $e={},nt={featureIndex:Xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:de,subdivisionGranularity:Ee},gt=ae.familiesBySource[this.source];for(const br in gt){const Er=ie.layers[br];if(!Er)continue;Er.version===1&&p.w(`Vector tile source "${this.source}" layer "${br}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Wn=Le.encode(br),_t=[];for(let Kn=0;Kn<Er.length;Kn++){const cn=Er.feature(Kn),so=Xe.getId(cn,br);_t.push({feature:cn,id:so,index:Kn,sourceLayerIndex:Wn})}for(const Kn of gt[br]){const cn=Kn[0];cn.source!==this.source&&p.w(`layer.source = ${cn.source} does not equal this.source = ${this.source}`),cn.minzoom&&this.zoom<Math.floor(cn.minzoom)||cn.maxzoom&&this.zoom>=cn.maxzoom||cn.visibility!=="none"&&(E(Kn,this.zoom,de),($e[cn.id]=cn.createBucket({index:Xe.bucketLayerIDs.length,layers:Kn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wn,sourceID:this.source})).populate(_t,nt,this.tileID.canonical),Xe.bucketLayerIDs.push(Kn.map((so=>so.id))))}}const ct=p.bN(nt.glyphDependencies,(br=>Object.keys(br).map(Number)));this.inFlightDependencies.forEach((br=>br?.abort())),this.inFlightDependencies=[];let zt=Promise.resolve({});if(Object.keys(ct).length){const br=new AbortController;this.inFlightDependencies.push(br),zt=Se.sendAsync({type:"GG",data:{stacks:ct,source:this.source,tileID:this.tileID,type:"glyphs"}},br)}const Be=Object.keys(nt.iconDependencies);let sr=Promise.resolve({});if(Be.length){const br=new AbortController;this.inFlightDependencies.push(br),sr=Se.sendAsync({type:"GI",data:{icons:Be,source:this.source,tileID:this.tileID,type:"icons"}},br)}const Cr=Object.keys(nt.patternDependencies);let Ut=Promise.resolve({});if(Cr.length){const br=new AbortController;this.inFlightDependencies.push(br),Ut=Se.sendAsync({type:"GI",data:{icons:Cr,source:this.source,tileID:this.tileID,type:"patterns"}},br)}const[pr,en,Rn]=yield Promise.all([zt,sr,Ut]),Gn=new P(pr),gn=new p.cG(en,Rn);for(const br in $e){const Er=$e[br];Er instanceof p.a9?(E(Er.layers,this.zoom,de),p.cH({bucket:Er,glyphMap:pr,glyphPositions:Gn.positions,imageMap:en,imagePositions:gn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:nt.subdivisionGranularity})):Er.hasPattern&&(Er instanceof p.cI||Er instanceof p.cJ||Er instanceof p.cK)&&(E(Er.layers,this.zoom,de),Er.addFeatures(nt,this.tileID.canonical,gn.patternPositions))}return this.status="done",{buckets:Object.values($e).filter((br=>!br.isEmpty())),featureIndex:Xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gn.image,imageAtlas:gn,glyphMap:this.returnDependencies?pr:null,iconMap:this.returnDependencies?en:null,glyphPositions:this.returnDependencies?Gn.positions:null}}))}}function E(je,ie,ae){const de=new p.F(ie);for(const Se of je)Se.recalculate(de,ae)}class M{constructor(ie,ae,de){this.actor=ie,this.layerIndex=ae,this.availableImages=de,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,ae){return p._(this,void 0,void 0,(function*(){const de=yield p.n(ie.request,ae);try{return{vectorTile:new p.cL(new p.cM(de.data)),rawData:de.data,cacheControl:de.cacheControl,expires:de.expires}}catch(Se){const Ee=new Uint8Array(de.data);let Le=`Unable to parse the tile at ${ie.request.url}, `;throw Le+=Ee[0]===31&&Ee[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Se.message}`,new Error(Le)}}))}loadTile(ie){return p._(this,void 0,void 0,(function*(){const ae=ie.uid,de=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new p.cN(ie.request),Se=new A(ie);this.loading[ae]=Se;const Ee=new AbortController;Se.abort=Ee;try{const Le=yield this.loadVectorTile(ie,Ee);if(delete this.loading[ae],!Le)return null;const Xe=Le.rawData,$e={};Le.expires&&($e.expires=Le.expires),Le.cacheControl&&($e.cacheControl=Le.cacheControl);const nt={};if(de){const ct=de.finish();ct&&(nt.resourceTiming=JSON.parse(JSON.stringify(ct)))}Se.vectorTile=Le.vectorTile;const gt=Se.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);this.loaded[ae]=Se,this.fetching[ae]={rawTileData:Xe,cacheControl:$e,resourceTiming:nt};try{const ct=yield gt;return p.e({rawTileData:Xe.slice(0)},ct,$e,nt)}finally{delete this.fetching[ae]}}catch(Le){throw delete this.loading[ae],Se.status="done",this.loaded[ae]=Se,Le}}))}reloadTile(ie){return p._(this,void 0,void 0,(function*(){const ae=ie.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const de=this.loaded[ae];if(de.showCollisionBoxes=ie.showCollisionBoxes,de.status==="parsing"){const Se=yield de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);let Ee;if(this.fetching[ae]){const{rawTileData:Le,cacheControl:Xe,resourceTiming:$e}=this.fetching[ae];delete this.fetching[ae],Ee=p.e({rawTileData:Le.slice(0)},Se,Xe,$e)}else Ee=Se;return Ee}if(de.status==="done"&&de.vectorTile)return de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity)}))}abortTile(ie){return p._(this,void 0,void 0,(function*(){const ae=this.loading,de=ie.uid;ae&&ae[de]&&ae[de].abort&&(ae[de].abort.abort(),delete ae[de])}))}removeTile(ie){return p._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]}))}}class D{constructor(){this.loaded={}}loadTile(ie){return p._(this,void 0,void 0,(function*(){const{uid:ae,encoding:de,rawImageData:Se,redFactor:Ee,greenFactor:Le,blueFactor:Xe,baseShift:$e}=ie,nt=Se.width+2,gt=Se.height+2,ct=p.b(Se)?new p.R({width:nt,height:gt},yield p.cO(Se,-1,-1,nt,gt)):Se,zt=new p.cP(ae,ct,de,Ee,Le,Xe,$e);return this.loaded=this.loaded||{},this.loaded[ae]=zt,zt}))}removeTile(ie){const ae=this.loaded,de=ie.uid;ae&&ae[de]&&delete ae[de]}}var j,G,F=(function(){if(G)return j;function je(ae,de){if(ae.length!==0){ie(ae[0],de);for(var Se=1;Se<ae.length;Se++)ie(ae[Se],!de)}}function ie(ae,de){for(var Se=0,Ee=0,Le=0,Xe=ae.length,$e=Xe-1;Le<Xe;$e=Le++){var nt=(ae[Le][0]-ae[$e][0])*(ae[$e][1]+ae[Le][1]),gt=Se+nt;Ee+=Math.abs(Se)>=Math.abs(nt)?Se-gt+nt:nt-gt+Se,Se=gt}Se+Ee>=0!=!!de&&ae.reverse()}return G=1,j=function ae(de,Se){var Ee,Le=de&&de.type;if(Le==="FeatureCollection")for(Ee=0;Ee<de.features.length;Ee++)ae(de.features[Ee],Se);else if(Le==="GeometryCollection")for(Ee=0;Ee<de.geometries.length;Ee++)ae(de.geometries[Ee],Se);else if(Le==="Feature")ae(de.geometry,Se);else if(Le==="Polygon")je(de.coordinates,Se);else if(Le==="MultiPolygon")for(Ee=0;Ee<de.coordinates.length;Ee++)je(de.coordinates[Ee],Se);return de}})(),$=p.cQ(F);class K extends p.cS{constructor(ie,ae){super(new p.cM,0,ae,[],[]),this.feature=ie,this.type=ie.type,this.properties=ie.tags?ie.tags:{},"id"in ie&&(typeof ie.id=="string"?this.id=parseInt(ie.id,10):typeof ie.id!="number"||isNaN(ie.id)||(this.id=ie.id))}loadGeometry(){const ie=[],ae=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const de of ae){const Se=[];for(const Ee of de)Se.push(new p.P(Ee[0],Ee[1]));ie.push(Se)}return ie}}class J extends p.cR{constructor(ie,ae){super(new p.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ae?ae.version:1,this.extent=ae?ae.extent:4096,this.length=ie.length,this.features=ie}feature(ie){return new K(this.features[ie],this.extent)}}function ee(je,ie){ie.writeVarintField(15,je.version||1),ie.writeStringField(1,je.name||""),ie.writeVarintField(5,je.extent||4096);const ae={keys:[],values:[],keycache:{},valuecache:{}};for(let Ee=0;Ee<je.length;Ee++)ae.feature=je.feature(Ee),ie.writeMessage(2,oe,ae);const de=ae.keys;for(const Ee of de)ie.writeStringField(3,Ee);const Se=ae.values;for(const Ee of Se)ie.writeMessage(4,Oe,Ee)}function oe(je,ie){if(!je.feature)return;const ae=je.feature;ae.id!==void 0&&ie.writeVarintField(1,ae.id),ie.writeMessage(2,Y,je),ie.writeVarintField(3,ae.type),ie.writeMessage(4,ge,ae)}function Y(je,ie){for(const ae in je.feature?.properties){let de=je.feature.properties[ae],Se=je.keycache[ae];if(de===null)continue;Se===void 0&&(je.keys.push(ae),Se=je.keys.length-1,je.keycache[ae]=Se),ie.writeVarint(Se),typeof de!="string"&&typeof de!="boolean"&&typeof de!="number"&&(de=JSON.stringify(de));const Ee=typeof de+":"+de;let Le=je.valuecache[Ee];Le===void 0&&(je.values.push(de),Le=je.values.length-1,je.valuecache[Ee]=Le),ie.writeVarint(Le)}}function re(je,ie){return(ie<<3)+(7&je)}function ue(je){return je<<1^je>>31}function ge(je,ie){const ae=je.loadGeometry(),de=je.type;let Se=0,Ee=0;for(const Le of ae){let Xe=1;de===1&&(Xe=Le.length),ie.writeVarint(re(1,Xe));const $e=de===3?Le.length-1:Le.length;for(let nt=0;nt<$e;nt++){nt===1&&de!==1&&ie.writeVarint(re(2,$e-1));const gt=Le[nt].x-Se,ct=Le[nt].y-Ee;ie.writeVarint(ue(gt)),ie.writeVarint(ue(ct)),Se+=gt,Ee+=ct}je.type===3&&ie.writeVarint(re(7,1))}}function Oe(je,ie){const ae=typeof je;ae==="string"?ie.writeStringField(1,je):ae==="boolean"?ie.writeBooleanField(7,je):ae==="number"&&(je%1!=0?ie.writeDoubleField(3,je):je<0?ie.writeSVarintField(6,je):ie.writeVarintField(5,je))}const We={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:je=>je},Re=Math.fround||(Ve=new Float32Array(1),je=>(Ve[0]=+je,Ve[0]));var Ve;class Ye{constructor(ie){this.options=Object.assign(Object.create(We),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:ae,minZoom:de,maxZoom:Se}=this.options;ae&&console.time("total time");const Ee=`prepare ${ie.length} points`;ae&&console.time(Ee),this.points=ie;const Le=[];for(let $e=0;$e<ie.length;$e++){const nt=ie[$e];if(!nt.geometry)continue;const[gt,ct]=nt.geometry.coordinates,zt=Re(st(gt)),Be=Re(lt(ct));Le.push(zt,Be,1/0,$e,-1,1),this.options.reduce&&Le.push(0)}let Xe=this.trees[Se+1]=this._createTree(Le);ae&&console.timeEnd(Ee);for(let $e=Se;$e>=de;$e--){const nt=+Date.now();Xe=this.trees[$e]=this._createTree(this._cluster(Xe,$e)),ae&&console.log("z%d: %d clusters in %dms",$e,Xe.numItems,+Date.now()-nt)}return ae&&console.timeEnd("total time"),this}getClusters(ie,ae){let de=((ie[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,ie[1]));let Ee=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)de=-180,Ee=180;else if(de>Ee){const ct=this.getClusters([de,Se,180,Le],ae),zt=this.getClusters([-180,Se,Ee,Le],ae);return ct.concat(zt)}const Xe=this.trees[this._limitZoom(ae)],$e=Xe.range(st(de),lt(Le),st(Ee),lt(Se)),nt=Xe.data,gt=[];for(const ct of $e){const zt=this.stride*ct;gt.push(nt[zt+5]>1?ot(nt,zt,this.clusterProps):this.points[nt[zt+3]])}return gt}getChildren(ie){const ae=this._getOriginId(ie),de=this._getOriginZoom(ie),Se="No cluster with the specified id.",Ee=this.trees[de];if(!Ee)throw new Error(Se);const Le=Ee.data;if(ae*this.stride>=Le.length)throw new Error(Se);const Xe=this.options.radius/(this.options.extent*Math.pow(2,de-1)),$e=Ee.within(Le[ae*this.stride],Le[ae*this.stride+1],Xe),nt=[];for(const gt of $e){const ct=gt*this.stride;Le[ct+4]===ie&&nt.push(Le[ct+5]>1?ot(Le,ct,this.clusterProps):this.points[Le[ct+3]])}if(nt.length===0)throw new Error(Se);return nt}getLeaves(ie,ae,de){const Se=[];return this._appendLeaves(Se,ie,ae=ae||10,de=de||0,0),Se}getTile(ie,ae,de){const Se=this.trees[this._limitZoom(ie)],Ee=Math.pow(2,ie),{extent:Le,radius:Xe}=this.options,$e=Xe/Le,nt=(de-$e)/Ee,gt=(de+1+$e)/Ee,ct={features:[]};return this._addTileFeatures(Se.range((ae-$e)/Ee,nt,(ae+1+$e)/Ee,gt),Se.data,ae,de,Ee,ct),ae===0&&this._addTileFeatures(Se.range(1-$e/Ee,nt,1,gt),Se.data,Ee,de,Ee,ct),ae===Ee-1&&this._addTileFeatures(Se.range(0,nt,$e/Ee,gt),Se.data,-1,de,Ee,ct),ct.features.length?ct:null}getClusterExpansionZoom(ie){let ae=this._getOriginZoom(ie)-1;for(;ae<=this.options.maxZoom;){const de=this.getChildren(ie);if(ae++,de.length!==1)break;ie=de[0].properties.cluster_id}return ae}_appendLeaves(ie,ae,de,Se,Ee){const Le=this.getChildren(ae);for(const Xe of Le){const $e=Xe.properties;if($e&&$e.cluster?Ee+$e.point_count<=Se?Ee+=$e.point_count:Ee=this._appendLeaves(ie,$e.cluster_id,de,Se,Ee):Ee<Se?Ee++:ie.push(Xe),ie.length===de)break}return Ee}_createTree(ie){const ae=new p.aI(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let de=0;de<ie.length;de+=this.stride)ae.add(ie[de],ie[de+1]);return ae.finish(),ae.data=ie,ae}_addTileFeatures(ie,ae,de,Se,Ee,Le){for(const Xe of ie){const $e=Xe*this.stride,nt=ae[$e+5]>1;let gt,ct,zt;if(nt)gt=at(ae,$e,this.clusterProps),ct=ae[$e],zt=ae[$e+1];else{const Cr=this.points[ae[$e+3]];gt=Cr.properties;const[Ut,pr]=Cr.geometry.coordinates;ct=st(Ut),zt=lt(pr)}const Be={type:1,geometry:[[Math.round(this.options.extent*(ct*Ee-de)),Math.round(this.options.extent*(zt*Ee-Se))]],tags:gt};let sr;sr=nt||this.options.generateId?ae[$e+3]:this.points[ae[$e+3]].id,sr!==void 0&&(Be.id=sr),Le.features.push(Be)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,ae){const{radius:de,extent:Se,reduce:Ee,minPoints:Le}=this.options,Xe=de/(Se*Math.pow(2,ae)),$e=ie.data,nt=[],gt=this.stride;for(let ct=0;ct<$e.length;ct+=gt){if($e[ct+2]<=ae)continue;$e[ct+2]=ae;const zt=$e[ct],Be=$e[ct+1],sr=ie.within($e[ct],$e[ct+1],Xe),Cr=$e[ct+5];let Ut=Cr;for(const pr of sr){const en=pr*gt;$e[en+2]>ae&&(Ut+=$e[en+5])}if(Ut>Cr&&Ut>=Le){let pr,en=zt*Cr,Rn=Be*Cr,Gn=-1;const gn=(ct/gt<<5)+(ae+1)+this.points.length;for(const br of sr){const Er=br*gt;if($e[Er+2]<=ae)continue;$e[Er+2]=ae;const Wn=$e[Er+5];en+=$e[Er]*Wn,Rn+=$e[Er+1]*Wn,$e[Er+4]=gn,Ee&&(pr||(pr=this._map($e,ct,!0),Gn=this.clusterProps.length,this.clusterProps.push(pr)),Ee(pr,this._map($e,Er)))}$e[ct+4]=gn,nt.push(en/Ut,Rn/Ut,1/0,gn,-1,Ut),Ee&&nt.push(Gn)}else{for(let pr=0;pr<gt;pr++)nt.push($e[ct+pr]);if(Ut>1)for(const pr of sr){const en=pr*gt;if(!($e[en+2]<=ae)){$e[en+2]=ae;for(let Rn=0;Rn<gt;Rn++)nt.push($e[en+Rn])}}}}return nt}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,ae,de){if(ie[ae+5]>1){const Le=this.clusterProps[ie[ae+6]];return de?Object.assign({},Le):Le}const Se=this.points[ie[ae+3]].properties,Ee=this.options.map(Se);return de&&Ee===Se?Object.assign({},Ee):Ee}}function ot(je,ie,ae){return{type:"Feature",id:je[ie+3],properties:at(je,ie,ae),geometry:{type:"Point",coordinates:[(de=je[ie],360*(de-.5)),Ne(je[ie+1])]}};var de}function at(je,ie,ae){const de=je[ie+5],Se=de>=1e4?`${Math.round(de/1e3)}k`:de>=1e3?Math.round(de/100)/10+"k":de,Ee=je[ie+6],Le=Ee===-1?{}:Object.assign({},ae[Ee]);return Object.assign(Le,{cluster:!0,cluster_id:je[ie+3],point_count:de,point_count_abbreviated:Se})}function st(je){return je/360+.5}function lt(je){const ie=Math.sin(je*Math.PI/180),ae=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ae<0?0:ae>1?1:ae}function Ne(je){const ie=(180-360*je)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function tt(je,ie,ae,de){let Se=de;const Ee=ie+(ae-ie>>1);let Le,Xe=ae-ie;const $e=je[ie],nt=je[ie+1],gt=je[ae],ct=je[ae+1];for(let zt=ie+3;zt<ae;zt+=3){const Be=ut(je[zt],je[zt+1],$e,nt,gt,ct);if(Be>Se)Le=zt,Se=Be;else if(Be===Se){const sr=Math.abs(zt-Ee);sr<Xe&&(Le=zt,Xe=sr)}}Se>de&&(Le-ie>3&&tt(je,ie,Le,de),je[Le+2]=Se,ae-Le>3&&tt(je,Le,ae,de))}function ut(je,ie,ae,de,Se,Ee){let Le=Se-ae,Xe=Ee-de;if(Le!==0||Xe!==0){const $e=((je-ae)*Le+(ie-de)*Xe)/(Le*Le+Xe*Xe);$e>1?(ae=Se,de=Ee):$e>0&&(ae+=Le*$e,de+=Xe*$e)}return Le=je-ae,Xe=ie-de,Le*Le+Xe*Xe}function Ce(je,ie,ae,de){const Se={id:je??null,type:ie,geometry:ae,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")qe(Se,ae);else if(ie==="Polygon")qe(Se,ae[0]);else if(ie==="MultiLineString")for(const Ee of ae)qe(Se,Ee);else if(ie==="MultiPolygon")for(const Ee of ae)qe(Se,Ee[0]);return Se}function qe(je,ie){for(let ae=0;ae<ie.length;ae+=3)je.minX=Math.min(je.minX,ie[ae]),je.minY=Math.min(je.minY,ie[ae+1]),je.maxX=Math.max(je.maxX,ie[ae]),je.maxY=Math.max(je.maxY,ie[ae+1])}function yt(je,ie,ae,de){if(!ie.geometry)return;const Se=ie.geometry.coordinates;if(Se&&Se.length===0)return;const Ee=ie.geometry.type,Le=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let Xe=[],$e=ie.id;if(ae.promoteId?$e=ie.properties[ae.promoteId]:ae.generateId&&($e=de||0),Ee==="Point")Rt(Se,Xe);else if(Ee==="MultiPoint")for(const nt of Se)Rt(nt,Xe);else if(Ee==="LineString")$t(Se,Xe,Le,!1);else if(Ee==="MultiLineString"){if(ae.lineMetrics){for(const nt of Se)Xe=[],$t(nt,Xe,Le,!1),je.push(Ce($e,"LineString",Xe,ie.properties));return}Wt(Se,Xe,Le,!1)}else if(Ee==="Polygon")Wt(Se,Xe,Le,!0);else{if(Ee!=="MultiPolygon"){if(Ee==="GeometryCollection"){for(const nt of ie.geometry.geometries)yt(je,{id:$e,geometry:nt,properties:ie.properties},ae,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const nt of Se){const gt=[];Wt(nt,gt,Le,!0),Xe.push(gt)}}je.push(Ce($e,Ee,Xe,ie.properties))}function Rt(je,ie){ie.push(er(je[0]),tr(je[1]),0)}function $t(je,ie,ae,de){let Se,Ee,Le=0;for(let $e=0;$e<je.length;$e++){const nt=er(je[$e][0]),gt=tr(je[$e][1]);ie.push(nt,gt,0),$e>0&&(Le+=de?(Se*gt-nt*Ee)/2:Math.sqrt(Math.pow(nt-Se,2)+Math.pow(gt-Ee,2))),Se=nt,Ee=gt}const Xe=ie.length-3;ie[2]=1,tt(ie,0,Xe,ae),ie[Xe+2]=1,ie.size=Math.abs(Le),ie.start=0,ie.end=ie.size}function Wt(je,ie,ae,de){for(let Se=0;Se<je.length;Se++){const Ee=[];$t(je[Se],Ee,ae,de),ie.push(Ee)}}function er(je){return je/360+.5}function tr(je){const ie=Math.sin(je*Math.PI/180),ae=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ae<0?0:ae>1?1:ae}function vt(je,ie,ae,de,Se,Ee,Le,Xe){if(de/=ie,Ee>=(ae/=ie)&&Le<de)return je;if(Le<ae||Ee>=de)return null;const $e=[];for(const nt of je){const gt=nt.geometry;let ct=nt.type;const zt=Se===0?nt.minX:nt.minY,Be=Se===0?nt.maxX:nt.maxY;if(zt>=ae&&Be<de){$e.push(nt);continue}if(Be<ae||zt>=de)continue;let sr=[];if(ct==="Point"||ct==="MultiPoint")Ft(gt,sr,ae,de,Se);else if(ct==="LineString")ir(gt,sr,ae,de,Se,!1,Xe.lineMetrics);else if(ct==="MultiLineString")dr(gt,sr,ae,de,Se,!1);else if(ct==="Polygon")dr(gt,sr,ae,de,Se,!0);else if(ct==="MultiPolygon")for(const Cr of gt){const Ut=[];dr(Cr,Ut,ae,de,Se,!0),Ut.length&&sr.push(Ut)}if(sr.length){if(Xe.lineMetrics&&ct==="LineString"){for(const Cr of sr)$e.push(Ce(nt.id,ct,Cr,nt.tags));continue}ct!=="LineString"&&ct!=="MultiLineString"||(sr.length===1?(ct="LineString",sr=sr[0]):ct="MultiLineString"),ct!=="Point"&&ct!=="MultiPoint"||(ct=sr.length===3?"Point":"MultiPoint"),$e.push(Ce(nt.id,ct,sr,nt.tags))}}return $e.length?$e:null}function Ft(je,ie,ae,de,Se){for(let Ee=0;Ee<je.length;Ee+=3){const Le=je[Ee+Se];Le>=ae&&Le<=de&&rr(ie,je[Ee],je[Ee+1],je[Ee+2])}}function ir(je,ie,ae,de,Se,Ee,Le){let Xe=pt(je);const $e=Se===0?qr:Hr;let nt,gt,ct=je.start;for(let Ut=0;Ut<je.length-3;Ut+=3){const pr=je[Ut],en=je[Ut+1],Rn=je[Ut+2],Gn=je[Ut+3],gn=je[Ut+4],br=Se===0?pr:en,Er=Se===0?Gn:gn;let Wn=!1;Le&&(nt=Math.sqrt(Math.pow(pr-Gn,2)+Math.pow(en-gn,2))),br<ae?Er>ae&&(gt=$e(Xe,pr,en,Gn,gn,ae),Le&&(Xe.start=ct+nt*gt)):br>de?Er<de&&(gt=$e(Xe,pr,en,Gn,gn,de),Le&&(Xe.start=ct+nt*gt)):rr(Xe,pr,en,Rn),Er<ae&&br>=ae&&(gt=$e(Xe,pr,en,Gn,gn,ae),Wn=!0),Er>de&&br<=de&&(gt=$e(Xe,pr,en,Gn,gn,de),Wn=!0),!Ee&&Wn&&(Le&&(Xe.end=ct+nt*gt),ie.push(Xe),Xe=pt(je)),Le&&(ct+=nt)}let zt=je.length-3;const Be=je[zt],sr=je[zt+1],Cr=Se===0?Be:sr;Cr>=ae&&Cr<=de&&rr(Xe,Be,sr,je[zt+2]),zt=Xe.length-3,Ee&&zt>=3&&(Xe[zt]!==Xe[0]||Xe[zt+1]!==Xe[1])&&rr(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&ie.push(Xe)}function pt(je){const ie=[];return ie.size=je.size,ie.start=je.start,ie.end=je.end,ie}function dr(je,ie,ae,de,Se,Ee){for(const Le of je)ir(Le,ie,ae,de,Se,Ee,!1)}function rr(je,ie,ae,de){je.push(ie,ae,de)}function qr(je,ie,ae,de,Se,Ee){const Le=(Ee-ie)/(de-ie);return rr(je,Ee,ae+(Se-ae)*Le,1),Le}function Hr(je,ie,ae,de,Se,Ee){const Le=(Ee-ae)/(Se-ae);return rr(je,ie+(de-ie)*Le,Ee,1),Le}function vn(je,ie){const ae=[];for(let de=0;de<je.length;de++){const Se=je[de],Ee=Se.type;let Le;if(Ee==="Point"||Ee==="MultiPoint"||Ee==="LineString")Le=qn(Se.geometry,ie);else if(Ee==="MultiLineString"||Ee==="Polygon"){Le=[];for(const Xe of Se.geometry)Le.push(qn(Xe,ie))}else if(Ee==="MultiPolygon"){Le=[];for(const Xe of Se.geometry){const $e=[];for(const nt of Xe)$e.push(qn(nt,ie));Le.push($e)}}ae.push(Ce(Se.id,Ee,Le,Se.tags))}return ae}function qn(je,ie){const ae=[];ae.size=je.size,je.start!==void 0&&(ae.start=je.start,ae.end=je.end);for(let de=0;de<je.length;de+=3)ae.push(je[de]+ie,je[de+1],je[de+2]);return ae}function Xn(je,ie){if(je.transformed)return je;const ae=1<<je.z,de=je.x,Se=je.y;for(const Ee of je.features){const Le=Ee.geometry,Xe=Ee.type;if(Ee.geometry=[],Xe===1)for(let $e=0;$e<Le.length;$e+=2)Ee.geometry.push(ki(Le[$e],Le[$e+1],ie,ae,de,Se));else for(let $e=0;$e<Le.length;$e++){const nt=[];for(let gt=0;gt<Le[$e].length;gt+=2)nt.push(ki(Le[$e][gt],Le[$e][gt+1],ie,ae,de,Se));Ee.geometry.push(nt)}}return je.transformed=!0,je}function ki(je,ie,ae,de,Se,Ee){return[Math.round(ae*(je*de-Se)),Math.round(ae*(ie*de-Ee))]}function On(je,ie,ae,de,Se){const Ee=ie===Se.maxZoom?0:Se.tolerance/((1<<ie)*Se.extent),Le={features:[],numPoints:0,numSimplified:0,numFeatures:je.length,source:null,x:ae,y:de,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Xe of je)ni(Le,Xe,Ee,Se);return Le}function ni(je,ie,ae,de){const Se=ie.geometry,Ee=ie.type,Le=[];if(je.minX=Math.min(je.minX,ie.minX),je.minY=Math.min(je.minY,ie.minY),je.maxX=Math.max(je.maxX,ie.maxX),je.maxY=Math.max(je.maxY,ie.maxY),Ee==="Point"||Ee==="MultiPoint")for(let Xe=0;Xe<Se.length;Xe+=3)Le.push(Se[Xe],Se[Xe+1]),je.numPoints++,je.numSimplified++;else if(Ee==="LineString")oa(Le,Se,je,ae,!1,!1);else if(Ee==="MultiLineString"||Ee==="Polygon")for(let Xe=0;Xe<Se.length;Xe++)oa(Le,Se[Xe],je,ae,Ee==="Polygon",Xe===0);else if(Ee==="MultiPolygon")for(let Xe=0;Xe<Se.length;Xe++){const $e=Se[Xe];for(let nt=0;nt<$e.length;nt++)oa(Le,$e[nt],je,ae,!0,nt===0)}if(Le.length){let Xe=ie.tags||null;if(Ee==="LineString"&&de.lineMetrics){Xe={};for(const nt in ie.tags)Xe[nt]=ie.tags[nt];Xe.mapbox_clip_start=Se.start/Se.size,Xe.mapbox_clip_end=Se.end/Se.size}const $e={geometry:Le,type:Ee==="Polygon"||Ee==="MultiPolygon"?3:Ee==="LineString"||Ee==="MultiLineString"?2:1,tags:Xe};ie.id!==null&&($e.id=ie.id),je.features.push($e)}}function oa(je,ie,ae,de,Se,Ee){const Le=de*de;if(de>0&&ie.size<(Se?Le:de))return void(ae.numPoints+=ie.length/3);const Xe=[];for(let $e=0;$e<ie.length;$e+=3)(de===0||ie[$e+2]>Le)&&(ae.numSimplified++,Xe.push(ie[$e],ie[$e+1])),ae.numPoints++;Se&&(function($e,nt){let gt=0;for(let ct=0,zt=$e.length,Be=zt-2;ct<zt;Be=ct,ct+=2)gt+=($e[ct]-$e[Be])*($e[ct+1]+$e[Be+1]);if(gt>0===nt)for(let ct=0,zt=$e.length;ct<zt/2;ct+=2){const Be=$e[ct],sr=$e[ct+1];$e[ct]=$e[zt-2-ct],$e[ct+1]=$e[zt-1-ct],$e[zt-2-ct]=Be,$e[zt-1-ct]=sr}})(Xe,Ee),je.push(Xe)}const Fa={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Pa{constructor(ie,ae){const de=(ae=this.options=(function(Ee,Le){for(const Xe in Le)Ee[Xe]=Le[Xe];return Ee})(Object.create(Fa),ae)).debug;if(de&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Se=(function(Ee,Le){const Xe=[];if(Ee.type==="FeatureCollection")for(let $e=0;$e<Ee.features.length;$e++)yt(Xe,Ee.features[$e],Le,$e);else yt(Xe,Ee.type==="Feature"?Ee:{geometry:Ee},Le);return Xe})(ie,ae);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Se=(function(Ee,Le){const Xe=Le.buffer/Le.extent;let $e=Ee;const nt=vt(Ee,1,-1-Xe,Xe,0,-1,2,Le),gt=vt(Ee,1,1-Xe,2+Xe,0,-1,2,Le);return(nt||gt)&&($e=vt(Ee,1,-Xe,1+Xe,0,-1,2,Le)||[],nt&&($e=vn(nt,1).concat($e)),gt&&($e=$e.concat(vn(gt,-1)))),$e})(Se,ae),Se.length&&this.splitTile(Se,0,0,0),de&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ie,ae,de,Se,Ee,Le,Xe){const $e=[ie,ae,de,Se],nt=this.options,gt=nt.debug;for(;$e.length;){Se=$e.pop(),de=$e.pop(),ae=$e.pop(),ie=$e.pop();const ct=1<<ae,zt=Ao(ae,de,Se);let Be=this.tiles[zt];if(!Be&&(gt>1&&console.time("creation"),Be=this.tiles[zt]=On(ie,ae,de,Se,nt),this.tileCoords.push({z:ae,x:de,y:Se}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,de,Se,Be.numFeatures,Be.numPoints,Be.numSimplified),console.timeEnd("creation"));const Wn=`z${ae}`;this.stats[Wn]=(this.stats[Wn]||0)+1,this.total++}if(Be.source=ie,Ee==null){if(ae===nt.indexMaxZoom||Be.numPoints<=nt.indexMaxPoints)continue}else{if(ae===nt.maxZoom||ae===Ee)continue;if(Ee!=null){const Wn=Ee-ae;if(de!==Le>>Wn||Se!==Xe>>Wn)continue}}if(Be.source=null,ie.length===0)continue;gt>1&&console.time("clipping");const sr=.5*nt.buffer/nt.extent,Cr=.5-sr,Ut=.5+sr,pr=1+sr;let en=null,Rn=null,Gn=null,gn=null,br=vt(ie,ct,de-sr,de+Ut,0,Be.minX,Be.maxX,nt),Er=vt(ie,ct,de+Cr,de+pr,0,Be.minX,Be.maxX,nt);ie=null,br&&(en=vt(br,ct,Se-sr,Se+Ut,1,Be.minY,Be.maxY,nt),Rn=vt(br,ct,Se+Cr,Se+pr,1,Be.minY,Be.maxY,nt),br=null),Er&&(Gn=vt(Er,ct,Se-sr,Se+Ut,1,Be.minY,Be.maxY,nt),gn=vt(Er,ct,Se+Cr,Se+pr,1,Be.minY,Be.maxY,nt),Er=null),gt>1&&console.timeEnd("clipping"),$e.push(en||[],ae+1,2*de,2*Se),$e.push(Rn||[],ae+1,2*de,2*Se+1),$e.push(Gn||[],ae+1,2*de+1,2*Se),$e.push(gn||[],ae+1,2*de+1,2*Se+1)}}getTile(ie,ae,de){ie=+ie,ae=+ae,de=+de;const Se=this.options,{extent:Ee,debug:Le}=Se;if(ie<0||ie>24)return null;const Xe=1<<ie,$e=Ao(ie,ae=ae+Xe&Xe-1,de);if(this.tiles[$e])return Xn(this.tiles[$e],Ee);Le>1&&console.log("drilling down to z%d-%d-%d",ie,ae,de);let nt,gt=ie,ct=ae,zt=de;for(;!nt&&gt>0;)gt--,ct>>=1,zt>>=1,nt=this.tiles[Ao(gt,ct,zt)];return nt&&nt.source?(Le>1&&(console.log("found parent tile z%d-%d-%d",gt,ct,zt),console.time("drilling down")),this.splitTile(nt.source,gt,ct,zt,ie,ae,de),Le>1&&console.timeEnd("drilling down"),this.tiles[$e]?Xn(this.tiles[$e],Ee):null):null}}function Ao(je,ie,ae){return 32*((1<<je)*ae+ie)+je}class oo extends M{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,ae){return p._(this,void 0,void 0,(function*(){const de=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Se=this._geoJSONIndex.getTile(de.z,de.x,de.y);if(!Se)return null;const Ee=new J(Se.features,{version:2,extent:p.$});let Le=(function(Xe){const $e=new p.cM;return(function(nt,gt){for(const ct in nt.layers)gt.writeMessage(3,ee,nt.layers[ct])})(Xe,$e),$e.finish()})(Ee);return Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),{vectorTile:Ee,rawData:Le.buffer}}))}loadData(ie){return p._(this,void 0,void 0,(function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const de=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new p.cN(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest);const Se=yield this._pendingData;this._geoJSONIndex=ie.cluster?new Ye((function({superclusterOptions:Le,clusterProperties:Xe}){if(!Xe||!Le)return Le;const $e={},nt={},gt={accumulated:null,zoom:0},ct={properties:null},zt=Object.keys(Xe);for(const Be of zt){const[sr,Cr]=Xe[Be],Ut=p.cT(Cr),pr=p.cT(typeof sr=="string"?[sr,["accumulated"],["get",Be]]:sr);$e[Be]=Ut.value,nt[Be]=pr.value}return Le.map=Be=>{ct.properties=Be;const sr={};for(const Cr of zt)sr[Cr]=$e[Cr].evaluate(gt,ct);return sr},Le.reduce=(Be,sr)=>{ct.properties=sr;for(const Cr of zt)gt.accumulated=Be[Cr],Be[Cr]=nt[Cr].evaluate(gt,ct)},Le})(ie)).load(Se.features):(function(Le,Xe){return new Pa(Le,Xe)})(Se,ie.geojsonVtOptions),this.loaded={};const Ee={data:Se};if(de){const Le=de.finish();Le&&(Ee.resourceTiming={},Ee.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Le)))}return Ee}catch(Se){if(delete this._pendingRequest,p.cy(Se))return{abandoned:!0};throw Se}}))}getData(){return p._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ie){const ae=this.loaded;return ae&&ae[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,ae){return p._(this,void 0,void 0,(function*(){let de=yield this.loadGeoJSON(ie,ae);if(delete this._pendingRequest,typeof de!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if($(de,!0),ie.filter){const Se=p.cT(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Se.result==="error")throw new Error(Se.value.map((Le=>`${Le.key}: ${Le.message}`)).join(", "));de={type:"FeatureCollection",features:de.features.filter((Le=>Se.value.evaluate({zoom:0},Le)))}}return de}))}loadGeoJSON(ie,ae){return p._(this,void 0,void 0,(function*(){const{promoteId:de}=ie;if(ie.request){const Se=yield p.j(ie.request,ae);return this._dataUpdateable=p.cV(Se.data,de)?p.cU(Se.data,de):void 0,Se.data}if(typeof ie.data=="string")try{const Se=JSON.parse(ie.data);return this._dataUpdateable=p.cV(Se,de)?p.cU(Se,de):void 0,Se}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return p.cW(this._dataUpdateable,ie.dataDiff,de),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ie){return p._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class Co{constructor(ie){this.self=ie,this.actor=new p.J(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ae,de)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=de},this.self.addProtocol=p.cA,this.self.removeProtocol=p.cB,this.self.registerRTLTextPlugin=ae=>{p.cX.setMethods(ae)},this.actor.registerMessageHandler("LDT",((ae,de)=>this._getDEMWorkerSource(ae,de.source).loadTile(de))),this.actor.registerMessageHandler("RDT",((ae,de)=>p._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ae,de.source).removeTile(de)})))),this.actor.registerMessageHandler("GCEZ",((ae,de)=>p._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterExpansionZoom(de)})))),this.actor.registerMessageHandler("GCC",((ae,de)=>p._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterChildren(de)})))),this.actor.registerMessageHandler("GCL",((ae,de)=>p._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,de.type,de.source).getClusterLeaves(de)})))),this.actor.registerMessageHandler("LD",((ae,de)=>this._getWorkerSource(ae,de.type,de.source).loadData(de))),this.actor.registerMessageHandler("GD",((ae,de)=>this._getWorkerSource(ae,de.type,de.source).getData())),this.actor.registerMessageHandler("LT",((ae,de)=>this._getWorkerSource(ae,de.type,de.source).loadTile(de))),this.actor.registerMessageHandler("RT",((ae,de)=>this._getWorkerSource(ae,de.type,de.source).reloadTile(de))),this.actor.registerMessageHandler("AT",((ae,de)=>this._getWorkerSource(ae,de.type,de.source).abortTile(de))),this.actor.registerMessageHandler("RMT",((ae,de)=>this._getWorkerSource(ae,de.type,de.source).removeTile(de))),this.actor.registerMessageHandler("RS",((ae,de)=>p._(this,void 0,void 0,(function*(){if(!this.workerSources[ae]||!this.workerSources[ae][de.type]||!this.workerSources[ae][de.type][de.source])return;const Se=this.workerSources[ae][de.type][de.source];delete this.workerSources[ae][de.type][de.source],Se.removeSource!==void 0&&Se.removeSource(de)})))),this.actor.registerMessageHandler("RM",(ae=>p._(this,void 0,void 0,(function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae],this.globalStates.delete(ae)})))),this.actor.registerMessageHandler("SR",((ae,de)=>p._(this,void 0,void 0,(function*(){this.referrer=de})))),this.actor.registerMessageHandler("SRPS",((ae,de)=>this._syncRTLPluginState(ae,de))),this.actor.registerMessageHandler("IS",((ae,de)=>p._(this,void 0,void 0,(function*(){this.self.importScripts(de)})))),this.actor.registerMessageHandler("SI",((ae,de)=>this._setImages(ae,de))),this.actor.registerMessageHandler("UL",((ae,de)=>p._(this,void 0,void 0,(function*(){this._getLayerIndex(ae).update(de.layers,de.removedIds,this._getGlobalState(ae))})))),this.actor.registerMessageHandler("UGS",((ae,de)=>p._(this,void 0,void 0,(function*(){const Se=this._getGlobalState(ae);for(const Ee in de)Se[Ee]=de[Ee]})))),this.actor.registerMessageHandler("SL",((ae,de)=>p._(this,void 0,void 0,(function*(){this._getLayerIndex(ae).replace(de,this._getGlobalState(ae))}))))}_getGlobalState(ie){let ae=this.globalStates.get(ie);return ae||(ae={},this.globalStates.set(ie,ae)),ae}_setImages(ie,ae){return p._(this,void 0,void 0,(function*(){this.availableImages[ie]=ae;for(const de in this.workerSources[ie]){const Se=this.workerSources[ie][de];for(const Ee in Se)Se[Ee].availableImages=ae}}))}_syncRTLPluginState(ie,ae){return p._(this,void 0,void 0,(function*(){return yield p.cX.syncState(ae,this.self.importScripts)}))}_getAvailableImages(ie){let ae=this.availableImages[ie];return ae||(ae=[]),ae}_getLayerIndex(ie){let ae=this.layerIndexes[ie];return ae||(ae=this.layerIndexes[ie]=new s),ae}_getWorkerSource(ie,ae,de){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][ae]||(this.workerSources[ie][ae]={}),!this.workerSources[ie][ae][de]){const Se={sendAsync:(Ee,Le)=>(Ee.targetMapId=ie,this.actor.sendAsync(Ee,Le))};switch(ae){case"vector":this.workerSources[ie][ae][de]=new M(Se,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][ae][de]=new oo(Se,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][ae][de]=new this.externalWorkerSourceTypes[ae](Se,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][ae][de]}_getDEMWorkerSource(ie,ae){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][ae]||(this.demWorkerSources[ie][ae]=new D),this.demWorkerSources[ie][ae]}}return p.i(self)&&(self.worker=new Co(self)),Co})),u("index",["exports","./shared"],(function(p,s){var P="5.7.3";function A(){var _=new s.A(4);return s.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let E,M;const D={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_,r,c){const m=requestAnimationFrame((b=>{v(),r(b)})),{unsubscribe:v}=s.s(_.signal,"abort",(()=>{v(),cancelAnimationFrame(m),c(s.c())}),!1)},frameAsync(_){return new Promise(((r,c)=>{this.frame(_,r,c)}))},getImageData(_,r=0){return this.getImageCanvasContext(_).getImageData(-r,-r,_.width+2*r,_.height+2*r)},getImageCanvasContext(_){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=_.width,r.height=_.height,c.drawImage(_,0,0,_.width,_.height),c},resolveURL:_=>(E||(E=document.createElement("a")),E.href=_,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class j{static testProp(r){if(!j.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in j.docStyle)return r[c];return r[0]}static create(r,c,m){const v=window.document.createElement(r);return c!==void 0&&(v.className=c),m&&m.appendChild(v),v}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){j.docStyle&&j.selectProp&&(j.userSelect=j.docStyle[j.selectProp],j.docStyle[j.selectProp]="none")}static enableDrag(){j.docStyle&&j.selectProp&&(j.docStyle[j.selectProp]=j.userSelect)}static setTransform(r,c){r.style[j.transformProp]=c}static addEventListener(r,c,m,v={}){r.addEventListener(c,m,"passive"in v?v:v.capture)}static removeEventListener(r,c,m,v={}){r.removeEventListener(c,m,"passive"in v?v:v.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",j.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",j.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",j.suppressClickInternal,!0)}),0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,m){const v=c.boundingClientRect;return new s.P((m.clientX-v.left)/c.x-r.clientLeft,(m.clientY-v.top)/c.y-r.clientTop)}static mousePos(r,c){const m=j.getScale(r);return j.getPoint(r,m,c)}static touchPos(r,c){const m=[],v=j.getScale(r);for(let b=0;b<c.length;b++)m.push(j.getPoint(r,v,c[b]));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),m=c.querySelectorAll("script");for(const v of m)v.remove();return j.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const m=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!m.includes("javascript:")&&!m.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const m of c)j.removeAttributes(m),j.clean(m)}static removeAttributes(r){for(const{name:c,value:m}of r.attributes)j.isPossiblyDangerous(c,m)&&r.removeAttribute(c)}}j.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,j.selectProp=j.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),j.transformProp=j.testProp(["transform","WebkitTransform"]);const G={supported:!1,testSupport:function(_){!K&&$&&(J?ee(_):F=_)}};let F,$,K=!1,J=!1;function ee(_){const r=_.createTexture();_.bindTexture(_.TEXTURE_2D,r);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,$),_.isContextLost())return;G.supported=!0}catch{}_.deleteTexture(r),K=!0}var oe;typeof document<"u"&&($=document.createElement("img"),$.onload=()=>{F&&ee(F),F=null,J=!0},$.onerror=()=>{K=!0,F=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(_){let r,c,m,v;_.resetRequestQueue=()=>{r=[],c=0,m=0,v={}},_.addThrottleControl=R=>{const L=m++;return v[L]=R,L},_.removeThrottleControl=R=>{delete v[R],T()},_.getImage=(R,L,U=!0)=>new Promise(((H,W)=>{G.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),s.e(R,{type:"image"}),r.push({abortController:L,requestParameters:R,supportImageRefresh:U,state:"queued",onError:X=>{W(X)},onSuccess:X=>{H(X)}}),T()}));const b=R=>s._(this,void 0,void 0,(function*(){R.state="running";const{requestParameters:L,supportImageRefresh:U,onError:H,onSuccess:W,abortController:X}=R,ne=U===!1&&!s.i(self)&&!s.g(L.url)&&(!L.headers||Object.keys(L.headers).reduce(((me,ye)=>me&&ye==="accept"),!0));c++;const he=ne?O(L,X):s.m(L,X);try{const me=yield he;delete R.abortController,R.state="completed",me.data instanceof HTMLImageElement||s.b(me.data)?W(me):me.data&&W({data:yield(pe=me.data,typeof createImageBitmap=="function"?s.f(pe):s.h(pe)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete R.abortController,H(me)}finally{c--,T()}var pe})),T=()=>{const R=(()=>{for(const L of Object.keys(v))if(v[L]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=c;L<R&&r.length>0;L++){const U=r.shift();U.abortController.signal.aborted?L--:b(U)}},O=(R,L)=>new Promise(((U,H)=>{const W=new Image,X=R.url,ne=R.credentials;ne&&ne==="include"?W.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!s.d(X))&&(W.crossOrigin="anonymous"),L.signal.addEventListener("abort",(()=>{W.src="",H(s.c())})),W.fetchPriority="high",W.onload=()=>{W.onerror=W.onload=null,U({data:W})},W.onerror=()=>{W.onerror=W.onload=null,L.signal.aborted||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},W.src=X}))})(oe||(oe={})),oe.resetRequestQueue();class Y{constructor(r){this._transformRequestFn=r??null}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function re(_){const r=[];if(typeof _=="string")r.push({id:"default",url:_});else if(_&&_.length>0){const c=[];for(const{id:m,url:v}of _){const b=`${m}${v}`;c.indexOf(b)===-1&&(c.push(b),r.push({id:m,url:v}))}}return r}function ue(_,r,c){try{const m=new URL(_);return m.pathname+=`${r}${c}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ge(_){const{userImage:r}=_;return!!(r&&r.render&&r.render())&&(_.data.replace(new Uint8Array(r.data.buffer)),!0)}class Oe extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:m}of this.requestors)m(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const m=c.spriteData;c.data=new s.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let m=!0;const v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "content" value`))),m=!1),m}_validateStretch(r,c){if(!r)return!0;let m=0;for(const v of r){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const m=c.spriteData,v=m&&m.width||c.data.width,b=m&&m.height||c.data.height;return!(r[0]<0||v<r[0]||r[1]<0||b<r[1]||r[2]<0||v<r[2]||r[3]<0||b<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,m=!0){const v=this.getImage(r);if(m&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise(((c,m)=>{let v=!0;if(!this.isLoaded())for(const b of r)this.images[b]||(v=!1);this.isLoaded()||v?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})}))}_getImagesForIds(r){const c={};for(const m of r){let v=this.getImage(m);v||(this.fire(new s.l("styleimagemissing",{id:m})),v=this.getImage(m)),v?c[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:s.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],m=this.getImage(r);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},b=new s.I(v,m);this.patterns[r]={bin:v,position:b}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const b in this.patterns)r.push(this.patterns[b].bin);const{w:c,h:m}=s.p(r),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const b in this.patterns){const{bin:T}=this.patterns[b],O=T.x+1,R=T.y+1,L=this.getImage(b).data,U=L.width,H=L.height;s.R.copy(L,v,{x:0,y:0},{x:O,y:R},{width:U,height:H}),s.R.copy(L,v,{x:0,y:H-1},{x:O,y:R-1},{width:U,height:1}),s.R.copy(L,v,{x:0,y:0},{x:O,y:R+H},{width:U,height:1}),s.R.copy(L,v,{x:U-1,y:0},{x:O-1,y:R},{width:1,height:H}),s.R.copy(L,v,{x:0,y:0},{x:O+U,y:R},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.getImage(c);m||s.w(`Image with ID: "${c}" was not found`),ge(m)&&this.updateImage(c,m)}}}const We=1e20;function Re(_,r,c,m,v,b,T,O,R){for(let L=r;L<r+m;L++)Ve(_,c*b+L,b,v,T,O,R);for(let L=c;L<c+v;L++)Ve(_,L*b+r,1,m,T,O,R)}function Ve(_,r,c,m,v,b,T){b[0]=0,T[0]=-We,T[1]=We,v[0]=_[r];for(let O=1,R=0,L=0;O<m;O++){v[O]=_[r+O*c];const U=O*O;do{const H=b[R];L=(v[O]-v[H]+U-H*H)/(O-H)/2}while(L<=T[R]&&--R>-1);R++,b[R]=O,T[R]=L,T[R+1]=We}for(let O=0,R=0;O<m;O++){for(;T[R+1]<O;)R++;const L=b[R],U=O-L;_[r+O*c]=v[L]+U*U}}class Ye{constructor(r,c,m){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={},this.lang=m}setURL(r){this.url=r}getGlyphs(r){return s._(this,void 0,void 0,(function*(){const c=[];for(const b in r)for(const T of r[b])c.push(this._getAndCacheGlyphsPromise(b,T));const m=yield Promise.all(c),v={};for(const{stack:b,id:T,glyph:O}of m)v[b]||(v[b]={}),v[b][T]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return v}))}_getAndCacheGlyphsPromise(r,c){return s._(this,void 0,void 0,(function*(){let m=this.entries[r];m||(m=this.entries[r]={glyphs:{},requests:{},ranges:{}});let v=m.glyphs[c];if(v!==void 0)return{stack:r,id:c,glyph:v};if(v=this._tinySDF(m,r,c),v)return m.glyphs[c]=v,{stack:r,id:c,glyph:v};const b=Math.floor(c/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[b])return{stack:r,id:c,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[b]){const O=Ye.loadGlyphRange(r,b,this.url,this.requestManager);m.requests[b]=O}const T=yield m.requests[b];for(const O in T)this._doesCharSupportLocalGlyph(+O)||(m.glyphs[+O]=T[+O]);return m.ranges[b]=!0,{stack:r,id:c,glyph:T[c]||null}}))}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(r))||s.u["CJK Unified Ideographs"](r)||s.u["Hangul Syllables"](r)||s.u.Hiragana(r)||s.u.Katakana(r)||s.u["CJK Symbols and Punctuation"](r)||s.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,c,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let b=r.tinySDF;if(!b){let O="400";/bold/i.test(c)?O="900":/medium/i.test(c)?O="500":/light/i.test(c)&&(O="200"),b=r.tinySDF=new Ye.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:v,fontWeight:O})}const T=b.draw(String.fromCharCode(m));return{id:m,bitmap:new s.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ye.loadGlyphRange=function(_,r,c,m){return s._(this,void 0,void 0,(function*(){const v=256*r,b=v+255,T=m.transformRequest(c.replace("{fontstack}",_).replace("{range}",`${v}-${b}`),"Glyphs"),O=yield s.n(T,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${r}, ${v}-${b}`);const R={};for(const L of s.o(O.data))R[L.id]=L;return R}))},Ye.TinySDF=class{constructor({fontSize:_=24,buffer:r=3,radius:c=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:b="normal",fontStyle:T="normal",lang:O=null}={}){this.buffer=r,this.cutoff=m,this.radius=c,this.lang=O;const R=this.size=_+4*r,L=this._createCanvas(R),U=this.ctx=L.getContext("2d",{willReadFrequently:!0});U.font=`${T} ${b} ${_}px ${v}`,U.textBaseline="alphabetic",U.textAlign="left",U.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(_){const r=document.createElement("canvas");return r.width=r.height=_,r}draw(_){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:b}=this.ctx.measureText(_),T=Math.ceil(c),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-v))),R=Math.min(this.size-this.buffer,T+Math.ceil(m)),L=O+2*this.buffer,U=R+2*this.buffer,H=Math.max(L*U,0),W=new Uint8ClampedArray(H),X={data:W,width:L,height:U,glyphWidth:O,glyphHeight:R,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(O===0||R===0)return X;const{ctx:ne,buffer:he,gridInner:pe,gridOuter:me}=this;this.lang&&(ne.lang=this.lang),ne.clearRect(he,he,O,R),ne.fillText(_,he,he+T);const ye=ne.getImageData(he,he,O,R);me.fill(We,0,H),pe.fill(0,0,H);for(let we=0;we<R;we++)for(let ve=0;ve<O;ve++){const Ae=ye.data[4*(we*O+ve)+3]/255;if(Ae===0)continue;const Ie=(we+he)*L+ve+he;if(Ae===1)me[Ie]=0,pe[Ie]=We;else{const xe=.5-Ae;me[Ie]=xe>0?xe*xe:0,pe[Ie]=xe<0?xe*xe:0}}Re(me,0,0,L,U,L,this.f,this.v,this.z),Re(pe,he,he,O,R,L,this.f,this.v,this.z);for(let we=0;we<H;we++){const ve=Math.sqrt(me[we])-Math.sqrt(pe[we]);W[we]=Math.round(255-255*(ve/this.radius+this.cutoff))}return X}};class ot{constructor(){this.specification=s.v.light.position}possiblyEvaluate(r,c){return s.B(r.expression.evaluate(c))}interpolate(r,c,m){return{x:s.C.number(r.x,c.x,m),y:s.C.number(r.y,c.y,m),z:s.C.number(r.z,c.z,m)}}}let at;class st extends s.E{constructor(r){super(),at=at||new s.r({anchor:new s.D(s.v.light.anchor),position:new ot,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.t(at,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(s.x,r,c))for(const m in r){const v=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,m){return(!m||m.validate!==!1)&&s.y(this,r.call(s.z,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const lt=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Ne extends s.E{constructor(r){super(),this._transitionable=new s.t(lt,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0))}setSky(r,c={}){if(!this._validate(s.G,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in r){const v=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,m={}){return m?.validate!==!1&&s.y(this,r.call(s.z,s.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class tt{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const m=r.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(r,c)),this.dashEntry[m]}getDashRanges(r,c,m){const v=[];let b=r.length%2==1?-r[r.length-1]*m:0,T=r[0]*m,O=!0;v.push({left:b,right:T,isDash:O,zeroLength:r[0]===0});let R=r[0];for(let L=1;L<r.length;L++){O=!O;const U=r[L];b=R*m,R+=U,T=R*m,v.push({left:b,right:T,isDash:O,zeroLength:U===0})}return v}addRoundDash(r,c,m){const v=c/2;for(let b=-m;b<=m;b++){const T=this.width*(this.nextRow+m+b);let O=0,R=r[O];for(let L=0;L<this.width;L++){L/R.right>1&&(R=r[++O]);const U=Math.abs(L-R.left),H=Math.abs(L-R.right),W=Math.min(U,H);let X;const ne=b/m*(v+1);if(R.isDash){const he=v-Math.abs(ne);X=Math.sqrt(W*W+he*he)}else X=v-Math.sqrt(W*W+ne*ne);this.data[T+L]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(r){for(let O=r.length-1;O>=0;--O){const R=r[O],L=r[O+1];R.zeroLength?r.splice(O,1):L&&L.isDash===R.isDash&&(L.left=R.left,r.splice(O,1))}const c=r[0],m=r[r.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const v=this.width*this.nextRow;let b=0,T=r[b];for(let O=0;O<this.width;O++){O/T.right>1&&(T=r[++b]);const R=Math.abs(O-T.left),L=Math.abs(O-T.right),U=Math.min(R,L);this.data[v+O]=Math.max(0,Math.min(255,(T.isDash?U:-U)+128))}}addDash(r,c){const m=c?7:0,v=2*m+1;if(this.nextRow+v>this.height)return s.w("LineAtlas out of space"),null;let b=0;for(let O=0;O<r.length;O++)b+=r[O];if(b!==0){const O=this.width/b,R=this.getDashRanges(r,this.width,O);c?this.addRoundDash(R,O,m):this.addRegularDash(R)}const T={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:b};return this.nextRow+=v,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const ut="maplibre_preloaded_worker_pool";class Ce{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ce.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ut]}numActive(){return Object.keys(this.active).length}}const qe=Math.floor(D.hardwareConcurrency/2);let yt,Rt;function $t(){return yt||(yt=new Ce),yt}Ce.workerCount=s.H(globalThis)?Math.max(Math.min(qe,3),1):1;class Wt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const m=this.workerPool.acquire(c);for(let v=0;v<m.length;v++){const b=new s.J(m[v],c);b.name=`Worker ${v}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const m=[];for(const v of this.actors)m.push(v.sendAsync({type:r,data:c}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const m of this.actors)m.registerMessageHandler(r,c)}}function er(){return Rt||(Rt=new Wt($t(),s.K),Rt.registerMessageHandler("GR",((_,r,c)=>s.m(r,c)))),Rt}function tr(_,r){const c=s.L();return s.M(c,c,[1,1,0]),s.N(c,c,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?s.O(c,c,_.calculatePosMatrix(r.toUnwrapped())):c}function vt(_,r,c,m,v,b,T){var O;const R=(function(W,X,ne){if(W)for(const he of W){const pe=X[he];if(pe&&pe.source===ne&&pe.type==="fill-extrusion")return!0}else for(const he in X){const pe=X[he];if(pe.source===ne&&pe.type==="fill-extrusion")return!0}return!1})((O=v?.layers)!==null&&O!==void 0?O:null,r,_.id),L=b.maxPitchScaleFactor(),U=_.tilesIn(m,L,R);U.sort(Ft);const H=[];for(const W of U)H.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(r,c,_._state,W.queryGeometry,W.cameraQueryGeometry,W.scale,v,b,L,tr(_.transform,W.tileID),T?(X,ne)=>T(W.tileID,X,ne):void 0)});return(function(W,X){for(const ne in W)for(const he of W[ne])ir(he,X);return W})((function(W){const X={},ne={};for(const he of W){const pe=he.queryResults,me=he.wrappedTileID,ye=ne[me]=ne[me]||{};for(const we in pe){const ve=pe[we],Ae=ye[we]=ye[we]||{},Ie=X[we]=X[we]||[];for(const xe of ve)Ae[xe.featureIndex]||(Ae[xe.featureIndex]=!0,Ie.push(xe))}}return X})(H),_)}function Ft(_,r){const c=_.tileID,m=r.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function ir(_,r){const c=_.feature,m=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=m}function pt(_,r,c){return s._(this,void 0,void 0,(function*(){let m=_;if(_.url?m=(yield s.j(r.transformRequest(_.url,"Source"),c)).data:yield D.frameAsync(c),!m)return null;const v=s.Q(s.e(m,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(v.vectorLayerIds=m.vector_layers.map((b=>b.id))),v}))}class dr{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof s.S?new s.S(r.lng,r.lat):s.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof s.S?new s.S(r.lng,r.lat):s.S.convert(r),this}extend(r){const c=this._sw,m=this._ne;let v,b;if(r instanceof s.S)v=r,b=r;else{if(!(r instanceof dr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(dr.convert(r)):this.extend(s.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(s.S.convert(r)):this;if(v=r._sw,b=r._ne,!v||!b)return this}return c||m?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),m.lng=Math.max(b.lng,m.lng),m.lat=Math.max(b.lat,m.lat)):(this._sw=new s.S(v.lng,v.lat),this._ne=new s.S(b.lng,b.lat)),this}getCenter(){return new s.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.S(this.getWest(),this.getNorth())}getSouthEast(){return new s.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:m}=s.S.convert(r);let v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&v}static convert(r){return r instanceof dr?r:r&&new dr(r)}static fromLngLat(r,c=0){const m=360*c/40075017,v=m/Math.cos(Math.PI/180*r.lat);return new dr(new s.S(r.lng-v,r.lat-m),new s.S(r.lng+v,r.lat+m))}adjustAntiMeridian(){const r=new s.S(this._sw.lng,this._sw.lat),c=new s.S(this._ne.lng,this._ne.lat);return new dr(r,r.lng>c.lng?new s.S(c.lng+360,c.lat):c)}}class rr{constructor(r,c,m){this.bounds=dr.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),m=Math.floor(s.V(this.bounds.getWest())*c),v=Math.floor(s.U(this.bounds.getNorth())*c),b=Math.ceil(s.V(this.bounds.getEast())*c),T=Math.ceil(s.U(this.bounds.getSouth())*c);return r.x>=m&&r.x<b&&r.y>=v&&r.y<T}}class qr extends s.E{constructor(r,c,m,v){if(super(),this.id=r,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.Q(c,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(s.e(this,r),r.bounds&&(this.tileBounds=new rr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,this.fire(new s.k(r))}}))}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(r){return s._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};m.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise(((b,T)=>{r.reloadPromise={resolve:b,reject:T}}))}else r.actor=this.dispatcher.getActor(),v="LT";r.abortController=new AbortController;try{const b=yield r.actor.sendAsync({type:v,data:m},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,b)}catch(b){if(delete r.abortController,r.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(r,null)}}))}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const m=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(m.resolve).catch(m.reject)}}abortTile(r){return s._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}unloadTile(r){return s._(this,void 0,void 0,(function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Hr extends s.E{constructor(r,c,m,v){super(),this.id=r,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},c),s.e(this,s.Q(c,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,(function*(r=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(s.e(this,c),c.bounds&&(this.tileBounds=new rr(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,this.fire(new s.k(c))}}))}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}serialize(){return s.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return s._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const m=yield oe.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const v=this.map.painter.context,b=v.gl,T=m.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new s.T(v,T,b.RGBA,{useMipmap:!0}),r.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}}))}abortTile(r){return s._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)}))}unloadTile(r){return s._(this,void 0,void 0,(function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)}))}hasTransition(){return!1}}class vn extends Hr{constructor(r,c,m,v){super(r,c,m,v),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return s._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const v=yield oe.getImage(m,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(v&&v.data){const b=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&r.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const T=s.b(b)&&s.W()?b:yield this.readImageNow(b),O={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const R=yield r.actor.sendAsync({type:"LDT",data:O});r.dem=R,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(v){if(delete r.abortController,r.aborted)r.state="unloaded";else if(v)throw r.state="errored",v}}))}readImageNow(r){return s._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&s.X()){const c=r.width+2,m=r.height+2;try{return new s.R({width:c,height:m},yield s.Y(r,-1,-1,c,m))}catch{}}return D.getImageData(r,1)}))}_getNeighboringTiles(r){const c=r.canonical,m=Math.pow(2,c.z),v=(c.x-1+m)%m,b=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+m)%m,O=c.x+1===m?r.wrap+1:r.wrap,R={};return R[new s.Z(r.overscaledZ,b,c.z,v,c.y).key]={backfilled:!1},R[new s.Z(r.overscaledZ,O,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(R[new s.Z(r.overscaledZ,b,c.z,v,c.y-1).key]={backfilled:!1},R[new s.Z(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},R[new s.Z(r.overscaledZ,O,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<m&&(R[new s.Z(r.overscaledZ,b,c.z,v,c.y+1).key]={backfilled:!1},R[new s.Z(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},R[new s.Z(r.overscaledZ,O,c.z,T,c.y+1).key]={backfilled:!1}),R}unloadTile(r){return s._(this,void 0,void 0,(function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))}))}}class qn extends s.E{constructor(r,c,m,v){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=m.getActor(),this.setEventedParent(v),this._data=c.data,this._options=s.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:s.$,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:s.$,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(s.$/this.tileSize)}_getClusterMaxZoom(r){const c=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${c}"`),c}load(){return s._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=s.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return s._(this,void 0,void 0,(function*(){const r=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})}))}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map((c=>c.coordinates)).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,(function*(){const r=new dr,c=yield this.getData();let m;switch(c.type){case"FeatureCollection":m=c.features.map((v=>this.getCoordinatesFromGeometry(v.geometry))).flat(1/0);break;case"Feature":m=this.getCoordinatesFromGeometry(c.geometry);break;default:m=this.getCoordinatesFromGeometry(c)}if(m.length==0)return r;for(let v=0;v<m.length-1;v+=2)r.extend([m[v],m[v+1]]);return r}))}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:m}})}_updateWorkerData(){return s._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:r,diff:c}=this._pendingWorkerUpdate;if(!r&&!c)return void s.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const m=s.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(m.request=this.map._requestManager.transformRequest(D.resolveURL(r),"Source"),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):c&&(m.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:m});if(this._isUpdatingWorker=!1,this._removed||v.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));this._data=v.data;let b=null;v.resourceTiming&&v.resourceTiming[this.id]&&(b=v.resourceTiming[this.id].slice(0));const T={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&s.e(T,{resourceTiming:b}),this.fire(new s.l("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))}catch(v){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(v))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return s._(this,void 0,void 0,(function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const v=yield this.actor.sendAsync({type:c,data:m},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(v,this.map.painter,c==="RT")}))}abortTile(r){return s._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0}))}unloadTile(r){return s._(this,void 0,void 0,(function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Xn extends s.E{constructor(r,c,m,v){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(r){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield oe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new s.k(c))}}))}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(s.a1.fromLngLat);var m;return this.tileID=(function(v){const b=s.a2.fromPoints(v),T=b.width(),O=b.height(),R=Math.max(T,O),L=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),U=Math.pow(2,L);return new s.a4(L,Math.floor((b.minX+b.maxX)/2*U),Math.floor((b.minY+b.maxY)/2*U))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((v=>this.tileID.getTilePoint(v)._round())),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new s.T(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const b=this.tiles[v];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,m=!0)}m&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return s._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:c,minY:m,maxX:v,maxY:b}=s.a2.fromPoints(r),T={};for(let O=0;O<=s.a3;O++){const R=Math.pow(2,O),L=Math.floor(c*R),U=Math.floor(m*R),H=Math.floor(v*R),W=Math.floor(b*R);T[O]={minTileX:L,minTileY:U,maxTileX:H,maxTileY:W}}return T}}class ki extends Xn{constructor(r,c,m,v){super(r,c,m,v),this.roundZoom=!0,this.type="video",this.options=c}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield s.a5(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new s.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new s.k(new s.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const b=this.tiles[v];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,m=!0)}m&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class On extends Xn{constructor(r,c,m,v){super(r,c,m,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((T=>typeof T!="number"))))||this.fire(new s.k(new s.a6(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a6(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new s.k(new s.a6(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a6(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a6(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,m=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(c,this.canvas,m.RGBA,{premultiply:!0});let v=!1;for(const b in this.tiles){const T=this.tiles[b];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const ni={},oa=_=>{switch(_){case"geojson":return qn;case"image":return Xn;case"raster":return Hr;case"raster-dem":return vn;case"vector":return qr;case"video":return ki;case"canvas":return On}return ni[_]},Fa="RTLPluginLoaded";class Pa extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=er()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return s._(this,arguments,void 0,(function*(c,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=D.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return s._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(Fa))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ao=null;function oo(){return Ao||(Ao=new Pa),Ao}class Co{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=s.a7(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=(function(v,b){const T={};if(!b)return T;for(const O of v){const R=O.layerIds.map((L=>b.getLayer(L))).filter(Boolean);if(R.length!==0){O.layers=R,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map((L=>R.filter((U=>U.id===L))[0])));for(const L of R)T[L.id]=O}}return T})(r.buckets,c?.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const b=this.buckets[v];if(b instanceof s.a9){if(this.hasSymbolBuckets=!0,!m)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const b=this.buckets[v];if(b instanceof s.a9&&b.hasRTLText){this.hasRTLText=!0,oo().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const b=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(b))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new s.a8}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,m,v,b,T,O,R,L,U,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:b,scale:T,tileSize:this.tileSize,pixelPosMatrix:U,transform:R,params:O,queryPadding:this.queryPadding*L,getElevation:H},r,c,m):{}}querySourceFeatures(r,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",T=v._geojsonTileLayer||v[b];if(!T)return;const O=s.aa(c?.filter,c?.globalState),{z:R,x:L,y:U}=this.tileID.canonical,H={z:R,x:L,y:U};for(let W=0;W<T.length;W++){const X=T.feature(W);if(O.needGeometry){const pe=s.ab(X,!0);if(!O.filter(new s.F(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!O.filter(new s.F(this.tileID.overscaledZ),X))continue;const ne=m.getId(X,b),he=new s.ac(X,R,L,U,ne);he.tile=H,r.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const m=s.ad(r.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const b=this.expirationTime-c;b?this.expirationTime=m+Math.max(b,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const b=this.buckets[v],T=b.layers[0].sourceLayer||"_geojsonTileLayer",O=m[T],R=r[T];if(!O||!R||Object.keys(R).length===0)continue;b.update(R,O,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=c&&c.style&&c.style.getLayer(v);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=D.now()+r}setDependencies(r,c){const m={};for(const v of c)m[v]=!0;this.dependencies[r]=m}hasDependency(r,c){for(const m of r){const v=this.dependencies[m];if(v){for(const b of c)if(v[b])return!0}}return!1}}class je{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,m){const v=r.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const b={value:c,timeout:void 0};if(m!==void 0&&(b.timeout=setTimeout((()=>{this.remove(r,b)}),m)),this.data[v].push(b),this.order.push(v),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const m=r.wrapped().key,v=c===void 0?0:this.data[m].indexOf(c),b=this.data[m][v];return this.data[m].splice(v,1),b.timeout&&clearTimeout(b.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(b.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const m in this.data)for(const v of this.data[m])r(v.value)||c.push(v);for(const m of c)this.remove(m.value.tileID,m)}}class ie{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,m){const v=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][v]=this.stateChanges[r][v]||{},s.e(this.stateChanges[r][v],m),this.deletedStates[r]===null){this.deletedStates[r]={};for(const b in this.state[r])b!==v&&(this.deletedStates[r][b]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][v]===null){this.deletedStates[r][v]={};for(const b in this.state[r][v])m[b]||(this.deletedStates[r][v][b]=null)}else for(const b in m)this.deletedStates[r]&&this.deletedStates[r][v]&&this.deletedStates[r][v][b]===null&&delete this.deletedStates[r][v][b]}removeFeatureState(r,c,m){if(this.deletedStates[r]===null)return;const v=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},m&&c!==void 0)this.deletedStates[r][v]!==null&&(this.deletedStates[r][v]=this.deletedStates[r][v]||{},this.deletedStates[r][v][m]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][v])for(m in this.deletedStates[r][v]={},this.stateChanges[r][v])this.deletedStates[r][v][m]=null;else this.deletedStates[r][v]=null;else this.deletedStates[r]=null}getState(r,c){const m=String(c),v=s.e({},(this.state[r]||{})[m],(this.stateChanges[r]||{})[m]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const b=this.deletedStates[r][c];if(b===null)return{};for(const T in b)delete v[T]}return v}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const b={};for(const T in this.stateChanges[v])this.state[v][T]||(this.state[v][T]={}),s.e(this.state[v][T],this.stateChanges[v][T]),b[T]=this.state[v][T];m[v]=b}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const b={};if(this.deletedStates[v]===null)for(const T in this.state[v])b[T]={},this.state[v][T]={};else for(const T in this.deletedStates[v]){if(this.deletedStates[v][T]===null)this.state[v][T]={};else for(const O of Object.keys(this.deletedStates[v][T]))delete this.state[v][T][O];b[T]=this.state[v][T]}m[v]=m[v]||{},s.e(m[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in r)r[v].setFeatureState(m,c)}}const ae=89.25;function de(_,r){const c=s.ah(r.lat,-s.ai,s.ai);return new s.P(s.V(r.lng)*_,s.U(c)*_)}function Se(_,r){return new s.a1(r.x/_,r.y/_).toLngLat()}function Ee(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(s.ae(90-_.pitch)),Math.tan(s.ae(ae-_.pitch)))}function Le(_,r){const c=_.canonical,m=r/s.af(c.z),v=c.x+Math.pow(2,c.z)*_.wrap,b=s.ag(new Float64Array(16));return s.M(b,b,[v*m,c.y*m,0]),s.N(b,b,[m/s.$,m/s.$,1]),b}function Xe(_,r,c,m,v){const b=s.a1.fromLngLat(_,r),T=v*s.aj(1,_.lat),O=T*Math.cos(s.ae(c)),R=Math.sqrt(T*T-O*O),L=R*Math.sin(s.ae(-m)),U=R*Math.cos(s.ae(-m));return new s.a1(b.x+L,b.y+U,b.z+O)}function $e(_,r,c){const m=r.intersectsFrustum(_);if(!c||m===0)return m;const v=r.intersectsPlane(c);return v===0?0:m===2&&v===2?2:1}function nt(_,r,c){let m=0;const v=(c-r)/10;for(let b=0;b<10;b++)m+=v*Math.pow(Math.cos(r+(b+.5)/10*(c-r)),_);return m}function gt(_,r){return function(c,m,v,b,T){const O=2*((_-1)/s.ak(Math.cos(s.ae(ae-T))/Math.cos(s.ae(ae)))-1),R=Math.acos(v/b),L=2*nt(O-1,0,s.ae(T/2)),U=Math.min(s.ae(ae),R+s.ae(T/2)),H=nt(O-1,Math.min(U,R-s.ae(T/2)),U),W=Math.atan(m/v),X=Math.hypot(m,v);let ne=c;return ne+=s.ak(b/X/Math.max(.5,Math.cos(s.ae(T/2)))),ne+=O*s.ak(Math.cos(W))/2,ne-=s.ak(Math.max(1,H/L/r))/2,ne}}const ct=gt(9.314,3);function zt(_,r){const c=(r.roundZoom?Math.round:Math.floor)(_.zoom+s.ak(_.tileSize/r.tileSize));return Math.max(0,c)}function Be(_,r){const c=_.getCameraFrustum(),m=_.getClippingPlane(),v=_.screenPointToMercatorCoordinate(_.getCameraPoint()),b=s.a1.fromLngLat(_.center,_.elevation);v.z=b.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;const T=_.getCoveringTilesDetailsProvider(),O=T.allowVariableZoom(_,r),R=zt(_,r),L=r.minzoom||0,U=r.maxzoom!==void 0?r.maxzoom:_.maxZoom,H=Math.min(Math.max(0,R),U),W=Math.pow(2,H),X=[W*v.x,W*v.y,0],ne=[W*b.x,W*b.y,0],he=Math.hypot(b.x-v.x,b.y-v.y),pe=Math.abs(b.z-v.z),me=Math.hypot(he,pe),ye=Ae=>({zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),we=[],ve=[];if(_.renderWorldCopies&&T.allowWorldCopies())for(let Ae=1;Ae<=3;Ae++)we.push(ye(-Ae)),we.push(ye(Ae));for(we.push(ye(0));we.length>0;){const Ae=we.pop(),Ie=Ae.x,xe=Ae.y;let De=Ae.fullyVisible;const Ze={x:Ie,y:xe,z:Ae.zoom},Ge=T.getTileBoundingVolume(Ze,Ae.wrap,_.elevation,r);if(!De){const wt=$e(c,Ge,m);if(wt===0)continue;De=wt===2}const He=T.distanceToTile2d(v.x,v.y,Ze,Ge);let et=R;O&&(et=(r.calculateTileZoom||ct)(_.zoom+s.ak(_.tileSize/r.tileSize),He,pe,me,_.fov)),et=(r.roundZoom?Math.round:Math.floor)(et),et=Math.max(0,et);const Pt=Math.min(et,U);if(Ae.wrap=T.getWrap(b,Ze,Ae.wrap),Ae.zoom>=Pt){if(Ae.zoom<L)continue;const wt=H-Ae.zoom,dt=X[0]-.5-(Ie<<wt),Lt=X[1]-.5-(xe<<wt),vr=r.reparseOverscaled?Math.max(Ae.zoom,et):Ae.zoom;ve.push({tileID:new s.Z(Ae.zoom===U?vr:Ae.zoom,Ae.wrap,Ae.zoom,Ie,xe),distanceSq:s.al([ne[0]-.5-Ie,ne[1]-.5-xe]),tileDistanceToCamera:Math.sqrt(dt*dt+Lt*Lt)})}else for(let wt=0;wt<4;wt++)we.push({zoom:Ae.zoom+1,x:(Ie<<1)+wt%2,y:(xe<<1)+(wt>>1),wrap:Ae.wrap,fullyVisible:De})}return ve.sort(((Ae,Ie)=>Ae.distanceSq-Ie.distanceSq)).map((Ae=>Ae.tileID))}const sr=s.a2.fromPoints([new s.P(0,0),new s.P(s.$,s.$)]);class Cr extends s.E{constructor(r,c,m){super(),this.id=r,this.dispatcher=m,this.on("data",(v=>this._dataHandler(v))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((v,b,T,O)=>{const R=new(oa(b.type))(v,b,T,O);if(R.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${R.id}`);return R})(r,c,m,this),this._tiles={},this._cache=new je(0,(v=>this._unloadTile(v))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ie,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,m){return s._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,m)}catch(v){r.state="errored",v.status!==404?this._source.fire(new s.k(v,{tile:r})):this.update(this.transform,this.terrain)}}))}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new s.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const m=this._tiles[c];m.upload(r),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((r=>r.tileID)).sort(Ut).map((r=>r.key))}getRenderableIds(r){const c=[];for(const m in this._tiles)this._isIdRenderable(m,r)&&c.push(this._tiles[m]);return r?c.sort(((m,v)=>{const b=m.tileID,T=v.tileID,O=new s.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians),R=new s.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return b.overscaledZ-T.overscaledZ||R.y-O.y||R.x-O.x})).map((m=>m.tileID.key)):c.map((m=>m.tileID)).sort(Ut).map((m=>m.key))}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)r?this._reloadTile(c,"expired"):this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(r,c){return s._(this,void 0,void 0,(function*(){const m=this._tiles[r];m&&(m.state!=="loading"&&(m.state=c),yield this._loadTile(m,r,c))}))}_tileLoaded(r,c,m){r.timeAdded=D.now(),m==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const b=c[v];if(r.neighboringTiles&&r.neighboringTiles[b]){const T=this.getTileByID(b);m(r,T),m(T,r)}}function m(v,b){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let T=b.tileID.canonical.x-v.tileID.canonical.x;const O=b.tileID.canonical.y-v.tileID.canonical.y,R=Math.pow(2,v.tileID.canonical.z),L=b.tileID.key;T===0&&O===0||Math.abs(O)>1||(Math.abs(T)>1&&(Math.abs(T+R)===1?T+=R:Math.abs(T-R)===1&&(T-=R)),b.dem&&v.dem&&(v.dem.backfillBorder(b.dem,T,O),v.neighboringTiles&&v.neighboringTiles[L]&&(v.neighboringTiles[L].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c){const m=Object.values(r),v=this._getLoadedDescendents(m);for(const b of m){const T=v[b.key];if(!T)continue;const O=b.overscaledZ+Cr.maxUnderzooming;let R=1/0;for(const L of T){const U=L.tileID.overscaledZ;U<=O&&U<R&&(R=U)}if(R!==1/0)for(const L of T)L.tileID.overscaledZ===R&&(c[L.tileID.key]=L.tileID)}}_getLoadedDescendents(r){var c;const m={};for(const v in this._tiles){const b=this._tiles[v];if(b.hasData())for(const T of r)b.tileID.isChildOf(T)&&(m[c=T.key]||(m[c]=[])).push(b)}return m}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const m=this._loadedParentTiles[r.key];return m&&m.tileID.overscaledZ>=c?m:null}for(let m=r.overscaledZ-1;m>=c;m--){const v=r.scaledTo(m),b=this._getLoadedTile(v);if(b)return b}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,m=Math.ceil(r.height/this._source.tileSize)+1,v=Math.floor(c*m*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(b)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const m={};for(const v in this._tiles){const b=this._tiles[v];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),m[b.tileID.key]=b}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(r,c,m,v){const b={},T={},O=Object.keys(r),R=D.now();for(const L of O){const U=r[L],H=this._tiles[L];if(!H||H.fadeEndTime!==0&&H.fadeEndTime<=R)continue;const W=this.findLoadedParent(U,c),X=this.findLoadedSibling(U),ne=W||X||null;ne&&(this._addTile(ne.tileID),b[ne.tileID.key]=ne.tileID),T[L]=U}this._retainLoadedChildren(T,r);for(const L in b)r[L]||(this._coveredTiles[L]=!0,r[L]=b[L]);if(v){const L={},U={};for(const H of m)this._tiles[H.key].hasData()?L[H.key]=H:U[H.key]=H;for(const H in U){const W=U[H].children(this._source.maxzoom);this._tiles[W[0].key]&&this._tiles[W[1].key]&&this._tiles[W[2].key]&&this._tiles[W[3].key]&&(L[W[0].key]=r[W[0].key]=W[0],L[W[1].key]=r[W[1].key]=W[1],L[W[2].key]=r[W[2].key]=W[2],L[W[3].key]=r[W[3].key]=W[3],delete U[H])}for(const H in U){const W=U[H],X=this.findLoadedParent(W,this._source.minzoom),ne=this.findLoadedSibling(W),he=X||ne||null;if(he){L[he.tileID.key]=r[he.tileID.key]=he.tileID;for(const pe in L)L[pe].isChildOf(he.tileID)&&delete L[pe]}}for(const H in this._tiles)L[H]||(this._coveredTiles[H]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let m;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=r.getVisibleUnwrappedCoordinates(this._source.tileID).map((L=>new s.Z(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y))):(m=Be(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter((L=>this._source.hasTile(L))))):m=[];const v=zt(r,this._source),b=Math.max(v-Cr.maxOverzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const U of m)if(U.canonical.z>this._source.minzoom){const H=U.scaledTo(U.canonical.z-1);L[H.key]=H;const W=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));L[W.key]=W}m=m.concat(Object.values(L))}const T=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(m,v);pr(this._source.type)&&this._updateCoveredAndRetainedTiles(O,b,m,c);for(const L in O)this._tiles[L].clearFadeHold();const R=s.am(this._tiles,O);for(const L of R){const U=this._tiles[L];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var m;const v={},b={},T=Math.max(c-Cr.maxOverzooming,this._source.minzoom),O={};for(const R of r){const L=this._addTile(R);v[R.key]=R,L.hasData()||c<this._source.maxzoom&&(O[R.key]=R)}this._retainLoadedChildren(O,v);for(const R of r){let L=this._tiles[R.key];if(L.hasData())continue;if(c+1>this._source.maxzoom){const H=R.children(this._source.maxzoom)[0],W=this.getTile(H);if(W&&W.hasData()){v[H.key]=H;continue}}else{const H=R.children(this._source.maxzoom);if(H.length===4&&v[H[0].key]&&v[H[1].key]&&v[H[2].key]&&v[H[3].key]||H.length===1&&v[H[0].key])continue}let U=L.wasRequested();for(let H=R.overscaledZ-1;H>=T;--H){const W=R.scaledTo(H);if(b[W.key])break;if(b[W.key]=!0,L=this.getTile(W),!L&&U&&(L=this._addTile(W)),L){const X=L.hasData();if((X||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||U)&&(v[W.key]=W),U=L.wasRequested(),X)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let m,v=this._tiles[r].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}c.push(v.key);const b=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(b),m)break;v=b}for(const b of c)this._loadedParentTiles[b]=m}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,m=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=m}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const m=c;return c||(c=new Co(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,m||this._source.fire(new s.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const m=c.getExpiryTimeout();m&&(this._timers[r]=setTimeout((()=>{this._reloadTile(r,"expired"),delete this._timers[r]}),m))}refreshTiles(r){for(const c in this._tiles)(this._isIdRenderable(c)||this._tiles[c].state=="errored")&&r.some((m=>m.equals(this._tiles[c].tileID.canonical)))&&this._reloadTile(c,"expired")}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,m){const v=[],b=this.transform;if(!b)return v;const T=b.getCoveringTilesDetailsProvider().allowWorldCopies(),O=m?b.getCameraQueryGeometry(r):r,R=X=>b.screenPointToMercatorCoordinate(X,this.terrain),L=this.transformBbox(r,R,!T),U=this.transformBbox(O,R,!T),H=this.getIds(),W=s.a2.fromPoints(U);for(let X=0;X<H.length;X++){const ne=this._tiles[H[X]];if(ne.holdingForFade())continue;const he=T?[ne.tileID]:[ne.tileID.unwrapTo(-1),ne.tileID.unwrapTo(0)],pe=Math.pow(2,b.zoom-ne.tileID.overscaledZ),me=c*ne.queryPadding*s.$/ne.tileSize/pe;for(const ye of he){const we=W.map((ve=>ye.getTilePoint(new s.a1(ve.x,ve.y))));if(we.expandBy(me),we.intersects(sr)){const ve=L.map((Ie=>ye.getTilePoint(Ie))),Ae=U.map((Ie=>ye.getTilePoint(Ie)));v.push({tile:ne,tileID:T?ye:ye.unwrapTo(0),queryGeometry:ve,cameraQueryGeometry:Ae,scale:pe})}}}return v}transformBbox(r,c,m){let v=r.map(c);if(m){const b=s.a2.fromPoints(r);b.shrinkBy(.001*Math.min(b.width(),b.height()));const T=b.map(c);s.a2.fromPoints(v).covers(T)||(v=v.map((O=>O.x>.5?new s.a1(O.x-1,O.y,O.z):O)))}return v}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map((m=>this._tiles[m].tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(pr(this._source.type)){const r=D.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,m){this._state.updateState(r=r||"_geojsonTileLayer",c,m)}removeFeatureState(r,c,m){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,m)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,m){const v=this._tiles[r];v&&v.setDependencies(c,m)}reloadTilesForDependencies(r,c){for(const m in this._tiles)this._tiles[m].hasDependency(r,c)&&this._reloadTile(m,"reloading");this._cache.filter((m=>!m.hasDependency(r,c)))}}function Ut(_,r){const c=Math.abs(2*_.wrap)-+(_.wrap<0),m=Math.abs(2*r.wrap)-+(r.wrap<0);return _.overscaledZ-r.overscaledZ||m-c||r.canonical.y-_.canonical.y||r.canonical.x-_.canonical.x}function pr(_){return _==="raster"||_==="image"||_==="video"}Cr.maxOverzooming=10,Cr.maxUnderzooming=3;class en{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=s.ah(r,0,1);let c=1,m=this._distances[c];const v=r*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const b=c-1,T=this._distances[b],O=m-T,R=O>0?(v-T)/O:0;return this.points[b].mult(1-R).add(this.points[c].mult(R))}}function Rn(_,r){let c=!0;return _==="always"||_!=="never"&&r!=="never"||(c=!1),c}class Gn{constructor(r,c,m){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(r/m),this.yCellCount=Math.ceil(c/m);for(let T=0;T<this.xCellCount*this.yCellCount;T++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,m,v,b){this._forEachCell(c,m,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(r,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(r,c,m,v,b,T){this.boxCells[b].push(T)}_insertCircleCell(r,c,m,v,b,T){this.circleCells[b].push(T)}_query(r,c,m,v,b,T,O){if(m<0||r>this.width||v<0||c>this.height)return[];const R=[];if(r<=0&&c<=0&&this.width<=m&&this.height<=v){if(b)return[{key:null,x1:r,y1:c,x2:m,y2:v}];for(let L=0;L<this.boxKeys.length;L++)R.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const U=this.circles[3*L],H=this.circles[3*L+1],W=this.circles[3*L+2];R.push({key:this.circleKeys[L],x1:U-W,y1:H-W,x2:U+W,y2:H+W})}}else this._forEachCell(r,c,m,v,this._queryCell,R,{hitTest:b,overlapMode:T,seenUids:{box:{},circle:{}}},O);return R}query(r,c,m,v){return this._query(r,c,m,v,!1,null)}hitTest(r,c,m,v,b,T){return this._query(r,c,m,v,!0,b,T).length>0}hitTestCircle(r,c,m,v,b){const T=r-m,O=r+m,R=c-m,L=c+m;if(O<0||T>this.width||L<0||R>this.height)return!1;const U=[];return this._forEachCell(T,R,O,L,this._queryCellCircle,U,{hitTest:!0,overlapMode:v,circle:{x:r,y:c,radius:m},seenUids:{box:{},circle:{}}},b),U.length>0}_queryCell(r,c,m,v,b,T,O,R){const{seenUids:L,hitTest:U,overlapMode:H}=O,W=this.boxCells[b];if(W!==null){const ne=this.bboxes;for(const he of W)if(!L.box[he]){L.box[he]=!0;const pe=4*he,me=this.boxKeys[he];if(r<=ne[pe+2]&&c<=ne[pe+3]&&m>=ne[pe+0]&&v>=ne[pe+1]&&(!R||R(me))&&(!U||!Rn(H,me.overlapMode))&&(T.push({key:me,x1:ne[pe],y1:ne[pe+1],x2:ne[pe+2],y2:ne[pe+3]}),U))return!0}}const X=this.circleCells[b];if(X!==null){const ne=this.circles;for(const he of X)if(!L.circle[he]){L.circle[he]=!0;const pe=3*he,me=this.circleKeys[he];if(this._circleAndRectCollide(ne[pe],ne[pe+1],ne[pe+2],r,c,m,v)&&(!R||R(me))&&(!U||!Rn(H,me.overlapMode))){const ye=ne[pe],we=ne[pe+1],ve=ne[pe+2];if(T.push({key:me,x1:ye-ve,y1:we-ve,x2:ye+ve,y2:we+ve}),U)return!0}}}return!1}_queryCellCircle(r,c,m,v,b,T,O,R){const{circle:L,seenUids:U,overlapMode:H}=O,W=this.boxCells[b];if(W!==null){const ne=this.bboxes;for(const he of W)if(!U.box[he]){U.box[he]=!0;const pe=4*he,me=this.boxKeys[he];if(this._circleAndRectCollide(L.x,L.y,L.radius,ne[pe+0],ne[pe+1],ne[pe+2],ne[pe+3])&&(!R||R(me))&&!Rn(H,me.overlapMode))return T.push(!0),!0}}const X=this.circleCells[b];if(X!==null){const ne=this.circles;for(const he of X)if(!U.circle[he]){U.circle[he]=!0;const pe=3*he,me=this.circleKeys[he];if(this._circlesCollide(ne[pe],ne[pe+1],ne[pe+2],L.x,L.y,L.radius)&&(!R||R(me))&&!Rn(H,me.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,m,v,b,T,O,R){const L=this._convertToXCellCoord(r),U=this._convertToYCellCoord(c),H=this._convertToXCellCoord(m),W=this._convertToYCellCoord(v);for(let X=L;X<=H;X++)for(let ne=U;ne<=W;ne++)if(b.call(this,r,c,m,v,this.xCellCount*ne+X,T,O,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,m,v,b,T){const O=v-r,R=b-c,L=m+T;return L*L>O*O+R*R}_circleAndRectCollide(r,c,m,v,b,T,O){const R=(T-v)/2,L=Math.abs(r-(v+R));if(L>R+m)return!1;const U=(O-b)/2,H=Math.abs(c-(b+U));if(H>U+m)return!1;if(L<=R||H<=U)return!0;const W=L-R,X=H-U;return W*W+X*X<=m*m}}function gn(_,r,c){const m=s.L();if(!_){const{vecSouth:H,vecEast:W}=Er(r),X=A();X[0]=W[0],X[1]=W[1],X[2]=H[0],X[3]=H[1],v=X,(U=(T=(b=X)[0])*(L=b[3])-(R=b[2])*(O=b[1]))&&(v[0]=L*(U=1/U),v[1]=-O*U,v[2]=-R*U,v[3]=T*U),m[0]=X[0],m[1]=X[1],m[4]=X[2],m[5]=X[3]}var v,b,T,O,R,L,U;return s.N(m,m,[1/c,1/c,1]),m}function br(_,r,c,m){if(_){const v=s.L();if(!r){const{vecSouth:b,vecEast:T}=Er(c);v[0]=T[0],v[1]=T[1],v[4]=b[0],v[5]=b[1]}return s.N(v,v,[m,m,1]),v}return c.pixelsToClipSpaceMatrix}function Er(_){const r=Math.cos(_.rollInRadians),c=Math.sin(_.rollInRadians),m=Math.cos(_.pitchInRadians),v=Math.cos(_.bearingInRadians),b=Math.sin(_.bearingInRadians),T=s.ar();T[0]=-v*m*c-b*r,T[1]=-b*m*c+v*r;const O=s.as(T);O<1e-9?s.at(T):s.au(T,T,1/O);const R=s.ar();R[0]=v*m*r-b*c,R[1]=b*m*r+v*c;const L=s.as(R);return L<1e-9?s.at(R):s.au(R,R,1/L),{vecEast:R,vecSouth:T}}function Wn(_,r,c,m){let v;m?(v=[_,r,m(_,r),1],s.aw(v,v,c)):(v=[_,r,0,1],zl(v,v,c));const b=v[3];return{point:new s.P(v[0]/b,v[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function _t(_,r){return .5+_/r*.5}function Kn(_,r){return _.x>=-r[0]&&_.x<=r[0]&&_.y>=-r[1]&&_.y<=r[1]}function cn(_,r,c,m,v,b,T,O,R,L,U,H,W){const X=c?_.textSizeData:_.iconSizeData,ne=s.an(X,r.transform.zoom),he=[256/r.width*2+1,256/r.height*2+1],pe=c?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;pe.clear();const me=_.lineVertexArray,ye=c?_.text.placedSymbolArray:_.icon.placedSymbolArray,we=r.transform.width/r.transform.height;let ve=!1;for(let Ae=0;Ae<ye.length;Ae++){const Ie=ye.get(Ae);if(Ie.hidden||Ie.writingMode===s.ao.vertical&&!ve){lo(Ie.numGlyphs,pe);continue}ve=!1;const xe=new s.P(Ie.anchorX,Ie.anchorY),De={getElevation:W,pitchedLabelPlaneMatrix:m,lineVertexArray:me,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:xe,unwrappedTileID:R,width:L,height:U,translation:H},Ze=as(Ie.anchorX,Ie.anchorY,De);if(!Kn(Ze.point,he)){lo(Ie.numGlyphs,pe);continue}const Ge=_t(r.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),He=s.ap(X,ne,Ie),et=b?He*r.transform.getPitchedTextCorrection(Ie.anchorX,Ie.anchorY,R)/Ge:He*Ge,Pt=Ot({projectionContext:De,pitchedLabelPlaneMatrixInverse:v,symbol:Ie,fontSize:et,flip:!1,keepUpright:T,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:we,rotateToLine:O});ve=Pt.useVertical,(Pt.notEnoughRoom||ve||Pt.needsFlipping&&Ot({projectionContext:De,pitchedLabelPlaneMatrixInverse:v,symbol:Ie,fontSize:et,flip:!0,keepUpright:T,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:we,rotateToLine:O}).notEnoughRoom)&&lo(Ie.numGlyphs,pe)}c?_.text.dynamicLayoutVertexBuffer.updateData(pe):_.icon.dynamicLayoutVertexBuffer.updateData(pe)}function so(_,r,c,m,v,b,T,O){const R=b.glyphStartIndex+b.numGlyphs,L=b.lineStartIndex,U=b.lineStartIndex+b.lineLength,H=r.getoffsetX(b.glyphStartIndex),W=r.getoffsetX(R-1),X=Eo(_*H,c,m,v,b.segment,L,U,O,T);if(!X)return null;const ne=Eo(_*W,c,m,v,b.segment,L,U,O,T);return ne?O.projectionCache.anyProjectionOccluded?null:{first:X,last:ne}:null}function Dl(_,r,c,m){return _===s.ao.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*m?{useVertical:!0}:(_===s.ao.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Ot(_){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:m,fontSize:v,flip:b,keepUpright:T,glyphOffsetArray:O,dynamicLayoutVertexArray:R,aspectRatio:L,rotateToLine:U}=_,H=v/24,W=m.lineOffsetX*H,X=m.lineOffsetY*H;let ne;if(m.numGlyphs>1){const he=m.glyphStartIndex+m.numGlyphs,pe=m.lineStartIndex,me=m.lineStartIndex+m.lineLength,ye=so(H,O,W,X,b,m,U,r);if(!ye)return{notEnoughRoom:!0};const we=is(ye.first.point.x,ye.first.point.y,r,c),ve=is(ye.last.point.x,ye.last.point.y,r,c);if(T&&!b){const Ae=Dl(m.writingMode,we,ve,L);if(Ae)return Ae}ne=[ye.first];for(let Ae=m.glyphStartIndex+1;Ae<he-1;Ae++){const Ie=Eo(H*O.getoffsetX(Ae),W,X,b,m.segment,pe,me,r,U);if(!Ie)return{notEnoughRoom:!0};ne.push(Ie)}ne.push(ye.last)}else{if(T&&!b){const pe=ii(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,me=m.lineStartIndex+m.segment+1,ye=new s.P(r.lineVertexArray.getx(me),r.lineVertexArray.gety(me)),we=ii(ye.x,ye.y,r),ve=we.signedDistanceFromCamera>0?we.point:Mr(r.tileAnchorPoint,ye,pe,1,r),Ae=is(pe.x,pe.y,r,c),Ie=is(ve.x,ve.y,r,c),xe=Dl(m.writingMode,Ae,Ie,L);if(xe)return xe}const he=Eo(H*O.getoffsetX(m.glyphStartIndex),W,X,b,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,r,U);if(!he||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ne=[he]}for(const he of ne)s.av(R,he.point,he.angle);return{}}function Mr(_,r,c,m,v){const b=_.add(_.sub(r)._unit()),T=ii(b.x,b.y,v).point,O=c.sub(T);return c.add(O._mult(m/O.mag()))}function cr(_,r,c){const m=r.projectionCache;if(m.projections[_])return m.projections[_];const v=new s.P(r.lineVertexArray.getx(_),r.lineVertexArray.gety(_)),b=ii(v.x,v.y,r);if(b.signedDistanceFromCamera>0)return m.projections[_]=b.point,m.anyProjectionOccluded=m.anyProjectionOccluded||b.isOccluded,b.point;const T=_-c.direction;return Mr(c.distanceFromAnchor===0?r.tileAnchorPoint:new s.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),v,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function ii(_,r,c){const m=_+c.translation[0],v=r+c.translation[1];let b;return c.pitchWithMap?(b=Wn(m,v,c.pitchedLabelPlaneMatrix,c.getElevation),b.isOccluded=!1):(b=c.transform.projectTileCoordinates(m,v,c.unwrappedTileID,c.getElevation),b.point.x=(.5*b.point.x+.5)*c.width,b.point.y=(.5*-b.point.y+.5)*c.height),b}function is(_,r,c,m){if(c.pitchWithMap){const v=[_,r,0,1];return s.aw(v,v,m),c.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],c.unwrappedTileID,c.getElevation).point}return{x:_/c.width*2-1,y:1-r/c.height*2}}function as(_,r,c){return c.transform.projectTileCoordinates(_,r,c.unwrappedTileID,c.getElevation)}function gr(_,r,c){return _._unit()._perp()._mult(r*c)}function Rc(_,r,c,m,v,b,T,O,R){if(O.projectionCache.offsets[_])return O.projectionCache.offsets[_];const L=c.add(r);if(_+R.direction<m||_+R.direction>=v)return O.projectionCache.offsets[_]=L,L;const U=cr(_+R.direction,O,R),H=gr(U.sub(c),T,R.direction),W=c.add(H),X=U.add(H);return O.projectionCache.offsets[_]=s.ax(b,L,W,X)||L,O.projectionCache.offsets[_]}function Eo(_,r,c,m,v,b,T,O,R){const L=m?_-r:_+r;let U=L>0?1:-1,H=0;m&&(U*=-1,H=Math.PI),U<0&&(H+=Math.PI);let W,X=U>0?b+v:b+v+1;O.projectionCache.cachedAnchorPoint?W=O.projectionCache.cachedAnchorPoint:(W=ii(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=W);let ne,he,pe=W,me=W,ye=0,we=0;const ve=Math.abs(L),Ae=[];let Ie;for(;ye+we<=ve;){if(X+=U,X<b||X>=T)return null;ye+=we,me=pe,he=ne;const Ze={absOffsetX:ve,direction:U,distanceFromAnchor:ye,previousVertex:me};if(pe=cr(X,O,Ze),c===0)Ae.push(me),Ie=pe.sub(me);else{let Ge;const He=pe.sub(me);Ge=He.mag()===0?gr(cr(X+U,O,Ze).sub(pe),c,U):gr(He,c,U),he||(he=me.add(Ge)),ne=Rc(X,Ge,pe,b,T,he,c,O,Ze),Ae.push(he),Ie=ne.sub(he)}we=Ie.mag()}const xe=Ie._mult((ve-ye)/we)._add(he||me),De=H+Math.atan2(pe.y-me.y,pe.x-me.x);return Ae.push(xe),{point:xe,angle:R?De:0,path:Ae}}const Dc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function lo(_,r){for(let c=0;c<_;c++){const m=r.length;r.resize(m+4),r.float32.set(Dc,3*m)}}function zl(_,r,c){const m=r[0],v=r[1];return _[0]=c[0]*m+c[4]*v+c[12],_[1]=c[1]*m+c[5]*v+c[13],_[3]=c[3]*m+c[7]*v+c[15],_}const wr=100;class $u{constructor(r,c=new Gn(r.width+200,r.height+200,25),m=new Gn(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=m,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+wr,this.screenBottomBoundary=r.height+wr,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,m,v,b,T,O,R,L,U,H,W){const X=this.projectAndGetPerspectiveRatio(r.anchorPointX+R[0],r.anchorPointY+R[1],b,U,W),ne=m*X.perspectiveRatio;let he;if(T||O)he=this._projectCollisionBox(r,ne,v,b,T,O,R,X,U,H,W);else{const Ie=X.x+(H?H.x*ne:0),xe=X.y+(H?H.y*ne:0);he={allPointsOccluded:!1,box:[Ie+r.x1*ne,xe+r.y1*ne,Ie+r.x2*ne,xe+r.y2*ne]}}const[pe,me,ye,we]=he.box,ve=T?he.allPointsOccluded:X.isOccluded;let Ae=ve;return Ae||(Ae=X.perspectiveRatio<this.perspectiveRatioCutoff),Ae||(Ae=!this.isInsideGrid(pe,me,ye,we)),Ae||c!=="always"&&this.grid.hitTest(pe,me,ye,we,c,L)?{box:[pe,me,ye,we],placeable:!1,offscreen:!1,occluded:ve}:{box:[pe,me,ye,we],placeable:!0,offscreen:this.isOffscreen(pe,me,ye,we),occluded:ve}}placeCollisionCircles(r,c,m,v,b,T,O,R,L,U,H,W,X,ne){const he=[],pe=new s.P(c.anchorX,c.anchorY),me=this.getPerspectiveRatio(pe.x,pe.y,T,ne),ye=(L?b*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,T)/me:b*me)/s.aB,we={getElevation:ne,pitchedLabelPlaneMatrix:O,lineVertexArray:m,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:X},ve=so(ye,v,c.lineOffsetX*ye,c.lineOffsetY*ye,!1,c,!1,we);let Ae=!1,Ie=!1,xe=!0;if(ve){const De=.5*H*me+W,Ze=new s.P(-100,-100),Ge=new s.P(this.screenRightBoundary,this.screenBottomBoundary),He=new en,et=ve.first,Pt=ve.last;let wt=[];for(let vr=et.path.length-1;vr>=1;vr--)wt.push(et.path[vr]);for(let vr=1;vr<Pt.path.length;vr++)wt.push(Pt.path[vr]);const dt=2.5*De;if(L){const vr=this.projectPathToScreenSpace(wt,we);wt=vr.some((Nr=>Nr.signedDistanceFromCamera<=0))?[]:vr.map((Nr=>Nr.point))}let Lt=[];if(wt.length>0){const vr=wt[0].clone(),Nr=wt[0].clone();for(let dn=1;dn<wt.length;dn++)vr.x=Math.min(vr.x,wt[dn].x),vr.y=Math.min(vr.y,wt[dn].y),Nr.x=Math.max(Nr.x,wt[dn].x),Nr.y=Math.max(Nr.y,wt[dn].y);Lt=vr.x>=Ze.x&&Nr.x<=Ge.x&&vr.y>=Ze.y&&Nr.y<=Ge.y?[wt]:Nr.x<Ze.x||vr.x>Ge.x||Nr.y<Ze.y||vr.y>Ge.y?[]:s.ay([wt],Ze.x,Ze.y,Ge.x,Ge.y)}for(const vr of Lt){He.reset(vr,.25*De);let Nr=0;Nr=He.length<=.5*De?1:Math.ceil(He.paddedLength/dt)+1;for(let dn=0;dn<Nr;dn++){const Qr=dn/Math.max(Nr-1,1),Vr=He.lerp(Qr),fn=Vr.x+wr,Xr=Vr.y+wr;he.push(fn,Xr,De,0);const Zr=fn-De,Rr=Xr-De,Ln=fn+De,Nn=Xr+De;if(xe=xe&&this.isOffscreen(Zr,Rr,Ln,Nn),Ie=Ie||this.isInsideGrid(Zr,Rr,Ln,Nn),r!=="always"&&this.grid.hitTestCircle(fn,Xr,De,r,U)&&(Ae=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ae}}}}return{circles:!R&&Ae||!Ie||me<this.perspectiveRatioCutoff?[]:he,offscreen:xe,collisionDetected:Ae}}projectPathToScreenSpace(r,c){const m=(function(v,b){const T=s.L();return s.aq(T,b.pitchedLabelPlaneMatrix),v.map((O=>{const R=Wn(O.x,O.y,T,b.getElevation),L=b.transform.projectTileCoordinates(R.point.x,R.point.y,b.unwrappedTileID,b.getElevation);return L.point.x=(.5*L.point.x+.5)*b.width,L.point.y=(.5*-L.point.y+.5)*b.height,L}))})(r,c);return(function(v){let b=0,T=0,O=0,R=0;for(let L=0;L<v.length;L++)v[L].isOccluded?(O=L+1,R=0):(R++,R>T&&(T=R,b=O));return v.slice(b,b+T)})(m)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],m=new s.a2;for(const H of r){const W=new s.P(H.x+wr,H.y+wr);m.extend(W),c.push(W)}const{minX:v,minY:b,maxX:T,maxY:O}=m,R=this.grid.query(v,b,T,O).concat(this.ignoredGrid.query(v,b,T,O)),L={},U={};for(const H of R){const W=H.key;if(L[W.bucketInstanceId]===void 0&&(L[W.bucketInstanceId]={}),L[W.bucketInstanceId][W.featureIndex])continue;const X=[new s.P(H.x1,H.y1),new s.P(H.x2,H.y1),new s.P(H.x2,H.y2),new s.P(H.x1,H.y2)];s.az(c,X)&&(L[W.bucketInstanceId][W.featureIndex]=!0,U[W.bucketInstanceId]===void 0&&(U[W.bucketInstanceId]=[]),U[W.bucketInstanceId].push(W.featureIndex))}return U}insertCollisionBox(r,c,m,v,b,T){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:b,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,m,v,b,T){const O=m?this.ignoredGrid:this.grid,R={bucketInstanceId:v,featureIndex:b,collisionGroupID:T,overlapMode:c};for(let L=0;L<r.length;L+=4)O.insertCircle(R,r[L],r[L+1],r[L+2])}projectAndGetPerspectiveRatio(r,c,m,v,b){if(b){let T;v?(T=[r,c,v(r,c),1],s.aw(T,T,b)):(T=[r,c,0,1],zl(T,T,b));const O=T[3];return{x:(T[0]/O+1)/2*this.transform.width+wr,y:(-T[1]/O+1)/2*this.transform.height+wr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const T=this.transform.projectTileCoordinates(r,c,m,v);return{x:(T.point.x+1)/2*this.transform.width+wr,y:(1-T.point.y)/2*this.transform.height+wr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,m,v){const b=this.transform.projectTileCoordinates(r,c,m,v);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(r,c,m,v){return m<wr||r>=this.screenRightBoundary||v<wr||c>this.screenBottomBoundary}isInsideGrid(r,c,m,v){return m>=0&&r<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=s.ag([]);return s.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,m,v,b,T,O,R,L,U,H){let W=1,X=0,ne=0,he=1;const pe=r.anchorPointX+O[0],me=r.anchorPointY+O[1];if(T&&!b){const wt=this.projectAndGetPerspectiveRatio(pe+1,me,v,L,H),dt=wt.x-R.x,Lt=Math.atan((wt.y-R.y)/dt)+(dt<0?Math.PI:0),vr=Math.sin(Lt),Nr=Math.cos(Lt);W=Nr,X=vr,ne=-vr,he=Nr}else if(!T&&b){const wt=Er(this.transform);W=wt.vecEast[0],X=wt.vecEast[1],ne=wt.vecSouth[0],he=wt.vecSouth[1]}let ye=R.x,we=R.y,ve=c;b&&(ye=pe,we=me,ve=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),ve*=this.transform.getPitchedTextCorrection(pe,me,v),U||(ve*=s.ah(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),U&&(ye+=W*U.x*ve+ne*U.y*ve,we+=X*U.x*ve+he*U.y*ve);const Ae=r.x1*ve,Ie=r.x2*ve,xe=(Ae+Ie)/2,De=r.y1*ve,Ze=r.y2*ve,Ge=(De+Ze)/2,He=[{offsetX:Ae,offsetY:De},{offsetX:xe,offsetY:De},{offsetX:Ie,offsetY:De},{offsetX:Ie,offsetY:Ge},{offsetX:Ie,offsetY:Ze},{offsetX:xe,offsetY:Ze},{offsetX:Ae,offsetY:Ze},{offsetX:Ae,offsetY:Ge}];let et=[];for(const{offsetX:wt,offsetY:dt}of He)et.push(new s.P(ye+W*wt+ne*dt,we+X*wt+he*dt));let Pt=!1;if(b){const wt=et.map((dt=>this.projectAndGetPerspectiveRatio(dt.x,dt.y,v,L,H)));Pt=wt.some((dt=>!dt.isOccluded)),et=wt.map((dt=>new s.P(dt.x,dt.y)))}else Pt=!0;return{box:s.aA(et),allPointsOccluded:!Pt}}}class mi{constructor(r,c,m,v){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Kr{constructor(r,c,m,v,b){this.text=new mi(r?r.text:null,c,m,b),this.icon=new mi(r?r.icon:null,c,v,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zc{constructor(r,c,m){this.text=r,this.icon=c,this.skipFade=m}}class jc{constructor(r,c,m,v,b){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=b}}class Uu{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[r]}}function $a(_,r,c,m,v){const{horizontalAlign:b,verticalAlign:T}=s.aH(_);return new s.P(-(b-.5)*r+m[0]*v,-(T-.5)*c+m[1]*v)}class ui{constructor(r,c,m,v,b){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new $u(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Uu(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(m,v)=>c.getElevation(r,m,v):null}getBucketParts(r,c,m,v){const b=m.getBucket(c),T=m.latestFeatureIndex;if(!b||!T||c.id!==b.layerIds[0])return;const O=m.collisionBoxArray,R=b.layers[0].layout,L=b.layers[0].paint,U=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),H=m.tileSize/s.$,W=m.tileID.toUnwrapped(),X=R.get("text-rotation-alignment")==="map",ne=s.aC(m,1,this.transform.zoom),he=s.aD(this.collisionIndex.transform,m,L.get("text-translate"),L.get("text-translate-anchor")),pe=s.aD(this.collisionIndex.transform,m,L.get("icon-translate"),L.get("icon-translate-anchor")),me=gn(X,this.transform,ne);this.retainedQueryData[b.bucketInstanceId]=new jc(b.bucketInstanceId,T,b.sourceLayerIndex,b.index,m.tileID);const ye={bucket:b,layout:R,translationText:he,translationIcon:pe,unwrappedTileID:W,pitchedLabelPlaneMatrix:me,scale:U,textPixelRatio:H,holdingForFade:m.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:s.an(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(v)for(const we of b.sortKeyRanges){const{sortKey:ve,symbolInstanceStart:Ae,symbolInstanceEnd:Ie}=we;r.push({sortKey:ve,symbolInstanceStart:Ae,symbolInstanceEnd:Ie,parameters:ye})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(r,c,m,v,b,T,O,R,L,U,H,W,X,ne,he,pe,me,ye,we,ve){const Ae=s.aE[r.textAnchor],Ie=[r.textOffset0,r.textOffset1],xe=$a(Ae,m,v,Ie,b),De=this.collisionIndex.placeCollisionBox(c,W,R,L,U,O,T,pe,H.predicate,we,xe,ve);if((!ye||this.collisionIndex.placeCollisionBox(ye,W,R,L,U,O,T,me,H.predicate,we,xe,ve).placeable)&&De.placeable){let Ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Ie,width:m,height:v,anchor:Ae,textBoxScale:b,prevAnchor:Ze},this.markUsedJustification(ne,Ae,X,he),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,he,X),this.placedOrientations[X.crossTileID]=he),{shift:xe,placedGlyphBoxes:De}}}placeLayerBucketPart(r,c,m){const{bucket:v,layout:b,translationText:T,translationIcon:O,unwrappedTileID:R,pitchedLabelPlaneMatrix:L,textPixelRatio:U,holdingForFade:H,collisionBoxArray:W,partiallyEvaluatedTextSize:X,collisionGroup:ne}=r.parameters,he=b.get("text-optional"),pe=b.get("icon-optional"),me=s.aF(b,"text-overlap","text-allow-overlap"),ye=me==="always",we=s.aF(b,"icon-overlap","icon-allow-overlap"),ve=we==="always",Ae=b.get("text-rotation-alignment")==="map",Ie=b.get("text-pitch-alignment")==="map",xe=b.get("icon-text-fit")!=="none",De=b.get("symbol-z-order")==="viewport-y",Ze=ye&&(ve||!v.hasIconData()||pe),Ge=ve&&(ye||!v.hasTextData()||he);!v.collisionArrays&&W&&v.deserializeCollisionBoxes(W);const He=this.retainedQueryData[v.bucketInstanceId].tileID,et=this._getTerrainElevationFunc(He),Pt=this.transform.getFastPathSimpleProjectionMatrix(He),wt=(dt,Lt,vr)=>{var Nr,dn;if(c[dt.crossTileID])return;if(H)return void(this.placements[dt.crossTileID]=new zc(!1,!1,!1));let Qr=!1,Vr=!1,fn=!0,Xr=null,Zr={box:null,placeable:!1,offscreen:null,occluded:!1},Rr={placeable:!1},Ln=null,Nn=null,_i=null,Bo=0,Fo=0,ga=0;Lt.textFeatureIndex?Bo=Lt.textFeatureIndex:dt.useRuntimeCollisionCircles&&(Bo=dt.featureIndex),Lt.verticalTextFeatureIndex&&(Fo=Lt.verticalTextFeatureIndex);const Ps=Lt.textBox;if(Ps){const xi=rn=>{let An=s.ao.horizontal;if(v.allowVerticalPlacement&&!rn&&this.prevPlacement){const bi=this.prevPlacement.placedOrientations[dt.crossTileID];bi&&(this.placedOrientations[dt.crossTileID]=bi,An=bi,this.markUsedOrientation(v,An,dt))}return An},$o=(rn,An)=>{if(v.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Lt.verticalTextBox){for(const bi of v.writingModes)if(bi===s.ao.vertical?(Zr=An(),Rr=Zr):Zr=rn(),Zr&&Zr.placeable)break}else Zr=rn()},Uo=dt.textAnchorOffsetStartIndex,Vo=dt.textAnchorOffsetEndIndex;if(Vo===Uo){const rn=(An,bi)=>{const ei=this.collisionIndex.placeCollisionBox(An,me,U,He,R,Ie,Ae,T,ne.predicate,et,void 0,Pt);return ei&&ei.placeable&&(this.markUsedOrientation(v,bi,dt),this.placedOrientations[dt.crossTileID]=bi),ei};$o((()=>rn(Ps,s.ao.horizontal)),(()=>{const An=Lt.verticalTextBox;return v.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&An?rn(An,s.ao.vertical):{box:null,offscreen:null}})),xi(Zr&&Zr.placeable)}else{let rn=s.aE[(dn=(Nr=this.prevPlacement)===null||Nr===void 0?void 0:Nr.variableOffsets[dt.crossTileID])===null||dn===void 0?void 0:dn.anchor];const An=(ei,cm,hd)=>{const Li=ei.x2-ei.x1,As=ei.y2-ei.y1,Ra=dt.textBoxScale,Da=xe&&we==="never"?cm:null;let Ni=null,uh=me==="never"?1:2,xo="never";rn&&uh++;for(let ml=0;ml<uh;ml++){for(let fc=Uo;fc<Vo;fc++){const pc=v.textAnchorOffsets.get(fc);if(rn&&pc.textAnchor!==rn)continue;const hh=this.attemptAnchorPlacement(pc,ei,Li,As,Ra,Ae,Ie,U,He,R,ne,xo,dt,v,hd,T,O,Da,et);if(hh&&(Ni=hh.placedGlyphBoxes,Ni&&Ni.placeable))return Qr=!0,Xr=hh.shift,Ni}rn?rn=null:xo=me}return m&&!Ni&&(Ni={box:this.collisionIndex.placeCollisionBox(Ps,"always",U,He,R,Ie,Ae,T,ne.predicate,et,void 0,Pt).box,offscreen:!1,placeable:!1,occluded:!1}),Ni};$o((()=>An(Ps,Lt.iconBox,s.ao.horizontal)),(()=>{const ei=Lt.verticalTextBox;return v.allowVerticalPlacement&&(!Zr||!Zr.placeable)&&dt.numVerticalGlyphVertices>0&&ei?An(ei,Lt.verticalIconBox,s.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Zr&&(Qr=Zr.placeable,fn=Zr.offscreen);const bi=xi(Zr&&Zr.placeable);if(!Qr&&this.prevPlacement){const ei=this.prevPlacement.variableOffsets[dt.crossTileID];ei&&(this.variableOffsets[dt.crossTileID]=ei,this.markUsedJustification(v,ei.anchor,dt,bi))}}}if(Ln=Zr,Qr=Ln&&Ln.placeable,fn=Ln&&Ln.offscreen,dt.useRuntimeCollisionCircles){const xi=v.text.placedSymbolArray.get(dt.centerJustifiedTextSymbolIndex),$o=s.ap(v.textSizeData,X,xi),Uo=b.get("text-padding");Nn=this.collisionIndex.placeCollisionCircles(me,xi,v.lineVertexArray,v.glyphOffsetArray,$o,R,L,m,Ie,ne.predicate,dt.collisionCircleDiameter,Uo,T,et),Nn.circles.length&&Nn.collisionDetected&&!m&&s.w("Collisions detected, but collision boxes are not shown"),Qr=ye||Nn.circles.length>0&&!Nn.collisionDetected,fn=fn&&Nn.offscreen}if(Lt.iconFeatureIndex&&(ga=Lt.iconFeatureIndex),Lt.iconBox){const xi=$o=>this.collisionIndex.placeCollisionBox($o,we,U,He,R,Ie,Ae,O,ne.predicate,et,xe&&Xr?Xr:void 0,Pt);Rr&&Rr.placeable&&Lt.verticalIconBox?(_i=xi(Lt.verticalIconBox),Vr=_i.placeable):(_i=xi(Lt.iconBox),Vr=_i.placeable),fn=fn&&_i.offscreen}const dc=he||dt.numHorizontalGlyphVertices===0&&dt.numVerticalGlyphVertices===0,pu=pe||dt.numIconVertices===0;dc||pu?pu?dc||(Vr=Vr&&Qr):Qr=Vr&&Qr:Vr=Qr=Vr&&Qr;const Ts=Vr&&_i.placeable;if(Qr&&Ln.placeable&&this.collisionIndex.insertCollisionBox(Ln.box,me,b.get("text-ignore-placement"),v.bucketInstanceId,Rr&&Rr.placeable&&Fo?Fo:Bo,ne.ID),Ts&&this.collisionIndex.insertCollisionBox(_i.box,we,b.get("icon-ignore-placement"),v.bucketInstanceId,ga,ne.ID),Nn&&Qr&&this.collisionIndex.insertCollisionCircles(Nn.circles,me,b.get("text-ignore-placement"),v.bucketInstanceId,Bo,ne.ID),m&&this.storeCollisionData(v.bucketInstanceId,vr,Lt,Ln,_i,Nn),dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[dt.crossTileID]=new zc((Qr||Ze)&&!Ln?.occluded,(Vr||Ge)&&!_i?.occluded,fn||v.justReloaded),c[dt.crossTileID]=!0};if(De){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const dt=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Lt=dt.length-1;Lt>=0;--Lt){const vr=dt[Lt];wt(v.symbolInstances.get(vr),v.collisionArrays[vr],vr)}}else for(let dt=r.symbolInstanceStart;dt<r.symbolInstanceEnd;dt++)wt(v.symbolInstances.get(dt),v.collisionArrays[dt],dt);v.justReloaded=!1}storeCollisionData(r,c,m,v,b,T){if(m.textBox||m.iconBox){let O,R;this.collisionBoxArrays.has(r)?O=this.collisionBoxArrays.get(r):(O=new Map,this.collisionBoxArrays.set(r,O)),O.has(c)?R=O.get(c):(R={text:null,icon:null},O.set(c,R)),m.textBox&&(R.text=v.box),m.iconBox&&(R.icon=b.box)}if(T){let O=this.collisionCircleArrays[r];O===void 0&&(O=this.collisionCircleArrays[r]=[]);for(let R=0;R<T.circles.length;R+=4)O.push(T.circles[R+0]-wr),O.push(T.circles[R+1]-wr),O.push(T.circles[R+2]),O.push(T.collisionDetected?1:0)}}markUsedJustification(r,c,m,v){let b;b=v===s.ao.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[s.aG(c)];const T=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const O of T)O>=0&&(r.text.placedSymbolArray.get(O).crossTileID=b>=0&&O!==b?0:m.crossTileID)}markUsedOrientation(r,c,m){const v=c===s.ao.horizontal||c===s.ao.horizontalOnly?c:0,b=c===s.ao.vertical?c:0,T=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const O of T)r.text.placedSymbolArray.get(O).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(r):1,b=c?c.opacities:{},T=c?c.variableOffsets:{},O=c?c.placedOrientations:{};for(const R in this.placements){const L=this.placements[R],U=b[R];U?(this.opacities[R]=new Kr(U,v,L.text,L.icon),m=m||L.text!==U.text.placed||L.icon!==U.icon.placed):(this.opacities[R]=new Kr(null,v,L.text,L.icon,L.skipFade),m=m||L.text||L.icon)}for(const R in b){const L=b[R];if(!this.opacities[R]){const U=new Kr(L,v,!1,!1);U.isHidden()||(this.opacities[R]=U,m=m||L.text.placed||L.icon.placed)}}for(const R in T)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=T[R]);for(const R in O)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=O[R]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const m={};for(const v of c){const b=v.getBucket(r);b&&v.latestFeatureIndex&&r.id===b.layerIds[0]&&this.updateBucketOpacities(b,v.tileID,m,v.collisionBoxArray)}}updateBucketOpacities(r,c,m,v){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const b=r.layers[0],T=b.layout,O=new Kr(null,0,!1,!1,!0),R=T.get("text-allow-overlap"),L=T.get("icon-allow-overlap"),U=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),H=T.get("text-rotation-alignment")==="map",W=T.get("text-pitch-alignment")==="map",X=T.get("icon-text-fit")!=="none",ne=new Kr(null,0,R&&(L||!r.hasIconData()||T.get("icon-optional")),L&&(R||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&v&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(v);const he=(me,ye,we)=>{for(let ve=0;ve<ye/4;ve++)me.opacityVertexArray.emplaceBack(we);me.hasVisibleVertices=me.hasVisibleVertices||we!==Nl},pe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let me=0;me<r.symbolInstances.length;me++){const ye=r.symbolInstances.get(me),{numHorizontalGlyphVertices:we,numVerticalGlyphVertices:ve,crossTileID:Ae}=ye;let Ie=this.opacities[Ae];m[Ae]?Ie=O:Ie||(Ie=ne,this.opacities[Ae]=Ie),m[Ae]=!0;const xe=ye.numIconVertices>0,De=this.placedOrientations[ye.crossTileID],Ze=De===s.ao.vertical,Ge=De===s.ao.horizontal||De===s.ao.horizontalOnly;if(we>0||ve>0){const et=Ll(Ie.text);he(r.text,we,Ze?Nl:et),he(r.text,ve,Ge?Nl:et);const Pt=Ie.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach((Lt=>{Lt>=0&&(r.text.placedSymbolArray.get(Lt).hidden=Pt||Ze?1:0)})),ye.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=Pt||Ge?1:0);const wt=this.variableOffsets[ye.crossTileID];wt&&this.markUsedJustification(r,wt.anchor,ye,De);const dt=this.placedOrientations[ye.crossTileID];dt&&(this.markUsedJustification(r,"left",ye,dt),this.markUsedOrientation(r,dt,ye))}if(xe){const et=Ll(Ie.icon),Pt=!(X&&ye.verticalPlacedIconSymbolIndex&&Ze);ye.placedIconSymbolIndex>=0&&(he(r.icon,ye.numIconVertices,Pt?et:Nl),r.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(he(r.icon,ye.numVerticalIconVertices,Pt?Nl:et),r.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}const He=pe&&pe.has(me)?pe.get(me):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const et=r.collisionArrays[me];if(et){let Pt=new s.P(0,0);if(et.textBox||et.verticalTextBox){let wt=!0;if(U){const dt=this.variableOffsets[Ae];dt?(Pt=$a(dt.anchor,dt.width,dt.height,dt.textOffset,dt.textBoxScale),H&&Pt._rotate(W?-this.transform.bearingInRadians:this.transform.bearingInRadians)):wt=!1}if(et.textBox||et.verticalTextBox){let dt;et.textBox&&(dt=Ze),et.verticalTextBox&&(dt=Ge),Lh(r.textCollisionBox.collisionVertexArray,Ie.text.placed,!wt||dt,He.text,Pt.x,Pt.y)}}if(et.iconBox||et.verticalIconBox){const wt=!!(!Ge&&et.verticalIconBox);let dt;et.iconBox&&(dt=wt),et.verticalIconBox&&(dt=!wt),Lh(r.iconCollisionBox.collisionVertexArray,Ie.icon.placed,dt,He.icon,X?Pt.x:0,X?Pt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>r}setStale(){this.stale=!0}}function Lh(_,r,c,m,v,b){m&&m.length!==0||(m=[0,0,0,0]);const T=m[0]-wr,O=m[1]-wr,R=m[2]-wr,L=m[3]-wr;_.emplaceBack(r?1:0,c?1:0,v||0,b||0,T,O),_.emplaceBack(r?1:0,c?1:0,v||0,b||0,R,O),_.emplaceBack(r?1:0,c?1:0,v||0,b||0,R,L),_.emplaceBack(r?1:0,c?1:0,v||0,b||0,T,L)}const Ta=Math.pow(2,25),rf=Math.pow(2,24),jl=Math.pow(2,17),nf=Math.pow(2,16),Vu=Math.pow(2,9),qu=Math.pow(2,8),Lc=Math.pow(2,1);function Ll(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const r=_.placed?1:0,c=Math.floor(127*_.opacity);return c*Ta+r*rf+c*jl+r*nf+c*Vu+r*qu+c*Lc+r}const Nl=0;class Nh{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,m,v,b){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,v,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort(((O,R)=>O.sortKey-R.sortKey)));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,b())return!0;return!1}}class Nc{constructor(r,c,m,v,b,T,O,R){this.placement=new ui(r,c,T,O,R),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(r,c,m){const v=D.now(),b=()=>!this._forceFullPlacement&&D.now()-v>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=O)&&(!T.maxzoom||T.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Nh(T)),this._inProgressLayer.continuePlacement(m[T.source],this.placement,this._showCollisionBoxes,T,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Vs=512/s.$/2;class Bc{constructor(r,c,m){this.tileID=r,this.bucketInstanceId=m,this._symbolsByKey={};const v=new Map;for(let b=0;b<c.length;b++){const T=c.get(b),O=T.key,R=v.get(O);R?R.push(T):v.set(O,[T])}for(const[b,T]of v){const O={positions:T.map((R=>({x:Math.floor(R.anchorX*Vs),y:Math.floor(R.anchorY*Vs)}))),crossTileIDs:T.map((R=>R.crossTileID))};if(O.positions.length>128){const R=new s.aI(O.positions.length,16,Uint16Array);for(const{x:L,y:U}of O.positions)R.add(L,U);R.finish(),delete O.positions,O.index=R}this._symbolsByKey[b]=O}}getScaledCoordinates(r,c){const{x:m,y:v,z:b}=this.tileID.canonical,{x:T,y:O,z:R}=c.canonical,L=Vs/Math.pow(2,R-b),U=(O*s.$+r.anchorY)*L,H=v*s.$*Vs;return{x:Math.floor((T*s.$+r.anchorX)*L-m*s.$*Vs),y:Math.floor(U-H)}}findMatches(r,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<r.length;b++){const T=r.get(b);if(T.crossTileID)continue;const O=this._symbolsByKey[T.key];if(!O)continue;const R=this.getScaledCoordinates(T,c);if(O.index){const L=O.index.range(R.x-v,R.y-v,R.x+v,R.y+v).sort();for(const U of L){const H=O.crossTileIDs[U];if(!m[H]){m[H]=!0,T.crossTileID=H;break}}}else if(O.positions)for(let L=0;L<O.positions.length;L++){const U=O.positions[L],H=O.crossTileIDs[L];if(Math.abs(U.x-R.x)<=v&&Math.abs(U.y-R.y)<=v&&!m[H]){m[H]=!0,T.crossTileID=H;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:r})=>r))}}class qs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Jp{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const m in this.indexes){const v=this.indexes[m],b={};for(const T in v){const O=v[T];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+c),b[O.tileID.key]=O}this.indexes[m]=b}this.lng=r}addBucket(r,c,m){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const v=this.usedCrossTileIDs[r.overscaledZ];for(const b in this.indexes){const T=this.indexes[b];if(Number(b)>r.overscaledZ)for(const O in T){const R=T[O];R.tileID.isChildOf(r)&&R.findMatches(c.symbolInstances,r,v)}else{const O=T[r.scaledTo(Number(b)).key];O&&O.findMatches(c.symbolInstances,r,v)}}for(let b=0;b<c.symbolInstances.length;b++){const T=c.symbolInstances.get(b);T.crossTileID||(T.crossTileID=m.generate(),v[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Bc(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const m of c.getCrossTileIDsLists())for(const v of m)delete this.usedCrossTileIDs[r][v]}removeStaleBuckets(r){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const b in v)r[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[b]),delete v[b],c=!0)}return c}}class os{constructor(){this.layerIndexes={},this.crossTileIDs=new qs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,m){let v=this.layerIndexes[r.id];v===void 0&&(v=this.layerIndexes[r.id]=new Jp);let b=!1;const T={};v.handleWrapJump(m);for(const O of c){const R=O.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(O.tileID,R,this.crossTileIDs)&&(b=!0),T[R.bucketInstanceId]=!0)}return v.removeStaleBuckets(T)&&(b=!0),b}pruneUnusedLayers(r){const c={};r.forEach((m=>{c[m]=!0}));for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}var $r="void main() {fragColor=vec4(1.0);}";const Aa={prelude:Sr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Sr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Sr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Sr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Sr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Sr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Sr($r,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Sr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Sr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Sr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Sr($r,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Sr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Sr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Sr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Sr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Sr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Sr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Sr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Sr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Sr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Sr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Sr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Sr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Sr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Sr(_,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=r.match(/in ([\w]+) ([\w]+)/g),v=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=b?b.concat(v):v,O={};return{fragmentSource:_=_.replace(c,((R,L,U,H,W)=>(O[W]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${W}
in ${U} ${H} ${W};
#else
uniform ${U} ${H} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${U} ${H} ${W} = u_${W};
#endif
`))),vertexSource:r=r.replace(c,((R,L,U,H,W)=>{const X=H==="float"?"vec2":"vec4",ne=W.match(/color/)?"color":X;return O[W]?L==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${U} ${X} a_${W};
out ${U} ${H} ${W};
#else
uniform ${U} ${H} u_${W};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${U} ${H} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${ne}(a_${W}, u_${W}_t);
#else
    ${U} ${H} ${W} = u_${W};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${U} ${X} a_${W};
#else
uniform ${U} ${H} u_${W};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${U} ${H} ${W} = a_${W};
#else
    ${U} ${H} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${U} ${H} ${W} = unpack_mix_${ne}(a_${W}, u_${W}_t);
#else
    ${U} ${H} ${W} = u_${W};
#endif
`})),staticAttributes:m,staticUniforms:T}}class Mo{constructor(r,c,m){this.vertexBuffer=r,this.indexBuffer=c,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ko=s.aJ([{name:"a_pos",type:"Int16",components:2}]);const co="#define PROJECTION_MERCATOR",ss="mercator";class _r{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ss}get shaderDefine(){return co}get shaderPreludeCode(){return Aa.projectionMercator}get vertexShaderPreludeCode(){return Aa.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,m,v,b){if(this._cachedMesh)return this._cachedMesh;const T=new s.aL;T.emplaceBack(0,0),T.emplaceBack(s.$,0),T.emplaceBack(0,s.$),T.emplaceBack(s.$,s.$);const O=r.createVertexBuffer(T,ko.members),R=s.aM.simpleSegment(0,0,4,2),L=new s.aN;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3);const U=r.createIndexBuffer(L);return this._cachedMesh=new Mo(O,U,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class uo{constructor(r=0,c=0,m=0,v=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=m,this.right=v}interpolate(r,c,m){return c.top!=null&&r.top!=null&&(this.top=s.C.number(r.top,c.top,m)),c.bottom!=null&&r.bottom!=null&&(this.bottom=s.C.number(r.bottom,c.bottom,m)),c.left!=null&&r.left!=null&&(this.left=s.C.number(r.left,c.left,m)),c.right!=null&&r.right!=null&&(this.right=s.C.number(r.right,c.right,m)),this}getCenter(r,c){const m=s.ah((this.left+r-this.right)/2,0,r),v=s.ah((this.top+c-this.bottom)/2,0,c);return new s.P(m,v)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new uo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ua(_,r){if(!_.renderWorldCopies||_.lngRange)return;const c=r.lng-_.center.lng;r.lng+=c>180?-360:c<-180?360:0}function Va(_){return Math.max(0,Math.floor(_))}class Sn{constructor(r,c,m,v,b,T){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=c||0,this._maxZoom=m||22,this._minPitch=v??0,this._maxPitch=b??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Va(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new uo,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,m){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Va(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new uo(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!m&&r.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=s.aO(r,-180,180)*Math.PI/180;var m,v,b,T,O,R,L,U,H;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=A(),m=this._rotationMatrix,b=-this._bearingInRadians,T=(v=this._rotationMatrix)[0],O=v[1],R=v[2],L=v[3],U=Math.sin(b),H=Math.cos(b),m[0]=T*H+R*U,m[1]=O*H+L*U,m[2]=T*-U+R*H,m[3]=O*-U+L*H)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=s.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aP(this._fovInRadians)}setFov(r){r=s.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=s.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.getConstrained(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=s.af(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,m){this._unmodified=!1,this._edgeInsets.interpolate(r,c,m),this._constrain(),this._calcMatrices()}resize(r,c,m=!0){this._width=r,this._height=c,m&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new dr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-s.ai,s.ai])}getConstrained(r,c){return this._callbacks.getConstrained(r,c)}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{const{minX:m,minY:v,maxX:b,maxY:T}=s.a2.fromPoints(c).extend(r);return[new s.P(m,v),new s.P(b,v),new s.P(b,T),new s.P(m,T),new s.P(m,v)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:m}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(m),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=s.ag(new Float64Array(16));s.N(r,r,[this._width/2,-this._height/2,1]),s.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=s.ag(new Float64Array(16)),s.N(r,r,[1,-1,1]),s.M(r,r,[-1,-1,0]),s.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,m,v){const b=m!==void 0?m:this.bearing,T=v=v!==void 0?v:this.pitch,O=s.a1.fromLngLat(r,c),R=-Math.cos(s.ae(T)),L=Math.sin(s.ae(T)),U=L*Math.sin(s.ae(b)),H=-L*Math.cos(s.ae(b));let W=this.elevation;const X=c-W;let ne;R*X>=0||Math.abs(R)<.1?(ne=1e4,W=c+ne*R):ne=-X/R;let he,pe,me=s.aQ(1,O.y),ye=0;do{if(ye+=1,ye>10)break;pe=ne/me,he=new s.a1(O.x+U*pe,O.y+H*pe),me=1/he.meterInMercatorCoordinateUnits()}while(Math.abs(ne-pe*me)>1e-12);return{center:he.toLngLat(),elevation:W,zoom:s.ak(this.height/2/Math.tan(this.fovInRadians/2)/pe/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=s.aj(1,this.center.lat)*this.worldSize,m=this.cameraToCenterDistance/c,v=s.a1.fromLngLat(this.center,this.elevation),b=Xe(this.center,this.elevation,this.pitch,this.bearing,m);this._elevation=r;const T=this.calculateCenterFromCameraLngLatAlt(b.toLngLat(),s.aQ(b.z,v.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=s.aj(1,this.center.lat)*this.worldSize;return Xe(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/s.$,1/c/s.$]}}class Pn{constructor(r,c){this.min=r,this.max=c,this.center=s.aR([],s.aS([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],m=s.aT(this.min),v=s.aT(this.max);for(let b=0;b<c.length;b++)m[b]=c[b]?this.min[b]:this.center[b],v[b]=c[b]?this.center[b]:this.max[b];return v[2]=this.max[2],new Pn(m,v)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let m=0;m<r.planes.length;m++){const v=this.intersectsPlane(r.planes[m]);if(v===0)return 0;v===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],m=r[3];for(let v=0;v<3;v++)r[v]>0?(c+=r[v]*this.min[v],m+=r[v]*this.max[v]):(m+=r[v]*this.min[v],c+=r[v]*this.max[v]);return c>=0?2:m<0?0:1}}class Yn{distanceToTile2d(r,c,m,v){const b=v.distanceX([r,c]),T=v.distanceY([r,c]);return Math.hypot(b,T)}getWrap(r,c,m){return m}getTileBoundingVolume(r,c,m,v){var b,T;let O=0,R=0;if(v?.terrain){const U=new s.Z(r.z,c,r.z,r.x,r.y),H=v.terrain.getMinMaxElevation(U);O=(b=H.minElevation)!==null&&b!==void 0?b:Math.min(0,m),R=(T=H.maxElevation)!==null&&T!==void 0?T:Math.max(0,m)}const L=1<<r.z;return new Pn([c+r.x/L,r.y/L,O],[c+(r.x+1)/L,(r.y+1)/L,R])}allowVariableZoom(r,c){const m=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,v=s.ah(78.5-m/2,0,60);return!!c.terrain||r.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class on{constructor(r,c,m){this.points=r,this.planes=c,this.aabb=m}static fromInvProjectionMatrix(r,c=1,m=0,v,b){const T=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,m),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((W=>(function(X,ne,he,pe){const me=s.aw([],X,ne),ye=1/me[3]/he*pe;return s.aY(me,me,[ye,ye,1/me[3],ye])})(W,r,c,O)));v&&(function(W,X,ne,he){const pe=he?4:0,me=he?0:4;let ye=0;const we=[],ve=[];for(let xe=0;xe<4;xe++){const De=s.aU([],W[xe+me],W[xe+pe]),Ze=s.aZ(De);s.aR(De,De,1/Ze),we.push(Ze),ve.push(De)}for(let xe=0;xe<4;xe++){const De=s.a_(W[xe+pe],ve[xe],ne);ye=De!==null&&De>=0?Math.max(ye,De):Math.max(ye,we[xe])}const Ae=(function(xe,De){const Ze=s.aU([],xe[De[0]],xe[De[1]]),Ge=s.aU([],xe[De[2]],xe[De[1]]),He=[0,0,0,0];return s.aV(He,s.aW([],Ze,Ge)),He[3]=-s.aX(He,xe[De[0]]),He})(W,X),Ie=(function(xe,De){const Ze=s.a$(xe),Ge=s.b0([],xe,1/Ze),He=s.aU([],De,s.aR([],Ge,s.aX(De,Ge))),et=s.a$(He);if(et>0){const Pt=Math.sqrt(1-Ge[3]*Ge[3]),wt=s.aR([],Ge,-Ge[3]),dt=s.aS([],wt,s.aR([],He,Pt/et));return s.b1(De,dt)}return null})(ne,Ae);if(Ie!==null){const xe=Ie/s.aX(ve[0],Ae);ye=Math.min(ye,xe)}for(let xe=0;xe<4;xe++){const De=Math.min(ye,we[xe]);W[xe+me]=[W[xe+pe][0]+ve[xe][0]*De,W[xe+pe][1]+ve[xe][1]*De,W[xe+pe][2]+ve[xe][2]*De,1]}})(R,T[0],v,b);const L=T.map((W=>{const X=s.aU([],R[W[0]],R[W[1]]),ne=s.aU([],R[W[2]],R[W[1]]),he=s.aV([],s.aW([],X,ne)),pe=-s.aX(he,R[W[1]]);return he.concat(pe)})),U=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],H=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const W of R)for(let X=0;X<3;X++)U[X]=Math.min(U[X],W[X]),H[X]=Math.max(H[X],W[X]);return new on(R,L,new Pn(U,H))}}class tn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,m=!0){this._helper.resize(r,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r,c,m,v,b){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Sn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,O)=>this.getConstrained(T,O)},r,c,m,v,b),this._coveringTilesDetailsProvider=new Yn}clone(){const r=new tn;return r.apply(this),r}apply(r,c,m){this._helper.apply(r,c,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new s.b2(0,r)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new s.P(0,0)),v=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),O=Math.floor(Math.min(m.x,v.x,b.x,T.x)),R=Math.floor(Math.max(m.x,v.x,b.x,T.x)),L=1;for(let U=O-L;U<=R+L;U++)U!==0&&c.push(new s.b2(U,r))}return c}getCameraFrustum(){return on.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),m=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(r,c){const m=s.aj(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(c,m),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),T=s.a1.fromLngLat(r),O=new s.a1(T.x-(v.x-b.x),T.y-(v.y-b.y));this.setCenter(O?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(s.a1.fromLngLat(r),c.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.a1.fromLngLat(r))}screenPointToLocation(r,c){var m;return(m=this.screenPointToMercatorCoordinate(r,c))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const m=c.pointCoordinate(r);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const m=c||0,v=[r.x,r.y,0,1],b=[r.x,r.y,1,1];s.aw(v,v,this._pixelMatrixInverse),s.aw(b,b,this._pixelMatrixInverse);const T=v[3],O=b[3],R=v[1]/T,L=b[1]/O,U=v[2]/T,H=b[2]/O,W=U===H?0:(m-U)/(H-U);return new s.a1(s.C.number(v[0]/T,b[0]/O,W)/this.worldSize,s.C.number(R,L,W)/this.worldSize,m)}coordinatePoint(r,c=0,m=this._pixelMatrix){const v=[r.x*this.worldSize,r.y*this.worldSize,c,1];return s.aw(v,v,m),new s.P(v[0]/v[3],v[1]/v[3])}getBounds(){const r=Math.max(0,this._helper._height/2-Ee(this));return new dr().extend(this.screenPointToLocation(new s.P(0,r))).extend(this.screenPointToLocation(new s.P(this._helper._width,r))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-Ee(this)}calculatePosMatrix(r,c=!1,m){var v;const b=(v=r.key)!==null&&v!==void 0?v:s.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),T=c?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(b)){const L=T.get(b);return m?L.f32:L.f64}const O=Le(r,this.worldSize);s.O(O,c?this._alignedProjMatrix:this._viewProjMatrix,O);const R={f64:O,f32:new Float32Array(O)};return T.set(b,R),m?R.f32:R.f64}calculateFogMatrix(r){const c=r.key,m=this._fogMatrixCacheF32;if(m.has(c))return m.get(c);const v=Le(r,this.worldSize);return s.O(v,this._fogMatrix,v),m.set(c,new Float32Array(v)),m.get(c)}getConstrained(r,c){c=s.ah(+c,this.minZoom,this.maxZoom);const m={center:new s.S(r.lng,r.lat),zoom:c};let v=this._helper._lngRange;if(!this._helper._renderWorldCopies&&v===null){const we=179.9999999999;v=[-we,we]}const b=this.tileSize*s.af(m.zoom);let T=0,O=b,R=0,L=b,U=0,H=0;const{x:W,y:X}=this.size;if(this._helper._latRange){const we=this._helper._latRange;T=s.U(we[1])*b,O=s.U(we[0])*b,O-T<X&&(U=X/(O-T))}v&&(R=s.aO(s.V(v[0])*b,0,b),L=s.aO(s.V(v[1])*b,0,b),L<R&&(L+=b),L-R<W&&(H=W/(L-R)));const{x:ne,y:he}=de(b,r);let pe,me;const ye=Math.max(H||0,U||0);if(ye){const we=new s.P(H?(L+R)/2:ne,U?(O+T)/2:he);return m.center=Se(b,we).wrap(),m.zoom+=s.ak(ye),m}if(this._helper._latRange){const we=X/2;he-we<T&&(me=T+we),he+we>O&&(me=O-we)}if(v){const we=(R+L)/2;let ve=ne;this._helper._renderWorldCopies&&(ve=s.aO(ne,we-b/2,we+b/2));const Ae=W/2;ve-Ae<R&&(pe=R+Ae),ve+Ae>L&&(pe=L-Ae)}if(pe!==void 0||me!==void 0){const we=new s.P(pe??ne,me??he);m.center=Se(b,we).wrap()}return m}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}_calculateNearFarZIfNeeded(r,c,m){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=r-v*this._helper._pixelPerMeter/Math.cos(c),T=v<0?b:r,O=Math.PI/2+this.pitchInRadians,R=s.ae(this.fov)*(Math.abs(Math.cos(s.ae(this.roll)))*this.height+Math.abs(Math.sin(s.ae(this.roll)))*this.width)/this.height*(.5+m.y/this.height),L=Math.sin(R)*T/Math.sin(s.ah(Math.PI-O-R,.01,Math.PI-.01)),U=Ee(this),H=Math.atan(U/this._helper.cameraToCenterDistance),W=s.ae(.75),X=H>W?2*H*(.5+m.y/(2*U)):W,ne=Math.sin(X)*T/Math.sin(s.ah(Math.PI-O-X,.01,Math.PI-.01)),he=Math.min(L,ne);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*he+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=de(this.worldSize,this.center),m=c.x,v=c.y;this._helper._pixelPerMeter=s.aj(1,this.center.lat)*this.worldSize;const b=s.ae(Math.min(this.pitch,ae)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let O;this._calculateNearFarZIfNeeded(T,b,r),O=new Float64Array(16),s.b4(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aq(this._invProjMatrix,O),O[8]=2*-r.x/this._helper._width,O[9]=2*r.y/this._helper._height,this._projectionMatrix=s.b5(O),s.N(O,O,[1,-1,1]),s.M(O,O,[0,0,-this._helper.cameraToCenterDistance]),s.b6(O,O,-this.rollInRadians),s.b7(O,O,this.pitchInRadians),s.b6(O,O,-this.bearingInRadians),s.M(O,O,[-m,-v,0]),this._mercatorMatrix=s.N([],O,[this.worldSize,this.worldSize,this.worldSize]),s.N(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),s.M(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=s.aq([],O);const R=[0,0,-1,1];s.aw(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),s.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,s.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.M(this._fogMatrix,this._fogMatrix,[-m,-v,0]),s.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const L=this._helper._width%2/2,U=this._helper._height%2/2,H=Math.cos(this.bearingInRadians),W=Math.sin(-this.bearingInRadians),X=m-Math.round(m)+H*L+W*U,ne=v-Math.round(v)+H*U+W*L,he=new Float64Array(O);if(s.M(he,he,[X>.5?X-1:X,ne>.5?ne-1:ne,0]),this._alignedProjMatrix=he,O=s.aq(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new s.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return s.aw(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=s.aj(1,this.center.lat)*this.worldSize;return Xe(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const m=s.a1.fromLngLat(r),v=[m.x*this.worldSize,m.y*this.worldSize,c,1];return s.aw(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(r){const{overscaledTileID:c,aligned:m,applyTerrainMatrix:v}=r,b=this._helper.getMercatorTileCoordinates(c),T=c?this.calculatePosMatrix(c,m,!0):null;let O;return O=c&&c.terrainRttPosMatrix32f&&v?c.terrainRttPosMatrix32f:T||s.b8(),{mainMatrix:O,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,m){return 1}transformLightDirection(r){return s.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,m,v){const b=this.calculatePosMatrix(m);let T;v?(T=[r,c,v(r,c),1],s.aw(T,T,b)):(T=[r,c,0,1],zl(T,T,b));const O=T[3];return{point:new s.P(T[0]/O,T[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const m=s.a1.fromLngLat(r,c),v=m.meterInMercatorCoordinateUnits(),b=s.b9();return s.M(b,b,[m.x,m.y,m.z]),s.b6(b,b,Math.PI),s.b7(b,b,Math.PI/2),s.N(b,b,[-v,v,v]),b}getProjectionDataForCustomLayer(r=!0){const c=new s.Z(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),v=Le(c,this.worldSize);s.O(v,this._viewProjMatrix,v),m.tileMercatorCoords=[0,0,1,1];const b=[s.$,s.$,this.worldSize/this._helper.pixelsPerMeter],T=s.ba();return s.N(T,v,b),m.fallbackMatrix=T,m.mainMatrix=T,m}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function Bh(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Jn(_){if(_.useSlerp)if(_.k<1){const r=s.bb(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),c=s.bb(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),m=new Float64Array(4);s.bc(m,r,c,_.k);const v=s.bd(m);_.tr.setRoll(v.roll),_.tr.setPitch(v.pitch),_.tr.setBearing(v.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(s.C.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(s.C.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(s.C.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function sa(_,r,c,m,v){const b=v.padding,T=de(v.worldSize,c.getNorthWest()),O=de(v.worldSize,c.getNorthEast()),R=de(v.worldSize,c.getSouthEast()),L=de(v.worldSize,c.getSouthWest()),U=s.ae(-m),H=T.rotate(U),W=O.rotate(U),X=R.rotate(U),ne=L.rotate(U),he=new s.P(Math.max(H.x,W.x,ne.x,X.x),Math.max(H.y,W.y,ne.y,X.y)),pe=new s.P(Math.min(H.x,W.x,ne.x,X.x),Math.min(H.y,W.y,ne.y,X.y)),me=he.sub(pe),ye=(v.width-(b.left+b.right+r.left+r.right))/me.x,we=(v.height-(b.top+b.bottom+r.top+r.bottom))/me.y;if(we<0||ye<0)return void Bh();const ve=Math.min(s.ak(v.scale*Math.min(ye,we)),_.maxZoom),Ae=s.P.convert(_.offset),Ie=new s.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(s.ae(m)),xe=Ae.add(Ie).mult(v.scale/s.af(ve));return{center:Se(v.worldSize,T.add(R).div(2).sub(xe)),zoom:ve,bearing:m}}class hi{get useGlobeControls(){return!1}handlePanInertia(r,c){const m=r.mag(),v=Math.abs(Ee(c));return{easingOffset:r.mult(Math.min(.75*v/m,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,m){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(m,r.around)}cameraForBoxAndBearing(r,c,m,v,b){return sa(r,c,m,v,b)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(s.S.convert(c.center))}handleEaseTo(r,c){const m=r.zoom,v=r.padding,b={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},O=c.zoom!==void 0,R=!r.isPaddingEqual(c.padding);let L=!1;const U=O?+c.zoom:r.zoom;let H=r.centerPoint.add(c.offsetAsPoint);const W=r.screenPointToLocation(H),{center:X,zoom:ne}=r.getConstrained(s.S.convert(c.center||W),U??m);Ua(r,X);const he=de(r.worldSize,W),pe=de(r.worldSize,X).sub(he),me=s.af(ne-m);return L=ne!==m,{easeFunc:ye=>{if(L&&r.setZoom(s.C.number(m,ne,ye)),s.be(b,T)||Jn({startEulerAngles:b,endEulerAngles:T,tr:r,k:ye,useSlerp:b.roll!=T.roll}),R&&(r.interpolatePadding(v,c.padding,ye),H=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const we=s.af(r.zoom-m),ve=ne>m?Math.min(2,me):Math.max(.5,me),Ae=Math.pow(ve,1-ye),Ie=Se(r.worldSize,he.add(pe.mult(ye*Ae)).mult(we));r.setLocationAtPoint(r.renderWorldCopies?Ie.wrap():Ie,H)}},isZooming:L,elevationCenter:X}}handleFlyTo(r,c){const m=c.zoom!==void 0,v=r.zoom,b=r.getConstrained(s.S.convert(c.center||c.locationAtOffset),m?+c.zoom:v),T=b.center,O=b.zoom;Ua(r,T);const R=de(r.worldSize,c.locationAtOffset),L=de(r.worldSize,T).sub(R),U=L.mag(),H=s.af(O-v);let W;if(c.minZoom!==void 0){const X=Math.min(+c.minZoom,v,O),ne=r.getConstrained(T,X).zoom;W=s.af(ne-v)}return{easeFunc:(X,ne,he,pe)=>{r.setZoom(X===1?O:v+s.ak(ne));const me=X===1?T:Se(r.worldSize,R.add(L.mult(he)).mult(ne));r.setLocationAtPoint(r.renderWorldCopies?me.wrap():me,pe)},scaleOfZoom:H,targetCenter:T,scaleOfMinZoom:W,pixelPathLength:U}}}class Yr{constructor(r,c,m){this.blendFunction=r,this.blendColor=c,this.mask=m}}Yr.Replace=[1,0],Yr.disabled=new Yr(Yr.Replace,s.bf.transparent,[!1,!1,!1,!1]),Yr.unblended=new Yr(Yr.Replace,s.bf.transparent,[!0,!0,!0,!0]),Yr.alphaBlended=new Yr([1,771],s.bf.transparent,[!0,!0,!0,!0]);const ls=2305;class nr{constructor(r,c,m){this.enable=r,this.mode=c,this.frontFace=m}}nr.disabled=new nr(!1,1029,ls),nr.backCCW=new nr(!0,1029,ls),nr.frontCCW=new nr(!0,1028,ls);class lr{constructor(r,c,m){this.func=r,this.mask=c,this.range=m}}lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(519,lr.ReadOnly,[0,1]);const la=7680;class Pr{constructor(r,c,m,v,b,T){this.test=r,this.ref=c,this.mask=m,this.fail=v,this.depthFail=b,this.pass=T}}Pr.disabled=new Pr({func:519,mask:0},0,0,la,la,la);const gi=new WeakMap;function ho(_){var r;if(gi.has(_))return gi.get(_);{const c=(r=_.getParameter(_.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return gi.set(_,c),c}}class fo{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,m=c.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const v=new s.aL;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const b=new s.aN;b.emplaceBack(0,1,2),this._fullscreenTriangle=new Mo(c.createVertexBuffer(v,ko.members),c.createIndexBuffer(b),s.aM.simpleSegment(0,0,v.length,b.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(m.TEXTURE1);const T=m.createTexture();m.bindTexture(m.TEXTURE_2D,T),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),ho(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const m=this._cachedRenderContext.context,v=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:s.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,v.TRIANGLES,lr.disabled,Pr.disabled,Yr.unblended,nr.disabled,((b,T)=>({u_input:b,u_output_expected:T}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ho(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const b=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ho(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=fo._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const Bl=s.$/128;function Fl(_,r){const c=_.granularity!==void 0?Math.max(_.granularity,1):1,m=c+(_.generateBorders?2:0),v=c+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),b=m+1,T=v+1,O=_.generateBorders?-1:0,R=_.generateBorders||_.extendToNorthPole?-1:0,L=c+(_.generateBorders?1:0),U=c+(_.generateBorders||_.extendToSouthPole?1:0),H=b*T,W=m*v*6,X=b*T>65536;if(X&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ne=X||r==="32bit",he=new Int16Array(2*H);let pe=0;for(let we=R;we<=U;we++)for(let ve=O;ve<=L;ve++){let Ae=ve/c*s.$;ve===-1&&(Ae=-Bl),ve===c+1&&(Ae=s.$+Bl);let Ie=we/c*s.$;we===-1&&(Ie=_.extendToNorthPole?s.bh:-Bl),we===c+1&&(Ie=_.extendToSouthPole?s.bi:s.$+Bl),he[pe++]=Ae,he[pe++]=Ie}const me=ne?new Uint32Array(W):new Uint16Array(W);let ye=0;for(let we=0;we<v;we++)for(let ve=0;ve<m;ve++){const Ae=ve+1+we*b,Ie=ve+(we+1)*b,xe=ve+1+(we+1)*b;me[ye++]=ve+we*b,me[ye++]=Ie,me[ye++]=Ae,me[ye++]=Ae,me[ye++]=Ie,me[ye++]=xe}return{vertices:he.buffer.slice(0),indices:me.buffer.slice(0),uses32bitIndices:ne}}const cs=new s.aK({fill:new s.bj(128,2),line:new s.bj(512,0),tile:new s.bj(128,32),stencil:new s.bj(128,1),circle:3});class $l{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Aa.projectionGlobe}get vertexShaderPreludeCode(){return Aa.projectionMercator.vertexSource}get subdivisionGranularity(){return cs}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new fo(r));const c=s.U(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(c,m),b=D.now();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=b);const T=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bl(T))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,m,v,b){const T=(b==="stencil"?cs.stencil:cs.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:T,generateBorders:m,extendToNorthPole:c.y===0&&v,extendToSouthPole:c.y===(1<<c.z)-1&&v})}_getMesh(r,c){const m=this._getMeshKey(c);if(m in this._tileMeshCache)return this._tileMeshCache[m];const v=(function(b,T){const O=Fl(T,"16bit"),R=s.aL.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),L=s.aN.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new Mo(b.createVertexBuffer(R,ko.members),b.createIndexBuffer(L),s.aM.simpleSegment(0,0,R.length,L.length))})(r,c);return this._tileMeshCache[m]=v,v}recalculate(r){}hasTransition(){const r=D.now();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const qa=new s.r({type:new s.D(s.v.projection.type)});class Ul extends s.E{constructor(r){super(),this._transitionable=new s.t(qa,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0)),this._mercatorProjection=new _r,this._verticalPerspectiveProjection=new $l}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof s.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,m,v,b){return this.currentProjection.getMeshFromTileID(r,c,m,v,b)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Gs(_){const r=Io(_.worldSize,_.center.lat);return 2*Math.PI*r}function Ca(_,r,c,m,v){const b=1/(1<<v),T=r/s.$*b+m*b,O=s.bo((_/s.$*b+c*b)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,L=Math.cos(R),U=new Float64Array(3);return U[0]=Math.sin(O)*L,U[1]=Math.sin(R),U[2]=Math.cos(O)*L,U}function Dn(_){return(function(r,c){const m=Math.cos(c),v=new Float64Array(3);return v[0]=Math.sin(r)*m,v[1]=Math.sin(c),v[2]=Math.cos(r)*m,v})(_.lng*Math.PI/180,_.lat*Math.PI/180)}function Io(_,r){return _/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Vl(_){const r=Math.asin(_[1])/Math.PI*180,c=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(c>1e-6){const m=_[0]/c,v=Math.acos(_[2]/c),b=(m>0?v:-v)/Math.PI*180;return new s.S(s.aO(b,-180,180),r)}return new s.S(0,r)}function Qn(_){return Math.cos(_*Math.PI/180)}function sn(_,r){const c=Qn(_),m=Qn(r);return s.ak(m/c)}function Gu(_,r){const c=_.rotate(r.bearingInRadians),m=r.zoom+sn(r.center.lat,0),v=s.bk(1/Qn(r.center.lat),1/Qn(Math.min(Math.abs(r.center.lat),60)),s.bn(m,7,3,0,1)),b=360/Gs({worldSize:r.worldSize,center:{lat:r.center.lat}});return new s.S(r.center.lng-c.x*b*v,s.ah(r.center.lat+c.y*b,-s.ai,s.ai))}function Oo(_){const r=.5*_,c=Math.sin(r),m=Math.cos(r);return Math.log(c+m)-Math.log(m-c)}function Fh(_,r,c,m){const v=_.lat+c*m;if(Math.abs(c)>1){const b=(Math.sign(_.lat+c)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,T=Math.abs(_.lat+c)*Math.PI/180,O=Oo(b+m*(T-b)),R=Oo(b),L=Oo(T);return new s.S(_.lng+r*((O-R)/(L-R)),v)}return new s.S(_.lng+r*m,v)}class $h{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,c,m,v){const b=`${r.z}_${r.x}_${r.y}_${v?.terrain?"t":""}`,T=this._cache.get(b);if(T)return T;const O=this._cachePrevious.get(b);if(O)return this._cache.set(b,O),O;const R=this._boundingVolumeFactory(r,c,m,v);return this._cache.set(b,R),this._hadAnyChanges=!0,R}}class us{constructor(r,c,m,v){this.min=m,this.max=v,this.points=r,this.planes=c}static fromAabb(r,c){const m=[];for(let v=0;v<8;v++)m.push([1&~v?r[0]:c[0],(v>>1&1)==1?c[1]:r[1],(v>>2&1)==1?c[2]:r[2]]);return new us(m,[[-1,0,0,c[0]],[1,0,0,-r[0]],[0,-1,0,c[1]],[0,1,0,-r[1]],[0,0,-1,c[2]],[0,0,1,-r[2]]],r,c)}static fromCenterSizeAngles(r,c,m){const v=s.br([],m[0],m[1],m[2]),b=s.bs([],[c[0],0,0],v),T=s.bs([],[0,c[1],0],v),O=s.bs([],[0,0,c[2]],v),R=[...r],L=[...r];for(let H=0;H<8;H++)for(let W=0;W<3;W++){const X=r[W]+b[W]*(1&~H?-1:1)+T[W]*((H>>1&1)==1?1:-1)+O[W]*((H>>2&1)==1?1:-1);R[W]=Math.min(R[W],X),L[W]=Math.max(L[W],X)}const U=[];for(let H=0;H<8;H++){const W=[...r];s.aS(W,W,s.aR([],b,1&~H?-1:1)),s.aS(W,W,s.aR([],T,(H>>1&1)==1?1:-1)),s.aS(W,W,s.aR([],O,(H>>2&1)==1?1:-1)),U.push(W)}return new us(U,[[...b,-s.aX(b,U[0])],[...T,-s.aX(T,U[0])],[...O,-s.aX(O,U[0])],[-b[0],-b[1],-b[2],-s.aX(b,U[7])],[-T[0],-T[1],-T[2],-s.aX(T,U[7])],[-O[0],-O[1],-O[2],-s.aX(O,U[7])]],R,L)}intersectsFrustum(r){let c=!0;const m=this.points.length,v=this.planes.length,b=r.planes.length,T=r.points.length;for(let O=0;O<b;O++){const R=r.planes[O];let L=0;for(let U=0;U<m;U++){const H=this.points[U];R[0]*H[0]+R[1]*H[1]+R[2]*H[2]+R[3]>=0&&L++}if(L===0)return 0;L<m&&(c=!1)}if(c)return 2;for(let O=0;O<v;O++){const R=this.planes[O];let L=0;for(let U=0;U<T;U++){const H=r.points[U];R[0]*H[0]+R[1]*H[1]+R[2]*H[2]+R[3]>=0&&L++}if(L===0)return 0}return 1}intersectsPlane(r){const c=this.points.length;let m=0;for(let v=0;v<c;v++){const b=this.points[v];r[0]*b[0]+r[1]*b[1]+r[2]*b[2]+r[3]>=0&&m++}return m===c?2:m===0?0:1}}function zn(_,r,c){const m=_-r;return m<0?-m:Math.max(0,m-c)}function hs(_,r,c,m,v){const b=_-c;let T;return T=b<0?Math.min(-b,1+b-v):b>1?Math.min(Math.max(b-v,0),1-b):0,Math.max(T,zn(r,m,v))}class Ga{constructor(){this._boundingVolumeCache=new $h(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,c,m,v){const b=1<<m.z,T=1/b,O=m.x/b,R=m.y/b;let L=2;return L=Math.min(L,hs(r,c,O,R,T)),L=Math.min(L,hs(r,c,O+.5,-R-T,T)),L=Math.min(L,hs(r,c,O+.5,2-R-T,T)),L}getWrap(r,c,m){const v=1<<c.z,b=1/v,T=c.x/v,O=zn(r.x,T,b),R=zn(r.x,T-1,b),L=zn(r.x,T+1,b),U=Math.min(O,R,L);return U===L?1:U===R?-1:0}allowVariableZoom(r,c){return zt(r,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,c,m,v){return this._boundingVolumeCache.getTileBoundingVolume(r,c,m,v)}_computeTileBoundingVolume(r,c,m,v){var b,T;let O=0,R=0;if(v?.terrain){const L=new s.Z(r.z,c,r.z,r.x,r.y),U=v.terrain.getMinMaxElevation(L);O=(b=U.minElevation)!==null&&b!==void 0?b:Math.min(0,m),R=(T=U.maxElevation)!==null&&T!==void 0?T:Math.max(0,m)}if(O/=s.bu,R/=s.bu,O+=1,R+=1,r.z<=0)return us.fromAabb([-R,-R,-R],[R,R,R]);if(r.z===1)return us.fromAabb([r.x===0?-R:0,r.y===0?0:-R,-R],[r.x===0?0:R,r.y===0?R:0,R]);{const L=[Ca(0,0,r.x,r.y,r.z),Ca(s.$,0,r.x,r.y,r.z),Ca(s.$,s.$,r.x,r.y,r.z),Ca(0,s.$,r.x,r.y,r.z)],U=[];for(const He of L)U.push(s.aR([],He,R));if(R!==O)for(const He of L)U.push(s.aR([],He,O));r.y===0&&U.push([0,1,0]),r.y===(1<<r.z)-1&&U.push([0,-1,0]);const H=[1,1,1],W=[-1,-1,-1];for(const He of U)for(let et=0;et<3;et++)H[et]=Math.min(H[et],He[et]),W[et]=Math.max(W[et],He[et]);const X=Ca(s.$/2,s.$/2,r.x,r.y,r.z),ne=s.aW([],[0,1,0],X);s.aV(ne,ne);const he=s.aW([],X,ne);s.aV(he,he);const pe=s.aW([],L[2],L[1]);s.aV(pe,pe);const me=s.aW([],L[0],L[3]);s.aV(me,me),U.push(s.aR([],X,R)),r.y>=(1<<r.z)/2&&U.push(s.aR([],Ca(s.$/2,0,r.x,r.y,r.z),R)),r.y<(1<<r.z)/2&&U.push(s.aR([],Ca(s.$/2,s.$,r.x,r.y,r.z),R));const ye=Fc(X,U),we=Fc(he,U),ve=[-X[0],-X[1],-X[2],ye.max],Ae=[X[0],X[1],X[2],-ye.min],Ie=[-he[0],-he[1],-he[2],we.max],xe=[he[0],he[1],he[2],-we.min],De=[...pe,0],Ze=[...me,0],Ge=[];return r.y===0?Ge.push(s.bt(Ze,De,ve),s.bt(Ze,De,Ae)):Ge.push(s.bt(Ie,De,ve),s.bt(Ie,De,Ae),s.bt(Ie,Ze,ve),s.bt(Ie,Ze,Ae)),r.y===(1<<r.z)-1?Ge.push(s.bt(Ze,De,ve),s.bt(Ze,De,Ae)):Ge.push(s.bt(xe,De,ve),s.bt(xe,De,Ae),s.bt(xe,Ze,ve),s.bt(xe,Ze,Ae)),new us(Ge,[ve,Ae,Ie,xe,De,Ze],H,W)}}}function Fc(_,r){let c=1/0,m=-1/0;for(const v of r){const b=s.aX(_,v);c=Math.min(c,b),m=Math.max(m,b)}return{min:c,max:m}}class $c{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=s.bv(),this._projectionMatrix=s.b9(),this._globeViewProjMatrix32f=s.b8(),this._globeViewProjMatrixNoCorrection=s.b9(),this._globeViewProjMatrixNoCorrectionInverted=s.b9(),this._globeProjMatrixInverted=s.b9(),this._cameraPosition=s.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Sn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._coveringTilesDetailsProvider=new Ga}clone(){const r=new $c;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=s.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:m}=r,v=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,m=this.cameraToCenterDistance/r,v=Math.sin(c)*m,b=Math.cos(c)*m+1,T=1/Math.sqrt(v*v+b*b)*1;let O=-v,R=b;const L=Math.sqrt(O*O+R*R);O/=L,R/=L;const U=[0,O,R];s.bw(U,U,[0,0,0],-this.bearingInRadians),s.bx(U,U,[0,0,0],-1*this.center.lat*Math.PI/180),s.by(U,U,[0,0,0],this.center.lng*Math.PI/180);const H=1/s.aZ(U);return s.aR(U,U,H),[...U,-T*H]}isLocationOccluded(r){return!this.isSurfacePointVisible(Dn(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,v=Math.cos(m),b=[Math.sin(c)*v,Math.sin(m),Math.cos(c)*v],T=[b[2],0,-b[0]],O=[0,0,0];s.aW(O,T,b),s.aV(T,T),s.aV(O,O);const R=[0,0,0];return s.aV(R,[T[0]*r[0]+O[0]*r[1]+b[0]*r[2],T[1]*r[0]+O[1]*r[1]+b[1]*r[2],T[2]*r[0]+O[2]*r[1]+b[2]*r[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,m){const v=(function(O,R,L){const U=1/(1<<L.z);return new s.a1(O/s.$*U+L.x*U,R/s.$*U+L.y*U)})(r,c,m.canonical),b=(T=v.y,[s.bo(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(r,c,m,v){const b=m.canonical,T=Ca(r,c,b.x,b.y,b.z),O=1+(v?v(r,c):0)/s.bu,R=[T[0]*O,T[1]*O,T[2]*O,1];s.aw(R,R,this._globeViewProjMatrixNoCorrection);const L=this._cachedClippingPlane,U=L[0]*T[0]+L[1]*T[1]+L[2]*T[2]+L[3]<0;return{point:new s.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:U}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Io(this.worldSize,this.center.lat),c=s.ba(),m=s.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),s.b4(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;c[8]=2*-v.x/this._helper._width,c[9]=2*v.y/this._helper._height,this._projectionMatrix=s.b5(c),this._globeProjMatrixInverted=s.ba(),s.aq(this._globeProjMatrixInverted,c),s.M(c,c,[0,0,-this.cameraToCenterDistance]),s.b6(c,c,this.rollInRadians),s.b7(c,c,-this.pitchInRadians),s.b6(c,c,this.bearingInRadians),s.M(c,c,[0,0,-r]);const b=s.bp();b[0]=r,b[1]=r,b[2]=r,s.b7(m,c,this.center.lat*Math.PI/180),s.bz(m,m,-this.center.lng*Math.PI/180),s.N(m,m,b),this._globeViewProjMatrixNoCorrection=m,s.b7(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bz(c,c,-this.center.lng*Math.PI/180),s.N(c,c,b),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=s.ba(),s.aq(this._globeViewProjMatrixNoCorrectionInverted,m);const T=s.bp();this._cameraPosition=s.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,s.bw(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),s.bx(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),s.bw(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),s.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bx(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),s.by(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const O=s.b5(this._globeViewProjMatrixNoCorrectionInverted);s.N(O,O,[1,1,-1]),this._cachedFrustum=on.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){s.w("calculateFogMatrix is not supported on globe projection.");const c=s.ba();return s.ag(c),c}getVisibleUnwrappedCoordinates(r){return[new s.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=Dn(r);s.aR(m,m,1+c/s.bu);const v=s.bv();return s.aw(v,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,m=[new s.P(0,0),new s.P(r,0),new s.P(this.width,0),new s.P(this.width,c),new s.P(this.width,this.height),new s.P(r,this.height),new s.P(0,this.height),new s.P(0,c)],v=[];for(const H of m)v.push(this.unprojectScreenPoint(H));let b=0,T=0,O=0,R=0;const L=this.center;for(const H of v){const W=s.bA(L.lng,H.lng),X=s.bA(L.lat,H.lat);W<T&&(T=W),W>b&&(b=W),X<R&&(R=X),X>O&&(O=X)}const U=[L.lng+T,L.lat+R,L.lng+b,L.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(U[3]=90,U[0]=-180,U[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(U[1]=-90,U[0]=-180,U[2]=180),new dr(U)}getConstrained(r,c){const m=s.ah(r.lat,-s.ai,s.ai),v=s.ah(+c,this.minZoom+sn(0,m),this.maxZoom);return{center:new s.S(r.lng,m),zoom:v}}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}setLocationAtPoint(r,c){const m=Dn(this.unprojectScreenPoint(c)),v=Dn(r),b=s.bp();s.bB(b);const T=s.bp();s.by(T,m,b,-this.center.lng*Math.PI/180),s.bx(T,T,b,this.center.lat*Math.PI/180);const O=v[0]*v[0]+v[2]*v[2],R=T[0]*T[0];if(O<R)return;const L=Math.sqrt(O-R),U=-L,H=s.bC(v[0],v[2],T[0],L),W=s.bC(v[0],v[2],T[0],U),X=s.bp();s.by(X,v,b,-H);const ne=s.bC(X[1],X[2],T[1],T[2]),he=s.bp();s.by(he,v,b,-W);const pe=s.bC(he[1],he[2],T[1],T[2]),me=.5*Math.PI,ye=ne>=-me&&ne<=me,we=pe>=-me&&pe<=me;let ve,Ae;if(ye&&we){const Ze=this.center.lng*Math.PI/180,Ge=this.center.lat*Math.PI/180;s.bD(H,Ze)+s.bD(ne,Ge)<s.bD(W,Ze)+s.bD(pe,Ge)?(ve=H,Ae=ne):(ve=W,Ae=pe)}else if(ye)ve=H,Ae=ne;else{if(!we)return;ve=W,Ae=pe}const Ie=ve/Math.PI*180,xe=Ae/Math.PI*180,De=this.center.lat;this.setCenter(new s.S(Ie,s.ah(xe,-90,90))),this.setZoom(this.zoom+sn(De,this.center.lat))}locationToScreenPoint(r,c){const m=Dn(r);if(c){const v=c.getElevationForLngLatZoom(r,this._helper._tileZoom);s.aR(m,m,1+v/s.bu)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(r){const c=s.bv();return s.aw(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new s.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const m=c.pointCoordinate(r);if(m)return m}return s.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var m;return(m=this.screenPointToMercatorCoordinate(r,c))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(r,c){const m=this._cameraPosition,v=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(m,v)}getRayDirectionFromPixel(r){const c=s.bv();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,s.aw(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const m=s.bp();m[0]=c[0]-this._cameraPosition[0],m[1]=c[1]-this._cameraPosition[1],m[2]=c[2]-this._cameraPosition[2];const v=s.bp();return s.aV(v,m),v}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=s.bv();return s.aw(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const m=s.aX(r,c),v=s.bp(),b=s.bp();s.aR(b,c,m),s.aU(v,r,b);const T=1-s.aX(v,v);if(T<0)return null;const O=s.aX(r,r)-1,R=-m+(m<0?1:-1)*Math.sqrt(T),L=O/R,U=R;return{tMin:Math.min(L,U),tMax:Math.max(L,U)}}unprojectScreenPoint(r){const c=this._cameraPosition,m=this.getRayDirectionFromPixel(r),v=this.rayPlanetIntersection(c,m);if(v){const U=s.bp();s.aS(U,c,[m[0]*v.tMin,m[1]*v.tMin,m[2]*v.tMin]);const H=s.bp();return s.aV(H,U),Vl(H)}const b=this._cachedClippingPlane,T=b[0]*m[0]+b[1]*m[1]+b[2]*m[2],O=-s.b1(b,c)/T,R=s.bp();if(O>0)s.aS(R,c,[m[0]*O,m[1]*O,m[2]*O]);else{const U=s.bp();s.aS(U,c,[2*m[0],2*m[1],2*m[2]]);const H=s.b1(this._cachedClippingPlane,U);s.aU(R,U,[this._cachedClippingPlane[0]*H,this._cachedClippingPlane[1]*H,this._cachedClippingPlane[2]*H])}const L=(function(U){const H=s.bp();return H[0]=U[0]*-U[3],H[1]=U[1]*-U[3],H[2]=U[2]*-U[3],{center:H,radius:Math.sqrt(1-U[3]*U[3])}})(b);return Vl((function(U,H,W){const X=s.bp();s.aU(X,W,U);const ne=s.bp();return s.bq(ne,U,X,H/s.a$(X)),ne})(L.center,L.radius,R))}getMatrixForModel(r,c){const m=s.S.convert(r),v=1/s.bu,b=s.b9();return s.bz(b,b,m.lng/180*Math.PI),s.b7(b,b,-m.lat/180*Math.PI),s.M(b,b,[0,0,1+c/s.bu]),s.b7(b,b,.5*Math.PI),s.N(b,b,[v,v,v]),b}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new s.Z(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class Uc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,m=!0){this._helper.resize(r,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Sn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._globeness=1,this._mercatorTransform=new tn,this._verticalPerspectiveTransform=new $c}clone(){const r=new Uc;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),m=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:c.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return s.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,m){const v=this._mercatorTransform.getPitchedTextCorrection(r,c,m),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,m);return s.bk(v,b,this._globeness)}projectTileCoordinates(r,c,m,v){return this.currentTransform.projectTileCoordinates(r,c,m,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,c){return this.currentTransform.getConstrained(r,c)}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return m.fallbackMatrix=c.mainMatrix,m}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class ai{get useGlobeControls(){return!0}handlePanInertia(r,c){const m=Gu(r,c);return Math.abs(m.lng-c.center.lng)>180&&(m.lng=c.center.lng+179.5*Math.sign(m.lng-c.center.lng)),{easingCenter:m,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const m=r.around,v=c.screenPointToLocation(m);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const b=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const T=c.zoom-b;if(T===0)return;const O=s.bA(c.center.lng,v.lng),R=O/(Math.abs(O/180)+1),L=s.bA(c.center.lat,v.lat),U=c.getRayDirectionFromPixel(m),H=c.cameraPosition,W=-1*s.aX(H,U),X=s.bp();s.aS(X,H,[U[0]*W,U[1]*W,U[2]*W]);const ne=s.aZ(X)-1,he=Math.exp(.5*-Math.max(ne-.3,0)),pe=Io(c.worldSize,c.center.lat)/Math.min(c.width,c.height),me=s.bn(pe,.9,.5,1,.25),ye=(1-s.af(-T))*Math.min(he,me),we=c.center.lat,ve=c.zoom,Ae=new s.S(c.center.lng+R*ye,s.ah(c.center.lat+L*ye,-s.ai,s.ai));c.setLocationAtPoint(v,m);const Ie=c.center,xe=s.bn(Math.abs(O),45,85,0,1),De=s.bn(pe,.75,.35,0,1),Ze=Math.pow(Math.max(xe,De),.25),Ge=s.bA(Ie.lng,Ae.lng),He=s.bA(Ie.lat,Ae.lat);c.setCenter(new s.S(Ie.lng+Ge*Ze,Ie.lat+He*Ze).wrap()),c.setZoom(ve+sn(we,c.center.lat))}handleMapControlsPan(r,c,m){if(!r.panDelta)return;const v=c.center.lat,b=c.zoom;c.setCenter(Gu(r.panDelta,c).wrap()),c.setZoom(b+sn(v,c.center.lat))}cameraForBoxAndBearing(r,c,m,v,b){const T=sa(r,c,m,v,b),O=c.left/b.width*2-1,R=(b.width-c.right)/b.width*2-1,L=c.top/b.height*-2+1,U=(b.height-c.bottom)/b.height*-2+1,H=s.bA(m.getWest(),m.getEast())<0,W=H?m.getEast():m.getWest(),X=H?m.getWest():m.getEast(),ne=Math.max(m.getNorth(),m.getSouth()),he=Math.min(m.getNorth(),m.getSouth()),pe=W+.5*s.bA(W,X),me=ne+.5*s.bA(ne,he),ye=b.clone();ye.setCenter(T.center),ye.setBearing(T.bearing),ye.setPitch(0),ye.setRoll(0),ye.setZoom(T.zoom);const we=ye.modelViewProjectionMatrix,ve=[Dn(m.getNorthWest()),Dn(m.getNorthEast()),Dn(m.getSouthWest()),Dn(m.getSouthEast()),Dn(new s.S(X,me)),Dn(new s.S(W,me)),Dn(new s.S(pe,ne)),Dn(new s.S(pe,he))],Ae=Dn(T.center);let Ie=Number.POSITIVE_INFINITY;for(const xe of ve)O<0&&(Ie=ai.getLesserNonNegativeNonNull(Ie,ai.solveVectorScale(xe,Ae,we,"x",O))),R>0&&(Ie=ai.getLesserNonNegativeNonNull(Ie,ai.solveVectorScale(xe,Ae,we,"x",R))),L>0&&(Ie=ai.getLesserNonNegativeNonNull(Ie,ai.solveVectorScale(xe,Ae,we,"y",L))),U<0&&(Ie=ai.getLesserNonNegativeNonNull(Ie,ai.solveVectorScale(xe,Ae,we,"y",U)));if(Number.isFinite(Ie)&&Ie!==0)return T.zoom=ye.zoom+s.ak(Ie),T;Bh()}handleJumpToCenterZoom(r,c){const m=r.center.lat,v=r.getConstrained(c.center?s.S.convert(c.center):r.center,r.zoom).center;r.setCenter(v.wrap());const b=c.zoom!==void 0?+c.zoom:r.zoom+sn(m,v.lat);r.zoom!==b&&r.setZoom(b)}handleEaseTo(r,c){const m=r.zoom,v=r.center,b=r.padding,T={roll:r.roll,pitch:r.pitch,bearing:r.bearing},O={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},R=c.zoom!==void 0,L=!r.isPaddingEqual(c.padding);let U=!1;const H=c.center?s.S.convert(c.center):v,W=r.getConstrained(H,m).center;Ua(r,W);const X=r.clone();X.setCenter(W),X.setZoom(R?+c.zoom:m+sn(v.lat,H.lat)),X.setBearing(c.bearing);const ne=new s.P(s.ah(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),s.ah(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));X.setLocationAtPoint(W,ne);const he=(c.offset&&c.offsetAsPoint.mag())>0?X.center:W,pe=R?+c.zoom:m+sn(v.lat,he.lat),me=m+sn(v.lat,0),ye=pe+sn(he.lat,0),we=s.bA(v.lng,he.lng),ve=s.bA(v.lat,he.lat),Ae=s.af(ye-me);return U=pe!==m,{easeFunc:Ie=>{if(s.be(T,O)||Jn({startEulerAngles:T,endEulerAngles:O,tr:r,k:Ie,useSlerp:T.roll!=O.roll}),L&&r.interpolatePadding(b,c.padding,Ie),c.around)s.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const xe=ye>me?Math.min(2,Ae):Math.max(.5,Ae),De=Math.pow(xe,1-Ie),Ze=Fh(v,we,ve,Ie*De);r.setCenter(Ze.wrap())}if(U){const xe=s.C.number(me,ye,Ie)+sn(0,r.center.lat);r.setZoom(xe)}},isZooming:U,elevationCenter:he}}handleFlyTo(r,c){const m=c.zoom!==void 0,v=r.center,b=r.zoom,T=r.padding,O=!r.isPaddingEqual(c.padding),R=r.getConstrained(s.S.convert(c.center||c.locationAtOffset),b).center,L=m?+c.zoom:r.zoom+sn(r.center.lat,R.lat),U=r.clone();U.setCenter(R),U.setZoom(L),U.setBearing(c.bearing);const H=new s.P(s.ah(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),s.ah(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));U.setLocationAtPoint(R,H);const W=U.center;Ua(r,W);const X=(function(ve,Ae,Ie){const xe=Dn(Ae),De=Dn(Ie),Ze=s.aX(xe,De),Ge=Math.acos(Ze),He=Gs(ve);return Ge/(2*Math.PI)*He})(r,v,W),ne=b+sn(v.lat,0),he=L+sn(W.lat,0),pe=s.af(he-ne);let me;if(typeof c.minZoom=="number"){const ve=+c.minZoom+sn(W.lat,0),Ae=Math.min(ve,ne,he)+sn(0,W.lat),Ie=r.getConstrained(W,Ae).zoom+sn(W.lat,0);me=s.af(Ie-ne)}const ye=s.bA(v.lng,W.lng),we=s.bA(v.lat,W.lat);return{easeFunc:(ve,Ae,Ie,xe)=>{const De=Fh(v,ye,we,Ie);O&&r.interpolatePadding(T,c.padding,ve);const Ze=ve===1?W:De;r.setCenter(Ze.wrap());const Ge=ne+s.ak(Ae);r.setZoom(ve===1?L:Ge+sn(0,Ze.lat))},scaleOfZoom:pe,targetCenter:W,scaleOfMinZoom:me,pixelPathLength:X}}static solveVectorScale(r,c,m,v,b){const T=v==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],O=[m[3],m[7],m[11],m[15]],R=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],L=r[0]*O[0]+r[1]*O[1]+r[2]*O[2],U=c[0]*T[0]+c[1]*T[1]+c[2]*T[2],H=c[0]*O[0]+c[1]*O[1]+c[2]*O[2];return U+b*L===R+b*H||O[3]*(R-U)+T[3]*(H-L)+R*H==U*L?null:(U+T[3]-b*H-b*O[3])/(U-R-b*H+b*L)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class af{constructor(r){this._globe=r,this._mercatorCameraHelper=new hi,this._verticalPerspectiveCameraHelper=new ai}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,m){this.currentHelper.handleMapControlsPan(r,c,m)}cameraForBoxAndBearing(r,c,m,v,b){return this.currentHelper.cameraForBoxAndBearing(r,c,m,v,b)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const Wu=(_,r)=>s.y(_,r&&r.filter((c=>c.identifier!=="source.canvas"))),Qp=s.bE();class Uh extends s.E{constructor(r,c={}){var m,v;super(),this._rtlPluginLoaded=()=>{for(const T in this.sourceCaches){const O=this.sourceCaches[T].getSource().type;O!=="vector"&&O!=="geojson"||this.sourceCaches[T].reload()}},this.map=r,this.dispatcher=new Wt($t(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",((T,O)=>this.getGlyphs(T,O))),this.dispatcher.registerMessageHandler("GI",((T,O)=>this.getImages(T,O))),this.imageManager=new Oe,this.imageManager.setEventedParent(this);const b=((m=r._container)===null||m===void 0?void 0:m.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new Ye(r._requestManager,c.localIdeographFontFamily,b),this.lineAtlas=new tt(256,512),this.crossTileSymbolIndex=new os,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",s.bG()),oo().on(Fa,this._rtlPluginLoaded),this.on("data",(T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const O=this.sourceCaches[T.sourceId];if(!O)return;const R=O.getSource();if(R&&R.vectorLayerIds)for(const L in this._layers){const U=this._layers[L];U.source===R.id&&this._validateLayer(U)}}))}setGlobalStateProperty(r,c){var m,v,b;this._checkLoaded();const T=c===null?(b=(v=(m=this.stylesheet.state)===null||m===void 0?void 0:m[r])===null||v===void 0?void 0:v.default)!==null&&b!==void 0?b:null:c;if(s.bH(T,this._globalState[r]))return this;this._globalState[r]=T,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const c=[];for(const m in r)!s.bH(this._globalState[m],r[m].default)&&(c.push(m),this._globalState[m]=r[m].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(r){if(r.length===0)return;const c=new Set,m={};for(const v of r){m[v]=this._globalState[v];for(const b in this._layers){const T=this._layers[b],O=T.getLayoutAffectingGlobalStateRefs(),R=T.getPaintAffectingGlobalStateRefs();if(O.has(v)&&c.add(T.source),R.has(v))for(const{name:L,value:U}of R.get(v))this._updatePaintProperty(T,L,U)}}this.dispatcher.broadcast("UGS",m);for(const v in this.sourceCaches)c.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(r,c={},m){this.fire(new s.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const v=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;s.j(v,this._loadStyleRequest).then((T=>{this._loadStyleRequest=null,this._load(T.data,c,m)})).catch((T=>{this._loadStyleRequest=null,T&&!b.signal.aborted&&this.fire(new s.k(T))}))}loadJSON(r,c={},m){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,m)})).catch((()=>{}))}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(Qp,{validate:!1})}_load(r,c,m){var v,b;let T=c.transformStyle?c.transformStyle(m,r):r;if(!c.validate||!Wu(this,s.z(T))){T=Object.assign({},T),this._loaded=!0,this.stylesheet=T;for(const O in T.sources)this.addSource(O,T.sources[O],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new st(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new Ne(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var r;const c=s.bI(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",c),this._order=c.map((m=>m.id)),this._layers={},this._serializedLayers=null;for(const m of c){const v=s.bJ(m,this._globalState);v.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=v}}_loadSprite(r,c=!1,m=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(b,T,O,R){return s._(this,void 0,void 0,(function*(){const L=re(b),U=O>1?"@2x":"",H={},W={};for(const{id:X,url:ne}of L){const he=T.transformRequest(ue(ne,U,".json"),"SpriteJSON");H[X]=s.j(he,R);const pe=T.transformRequest(ue(ne,U,".png"),"SpriteImage");W[X]=oe.getImage(pe,R)}return yield Promise.all([...Object.values(H),...Object.values(W)]),(function(X,ne){return s._(this,void 0,void 0,(function*(){const he={};for(const pe in X){he[pe]={};const me=D.getImageCanvasContext((yield ne[pe]).data),ye=(yield X[pe]).data;for(const we in ye){const{width:ve,height:Ae,x:Ie,y:xe,sdf:De,pixelRatio:Ze,stretchX:Ge,stretchY:He,content:et,textFitWidth:Pt,textFitHeight:wt}=ye[we];he[pe][we]={data:null,pixelRatio:Ze,sdf:De,stretchX:Ge,stretchY:He,content:et,textFitWidth:Pt,textFitHeight:wt,spriteData:{width:ve,height:Ae,x:Ie,y:xe,context:me}}}}return he}))})(H,W)}))})(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((b=>{if(this._spriteRequest=null,b)for(const T in b){this._spritesImagesIds[T]=[];const O=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter((R=>!(R in b))):[];for(const R of O)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in b[T]){const L=T==="default"?R:`${T}:${R}`;this._spritesImagesIds[T].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,b[T][R],!1):this.imageManager.addImage(L,b[T][R]),c&&(this._changedImages[L]=!0)}}})).catch((b=>{this._spriteRequest=null,v=b,this.fire(new s.k(v))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),m&&m(v)}))}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const m=r.sourceLayer;if(!m)return;const v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new s.k(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const m=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?s.bK(m):m);const v=[];for(const b of r)if(m[b]){const T=c?s.bK(m[b]):m[b];v.push(T)}return v}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const m of c){const v=this._layers[m];v.type!=="custom"&&(r[m]=v.serialize())}return r}hasTransitions(){var r,c,m;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const v in this.sourceCaches)if(this.sourceCaches[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const v=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(v.length||b.length)&&this._updateWorkerLayers(v,b);for(const T in this._updatedSources){const O=this._updatedSources[T];if(O==="reload")this._reloadSource(T);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const b=this.sourceCaches[v];m[v]=b.used,b.used=!1}for(const v of this._order){const b=this._layers[v];b.recalculate(r,this._availableImages),!b.isHidden(r.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const v in m){const b=this.sourceCaches[v];!!m[v]!=!!b.used&&b.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var m;this._checkLoaded();const v=this.serialize();if(r=c.transformStyle?c.transformStyle(v,r):r,((m=c.validate)===null||m===void 0||m)&&Wu(this,s.z(r)))return!1;(r=s.bK(r)).layers=s.bI(r.layers);const b=s.bL(v,r),T=this._getOperationsToPerform(b);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const O of T.operations)O();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],m=[];for(const v of r)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,v.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,v.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,v.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,v.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,v.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,v.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,v.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,v.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,v.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,v.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,v.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,v.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,v.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,v.args)));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,v.args)));break;case"setTransition":c.push((()=>{}));break;default:m.push(v.command)}return{operations:c,unimplemented:m}}addImage(r,c){if(this.getImage(r))return this.fire(new s.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new s.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,m={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.z.source,`sources.${r}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.sourceCaches[r]=new Cr(r,c,this.dispatcher);v.style=this,v.setEventedParent(this,(()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:r}))),v.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===r)return this.fire(new s.k(new Error(`Source "${r}" cannot be removed while layer "${m}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const m=this.sourceCaches[r].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,m={}){this._checkLoaded();const v=r.id;if(this.getLayer(v))return void this.fire(new s.k(new Error(`Layer "${v}" already exists on this map.`)));let b;if(r.type==="custom"){if(Wu(this,s.bM(r)))return;b=s.bJ(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(v,r.source),r=s.bK(r),r=s.e(r,{source:v})),this._validate(s.z.layer,`layers.${v}`,r,{arrayIndex:-1},m))return;b=s.bJ(r,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new s.k(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,v),this._layerOrderChanged=!0,this._layers[v]=b,this._removedLayers[v]&&b.source&&b.type!=="custom"){const O=this._removedLayers[v];delete this._removedLayers[v],O.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new s.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const m=this._order.indexOf(r);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new s.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(v,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const m=this._order.indexOf(r);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,m){this._checkLoaded();const v=this.getLayer(r);v?v.minzoom===c&&v.maxzoom===m||(c!=null&&(v.minzoom=c),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,m={}){this._checkLoaded();const v=this.getLayer(r);if(v){if(!s.bH(v.filter,c))return c==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(s.z.filter,`layers.${v.id}.filter`,c,null,m)||(v.setFilter(s.bK(c)),this._updateLayer(v)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return s.bK(this.getLayer(r).filter)}setLayoutProperty(r,c,m,v={}){this._checkLoaded();const b=this.getLayer(r);b?s.bH(b.getLayoutProperty(c),m)||(b.setLayoutProperty(c,m,v),this._updateLayer(b)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const m=this.getLayer(r);if(m)return m.getLayoutProperty(c);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,m,v={}){this._checkLoaded();const b=this.getLayer(r);b?s.bH(b.getPaintProperty(c),m)||this._updatePaintProperty(b,c,m,v):this.fire(new s.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,c,m,v={}){r.setPaintProperty(c,m,v)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const m=r.source,v=r.sourceLayer,b=this.sourceCaches[m];if(b===void 0)return void this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)));const T=b.getSource().type;T==="geojson"&&v?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||v?(r.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(v,r.id,c)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const m=r.source,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)));const b=v.getSource().type,T=b==="vector"?r.sourceLayer:void 0;b!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(T,r.id,c):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,m=r.sourceLayer,v=this.sourceCaches[c];if(v!==void 0)return v.getSource().type!=="vector"||m?(r.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,r.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=s.bN(this.sourceCaches,(b=>b.serialize())),c=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,v=this.stylesheet;return s.bO({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:r,layers:c,terrain:m},(b=>b!==void 0))}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",m={},v=[];for(let T=this._order.length-1;T>=0;T--){const O=this._order[T];if(c(O)){m[O]=T;for(const R of r){const L=R[O];if(L)for(const U of L)v.push(U)}}}v.sort(((T,O)=>O.intersectionZ-T.intersectionZ));const b=[];for(let T=this._order.length-1;T>=0;T--){const O=this._order[T];if(c(O))for(let R=v.length-1;R>=0;R--){const L=v[R].feature;if(m[L.layer.id]<T)break;b.push(L),v.pop()}else for(const R of r){const L=R[O];if(L)for(const U of L)b.push(U.feature)}}return b}queryRenderedFeatures(r,c,m){c&&c.filter&&this._validate(s.z.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const L of c.layers){const U=this._layers[L];if(!U)return this.fire(new s.k(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];v[U.source]=!0}}const b=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers(),O=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,R=Object.assign(Object.assign({},c),{layers:O,globalState:this._globalState});for(const L in this.sourceCaches)c.layers&&!v[L]||b.push(vt(this.sourceCaches[L],this._layers,T,r,R,m,this.map.terrain?(U,H,W)=>this.map.terrain.getElevation(U,H,W):void 0));return this.placement&&b.push((function(L,U,H,W,X,ne,he){const pe={},me=ne.queryRenderedSymbols(W),ye=[];for(const we of Object.keys(me).map(Number))ye.push(he[we]);ye.sort(Ft);for(const we of ye){const ve=we.featureIndex.lookupSymbolFeatures(me[we.bucketInstanceId],U,we.bucketIndex,we.sourceLayerIndex,{filterSpec:X.filter,globalState:X.globalState},X.layers,X.availableImages,L);for(const Ae in ve){const Ie=pe[Ae]=pe[Ae]||[],xe=ve[Ae];xe.sort(((De,Ze)=>{const Ge=we.featureSortOrder;if(Ge){const He=Ge.indexOf(De.featureIndex);return Ge.indexOf(Ze.featureIndex)-He}return Ze.featureIndex-De.featureIndex}));for(const De of xe)Ie.push(De)}}return(function(we,ve,Ae){for(const Ie in we)for(const xe of we[Ie])ir(xe,Ae[ve[Ie].source]);return we})(pe,L,H)})(this._layers,T,this.sourceCaches,r,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(r,c){c?.filter&&this._validate(s.z.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.sourceCaches[r];return m?(function(v,b){const T=v.getRenderableIds().map((L=>v.getTileByID(L))),O=[],R={};for(let L=0;L<T.length;L++){const U=T[L],H=U.tileID.canonical.key;R[H]||(R[H]=!0,U.querySourceFeatures(O,b))}return O})(m,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const T in r)if(!s.bH(r[T],m[T])){v=!0;break}if(!v)return;const b={now:D.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(b)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const m=this.getSky();let v=!1;if(!r&&!m)return;if(r&&!m)v=!0;else if(!r&&m)v=!0;else for(const T in r)if(!s.bH(r[T],m[T])){v=!0;break}if(!v)return;const b={now:D.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(b)}_setProjectionInternal(r){const c=(function(m){if(Array.isArray(m)){const v=new Ul({type:m});return{projection:v,transform:new Uc,cameraHelper:new af(v)}}switch(m){case"mercator":return{projection:new _r,transform:new tn,cameraHelper:new hi};case"globe":{const v=new Ul({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:v,transform:new Uc,cameraHelper:new af(v)}}case"vertical-perspective":return{projection:new $l,transform:new $c,cameraHelper:new ai};default:return s.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new _r,transform:new tn,cameraHelper:new hi}}})(r);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const m in this.sourceCaches)this.sourceCaches[m].reload()}_validate(r,c,m,v,b={}){return(!b||b.validate!==!1)&&Wu(this,r.call(s.z,s.e({key:c,style:this.serialize(),value:m,styleSpec:s.v},v)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),oo().off(Fa,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const m=this.sourceCaches[c];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,m,v,b=!1){let T=!1,O=!1;const R={};for(const L of this._order){const U=this._layers[L];if(U.type!=="symbol")continue;if(!R[U.source]){const W=this.sourceCaches[U.source];R[U.source]=W.getRenderableIds(!0).map((X=>W.getTileByID(X))).sort(((X,ne)=>ne.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(ne.tileID)?-1:1)))}const H=this.crossTileSymbolIndex.addLayer(U,R[U.source],r.center.lng);T=T||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),r.zoom))&&(this.pauseablePlacement=new Nc(r,this.map.terrain,this._order,b,c,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),O=!0),T&&this.pauseablePlacement.placement.setStale()),O||T)for(const L of this._order){const U=this._layers[L];U.type==="symbol"&&this.placement.updateLayerOpacities(U,R[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return s._(this,void 0,void 0,(function*(){const m=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,c.icons),m}))}getGlyphs(r,c){return s._(this,void 0,void 0,(function*(){const m=yield this.glyphManager.getGlyphs(c.stacks),v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,[""]),m}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(s.z.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,m={},v){this._checkLoaded();const b=[{id:r,url:c}],T=[...re(this.stylesheet.sprite),...b];this._validate(s.z.sprite,"sprite",T,null,m)||(this.stylesheet.sprite=T,this._loadSprite(b,!0,v))}removeSprite(r){this._checkLoaded();const c=re(this.stylesheet.sprite);if(c.find((m=>m.id===r))){if(this._spritesImagesIds[r])for(const m of this._spritesImagesIds[r])this.imageManager.removeImage(m),this._changedImages[m]=!0;c.splice(c.findIndex((m=>m.id===r)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return re(this.stylesheet.sprite)}setSprite(r,c={},m){this._checkLoaded(),r&&this._validate(s.z.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,m):(this._unloadSprite(),m&&m(null)))}}var em=s.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class of{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,m,v,b,T,O,R,L){this.context=r;let U=this.boundPaintVertexBuffers.length!==v.length;for(let H=0;!U&&H<v.length;H++)this.boundPaintVertexBuffers[H]!==v[H]&&(U=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||U||this.boundIndexBuffer!==b||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==L?this.freshBind(c,m,v,b,T,O,R,L):(r.bindVertexArray.set(this.vao),O&&O.bind(),b&&b.dynamicDraw&&b.bind(),R&&R.bind(),L&&L.bind())}freshBind(r,c,m,v,b,T,O,R){const L=r.numAttributes,U=this.context,H=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=R,c.enableAttributes(H,r);for(const W of m)W.enableAttributes(H,r);T&&T.enableAttributes(H,r),O&&O.enableAttributes(H,r),R&&R.enableAttributes(H,r),c.bind(),c.setVertexAttribPointers(H,r,b);for(const W of m)W.bind(),W.setVertexAttribPointers(H,r,b);T&&(T.bind(),T.setVertexAttribPointers(H,r,b)),v&&v.bind(),O&&(O.bind(),O.setVertexAttribPointers(H,r,b)),R&&(R.bind(),R.setVertexAttribPointers(H,r,b)),U.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Hu=(_,r,c,m,v)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):s.bf.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:c?c.calculateFogBlendOpacity(m):0,u_horizon_color:c?c.properties.get("horizon-color"):s.bf.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),Vh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ws(_){const r=[];for(let c=0;c<_.length;c++){if(_[c]===null)continue;const m=_[c].split(" ");r.push(m.pop())}return r}class qh{constructor(r,c,m,v,b,T,O,R,L=[]){const U=r.gl;this.program=U.createProgram();const H=Ws(c.staticAttributes),W=m?m.getBinderAttributes():[],X=H.concat(W),ne=Aa.prelude.staticUniforms?Ws(Aa.prelude.staticUniforms):[],he=O.staticUniforms?Ws(O.staticUniforms):[],pe=c.staticUniforms?Ws(c.staticUniforms):[],me=m?m.getBinderUniforms():[],ye=ne.concat(he).concat(pe).concat(me),we=[];for(const Ge of ye)we.indexOf(Ge)<0&&we.push(Ge);const ve=m?m.defines():[];ho(U)&&ve.unshift("#version 300 es"),b&&ve.push("#define OVERDRAW_INSPECTOR;"),T&&ve.push("#define TERRAIN3D;"),R&&ve.push(R),L&&ve.push(...L);let Ae=ve.concat(Aa.prelude.fragmentSource,O.fragmentSource,c.fragmentSource).join(`
`),Ie=ve.concat(Aa.prelude.vertexSource,O.vertexSource,c.vertexSource).join(`
`);ho(U)||(Ae=(function(Ge){return Ge.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Ae),Ie=(function(Ge){return Ge.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ie));const xe=U.createShader(U.FRAGMENT_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(xe,Ae),U.compileShader(xe),!U.getShaderParameter(xe,U.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${U.getShaderInfoLog(xe)}`);U.attachShader(this.program,xe);const De=U.createShader(U.VERTEX_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(De,Ie),U.compileShader(De),!U.getShaderParameter(De,U.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${U.getShaderInfoLog(De)}`);U.attachShader(this.program,De),this.attributes={};const Ze={};this.numAttributes=X.length;for(let Ge=0;Ge<this.numAttributes;Ge++)X[Ge]&&(U.bindAttribLocation(this.program,Ge,X[Ge]),this.attributes[X[Ge]]=Ge);if(U.linkProgram(this.program),!U.getProgramParameter(this.program,U.LINK_STATUS))throw new Error(`Program failed to link: ${U.getProgramInfoLog(this.program)}`);U.deleteShader(De),U.deleteShader(xe);for(let Ge=0;Ge<we.length;Ge++){const He=we[Ge];if(He&&!Ze[He]){const et=U.getUniformLocation(this.program,He);et&&(Ze[He]=et)}}this.fixedUniforms=v(r,Ze),this.terrainUniforms=((Ge,He)=>({u_depth:new s.bP(Ge,He.u_depth),u_terrain:new s.bP(Ge,He.u_terrain),u_terrain_dim:new s.bg(Ge,He.u_terrain_dim),u_terrain_matrix:new s.bR(Ge,He.u_terrain_matrix),u_terrain_unpack:new s.bS(Ge,He.u_terrain_unpack),u_terrain_exaggeration:new s.bg(Ge,He.u_terrain_exaggeration)}))(r,Ze),this.projectionUniforms=((Ge,He)=>({u_projection_matrix:new s.bR(Ge,He.u_projection_matrix),u_projection_tile_mercator_coords:new s.bS(Ge,He.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bS(Ge,He.u_projection_clipping_plane),u_projection_transition:new s.bg(Ge,He.u_projection_transition),u_projection_fallback_matrix:new s.bR(Ge,He.u_projection_fallback_matrix)}))(r,Ze),this.binderUniforms=m?m.getUniforms(r,Ze):[]}draw(r,c,m,v,b,T,O,R,L,U,H,W,X,ne,he,pe,me,ye,we){const ve=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(m),r.setStencilMode(v),r.setColorMode(b),r.setCullFace(T),R){r.activeTexture.set(ve.TEXTURE2),ve.bindTexture(ve.TEXTURE_2D,R.depthTexture),r.activeTexture.set(ve.TEXTURE3),ve.bindTexture(ve.TEXTURE_2D,R.texture);for(const Ie in this.terrainUniforms)this.terrainUniforms[Ie].set(R[Ie])}if(L)for(const Ie in L)this.projectionUniforms[Vh[Ie]].set(L[Ie]);if(O)for(const Ie in this.fixedUniforms)this.fixedUniforms[Ie].set(O[Ie]);pe&&pe.setUniforms(r,this.binderUniforms,ne,{zoom:he});let Ae=0;switch(c){case ve.LINES:Ae=2;break;case ve.TRIANGLES:Ae=3;break;case ve.LINE_STRIP:Ae=1}for(const Ie of X.get()){const xe=Ie.vaos||(Ie.vaos={});(xe[U]||(xe[U]=new of)).bind(r,this,H,pe?pe.getPaintVertexBuffers():[],W,Ie.vertexOffset,me,ye,we),ve.drawElements(c,Ie.primitiveLength*Ae,ve.UNSIGNED_SHORT,Ie.primitiveOffset*Ae*2)}}}function ql(_,r,c){const m=1/s.aC(c,1,r.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,r.transform.tileZoom)/v,T=b*(c.tileID.canonical.x+c.tileID.wrap*v),O=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[T>>16,O>>16],u_pixel_coord_lower:[65535&T,65535&O]}}const Wa=(_,r,c,m)=>{const v=_.style.light,b=v.properties.get("position"),T=[b.x,b.y,b.z],O=s.bV();v.properties.get("anchor")==="viewport"&&s.bW(O,_.transform.bearingInRadians),s.bX(T,T,O);const R=_.transform.transformLightDirection(T),L=v.properties.get("color");return{u_lightpos:T,u_lightpos_globe:R,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:m}},tm=(_,r,c,m,v,b,T)=>s.e(Wa(_,r,c,m),ql(b,_,T),{u_height_factor:-Math.pow(2,v.overscaledZ)/T.tileSize/8}),Zu=(_,r,c,m)=>s.e(ql(r,_,c),{u_fill_translate:m}),Gl=(_,r)=>({u_world:_,u_fill_translate:r}),Vc=(_,r,c,m,v)=>s.e(Zu(_,r,c,v),{u_world:m}),rm=(_,r,c,m,v)=>{const b=_.transform;let T,O,R=0;if(c.paint.get("circle-pitch-alignment")==="map"){const L=s.aC(r,1,b.zoom);T=!0,O=[L,L],R=L/(s.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*v}else T=!1,O=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:R,u_translate:m}},Xu=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),nm=_=>({u_viewport_size:[_.width,_.height]}),Hs=(_,r=1)=>({u_color:_,u_overlay:0,u_overlay_scale:r}),sf=(_,r,c,m)=>{const v=s.aC(_,1,r)/(s.$*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:s.aC(_,1,r),u_intensity:c,u_globe_extrude_scale:v}},Gh=(_,r,c,m)=>{const v=s.L();s.bY(v,0,_.width,_.height,0,0,1);const b=_.context.gl;return{u_matrix:v,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:c,u_color_ramp:m,u_opacity:r.paint.get("heatmap-opacity")}},Wh=(_,r,c)=>{const m=c.paint.get("hillshade-accent-color");let v;switch(c.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const b=c.getIlluminationProperties();for(let T=0;T<b.directionRadians.length;T++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[T]+=_.transform.bearingInRadians);return{u_image:0,u_latrange:Hh(0,r.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:m,u_method:v,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},Wl=(_,r)=>{const c=r.stride,m=s.L();return s.bY(m,0,s.$,-s.$,0,0,1),s.M(m,m,[0,-s.$,0]),{u_matrix:m,u_image:1,u_dimension:[c,c],u_zoom:_.overscaledZ,u_unpack:r.getUnpackVector()}};function Hh(_,r){const c=Math.pow(2,r.canonical.z),m=r.canonical.y;return[new s.a1(0,m/c).toLngLat().lat,new s.a1(0,(m+1)/c).toLngLat().lat]}const Zh=(_,r,c=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:_.paint.get("color-relief-opacity")}),qc=(_,r,c,m)=>{const v=_.transform;return{u_translation:Yh(_,r,c),u_ratio:m/s.aC(r,1,v.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Xh=(_,r,c,m,v)=>s.e(qc(_,r,c,m),{u_image:0,u_image_height:v}),Kh=(_,r,c,m,v)=>{const b=_.transform,T=fs(r,b);return{u_translation:Yh(_,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:m/s.aC(r,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[T,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},ds=(_,r,c,m,v,b)=>{const T=_.lineAtlas,O=fs(r,_.transform),R=c.layout.get("line-cap")==="round",L=T.getDash(v.from,R),U=T.getDash(v.to,R),H=L.width*b.fromScale,W=U.width*b.toScale;return s.e(qc(_,r,c,m),{u_patternscale_a:[O/H,-L.height/2],u_patternscale_b:[O/W,-U.height/2],u_sdfgamma:T.width/(256*Math.min(H,W)*_.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:U.y,u_mix:b.t})};function fs(_,r){return 1/s.aC(_,1,r.tileZoom)}function Yh(_,r,c){return s.aD(_.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Gc=(_,r,c,m,v)=>{return{u_tl_parent:_,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(b=m.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:im(m.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var b,T};function im(_){_*=Math.PI/180;const r=Math.sin(_),c=Math.cos(_);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Hl=(_,r,c,m,v,b,T,O,R,L,U,H,W)=>{const X=T.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:X.width/X.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:R,u_is_text:+U,u_pitch_with_map:+m,u_is_along_line:v,u_is_variable_anchor:b,u_texsize:H,u_texture:0,u_translation:L,u_pitched_scale:W}},Jh=(_,r,c,m,v,b,T,O,R,L,U,H,W,X)=>{const ne=T.transform;return s.e(Hl(_,r,c,m,v,b,T,O,R,L,U,H,X),{u_gamma_scale:m?Math.cos(ne.pitch*Math.PI/180)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},Wc=(_,r,c,m,v,b,T,O,R,L,U,H,W)=>s.e(Jh(_,r,c,m,v,b,T,O,R,L,!0,U,0,W),{u_texsize_icon:H,u_texture_icon:1}),Zl=(_,r)=>({u_opacity:_,u_color:r}),lf=(_,r,c,m,v)=>s.e((function(b,T,O,R){const L=O.imageManager.getPattern(b.from.toString()),U=O.imageManager.getPattern(b.to.toString()),{width:H,height:W}=O.imageManager.getPixelSize(),X=Math.pow(2,R.tileID.overscaledZ),ne=R.tileSize*Math.pow(2,O.transform.tileZoom)/X,he=ne*(R.tileID.canonical.x+R.tileID.wrap*X),pe=ne*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[H,W],u_mix:T.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/s.aC(R,1,O.transform.tileZoom),u_pixel_coord_upper:[he>>16,pe>>16],u_pixel_coord_lower:[65535&he,65535&pe]}})(c,v,r,m),{u_opacity:_}),Xl=(_,r)=>{},Qh={fillExtrusion:(_,r)=>({u_lightpos:new s.bT(_,r.u_lightpos),u_lightpos_globe:new s.bT(_,r.u_lightpos_globe),u_lightintensity:new s.bg(_,r.u_lightintensity),u_lightcolor:new s.bT(_,r.u_lightcolor),u_vertical_gradient:new s.bg(_,r.u_vertical_gradient),u_opacity:new s.bg(_,r.u_opacity),u_fill_translate:new s.bU(_,r.u_fill_translate)}),fillExtrusionPattern:(_,r)=>({u_lightpos:new s.bT(_,r.u_lightpos),u_lightpos_globe:new s.bT(_,r.u_lightpos_globe),u_lightintensity:new s.bg(_,r.u_lightintensity),u_lightcolor:new s.bT(_,r.u_lightcolor),u_vertical_gradient:new s.bg(_,r.u_vertical_gradient),u_height_factor:new s.bg(_,r.u_height_factor),u_opacity:new s.bg(_,r.u_opacity),u_fill_translate:new s.bU(_,r.u_fill_translate),u_image:new s.bP(_,r.u_image),u_texsize:new s.bU(_,r.u_texsize),u_pixel_coord_upper:new s.bU(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(_,r.u_pixel_coord_lower),u_scale:new s.bT(_,r.u_scale),u_fade:new s.bg(_,r.u_fade)}),fill:(_,r)=>({u_fill_translate:new s.bU(_,r.u_fill_translate)}),fillPattern:(_,r)=>({u_image:new s.bP(_,r.u_image),u_texsize:new s.bU(_,r.u_texsize),u_pixel_coord_upper:new s.bU(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(_,r.u_pixel_coord_lower),u_scale:new s.bT(_,r.u_scale),u_fade:new s.bg(_,r.u_fade),u_fill_translate:new s.bU(_,r.u_fill_translate)}),fillOutline:(_,r)=>({u_world:new s.bU(_,r.u_world),u_fill_translate:new s.bU(_,r.u_fill_translate)}),fillOutlinePattern:(_,r)=>({u_world:new s.bU(_,r.u_world),u_image:new s.bP(_,r.u_image),u_texsize:new s.bU(_,r.u_texsize),u_pixel_coord_upper:new s.bU(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(_,r.u_pixel_coord_lower),u_scale:new s.bT(_,r.u_scale),u_fade:new s.bg(_,r.u_fade),u_fill_translate:new s.bU(_,r.u_fill_translate)}),circle:(_,r)=>({u_camera_to_center_distance:new s.bg(_,r.u_camera_to_center_distance),u_scale_with_map:new s.bP(_,r.u_scale_with_map),u_pitch_with_map:new s.bP(_,r.u_pitch_with_map),u_extrude_scale:new s.bU(_,r.u_extrude_scale),u_device_pixel_ratio:new s.bg(_,r.u_device_pixel_ratio),u_globe_extrude_scale:new s.bg(_,r.u_globe_extrude_scale),u_translate:new s.bU(_,r.u_translate)}),collisionBox:(_,r)=>({u_pixel_extrude_scale:new s.bU(_,r.u_pixel_extrude_scale)}),collisionCircle:(_,r)=>({u_viewport_size:new s.bU(_,r.u_viewport_size)}),debug:(_,r)=>({u_color:new s.bQ(_,r.u_color),u_overlay:new s.bP(_,r.u_overlay),u_overlay_scale:new s.bg(_,r.u_overlay_scale)}),depth:Xl,clippingMask:Xl,heatmap:(_,r)=>({u_extrude_scale:new s.bg(_,r.u_extrude_scale),u_intensity:new s.bg(_,r.u_intensity),u_globe_extrude_scale:new s.bg(_,r.u_globe_extrude_scale)}),heatmapTexture:(_,r)=>({u_matrix:new s.bR(_,r.u_matrix),u_world:new s.bU(_,r.u_world),u_image:new s.bP(_,r.u_image),u_color_ramp:new s.bP(_,r.u_color_ramp),u_opacity:new s.bg(_,r.u_opacity)}),hillshade:(_,r)=>({u_image:new s.bP(_,r.u_image),u_latrange:new s.bU(_,r.u_latrange),u_exaggeration:new s.bg(_,r.u_exaggeration),u_altitudes:new s.b_(_,r.u_altitudes),u_azimuths:new s.b_(_,r.u_azimuths),u_accent:new s.bQ(_,r.u_accent),u_method:new s.bP(_,r.u_method),u_shadows:new s.bZ(_,r.u_shadows),u_highlights:new s.bZ(_,r.u_highlights)}),hillshadePrepare:(_,r)=>({u_matrix:new s.bR(_,r.u_matrix),u_image:new s.bP(_,r.u_image),u_dimension:new s.bU(_,r.u_dimension),u_zoom:new s.bg(_,r.u_zoom),u_unpack:new s.bS(_,r.u_unpack)}),colorRelief:(_,r)=>({u_image:new s.bP(_,r.u_image),u_unpack:new s.bS(_,r.u_unpack),u_dimension:new s.bU(_,r.u_dimension),u_elevation_stops:new s.bP(_,r.u_elevation_stops),u_color_stops:new s.bP(_,r.u_color_stops),u_color_ramp_size:new s.bP(_,r.u_color_ramp_size),u_opacity:new s.bg(_,r.u_opacity)}),line:(_,r)=>({u_translation:new s.bU(_,r.u_translation),u_ratio:new s.bg(_,r.u_ratio),u_device_pixel_ratio:new s.bg(_,r.u_device_pixel_ratio),u_units_to_pixels:new s.bU(_,r.u_units_to_pixels)}),lineGradient:(_,r)=>({u_translation:new s.bU(_,r.u_translation),u_ratio:new s.bg(_,r.u_ratio),u_device_pixel_ratio:new s.bg(_,r.u_device_pixel_ratio),u_units_to_pixels:new s.bU(_,r.u_units_to_pixels),u_image:new s.bP(_,r.u_image),u_image_height:new s.bg(_,r.u_image_height)}),linePattern:(_,r)=>({u_translation:new s.bU(_,r.u_translation),u_texsize:new s.bU(_,r.u_texsize),u_ratio:new s.bg(_,r.u_ratio),u_device_pixel_ratio:new s.bg(_,r.u_device_pixel_ratio),u_image:new s.bP(_,r.u_image),u_units_to_pixels:new s.bU(_,r.u_units_to_pixels),u_scale:new s.bT(_,r.u_scale),u_fade:new s.bg(_,r.u_fade)}),lineSDF:(_,r)=>({u_translation:new s.bU(_,r.u_translation),u_ratio:new s.bg(_,r.u_ratio),u_device_pixel_ratio:new s.bg(_,r.u_device_pixel_ratio),u_units_to_pixels:new s.bU(_,r.u_units_to_pixels),u_patternscale_a:new s.bU(_,r.u_patternscale_a),u_patternscale_b:new s.bU(_,r.u_patternscale_b),u_sdfgamma:new s.bg(_,r.u_sdfgamma),u_image:new s.bP(_,r.u_image),u_tex_y_a:new s.bg(_,r.u_tex_y_a),u_tex_y_b:new s.bg(_,r.u_tex_y_b),u_mix:new s.bg(_,r.u_mix)}),raster:(_,r)=>({u_tl_parent:new s.bU(_,r.u_tl_parent),u_scale_parent:new s.bg(_,r.u_scale_parent),u_buffer_scale:new s.bg(_,r.u_buffer_scale),u_fade_t:new s.bg(_,r.u_fade_t),u_opacity:new s.bg(_,r.u_opacity),u_image0:new s.bP(_,r.u_image0),u_image1:new s.bP(_,r.u_image1),u_brightness_low:new s.bg(_,r.u_brightness_low),u_brightness_high:new s.bg(_,r.u_brightness_high),u_saturation_factor:new s.bg(_,r.u_saturation_factor),u_contrast_factor:new s.bg(_,r.u_contrast_factor),u_spin_weights:new s.bT(_,r.u_spin_weights),u_coords_top:new s.bS(_,r.u_coords_top),u_coords_bottom:new s.bS(_,r.u_coords_bottom)}),symbolIcon:(_,r)=>({u_is_size_zoom_constant:new s.bP(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(_,r.u_is_size_feature_constant),u_size_t:new s.bg(_,r.u_size_t),u_size:new s.bg(_,r.u_size),u_camera_to_center_distance:new s.bg(_,r.u_camera_to_center_distance),u_pitch:new s.bg(_,r.u_pitch),u_rotate_symbol:new s.bP(_,r.u_rotate_symbol),u_aspect_ratio:new s.bg(_,r.u_aspect_ratio),u_fade_change:new s.bg(_,r.u_fade_change),u_label_plane_matrix:new s.bR(_,r.u_label_plane_matrix),u_coord_matrix:new s.bR(_,r.u_coord_matrix),u_is_text:new s.bP(_,r.u_is_text),u_pitch_with_map:new s.bP(_,r.u_pitch_with_map),u_is_along_line:new s.bP(_,r.u_is_along_line),u_is_variable_anchor:new s.bP(_,r.u_is_variable_anchor),u_texsize:new s.bU(_,r.u_texsize),u_texture:new s.bP(_,r.u_texture),u_translation:new s.bU(_,r.u_translation),u_pitched_scale:new s.bg(_,r.u_pitched_scale)}),symbolSDF:(_,r)=>({u_is_size_zoom_constant:new s.bP(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(_,r.u_is_size_feature_constant),u_size_t:new s.bg(_,r.u_size_t),u_size:new s.bg(_,r.u_size),u_camera_to_center_distance:new s.bg(_,r.u_camera_to_center_distance),u_pitch:new s.bg(_,r.u_pitch),u_rotate_symbol:new s.bP(_,r.u_rotate_symbol),u_aspect_ratio:new s.bg(_,r.u_aspect_ratio),u_fade_change:new s.bg(_,r.u_fade_change),u_label_plane_matrix:new s.bR(_,r.u_label_plane_matrix),u_coord_matrix:new s.bR(_,r.u_coord_matrix),u_is_text:new s.bP(_,r.u_is_text),u_pitch_with_map:new s.bP(_,r.u_pitch_with_map),u_is_along_line:new s.bP(_,r.u_is_along_line),u_is_variable_anchor:new s.bP(_,r.u_is_variable_anchor),u_texsize:new s.bU(_,r.u_texsize),u_texture:new s.bP(_,r.u_texture),u_gamma_scale:new s.bg(_,r.u_gamma_scale),u_device_pixel_ratio:new s.bg(_,r.u_device_pixel_ratio),u_is_halo:new s.bP(_,r.u_is_halo),u_translation:new s.bU(_,r.u_translation),u_pitched_scale:new s.bg(_,r.u_pitched_scale)}),symbolTextAndIcon:(_,r)=>({u_is_size_zoom_constant:new s.bP(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bP(_,r.u_is_size_feature_constant),u_size_t:new s.bg(_,r.u_size_t),u_size:new s.bg(_,r.u_size),u_camera_to_center_distance:new s.bg(_,r.u_camera_to_center_distance),u_pitch:new s.bg(_,r.u_pitch),u_rotate_symbol:new s.bP(_,r.u_rotate_symbol),u_aspect_ratio:new s.bg(_,r.u_aspect_ratio),u_fade_change:new s.bg(_,r.u_fade_change),u_label_plane_matrix:new s.bR(_,r.u_label_plane_matrix),u_coord_matrix:new s.bR(_,r.u_coord_matrix),u_is_text:new s.bP(_,r.u_is_text),u_pitch_with_map:new s.bP(_,r.u_pitch_with_map),u_is_along_line:new s.bP(_,r.u_is_along_line),u_is_variable_anchor:new s.bP(_,r.u_is_variable_anchor),u_texsize:new s.bU(_,r.u_texsize),u_texsize_icon:new s.bU(_,r.u_texsize_icon),u_texture:new s.bP(_,r.u_texture),u_texture_icon:new s.bP(_,r.u_texture_icon),u_gamma_scale:new s.bg(_,r.u_gamma_scale),u_device_pixel_ratio:new s.bg(_,r.u_device_pixel_ratio),u_is_halo:new s.bP(_,r.u_is_halo),u_translation:new s.bU(_,r.u_translation),u_pitched_scale:new s.bg(_,r.u_pitched_scale)}),background:(_,r)=>({u_opacity:new s.bg(_,r.u_opacity),u_color:new s.bQ(_,r.u_color)}),backgroundPattern:(_,r)=>({u_opacity:new s.bg(_,r.u_opacity),u_image:new s.bP(_,r.u_image),u_pattern_tl_a:new s.bU(_,r.u_pattern_tl_a),u_pattern_br_a:new s.bU(_,r.u_pattern_br_a),u_pattern_tl_b:new s.bU(_,r.u_pattern_tl_b),u_pattern_br_b:new s.bU(_,r.u_pattern_br_b),u_texsize:new s.bU(_,r.u_texsize),u_mix:new s.bg(_,r.u_mix),u_pattern_size_a:new s.bU(_,r.u_pattern_size_a),u_pattern_size_b:new s.bU(_,r.u_pattern_size_b),u_scale_a:new s.bg(_,r.u_scale_a),u_scale_b:new s.bg(_,r.u_scale_b),u_pixel_coord_upper:new s.bU(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bU(_,r.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bg(_,r.u_tile_units_to_pixels)}),terrain:(_,r)=>({u_texture:new s.bP(_,r.u_texture),u_ele_delta:new s.bg(_,r.u_ele_delta),u_fog_matrix:new s.bR(_,r.u_fog_matrix),u_fog_color:new s.bQ(_,r.u_fog_color),u_fog_ground_blend:new s.bg(_,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bg(_,r.u_fog_ground_blend_opacity),u_horizon_color:new s.bQ(_,r.u_horizon_color),u_horizon_fog_blend:new s.bg(_,r.u_horizon_fog_blend),u_is_globe_mode:new s.bg(_,r.u_is_globe_mode)}),terrainDepth:(_,r)=>({u_ele_delta:new s.bg(_,r.u_ele_delta)}),terrainCoords:(_,r)=>({u_texture:new s.bP(_,r.u_texture),u_terrain_coords_id:new s.bg(_,r.u_terrain_coords_id),u_ele_delta:new s.bg(_,r.u_ele_delta)}),projectionErrorMeasurement:(_,r)=>({u_input:new s.bg(_,r.u_input),u_output_expected:new s.bg(_,r.u_output_expected)}),atmosphere:(_,r)=>({u_sun_pos:new s.bT(_,r.u_sun_pos),u_atmosphere_blend:new s.bg(_,r.u_atmosphere_blend),u_globe_position:new s.bT(_,r.u_globe_position),u_globe_radius:new s.bg(_,r.u_globe_radius),u_inv_proj_matrix:new s.bR(_,r.u_inv_proj_matrix)}),sky:(_,r)=>({u_sky_color:new s.bQ(_,r.u_sky_color),u_horizon_color:new s.bQ(_,r.u_horizon_color),u_horizon:new s.bU(_,r.u_horizon),u_horizon_normal:new s.bU(_,r.u_horizon_normal),u_sky_horizon_blend:new s.bg(_,r.u_sky_horizon_blend),u_sky_blend:new s.bg(_,r.u_sky_blend)})};class ed{constructor(r,c,m){this.context=r;const v=r.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ha{constructor(r,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=r;const b=r.gl;this.buffer=b.createBuffer(),r.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];v!==void 0&&r.enableVertexAttribArray(v)}}setVertexAttribPointers(r,c,m){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],T=c.attributes[b.name];T!==void 0&&r.vertexAttribPointer(T,b.components,r[Kl[b.type]],!1,this.itemSize,b.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ku extends zr{getDefault(){return s.bf.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Yu extends zr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class cf extends zr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class td extends zr{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Zs extends zr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class rd extends zr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class am extends zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Za extends zr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Hc extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class uf extends zr{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class nd extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class hf extends zr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class id extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class Yl extends zr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ju extends zr{getDefault(){return s.bf.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Qu extends zr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ps extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Ro extends zr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Do extends zr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ms extends zr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class ca extends zr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Zc extends zr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Xs extends zr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Xc extends zr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class gs extends zr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ks extends zr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Kc extends zr{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Jl extends zr{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const m=this.gl;ho(m)?m.bindVertexArray(r):(c=m.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Yc extends zr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ad extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Ys extends zr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class zo extends zr{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class jo extends zo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Jc extends zo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Tr extends zo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Qc="Framebuffer is not complete";class om{constructor(r,c,m,v,b){this.context=r,this.width=c,this.height=m;const T=r.gl,O=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new jo(r,O),v)this.depthAttachment=b?new Tr(r,O):new Jc(r,O);else if(b)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(Qc)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&r.deleteRenderbuffer(m)}r.deleteFramebuffer(this.framebuffer)}}class Ql{constructor(r){var c,m;if(this.gl=r,this.clearColor=new Ku(this),this.clearDepth=new Yu(this),this.clearStencil=new cf(this),this.colorMask=new td(this),this.depthMask=new Zs(this),this.stencilMask=new rd(this),this.stencilFunc=new am(this),this.stencilOp=new Za(this),this.stencilTest=new Hc(this),this.depthRange=new uf(this),this.depthTest=new nd(this),this.depthFunc=new hf(this),this.blend=new id(this),this.blendFunc=new Yl(this),this.blendColor=new Ju(this),this.blendEquation=new Qu(this),this.cullFace=new ps(this),this.cullFaceSide=new Ro(this),this.frontFace=new Do(this),this.program=new ms(this),this.activeTexture=new ca(this),this.viewport=new Zc(this),this.bindFramebuffer=new Xs(this),this.bindRenderbuffer=new Xc(this),this.bindTexture=new gs(this),this.bindVertexBuffer=new Ks(this),this.bindElementBuffer=new Kc(this),this.bindVertexArray=new Jl(this),this.pixelStoreUnpack=new Yc(this),this.pixelStoreUnpackPremultiplyAlpha=new ad(this),this.pixelStoreUnpackFlipY=new Ys(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ho(r)){this.HALF_FLOAT=r.HALF_FLOAT;const v=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:v?.RGBA16F_EXT,this.RGB16F=(m=r.RGB16F)!==null&&m!==void 0?m:v?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const v=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=v?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new ed(this,r,c)}createVertexBuffer(r,c,m){return new Ha(this,r,c,m)}createRenderbuffer(r,c,m){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,r,c,m),this.bindRenderbuffer.set(null),b}createFramebuffer(r,c,m,v){return new om(this,r,c,m,v)}clear({color:r,depth:c,stencil:m}){const v=this.gl;let b=0;r&&(b|=v.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(b|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(b)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){s.bH(r.blendFunction,Yr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ho(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return ho(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let ys;function od(_,r,c,m,v){const b=_.context,T=_.transform,O=b.gl,R=_.useProgram("collisionBox"),L=[];let U=0,H=0;for(let me=0;me<m.length;me++){const ye=m[me],we=r.getTile(ye).getBucket(c);if(!we)continue;const ve=v?we.textCollisionBox:we.iconCollisionBox,Ae=we.collisionCircleArray;Ae.length>0&&(L.push({circleArray:Ae,circleOffset:H,coord:ye}),U+=Ae.length/4,H=U),ve&&R.draw(b,O.LINES,lr.disabled,Pr.disabled,_.colorModeForRenderPass(),nr.disabled,Xu(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(ye),T.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,null,_.transform.zoom,null,null,ve.collisionVertexBuffer)}if(!v||!L.length)return;const W=_.useProgram("collisionCircle"),X=new s.b$;X.resize(4*U),X._trim();let ne=0;for(const me of L)for(let ye=0;ye<me.circleArray.length/4;ye++){const we=4*ye,ve=me.circleArray[we+0],Ae=me.circleArray[we+1],Ie=me.circleArray[we+2],xe=me.circleArray[we+3];X.emplace(ne++,ve,Ae,Ie,xe,0),X.emplace(ne++,ve,Ae,Ie,xe,1),X.emplace(ne++,ve,Ae,Ie,xe,2),X.emplace(ne++,ve,Ae,Ie,xe,3)}(!ys||ys.length<2*U)&&(ys=(function(me){const ye=2*me,we=new s.c1;we.resize(ye),we._trim();for(let ve=0;ve<ye;ve++){const Ae=6*ve;we.uint16[Ae+0]=4*ve+0,we.uint16[Ae+1]=4*ve+1,we.uint16[Ae+2]=4*ve+2,we.uint16[Ae+3]=4*ve+2,we.uint16[Ae+4]=4*ve+3,we.uint16[Ae+5]=4*ve+0}return we})(U));const he=b.createIndexBuffer(ys,!0),pe=b.createVertexBuffer(X,s.c0.members,!0);for(const me of L){const ye=nm(_.transform);W.draw(b,O.TRIANGLES,lr.disabled,Pr.disabled,_.colorModeForRenderPass(),nr.disabled,ye,_.style.map.terrain&&_.style.map.terrain.getTerrainData(me.coord),null,c.id,pe,he,s.aM.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,_.transform.zoom,null,null,null)}pe.destroy(),he.destroy()}const df=s.ag(new Float32Array(16));function un(_,r,c,m,v,b){const{horizontalAlign:T,verticalAlign:O}=s.aH(_);return new s.P((-(T-.5)*r/v+m[0])*b,(-(O-.5)*c/v+m[1])*b)}function sd(_,r,c,m,v,b){const T=r.tileAnchorPoint.add(new s.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let O=m.mult(b);c||(O=O.rotate(-v));const R=T.add(O);return Wn(R.x,R.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const O=ii(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(_),R=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return _.add(m.rotate(R))}return _.add(m)}function ec(_,r,c,m,v,b,T,O,R,L,U,H){const W=_.text.placedSymbolArray,X=_.text.dynamicLayoutVertexArray,ne=_.icon.dynamicLayoutVertexArray,he={};X.clear();for(let pe=0;pe<W.length;pe++){const me=W.get(pe),ye=me.hidden||!me.crossTileID||_.allowVerticalPlacement&&!me.placedOrientation?null:m[me.crossTileID];if(ye){const we=new s.P(me.anchorX,me.anchorY),ve={getElevation:H,width:v.width,height:v.height,pitchedLabelPlaneMatrix:b,pitchWithMap:c,transform:v,tileAnchorPoint:we,translation:L,unwrappedTileID:U},Ae=c?as(we.x,we.y,ve):ii(we.x,we.y,ve),Ie=_t(v.cameraToCenterDistance,Ae.signedDistanceFromCamera);let xe=s.ap(_.textSizeData,O,me)*Ie/s.aB;c&&(xe*=_.tilePixelRatio/T);const{width:De,height:Ze,anchor:Ge,textOffset:He,textBoxScale:et}=ye,Pt=un(Ge,De,Ze,He,et,xe),wt=v.getPitchedTextCorrection(we.x+L[0],we.y+L[1],U),dt=sd(Ae.point,ve,r,Pt,-v.bearingInRadians,wt),Lt=_.allowVerticalPlacement&&me.placedOrientation===s.ao.vertical?Math.PI/2:0;for(let vr=0;vr<me.numGlyphs;vr++)s.av(X,dt,Lt);R&&me.associatedIconIndex>=0&&(he[me.associatedIconIndex]={shiftedAnchor:dt,angle:Lt})}else lo(me.numGlyphs,X)}if(R){ne.clear();const pe=_.icon.placedSymbolArray;for(let me=0;me<pe.length;me++){const ye=pe.get(me);if(ye.hidden)lo(ye.numGlyphs,ne);else{const we=he[me];if(we)for(let ve=0;ve<ye.numGlyphs;ve++)s.av(ne,we.shiftedAnchor,we.angle);else lo(ye.numGlyphs,ne)}}_.icon.dynamicLayoutVertexBuffer.updateData(ne)}_.text.dynamicLayoutVertexBuffer.updateData(X)}function vs(_,r,c){return c.iconsInText&&r?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function tc(_,r,c,m,v,b,T,O,R,L,U,H,W){const X=_.context,ne=X.gl,he=_.transform,pe=O==="map",me=R==="map",ye=O!=="viewport"&&c.layout.get("symbol-placement")!=="point",we=pe&&!me&&!ye,ve=!c.layout.get("symbol-sort-key").isConstant();let Ae=!1;const Ie=_.getDepthModeForSublayer(0,lr.ReadOnly),xe=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),De=[],Ze=he.getCircleRadiusCorrection();for(const Ge of m){const He=r.getTile(Ge),et=He.getBucket(c);if(!et)continue;const Pt=v?et.text:et.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;const wt=Pt.programConfigurations.get(c.id),dt=v||et.sdfIcons,Lt=v?et.textSizeData:et.iconSizeData,vr=me||he.pitch!==0,Nr=_.useProgram(vs(dt,v,et),wt),dn=s.an(Lt,he.zoom),Qr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ge);let Vr,fn,Xr,Zr,Rr=[0,0],Ln=null;if(v)fn=He.glyphAtlasTexture,Xr=ne.LINEAR,Vr=He.glyphAtlasTexture.size,et.iconsInText&&(Rr=He.imageAtlasTexture.size,Ln=He.imageAtlasTexture,Zr=vr||_.options.rotating||_.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?ne.LINEAR:ne.NEAREST);else{const rn=c.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;fn=He.imageAtlasTexture,Xr=dt||_.options.rotating||_.options.zooming||rn||vr?ne.LINEAR:ne.NEAREST,Vr=He.imageAtlasTexture.size}const Nn=s.aC(He,1,_.transform.zoom),_i=gn(pe,_.transform,Nn),Bo=s.L();s.aq(Bo,_i);const Fo=br(me,pe,_.transform,Nn),ga=s.aD(he,He,b,T),Ps=he.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),dc=xe&&et.hasTextData(),pu=c.layout.get("icon-text-fit")!=="none"&&dc&&et.hasIconData();if(ye){const rn=_.style.map.terrain?(bi,ei)=>_.style.map.terrain.getElevation(Ge,bi,ei):null,An=c.layout.get("text-rotation-alignment")==="map";cn(et,_,v,_i,Bo,me,L,An,Ge.toUnwrapped(),he.width,he.height,ga,rn)}const Ts=v&&xe||pu,xi=ye||Ts?df:me?_i:_.transform.clipSpaceToPixelsMatrix,$o=dt&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Uo;Uo=dt?et.iconsInText?Wc(Lt.kind,dn,we,me,ye,Ts,_,xi,Fo,ga,Vr,Rr,Ze):Jh(Lt.kind,dn,we,me,ye,Ts,_,xi,Fo,ga,v,Vr,0,Ze):Hl(Lt.kind,dn,we,me,ye,Ts,_,xi,Fo,ga,v,Vr,Ze);const Vo={program:Nr,buffers:Pt,uniformValues:Uo,projectionData:Ps,atlasTexture:fn,atlasTextureIcon:Ln,atlasInterpolation:Xr,atlasInterpolationIcon:Zr,isSDF:dt,hasHalo:$o};if(ve&&et.canOverlap){Ae=!0;const rn=Pt.segments.get();for(const An of rn)De.push({segments:new s.aM([An]),sortKey:An.sortKey,state:Vo,terrainData:Qr})}else De.push({segments:Pt.segments,sortKey:0,state:Vo,terrainData:Qr})}Ae&&De.sort(((Ge,He)=>Ge.sortKey-He.sortKey));for(const Ge of De){const He=Ge.state;if(X.activeTexture.set(ne.TEXTURE0),He.atlasTexture.bind(He.atlasInterpolation,ne.CLAMP_TO_EDGE),He.atlasTextureIcon&&(X.activeTexture.set(ne.TEXTURE1),He.atlasTextureIcon&&He.atlasTextureIcon.bind(He.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),He.isSDF){const et=He.uniformValues;He.hasHalo&&(et.u_is_halo=1,Js(He.buffers,Ge.segments,c,_,He.program,Ie,U,H,et,He.projectionData,Ge.terrainData)),et.u_is_halo=0}Js(He.buffers,Ge.segments,c,_,He.program,Ie,U,H,He.uniformValues,He.projectionData,Ge.terrainData)}}function Js(_,r,c,m,v,b,T,O,R,L,U){const H=m.context;v.draw(H,H.gl.TRIANGLES,b,T,O,nr.backCCW,R,U,L,c.id,_.layoutVertexBuffer,_.indexBuffer,r,c.paint,m.transform.zoom,_.programConfigurations.get(c.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Qs(_,r,c,m,v){const b=_.context,T=b.gl,O=Pr.disabled,R=new Yr([T.ONE,T.ONE],s.bf.transparent,[!0,!0,!0,!0]),L=r.getBucket(c);if(!L)return;const U=m.key;let H=c.heatmapFbos.get(U);H||(H=po(b,r.tileSize,r.tileSize),c.heatmapFbos.set(U,H)),b.bindFramebuffer.set(H.framebuffer),b.viewport.set([0,0,r.tileSize,r.tileSize]),b.clear({color:s.bf.transparent});const W=L.programConfigurations.get(c.id),X=_.useProgram("heatmap",W,!v),ne=_.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),he=_.style.map.terrain.getTerrainData(m);X.draw(b,T.TRIANGLES,lr.disabled,O,R,nr.disabled,sf(r,_.transform.zoom,c.paint.get("heatmap-intensity"),1),he,ne,c.id,L.layoutVertexBuffer,L.indexBuffer,L.segments,c.paint,_.transform.zoom,W)}function eu(_,r,c,m,v){const b=_.context,T=b.gl,O=_.transform;b.setColorMode(_.colorModeForRenderPass());const R=rc(b,r),L=c.key,U=r.heatmapFbos.get(L);if(!U)return;b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,U.colorAttachment.get()),b.activeTexture.set(T.TEXTURE1),R.bind(T.LINEAR,T.CLAMP_TO_EDGE);const H=O.getProjectionData({overscaledTileID:c,applyTerrainMatrix:v,applyGlobeMatrix:!m});_.useProgram("heatmapTexture").draw(b,T.TRIANGLES,lr.disabled,Pr.disabled,_.colorModeForRenderPass(),nr.disabled,Gh(_,r,0,1),null,H,r.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,r.paint,O.zoom),U.destroy(),r.heatmapFbos.delete(L)}function po(_,r,c){var m,v;const b=_.gl,T=b.createTexture();b.bindTexture(b.TEXTURE_2D,T),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const O=(m=_.HALF_FLOAT)!==null&&m!==void 0?m:b.UNSIGNED_BYTE,R=(v=_.RGBA16F)!==null&&v!==void 0?v:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,R,r,c,0,b.RGBA,O,null);const L=_.createFramebuffer(r,c,!1,!1);return L.colorAttachment.set(T),L}function rc(_,r){return r.colorRampTexture||(r.colorRampTexture=new s.T(_,r.colorRamp,_.gl.RGBA)),r.colorRampTexture}function tu(_,r,c,m,v){if(!c||!m||!m.imageAtlas)return;const b=m.imageAtlas.patternPositions;let T=b[c.to.toString()],O=b[c.from.toString()];if(!T&&O&&(T=O),!O&&T&&(O=T),!T||!O){const R=v.getPaintProperty(r);T=b[R],O=b[R]}T&&O&&_.setConstantPatternPositions(T,O)}function el(_,r,c,m,v,b,T,O){const R=_.context.gl,L="fill-pattern",U=c.paint.get(L),H=U&&U.constantOr(1),W=c.getCrossfadeParameters();let X,ne,he,pe,me;const ye=_.transform,we=c.paint.get("fill-translate"),ve=c.paint.get("fill-translate-anchor");T?(ne=H&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=R.LINES):(ne=H?"fillPattern":"fill",X=R.TRIANGLES);const Ae=U.constantOr(null);for(const Ie of m){const xe=r.getTile(Ie);if(H&&!xe.patternsLoaded())continue;const De=xe.getBucket(c);if(!De)continue;const Ze=De.programConfigurations.get(c.id),Ge=_.useProgram(ne,Ze),He=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ie);H&&(_.context.activeTexture.set(R.TEXTURE0),xe.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Ze.updatePaintBuffers(W)),tu(Ze,L,Ae,xe,c);const et=ye.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),Pt=s.aD(ye,xe,we,ve);if(T){pe=De.indexBuffer2,me=De.segments2;const dt=[R.drawingBufferWidth,R.drawingBufferHeight];he=ne==="fillOutlinePattern"&&H?Vc(_,W,xe,dt,Pt):Gl(dt,Pt)}else pe=De.indexBuffer,me=De.segments,he=H?Zu(_,W,xe,Pt):{u_fill_translate:Pt};const wt=_.stencilModeForClipping(Ie);Ge.draw(_.context,X,v,wt,b,nr.backCCW,he,He,et,c.id,De.layoutVertexBuffer,pe,me,c.paint,_.transform.zoom,Ze)}}function nc(_,r,c,m,v,b,T,O){const R=_.context,L=R.gl,U="fill-extrusion-pattern",H=c.paint.get(U),W=H.constantOr(1),X=c.getCrossfadeParameters(),ne=c.paint.get("fill-extrusion-opacity"),he=H.constantOr(null),pe=_.transform;for(const me of m){const ye=r.getTile(me),we=ye.getBucket(c);if(!we)continue;const ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),Ae=we.programConfigurations.get(c.id),Ie=_.useProgram(W?"fillExtrusionPattern":"fillExtrusion",Ae);W&&(_.context.activeTexture.set(L.TEXTURE0),ye.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ae.updatePaintBuffers(X));const xe=pe.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!O,applyTerrainMatrix:!0});tu(Ae,U,he,ye,c);const De=s.aD(pe,ye,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ze=c.paint.get("fill-extrusion-vertical-gradient"),Ge=W?tm(_,Ze,ne,De,me,X,ye):Wa(_,Ze,ne,De);Ie.draw(R,R.gl.TRIANGLES,v,b,T,nr.backCCW,Ge,ve,xe,c.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,c.paint,_.transform.zoom,Ae,_.style.map.terrain&&we.centroidVertexBuffer)}}function ic(_,r,c,m,v,b,T,O,R){var L;const U=_.style.projection,H=_.context,W=_.transform,X=H.gl,ne=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],he=_.useProgram("hillshade",null,!1,ne),pe=!_.options.moving;for(const me of m){const ye=r.getTile(me),we=ye.fbo;if(!we)continue;const ve=U.getMeshFromTileID(H,me.canonical,O,!0,"raster"),Ae=(L=_.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(me);H.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,we.colorAttachment.get());const Ie=W.getProjectionData({overscaledTileID:me,aligned:pe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});he.draw(H,X.TRIANGLES,b,v[me.overscaledZ],T,nr.backCCW,Wh(_,ye,c),Ae,Ie,c.id,ve.vertexBuffer,ve.indexBuffer,ve.segments)}}function mo(_,r,c,m,v,b,T,O,R){var L;const U=_.style.projection,H=_.context,W=_.transform,X=H.gl,ne=_.useProgram("colorRelief"),he=!_.options.moving;let pe=!0,me=0;for(const ye of m){const we=r.getTile(ye),ve=we.dem;if(pe){const Ge=X.getParameter(X.MAX_TEXTURE_SIZE),{elevationTexture:He,colorTexture:et}=c.getColorRampTextures(H,Ge,ve.getUnpackVector());H.activeTexture.set(X.TEXTURE1),He.bind(X.NEAREST,X.CLAMP_TO_EDGE),H.activeTexture.set(X.TEXTURE4),et.bind(X.LINEAR,X.CLAMP_TO_EDGE),pe=!1,me=He.size[0]}if(!ve||!ve.data)continue;const Ae=ve.stride,Ie=ve.getPixels();if(H.activeTexture.set(X.TEXTURE0),H.pixelStoreUnpackPremultiplyAlpha.set(!1),we.demTexture=we.demTexture||_.getTileTexture(Ae),we.demTexture){const Ge=we.demTexture;Ge.update(Ie,{premultiply:!1}),Ge.bind(X.LINEAR,X.CLAMP_TO_EDGE)}else we.demTexture=new s.T(H,Ie,X.RGBA,{premultiply:!1}),we.demTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE);const xe=U.getMeshFromTileID(H,ye.canonical,O,!0,"raster"),De=(L=_.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(ye),Ze=W.getProjectionData({overscaledTileID:ye,aligned:he,applyGlobeMatrix:!R,applyTerrainMatrix:!0});ne.draw(H,X.TRIANGLES,b,v[ye.overscaledZ],T,nr.backCCW,Zh(c,we.dem,me),De,Ze,c.id,xe.vertexBuffer,xe.indexBuffer,xe.segments)}}const ru=[new s.P(0,0),new s.P(s.$,0),new s.P(s.$,s.$),new s.P(0,s.$)];function tl(_,r,c,m,v,b,T,O,R=!1,L=!1){const U=m[m.length-1].overscaledZ,H=_.context,W=H.gl,X=_.useProgram("raster"),ne=_.transform,he=_.style.projection,pe=_.colorModeForRenderPass(),me=!_.options.moving;for(const ye of m){const we=_.getDepthModeForSublayer(ye.overscaledZ-U,c.paint.get("raster-opacity")===1?lr.ReadWrite:lr.ReadOnly,W.LESS),ve=r.getTile(ye);ve.registerFadeDuration(c.paint.get("raster-fade-duration"));const Ae=r.findLoadedParent(ye,0),Ie=r.findLoadedSibling(ye),xe=ac(ve,Ae||Ie||null,r,c,_.transform,_.style.map.terrain);let De,Ze;const Ge=c.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;H.activeTexture.set(W.TEXTURE0),ve.texture.bind(Ge,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(W.TEXTURE1),Ae?(Ae.texture.bind(Ge,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,Ae.tileID.overscaledZ-ve.tileID.overscaledZ),Ze=[ve.tileID.canonical.x*De%1,ve.tileID.canonical.y*De%1]):ve.texture.bind(Ge,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),ve.texture.useMipmap&&H.extTextureFilterAnisotropic&&_.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,H.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,H.extTextureFilterAnisotropicMax);const He=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ye),et=ne.getProjectionData({overscaledTileID:ye,aligned:me,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),Pt=Gc(Ze||[0,0],De||1,xe,c,O),wt=he.getMeshFromTileID(H,ye.canonical,b,T,"raster");X.draw(H,W.TRIANGLES,we,v?v[ye.overscaledZ]:Pr.disabled,pe,R?nr.frontCCW:nr.backCCW,Pt,He,et,c.id,wt.vertexBuffer,wt.indexBuffer,wt.segments)}}function ac(_,r,c,m,v,b){const T=m.paint.get("raster-fade-duration");if(!b&&T>0){const O=D.now(),R=(O-_.timeAdded)/T,L=r?(O-r.timeAdded)/T:-1,U=c.getSource(),H=zt(v,{tileSize:U.tileSize,roundZoom:U.roundZoom}),W=!r||Math.abs(r.tileID.overscaledZ-H)>Math.abs(_.tileID.overscaledZ-H),X=W&&_.refreshedUponExpiration?1:s.ah(W?R:1-L,0,1);return _.refreshedUponExpiration&&R>=1&&(_.refreshedUponExpiration=!1),r?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}const nu=new s.bf(1,0,0,1),ff=new s.bf(0,1,0,1),ld=new s.bf(0,0,1,1),eh=new s.bf(1,0,1,1),cd=new s.bf(0,1,1,1);function th(_,r,c,m){hn(_,0,r+c/2,_.transform.width,c,m)}function go(_,r,c,m){hn(_,r-c/2,0,c,_.transform.height,m)}function hn(_,r,c,m,v,b){const T=_.context,O=T.gl;O.enable(O.SCISSOR_TEST),O.scissor(r*_.pixelRatio,c*_.pixelRatio,m*_.pixelRatio,v*_.pixelRatio),T.clear({color:b}),O.disable(O.SCISSOR_TEST)}function Ea(_,r,c){const m=_.context,v=m.gl,b=_.useProgram("debug"),T=lr.disabled,O=Pr.disabled,R=_.colorModeForRenderPass(),L="$debug",U=_.style.map.terrain&&_.style.map.terrain.getTerrainData(c);m.activeTexture.set(v.TEXTURE0);const H=r.getTileByID(c.key).latestRawTileData,W=Math.floor((H&&H.byteLength||0)/1024),X=r.getTile(c).tileSize,ne=512/Math.min(X,512)*(c.overscaledZ/_.transform.zoom)*.5;let he=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(he+=` => ${c.overscaledZ}`),(function(me,ye){me.initDebugOverlayCanvas();const we=me.debugOverlayCanvas,ve=me.context.gl,Ae=me.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,we.width,we.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(ye,5,5),Ae.strokeText(ye,5,5),me.debugOverlayTexture.update(we),me.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)})(_,`${he} ${W}kB`);const pe=_.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(m,v.TRIANGLES,T,O,Yr.alphaBlended,nr.disabled,Hs(s.bf.transparent,ne),null,pe,L,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),b.draw(m,v.LINE_STRIP,T,O,R,nr.disabled,Hs(s.bf.red),U,pe,L,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Tn(_,r,c,m){const{isRenderingGlobe:v}=m,b=_.context,T=b.gl,O=_.transform,R=_.colorModeForRenderPass(),L=_.getDepthModeFor3D(),U=_.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,_.width,_.height]);for(const H of c){const W=r.getTerrainMesh(H.tileID),X=_.renderToTexture.getTexture(H),ne=r.getTerrainData(H.tileID);b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,X.texture);const he=r.getMeshFrameDelta(O.zoom),pe=O.calculateFogMatrix(H.tileID.toUnwrapped()),me=Hu(he,pe,_.style.sky,O.pitch,v),ye=O.getProjectionData({overscaledTileID:H.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});U.draw(b,T.TRIANGLES,L,Pr.disabled,R,nr.backCCW,me,ne,ye,"terrain",W.vertexBuffer,W.indexBuffer,W.segments)}}function _s(_,r){if(!r.mesh){const c=new s.aL;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const m=new s.aN;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),r.mesh=new Mo(_.createVertexBuffer(c,ko.members),_.createIndexBuffer(m),s.aM.simpleSegment(0,0,c.length,m.length))}return r.mesh}class Ma{constructor(r,c){this.context=new Ql(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Cr.maxUnderzooming+Cr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new os}resize(r,c,m){if(this.width=Math.floor(r*m),this.height=Math.floor(c*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const r=this.context,c=new s.aL;c.emplaceBack(0,0),c.emplaceBack(s.$,0),c.emplaceBack(0,s.$),c.emplaceBack(s.$,s.$),this.tileExtentBuffer=r.createVertexBuffer(c,ko.members),this.tileExtentSegments=s.aM.simpleSegment(0,0,4,2);const m=new s.aL;m.emplaceBack(0,0),m.emplaceBack(s.$,0),m.emplaceBack(0,s.$),m.emplaceBack(s.$,s.$),this.debugBuffer=r.createVertexBuffer(m,ko.members),this.debugSegments=s.aM.simpleSegment(0,0,4,5);const v=new s.c6;v.emplaceBack(0,0,0,0),v.emplaceBack(s.$,0,s.$,0),v.emplaceBack(0,s.$,0,s.$),v.emplaceBack(s.$,s.$,s.$,s.$),this.rasterBoundsBuffer=r.createVertexBuffer(v,em.members),this.rasterBoundsSegments=s.aM.simpleSegment(0,0,4,2);const b=new s.aL;b.emplaceBack(0,0),b.emplaceBack(s.$,0),b.emplaceBack(0,s.$),b.emplaceBack(s.$,s.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(b,ko.members),this.rasterBoundsSegmentsPosOnly=s.aM.simpleSegment(0,0,4,5);const T=new s.aL;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(T,ko.members),this.viewportSegments=s.aM.simpleSegment(0,0,4,2);const O=new s.c7;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(O);const R=new s.aN;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(R);const L=this.context.gl;this.stencilClearMode=new Pr({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.tileExtentMesh=new Mo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=s.L();s.bY(m,0,this.width,this.height,0,0,1),s.N(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const v={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,lr.disabled,this.stencilClearMode,Yr.disabled,nr.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,m){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const v=this.context;v.setColorMode(Yr.disabled),v.setDepthMode(lr.disabled);const b={};for(const T of c)b[T.key]=this.nextStencilID++;this._renderTileMasks(b,c,m,!0),this._renderTileMasks(b,c,m,!1),this._tileClippingMaskIDs=b}_renderTileMasks(r,c,m,v){const b=this.context,T=b.gl,O=this.style.projection,R=this.transform,L=this.useProgram("clippingMask");for(const U of c){const H=r[U.key],W=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),X=O.getMeshFromTileID(this.context,U.canonical,v,!0,"stencil"),ne=R.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!m,applyTerrainMatrix:!0});L.draw(b,T.TRIANGLES,lr.disabled,new Pr({func:T.ALWAYS,mask:0},H,255,T.KEEP,T.KEEP,T.REPLACE),Yr.disabled,m?nr.disabled:nr.backCCW,null,W,ne,"$clipping",X.vertexBuffer,X.indexBuffer,X.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,m=this.style.projection,v=this.transform,b=this.useProgram("depth"),T=this.getDepthModeFor3D(),O=Be(v,{tileSize:v.tileSize});for(const R of O){const L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),U=m.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),H=v.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(r,c.TRIANGLES,T,Pr.disabled,Yr.disabled,nr.backCCW,null,L,H,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Pr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Pr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,m=r.sort(((T,O)=>O.overscaledZ-T.overscaledZ)),v=m[m.length-1].overscaledZ,b=m[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const T={};for(let O=0;O<b;O++)T[O+v]=new Pr({func:c.GEQUAL,mask:255},O+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[T,m]}return[{[v]:Pr.disabled},m]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,m=r.sort(((T,O)=>O.overscaledZ-T.overscaledZ)),v=m[m.length-1].overscaledZ,b=m[0].overscaledZ-v+1;if(this.clearStencil(),b>1){const T={},O={};for(let R=0;R<b;R++)T[R+v]=new Pr({func:c.GREATER,mask:255},b+1+R,255,c.KEEP,c.KEEP,c.REPLACE),O[R+v]=new Pr({func:c.GREATER,mask:255},1+R,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*b+1,[T,O,m]}return this.nextStencilID=3,[{[v]:new Pr({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[v]:new Pr({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},m]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Yr([r.CONSTANT_COLOR,r.ONE],new s.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Yr.unblended:Yr.alphaBlended}getDepthModeForSublayer(r,c,m){if(!this.opaquePassEnabledForLayer())return lr.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new lr(m||this.context.gl.LEQUAL,c,[v,v])}getDepthModeFor3D(){return new lr(this.context.gl.LEQUAL,lr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var m,v;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();const b=this.style._order,T=this.style.sourceCaches,O={},R={},L={},U={isRenderingToTexture:!1,isRenderingGlobe:((m=r.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const W in T){const X=T[W];X.used&&X.prepare(this.context),O[W]=X.getVisibleCoordinates(!1),R[W]=O[W].slice().reverse(),L[W]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<b.length;W++)if(this.style._layers[b[W]].is3D()){this.opaquePassCutoff=W;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const W of b){const X=this.style._layers[W];if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const ne=R[X.source];(X.type==="custom"||ne.length)&&this.renderLayer(this,T[X.source],X,ne,U)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:W=>this.useProgram(W)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?s.bf.black:s.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(W,X){const ne=W.context,he=ne.gl,pe=((Ie,xe,De)=>{const Ze=Math.cos(xe.rollInRadians),Ge=Math.sin(xe.rollInRadians),He=Ee(xe),et=xe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ie.properties.get("sky-color"),u_horizon_color:Ie.properties.get("horizon-color"),u_horizon:[(xe.width/2-He*Ge)*De,(xe.height/2+He*Ze)*De],u_horizon_normal:[-Ge,Ze],u_sky_horizon_blend:Ie.properties.get("sky-horizon-blend")*xe.height/2*De,u_sky_blend:et}})(X,W.style.map.transform,W.pixelRatio),me=new lr(he.LEQUAL,lr.ReadWrite,[0,1]),ye=Pr.disabled,we=W.colorModeForRenderPass(),ve=W.useProgram("sky"),Ae=_s(ne,X);ve.draw(ne,he.TRIANGLES,me,ye,we,nr.disabled,pe,null,void 0,"sky",Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const W=this.style._layers[b[this.currentLayer]],X=T[W.source],ne=O[W.source];this._renderTileClippingMasks(W,ne,!1),this.renderLayer(this,X,W,ne,U)}this.renderPass="translucent";let H=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const W=this.style._layers[b[this.currentLayer]],X=T[W.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(W,U))continue;this.opaquePassEnabledForLayer()||H||(H=!0,U.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ne=(W.type==="symbol"?L:R)[W.source];this._renderTileClippingMasks(W,O[W.source],!!this.renderToTexture),this.renderLayer(this,X,W,ne,U)}if(U.isRenderingGlobe&&(function(W,X,ne){const he=W.context,pe=he.gl,me=W.useProgram("atmosphere"),ye=new lr(pe.LEQUAL,lr.ReadOnly,[0,1]),we=W.transform,ve=(function(et,Pt){const wt=et.properties.get("position"),dt=[-wt.x,-wt.y,-wt.z],Lt=s.ag(new Float64Array(16));return et.properties.get("anchor")==="map"&&(s.b6(Lt,Lt,Pt.rollInRadians),s.b7(Lt,Lt,-Pt.pitchInRadians),s.b6(Lt,Lt,Pt.bearingInRadians),s.b7(Lt,Lt,Pt.center.lat*Math.PI/180),s.bz(Lt,Lt,-Pt.center.lng*Math.PI/180)),s.c5(dt,dt,Lt),dt})(ne,W.transform),Ae=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ie=X.properties.get("atmosphere-blend")*Ae.projectionTransition;if(Ie===0)return;const xe=Io(we.worldSize,we.center.lat),De=we.inverseProjectionMatrix,Ze=new Float64Array(4);Ze[3]=1,s.aw(Ze,Ze,we.modelViewProjectionMatrix),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1,s.aw(Ze,Ze,De),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1;const Ge=((et,Pt,wt,dt,Lt)=>({u_sun_pos:et,u_atmosphere_blend:Pt,u_globe_position:wt,u_globe_radius:dt,u_inv_proj_matrix:Lt}))(ve,Ie,[Ze[0],Ze[1],Ze[2]],xe,De),He=_s(he,X);me.draw(he,pe.TRIANGLES,ye,Pr.disabled,Yr.alphaBlended,nr.disabled,Ge,null,null,"atmosphere",He.vertexBuffer,He.indexBuffer,He.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const W=(function(X,ne){let he=null;const pe=Object.values(X._layers).flatMap((ve=>ve.source&&!ve.isHidden(ne)?[X.sourceCaches[ve.source]]:[])),me=pe.filter((ve=>ve.getSource().type==="vector")),ye=pe.filter((ve=>ve.getSource().type!=="vector")),we=ve=>{(!he||he.getSource().maxzoom<ve.getSource().maxzoom)&&(he=ve)};return me.forEach((ve=>we(ve))),he||ye.forEach((ve=>we(ve))),he})(this.style,this.transform.zoom);W&&(function(X,ne,he){for(let pe=0;pe<he.length;pe++)Ea(X,ne,he[pe])})(this,W,W.getVisibleCoordinates())}this.options.showPadding&&(function(W){const X=W.transform.padding;th(W,W.transform.height-(X.top||0),3,nu),th(W,X.bottom||0,3,ff),go(W,X.left||0,3,ld),go(W,W.transform.width-(X.right||0),3,eh);const ne=W.transform.centerPoint;(function(he,pe,me,ye){hn(he,pe-1,me-10,2,20,ye),hn(he,pe-10,me-1,20,2,ye)})(W,ne.x,W.transform.height-ne.y,cd)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=r?!s.c8(c,m):!s.c9(c,m)),v||(v=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(s.ca(c,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,T){const O=b.context,R=O.gl,L=b.transform,U=Yr.unblended,H=new lr(R.LEQUAL,lr.ReadWrite,[0,1]),W=T.sourceCache.getRenderableTiles(),X=b.useProgram("terrainDepth");O.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),O.clear({color:s.bf.transparent,depth:1});for(const ne of W){const he=T.getTerrainMesh(ne.tileID),pe=T.getTerrainData(ne.tileID),me=L.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ye={u_ele_delta:T.getMeshFrameDelta(L.zoom)};X.draw(O,R.TRIANGLES,H,Pr.disabled,U,nr.backCCW,ye,pe,me,"terrain",he.vertexBuffer,he.indexBuffer,he.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,T){const O=b.context,R=O.gl,L=b.transform,U=Yr.unblended,H=new lr(R.LEQUAL,lr.ReadWrite,[0,1]),W=T.getCoordsTexture(),X=T.sourceCache.getRenderableTiles(),ne=b.useProgram("terrainCoords");O.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),O.clear({color:s.bf.transparent,depth:1}),T.coordsIndex=[];for(const he of X){const pe=T.getTerrainMesh(he.tileID),me=T.getTerrainData(he.tileID);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,W.texture);const ye={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(L.zoom)},we=L.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ne.draw(O,R.TRIANGLES,H,Pr.disabled,U,nr.backCCW,ye,me,we,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),T.coordsIndex.push(he.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(r,c,m,v,b){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,s.cb(m)?(function(T,O,R,L,U,H){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:W}=H,X=Pr.disabled,ne=T.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(he,pe,me,ye,we,ve,Ae,Ie,xe){const De=pe.transform,Ze=pe.style.map.terrain,Ge=we==="map",He=ve==="map";for(const et of he){const Pt=ye.getTile(et),wt=Pt.getBucket(me);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const dt=s.an(wt.textSizeData,De.zoom),Lt=s.aC(Pt,1,pe.transform.zoom),vr=gn(Ge,pe.transform,Lt),Nr=me.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(dt){const dn=Math.pow(2,De.zoom-Pt.tileID.overscaledZ),Qr=Ze?(Vr,fn)=>Ze.getElevation(et,Vr,fn):null;ec(wt,Ge,He,xe,De,vr,dn,dt,Nr,s.aD(De,Pt,Ae,Ie),et.toUnwrapped(),Qr)}}})(L,T,R,O,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),U),R.paint.get("icon-opacity").constantOr(1)!==0&&tc(T,O,R,L,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),X,ne,W),R.paint.get("text-opacity").constantOr(1)!==0&&tc(T,O,R,L,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),X,ne,W),O.map.showCollisionBoxes&&(od(T,O,R,L,!0),od(T,O,R,L,!1))})(r,c,m,v,this.style.placement.variableOffsets,b):s.cc(m)?(function(T,O,R,L,U){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:H}=U,W=R.paint.get("circle-opacity"),X=R.paint.get("circle-stroke-width"),ne=R.paint.get("circle-stroke-opacity"),he=!R.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(X.constantOr(1)===0||ne.constantOr(1)===0))return;const pe=T.context,me=pe.gl,ye=T.transform,we=T.getDepthModeForSublayer(0,lr.ReadOnly),ve=Pr.disabled,Ae=T.colorModeForRenderPass(),Ie=[],xe=ye.getCircleRadiusCorrection();for(let De=0;De<L.length;De++){const Ze=L[De],Ge=O.getTile(Ze),He=Ge.getBucket(R);if(!He)continue;const et=R.paint.get("circle-translate"),Pt=R.paint.get("circle-translate-anchor"),wt=s.aD(ye,Ge,et,Pt),dt=He.programConfigurations.get(R.id),Lt=T.useProgram("circle",dt),vr=He.layoutVertexBuffer,Nr=He.indexBuffer,dn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ze),Qr={programConfiguration:dt,program:Lt,layoutVertexBuffer:vr,indexBuffer:Nr,uniformValues:rm(T,Ge,R,wt,xe),terrainData:dn,projectionData:ye.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!H,applyTerrainMatrix:!0})};if(he){const Vr=He.segments.get();for(const fn of Vr)Ie.push({segments:new s.aM([fn]),sortKey:fn.sortKey,state:Qr})}else Ie.push({segments:He.segments,sortKey:0,state:Qr})}he&&Ie.sort(((De,Ze)=>De.sortKey-Ze.sortKey));for(const De of Ie){const{programConfiguration:Ze,program:Ge,layoutVertexBuffer:He,indexBuffer:et,uniformValues:Pt,terrainData:wt,projectionData:dt}=De.state;Ge.draw(pe,me.TRIANGLES,we,ve,Ae,nr.backCCW,Pt,wt,dt,R.id,He,et,De.segments,R.paint,T.transform.zoom,Ze)}})(r,c,m,v,b):s.cd(m)?(function(T,O,R,L,U){if(R.paint.get("heatmap-opacity")===0)return;const H=T.context,{isRenderingToTexture:W,isRenderingGlobe:X}=U;if(T.style.map.terrain){for(const ne of L){const he=O.getTile(ne);O.hasRenderableParent(ne)||(T.renderPass==="offscreen"?Qs(T,he,R,ne,X):T.renderPass==="translucent"&&eu(T,R,ne,W,X))}H.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?(function(ne,he,pe,me){const ye=ne.context,we=ye.gl,ve=ne.transform,Ae=Pr.disabled,Ie=new Yr([we.ONE,we.ONE],s.bf.transparent,[!0,!0,!0,!0]);(function(xe,De,Ze){const Ge=xe.gl;xe.activeTexture.set(Ge.TEXTURE1),xe.viewport.set([0,0,De.width/4,De.height/4]);let He=Ze.heatmapFbos.get(s.c2);He?(Ge.bindTexture(Ge.TEXTURE_2D,He.colorAttachment.get()),xe.bindFramebuffer.set(He.framebuffer)):(He=po(xe,De.width/4,De.height/4),Ze.heatmapFbos.set(s.c2,He))})(ye,ne,pe),ye.clear({color:s.bf.transparent});for(let xe=0;xe<me.length;xe++){const De=me[xe];if(he.hasRenderableParent(De))continue;const Ze=he.getTile(De),Ge=Ze.getBucket(pe);if(!Ge)continue;const He=Ge.programConfigurations.get(pe.id),et=ne.useProgram("heatmap",He),Pt=ve.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),wt=ve.getCircleRadiusCorrection();et.draw(ye,we.TRIANGLES,lr.disabled,Ae,Ie,nr.backCCW,sf(Ze,ve.zoom,pe.paint.get("heatmap-intensity"),wt),null,Pt,pe.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,pe.paint,ve.zoom,He)}ye.viewport.set([0,0,ne.width,ne.height])})(T,O,R,L):T.renderPass==="translucent"&&(function(ne,he){const pe=ne.context,me=pe.gl;pe.setColorMode(ne.colorModeForRenderPass());const ye=he.heatmapFbos.get(s.c2);ye&&(pe.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,ye.colorAttachment.get()),pe.activeTexture.set(me.TEXTURE1),rc(pe,he).bind(me.LINEAR,me.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(pe,me.TRIANGLES,lr.disabled,Pr.disabled,ne.colorModeForRenderPass(),nr.disabled,Gh(ne,he,0,1),null,null,he.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,he.paint,ne.transform.zoom))})(T,R)})(r,c,m,v,b):s.ce(m)?(function(T,O,R,L,U){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:H}=U,W=R.paint.get("line-opacity"),X=R.paint.get("line-width");if(W.constantOr(1)===0||X.constantOr(1)===0)return;const ne=T.getDepthModeForSublayer(0,lr.ReadOnly),he=T.colorModeForRenderPass(),pe=R.paint.get("line-dasharray"),me=R.paint.get("line-pattern"),ye=me.constantOr(1),we=R.paint.get("line-gradient"),ve=R.getCrossfadeParameters(),Ae=ye?"linePattern":pe?"lineSDF":we?"lineGradient":"line",Ie=T.context,xe=Ie.gl,De=T.transform;let Ze=!0;for(const Ge of L){const He=O.getTile(Ge);if(ye&&!He.patternsLoaded())continue;const et=He.getBucket(R);if(!et)continue;const Pt=et.programConfigurations.get(R.id),wt=T.context.program.get(),dt=T.useProgram(Ae,Pt),Lt=Ze||dt.program!==wt,vr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ge),Nr=me.constantOr(null);if(Nr&&He.imageAtlas){const Xr=He.imageAtlas,Zr=Xr.patternPositions[Nr.to.toString()],Rr=Xr.patternPositions[Nr.from.toString()];Zr&&Rr&&Pt.setConstantPatternPositions(Zr,Rr)}const dn=De.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Qr=De.getPixelScale(),Vr=ye?Kh(T,He,R,Qr,ve):pe?ds(T,He,R,Qr,pe,ve):we?Xh(T,He,R,Qr,et.lineClipsArray.length):qc(T,He,R,Qr);if(ye)Ie.activeTexture.set(xe.TEXTURE0),He.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),Pt.updatePaintBuffers(ve);else if(pe&&(Lt||T.lineAtlas.dirty))Ie.activeTexture.set(xe.TEXTURE0),T.lineAtlas.bind(Ie);else if(we){const Xr=et.gradients[R.id];let Zr=Xr.texture;if(R.gradientVersion!==Xr.version){let Rr=256;if(R.stepInterpolant){const Ln=O.getSource().maxzoom,Nn=Ge.canonical.z===Ln?Math.ceil(1<<T.transform.maxZoom-Ge.canonical.z):1;Rr=s.ah(s.c3(et.maxLineLength/s.$*1024*Nn),256,Ie.maxTextureSize)}Xr.gradient=s.c4({expression:R.gradientExpression(),evaluationKey:"lineProgress",resolution:Rr,image:Xr.gradient||void 0,clips:et.lineClipsArray}),Xr.texture?Xr.texture.update(Xr.gradient):Xr.texture=new s.T(Ie,Xr.gradient,xe.RGBA),Xr.version=R.gradientVersion,Zr=Xr.texture}Ie.activeTexture.set(xe.TEXTURE0),Zr.bind(R.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}const fn=T.stencilModeForClipping(Ge);dt.draw(Ie,xe.TRIANGLES,ne,fn,he,nr.disabled,Vr,vr,dn,R.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,R.paint,T.transform.zoom,Pt,et.layoutVertexBuffer2),Ze=!1}})(r,c,m,v,b):s.cf(m)?(function(T,O,R,L,U){const H=R.paint.get("fill-color"),W=R.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const{isRenderingToTexture:X}=U,ne=T.colorModeForRenderPass(),he=R.paint.get("fill-pattern"),pe=T.opaquePassEnabledForLayer()&&!he.constantOr(1)&&H.constantOr(s.bf.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===pe){const me=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);el(T,O,R,L,me,ne,!1,X)}if(T.renderPass==="translucent"&&R.paint.get("fill-antialias")){const me=T.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);el(T,O,R,L,me,ne,!0,X)}})(r,c,m,v,b):s.cg(m)?(function(T,O,R,L,U){const H=R.paint.get("fill-extrusion-opacity");if(H===0)return;const{isRenderingToTexture:W}=U;if(T.renderPass==="translucent"){const X=new lr(T.context.gl.LEQUAL,lr.ReadWrite,T.depthRangeFor3D);if(H!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))nc(T,O,R,L,X,Pr.disabled,Yr.disabled,W),nc(T,O,R,L,X,T.stencilModeFor3D(),T.colorModeForRenderPass(),W);else{const ne=T.colorModeForRenderPass();nc(T,O,R,L,X,Pr.disabled,ne,W)}}})(r,c,m,v,b):s.ch(m)?(function(T,O,R,L,U){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:H}=U,W=T.context,X=T.style.projection.useSubdivision,ne=T.getDepthModeForSublayer(0,lr.ReadOnly),he=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(pe,me,ye,we,ve,Ae,Ie){const xe=pe.context,De=xe.gl;for(const Ze of ye){const Ge=me.getTile(Ze),He=Ge.dem;if(!He||!He.data||!Ge.needsHillshadePrepare)continue;const et=He.dim,Pt=He.stride,wt=He.getPixels();if(xe.activeTexture.set(De.TEXTURE1),xe.pixelStoreUnpackPremultiplyAlpha.set(!1),Ge.demTexture=Ge.demTexture||pe.getTileTexture(Pt),Ge.demTexture){const Lt=Ge.demTexture;Lt.update(wt,{premultiply:!1}),Lt.bind(De.NEAREST,De.CLAMP_TO_EDGE)}else Ge.demTexture=new s.T(xe,wt,De.RGBA,{premultiply:!1}),Ge.demTexture.bind(De.NEAREST,De.CLAMP_TO_EDGE);xe.activeTexture.set(De.TEXTURE0);let dt=Ge.fbo;if(!dt){const Lt=new s.T(xe,{width:et,height:et,data:null},De.RGBA);Lt.bind(De.LINEAR,De.CLAMP_TO_EDGE),dt=Ge.fbo=xe.createFramebuffer(et,et,!0,!1),dt.colorAttachment.set(Lt.texture)}xe.bindFramebuffer.set(dt.framebuffer),xe.viewport.set([0,0,et,et]),pe.useProgram("hillshadePrepare").draw(xe,De.TRIANGLES,ve,Ae,Ie,nr.disabled,Wl(Ge.tileID,He),null,null,we.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),Ge.needsHillshadePrepare=!1}})(T,O,L,R,ne,Pr.disabled,he),W.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(X){const[pe,me,ye]=T.stencilConfigForOverlapTwoPass(L);ic(T,O,R,ye,pe,ne,he,!1,H),ic(T,O,R,ye,me,ne,he,!0,H)}else{const[pe,me]=T.getStencilConfigForOverlapAndUpdateStencilID(L);ic(T,O,R,me,pe,ne,he,!1,H)}})(r,c,m,v,b):s.ci(m)?(function(T,O,R,L,U){if(T.renderPass!=="translucent"||!L.length)return;const{isRenderingToTexture:H}=U,W=T.style.projection.useSubdivision,X=T.getDepthModeForSublayer(0,lr.ReadOnly),ne=T.colorModeForRenderPass();if(W){const[he,pe,me]=T.stencilConfigForOverlapTwoPass(L);mo(T,O,R,me,he,X,ne,!1,H),mo(T,O,R,me,pe,X,ne,!0,H)}else{const[he,pe]=T.getStencilConfigForOverlapAndUpdateStencilID(L);mo(T,O,R,pe,he,X,ne,!1,H)}})(r,c,m,v,b):s.cj(m)?(function(T,O,R,L,U){if(T.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!L.length)return;const{isRenderingToTexture:H}=U,W=O.getSource(),X=T.style.projection.useSubdivision;if(W instanceof Xn)tl(T,O,R,L,null,!1,!1,W.tileCoords,W.flippedWindingOrder,H);else if(X){const[ne,he,pe]=T.stencilConfigForOverlapTwoPass(L);tl(T,O,R,pe,ne,!1,!0,ru,!1,H),tl(T,O,R,pe,he,!0,!0,ru,!1,H)}else{const[ne,he]=T.getStencilConfigForOverlapAndUpdateStencilID(L);tl(T,O,R,he,ne,!1,!0,ru,!1,H)}})(r,c,m,v,b):s.ck(m)?(function(T,O,R,L,U){const H=R.paint.get("background-color"),W=R.paint.get("background-opacity");if(W===0)return;const{isRenderingToTexture:X}=U,ne=T.context,he=ne.gl,pe=T.style.projection,me=T.transform,ye=me.tileSize,we=R.paint.get("background-pattern");if(T.isPatternMissing(we))return;const ve=!we&&H.a===1&&W===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==ve)return;const Ae=Pr.disabled,Ie=T.getDepthModeForSublayer(0,ve==="opaque"?lr.ReadWrite:lr.ReadOnly),xe=T.colorModeForRenderPass(),De=T.useProgram(we?"backgroundPattern":"background"),Ze=L||Be(me,{tileSize:ye,terrain:T.style.map.terrain});we&&(ne.activeTexture.set(he.TEXTURE0),T.imageManager.bind(T.context));const Ge=R.getCrossfadeParameters();for(const He of Ze){const et=me.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),Pt=we?lf(W,T,we,{tileID:He,tileSize:ye},Ge):Zl(W,H),wt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(He),dt=pe.getMeshFromTileID(ne,He.canonical,!1,!0,"raster");De.draw(ne,he.TRIANGLES,Ie,Ae,xe,nr.backCCW,Pt,wt,et,R.id,dt.vertexBuffer,dt.indexBuffer,dt.segments)}})(r,0,m,v,b):s.cl(m)&&(function(T,O,R,L){const{isRenderingGlobe:U}=L,H=T.context,W=R.implementation,X=T.style.projection,ne=T.transform,he=ne.getProjectionDataForCustomLayer(U),pe={farZ:ne.farZ,nearZ:ne.nearZ,fov:ne.fov*Math.PI/180,modelViewProjectionMatrix:ne.modelViewProjectionMatrix,projectionMatrix:ne.projectionMatrix,shaderData:{variantName:X.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${X.shaderPreludeCode.vertexSource}`,define:X.shaderDefine},defaultProjectionData:he},me=W.renderingMode?W.renderingMode:"2d";if(T.renderPass==="offscreen"){const ye=W.prerender;ye&&(T.setCustomLayerDefaults(),H.setColorMode(T.colorModeForRenderPass()),ye.call(W,H.gl,pe),H.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),H.setColorMode(T.colorModeForRenderPass()),H.setStencilMode(Pr.disabled);const ye=me==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,lr.ReadOnly);H.setDepthMode(ye),W.render(H.gl,pe),H.setDirty(),T.setBaseState(),H.bindFramebuffer.set(null)}})(r,0,m,b))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),m=this.imageManager.getPattern(r.to.toString());return!c||!m}useProgram(r,c,m=!1,v=[]){this.cache=this.cache||{};const b=!!this.style.map.terrain,T=this.style.projection,O=m?Aa.projectionMercator:T.shaderPreludeCode,R=m?co:T.shaderDefine,L=r+(c?c.cacheKey:"")+`/${m?ss:T.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[L]||(this.cache[L]=new qh(this.context,Aa[r],c,Qh[r],this._showOverdrawInspector,b,O,R,v)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function iu(_,r){let c,m=!1,v=null,b=null;const T=()=>{v=null,m&&(_.apply(b,c),v=setTimeout(T,r),m=!1)};return(...O)=>(m=!0,b=this,c=O,v||T(),v)}class rl{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let m;return c.split("&").map((v=>v.split("="))).forEach((v=>{v[0]===this._hashName&&(m=v)})),(m&&m[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const m=c.join("/");let v=m;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${m}`);let b=window.location.hash.replace(v,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let T=window.location.href.replace(/(#.+)?$/,b);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=iu(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),T=Math.round(c.lng*b)/b,O=Math.round(c.lat*b)/b,R=this._map.getBearing(),L=this._map.getPitch();let U="";if(U+=r?`/${T}/${O}/${m}`:`${m}/${O}/${T}`,(R||L)&&(U+="/"+Math.round(10*R)/10),L&&(U+=`/${Math.round(L)}`),this._hashName){const H=this._hashName;let W=!1;const X=window.location.hash.slice(1).split("&").map((ne=>{const he=ne.split("=")[0];return he===H?(W=!0,`${he}=${U}`):ne})).filter((ne=>ne));return W||X.push(`${H}=${U}`),`#${X.join("&")}`}return`#${U}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new s.S(+r[2],+r[1])}catch{return!1}const c=+r[0],m=+(r[3]||0),v=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&m>=-180&&m<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const nl={linearity:.3,easing:s.cm(0,0,.3,1)},Xa=s.e({deceleration:2500,maxSpeed:1400},nl),il=s.e({deceleration:20,maxSpeed:1400},nl),al=s.e({deceleration:1e3,maxSpeed:360},nl),au=s.e({deceleration:1e3,maxSpeed:90},nl),rh=s.e({deceleration:1e3,maxSpeed:360},nl);class ol{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=D.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,c.roll+=b.rollDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const b=jr(c.pan.mag(),m,s.e({},Xa,r||{})),T=c.pan.mult(b.amount/c.pan.mag()),O=this._map.cameraHelper.handlePanInertia(T,this._map.transform);v.center=O.easingCenter,v.offset=O.easingOffset,ua(v,b)}if(c.zoom){const b=jr(c.zoom,m,il);v.zoom=this._map.transform.zoom+b.amount,ua(v,b)}if(c.bearing){const b=jr(c.bearing,m,al);v.bearing=this._map.transform.bearing+s.ah(b.amount,-179,179),ua(v,b)}if(c.pitch){const b=jr(c.pitch,m,au);v.pitch=this._map.transform.pitch+b.amount,ua(v,b)}if(c.roll){const b=jr(c.roll,m,rh);v.roll=this._map.transform.roll+s.ah(b.amount,-179,179),ua(v,b)}if(v.zoom||v.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),s.e(v,{noMoveStart:!0})}}function ua(_,r){(!_.duration||_.duration<r.duration)&&(_.duration=r.duration,_.easing=r.easing)}function jr(_,r,c){const{maxSpeed:m,linearity:v,deceleration:b}=c,T=s.ah(_*v/(r/1e3),-m,m),O=Math.abs(T)/(b*v);return{easing:c.easing,duration:1e3*O,amount:T*(O/2)}}class Ir extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m,v={}){m=m instanceof MouseEvent?m:new MouseEvent(r,m);const b=j.mousePos(c.getCanvas(),m),T=c.unproject(b);super(r,s.e({point:b,lngLat:T,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}}class ha extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m){const v=r==="touchend"?m.changedTouches:m.touches,b=j.touchPos(c.getCanvasContainer(),v),T=b.map((R=>c.unproject(R))),O=b.reduce(((R,L,U,H)=>R.add(L.div(H.length))),new s.P(0,0));super(r,{points:b,point:O,lngLats:T,lngLat:c.unproject(O),originalEvent:m}),this._defaultPrevented=!1}}class oi extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m){super(r,{originalEvent:m}),this._defaultPrevented=!1}}class Ii{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new oi(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new Ir(r.type,this._map,r))}mouseup(r){this._map.fire(new Ir(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ir(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Ir(r.type,this._map,r))}mouseover(r){this._map.fire(new Ir(r.type,this._map,r))}mouseout(r){this._map.fire(new Ir(r.type,this._map,r))}touchstart(r){return this._firePreventable(new ha(r.type,this._map,r))}touchmove(r){this._map.fire(new ha(r.type,this._map,r))}touchend(r){this._map.fire(new ha(r.type,this._map,r))}touchcancel(r){this._map.fire(new ha(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xs{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Ir(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ir("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Ir(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ka{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(s.P.convert(r),this._map.terrain)}}class yi{constructor(r,c){this._map=r,this._tr=new Ka(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(j.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=j.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const b=Math.min(v.x,m.x),T=Math.max(v.x,m.x),O=Math.min(v.y,m.y),R=Math.max(v.y,m.y);j.setTransform(this._box,`translate(${b}px,${O}px)`),this._box.style.width=T-b+"px",this._box.style.height=R-O+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const m=this._startPos,v=c;if(this.reset(),j.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:r})),{cameraAnimation:b=>b.fitScreenCoordinates(m,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new s.l(r,{originalEvent:c}))}}function sl(_,r){if(_.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${r.length}`);const c={};for(let m=0;m<_.length;m++)c[_[m].identifier]=r[m];return c}class ou{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),m.length===this.numTouches&&(this.centroid=(function(v){const b=new s.P(0,0);for(const T of v)b._add(T);return b.div(v.length)})(c),this.touches=sl(m,c)))}touchmove(r,c,m){if(this.aborted||!this.centroid)return;const v=sl(m,c);for(const b in this.touches){const T=v[b];(!T||T.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(r,c,m){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class su{constructor(r){this.singleTap=new ou(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,m){this.singleTap.touchstart(r,c,m)}touchmove(r,c,m){this.singleTap.touchmove(r,c,m)}touchend(r,c,m){const v=this.singleTap.touchend(r,c,m);if(v){const b=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(v)<30;if(b&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Oi{constructor(r){this._tr=new Ka(r),this._zoomIn=new su({numTouches:1,numTaps:2}),this._zoomOut=new su({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,m){this._zoomIn.touchstart(r,c,m),this._zoomOut.touchstart(r,c,m)}touchmove(r,c,m){this._zoomIn.touchmove(r,c,m),this._zoomOut.touchmove(r,c,m)}touchend(r,c,m){const v=this._zoomIn.touchend(r,c,m),b=this._zoomOut.touchend(r,c,m),T=this._tr;return v?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(v)},{originalEvent:r})}):b?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(b)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vi{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const v=Array.isArray(c)?c[0]:c;return!this._moved&&v.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(m,v))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&j.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const yo=0,Xi=2,bs={[yo]:1,[Xi]:2};class oc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=j.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!(function(c,m){const v=bs[m];return c.buttons===void 0||(c.buttons&v)!==v})(r,this._eventButton)}isValidEndEvent(r){return j.mouseButton(r)===this._eventButton}}class sm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class ws{constructor(r=new oc({checkCorrectEvent:()=>!0}),c=new sm){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,m){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?m(r):void 0}startMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Lo=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=r=>{r.preventDefault()}};class ll{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,m){return this._calculateTransform(r,c,m)}touchmove(r,c,m){if(this._active){if(!this._shouldBePrevented(m.length))return r.preventDefault(),this._calculateTransform(r,c,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,m){this._calculateTransform(r,c,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,m){m.length>0&&(this._active=!0);const v=sl(m,c),b=new s.P(0,0),T=new s.P(0,0);let O=0;for(const L in v){const U=v[L],H=this._touches[L];H&&(b._add(U),T._add(U.sub(H)),O++,v[L]=U)}if(this._touches=v,this._shouldBePrevented(O)||!T.mag())return;const R=T.div(O);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(O),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,m){if(!this._firstTwoTouches)return;r.preventDefault();const[v,b]=this._firstTwoTouches,T=Ri(m,c,v),O=Ri(m,c,b);if(!T||!O)return;const R=this._aroundCenter?null:T.add(O).div(2);return this._move([T,O],R,r)}touchend(r,c,m){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,T=Ri(m,c,v),O=Ri(m,c,b);T&&O||(this._active&&j.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ri(_,r,c){for(let m=0;m<_.length;m++)if(_[m].identifier===c)return r[m]}function At(_,r){return Math.log(_/r)/Math.LN2}class Ki extends vo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const m=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(At(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:At(this._distance,m),pinchAround:c}}}function _o(_,r){return 180*_.angleWith(r)/Math.PI}class Ya extends vo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,m){const v=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:_o(this._vector,v),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,m=_o(r,this._startVector);return Math.abs(m)<c}}function Di(_){return Math.abs(_.y)>Math.abs(_.x)}class ka extends vo{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,m){super.touchstart(r,c,m),this._currentTouchCount=m.length}_start(r){this._lastPoints=r,Di(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=r[0].sub(this._lastPoints[0]),b=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,b,m.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(v.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,m){if(this._valid!==void 0)return this._valid;const v=r.mag()>=2,b=c.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Di(r)&&Di(c)&&T}}const nh={panStep:100,bearingStep:15,pitchStep:10};class Ar{constructor(r){this._tr=new Ka(r);const c=nh;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,m=0,v=0,b=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?m=-1:(r.preventDefault(),b=-1);break;case 39:r.shiftKey?m=1:(r.preventDefault(),b=1);break;case 38:r.shiftKey?v=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?v=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:O=>{const R=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:lu,zoom:c?Math.round(R.zoom)+c*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+m*this._bearingStep,pitch:R.pitch+v*this._pitchStep,offset:[-b*this._panStep,-T*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function lu(_){return _*(2-_)}const Yi=4.000244140625,zi=1/450;class yn{constructor(r,c){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=r,this._tr=new Ka(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=zi}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const m=D.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%Yi==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=j.mousePos(this._map.getCanvas(),r),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(s.S.convert(m.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>Yi?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&R!==0&&(R=1/R);const L=typeof this._targetZoom!="number"?r.scale:s.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),s.ak(L*R)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,m=this._startZoom,v=this._easing;let b,T=!1;if(this._type==="wheel"&&m&&v){const O=D.now()-this._lastWheelEventTime,R=Math.min((O+5)/200,1),L=v(R);b=s.C.number(m,c,L),R<1?this._frameId||(this._frameId=!0):T=!0}else b=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!T,zoomDelta:b-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=s.co;if(this._prevEase){const m=this._prevEase,v=(D.now()-m.start)/m.duration,b=m.easing(v+.01)-m.easing(v),T=.27/Math.sqrt(b*b+1e-4)*.01,O=Math.sqrt(.0729-T*T);c=s.cm(T,O,.25,1)}return this._prevEase={start:D.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ia{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ud{constructor(r){this._tr=new Ka(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ih{constructor(){this._tap=new su({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,m){if(!this._swipePoint)if(this._tapTime){const v=c[0],b=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(v)<30;b&&T?m.length>0&&(this._swipePoint=v,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(r,c,m)}touchmove(r,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,r.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(r,c,m)}touchend(r,c,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const v=this._tap.touchend(r,c,m);v&&(this._tapTime=r.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cu{constructor(r,c,m){this._el=r,this._mousePan=c,this._touchPan=m}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ah{constructor(r,c,m,v){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=m,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class oh{constructor(r,c,m,v){this._el=r,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class uu{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=j.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=c,this._container.appendChild(v);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=m,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(j.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const hu=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class da extends s.l{}function Gr(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class lm{constructor(r,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,b)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=v.type==="renderFrame"?void 0:v,O={needsRenderFrame:!1},R={},L={};for(const{handlerName:W,handler:X,allowed:ne}of this._handlers){if(!X.isEnabled())continue;let he;if(this._blockedByActive(L,ne,W))X.reset();else if(X[b||v.type]){if(s.cp(v,b||v.type)){const pe=j.mousePos(this._map.getCanvas(),v);he=X[b||v.type](v,pe)}else if(s.cq(v,b||v.type)){const pe=this._getMapTouches(v.touches),me=j.touchPos(this._map.getCanvas(),pe);he=X[b||v.type](v,me,pe)}else s.cr(b||v.type)||(he=X[b||v.type](v));this.mergeHandlerResult(O,R,he,W,T),he&&he.needsRenderFrame&&this._triggerRenderFrame()}(he||X.isActive())&&(L[W]=X)}const U={};for(const W in this._previousActiveHandlers)L[W]||(U[W]=T);this._previousActiveHandlers=L,(Object.keys(U).length||Gr(O))&&(this._changes.push([O,R,U]),this._triggerRenderFrame()),(Object.keys(L).length||Gr(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=O;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ol(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,b,T]of this._listeners)j.addEventListener(v,b,v===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,m]of this._listeners)j.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(r){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new Ii(c,r));const v=c.boxZoom=new yi(c,r);this._add("boxZoom",v),r.interactive&&r.boxZoom&&v.enable();const b=c.cooperativeGestures=new uu(c,r.cooperativeGestures);this._add("cooperativeGestures",b),r.cooperativeGestures&&b.enable();const T=new Oi(c),O=new ud(c);c.doubleClickZoom=new Ia(O,T),this._add("tapZoom",T),this._add("clickZoom",O),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const R=new ih;this._add("tapDragZoom",R);const L=c.touchPitch=new ka(c);this._add("touchPitch",L),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const U=()=>c.project(c.getCenter()),H=(function({enable:ve,clickTolerance:Ae,aroundCenter:Ie=!0,minPixelCenterThreshold:xe=100,rotateDegreesPerPixelMoved:De=.8},Ze){const Ge=new oc({checkCorrectEvent:He=>j.mouseButton(He)===0&&He.ctrlKey||j.mouseButton(He)===2&&!He.ctrlKey});return new vi({clickTolerance:Ae,move:(He,et)=>{const Pt=Ze();if(Ie&&Math.abs(Pt.y-He.y)>xe)return{bearingDelta:s.cn(new s.P(He.x,et.y),et,Pt)};let wt=(et.x-He.x)*De;return Ie&&et.y<Pt.y&&(wt=-wt),{bearingDelta:wt}},moveStateManager:Ge,enable:ve,assignEvents:Lo})})(r,U),W=(function({enable:ve,clickTolerance:Ae,pitchDegreesPerPixelMoved:Ie=-.5}){const xe=new oc({checkCorrectEvent:De=>j.mouseButton(De)===0&&De.ctrlKey||j.mouseButton(De)===2});return new vi({clickTolerance:Ae,move:(De,Ze)=>({pitchDelta:(Ze.y-De.y)*Ie}),moveStateManager:xe,enable:ve,assignEvents:Lo})})(r),X=(function({enable:ve,clickTolerance:Ae,rollDegreesPerPixelMoved:Ie=.3},xe){const De=new oc({checkCorrectEvent:Ze=>j.mouseButton(Ze)===2&&Ze.ctrlKey});return new vi({clickTolerance:Ae,move:(Ze,Ge)=>{const He=xe();let et=(Ge.x-Ze.x)*Ie;return Ge.y<He.y&&(et=-et),{rollDelta:et}},moveStateManager:De,enable:ve,assignEvents:Lo})})(r,U);c.dragRotate=new ah(r,H,W,X),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",W,["mouseRotate","mouseRoll"]),this._add("mouseRoll",X,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const ne=(function({enable:ve,clickTolerance:Ae}){const Ie=new oc({checkCorrectEvent:xe=>j.mouseButton(xe)===0&&!xe.ctrlKey});return new vi({clickTolerance:Ae,move:(xe,De)=>({around:De,panDelta:De.sub(xe)}),activateOnStart:!0,moveStateManager:Ie,enable:ve,assignEvents:Lo})})(r),he=new ll(r,c);c.dragPan=new cu(m,ne,he),this._add("mousePan",ne),this._add("touchPan",he,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const pe=new Ya,me=new Ki;c.touchZoomRotate=new oh(m,me,pe,R),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const ye=c.scrollZoom=new yn(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ye,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const we=c.keyboard=new Ar(c);this._add("keyboard",we),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new xs(c))}_add(r,c,m){this._handlers.push({handlerName:r,handler:c,allowed:m}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!hu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,m){for(const v in r)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const m of r)this._el.contains(m.target)&&c.push(m);return c}mergeHandlerResult(r,c,m,v,b){if(!m)return;s.e(r,m);const T={handlerName:v,originalEvent:m.originalEvent||b};m.zoomDelta!==void 0&&(c.zoom=T),m.panDelta!==void 0&&(c.drag=T),m.rollDelta!==void 0&&(c.roll=T),m.pitchDelta!==void 0&&(c.pitch=T),m.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},m={};for(const[v,b,T]of this._changes)v.panDelta&&(r.panDelta=(r.panDelta||new s.P(0,0))._add(v.panDelta)),v.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(r.rollDelta=(r.rollDelta||0)+v.rollDelta),v.around!==void 0&&(r.around=v.around),v.pinchAround!==void 0&&(r.pinchAround=v.pinchAround),v.noInertia&&(r.noInertia=v.noInertia),s.e(c,b),s.e(m,T);this._updateMapTransform(r,c,m),this._changes=[]}_updateMapTransform(r,c,m){const v=this._map,b=v._getTransformForUpdate(),T=v.terrain;if(!(Gr(r)||T&&this._terrainMovement))return this._fireEvents(c,m,!0);v._stop(!0);let{panDelta:O,zoomDelta:R,bearingDelta:L,pitchDelta:U,rollDelta:H,around:W,pinchAround:X}=r;X!==void 0&&(W=X),W=W||v.transform.centerPoint,T&&!b.isPointOnMapSurface(W)&&(W=b.centerPoint);const ne={panDelta:O,zoomDelta:R,rollDelta:H,pitchDelta:U,bearingDelta:L,around:W};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(W)&&(W=b.centerPoint);const he=W.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(O?W.sub(O):W);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,b),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?b.setCenter(b.screenPointToLocation(b.centerPoint.sub(O))):this._map.cameraHelper.handleMapControlsPan(ne,b,he):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ne,b,he))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,b),this._map.cameraHelper.handleMapControlsPan(ne,b,he)),v._applyUpdatedTransform(b),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,m,!0)}_fireEvents(r,c,m){const v=hu(this._eventsInProgress),b=hu(r),T={};for(const H in r){const{originalEvent:W}=r[H];this._eventsInProgress[H]||(T[`${H}start`]=W),this._eventsInProgress[H]=r[H]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const H in T)this._fireEvent(H,T[H]);b&&this._fireEvent("move",b.originalEvent);for(const H in r){const{originalEvent:W}=r[H];this._fireEvent(H,W)}const O={};let R;for(const H in this._eventsInProgress){const{handlerName:W,originalEvent:X}=this._eventsInProgress[H];this._handlersById[W].isActive()||(delete this._eventsInProgress[H],R=c[W]||X,O[`${H}end`]=R)}for(const H in O)this._fireEvent(H,O[H]);const L=hu(this._eventsInProgress),U=(v||b)&&!L;if(U&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const H=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&H.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(H)}if(m&&U){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!H||!H.essential&&D.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:R})),W(this._map.getBearing())&&this._map.resetNorth()):(W(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new s.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((r=>{delete this._frameId,this.handleEvent(new da("renderFrame",{timeStamp:r})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ss extends s.E{constructor(r,c,m){super(),this._renderFrameCallback=()=>{const v=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=m.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new s.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,m){return r=s.P.convert(r).mult(-1),this.panTo(this.transform.center,s.e({offset:r},c),m)}panTo(r,c,m){return this.easeTo(s.e({center:r},c),m)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,m){return this.easeTo(s.e({zoom:r},c),m)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new s.l("movestart",c)).fire(new s.l("move",c)).fire(new s.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,m){return this.easeTo(s.e({bearing:r},c),m)}resetNorth(r,c){return this.rotateTo(0,s.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=dr.convert(r).adjustAntiMeridian();const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),m,c)}_cameraForBoxAndBearing(r,c,m,v){const b={top:0,bottom:0,right:0,left:0};if(typeof(v=s.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const L=v.padding;v.padding={top:L,bottom:L,right:L,left:L}}const T=s.e(b,v.padding);v.padding=T;const O=this.transform,R=new dr(r,c);return this.cameraHelper.cameraForBoxAndBearing(v,T,R,m,O)}fitBounds(r,c,m){return this._fitInternal(this.cameraForBounds(r,c),c,m)}fitScreenCoordinates(r,c,m,v,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(r)),this.transform.screenPointToLocation(s.P.convert(c)),m,v),v,b)}_fitInternal(r,c,m){return r?(delete(c=s.e(r,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(r,c){this.stop();const m=this._getTransformForUpdate();let v=!1,b=!1,T=!1;const O=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,r);const R=m.zoom!==O;return"elevation"in r&&m.elevation!==+r.elevation&&m.setElevation(+r.elevation),"bearing"in r&&m.bearing!==+r.bearing&&(v=!0,m.setBearing(+r.bearing)),"pitch"in r&&m.pitch!==+r.pitch&&(b=!0,m.setPitch(+r.pitch)),"roll"in r&&m.roll!==+r.roll&&(T=!0,m.setRoll(+r.roll)),r.padding==null||m.isPaddingEqual(r.padding)||m.setPadding(r.padding),this._applyUpdatedTransform(m),this.fire(new s.l("movestart",c)).fire(new s.l("move",c)),R&&this.fire(new s.l("zoomstart",c)).fire(new s.l("zoom",c)).fire(new s.l("zoomend",c)),v&&this.fire(new s.l("rotatestart",c)).fire(new s.l("rotate",c)).fire(new s.l("rotateend",c)),b&&this.fire(new s.l("pitchstart",c)).fire(new s.l("pitch",c)).fire(new s.l("pitchend",c)),T&&this.fire(new s.l("rollstart",c)).fire(new s.l("roll",c)).fire(new s.l("rollend",c)),this.fire(new s.l("moveend",c))}calculateCameraOptionsFromTo(r,c,m,v=0){const b=s.a1.fromLngLat(r,c),T=s.a1.fromLngLat(m,v),O=T.x-b.x,R=T.y-b.y,L=T.z-b.z,U=Math.hypot(O,R,L);if(U===0)throw new Error("Can't calculate camera options with same From and To");const H=Math.hypot(O,R),W=s.ak(this.transform.cameraToCenterDistance/U/this.transform.tileSize),X=180*Math.atan2(O,-R)/Math.PI;let ne=180*Math.acos(H/U)/Math.PI;return ne=L<0?90-ne:90+ne,{center:T.toLngLat(),elevation:v,zoom:W,pitch:ne,bearing:X}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,m,v,b){const T=this.transform.calculateCenterFromCameraLngLatAlt(r,c,m,v);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:m,pitch:v,roll:b}}easeTo(r,c){this._stop(!1,r.easeId),((r=s.e({offset:[0,0],duration:500,easing:s.co},r)).animate===!1||!r.essential&&D.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),v=this.getBearing(),b=m.pitch,T=m.roll,O="bearing"in r?this._normalizeBearing(r.bearing,v):v,R="pitch"in r?+r.pitch:b,L="roll"in r?this._normalizeBearing(r.roll,T):T,U="padding"in r?r.padding:m.padding,H=s.P.convert(r.offset);let W,X;r.around&&(W=s.S.convert(r.around),X=m.locationToScreenPoint(W));const ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},he=this.cameraHelper.handleEaseTo(m,{bearing:O,pitch:R,roll:L,padding:U,around:W,aroundPoint:X,offsetAsPoint:H,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||v!==O,this._pitching=this._pitching||R!==b,this._rolling=this._rolling||L!==T,this._padding=!m.isPaddingEqual(U),this._zooming=this._zooming||he.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,ne),this.terrain&&this._prepareElevation(he.elevationCenter),this._ease((pe=>{he.easeFunc(pe),this.terrain&&!r.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(m),this._fireMoveEvents(c)}),(pe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,pe)}),r),this}_prepareEase(r,c,m={}){this._moving=!0,c||m.moving||this.fire(new s.l("movestart",r)),this._zooming&&!m.zooming&&this.fire(new s.l("zoomstart",r)),this._rotating&&!m.rotating&&this.fire(new s.l("rotatestart",r)),this._pitching&&!m.pitching&&this.fire(new s.l("pitchstart",r)),this._rolling&&!m.rolling&&this.fire(new s.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(m-(c-(m*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(s.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),m=r.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(m<v){const b=this.calculateCameraOptionsFromTo(c,v,r.center,r.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push((v=>this._elevateCameraIfInsideTerrain(v))),this.transformCameraUpdate&&c.push((v=>this.transformCameraUpdate(v))),!c.length)return;const m=r.clone();for(const v of c){const b=m.clone(),{center:T,zoom:O,roll:R,pitch:L,bearing:U,elevation:H}=v(b);T&&b.setCenter(T),H!==void 0&&b.setElevation(H),O!==void 0&&b.setZoom(O),R!==void 0&&b.setRoll(R),L!==void 0&&b.setPitch(L),U!==void 0&&b.setBearing(U),m.apply(b)}this.transform.apply(m)}_fireMoveEvents(r){this.fire(new s.l("move",r)),this._zooming&&this.fire(new s.l("zoom",r)),this._rotating&&this.fire(new s.l("rotate",r)),this._pitching&&this.fire(new s.l("pitch",r)),this._rolling&&this.fire(new s.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,v=this._rotating,b=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new s.l("zoomend",r)),v&&this.fire(new s.l("rotateend",r)),b&&this.fire(new s.l("pitchend",r)),T&&this.fire(new s.l("rollend",r)),this.fire(new s.l("moveend",r))}flyTo(r,c){if(!r.essential&&D.prefersReducedMotion){const et=s.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(et,c)}this.stop(),r=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.co},r);const m=this._getTransformForUpdate(),v=m.bearing,b=m.pitch,T=m.roll,O=m.padding,R="bearing"in r?this._normalizeBearing(r.bearing,v):v,L="pitch"in r?+r.pitch:b,U="roll"in r?this._normalizeBearing(r.roll,T):T,H="padding"in r?r.padding:m.padding,W=s.P.convert(r.offset);let X=m.centerPoint.add(W);const ne=m.screenPointToLocation(X),he=this.cameraHelper.handleFlyTo(m,{bearing:R,pitch:L,roll:U,padding:H,locationAtOffset:ne,offsetAsPoint:W,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let pe=r.curve;const me=Math.max(m.width,m.height),ye=me/he.scaleOfZoom,we=he.pixelPathLength;typeof he.scaleOfMinZoom=="number"&&(pe=Math.sqrt(me/he.scaleOfMinZoom/we*2));const ve=pe*pe;function Ae(et){const Pt=(ye*ye-me*me+(et?-1:1)*ve*ve*we*we)/(2*(et?ye:me)*ve*we);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function Ie(et){return(Math.exp(et)-Math.exp(-et))/2}function xe(et){return(Math.exp(et)+Math.exp(-et))/2}const De=Ae(!1);let Ze=function(et){return xe(De)/xe(De+pe*et)},Ge=function(et){return me*((xe(De)*(Ie(Pt=De+pe*et)/xe(Pt))-Ie(De))/ve)/we;var Pt},He=(Ae(!0)-De)/pe;if(Math.abs(we)<2e-6||!isFinite(He)){if(Math.abs(me-ye)<1e-6)return this.easeTo(r,c);const et=ye<me?-1:1;He=Math.abs(Math.log(ye/me))/pe,Ge=()=>0,Ze=Pt=>Math.exp(et*pe*Pt)}return r.duration="duration"in r?+r.duration:1e3*He/("screenSpeed"in r?+r.screenSpeed/pe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=v!==R,this._pitching=L!==b,this._rolling=U!==T,this._padding=!m.isPaddingEqual(H),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(he.targetCenter),this._ease((et=>{const Pt=et*He,wt=1/Ze(Pt),dt=Ge(Pt);this._rotating&&m.setBearing(s.C.number(v,R,et)),this._pitching&&m.setPitch(s.C.number(b,L,et)),this._rolling&&m.setRoll(s.C.number(T,U,et)),this._padding&&(m.interpolatePadding(O,H,et),X=m.centerPoint.add(W)),he.easeFunc(et,wt,dt,X),this.terrain&&!r.freezeElevation&&this._updateElevation(et),this._applyUpdatedTransform(m),this._fireMoveEvents(c)}),(()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,c)}return r||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(r,c,m){m.animate===!1||m.duration===0?(r(1),c()):(this._easeStart=D.now(),this._easeOptions=m,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=s.aO(r,-180,180);const m=Math.abs(r-c);return Math.abs(r-360-c)<m&&(r-=360),Math.abs(r+360-c)<m&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(s.S.convert(r),this.transform.tileZoom):null}}const cl={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class sh{constructor(r=cl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=j.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=j.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const m=this._map._getUIString(`AttributionControl.${c}`);r.title=m,r.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map((v=>typeof v!="string"?"":v))):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.sourceCaches;for(const v in c){const b=c[v];if(b.used||b.usedForTerrain){const T=b.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter((v=>String(v).trim())),r.sort(((v,b)=>v.length-b.length)),r=r.filter(((v,b)=>{for(let T=b+1;T<r.length;T++)if(r[T].indexOf(v)>=0)return!1;return!0}));const m=r.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,r.length?(this._innerContainer.innerHTML=j.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class lh{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const m=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=j.create("div","maplibregl-ctrl");const c=j.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){j.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ul{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===r)return void(v.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var pf=s.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class fa extends s.E{constructor(r){super(),this._lastTilesetChange=D.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const m={};for(const v of Be(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))m[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),s.bY(v.terrainRttPosMatrix32f,0,s.$,s.$,0,0,1),this._tiles[v.key]=new Co(v,this.tileSize),this._lastTilesetChange=D.now());for(const v in this._tiles)m[v]||delete this._tiles[v]}freeRtt(r){for(const c in this._tiles){const m=this._tiles[c];(!r||m.tileID.equals(r)||m.tileID.isChildOf(r)||r.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((r=>this.getTileByID(r)))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID,b=r.clone(),T=s.ba();if(v.canonical.equals(r.canonical))s.bY(T,0,s.$,s.$,0,0,1);else if(v.canonical.isChildOf(r.canonical)){const O=v.canonical.z-r.canonical.z,R=v.canonical.x-(v.canonical.x>>O<<O),L=v.canonical.y-(v.canonical.y>>O<<O),U=s.$>>O;s.bY(T,0,U,U,0,0,1),s.M(T,T,[-R*U,-L*U,0])}else{if(!r.canonical.isChildOf(v.canonical))continue;{const O=r.canonical.z-v.canonical.z,R=r.canonical.x-(r.canonical.x>>O<<O),L=r.canonical.y-(r.canonical.y>>O<<O),U=s.$>>O;s.bY(T,0,s.$,s.$,0,0,1),s.M(T,T,[R*U,L*U,0]),s.N(T,T,[1/2**O,1/2**O,0])}}b.terrainRttPosMatrix32f=new Float32Array(T),c[m]=b}return c}_getTerrainCoordsForTileRanges(r,c){const m={};for(const v of this._renderableTilesKeys){const b=this._tiles[v].tileID;if(!this._isWithinTileRanges(b,c))continue;const T=r.clone(),O=s.ba();if(b.canonical.z===r.canonical.z){const R=r.canonical.x-b.canonical.x,L=r.canonical.y-b.canonical.y;s.bY(O,0,s.$,s.$,0,0,1),s.M(O,O,[R*s.$,L*s.$,0])}else if(b.canonical.z>r.canonical.z){const R=b.canonical.z-r.canonical.z,L=b.canonical.x-(b.canonical.x>>R<<R),U=b.canonical.y-(b.canonical.y>>R<<R),H=r.canonical.x-(b.canonical.x>>R),W=r.canonical.y-(b.canonical.y>>R),X=s.$>>R;s.bY(O,0,X,X,0,0,1),s.M(O,O,[-L*X+H*s.$,-U*X+W*s.$,0])}else{const R=r.canonical.z-b.canonical.z,L=r.canonical.x-(r.canonical.x>>R<<R),U=r.canonical.y-(r.canonical.y>>R<<R),H=(r.canonical.x>>R)-b.canonical.x,W=(r.canonical.y>>R)-b.canonical.y,X=s.$<<R;s.bY(O,0,X,X,0,0,1),s.M(O,O,[L*s.$+H*X,U*s.$+W*X,0])}T.terrainRttPosMatrix32f=new Float32Array(O),m[v]=T}return m}getSourceTile(r,c){const m=this.sourceCache._source;let v=r.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(v).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!b||!b.dem)&&c)for(;v>=m.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(r.scaledTo(v--).key);return b}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class hl{constructor(r,c,m){this._meshCache={},this.painter=r,this.sourceCache=new fa(c),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,m,v=s.$){var b;if(!(c>=0&&c<v&&m>=0&&m<v))return 0;const T=this.getTerrainData(r),O=(b=T.tile)===null||b===void 0?void 0:b.dem;if(!O)return 0;const R=s.cs([],[c/v*s.$,m/v*s.$],T.u_terrain_matrix),L=[R[0]*O.dim,R[1]*O.dim],U=Math.floor(L[0]),H=Math.floor(L[1]),W=L[0]-U,X=L[1]-H;return O.get(U,H)*(1-W)*(1-X)+O.get(U+1,H)*W*(1-X)+O.get(U,H+1)*(1-W)*X+O.get(U+1,H+1)*W*X}getElevationForLngLatZoom(r,c){if(!s.ct(c,r.wrap()))return 0;const{tileID:m,mercatorX:v,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(m,v%s.$,b%s.$,s.$)}getElevation(r,c,m,v=s.$){return this.getDEMElevation(r,c,m,v)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const v=this.painter.context,b=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(v,b,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(v,new s.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ag([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new s.T(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const m=c&&c+c.tileID.key+r.key;if(m&&!this._demMatrixCache[m]){const v=this.sourceCache.sourceCache._source.maxzoom;let b=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=v?b=r.canonical.z-v:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>b<<b),O=r.canonical.y-(r.canonical.y>>b<<b),R=s.cu(new Float64Array(16),[1/(s.$<<b),1/(s.$<<b),0]);s.M(R,R,[T*s.$,O*s.$,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,m=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(m,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,T=0;b<this._coordsTextureSize;b++)for(let O=0;O<this._coordsTextureSize;O++,T+=4)c[T+0]=255&O,c[T+1]=255&b,c[T+2]=O>>8<<4|b>>8,c[T+3]=0;const m=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new s.T(r,m,r.gl.RGBA,{premultiply:!1});return v.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),m=this.painter.context,v=m.gl,b=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(b,O-T-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null);const R=c[0]+(c[2]>>4<<8),L=c[1]+((15&c[2])<<8),U=this.coordsIndex[255-c[3]],H=U&&this.sourceCache.getTileByID(U);if(!H)return null;const W=this._coordsTextureSize,X=(1<<H.tileID.canonical.z)*W;return new s.a1((H.tileID.canonical.x*W+R)/X+H.tileID.wrap,(H.tileID.canonical.y*W+L)/X,this.getElevation(H.tileID,R,L,W))}depthAtPoint(r){const c=new Uint8Array(4),m=this.painter.context,v=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const m=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,v=m&&r.canonical.y===0,b=m&&r.canonical.y===(1<<r.canonical.z)-1,T=`m_${v?"n":""}_${b?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const O=this.painter.context,R=new s.cv,L=new s.aN,U=this.meshSize,H=s.$/U,W=U*U;for(let xe=0;xe<=U;xe++)for(let De=0;De<=U;De++)R.emplaceBack(De*H,xe*H,0);for(let xe=0;xe<W;xe+=U+1)for(let De=0;De<U;De++)L.emplaceBack(De+xe,U+De+xe+1,U+De+xe+2),L.emplaceBack(De+xe,U+De+xe+2,De+xe+1);const X=R.length,ne=X+(U+1),he=(U+1)*U,pe=v?s.bh:0,me=v?0:1,ye=b?s.bi:s.$,we=b?0:1;for(let xe=0;xe<=U;xe++)R.emplaceBack(xe*H,pe,me);for(let xe=0;xe<=U;xe++)R.emplaceBack(xe*H,ye,we);for(let xe=0;xe<U;xe++)L.emplaceBack(he+xe,ne+xe,ne+xe+1),L.emplaceBack(he+xe,ne+xe+1,he+xe+1),L.emplaceBack(0+xe,X+xe+1,X+xe),L.emplaceBack(0+xe,0+xe+1,X+xe+1);const ve=R.length,Ae=ve+2*(U+1);for(const xe of[0,1])for(let De=0;De<=U;De++)for(const Ze of[0,1])R.emplaceBack(xe*s.$,De*H,Ze);for(let xe=0;xe<2*U;xe+=2)L.emplaceBack(ve+xe,ve+xe+1,ve+xe+3),L.emplaceBack(ve+xe,ve+xe+3,ve+xe+2),L.emplaceBack(Ae+xe,Ae+xe+3,Ae+xe+1),L.emplaceBack(Ae+xe,Ae+xe+2,Ae+xe+3);const Ie=new Mo(O.createVertexBuffer(R,pf.members),O.createIndexBuffer(L),s.aM.simpleSegment(0,0,R.length,L.length));return this._meshCache[T]=Ie,Ie}getMeshFrameDelta(r){return 2*Math.PI*s.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var m;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(m=this.getMinMaxElevation(v).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,m={minElevation:null,maxElevation:null};return c&&c.dem&&(m.minElevation=c.dem.min*this.exaggeration,m.maxElevation=c.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(r,c){const m=s.a1.fromLngLat(r.wrap()),v=(1<<c)*s.$,b=m.x*v,T=m.y*v,O=Math.floor(b/s.$),R=Math.floor(T/s.$);return{tileID:new s.Z(c,0,c,O,R),mercatorX:b,mercatorY:T}}}class jt{constructor(r,c,m){this._context=r,this._size=c,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(m.texture),{id:r,fbo:c,texture:m,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>r.id!==c)),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((r=>!r.inUse))===!1}}const Vt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class sc{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new jt(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter((m=>!r._layers[m].isHidden(c))),this._coordsAscending={};for(const m in r.sourceCaches){this._coordsAscending[m]={};const v=r.sourceCaches[m].getVisibleCoordinates(),b=r.sourceCaches[m].getSource(),T=b instanceof Xn?b.terrainTileRanges:null;for(const O of v){const R=this.terrain.sourceCache.getTerrainCoords(O,T);for(const L in R)this._coordsAscending[m][L]||(this._coordsAscending[m][L]=[]),this._coordsAscending[m][L].push(R[L])}}this._coordsAscendingStr={};for(const m of r._order){const v=r._layers[m],b=v.source;if(Vt[v.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const T in this._coordsAscending[b])this._coordsAscendingStr[b][T]=this._coordsAscending[b][T].map((O=>O.key)).sort().join()}}for(const m of this._renderableTiles)for(const v in this._coordsAscendingStr){const b=this._coordsAscendingStr[v][m.tileID.key];b&&b!==m.rttCoords[v]&&(m.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),v=r.type,b=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Vt[v]&&(this._prevType&&Vt[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(r.id),!T))return!0;if(Vt[this._prevType]||Vt[v]&&T){this._prevType=v;const O=this._stacks.length-1,R=this._stacks[O]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(Tn(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[O]){const H=this.pool.getObjectForId(L.rtt[O].id);if(H.stamp===L.rtt[O].stamp){this.pool.useObject(H);continue}}const U=this.pool.getOrCreateFreeObject();this.pool.useObject(U),this.pool.stampObject(U),L.rtt[O]={id:U.id,stamp:U.stamp},b.context.bindFramebuffer.set(U.fbo.framebuffer),b.context.clear({color:s.bf.transparent,stencil:0}),b.currentStencilSource=void 0;for(let H=0;H<R.length;H++){const W=b.style._layers[R[H]],X=W.source?this._coordsAscending[W.source][L.tileID.key]:[L.tileID];b.context.viewport.set([0,0,U.fbo.width,U.fbo.height]),b._renderTileClippingMasks(W,X,!0),b.renderLayer(b,b.style.sourceCaches[W.source],W,X,m),W.source&&(L.rttCoords[W.source]=this._coordsAscendingStr[W.source][L.tileID.key])}}return Tn(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),Vt[v]}return!1}}const du={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},lc=P,jn={hash:!1,interactive:!0,bearingSnap:7,attributionControl:cl,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},pa={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class di{constructor(r,c,m=!1){this.mousedown=b=>{this.startMove(b,j.mousePos(this.element,b)),j.addEventListener(window,"mousemove",this.mousemove),j.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,j.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),j.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const v=new ws;this._rotatePitchHandler=new vi({clickTolerance:3,move:(b,T)=>{const O=c.getBoundingClientRect(),R=new s.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:s.cn(new s.P(b.x,T.y),T,R),pitchDelta:m?-.5*(T.y-b.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=r,j.addEventListener(c,"mousedown",this.mousedown),j.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHandler.dragStart(r,c),j.disableDrag()}move(r,c){const m=this.map,{bearingDelta:v,pitchDelta:b}=this._rotatePitchHandler.dragMove(r,c)||{};v&&m.setBearing(m.getBearing()+v),b&&m.setPitch(m.getPitch()+b)}off(){const r=this.element;j.removeEventListener(r,"mousedown",this.mousedown),j.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend),j.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){j.enableDrag(),j.removeEventListener(window,"mousemove",this.mousemove),j.removeEventListener(window,"mouseup",this.mouseup),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend)}}let No;function dl(_,r,c,m=!1){if(m||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return _?.wrap();const v=new s.S(_.lng,_.lat);if(_=new s.S(_.lng,_.lat),r){const b=new s.S(_.lng-360,_.lat),T=new s.S(_.lng+360,_.lat),O=c.locationToScreenPoint(_).distSqr(r);c.locationToScreenPoint(b).distSqr(r)<O?_=b:c.locationToScreenPoint(T).distSqr(r)<O&&(_=T)}for(;Math.abs(_.lng-c.center.lng)>180;){const b=c.locationToScreenPoint(_);if(b.x>=0&&b.y>=0&&b.x<=c.width&&b.y<=c.height)break;_.lng>c.center.lng?_.lng-=360:_.lng+=360}return _.lng!==v.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(_))?_:v}const Ur={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Jr(_,r,c){const m=_.classList;for(const v in Ur)m.remove(`maplibregl-${c}-anchor-${v}`);m.add(`maplibregl-${c}-anchor-${r}`)}class cc extends s.E{constructor(r){if(super(),this._onKeyPress=c=>{const m=c.code,v=c.charCode||c.keyCode;m!=="Space"&&m!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{const m=c.originalEvent.target,v=this._element;this._popup&&(m===v||v.contains(m))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=dl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,`${Ur[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${v}`),D.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=s.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div");const c=j.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${m}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);const b=j.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const T=j.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const O=j.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of R){const ye=j.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",me.rx),ye.setAttributeNS(null,"ry",me.ry),O.appendChild(ye)}const L=j.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const U=j.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(U);const H=j.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const W=j.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(W);const X=j.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(6.0, 7.0)"),X.setAttributeNS(null,"fill","#FFFFFF");const ne=j.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const he=j.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");const pe=j.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),ne.appendChild(he),ne.appendChild(pe),T.appendChild(O),T.appendChild(L),T.appendChild(H),T.appendChild(X),T.appendChild(ne),c.appendChild(T),c.setAttributeNS(null,"height",m*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=s.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),Jr(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=s.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const v=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,m;const v=(c=this._map)===null||c===void 0?void 0:c.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!v||b){const X=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==X&&(this._element.style.opacity=X))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const T=this._map,O=T.terrain.depthAtPoint(this._pos),R=T.terrain.getElevationForLngLatZoom(this._lngLat,T.transform.tileZoom);if(T.transform.lngLatToCameraDepth(this._lngLat,R)-O<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/T.transform.pixelsPerMeter,U=Math.sin(T.getPitch()*Math.PI/180)*L,H=T.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),W=T.transform.lngLatToCameraDepth(this._lngLat,R+U)-H>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&W&&this._popup.remove(),this._element.style.opacity=W?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=s.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const uc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ji=0,Ji=!1;const hc={maxWidth:100,unit:"metric"};function fu(_,r,c){const m=c&&c.maxWidth||100,v=_._container.clientHeight/2,b=_._container.clientWidth/2,T=_.unproject([b-m/2,v]),O=_.unproject([b+m/2,v]),R=Math.round(_.project(O).x-_.project(T).x),L=Math.min(m,R,_._container.clientWidth),U=T.distanceTo(O);if(c&&c.unit==="imperial"){const H=3.2808*U;H>5280?Oa(r,L,H/5280,_._getUIString("ScaleControl.Miles")):Oa(r,L,H,_._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Oa(r,L,U/1852,_._getUIString("ScaleControl.NauticalMiles")):U>=1e3?Oa(r,L,U/1e3,_._getUIString("ScaleControl.Kilometers")):Oa(r,L,U,_._getUIString("ScaleControl.Meters"))}function Oa(_,r,c,m){const v=(function(b){const T=Math.pow(10,`${Math.floor(b)}`.length-1);let O=b/T;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(R){const L=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*L)/L})(O),T*O})(c);_.style.width=r*(v/c)+"px",_.innerHTML=`${v}&nbsp;${m}`}const ch={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},fl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ma(_){if(_){if(typeof _=="number"){const r=Math.round(Math.abs(_)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,_),"top-left":new s.P(r,r),"top-right":new s.P(-r,r),bottom:new s.P(0,-_),"bottom-left":new s.P(r,-r),"bottom-right":new s.P(-r,-r),left:new s.P(_,0),right:new s.P(-_,0)}}if(_ instanceof s.P||Array.isArray(_)){const r=s.P.convert(_);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:s.P.convert(_.center||[0,0]),top:s.P.convert(_.top||[0,0]),"top-left":s.P.convert(_["top-left"]||[0,0]),"top-right":s.P.convert(_["top-right"]||[0,0]),bottom:s.P.convert(_.bottom||[0,0]),"bottom-left":s.P.convert(_["bottom-left"]||[0,0]),"bottom-right":s.P.convert(_["bottom-right"]||[0,0]),left:s.P.convert(_.left||[0,0]),right:s.P.convert(_.right||[0,0])}}return ma(new s.P(0,0))}const pl=P;p.AJAXError=s.cz,p.Event=s.l,p.Evented=s.E,p.LngLat=s.S,p.MercatorCoordinate=s.a1,p.Point=s.P,p.addProtocol=s.cA,p.config=s.a,p.removeProtocol=s.cB,p.AttributionControl=sh,p.BoxZoomHandler=yi,p.CanvasSource=On,p.CooperativeGesturesHandler=uu,p.DoubleClickZoomHandler=Ia,p.DragPanHandler=cu,p.DragRotateHandler=ah,p.EdgeInsets=uo,p.FullscreenControl=class extends s.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){j.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=j.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);j.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=qn,p.GeolocateControl=class extends s.E{constructor(_){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new s.S(r.coords.longitude,r.coords.latitude),m=r.coords.accuracy,v=this._map.getBearing(),b=s.e({bearing:v},this.options.fitBoundsOptions),T=dr.fromLngLat(c,m);this._map.fitBounds(T,b,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new s.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ji)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this._geolocateButton=j.create("button","maplibregl-ctrl-geolocate",this._container),j.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new cc({element:this._dotElement}),this._circleElement=j.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new cc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const m=c?.[0]instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))}))}},this.options=s.e({},uc,_)}onAdd(_){return this._map=_,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return s._(this,arguments,void 0,(function*(r=!1){if(No!==void 0&&!r)return No;if(window.navigator.permissions===void 0)return No=!!window.navigator.geolocation,No;try{No=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{No=!!window.navigator.geolocation}return No}))})().then((r=>this._finishSetupUI(r))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,ji=0,Ji=!1}_isOutOfMapMaxBounds(_){const r=this._map.getMaxBounds(),c=_.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const _=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&_))return;const r=this._map.project(_),c=this._map.unproject([r.x+100,r.y]),m=_.distanceTo(c)/100,v=2*this._accuracy/m;this._circleElement.style.width=`${v.toFixed(2)}px`,this._circleElement.style.height=`${v.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ji--,Ji=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ji++,ji>1?(_={maximumAge:6e5,timeout:0},Ji=!0):(_=this.options.positionOptions,Ji=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;const r=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=j.create("button","maplibregl-ctrl-globe",this._container),j.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},p.Hash=rl,p.ImageSource=Xn,p.KeyboardHandler=Ar,p.LngLatBounds=dr,p.LogoControl=lh,p.Map=class extends Ss{constructor(_){var r,c;s.cw.mark(s.cx.create);const m=Object.assign(Object.assign(Object.assign({},jn),_),{canvasContextAttributes:Object.assign(Object.assign({},jn.canvasContextAttributes),_.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new tn,b=new hi;if(m.minZoom!==void 0&&v.setMinZoom(m.minZoom),m.maxZoom!==void 0&&v.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&v.setMinPitch(m.minPitch),m.maxPitch!==void 0&&v.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&v.setRenderWorldCopies(m.renderWorldCopies),super(v,b,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ul,this._controls=[],this._mapId=s.a7(),this._contextLost=O=>{O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},du),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this.transformCameraUpdate=m.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=oe.addThrottleControl((()=>this.isMoving())),this._requestManager=new Y(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let O=!1;const R=iu((L=>{this._trackResize&&!this._removed&&(this.resize(L),this.redraw())}),50);this._resizeObserver=new ResizeObserver((L=>{O?R(L):O=!0})),this._resizeObserver.observe(this._container)}this.handlers=new lm(this,m),this._hash=m.hash&&new rl(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,s.e({},m.fitBoundsOptions,{duration:0}))));const T=typeof m.style=="string"||((c=(r=m.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new sh(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new lh,m.logoPosition),this.on("style.load",(()=>{if(T||this._resizeTransform(),this.transform.unmodified){const O=s.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}})),this.on("data",(O=>{this._update(O.dataType==="style"),this.fire(new s.l(`${O.dataType}data`,O))})),this.on("dataloading",(O=>{this.fire(new s.l(`${O.dataType}dataloading`,O))})),this.on("dataabort",(O=>{this.fire(new s.l("sourcedataabort",O))}))}_getMapId(){return this._mapId}setGlobalStateProperty(_,r){return this.style.setGlobalStateProperty(_,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(_,r){if(r===void 0&&(r=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=_.onAdd(this);this._controls.push(_);const m=this._controlPositions[r];return r.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(_);return r>-1&&this._controls.splice(r,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}coveringTiles(_){return Be(this.transform,_)}calculateCameraOptionsFromTo(_,r,c,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,r,c,m)}resize(_,r=!0){const[c,m]=this._containerDimensions(),v=this._getClampedPixelRatio(c,m);if(this._resizeCanvas(c,m,v),this.painter.resize(c,m,v),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const O=this._getClampedPixelRatio(c,m);this._resizeCanvas(c,m,O),this.painter.resize(c,m,O)}this._resizeTransform(r);const b=!this._moving;return b&&(this.stop(),this.fire(new s.l("movestart",_)).fire(new s.l("move",_))),this.fire(new s.l("resize",_)),b&&this.fire(new s.l("moveend",_)),this}_resizeTransform(_=!0){var r;const[c,m]=this._containerDimensions();this.transform.resize(c,m,_),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,m,_)}_getClampedPixelRatio(_,r){const{0:c,1:m}=this._maxCanvasSize,v=this.getPixelRatio(),b=_*v,T=r*v;return Math.min(b>c?c/b:1,T>m?m/T:1)*v}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(dr.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}project(_){return this.transform.locationToScreenPoint(s.S.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(s.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,r,c){if(_==="mouseenter"||_==="mouseover"){let m=!1;return{layers:r,listener:c,delegates:{mousemove:b=>{const T=r.filter((R=>this.getLayer(R))),O=T.length!==0?this.queryRenderedFeatures(b.point,{layers:T}):[];O.length?m||(m=!0,c.call(this,new Ir(_,this,b.originalEvent,{features:O}))):m=!1},mouseout:()=>{m=!1}}}}if(_==="mouseleave"||_==="mouseout"){let m=!1;return{layers:r,listener:c,delegates:{mousemove:T=>{const O=r.filter((R=>this.getLayer(R)));(O.length!==0?this.queryRenderedFeatures(T.point,{layers:O}):[]).length?m=!0:m&&(m=!1,c.call(this,new Ir(_,this,T.originalEvent)))},mouseout:T=>{m&&(m=!1,c.call(this,new Ir(_,this,T.originalEvent)))}}}}{const m=v=>{const b=r.filter((O=>this.getLayer(O))),T=b.length!==0?this.queryRenderedFeatures(v.point,{layers:b}):[];T.length&&(v.features=T,c.call(this,v),delete v.features)};return{layers:r,listener:c,delegates:{[_]:m}}}}_saveDelegatedListener(_,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(r)}_removeDelegatedListener(_,r,c){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const m=this._delegatedListeners[_];for(let v=0;v<m.length;v++){const b=m[v];if(b.listener===c&&b.layers.length===r.length&&b.layers.every((T=>r.includes(T)))){for(const T in b.delegates)this.off(T,b.delegates[T]);return void m.splice(v,1)}}}on(_,r,c){if(c===void 0)return super.on(_,r);const m=typeof r=="string"?[r]:r,v=this._createDelegatedListener(_,m,c);this._saveDelegatedListener(_,v);for(const b in v.delegates)this.on(b,v.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(_,m,c)}}}once(_,r,c){if(c===void 0)return super.once(_,r);const m=typeof r=="string"?[r]:r,v=this._createDelegatedListener(_,m,c);for(const b in v.delegates){const T=v.delegates[b];v.delegates[b]=(...O)=>{this._removeDelegatedListener(_,m,c),T(...O)}}this._saveDelegatedListener(_,v);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(_,r,c){return c===void 0?super.off(_,r):(this._removeDelegatedListener(_,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(_,r){if(!this.style)return[];let c;const m=_ instanceof s.P||Array.isArray(_),v=m?_:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(m?{}:_)||{},v instanceof s.P||typeof v[0]=="number")c=[s.P.convert(v)];else{const b=s.P.convert(v[0]),T=s.P.convert(v[1]);c=[b,new s.P(T.x,b.y),T,new s.P(b.x,T.y),b]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(_,r){return this.style.querySourceFeatures(_,r)}setStyle(_,r){return(r=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(_,r))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const r=this._locale[_];if(r==null)throw new Error(`Missing UI string '${_}'`);return r}_updateStyle(_,r){var c,m;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(_,r)));const v=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Uh(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,r,v):this.style.loadJSON(_,r,v),this):((m=(c=this.style)===null||c===void 0?void 0:c.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Uh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,r){if(typeof _=="string"){const c=this._requestManager.transformRequest(_,"Style");s.j(c,new AbortController).then((m=>{this._updateDiff(m.data,r)})).catch((m=>{m&&this.fire(new s.k(m))}))}else typeof _=="object"&&this._updateDiff(_,r)}_updateDiff(_,r){try{this.style.setState(_,r)&&this._update(!0)}catch(c){s.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(_,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(_,r){return this._lazyInitEmptyStyle(),this.style.addSource(_,r),this._update(!0)}isSourceLoaded(_){const r=this.style&&this.style.sourceCaches[_];if(r!==void 0)return r.loaded();this.fire(new s.k(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const r=this.style.sourceCaches[_.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const m=this.style._layers[c];m.type==="hillshade"&&m.source===_.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===_.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new hl(this.painter,r,_),this.painter.renderToTexture=new sc(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var m;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=c.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:_})),this}getTerrain(){var _,r;return(r=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const r in _){const c=_[r]._tiles;for(const m in c){const v=c[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,r,c){if(c){const m=this.getSource(c);if(!m)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);m.calculateTileZoom=gt(Math.max(1,_),Math.max(1,r))}else for(const m in this.style.sourceCaches)this.style.sourceCaches[m].getSource().calculateTileZoom=gt(Math.max(1,_),Math.max(1,r));return this._update(!0),this}refreshTiles(_,r){const c=this.style.sourceCaches[_];if(!c)throw new Error(`There is no source cache with ID "${_}", cannot refresh tile`);r===void 0?c.reload(!0):c.refreshTiles(r.map((m=>new s.a4(m.z,m.x,m.y))))}addImage(_,r,c={}){const{pixelRatio:m=1,sdf:v=!1,stretchX:b,stretchY:T,content:O,textFitWidth:R,textFitHeight:L}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||s.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:U,height:H,data:W}=r,X=r;return this.style.addImage(_,{data:new s.R({width:U,height:H},new Uint8Array(W)),pixelRatio:m,stretchX:b,stretchY:T,content:O,textFitWidth:R,textFitHeight:L,sdf:v,version:0,userImage:X}),X.onAdd&&X.onAdd(this,_),this}}{const{width:U,height:H,data:W}=D.getImageData(r);this.style.addImage(_,{data:new s.R({width:U,height:H},W),pixelRatio:m,stretchX:b,stretchY:T,content:O,textFitWidth:R,textFitHeight:L,sdf:v,version:0})}}updateImage(_,r){const c=this.style.getImage(_);if(!c)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=r instanceof HTMLImageElement||s.b(r)?D.getImageData(r):r,{width:v,height:b,data:T}=m;if(v===void 0||b===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||b!==c.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(r instanceof HTMLImageElement||s.b(r));return c.data.replace(T,O),this.style.updateImage(_,c),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return oe.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,r){return this._lazyInitEmptyStyle(),this.style.addLayer(_,r),this._update(!0)}moveLayer(_,r){return this.style.moveLayer(_,r),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,r,c){return this.style.setLayerZoomRange(_,r,c),this._update(!0)}setFilter(_,r,c={}){return this.style.setFilter(_,r,c),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,r,c,m={}){return this.style.setPaintProperty(_,r,c,m),this._update(!0)}getPaintProperty(_,r){return this.style.getPaintProperty(_,r)}setLayoutProperty(_,r,c,m={}){return this.style.setLayoutProperty(_,r,c,m),this._update(!0)}getLayoutProperty(_,r){return this.style.getLayoutProperty(_,r)}setGlyphs(_,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,r,c,(m=>{m||this._update(!0)})),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,r,(c=>{c||this._update(!0)})),this}setLight(_,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,r){return this.style.setFeatureState(_,r),this._update()}removeFeatureState(_,r){return this.style.removeFeatureState(_,r),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,r=0;return this._container&&(_=this._container.clientWidth||400,r=this._container.clientHeight||300),[_,r]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const r=this._canvasContainer=j.create("div","maplibregl-canvas-container",_);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=j.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),m=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],m);const v=this._controlContainer=j.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((T=>{b[T]=j.create("div",`maplibregl-ctrl-${T} `,v)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,r,c){this._canvas.width=Math.floor(c*_),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",(m=>{r={requestedAttributes:_},m&&(r.statusMessage=m.statusMessage,r.type=m.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!c){const m="Failed to initialize WebGL";throw r?(r.message=m,new Error(JSON.stringify(r))):new Error(m)}this.painter=new Ma(c,this.transform),G.testSupport(c)}migrateProjection(_,r){super.migrateProjection(_,r),this.painter.transform=_,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var r,c,m,v,b;const T=this._idleTriggered?this._fadeDuration:0,O=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,W=D.now();this.style.zoomHistory.update(H,W);const X=new s.F(H,{now:W,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ne=X.crossFadingFactor();ne===1&&ne===this._crossFadingFactor||(R=!0,this._crossFadingFactor=ne),this.style.update(X)}const L=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==O;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||L)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,L),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cw.mark(s.cx.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,s.cw.mark(s.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),oe.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),j.remove(this._canvasContainer),j.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cw.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,D.frame(this._frameRequest,(_=>{s.cw.frame(_),this._frameRequest=null;try{this._render(_)}catch(r){if(!s.cy(r)&&!(function(c){return c.message===Qc})(r))throw r}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return lc}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},p.MapMouseEvent=Ir,p.MapTouchEvent=ha,p.MapWheelEvent=oi,p.Marker=cc,p.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),m=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const m=this._map._getUIString(`NavigationControl.${c}`);r.title=m,r.setAttribute("aria-label",m)},this.options=s.e({},pa,_),this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(r=>this._map.zoomIn({},{originalEvent:r}))),j.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(r=>this._map.zoomOut({},{originalEvent:r}))),j.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})})),this._compassIcon=j.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new di(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,r){const c=j.create("button",_,this._container);return c.type="button",c.addEventListener("click",r),c}},p.Popup=class extends s.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=j.create("div","maplibregl-popup",this._map.getContainer()),this._tip=j.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=dl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const v=ma(this.options.offset);if(!m){const T=this._container.offsetWidth,O=this._container.offsetHeight;let R;R=c.y+v.bottom.y<O?["top"]:c.y>this._map.transform.height-O?["bottom"]:[],c.x<T/2?R.push("left"):c.x>this._map.transform.width-T/2&&R.push("right"),m=R.length===0?"bottom":R.join("-")}let b=c.add(v[m]);this.options.subpixelPositioning||(b=b.round()),j.setTransform(this._container,`${Ur[m]} translate(${b.x}px,${b.y}px)`),Jr(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(ch),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=s.S.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const r=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=_;m=c.firstChild,m;)r.appendChild(m);return this.setDOMContent(r)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=j.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(fl);_&&_.focus()}},p.RasterDEMTileSource=vn,p.RasterTileSource=Hr,p.ScaleControl=class{constructor(_){this._onMove=()=>{fu(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,fu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},hc),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=yn,p.Style=Uh,p.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=j.create("button","maplibregl-ctrl-terrain",this._container),j.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){j.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=ka,p.TwoFingersTouchRotateHandler=Ya,p.TwoFingersTouchZoomHandler=Ki,p.TwoFingersTouchZoomRotateHandler=oh,p.VectorTileSource=qr,p.VideoSource=ki,p.addSourceType=(_,r)=>s._(void 0,void 0,void 0,(function*(){if(oa(_))throw new Error(`A source type called "${_}" already exists.`);((c,m)=>{ni[c]=m})(_,r)})),p.clearPrewarmedResources=function(){const _=yt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(ut),yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.createTileMesh=Fl,p.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return oo().getRTLTextPluginStatus()},p.getVersion=function(){return pl},p.getWorkerCount=function(){return Ce.workerCount},p.getWorkerUrl=function(){return s.a.WORKER_URL},p.importScriptInWorkers=function(_){return er().broadcast("IS",_)},p.prewarm=function(){$t().acquire(ut)},p.setMaxParallelImageRequests=function(_){s.a.MAX_PARALLEL_IMAGE_REQUESTS=_},p.setRTLTextPlugin=function(_,r){return oo().setRTLTextPlugin(_,r)},p.setWorkerCount=function(_){Ce.workerCount=_},p.setWorkerUrl=function(_){s.a.WORKER_URL=_}}));var f=n;return f}))})(iv)),iv.exports}var aB=iB();const WT=ln(aB);var R0,HT;function To(){if(HT)return R0;HT=1;var e=Array.isArray;return R0=e,R0}var D0,ZT;function uD(){if(ZT)return D0;ZT=1;var e=typeof zy=="object"&&zy&&zy.Object===Object&&zy;return D0=e,D0}var z0,XT;function Ic(){if(XT)return z0;XT=1;var e=uD(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return z0=n,z0}var j0,KT;function qg(){if(KT)return j0;KT=1;var e=Ic(),t=e.Symbol;return j0=t,j0}var L0,YT;function oB(){if(YT)return L0;YT=1;var e=qg(),t=Object.prototype,n=t.hasOwnProperty,a=t.toString,u=e?e.toStringTag:void 0;function f(p){var s=n.call(p,u),P=p[u];try{p[u]=void 0;var A=!0}catch{}var E=a.call(p);return A&&(s?p[u]=P:delete p[u]),E}return L0=f,L0}var N0,JT;function sB(){if(JT)return N0;JT=1;var e=Object.prototype,t=e.toString;function n(a){return t.call(a)}return N0=n,N0}var B0,QT;function Lu(){if(QT)return B0;QT=1;var e=qg(),t=oB(),n=sB(),a="[object Null]",u="[object Undefined]",f=e?e.toStringTag:void 0;function p(s){return s==null?s===void 0?u:a:f&&f in Object(s)?t(s):n(s)}return B0=p,B0}var F0,eA;function Nu(){if(eA)return F0;eA=1;function e(t){return t!=null&&typeof t=="object"}return F0=e,F0}var $0,tA;function qp(){if(tA)return $0;tA=1;var e=Lu(),t=Nu(),n="[object Symbol]";function a(u){return typeof u=="symbol"||t(u)&&e(u)==n}return $0=a,$0}var U0,rA;function w2(){if(rA)return U0;rA=1;var e=To(),t=qp(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function u(f,p){if(e(f))return!1;var s=typeof f;return s=="number"||s=="symbol"||s=="boolean"||f==null||t(f)?!0:a.test(f)||!n.test(f)||p!=null&&f in Object(p)}return U0=u,U0}var V0,nA;function Rh(){if(nA)return V0;nA=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return V0=e,V0}var q0,iA;function S2(){if(iA)return q0;iA=1;var e=Lu(),t=Rh(),n="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",f="[object Proxy]";function p(s){if(!t(s))return!1;var P=e(s);return P==a||P==u||P==n||P==f}return q0=p,q0}var G0,aA;function lB(){if(aA)return G0;aA=1;var e=Ic(),t=e["__core-js_shared__"];return G0=t,G0}var W0,oA;function cB(){if(oA)return W0;oA=1;var e=lB(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function n(a){return!!t&&t in a}return W0=n,W0}var H0,sA;function hD(){if(sA)return H0;sA=1;var e=Function.prototype,t=e.toString;function n(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return H0=n,H0}var Z0,lA;function uB(){if(lA)return Z0;lA=1;var e=S2(),t=cB(),n=Rh(),a=hD(),u=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,p=Function.prototype,s=Object.prototype,P=p.toString,A=s.hasOwnProperty,E=RegExp("^"+P.call(A).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function M(D){if(!n(D)||t(D))return!1;var j=e(D)?E:f;return j.test(a(D))}return Z0=M,Z0}var X0,cA;function hB(){if(cA)return X0;cA=1;function e(t,n){return t?.[n]}return X0=e,X0}var K0,uA;function Kd(){if(uA)return K0;uA=1;var e=uB(),t=hB();function n(a,u){var f=t(a,u);return e(f)?f:void 0}return K0=n,K0}var Y0,hA;function d_(){if(hA)return Y0;hA=1;var e=Kd(),t=e(Object,"create");return Y0=t,Y0}var J0,dA;function dB(){if(dA)return J0;dA=1;var e=d_();function t(){this.__data__=e?e(null):{},this.size=0}return J0=t,J0}var Q0,fA;function fB(){if(fA)return Q0;fA=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Q0=e,Q0}var ex,pA;function pB(){if(pA)return ex;pA=1;var e=d_(),t="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function u(f){var p=this.__data__;if(e){var s=p[f];return s===t?void 0:s}return a.call(p,f)?p[f]:void 0}return ex=u,ex}var tx,mA;function mB(){if(mA)return tx;mA=1;var e=d_(),t=Object.prototype,n=t.hasOwnProperty;function a(u){var f=this.__data__;return e?f[u]!==void 0:n.call(f,u)}return tx=a,tx}var rx,gA;function gB(){if(gA)return rx;gA=1;var e=d_(),t="__lodash_hash_undefined__";function n(a,u){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=e&&u===void 0?t:u,this}return rx=n,rx}var nx,yA;function yB(){if(yA)return nx;yA=1;var e=dB(),t=fB(),n=pB(),a=mB(),u=gB();function f(p){var s=-1,P=p==null?0:p.length;for(this.clear();++s<P;){var A=p[s];this.set(A[0],A[1])}}return f.prototype.clear=e,f.prototype.delete=t,f.prototype.get=n,f.prototype.has=a,f.prototype.set=u,nx=f,nx}var ix,vA;function vB(){if(vA)return ix;vA=1;function e(){this.__data__=[],this.size=0}return ix=e,ix}var ax,_A;function P2(){if(_A)return ax;_A=1;function e(t,n){return t===n||t!==t&&n!==n}return ax=e,ax}var ox,xA;function f_(){if(xA)return ox;xA=1;var e=P2();function t(n,a){for(var u=n.length;u--;)if(e(n[u][0],a))return u;return-1}return ox=t,ox}var sx,bA;function _B(){if(bA)return sx;bA=1;var e=f_(),t=Array.prototype,n=t.splice;function a(u){var f=this.__data__,p=e(f,u);if(p<0)return!1;var s=f.length-1;return p==s?f.pop():n.call(f,p,1),--this.size,!0}return sx=a,sx}var lx,wA;function xB(){if(wA)return lx;wA=1;var e=f_();function t(n){var a=this.__data__,u=e(a,n);return u<0?void 0:a[u][1]}return lx=t,lx}var cx,SA;function bB(){if(SA)return cx;SA=1;var e=f_();function t(n){return e(this.__data__,n)>-1}return cx=t,cx}var ux,PA;function wB(){if(PA)return ux;PA=1;var e=f_();function t(n,a){var u=this.__data__,f=e(u,n);return f<0?(++this.size,u.push([n,a])):u[f][1]=a,this}return ux=t,ux}var hx,TA;function p_(){if(TA)return hx;TA=1;var e=vB(),t=_B(),n=xB(),a=bB(),u=wB();function f(p){var s=-1,P=p==null?0:p.length;for(this.clear();++s<P;){var A=p[s];this.set(A[0],A[1])}}return f.prototype.clear=e,f.prototype.delete=t,f.prototype.get=n,f.prototype.has=a,f.prototype.set=u,hx=f,hx}var dx,AA;function T2(){if(AA)return dx;AA=1;var e=Kd(),t=Ic(),n=e(t,"Map");return dx=n,dx}var fx,CA;function SB(){if(CA)return fx;CA=1;var e=yB(),t=p_(),n=T2();function a(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return fx=a,fx}var px,EA;function PB(){if(EA)return px;EA=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return px=e,px}var mx,MA;function m_(){if(MA)return mx;MA=1;var e=PB();function t(n,a){var u=n.__data__;return e(a)?u[typeof a=="string"?"string":"hash"]:u.map}return mx=t,mx}var gx,kA;function TB(){if(kA)return gx;kA=1;var e=m_();function t(n){var a=e(this,n).delete(n);return this.size-=a?1:0,a}return gx=t,gx}var yx,IA;function AB(){if(IA)return yx;IA=1;var e=m_();function t(n){return e(this,n).get(n)}return yx=t,yx}var vx,OA;function CB(){if(OA)return vx;OA=1;var e=m_();function t(n){return e(this,n).has(n)}return vx=t,vx}var _x,RA;function EB(){if(RA)return _x;RA=1;var e=m_();function t(n,a){var u=e(this,n),f=u.size;return u.set(n,a),this.size+=u.size==f?0:1,this}return _x=t,_x}var xx,DA;function A2(){if(DA)return xx;DA=1;var e=SB(),t=TB(),n=AB(),a=CB(),u=EB();function f(p){var s=-1,P=p==null?0:p.length;for(this.clear();++s<P;){var A=p[s];this.set(A[0],A[1])}}return f.prototype.clear=e,f.prototype.delete=t,f.prototype.get=n,f.prototype.has=a,f.prototype.set=u,xx=f,xx}var bx,zA;function dD(){if(zA)return bx;zA=1;var e=A2(),t="Expected a function";function n(a,u){if(typeof a!="function"||u!=null&&typeof u!="function")throw new TypeError(t);var f=function(){var p=arguments,s=u?u.apply(this,p):p[0],P=f.cache;if(P.has(s))return P.get(s);var A=a.apply(this,p);return f.cache=P.set(s,A)||P,A};return f.cache=new(n.Cache||e),f}return n.Cache=e,bx=n,bx}var wx,jA;function MB(){if(jA)return wx;jA=1;var e=dD(),t=500;function n(a){var u=e(a,function(p){return f.size===t&&f.clear(),p}),f=u.cache;return u}return wx=n,wx}var Sx,LA;function kB(){if(LA)return Sx;LA=1;var e=MB(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=e(function(u){var f=[];return u.charCodeAt(0)===46&&f.push(""),u.replace(t,function(p,s,P,A){f.push(P?A.replace(n,"$1"):s||p)}),f});return Sx=a,Sx}var Px,NA;function C2(){if(NA)return Px;NA=1;function e(t,n){for(var a=-1,u=t==null?0:t.length,f=Array(u);++a<u;)f[a]=n(t[a],a,t);return f}return Px=e,Px}var Tx,BA;function IB(){if(BA)return Tx;BA=1;var e=qg(),t=C2(),n=To(),a=qp(),u=e?e.prototype:void 0,f=u?u.toString:void 0;function p(s){if(typeof s=="string")return s;if(n(s))return t(s,p)+"";if(a(s))return f?f.call(s):"";var P=s+"";return P=="0"&&1/s==-1/0?"-0":P}return Tx=p,Tx}var Ax,FA;function fD(){if(FA)return Ax;FA=1;var e=IB();function t(n){return n==null?"":e(n)}return Ax=t,Ax}var Cx,$A;function pD(){if($A)return Cx;$A=1;var e=To(),t=w2(),n=kB(),a=fD();function u(f,p){return e(f)?f:t(f,p)?[f]:n(a(f))}return Cx=u,Cx}var Ex,UA;function g_(){if(UA)return Ex;UA=1;var e=qp();function t(n){if(typeof n=="string"||e(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return Ex=t,Ex}var Mx,VA;function E2(){if(VA)return Mx;VA=1;var e=pD(),t=g_();function n(a,u){u=e(u,a);for(var f=0,p=u.length;a!=null&&f<p;)a=a[t(u[f++])];return f&&f==p?a:void 0}return Mx=n,Mx}var kx,qA;function mD(){if(qA)return kx;qA=1;var e=E2();function t(n,a,u){var f=n==null?void 0:e(n,a);return f===void 0?u:f}return kx=t,kx}var OB=mD();const ts=ln(OB);var Ix,GA;function RB(){if(GA)return Ix;GA=1;function e(t){return t==null}return Ix=e,Ix}var DB=RB();const kr=ln(DB);var Ox,WA;function zB(){if(WA)return Ox;WA=1;var e=Lu(),t=To(),n=Nu(),a="[object String]";function u(f){return typeof f=="string"||!t(f)&&n(f)&&e(f)==a}return Ox=u,Ox}var jB=zB();const qd=ln(jB);var LB=S2();const xr=ln(LB);var NB=Rh();const Gp=ln(NB);var Rx={exports:{}},pn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HA;function BB(){if(HA)return pn;HA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),s=Symbol.for("react.server_context"),P=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),G;G=Symbol.for("react.module.reference");function F($){if(typeof $=="object"&&$!==null){var K=$.$$typeof;switch(K){case e:switch($=$.type,$){case n:case u:case a:case A:case E:return $;default:switch($=$&&$.$$typeof,$){case s:case p:case P:case D:case M:case f:return $;default:return K}}case t:return K}}}return pn.ContextConsumer=p,pn.ContextProvider=f,pn.Element=e,pn.ForwardRef=P,pn.Fragment=n,pn.Lazy=D,pn.Memo=M,pn.Portal=t,pn.Profiler=u,pn.StrictMode=a,pn.Suspense=A,pn.SuspenseList=E,pn.isAsyncMode=function(){return!1},pn.isConcurrentMode=function(){return!1},pn.isContextConsumer=function($){return F($)===p},pn.isContextProvider=function($){return F($)===f},pn.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===e},pn.isForwardRef=function($){return F($)===P},pn.isFragment=function($){return F($)===n},pn.isLazy=function($){return F($)===D},pn.isMemo=function($){return F($)===M},pn.isPortal=function($){return F($)===t},pn.isProfiler=function($){return F($)===u},pn.isStrictMode=function($){return F($)===a},pn.isSuspense=function($){return F($)===A},pn.isSuspenseList=function($){return F($)===E},pn.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===n||$===u||$===a||$===A||$===E||$===j||typeof $=="object"&&$!==null&&($.$$typeof===D||$.$$typeof===M||$.$$typeof===f||$.$$typeof===p||$.$$typeof===P||$.$$typeof===G||$.getModuleId!==void 0)},pn.typeOf=F,pn}var ZA;function FB(){return ZA||(ZA=1,Rx.exports=BB()),Rx.exports}var $B=FB(),Dx,XA;function gD(){if(XA)return Dx;XA=1;var e=Lu(),t=Nu(),n="[object Number]";function a(u){return typeof u=="number"||t(u)&&e(u)==n}return Dx=a,Dx}var zx,KA;function UB(){if(KA)return zx;KA=1;var e=gD();function t(n){return e(n)&&n!=+n}return zx=t,zx}var VB=UB();const Gg=ln(VB);var qB=gD();const GB=ln(qB);var ro=function(t){return t===0?0:t>0?1:-1},$w=function(t){return qd(t)&&t.indexOf("%")===t.length-1},Dt=function(t){return GB(t)&&!Gg(t)},WB=function(t){return kr(t)},Hi=function(t){return Dt(t)||qd(t)},HB=0,Wp=function(t){var n=++HB;return"".concat(t||"").concat(n)},no=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Dt(t)&&!qd(t))return a;var f;if($w(t)){var p=t.indexOf("%");f=n*parseFloat(t.slice(0,p))/100}else f=+t;return Gg(f)&&(f=a),u&&f>n&&(f=n),f},Ch=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},ZB=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,a={},u=0;u<n;u++)if(!a[t[u]])a[t[u]]=!0;else return!0;return!1},Qo=function(t,n){return Dt(t)&&Dt(n)?function(a){return t+a*(n-t)}:function(){return n}};function lv(e,t,n){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):ts(a,t))===n})}var XB=function(t,n){return Dt(t)&&Dt(n)?t-n:qd(t)&&qd(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function cp(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Uw(e){"@babel/helpers - typeof";return Uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uw(e)}var KB=["viewBox","children"],YB=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],YA=["points","pathLength"],jx={svg:KB,polygon:YA,polyline:YA},M2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],cv=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(be.isValidElement(t)&&(a=t.props),!Gp(a))return null;var u={};return Object.keys(a).forEach(function(f){M2.includes(f)&&(u[f]=n||function(p){return a[f](a,p)})}),u},JB=function(t,n,a){return function(u){return t(n,a,u),null}},Gd=function(t,n,a){if(!Gp(t)||Uw(t)!=="object")return null;var u=null;return Object.keys(t).forEach(function(f){var p=t[f];M2.includes(f)&&typeof p=="function"&&(u||(u={}),u[f]=JB(p,n,a))}),u},QB=["children"],eF=["children"];function JA(e,t){if(e==null)return{};var n=tF(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function tF(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Vw(e){"@babel/helpers - typeof";return Vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vw(e)}var QA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},kh=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},eC=null,Lx=null,k2=function e(t){if(t===eC&&Array.isArray(Lx))return Lx;var n=[];return be.Children.forEach(t,function(a){kr(a)||($B.isFragment(a)?n=n.concat(e(a.props.children)):n.push(a))}),Lx=n,eC=t,n};function rs(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(function(u){return kh(u)}):a=[kh(t)],k2(e).forEach(function(u){var f=ts(u,"type.displayName")||ts(u,"type.name");a.indexOf(f)!==-1&&n.push(u)}),n}function Jo(e,t){var n=rs(e,t);return n&&n[0]}var tC=function(t){if(!t||!t.props)return!1;var n=t.props,a=n.width,u=n.height;return!(!Dt(a)||a<=0||!Dt(u)||u<=0)},rF=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],nF=function(t){return t&&t.type&&qd(t.type)&&rF.indexOf(t.type)>=0},iF=function(t){return t&&Vw(t)==="object"&&"clipDot"in t},aF=function(t,n,a,u){var f,p=(f=jx?.[u])!==null&&f!==void 0?f:[];return n.startsWith("data-")||!xr(t)&&(u&&p.includes(n)||YB.includes(n))||a&&M2.includes(n)},fr=function(t,n,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var u=t;if(be.isValidElement(t)&&(u=t.props),!Gp(u))return null;var f={};return Object.keys(u).forEach(function(p){var s;aF((s=u)===null||s===void 0?void 0:s[p],p,n,a)&&(f[p]=u[p])}),f},qw=function e(t,n){if(t===n)return!0;var a=be.Children.count(t);if(a!==be.Children.count(n))return!1;if(a===0)return!0;if(a===1)return rC(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var u=0;u<a;u++){var f=t[u],p=n[u];if(Array.isArray(f)||Array.isArray(p)){if(!e(f,p))return!1}else if(!rC(f,p))return!1}return!0},rC=function(t,n){if(kr(t)&&kr(n))return!0;if(!kr(t)&&!kr(n)){var a=t.props||{},u=a.children,f=JA(a,QB),p=n.props||{},s=p.children,P=JA(p,eF);return u&&s?cp(f,P)&&qw(u,s):!u&&!s?cp(f,P):!1}return!1},nC=function(t,n){var a=[],u={};return k2(t).forEach(function(f,p){if(nF(f))a.push(f);else if(f){var s=kh(f.type),P=n[s]||{},A=P.handler,E=P.once;if(A&&(!E||!u[s])){var M=A(f,s,p);a.push(M),u[s]=!0}}}),a},oF=function(t){var n=t&&t.type;return n&&QA[n]?QA[n]:null},sF=function(t,n){return k2(n).indexOf(t)},lF=["children","width","height","viewBox","className","style","title","desc"];function Gw(){return Gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gw.apply(this,arguments)}function cF(e,t){if(e==null)return{};var n=uF(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function uF(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Ww(e){var t=e.children,n=e.width,a=e.height,u=e.viewBox,f=e.className,p=e.style,s=e.title,P=e.desc,A=cF(e,lF),E=u||{width:n,height:a,x:0,y:0},M=Or("recharts-surface",f);return Me.createElement("svg",Gw({},fr(A,!0,"svg"),{className:M,width:n,height:a,style:p,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height)}),Me.createElement("title",null,s),Me.createElement("desc",null,P),t)}var hF=["children","className"];function Hw(){return Hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hw.apply(this,arguments)}function dF(e,t){if(e==null)return{};var n=fF(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function fF(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var nn=Me.forwardRef(function(e,t){var n=e.children,a=e.className,u=dF(e,hF),f=Or("recharts-layer",a);return Me.createElement("g",Hw({className:f},fr(u,!0),{ref:t}),n)}),Oh=function(t,n){for(var a=arguments.length,u=new Array(a>2?a-2:0),f=2;f<a;f++)u[f-2]=arguments[f]},Nx,iC;function pF(){if(iC)return Nx;iC=1;function e(t,n,a){var u=-1,f=t.length;n<0&&(n=-n>f?0:f+n),a=a>f?f:a,a<0&&(a+=f),f=n>a?0:a-n>>>0,n>>>=0;for(var p=Array(f);++u<f;)p[u]=t[u+n];return p}return Nx=e,Nx}var Bx,aC;function mF(){if(aC)return Bx;aC=1;var e=pF();function t(n,a,u){var f=n.length;return u=u===void 0?f:u,!a&&u>=f?n:e(n,a,u)}return Bx=t,Bx}var Fx,oC;function yD(){if(oC)return Fx;oC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",u=t+n+a,f="\\ufe0e\\ufe0f",p="\\u200d",s=RegExp("["+p+e+u+f+"]");function P(A){return s.test(A)}return Fx=P,Fx}var $x,sC;function gF(){if(sC)return $x;sC=1;function e(t){return t.split("")}return $x=e,$x}var Ux,lC;function yF(){if(lC)return Ux;lC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",u=t+n+a,f="\\ufe0e\\ufe0f",p="["+e+"]",s="["+u+"]",P="\\ud83c[\\udffb-\\udfff]",A="(?:"+s+"|"+P+")",E="[^"+e+"]",M="(?:\\ud83c[\\udde6-\\uddff]){2}",D="[\\ud800-\\udbff][\\udc00-\\udfff]",j="\\u200d",G=A+"?",F="["+f+"]?",$="(?:"+j+"(?:"+[E,M,D].join("|")+")"+F+G+")*",K=F+G+$,J="(?:"+[E+s+"?",s,M,D,p].join("|")+")",ee=RegExp(P+"(?="+P+")|"+J+K,"g");function oe(Y){return Y.match(ee)||[]}return Ux=oe,Ux}var Vx,cC;function vF(){if(cC)return Vx;cC=1;var e=gF(),t=yD(),n=yF();function a(u){return t(u)?n(u):e(u)}return Vx=a,Vx}var qx,uC;function _F(){if(uC)return qx;uC=1;var e=mF(),t=yD(),n=vF(),a=fD();function u(f){return function(p){p=a(p);var s=t(p)?n(p):void 0,P=s?s[0]:p.charAt(0),A=s?e(s,1).join(""):p.slice(1);return P[f]()+A}}return qx=u,qx}var Gx,hC;function xF(){if(hC)return Gx;hC=1;var e=_F(),t=e("toUpperCase");return Gx=t,Gx}var bF=xF();const y_=ln(bF);function kn(e){return function(){return e}}const vD=Math.cos,uv=Math.sin,Rl=Math.sqrt,hv=Math.PI,v_=2*hv,Zw=Math.PI,Xw=2*Zw,Dd=1e-6,wF=Xw-Dd;function _D(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function SF(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _D;const n=10**t;return function(a){this._+=a[0];for(let u=1,f=a.length;u<f;++u)this._+=Math.round(arguments[u]*n)/n+a[u]}}class PF{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?_D:SF(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,u){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+u}`}bezierCurveTo(t,n,a,u,f,p){this._append`C${+t},${+n},${+a},${+u},${this._x1=+f},${this._y1=+p}`}arcTo(t,n,a,u,f){if(t=+t,n=+n,a=+a,u=+u,f=+f,f<0)throw new Error(`negative radius: ${f}`);let p=this._x1,s=this._y1,P=a-t,A=u-n,E=p-t,M=s-n,D=E*E+M*M;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(D>Dd)if(!(Math.abs(M*P-A*E)>Dd)||!f)this._append`L${this._x1=t},${this._y1=n}`;else{let j=a-p,G=u-s,F=P*P+A*A,$=j*j+G*G,K=Math.sqrt(F),J=Math.sqrt(D),ee=f*Math.tan((Zw-Math.acos((F+D-$)/(2*K*J)))/2),oe=ee/J,Y=ee/K;Math.abs(oe-1)>Dd&&this._append`L${t+oe*E},${n+oe*M}`,this._append`A${f},${f},0,0,${+(M*j>E*G)},${this._x1=t+Y*P},${this._y1=n+Y*A}`}}arc(t,n,a,u,f,p){if(t=+t,n=+n,a=+a,p=!!p,a<0)throw new Error(`negative radius: ${a}`);let s=a*Math.cos(u),P=a*Math.sin(u),A=t+s,E=n+P,M=1^p,D=p?u-f:f-u;this._x1===null?this._append`M${A},${E}`:(Math.abs(this._x1-A)>Dd||Math.abs(this._y1-E)>Dd)&&this._append`L${A},${E}`,a&&(D<0&&(D=D%Xw+Xw),D>wF?this._append`A${a},${a},0,1,${M},${t-s},${n-P}A${a},${a},0,1,${M},${this._x1=A},${this._y1=E}`:D>Dd&&this._append`A${a},${a},0,${+(D>=Zw)},${M},${this._x1=t+a*Math.cos(f)},${this._y1=n+a*Math.sin(f)}`)}rect(t,n,a,u){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+u}h${-a}Z`}toString(){return this._}}function I2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new PF(t)}function O2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xD(e){this._context=e}xD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function __(e){return new xD(e)}function bD(e){return e[0]}function wD(e){return e[1]}function SD(e,t){var n=kn(!0),a=null,u=__,f=null,p=I2(s);e=typeof e=="function"?e:e===void 0?bD:kn(e),t=typeof t=="function"?t:t===void 0?wD:kn(t);function s(P){var A,E=(P=O2(P)).length,M,D=!1,j;for(a==null&&(f=u(j=p())),A=0;A<=E;++A)!(A<E&&n(M=P[A],A,P))===D&&((D=!D)?f.lineStart():f.lineEnd()),D&&f.point(+e(M,A,P),+t(M,A,P));if(j)return f=null,j+""||null}return s.x=function(P){return arguments.length?(e=typeof P=="function"?P:kn(+P),s):e},s.y=function(P){return arguments.length?(t=typeof P=="function"?P:kn(+P),s):t},s.defined=function(P){return arguments.length?(n=typeof P=="function"?P:kn(!!P),s):n},s.curve=function(P){return arguments.length?(u=P,a!=null&&(f=u(a)),s):u},s.context=function(P){return arguments.length?(P==null?a=f=null:f=u(a=P),s):a},s}function qy(e,t,n){var a=null,u=kn(!0),f=null,p=__,s=null,P=I2(A);e=typeof e=="function"?e:e===void 0?bD:kn(+e),t=typeof t=="function"?t:kn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?wD:kn(+n);function A(M){var D,j,G,F=(M=O2(M)).length,$,K=!1,J,ee=new Array(F),oe=new Array(F);for(f==null&&(s=p(J=P())),D=0;D<=F;++D){if(!(D<F&&u($=M[D],D,M))===K)if(K=!K)j=D,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),G=D-1;G>=j;--G)s.point(ee[G],oe[G]);s.lineEnd(),s.areaEnd()}K&&(ee[D]=+e($,D,M),oe[D]=+t($,D,M),s.point(a?+a($,D,M):ee[D],n?+n($,D,M):oe[D]))}if(J)return s=null,J+""||null}function E(){return SD().defined(u).curve(p).context(f)}return A.x=function(M){return arguments.length?(e=typeof M=="function"?M:kn(+M),a=null,A):e},A.x0=function(M){return arguments.length?(e=typeof M=="function"?M:kn(+M),A):e},A.x1=function(M){return arguments.length?(a=M==null?null:typeof M=="function"?M:kn(+M),A):a},A.y=function(M){return arguments.length?(t=typeof M=="function"?M:kn(+M),n=null,A):t},A.y0=function(M){return arguments.length?(t=typeof M=="function"?M:kn(+M),A):t},A.y1=function(M){return arguments.length?(n=M==null?null:typeof M=="function"?M:kn(+M),A):n},A.lineX0=A.lineY0=function(){return E().x(e).y(t)},A.lineY1=function(){return E().x(e).y(n)},A.lineX1=function(){return E().x(a).y(t)},A.defined=function(M){return arguments.length?(u=typeof M=="function"?M:kn(!!M),A):u},A.curve=function(M){return arguments.length?(p=M,f!=null&&(s=p(f)),A):p},A.context=function(M){return arguments.length?(M==null?f=s=null:s=p(f=M),A):f},A}class PD{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function TF(e){return new PD(e,!0)}function AF(e){return new PD(e,!1)}const R2={draw(e,t){const n=Rl(t/hv);e.moveTo(n,0),e.arc(0,0,n,0,v_)}},CF={draw(e,t){const n=Rl(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},TD=Rl(1/3),EF=TD*2,MF={draw(e,t){const n=Rl(t/EF),a=n*TD;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},kF={draw(e,t){const n=Rl(t),a=-n/2;e.rect(a,a,n,n)}},IF=.8908130915292852,AD=uv(hv/10)/uv(7*hv/10),OF=uv(v_/10)*AD,RF=-vD(v_/10)*AD,DF={draw(e,t){const n=Rl(t*IF),a=OF*n,u=RF*n;e.moveTo(0,-n),e.lineTo(a,u);for(let f=1;f<5;++f){const p=v_*f/5,s=vD(p),P=uv(p);e.lineTo(P*n,-s*n),e.lineTo(s*a-P*u,P*a+s*u)}e.closePath()}},Wx=Rl(3),zF={draw(e,t){const n=-Rl(t/(Wx*3));e.moveTo(0,n*2),e.lineTo(-Wx*n,-n),e.lineTo(Wx*n,-n),e.closePath()}},zs=-.5,js=Rl(3)/2,Kw=1/Rl(12),jF=(Kw/2+1)*3,LF={draw(e,t){const n=Rl(t/jF),a=n/2,u=n*Kw,f=a,p=n*Kw+n,s=-f,P=p;e.moveTo(a,u),e.lineTo(f,p),e.lineTo(s,P),e.lineTo(zs*a-js*u,js*a+zs*u),e.lineTo(zs*f-js*p,js*f+zs*p),e.lineTo(zs*s-js*P,js*s+zs*P),e.lineTo(zs*a+js*u,zs*u-js*a),e.lineTo(zs*f+js*p,zs*p-js*f),e.lineTo(zs*s+js*P,zs*P-js*s),e.closePath()}};function NF(e,t){let n=null,a=I2(u);e=typeof e=="function"?e:kn(e||R2),t=typeof t=="function"?t:kn(t===void 0?64:+t);function u(){let f;if(n||(n=f=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),f)return n=null,f+""||null}return u.type=function(f){return arguments.length?(e=typeof f=="function"?f:kn(f),u):e},u.size=function(f){return arguments.length?(t=typeof f=="function"?f:kn(+f),u):t},u.context=function(f){return arguments.length?(n=f??null,u):n},u}function dv(){}function fv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function CD(e){this._context=e}CD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BF(e){return new CD(e)}function ED(e){this._context=e}ED.prototype={areaStart:dv,areaEnd:dv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function FF(e){return new ED(e)}function MD(e){this._context=e}MD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:fv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $F(e){return new MD(e)}function kD(e){this._context=e}kD.prototype={areaStart:dv,areaEnd:dv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function UF(e){return new kD(e)}function dC(e){return e<0?-1:1}function fC(e,t,n){var a=e._x1-e._x0,u=t-e._x1,f=(e._y1-e._y0)/(a||u<0&&-0),p=(n-e._y1)/(u||a<0&&-0),s=(f*u+p*a)/(a+u);return(dC(f)+dC(p))*Math.min(Math.abs(f),Math.abs(p),.5*Math.abs(s))||0}function pC(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Hx(e,t,n){var a=e._x0,u=e._y0,f=e._x1,p=e._y1,s=(f-a)/3;e._context.bezierCurveTo(a+s,u+s*t,f-s,p-s*n,f,p)}function pv(e){this._context=e}pv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hx(this,this._t0,pC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hx(this,pC(this,n=fC(this,e,t)),n);break;default:Hx(this,this._t0,n=fC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function ID(e){this._context=new OD(e)}(ID.prototype=Object.create(pv.prototype)).point=function(e,t){pv.prototype.point.call(this,t,e)};function OD(e){this._context=e}OD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,u,f){this._context.bezierCurveTo(t,e,a,n,f,u)}};function VF(e){return new pv(e)}function qF(e){return new ID(e)}function RD(e){this._context=e}RD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=mC(e),u=mC(t),f=0,p=1;p<n;++f,++p)this._context.bezierCurveTo(a[0][f],u[0][f],a[1][f],u[1][f],e[p],t[p]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function mC(e){var t,n=e.length-1,a,u=new Array(n),f=new Array(n),p=new Array(n);for(u[0]=0,f[0]=2,p[0]=e[0]+2*e[1],t=1;t<n-1;++t)u[t]=1,f[t]=4,p[t]=4*e[t]+2*e[t+1];for(u[n-1]=2,f[n-1]=7,p[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=u[t]/f[t-1],f[t]-=a,p[t]-=a*p[t-1];for(u[n-1]=p[n-1]/f[n-1],t=n-2;t>=0;--t)u[t]=(p[t]-u[t+1])/f[t];for(f[n-1]=(e[n]+u[n-1])/2,t=0;t<n-1;++t)f[t]=2*e[t+1]-u[t+1];return[u,f]}function GF(e){return new RD(e)}function x_(e,t){this._context=e,this._t=t}x_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function WF(e){return new x_(e,.5)}function HF(e){return new x_(e,0)}function ZF(e){return new x_(e,1)}function fp(e,t){if((p=e.length)>1)for(var n=1,a,u,f=e[t[0]],p,s=f.length;n<p;++n)for(u=f,f=e[t[n]],a=0;a<s;++a)f[a][1]+=f[a][0]=isNaN(u[a][1])?u[a][0]:u[a][1]}function Yw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function XF(e,t){return e[t]}function KF(e){const t=[];return t.key=e,t}function YF(){var e=kn([]),t=Yw,n=fp,a=XF;function u(f){var p=Array.from(e.apply(this,arguments),KF),s,P=p.length,A=-1,E;for(const M of f)for(s=0,++A;s<P;++s)(p[s][A]=[0,+a(M,p[s].key,A,f)]).data=M;for(s=0,E=O2(t(p));s<P;++s)p[E[s]].index=s;return n(p,E),p}return u.keys=function(f){return arguments.length?(e=typeof f=="function"?f:kn(Array.from(f)),u):e},u.value=function(f){return arguments.length?(a=typeof f=="function"?f:kn(+f),u):a},u.order=function(f){return arguments.length?(t=f==null?Yw:typeof f=="function"?f:kn(Array.from(f)),u):t},u.offset=function(f){return arguments.length?(n=f??fp,u):n},u}function JF(e,t){if((a=e.length)>0){for(var n,a,u=0,f=e[0].length,p;u<f;++u){for(p=n=0;n<a;++n)p+=e[n][u][1]||0;if(p)for(n=0;n<a;++n)e[n][u][1]/=p}fp(e,t)}}function QF(e,t){if((u=e.length)>0){for(var n=0,a=e[t[0]],u,f=a.length;n<f;++n){for(var p=0,s=0;p<u;++p)s+=e[p][n][1]||0;a[n][1]+=a[n][0]=-s/2}fp(e,t)}}function e$(e,t){if(!(!((p=e.length)>0)||!((f=(u=e[t[0]]).length)>0))){for(var n=0,a=1,u,f,p;a<f;++a){for(var s=0,P=0,A=0;s<p;++s){for(var E=e[t[s]],M=E[a][1]||0,D=E[a-1][1]||0,j=(M-D)/2,G=0;G<s;++G){var F=e[t[G]],$=F[a][1]||0,K=F[a-1][1]||0;j+=$-K}P+=M,A+=j*M}u[a-1][1]+=u[a-1][0]=n,P&&(n-=A/P)}u[a-1][1]+=u[a-1][0]=n,fp(e,t)}}function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}var t$=["type","size","sizeType"];function Jw(){return Jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jw.apply(this,arguments)}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function yC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(a){r$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function r$(e,t,n){return t=n$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n$(e){var t=i$(e,"string");return sg(t)=="symbol"?t:t+""}function i$(e,t){if(sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a$(e,t){if(e==null)return{};var n=o$(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function o$(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var DD={symbolCircle:R2,symbolCross:CF,symbolDiamond:MF,symbolSquare:kF,symbolStar:DF,symbolTriangle:zF,symbolWye:LF},s$=Math.PI/180,l$=function(t){var n="symbol".concat(y_(t));return DD[n]||R2},c$=function(t,n,a){if(n==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var u=18*s$;return 1.25*t*t*(Math.tan(u)-Math.tan(u*2)*Math.pow(Math.tan(u),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},u$=function(t,n){DD["symbol".concat(y_(t))]=n},D2=function(t){var n=t.type,a=n===void 0?"circle":n,u=t.size,f=u===void 0?64:u,p=t.sizeType,s=p===void 0?"area":p,P=a$(t,t$),A=yC(yC({},P),{},{type:a,size:f,sizeType:s}),E=function(){var $=l$(a),K=NF().type($).size(c$(f,s,a));return K()},M=A.className,D=A.cx,j=A.cy,G=fr(A,!0);return D===+D&&j===+j&&f===+f?Me.createElement("path",Jw({},G,{className:Or("recharts-symbols",M),transform:"translate(".concat(D,", ").concat(j,")"),d:E()})):null};D2.registerSymbol=u$;function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function Qw(){return Qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qw.apply(this,arguments)}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function h$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(a){lg(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function d$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f$(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,jD(a.key),a)}}function p$(e,t,n){return t&&f$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function m$(e,t,n){return t=mv(t),g$(e,zD()?Reflect.construct(t,n||[],mv(e).constructor):t.apply(e,n))}function g$(e,t){if(t&&(pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y$(e)}function y$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zD=function(){return!!e})()}function mv(e){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mv(e)}function v$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eS(e,t)}function eS(e,t){return eS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},eS(e,t)}function lg(e,t,n){return t=jD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jD(e){var t=_$(e,"string");return pp(t)=="symbol"?t:t+""}function _$(e,t){if(pp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(pp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ls=32,z2=(function(e){function t(){return d$(this,t),m$(this,t,arguments)}return v$(t,e),p$(t,[{key:"renderIcon",value:function(a){var u=this.props.inactiveColor,f=Ls/2,p=Ls/6,s=Ls/3,P=a.inactive?u:a.color;if(a.type==="plainline")return Me.createElement("line",{strokeWidth:4,fill:"none",stroke:P,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:f,x2:Ls,y2:f,className:"recharts-legend-icon"});if(a.type==="line")return Me.createElement("path",{strokeWidth:4,fill:"none",stroke:P,d:"M0,".concat(f,"h").concat(s,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(2*s,",").concat(f,`
            H`).concat(Ls,"M").concat(2*s,",").concat(f,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(s,",").concat(f),className:"recharts-legend-icon"});if(a.type==="rect")return Me.createElement("path",{stroke:"none",fill:P,d:"M0,".concat(Ls/8,"h").concat(Ls,"v").concat(Ls*3/4,"h").concat(-Ls,"z"),className:"recharts-legend-icon"});if(Me.isValidElement(a.legendIcon)){var A=h$({},a);return delete A.legendIcon,Me.cloneElement(a.legendIcon,A)}return Me.createElement(D2,{fill:P,cx:f,cy:f,size:Ls,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,u=this.props,f=u.payload,p=u.iconSize,s=u.layout,P=u.formatter,A=u.inactiveColor,E={x:0,y:0,width:Ls,height:Ls},M={display:s==="horizontal"?"inline-block":"block",marginRight:10},D={display:"inline-block",verticalAlign:"middle",marginRight:4};return f.map(function(j,G){var F=j.formatter||P,$=Or(lg(lg({"recharts-legend-item":!0},"legend-item-".concat(G),!0),"inactive",j.inactive));if(j.type==="none")return null;var K=xr(j.value)?null:j.value;Oh(!xr(j.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var J=j.inactive?A:j.color;return Me.createElement("li",Qw({className:$,style:M,key:"legend-item-".concat(G)},Gd(a.props,j,G)),Me.createElement(Ww,{width:p,height:p,viewBox:E,style:D},a.renderIcon(j)),Me.createElement("span",{className:"recharts-legend-item-text",style:{color:J}},F?F(K,j,G):K))})}},{key:"render",value:function(){var a=this.props,u=a.payload,f=a.layout,p=a.align;if(!u||!u.length)return null;var s={padding:0,margin:0,textAlign:f==="horizontal"?p:"left"};return Me.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])})(be.PureComponent);lg(z2,"displayName","Legend");lg(z2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Zx,_C;function x$(){if(_C)return Zx;_C=1;var e=p_();function t(){this.__data__=new e,this.size=0}return Zx=t,Zx}var Xx,xC;function b$(){if(xC)return Xx;xC=1;function e(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}return Xx=e,Xx}var Kx,bC;function w$(){if(bC)return Kx;bC=1;function e(t){return this.__data__.get(t)}return Kx=e,Kx}var Yx,wC;function S$(){if(wC)return Yx;wC=1;function e(t){return this.__data__.has(t)}return Yx=e,Yx}var Jx,SC;function P$(){if(SC)return Jx;SC=1;var e=p_(),t=T2(),n=A2(),a=200;function u(f,p){var s=this.__data__;if(s instanceof e){var P=s.__data__;if(!t||P.length<a-1)return P.push([f,p]),this.size=++s.size,this;s=this.__data__=new n(P)}return s.set(f,p),this.size=s.size,this}return Jx=u,Jx}var Qx,PC;function LD(){if(PC)return Qx;PC=1;var e=p_(),t=x$(),n=b$(),a=w$(),u=S$(),f=P$();function p(s){var P=this.__data__=new e(s);this.size=P.size}return p.prototype.clear=t,p.prototype.delete=n,p.prototype.get=a,p.prototype.has=u,p.prototype.set=f,Qx=p,Qx}var eb,TC;function T$(){if(TC)return eb;TC=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return eb=t,eb}var tb,AC;function A$(){if(AC)return tb;AC=1;function e(t){return this.__data__.has(t)}return tb=e,tb}var rb,CC;function ND(){if(CC)return rb;CC=1;var e=A2(),t=T$(),n=A$();function a(u){var f=-1,p=u==null?0:u.length;for(this.__data__=new e;++f<p;)this.add(u[f])}return a.prototype.add=a.prototype.push=t,a.prototype.has=n,rb=a,rb}var nb,EC;function BD(){if(EC)return nb;EC=1;function e(t,n){for(var a=-1,u=t==null?0:t.length;++a<u;)if(n(t[a],a,t))return!0;return!1}return nb=e,nb}var ib,MC;function FD(){if(MC)return ib;MC=1;function e(t,n){return t.has(n)}return ib=e,ib}var ab,kC;function $D(){if(kC)return ab;kC=1;var e=ND(),t=BD(),n=FD(),a=1,u=2;function f(p,s,P,A,E,M){var D=P&a,j=p.length,G=s.length;if(j!=G&&!(D&&G>j))return!1;var F=M.get(p),$=M.get(s);if(F&&$)return F==s&&$==p;var K=-1,J=!0,ee=P&u?new e:void 0;for(M.set(p,s),M.set(s,p);++K<j;){var oe=p[K],Y=s[K];if(A)var re=D?A(Y,oe,K,s,p,M):A(oe,Y,K,p,s,M);if(re!==void 0){if(re)continue;J=!1;break}if(ee){if(!t(s,function(ue,ge){if(!n(ee,ge)&&(oe===ue||E(oe,ue,P,A,M)))return ee.push(ge)})){J=!1;break}}else if(!(oe===Y||E(oe,Y,P,A,M))){J=!1;break}}return M.delete(p),M.delete(s),J}return ab=f,ab}var ob,IC;function C$(){if(IC)return ob;IC=1;var e=Ic(),t=e.Uint8Array;return ob=t,ob}var sb,OC;function E$(){if(OC)return sb;OC=1;function e(t){var n=-1,a=Array(t.size);return t.forEach(function(u,f){a[++n]=[f,u]}),a}return sb=e,sb}var lb,RC;function j2(){if(RC)return lb;RC=1;function e(t){var n=-1,a=Array(t.size);return t.forEach(function(u){a[++n]=u}),a}return lb=e,lb}var cb,DC;function M$(){if(DC)return cb;DC=1;var e=qg(),t=C$(),n=P2(),a=$D(),u=E$(),f=j2(),p=1,s=2,P="[object Boolean]",A="[object Date]",E="[object Error]",M="[object Map]",D="[object Number]",j="[object RegExp]",G="[object Set]",F="[object String]",$="[object Symbol]",K="[object ArrayBuffer]",J="[object DataView]",ee=e?e.prototype:void 0,oe=ee?ee.valueOf:void 0;function Y(re,ue,ge,Oe,We,Re,Ve){switch(ge){case J:if(re.byteLength!=ue.byteLength||re.byteOffset!=ue.byteOffset)return!1;re=re.buffer,ue=ue.buffer;case K:return!(re.byteLength!=ue.byteLength||!Re(new t(re),new t(ue)));case P:case A:case D:return n(+re,+ue);case E:return re.name==ue.name&&re.message==ue.message;case j:case F:return re==ue+"";case M:var Ye=u;case G:var ot=Oe&p;if(Ye||(Ye=f),re.size!=ue.size&&!ot)return!1;var at=Ve.get(re);if(at)return at==ue;Oe|=s,Ve.set(re,ue);var st=a(Ye(re),Ye(ue),Oe,We,Re,Ve);return Ve.delete(re),st;case $:if(oe)return oe.call(re)==oe.call(ue)}return!1}return cb=Y,cb}var ub,zC;function UD(){if(zC)return ub;zC=1;function e(t,n){for(var a=-1,u=n.length,f=t.length;++a<u;)t[f+a]=n[a];return t}return ub=e,ub}var hb,jC;function k$(){if(jC)return hb;jC=1;var e=UD(),t=To();function n(a,u,f){var p=u(a);return t(a)?p:e(p,f(a))}return hb=n,hb}var db,LC;function I$(){if(LC)return db;LC=1;function e(t,n){for(var a=-1,u=t==null?0:t.length,f=0,p=[];++a<u;){var s=t[a];n(s,a,t)&&(p[f++]=s)}return p}return db=e,db}var fb,NC;function O$(){if(NC)return fb;NC=1;function e(){return[]}return fb=e,fb}var pb,BC;function R$(){if(BC)return pb;BC=1;var e=I$(),t=O$(),n=Object.prototype,a=n.propertyIsEnumerable,u=Object.getOwnPropertySymbols,f=u?function(p){return p==null?[]:(p=Object(p),e(u(p),function(s){return a.call(p,s)}))}:t;return pb=f,pb}var mb,FC;function D$(){if(FC)return mb;FC=1;function e(t,n){for(var a=-1,u=Array(t);++a<t;)u[a]=n(a);return u}return mb=e,mb}var gb,$C;function z$(){if($C)return gb;$C=1;var e=Lu(),t=Nu(),n="[object Arguments]";function a(u){return t(u)&&e(u)==n}return gb=a,gb}var yb,UC;function L2(){if(UC)return yb;UC=1;var e=z$(),t=Nu(),n=Object.prototype,a=n.hasOwnProperty,u=n.propertyIsEnumerable,f=e((function(){return arguments})())?e:function(p){return t(p)&&a.call(p,"callee")&&!u.call(p,"callee")};return yb=f,yb}var Hm={exports:{}},vb,VC;function j$(){if(VC)return vb;VC=1;function e(){return!1}return vb=e,vb}Hm.exports;var qC;function VD(){return qC||(qC=1,(function(e,t){var n=Ic(),a=j$(),u=t&&!t.nodeType&&t,f=u&&!0&&e&&!e.nodeType&&e,p=f&&f.exports===u,s=p?n.Buffer:void 0,P=s?s.isBuffer:void 0,A=P||a;e.exports=A})(Hm,Hm.exports)),Hm.exports}var _b,GC;function N2(){if(GC)return _b;GC=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(a,u){var f=typeof a;return u=u??e,!!u&&(f=="number"||f!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<u}return _b=n,_b}var xb,WC;function B2(){if(WC)return xb;WC=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return xb=t,xb}var bb,HC;function L$(){if(HC)return bb;HC=1;var e=Lu(),t=B2(),n=Nu(),a="[object Arguments]",u="[object Array]",f="[object Boolean]",p="[object Date]",s="[object Error]",P="[object Function]",A="[object Map]",E="[object Number]",M="[object Object]",D="[object RegExp]",j="[object Set]",G="[object String]",F="[object WeakMap]",$="[object ArrayBuffer]",K="[object DataView]",J="[object Float32Array]",ee="[object Float64Array]",oe="[object Int8Array]",Y="[object Int16Array]",re="[object Int32Array]",ue="[object Uint8Array]",ge="[object Uint8ClampedArray]",Oe="[object Uint16Array]",We="[object Uint32Array]",Re={};Re[J]=Re[ee]=Re[oe]=Re[Y]=Re[re]=Re[ue]=Re[ge]=Re[Oe]=Re[We]=!0,Re[a]=Re[u]=Re[$]=Re[f]=Re[K]=Re[p]=Re[s]=Re[P]=Re[A]=Re[E]=Re[M]=Re[D]=Re[j]=Re[G]=Re[F]=!1;function Ve(Ye){return n(Ye)&&t(Ye.length)&&!!Re[e(Ye)]}return bb=Ve,bb}var wb,ZC;function qD(){if(ZC)return wb;ZC=1;function e(t){return function(n){return t(n)}}return wb=e,wb}var Zm={exports:{}};Zm.exports;var XC;function N$(){return XC||(XC=1,(function(e,t){var n=uD(),a=t&&!t.nodeType&&t,u=a&&!0&&e&&!e.nodeType&&e,f=u&&u.exports===a,p=f&&n.process,s=(function(){try{var P=u&&u.require&&u.require("util").types;return P||p&&p.binding&&p.binding("util")}catch{}})();e.exports=s})(Zm,Zm.exports)),Zm.exports}var Sb,KC;function GD(){if(KC)return Sb;KC=1;var e=L$(),t=qD(),n=N$(),a=n&&n.isTypedArray,u=a?t(a):e;return Sb=u,Sb}var Pb,YC;function B$(){if(YC)return Pb;YC=1;var e=D$(),t=L2(),n=To(),a=VD(),u=N2(),f=GD(),p=Object.prototype,s=p.hasOwnProperty;function P(A,E){var M=n(A),D=!M&&t(A),j=!M&&!D&&a(A),G=!M&&!D&&!j&&f(A),F=M||D||j||G,$=F?e(A.length,String):[],K=$.length;for(var J in A)(E||s.call(A,J))&&!(F&&(J=="length"||j&&(J=="offset"||J=="parent")||G&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||u(J,K)))&&$.push(J);return $}return Pb=P,Pb}var Tb,JC;function F$(){if(JC)return Tb;JC=1;var e=Object.prototype;function t(n){var a=n&&n.constructor,u=typeof a=="function"&&a.prototype||e;return n===u}return Tb=t,Tb}var Ab,QC;function WD(){if(QC)return Ab;QC=1;function e(t,n){return function(a){return t(n(a))}}return Ab=e,Ab}var Cb,eE;function $$(){if(eE)return Cb;eE=1;var e=WD(),t=e(Object.keys,Object);return Cb=t,Cb}var Eb,tE;function U$(){if(tE)return Eb;tE=1;var e=F$(),t=$$(),n=Object.prototype,a=n.hasOwnProperty;function u(f){if(!e(f))return t(f);var p=[];for(var s in Object(f))a.call(f,s)&&s!="constructor"&&p.push(s);return p}return Eb=u,Eb}var Mb,rE;function Wg(){if(rE)return Mb;rE=1;var e=S2(),t=B2();function n(a){return a!=null&&t(a.length)&&!e(a)}return Mb=n,Mb}var kb,nE;function b_(){if(nE)return kb;nE=1;var e=B$(),t=U$(),n=Wg();function a(u){return n(u)?e(u):t(u)}return kb=a,kb}var Ib,iE;function V$(){if(iE)return Ib;iE=1;var e=k$(),t=R$(),n=b_();function a(u){return e(u,n,t)}return Ib=a,Ib}var Ob,aE;function q$(){if(aE)return Ob;aE=1;var e=V$(),t=1,n=Object.prototype,a=n.hasOwnProperty;function u(f,p,s,P,A,E){var M=s&t,D=e(f),j=D.length,G=e(p),F=G.length;if(j!=F&&!M)return!1;for(var $=j;$--;){var K=D[$];if(!(M?K in p:a.call(p,K)))return!1}var J=E.get(f),ee=E.get(p);if(J&&ee)return J==p&&ee==f;var oe=!0;E.set(f,p),E.set(p,f);for(var Y=M;++$<j;){K=D[$];var re=f[K],ue=p[K];if(P)var ge=M?P(ue,re,K,p,f,E):P(re,ue,K,f,p,E);if(!(ge===void 0?re===ue||A(re,ue,s,P,E):ge)){oe=!1;break}Y||(Y=K=="constructor")}if(oe&&!Y){var Oe=f.constructor,We=p.constructor;Oe!=We&&"constructor"in f&&"constructor"in p&&!(typeof Oe=="function"&&Oe instanceof Oe&&typeof We=="function"&&We instanceof We)&&(oe=!1)}return E.delete(f),E.delete(p),oe}return Ob=u,Ob}var Rb,oE;function G$(){if(oE)return Rb;oE=1;var e=Kd(),t=Ic(),n=e(t,"DataView");return Rb=n,Rb}var Db,sE;function W$(){if(sE)return Db;sE=1;var e=Kd(),t=Ic(),n=e(t,"Promise");return Db=n,Db}var zb,lE;function HD(){if(lE)return zb;lE=1;var e=Kd(),t=Ic(),n=e(t,"Set");return zb=n,zb}var jb,cE;function H$(){if(cE)return jb;cE=1;var e=Kd(),t=Ic(),n=e(t,"WeakMap");return jb=n,jb}var Lb,uE;function Z$(){if(uE)return Lb;uE=1;var e=G$(),t=T2(),n=W$(),a=HD(),u=H$(),f=Lu(),p=hD(),s="[object Map]",P="[object Object]",A="[object Promise]",E="[object Set]",M="[object WeakMap]",D="[object DataView]",j=p(e),G=p(t),F=p(n),$=p(a),K=p(u),J=f;return(e&&J(new e(new ArrayBuffer(1)))!=D||t&&J(new t)!=s||n&&J(n.resolve())!=A||a&&J(new a)!=E||u&&J(new u)!=M)&&(J=function(ee){var oe=f(ee),Y=oe==P?ee.constructor:void 0,re=Y?p(Y):"";if(re)switch(re){case j:return D;case G:return s;case F:return A;case $:return E;case K:return M}return oe}),Lb=J,Lb}var Nb,hE;function X$(){if(hE)return Nb;hE=1;var e=LD(),t=$D(),n=M$(),a=q$(),u=Z$(),f=To(),p=VD(),s=GD(),P=1,A="[object Arguments]",E="[object Array]",M="[object Object]",D=Object.prototype,j=D.hasOwnProperty;function G(F,$,K,J,ee,oe){var Y=f(F),re=f($),ue=Y?E:u(F),ge=re?E:u($);ue=ue==A?M:ue,ge=ge==A?M:ge;var Oe=ue==M,We=ge==M,Re=ue==ge;if(Re&&p(F)){if(!p($))return!1;Y=!0,Oe=!1}if(Re&&!Oe)return oe||(oe=new e),Y||s(F)?t(F,$,K,J,ee,oe):n(F,$,ue,K,J,ee,oe);if(!(K&P)){var Ve=Oe&&j.call(F,"__wrapped__"),Ye=We&&j.call($,"__wrapped__");if(Ve||Ye){var ot=Ve?F.value():F,at=Ye?$.value():$;return oe||(oe=new e),ee(ot,at,K,J,oe)}}return Re?(oe||(oe=new e),a(F,$,K,J,ee,oe)):!1}return Nb=G,Nb}var Bb,dE;function F2(){if(dE)return Bb;dE=1;var e=X$(),t=Nu();function n(a,u,f,p,s){return a===u?!0:a==null||u==null||!t(a)&&!t(u)?a!==a&&u!==u:e(a,u,f,p,n,s)}return Bb=n,Bb}var Fb,fE;function K$(){if(fE)return Fb;fE=1;var e=LD(),t=F2(),n=1,a=2;function u(f,p,s,P){var A=s.length,E=A,M=!P;if(f==null)return!E;for(f=Object(f);A--;){var D=s[A];if(M&&D[2]?D[1]!==f[D[0]]:!(D[0]in f))return!1}for(;++A<E;){D=s[A];var j=D[0],G=f[j],F=D[1];if(M&&D[2]){if(G===void 0&&!(j in f))return!1}else{var $=new e;if(P)var K=P(G,F,j,f,p,$);if(!(K===void 0?t(F,G,n|a,P,$):K))return!1}}return!0}return Fb=u,Fb}var $b,pE;function ZD(){if(pE)return $b;pE=1;var e=Rh();function t(n){return n===n&&!e(n)}return $b=t,$b}var Ub,mE;function Y$(){if(mE)return Ub;mE=1;var e=ZD(),t=b_();function n(a){for(var u=t(a),f=u.length;f--;){var p=u[f],s=a[p];u[f]=[p,s,e(s)]}return u}return Ub=n,Ub}var Vb,gE;function XD(){if(gE)return Vb;gE=1;function e(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==void 0||t in Object(a))}}return Vb=e,Vb}var qb,yE;function J$(){if(yE)return qb;yE=1;var e=K$(),t=Y$(),n=XD();function a(u){var f=t(u);return f.length==1&&f[0][2]?n(f[0][0],f[0][1]):function(p){return p===u||e(p,u,f)}}return qb=a,qb}var Gb,vE;function Q$(){if(vE)return Gb;vE=1;function e(t,n){return t!=null&&n in Object(t)}return Gb=e,Gb}var Wb,_E;function e6(){if(_E)return Wb;_E=1;var e=pD(),t=L2(),n=To(),a=N2(),u=B2(),f=g_();function p(s,P,A){P=e(P,s);for(var E=-1,M=P.length,D=!1;++E<M;){var j=f(P[E]);if(!(D=s!=null&&A(s,j)))break;s=s[j]}return D||++E!=M?D:(M=s==null?0:s.length,!!M&&u(M)&&a(j,M)&&(n(s)||t(s)))}return Wb=p,Wb}var Hb,xE;function t6(){if(xE)return Hb;xE=1;var e=Q$(),t=e6();function n(a,u){return a!=null&&t(a,u,e)}return Hb=n,Hb}var Zb,bE;function r6(){if(bE)return Zb;bE=1;var e=F2(),t=mD(),n=t6(),a=w2(),u=ZD(),f=XD(),p=g_(),s=1,P=2;function A(E,M){return a(E)&&u(M)?f(p(E),M):function(D){var j=t(D,E);return j===void 0&&j===M?n(D,E):e(M,j,s|P)}}return Zb=A,Zb}var Xb,wE;function Hp(){if(wE)return Xb;wE=1;function e(t){return t}return Xb=e,Xb}var Kb,SE;function n6(){if(SE)return Kb;SE=1;function e(t){return function(n){return n?.[t]}}return Kb=e,Kb}var Yb,PE;function i6(){if(PE)return Yb;PE=1;var e=E2();function t(n){return function(a){return e(a,n)}}return Yb=t,Yb}var Jb,TE;function a6(){if(TE)return Jb;TE=1;var e=n6(),t=i6(),n=w2(),a=g_();function u(f){return n(f)?e(a(f)):t(f)}return Jb=u,Jb}var Qb,AE;function Oc(){if(AE)return Qb;AE=1;var e=J$(),t=r6(),n=Hp(),a=To(),u=a6();function f(p){return typeof p=="function"?p:p==null?n:typeof p=="object"?a(p)?t(p[0],p[1]):e(p):u(p)}return Qb=f,Qb}var e1,CE;function KD(){if(CE)return e1;CE=1;function e(t,n,a,u){for(var f=t.length,p=a+(u?1:-1);u?p--:++p<f;)if(n(t[p],p,t))return p;return-1}return e1=e,e1}var t1,EE;function o6(){if(EE)return t1;EE=1;function e(t){return t!==t}return t1=e,t1}var r1,ME;function s6(){if(ME)return r1;ME=1;function e(t,n,a){for(var u=a-1,f=t.length;++u<f;)if(t[u]===n)return u;return-1}return r1=e,r1}var n1,kE;function l6(){if(kE)return n1;kE=1;var e=KD(),t=o6(),n=s6();function a(u,f,p){return f===f?n(u,f,p):e(u,t,p)}return n1=a,n1}var i1,IE;function c6(){if(IE)return i1;IE=1;var e=l6();function t(n,a){var u=n==null?0:n.length;return!!u&&e(n,a,0)>-1}return i1=t,i1}var a1,OE;function u6(){if(OE)return a1;OE=1;function e(t,n,a){for(var u=-1,f=t==null?0:t.length;++u<f;)if(a(n,t[u]))return!0;return!1}return a1=e,a1}var o1,RE;function h6(){if(RE)return o1;RE=1;function e(){}return o1=e,o1}var s1,DE;function d6(){if(DE)return s1;DE=1;var e=HD(),t=h6(),n=j2(),a=1/0,u=e&&1/n(new e([,-0]))[1]==a?function(f){return new e(f)}:t;return s1=u,s1}var l1,zE;function f6(){if(zE)return l1;zE=1;var e=ND(),t=c6(),n=u6(),a=FD(),u=d6(),f=j2(),p=200;function s(P,A,E){var M=-1,D=t,j=P.length,G=!0,F=[],$=F;if(E)G=!1,D=n;else if(j>=p){var K=A?null:u(P);if(K)return f(K);G=!1,D=a,$=new e}else $=A?[]:F;e:for(;++M<j;){var J=P[M],ee=A?A(J):J;if(J=E||J!==0?J:0,G&&ee===ee){for(var oe=$.length;oe--;)if($[oe]===ee)continue e;A&&$.push(ee),F.push(J)}else D($,ee,E)||($!==F&&$.push(ee),F.push(J))}return F}return l1=s,l1}var c1,jE;function p6(){if(jE)return c1;jE=1;var e=Oc(),t=f6();function n(a,u){return a&&a.length?t(a,e(u,2)):[]}return c1=n,c1}var m6=p6();const LE=ln(m6);function YD(e,t,n){return t===!0?LE(e,n):xr(t)?LE(e,t):e}function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}var g6=["ref"];function NE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(n),!0).forEach(function(a){w_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function y6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BE(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QD(a.key),a)}}function v6(e,t,n){return t&&BE(e.prototype,t),n&&BE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _6(e,t,n){return t=gv(t),x6(e,JD()?Reflect.construct(t,n||[],gv(e).constructor):t.apply(e,n))}function x6(e,t){if(t&&(mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b6(e)}function b6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JD=function(){return!!e})()}function gv(e){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gv(e)}function w6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tS(e,t)}function tS(e,t){return tS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},tS(e,t)}function w_(e,t,n){return t=QD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QD(e){var t=S6(e,"string");return mp(t)=="symbol"?t:t+""}function S6(e,t){if(mp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(mp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function P6(e,t){if(e==null)return{};var n=T6(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function T6(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function A6(e){return e.value}function C6(e,t){if(Me.isValidElement(e))return Me.cloneElement(e,t);if(typeof e=="function")return Me.createElement(e,t);t.ref;var n=P6(t,g6);return Me.createElement(z2,n)}var FE=1,up=(function(e){function t(){var n;y6(this,t);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return n=_6(this,t,[].concat(u)),w_(n,"lastBoundingBox",{width:-1,height:-1}),n}return w6(t,e),v6(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,u=this.getBBox();u?(Math.abs(u.width-this.lastBoundingBox.width)>FE||Math.abs(u.height-this.lastBoundingBox.height)>FE)&&(this.lastBoundingBox.width=u.width,this.lastBoundingBox.height=u.height,a&&a(u)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Tu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var u=this.props,f=u.layout,p=u.align,s=u.verticalAlign,P=u.margin,A=u.chartWidth,E=u.chartHeight,M,D;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(p==="center"&&f==="vertical"){var j=this.getBBoxSnapshot();M={left:((A||0)-j.width)/2}}else M=p==="right"?{right:P&&P.right||0}:{left:P&&P.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(s==="middle"){var G=this.getBBoxSnapshot();D={top:((E||0)-G.height)/2}}else D=s==="bottom"?{bottom:P&&P.bottom||0}:{top:P&&P.top||0};return Tu(Tu({},M),D)}},{key:"render",value:function(){var a=this,u=this.props,f=u.content,p=u.width,s=u.height,P=u.wrapperStyle,A=u.payloadUniqBy,E=u.payload,M=Tu(Tu({position:"absolute",width:p||"auto",height:s||"auto"},this.getDefaultPosition(P)),P);return Me.createElement("div",{className:"recharts-legend-wrapper",style:M,ref:function(j){a.wrapperNode=j}},C6(f,Tu(Tu({},this.props),{},{payload:YD(E,A,A6)})))}}],[{key:"getWithHeight",value:function(a,u){var f=Tu(Tu({},this.defaultProps),a.props),p=f.layout;return p==="vertical"&&Dt(a.props.height)?{height:a.props.height}:p==="horizontal"?{width:a.props.width||u}:null}}])})(be.PureComponent);w_(up,"displayName","Legend");w_(up,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var u1,$E;function E6(){if($E)return u1;$E=1;var e=qg(),t=L2(),n=To(),a=e?e.isConcatSpreadable:void 0;function u(f){return n(f)||t(f)||!!(a&&f&&f[a])}return u1=u,u1}var h1,UE;function ez(){if(UE)return h1;UE=1;var e=UD(),t=E6();function n(a,u,f,p,s){var P=-1,A=a.length;for(f||(f=t),s||(s=[]);++P<A;){var E=a[P];u>0&&f(E)?u>1?n(E,u-1,f,p,s):e(s,E):p||(s[s.length]=E)}return s}return h1=n,h1}var d1,VE;function M6(){if(VE)return d1;VE=1;function e(t){return function(n,a,u){for(var f=-1,p=Object(n),s=u(n),P=s.length;P--;){var A=s[t?P:++f];if(a(p[A],A,p)===!1)break}return n}}return d1=e,d1}var f1,qE;function k6(){if(qE)return f1;qE=1;var e=M6(),t=e();return f1=t,f1}var p1,GE;function tz(){if(GE)return p1;GE=1;var e=k6(),t=b_();function n(a,u){return a&&e(a,u,t)}return p1=n,p1}var m1,WE;function I6(){if(WE)return m1;WE=1;var e=Wg();function t(n,a){return function(u,f){if(u==null)return u;if(!e(u))return n(u,f);for(var p=u.length,s=a?p:-1,P=Object(u);(a?s--:++s<p)&&f(P[s],s,P)!==!1;);return u}}return m1=t,m1}var g1,HE;function $2(){if(HE)return g1;HE=1;var e=tz(),t=I6(),n=t(e);return g1=n,g1}var y1,ZE;function rz(){if(ZE)return y1;ZE=1;var e=$2(),t=Wg();function n(a,u){var f=-1,p=t(a)?Array(a.length):[];return e(a,function(s,P,A){p[++f]=u(s,P,A)}),p}return y1=n,y1}var v1,XE;function O6(){if(XE)return v1;XE=1;function e(t,n){var a=t.length;for(t.sort(n);a--;)t[a]=t[a].value;return t}return v1=e,v1}var _1,KE;function R6(){if(KE)return _1;KE=1;var e=qp();function t(n,a){if(n!==a){var u=n!==void 0,f=n===null,p=n===n,s=e(n),P=a!==void 0,A=a===null,E=a===a,M=e(a);if(!A&&!M&&!s&&n>a||s&&P&&E&&!A&&!M||f&&P&&E||!u&&E||!p)return 1;if(!f&&!s&&!M&&n<a||M&&u&&p&&!f&&!s||A&&u&&p||!P&&p||!E)return-1}return 0}return _1=t,_1}var x1,YE;function D6(){if(YE)return x1;YE=1;var e=R6();function t(n,a,u){for(var f=-1,p=n.criteria,s=a.criteria,P=p.length,A=u.length;++f<P;){var E=e(p[f],s[f]);if(E){if(f>=A)return E;var M=u[f];return E*(M=="desc"?-1:1)}}return n.index-a.index}return x1=t,x1}var b1,JE;function z6(){if(JE)return b1;JE=1;var e=C2(),t=E2(),n=Oc(),a=rz(),u=O6(),f=qD(),p=D6(),s=Hp(),P=To();function A(E,M,D){M.length?M=e(M,function(F){return P(F)?function($){return t($,F.length===1?F[0]:F)}:F}):M=[s];var j=-1;M=e(M,f(n));var G=a(E,function(F,$,K){var J=e(M,function(ee){return ee(F)});return{criteria:J,index:++j,value:F}});return u(G,function(F,$){return p(F,$,D)})}return b1=A,b1}var w1,QE;function j6(){if(QE)return w1;QE=1;function e(t,n,a){switch(a.length){case 0:return t.call(n);case 1:return t.call(n,a[0]);case 2:return t.call(n,a[0],a[1]);case 3:return t.call(n,a[0],a[1],a[2])}return t.apply(n,a)}return w1=e,w1}var S1,eM;function L6(){if(eM)return S1;eM=1;var e=j6(),t=Math.max;function n(a,u,f){return u=t(u===void 0?a.length-1:u,0),function(){for(var p=arguments,s=-1,P=t(p.length-u,0),A=Array(P);++s<P;)A[s]=p[u+s];s=-1;for(var E=Array(u+1);++s<u;)E[s]=p[s];return E[u]=f(A),e(a,this,E)}}return S1=n,S1}var P1,tM;function N6(){if(tM)return P1;tM=1;function e(t){return function(){return t}}return P1=e,P1}var T1,rM;function nz(){if(rM)return T1;rM=1;var e=Kd(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return T1=t,T1}var A1,nM;function B6(){if(nM)return A1;nM=1;var e=N6(),t=nz(),n=Hp(),a=t?function(u,f){return t(u,"toString",{configurable:!0,enumerable:!1,value:e(f),writable:!0})}:n;return A1=a,A1}var C1,iM;function F6(){if(iM)return C1;iM=1;var e=800,t=16,n=Date.now;function a(u){var f=0,p=0;return function(){var s=n(),P=t-(s-p);if(p=s,P>0){if(++f>=e)return arguments[0]}else f=0;return u.apply(void 0,arguments)}}return C1=a,C1}var E1,aM;function $6(){if(aM)return E1;aM=1;var e=B6(),t=F6(),n=t(e);return E1=n,E1}var M1,oM;function U6(){if(oM)return M1;oM=1;var e=Hp(),t=L6(),n=$6();function a(u,f){return n(t(u,f,e),u+"")}return M1=a,M1}var k1,sM;function S_(){if(sM)return k1;sM=1;var e=P2(),t=Wg(),n=N2(),a=Rh();function u(f,p,s){if(!a(s))return!1;var P=typeof p;return(P=="number"?t(s)&&n(p,s.length):P=="string"&&p in s)?e(s[p],f):!1}return k1=u,k1}var I1,lM;function V6(){if(lM)return I1;lM=1;var e=ez(),t=z6(),n=U6(),a=S_(),u=n(function(f,p){if(f==null)return[];var s=p.length;return s>1&&a(f,p[0],p[1])?p=[]:s>2&&a(p[0],p[1],p[2])&&(p=[p[0]]),t(f,e(p,1),[])});return I1=u,I1}var q6=V6();const U2=ln(q6);function cg(e){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(e)}function rS(){return rS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rS.apply(this,arguments)}function G6(e,t){return X6(e)||Z6(e,t)||H6(e,t)||W6()}function W6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H6(e,t){if(e){if(typeof e=="string")return cM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cM(e,t)}}function cM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Z6(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function X6(e){if(Array.isArray(e))return e}function uM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function O1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uM(Object(n),!0).forEach(function(a){K6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function K6(e,t,n){return t=Y6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y6(e){var t=J6(e,"string");return cg(t)=="symbol"?t:t+""}function J6(e,t){if(cg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q6(e){return Array.isArray(e)&&Hi(e[0])&&Hi(e[1])?e.join(" ~ "):e}var e8=function(t){var n=t.separator,a=n===void 0?" : ":n,u=t.contentStyle,f=u===void 0?{}:u,p=t.itemStyle,s=p===void 0?{}:p,P=t.labelStyle,A=P===void 0?{}:P,E=t.payload,M=t.formatter,D=t.itemSorter,j=t.wrapperClassName,G=t.labelClassName,F=t.label,$=t.labelFormatter,K=t.accessibilityLayer,J=K===void 0?!1:K,ee=function(){if(E&&E.length){var Ve={padding:0,margin:0},Ye=(D?U2(E,D):E).map(function(ot,at){if(ot.type==="none")return null;var st=O1({display:"block",paddingTop:4,paddingBottom:4,color:ot.color||"#000"},s),lt=ot.formatter||M||Q6,Ne=ot.value,tt=ot.name,ut=Ne,Ce=tt;if(lt&&ut!=null&&Ce!=null){var qe=lt(Ne,tt,ot,at,E);if(Array.isArray(qe)){var yt=G6(qe,2);ut=yt[0],Ce=yt[1]}else ut=qe}return Me.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(at),style:st},Hi(Ce)?Me.createElement("span",{className:"recharts-tooltip-item-name"},Ce):null,Hi(Ce)?Me.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Me.createElement("span",{className:"recharts-tooltip-item-value"},ut),Me.createElement("span",{className:"recharts-tooltip-item-unit"},ot.unit||""))});return Me.createElement("ul",{className:"recharts-tooltip-item-list",style:Ve},Ye)}return null},oe=O1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},f),Y=O1({margin:0},A),re=!kr(F),ue=re?F:"",ge=Or("recharts-default-tooltip",j),Oe=Or("recharts-tooltip-label",G);re&&$&&E!==void 0&&E!==null&&(ue=$(F,E));var We=J?{role:"status","aria-live":"assertive"}:{};return Me.createElement("div",rS({className:ge,style:oe},We),Me.createElement("p",{className:Oe,style:Y},Me.isValidElement(ue)?ue:"".concat(ue)),ee())};function ug(e){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ug(e)}function Gy(e,t,n){return t=t8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t8(e){var t=r8(e,"string");return ug(t)=="symbol"?t:t+""}function r8(e,t){if(ug(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ug(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nm="recharts-tooltip-wrapper",n8={visibility:"hidden"};function i8(e){var t=e.coordinate,n=e.translateX,a=e.translateY;return Or(Nm,Gy(Gy(Gy(Gy({},"".concat(Nm,"-right"),Dt(n)&&t&&Dt(t.x)&&n>=t.x),"".concat(Nm,"-left"),Dt(n)&&t&&Dt(t.x)&&n<t.x),"".concat(Nm,"-bottom"),Dt(a)&&t&&Dt(t.y)&&a>=t.y),"".concat(Nm,"-top"),Dt(a)&&t&&Dt(t.y)&&a<t.y))}function hM(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.key,u=e.offsetTopLeft,f=e.position,p=e.reverseDirection,s=e.tooltipDimension,P=e.viewBox,A=e.viewBoxDimension;if(f&&Dt(f[a]))return f[a];var E=n[a]-s-u,M=n[a]+u;if(t[a])return p[a]?E:M;if(p[a]){var D=E,j=P[a];return D<j?Math.max(M,P[a]):Math.max(E,P[a])}var G=M+s,F=P[a]+A;return G>F?Math.max(E,P[a]):Math.max(M,P[a])}function a8(e){var t=e.translateX,n=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function o8(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.offsetTopLeft,u=e.position,f=e.reverseDirection,p=e.tooltipBox,s=e.useTranslate3d,P=e.viewBox,A,E,M;return p.height>0&&p.width>0&&n?(E=hM({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:u,reverseDirection:f,tooltipDimension:p.width,viewBox:P,viewBoxDimension:P.width}),M=hM({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:u,reverseDirection:f,tooltipDimension:p.height,viewBox:P,viewBoxDimension:P.height}),A=a8({translateX:E,translateY:M,useTranslate3d:s})):A=n8,{cssProperties:A,cssClasses:i8({translateX:E,translateY:M,coordinate:n})}}function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function dM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function fM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(n),!0).forEach(function(a){iS(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function s8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l8(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,az(a.key),a)}}function c8(e,t,n){return t&&l8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u8(e,t,n){return t=yv(t),h8(e,iz()?Reflect.construct(t,n||[],yv(e).constructor):t.apply(e,n))}function h8(e,t){if(t&&(gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d8(e)}function d8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iz=function(){return!!e})()}function yv(e){return yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yv(e)}function f8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nS(e,t)}function nS(e,t){return nS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},nS(e,t)}function iS(e,t,n){return t=az(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function az(e){var t=p8(e,"string");return gp(t)=="symbol"?t:t+""}function p8(e,t){if(gp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(gp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pM=1,m8=(function(e){function t(){var n;s8(this,t);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return n=u8(this,t,[].concat(u)),iS(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),iS(n,"handleKeyDown",function(p){if(p.key==="Escape"){var s,P,A,E;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(P=n.props.coordinate)===null||P===void 0?void 0:P.x)!==null&&s!==void 0?s:0,y:(A=(E=n.props.coordinate)===null||E===void 0?void 0:E.y)!==null&&A!==void 0?A:0}})}}),n}return f8(t,e),c8(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>pM||Math.abs(a.height-this.state.lastBoundingBox.height)>pM)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,u;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((u=this.props.coordinate)===null||u===void 0?void 0:u.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,u=this.props,f=u.active,p=u.allowEscapeViewBox,s=u.animationDuration,P=u.animationEasing,A=u.children,E=u.coordinate,M=u.hasPayload,D=u.isAnimationActive,j=u.offset,G=u.position,F=u.reverseDirection,$=u.useTranslate3d,K=u.viewBox,J=u.wrapperStyle,ee=o8({allowEscapeViewBox:p,coordinate:E,offsetTopLeft:j,position:G,reverseDirection:F,tooltipBox:this.state.lastBoundingBox,useTranslate3d:$,viewBox:K}),oe=ee.cssClasses,Y=ee.cssProperties,re=fM(fM({transition:D&&f?"transform ".concat(s,"ms ").concat(P):void 0},Y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&f&&M?"visible":"hidden",position:"absolute",top:0,left:0},J);return Me.createElement("div",{tabIndex:-1,className:oe,style:re,ref:function(ge){a.wrapperNode=ge}},A)}}])})(be.PureComponent),g8=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Yd={isSsr:g8()};function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function mM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function gM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mM(Object(n),!0).forEach(function(a){V2(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function y8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v8(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sz(a.key),a)}}function _8(e,t,n){return t&&v8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function x8(e,t,n){return t=vv(t),b8(e,oz()?Reflect.construct(t,n||[],vv(e).constructor):t.apply(e,n))}function b8(e,t){if(t&&(yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w8(e)}function w8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oz=function(){return!!e})()}function vv(e){return vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vv(e)}function S8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aS(e,t)}function aS(e,t){return aS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},aS(e,t)}function V2(e,t,n){return t=sz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sz(e){var t=P8(e,"string");return yp(t)=="symbol"?t:t+""}function P8(e,t){if(yp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(yp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function T8(e){return e.dataKey}function A8(e,t){return Me.isValidElement(e)?Me.cloneElement(e,t):typeof e=="function"?Me.createElement(e,t):Me.createElement(e8,t)}var Cl=(function(e){function t(){return y8(this,t),x8(this,t,arguments)}return S8(t,e),_8(t,[{key:"render",value:function(){var a=this,u=this.props,f=u.active,p=u.allowEscapeViewBox,s=u.animationDuration,P=u.animationEasing,A=u.content,E=u.coordinate,M=u.filterNull,D=u.isAnimationActive,j=u.offset,G=u.payload,F=u.payloadUniqBy,$=u.position,K=u.reverseDirection,J=u.useTranslate3d,ee=u.viewBox,oe=u.wrapperStyle,Y=G??[];M&&Y.length&&(Y=YD(G.filter(function(ue){return ue.value!=null&&(ue.hide!==!0||a.props.includeHidden)}),F,T8));var re=Y.length>0;return Me.createElement(m8,{allowEscapeViewBox:p,animationDuration:s,animationEasing:P,isAnimationActive:D,active:f,coordinate:E,hasPayload:re,offset:j,position:$,reverseDirection:K,useTranslate3d:J,viewBox:ee,wrapperStyle:oe},A8(A,gM(gM({},this.props),{},{payload:Y})))}}])})(be.PureComponent);V2(Cl,"displayName","Tooltip");V2(Cl,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Yd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var R1,yM;function C8(){if(yM)return R1;yM=1;var e=Ic(),t=function(){return e.Date.now()};return R1=t,R1}var D1,vM;function E8(){if(vM)return D1;vM=1;var e=/\s/;function t(n){for(var a=n.length;a--&&e.test(n.charAt(a)););return a}return D1=t,D1}var z1,_M;function M8(){if(_M)return z1;_M=1;var e=E8(),t=/^\s+/;function n(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return z1=n,z1}var j1,xM;function lz(){if(xM)return j1;xM=1;var e=M8(),t=Rh(),n=qp(),a=NaN,u=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,p=/^0o[0-7]+$/i,s=parseInt;function P(A){if(typeof A=="number")return A;if(n(A))return a;if(t(A)){var E=typeof A.valueOf=="function"?A.valueOf():A;A=t(E)?E+"":E}if(typeof A!="string")return A===0?A:+A;A=e(A);var M=f.test(A);return M||p.test(A)?s(A.slice(2),M?2:8):u.test(A)?a:+A}return j1=P,j1}var L1,bM;function k8(){if(bM)return L1;bM=1;var e=Rh(),t=C8(),n=lz(),a="Expected a function",u=Math.max,f=Math.min;function p(s,P,A){var E,M,D,j,G,F,$=0,K=!1,J=!1,ee=!0;if(typeof s!="function")throw new TypeError(a);P=n(P)||0,e(A)&&(K=!!A.leading,J="maxWait"in A,D=J?u(n(A.maxWait)||0,P):D,ee="trailing"in A?!!A.trailing:ee);function oe(Ye){var ot=E,at=M;return E=M=void 0,$=Ye,j=s.apply(at,ot),j}function Y(Ye){return $=Ye,G=setTimeout(ge,P),K?oe(Ye):j}function re(Ye){var ot=Ye-F,at=Ye-$,st=P-ot;return J?f(st,D-at):st}function ue(Ye){var ot=Ye-F,at=Ye-$;return F===void 0||ot>=P||ot<0||J&&at>=D}function ge(){var Ye=t();if(ue(Ye))return Oe(Ye);G=setTimeout(ge,re(Ye))}function Oe(Ye){return G=void 0,ee&&E?oe(Ye):(E=M=void 0,j)}function We(){G!==void 0&&clearTimeout(G),$=0,E=F=M=G=void 0}function Re(){return G===void 0?j:Oe(t())}function Ve(){var Ye=t(),ot=ue(Ye);if(E=arguments,M=this,F=Ye,ot){if(G===void 0)return Y(F);if(J)return clearTimeout(G),G=setTimeout(ge,P),oe(F)}return G===void 0&&(G=setTimeout(ge,P)),j}return Ve.cancel=We,Ve.flush=Re,Ve}return L1=p,L1}var N1,wM;function I8(){if(wM)return N1;wM=1;var e=k8(),t=Rh(),n="Expected a function";function a(u,f,p){var s=!0,P=!0;if(typeof u!="function")throw new TypeError(n);return t(p)&&(s="leading"in p?!!p.leading:s,P="trailing"in p?!!p.trailing:P),e(u,f,{leading:s,maxWait:f,trailing:P})}return N1=a,N1}var O8=I8();const R8=ln(O8);var hg=function(t){return null};hg.displayName="Cell";function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function SM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function oS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(n),!0).forEach(function(a){D8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function D8(e,t,n){return t=z8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z8(e){var t=j8(e,"string");return dg(t)=="symbol"?t:t+""}function j8(e,t){if(dg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yf={widthCache:{},cacheCount:0},L8=2e3,N8={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},PM="recharts_measurement_span";function B8(e){var t=oS({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Ym=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Yd.isSsr)return{width:0,height:0};var a=B8(n),u=JSON.stringify({text:t,copyStyle:a});if(Yf.widthCache[u])return Yf.widthCache[u];try{var f=document.getElementById(PM);f||(f=document.createElement("span"),f.setAttribute("id",PM),f.setAttribute("aria-hidden","true"),document.body.appendChild(f));var p=oS(oS({},N8),a);Object.assign(f.style,p),f.textContent="".concat(t);var s=f.getBoundingClientRect(),P={width:s.width,height:s.height};return Yf.widthCache[u]=P,++Yf.cacheCount>L8&&(Yf.cacheCount=0,Yf.widthCache={}),P}catch{return{width:0,height:0}}},F8=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}function _v(e,t){return q8(e)||V8(e,t)||U8(e,t)||$8()}function $8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U8(e,t){if(e){if(typeof e=="string")return TM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TM(e,t)}}function TM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function V8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;P=!1}else for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function q8(e){if(Array.isArray(e))return e}function G8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AM(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,H8(a.key),a)}}function W8(e,t,n){return t&&AM(e.prototype,t),n&&AM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function H8(e){var t=Z8(e,"string");return fg(t)=="symbol"?t:t+""}function Z8(e,t){if(fg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(fg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var CM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,EM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,X8=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,K8=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,cz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Y8=Object.keys(cz),np="NaN";function J8(e,t){return e*cz[t]}var Wy=(function(){function e(t,n){G8(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!X8.test(n)&&(this.num=NaN,this.unit=""),Y8.includes(n)&&(this.num=J8(t,n),this.unit="px")}return W8(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,u=(a=K8.exec(n))!==null&&a!==void 0?a:[],f=_v(u,3),p=f[1],s=f[2];return new e(parseFloat(p),s??"")}}])})();function uz(e){if(e.includes(np))return np;for(var t=e;t.includes("*")||t.includes("/");){var n,a=(n=CM.exec(t))!==null&&n!==void 0?n:[],u=_v(a,4),f=u[1],p=u[2],s=u[3],P=Wy.parse(f??""),A=Wy.parse(s??""),E=p==="*"?P.multiply(A):P.divide(A);if(E.isNaN())return np;t=t.replace(CM,E.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var M,D=(M=EM.exec(t))!==null&&M!==void 0?M:[],j=_v(D,4),G=j[1],F=j[2],$=j[3],K=Wy.parse(G??""),J=Wy.parse($??""),ee=F==="+"?K.add(J):K.subtract(J);if(ee.isNaN())return np;t=t.replace(EM,ee.toString())}return t}var MM=/\(([^()]*)\)/;function Q8(e){for(var t=e;t.includes("(");){var n=MM.exec(t),a=_v(n,2),u=a[1];t=t.replace(MM,uz(u))}return t}function eU(e){var t=e.replace(/\s+/g,"");return t=Q8(t),t=uz(t),t}function tU(e){try{return eU(e)}catch{return np}}function B1(e){var t=tU(e.slice(5,-1));return t===np?"":t}var rU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],nU=["dx","dy","angle","className","breakAll"];function sS(){return sS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sS.apply(this,arguments)}function kM(e,t){if(e==null)return{};var n=iU(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function iU(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function IM(e,t){return lU(e)||sU(e,t)||oU(e,t)||aU()}function aU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oU(e,t){if(e){if(typeof e=="string")return OM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OM(e,t)}}function OM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function sU(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;P=!1}else for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function lU(e){if(Array.isArray(e))return e}var hz=/[ \f\n\r\t\v\u2028\u2029]+/,dz=function(t){var n=t.children,a=t.breakAll,u=t.style;try{var f=[];kr(n)||(a?f=n.toString().split(""):f=n.toString().split(hz));var p=f.map(function(P){return{word:P,width:Ym(P,u).width}}),s=a?0:Ym(" ",u).width;return{wordsWithComputedWidth:p,spaceWidth:s}}catch{return null}},cU=function(t,n,a,u,f){var p=t.maxLines,s=t.children,P=t.style,A=t.breakAll,E=Dt(p),M=s,D=function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return at.reduce(function(st,lt){var Ne=lt.word,tt=lt.width,ut=st[st.length-1];if(ut&&(u==null||f||ut.width+tt+a<Number(u)))ut.words.push(Ne),ut.width+=tt+a;else{var Ce={words:[Ne],width:tt};st.push(Ce)}return st},[])},j=D(n),G=function(at){return at.reduce(function(st,lt){return st.width>lt.width?st:lt})};if(!E)return j;for(var F="…",$=function(at){var st=M.slice(0,at),lt=dz({breakAll:A,style:P,children:st+F}).wordsWithComputedWidth,Ne=D(lt),tt=Ne.length>p||G(Ne).width>Number(u);return[tt,Ne]},K=0,J=M.length-1,ee=0,oe;K<=J&&ee<=M.length-1;){var Y=Math.floor((K+J)/2),re=Y-1,ue=$(re),ge=IM(ue,2),Oe=ge[0],We=ge[1],Re=$(Y),Ve=IM(Re,1),Ye=Ve[0];if(!Oe&&!Ye&&(K=Y+1),Oe&&Ye&&(J=Y-1),!Oe&&Ye){oe=We;break}ee++}return oe||j},RM=function(t){var n=kr(t)?[]:t.toString().split(hz);return[{words:n}]},uU=function(t){var n=t.width,a=t.scaleToFit,u=t.children,f=t.style,p=t.breakAll,s=t.maxLines;if((n||a)&&!Yd.isSsr){var P,A,E=dz({breakAll:p,children:u,style:f});if(E){var M=E.wordsWithComputedWidth,D=E.spaceWidth;P=M,A=D}else return RM(u);return cU({breakAll:p,children:u,maxLines:s,style:f},P,A,n,a)}return RM(u)},DM="#808080",Wd=function(t){var n=t.x,a=n===void 0?0:n,u=t.y,f=u===void 0?0:u,p=t.lineHeight,s=p===void 0?"1em":p,P=t.capHeight,A=P===void 0?"0.71em":P,E=t.scaleToFit,M=E===void 0?!1:E,D=t.textAnchor,j=D===void 0?"start":D,G=t.verticalAnchor,F=G===void 0?"end":G,$=t.fill,K=$===void 0?DM:$,J=kM(t,rU),ee=be.useMemo(function(){return uU({breakAll:J.breakAll,children:J.children,maxLines:J.maxLines,scaleToFit:M,style:J.style,width:J.width})},[J.breakAll,J.children,J.maxLines,M,J.style,J.width]),oe=J.dx,Y=J.dy,re=J.angle,ue=J.className,ge=J.breakAll,Oe=kM(J,nU);if(!Hi(a)||!Hi(f))return null;var We=a+(Dt(oe)?oe:0),Re=f+(Dt(Y)?Y:0),Ve;switch(F){case"start":Ve=B1("calc(".concat(A,")"));break;case"middle":Ve=B1("calc(".concat((ee.length-1)/2," * -").concat(s," + (").concat(A," / 2))"));break;default:Ve=B1("calc(".concat(ee.length-1," * -").concat(s,")"));break}var Ye=[];if(M){var ot=ee[0].width,at=J.width;Ye.push("scale(".concat((Dt(at)?at/ot:1)/ot,")"))}return re&&Ye.push("rotate(".concat(re,", ").concat(We,", ").concat(Re,")")),Ye.length&&(Oe.transform=Ye.join(" ")),Me.createElement("text",sS({},fr(Oe,!0),{x:We,y:Re,className:Or("recharts-text",ue),textAnchor:j,fill:K.includes("url")?DM:K}),ee.map(function(st,lt){var Ne=st.words.join(ge?"":" ");return Me.createElement("tspan",{x:We,dy:lt===0?Ve:s,key:"".concat(Ne,"-").concat(lt)},Ne)}))};function Ih(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hU(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function q2(e){let t,n,a;e.length!==2?(t=Ih,n=(s,P)=>Ih(e(s),P),a=(s,P)=>e(s)-P):(t=e===Ih||e===hU?e:dU,n=e,a=e);function u(s,P,A=0,E=s.length){if(A<E){if(t(P,P)!==0)return E;do{const M=A+E>>>1;n(s[M],P)<0?A=M+1:E=M}while(A<E)}return A}function f(s,P,A=0,E=s.length){if(A<E){if(t(P,P)!==0)return E;do{const M=A+E>>>1;n(s[M],P)<=0?A=M+1:E=M}while(A<E)}return A}function p(s,P,A=0,E=s.length){const M=u(s,P,A,E-1);return M>A&&a(s[M-1],P)>-a(s[M],P)?M-1:M}return{left:u,center:p,right:f}}function dU(){return 0}function fz(e){return e===null?NaN:+e}function*fU(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const pU=q2(Ih),Hg=pU.right;q2(fz).center;class zM extends Map{constructor(t,n=yU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,u]of t)this.set(a,u)}get(t){return super.get(jM(this,t))}has(t){return super.has(jM(this,t))}set(t,n){return super.set(mU(this,t),n)}delete(t){return super.delete(gU(this,t))}}function jM({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function mU({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function gU({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function yU(e){return e!==null&&typeof e=="object"?e.valueOf():e}function vU(e=Ih){if(e===Ih)return pz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function pz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _U=Math.sqrt(50),xU=Math.sqrt(10),bU=Math.sqrt(2);function xv(e,t,n){const a=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(a)),f=a/Math.pow(10,u),p=f>=_U?10:f>=xU?5:f>=bU?2:1;let s,P,A;return u<0?(A=Math.pow(10,-u)/p,s=Math.round(e*A),P=Math.round(t*A),s/A<e&&++s,P/A>t&&--P,A=-A):(A=Math.pow(10,u)*p,s=Math.round(e/A),P=Math.round(t/A),s*A<e&&++s,P*A>t&&--P),P<s&&.5<=n&&n<2?xv(e,t,n*2):[s,P,A]}function lS(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[u,f,p]=a?xv(t,e,n):xv(e,t,n);if(!(f>=u))return[];const s=f-u+1,P=new Array(s);if(a)if(p<0)for(let A=0;A<s;++A)P[A]=(f-A)/-p;else for(let A=0;A<s;++A)P[A]=(f-A)*p;else if(p<0)for(let A=0;A<s;++A)P[A]=(u+A)/-p;else for(let A=0;A<s;++A)P[A]=(u+A)*p;return P}function cS(e,t,n){return t=+t,e=+e,n=+n,xv(e,t,n)[2]}function uS(e,t,n){t=+t,e=+e,n=+n;const a=t<e,u=a?cS(t,e,n):cS(e,t,n);return(a?-1:1)*(u<0?1/-u:u)}function LM(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function NM(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function mz(e,t,n=0,a=1/0,u){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(u=u===void 0?pz:vU(u);a>n;){if(a-n>600){const P=a-n+1,A=t-n+1,E=Math.log(P),M=.5*Math.exp(2*E/3),D=.5*Math.sqrt(E*M*(P-M)/P)*(A-P/2<0?-1:1),j=Math.max(n,Math.floor(t-A*M/P+D)),G=Math.min(a,Math.floor(t+(P-A)*M/P+D));mz(e,t,j,G,u)}const f=e[t];let p=n,s=a;for(Bm(e,n,t),u(e[a],f)>0&&Bm(e,n,a);p<s;){for(Bm(e,p,s),++p,--s;u(e[p],f)<0;)++p;for(;u(e[s],f)>0;)--s}u(e[n],f)===0?Bm(e,n,s):(++s,Bm(e,s,a)),s<=t&&(n=s+1),t<=s&&(a=s-1)}return e}function Bm(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function wU(e,t,n){if(e=Float64Array.from(fU(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return NM(e);if(t>=1)return LM(e);var a,u=(a-1)*t,f=Math.floor(u),p=LM(mz(e,f).subarray(0,f+1)),s=NM(e.subarray(f+1));return p+(s-p)*(u-f)}}function SU(e,t,n=fz){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,u=(a-1)*t,f=Math.floor(u),p=+n(e[f],f,e),s=+n(e[f+1],f+1,e);return p+(s-p)*(u-f)}}function PU(e,t,n){e=+e,t=+t,n=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+n;for(var a=-1,u=Math.max(0,Math.ceil((t-e)/n))|0,f=new Array(u);++a<u;)f[a]=e+a*n;return f}function Us(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Bu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hS=Symbol("implicit");function G2(){var e=new zM,t=[],n=[],a=hS;function u(f){let p=e.get(f);if(p===void 0){if(a!==hS)return a;e.set(f,p=t.push(f)-1)}return n[p%n.length]}return u.domain=function(f){if(!arguments.length)return t.slice();t=[],e=new zM;for(const p of f)e.has(p)||e.set(p,t.push(p)-1);return u},u.range=function(f){return arguments.length?(n=Array.from(f),u):n.slice()},u.unknown=function(f){return arguments.length?(a=f,u):a},u.copy=function(){return G2(t,n).unknown(a)},Us.apply(u,arguments),u}function pg(){var e=G2().unknown(void 0),t=e.domain,n=e.range,a=0,u=1,f,p,s=!1,P=0,A=0,E=.5;delete e.unknown;function M(){var D=t().length,j=u<a,G=j?u:a,F=j?a:u;f=(F-G)/Math.max(1,D-P+A*2),s&&(f=Math.floor(f)),G+=(F-G-f*(D-P))*E,p=f*(1-P),s&&(G=Math.round(G),p=Math.round(p));var $=PU(D).map(function(K){return G+f*K});return n(j?$.reverse():$)}return e.domain=function(D){return arguments.length?(t(D),M()):t()},e.range=function(D){return arguments.length?([a,u]=D,a=+a,u=+u,M()):[a,u]},e.rangeRound=function(D){return[a,u]=D,a=+a,u=+u,s=!0,M()},e.bandwidth=function(){return p},e.step=function(){return f},e.round=function(D){return arguments.length?(s=!!D,M()):s},e.padding=function(D){return arguments.length?(P=Math.min(1,A=+D),M()):P},e.paddingInner=function(D){return arguments.length?(P=Math.min(1,D),M()):P},e.paddingOuter=function(D){return arguments.length?(A=+D,M()):A},e.align=function(D){return arguments.length?(E=Math.max(0,Math.min(1,D)),M()):E},e.copy=function(){return pg(t(),[a,u]).round(s).paddingInner(P).paddingOuter(A).align(E)},Us.apply(M(),arguments)}function gz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gz(t())},e}function Jm(){return gz(pg.apply(null,arguments).paddingInner(1))}function W2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yz(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Zg(){}var mg=.7,bv=1/mg,hp="\\s*([+-]?\\d+)\\s*",gg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TU=/^#([0-9a-f]{3,8})$/,AU=new RegExp(`^rgb\\(${hp},${hp},${hp}\\)$`),CU=new RegExp(`^rgb\\(${Cc},${Cc},${Cc}\\)$`),EU=new RegExp(`^rgba\\(${hp},${hp},${hp},${gg}\\)$`),MU=new RegExp(`^rgba\\(${Cc},${Cc},${Cc},${gg}\\)$`),kU=new RegExp(`^hsl\\(${gg},${Cc},${Cc}\\)$`),IU=new RegExp(`^hsla\\(${gg},${Cc},${Cc},${gg}\\)$`),BM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};W2(Zg,yg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:FM,formatHex:FM,formatHex8:OU,formatHsl:RU,formatRgb:$M,toString:$M});function FM(){return this.rgb().formatHex()}function OU(){return this.rgb().formatHex8()}function RU(){return vz(this).formatHsl()}function $M(){return this.rgb().formatRgb()}function yg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=TU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?UM(t):n===3?new Po(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Hy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Hy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=AU.exec(e))?new Po(t[1],t[2],t[3],1):(t=CU.exec(e))?new Po(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=EU.exec(e))?Hy(t[1],t[2],t[3],t[4]):(t=MU.exec(e))?Hy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kU.exec(e))?GM(t[1],t[2]/100,t[3]/100,1):(t=IU.exec(e))?GM(t[1],t[2]/100,t[3]/100,t[4]):BM.hasOwnProperty(e)?UM(BM[e]):e==="transparent"?new Po(NaN,NaN,NaN,0):null}function UM(e){return new Po(e>>16&255,e>>8&255,e&255,1)}function Hy(e,t,n,a){return a<=0&&(e=t=n=NaN),new Po(e,t,n,a)}function DU(e){return e instanceof Zg||(e=yg(e)),e?(e=e.rgb(),new Po(e.r,e.g,e.b,e.opacity)):new Po}function dS(e,t,n,a){return arguments.length===1?DU(e):new Po(e,t,n,a??1)}function Po(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}W2(Po,dS,yz(Zg,{brighter(e){return e=e==null?bv:Math.pow(bv,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mg:Math.pow(mg,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Po(Fd(this.r),Fd(this.g),Fd(this.b),wv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VM,formatHex:VM,formatHex8:zU,formatRgb:qM,toString:qM}));function VM(){return`#${Ld(this.r)}${Ld(this.g)}${Ld(this.b)}`}function zU(){return`#${Ld(this.r)}${Ld(this.g)}${Ld(this.b)}${Ld((isNaN(this.opacity)?1:this.opacity)*255)}`}function qM(){const e=wv(this.opacity);return`${e===1?"rgb(":"rgba("}${Fd(this.r)}, ${Fd(this.g)}, ${Fd(this.b)}${e===1?")":`, ${e})`}`}function wv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ld(e){return e=Fd(e),(e<16?"0":"")+e.toString(16)}function GM(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kl(e,t,n,a)}function vz(e){if(e instanceof kl)return new kl(e.h,e.s,e.l,e.opacity);if(e instanceof Zg||(e=yg(e)),!e)return new kl;if(e instanceof kl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,u=Math.min(t,n,a),f=Math.max(t,n,a),p=NaN,s=f-u,P=(f+u)/2;return s?(t===f?p=(n-a)/s+(n<a)*6:n===f?p=(a-t)/s+2:p=(t-n)/s+4,s/=P<.5?f+u:2-f-u,p*=60):s=P>0&&P<1?0:p,new kl(p,s,P,e.opacity)}function jU(e,t,n,a){return arguments.length===1?vz(e):new kl(e,t,n,a??1)}function kl(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}W2(kl,jU,yz(Zg,{brighter(e){return e=e==null?bv:Math.pow(bv,e),new kl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mg:Math.pow(mg,e),new kl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,u=2*n-a;return new Po(F1(e>=240?e-240:e+120,u,a),F1(e,u,a),F1(e<120?e+240:e-120,u,a),this.opacity)},clamp(){return new kl(WM(this.h),Zy(this.s),Zy(this.l),wv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wv(this.opacity);return`${e===1?"hsl(":"hsla("}${WM(this.h)}, ${Zy(this.s)*100}%, ${Zy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function WM(e){return e=(e||0)%360,e<0?e+360:e}function Zy(e){return Math.max(0,Math.min(1,e||0))}function F1(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const H2=e=>()=>e;function LU(e,t){return function(n){return e+n*t}}function NU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function BU(e){return(e=+e)==1?_z:function(t,n){return n-t?NU(t,n,e):H2(isNaN(t)?n:t)}}function _z(e,t){var n=t-e;return n?LU(e,n):H2(isNaN(e)?t:e)}const HM=(function e(t){var n=BU(t);function a(u,f){var p=n((u=dS(u)).r,(f=dS(f)).r),s=n(u.g,f.g),P=n(u.b,f.b),A=_z(u.opacity,f.opacity);return function(E){return u.r=p(E),u.g=s(E),u.b=P(E),u.opacity=A(E),u+""}}return a.gamma=e,a})(1);function FU(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),u;return function(f){for(u=0;u<n;++u)a[u]=e[u]*(1-f)+t[u]*f;return a}}function $U(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function UU(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,u=new Array(a),f=new Array(n),p;for(p=0;p<a;++p)u[p]=Zp(e[p],t[p]);for(;p<n;++p)f[p]=t[p];return function(s){for(p=0;p<a;++p)f[p]=u[p](s);return f}}function VU(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function Sv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qU(e,t){var n={},a={},u;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(u in t)u in e?n[u]=Zp(e[u],t[u]):a[u]=t[u];return function(f){for(u in n)a[u]=n[u](f);return a}}var fS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$1=new RegExp(fS.source,"g");function GU(e){return function(){return e}}function WU(e){return function(t){return e(t)+""}}function HU(e,t){var n=fS.lastIndex=$1.lastIndex=0,a,u,f,p=-1,s=[],P=[];for(e=e+"",t=t+"";(a=fS.exec(e))&&(u=$1.exec(t));)(f=u.index)>n&&(f=t.slice(n,f),s[p]?s[p]+=f:s[++p]=f),(a=a[0])===(u=u[0])?s[p]?s[p]+=u:s[++p]=u:(s[++p]=null,P.push({i:p,x:Sv(a,u)})),n=$1.lastIndex;return n<t.length&&(f=t.slice(n),s[p]?s[p]+=f:s[++p]=f),s.length<2?P[0]?WU(P[0].x):GU(t):(t=P.length,function(A){for(var E=0,M;E<t;++E)s[(M=P[E]).i]=M.x(A);return s.join("")})}function Zp(e,t){var n=typeof t,a;return t==null||n==="boolean"?H2(t):(n==="number"?Sv:n==="string"?(a=yg(t))?(t=a,HM):HU:t instanceof yg?HM:t instanceof Date?VU:$U(t)?FU:Array.isArray(t)?UU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qU:Sv)(e,t)}function Z2(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function ZU(e,t){t===void 0&&(t=e,e=Zp);for(var n=0,a=t.length-1,u=t[0],f=new Array(a<0?0:a);n<a;)f[n]=e(u,u=t[++n]);return function(p){var s=Math.max(0,Math.min(a-1,Math.floor(p*=a)));return f[s](p-s)}}function XU(e){return function(){return e}}function Pv(e){return+e}var ZM=[0,1];function io(e){return e}function pS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:XU(isNaN(t)?NaN:.5)}function KU(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function YU(e,t,n){var a=e[0],u=e[1],f=t[0],p=t[1];return u<a?(a=pS(u,a),f=n(p,f)):(a=pS(a,u),f=n(f,p)),function(s){return f(a(s))}}function JU(e,t,n){var a=Math.min(e.length,t.length)-1,u=new Array(a),f=new Array(a),p=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++p<a;)u[p]=pS(e[p],e[p+1]),f[p]=n(t[p],t[p+1]);return function(s){var P=Hg(e,s,1,a)-1;return f[P](u[P](s))}}function Xg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function P_(){var e=ZM,t=ZM,n=Zp,a,u,f,p=io,s,P,A;function E(){var D=Math.min(e.length,t.length);return p!==io&&(p=KU(e[0],e[D-1])),s=D>2?JU:YU,P=A=null,M}function M(D){return D==null||isNaN(D=+D)?f:(P||(P=s(e.map(a),t,n)))(a(p(D)))}return M.invert=function(D){return p(u((A||(A=s(t,e.map(a),Sv)))(D)))},M.domain=function(D){return arguments.length?(e=Array.from(D,Pv),E()):e.slice()},M.range=function(D){return arguments.length?(t=Array.from(D),E()):t.slice()},M.rangeRound=function(D){return t=Array.from(D),n=Z2,E()},M.clamp=function(D){return arguments.length?(p=D?!0:io,E()):p!==io},M.interpolate=function(D){return arguments.length?(n=D,E()):n},M.unknown=function(D){return arguments.length?(f=D,M):f},function(D,j){return a=D,u=j,E()}}function X2(){return P_()(io,io)}function QU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Tv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function vp(e){return e=Tv(Math.abs(e)),e?e[1]:NaN}function eV(e,t){return function(n,a){for(var u=n.length,f=[],p=0,s=e[0],P=0;u>0&&s>0&&(P+s+1>a&&(s=Math.max(1,a-P)),f.push(n.substring(u-=s,u+s)),!((P+=s+1)>a));)s=e[p=(p+1)%e.length];return f.reverse().join(t)}}function tV(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var rV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vg(e){if(!(t=rV.exec(e)))throw new Error("invalid format: "+e);var t;return new K2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vg.prototype=K2.prototype;function K2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}K2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nV(e){e:for(var t=e.length,n=1,a=-1,u;n<t;++n)switch(e[n]){case".":a=u=n;break;case"0":a===0&&(a=n),u=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(u+1):e}var xz;function iV(e,t){var n=Tv(e,t);if(!n)return e+"";var a=n[0],u=n[1],f=u-(xz=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=a.length;return f===p?a:f>p?a+new Array(f-p+1).join("0"):f>0?a.slice(0,f)+"."+a.slice(f):"0."+new Array(1-f).join("0")+Tv(e,Math.max(0,t+f-1))[0]}function XM(e,t){var n=Tv(e,t);if(!n)return e+"";var a=n[0],u=n[1];return u<0?"0."+new Array(-u).join("0")+a:a.length>u+1?a.slice(0,u+1)+"."+a.slice(u+1):a+new Array(u-a.length+2).join("0")}const KM={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:QU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>XM(e*100,t),r:XM,s:iV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YM(e){return e}var JM=Array.prototype.map,QM=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function aV(e){var t=e.grouping===void 0||e.thousands===void 0?YM:eV(JM.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",f=e.numerals===void 0?YM:tV(JM.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",P=e.nan===void 0?"NaN":e.nan+"";function A(M){M=vg(M);var D=M.fill,j=M.align,G=M.sign,F=M.symbol,$=M.zero,K=M.width,J=M.comma,ee=M.precision,oe=M.trim,Y=M.type;Y==="n"?(J=!0,Y="g"):KM[Y]||(ee===void 0&&(ee=12),oe=!0,Y="g"),($||D==="0"&&j==="=")&&($=!0,D="0",j="=");var re=F==="$"?n:F==="#"&&/[boxX]/.test(Y)?"0"+Y.toLowerCase():"",ue=F==="$"?a:/[%p]/.test(Y)?p:"",ge=KM[Y],Oe=/[defgprs%]/.test(Y);ee=ee===void 0?6:/[gprs]/.test(Y)?Math.max(1,Math.min(21,ee)):Math.max(0,Math.min(20,ee));function We(Re){var Ve=re,Ye=ue,ot,at,st;if(Y==="c")Ye=ge(Re)+Ye,Re="";else{Re=+Re;var lt=Re<0||1/Re<0;if(Re=isNaN(Re)?P:ge(Math.abs(Re),ee),oe&&(Re=nV(Re)),lt&&+Re==0&&G!=="+"&&(lt=!1),Ve=(lt?G==="("?G:s:G==="-"||G==="("?"":G)+Ve,Ye=(Y==="s"?QM[8+xz/3]:"")+Ye+(lt&&G==="("?")":""),Oe){for(ot=-1,at=Re.length;++ot<at;)if(st=Re.charCodeAt(ot),48>st||st>57){Ye=(st===46?u+Re.slice(ot+1):Re.slice(ot))+Ye,Re=Re.slice(0,ot);break}}}J&&!$&&(Re=t(Re,1/0));var Ne=Ve.length+Re.length+Ye.length,tt=Ne<K?new Array(K-Ne+1).join(D):"";switch(J&&$&&(Re=t(tt+Re,tt.length?K-Ye.length:1/0),tt=""),j){case"<":Re=Ve+Re+Ye+tt;break;case"=":Re=Ve+tt+Re+Ye;break;case"^":Re=tt.slice(0,Ne=tt.length>>1)+Ve+Re+Ye+tt.slice(Ne);break;default:Re=tt+Ve+Re+Ye;break}return f(Re)}return We.toString=function(){return M+""},We}function E(M,D){var j=A((M=vg(M),M.type="f",M)),G=Math.max(-8,Math.min(8,Math.floor(vp(D)/3)))*3,F=Math.pow(10,-G),$=QM[8+G/3];return function(K){return j(F*K)+$}}return{format:A,formatPrefix:E}}var Xy,Y2,bz;oV({thousands:",",grouping:[3],currency:["$",""]});function oV(e){return Xy=aV(e),Y2=Xy.format,bz=Xy.formatPrefix,Xy}function sV(e){return Math.max(0,-vp(Math.abs(e)))}function lV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vp(t)/3)))*3-vp(Math.abs(e)))}function cV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vp(t)-vp(e))+1}function wz(e,t,n,a){var u=uS(e,t,n),f;switch(a=vg(a??",f"),a.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(f=lV(u,p))&&(a.precision=f),bz(a,p)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(f=cV(u,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=f-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(f=sV(u))&&(a.precision=f-(a.type==="%")*2);break}}return Y2(a)}function Dh(e){var t=e.domain;return e.ticks=function(n){var a=t();return lS(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var u=t();return wz(u[0],u[u.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),u=0,f=a.length-1,p=a[u],s=a[f],P,A,E=10;for(s<p&&(A=p,p=s,s=A,A=u,u=f,f=A);E-- >0;){if(A=cS(p,s,n),A===P)return a[u]=p,a[f]=s,t(a);if(A>0)p=Math.floor(p/A)*A,s=Math.ceil(s/A)*A;else if(A<0)p=Math.ceil(p*A)/A,s=Math.floor(s*A)/A;else break;P=A}return e},e}function Av(){var e=X2();return e.copy=function(){return Xg(e,Av())},Us.apply(e,arguments),Dh(e)}function Sz(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Pv),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return Sz(e).unknown(t)},e=arguments.length?Array.from(e,Pv):[0,1],Dh(n)}function Pz(e,t){e=e.slice();var n=0,a=e.length-1,u=e[n],f=e[a],p;return f<u&&(p=n,n=a,a=p,p=u,u=f,f=p),e[n]=t.floor(u),e[a]=t.ceil(f),e}function ek(e){return Math.log(e)}function tk(e){return Math.exp(e)}function uV(e){return-Math.log(-e)}function hV(e){return-Math.exp(-e)}function dV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function fV(e){return e===10?dV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rk(e){return(t,n)=>-e(-t,n)}function J2(e){const t=e(ek,tk),n=t.domain;let a=10,u,f;function p(){return u=pV(a),f=fV(a),n()[0]<0?(u=rk(u),f=rk(f),e(uV,hV)):e(ek,tk),t}return t.base=function(s){return arguments.length?(a=+s,p()):a},t.domain=function(s){return arguments.length?(n(s),p()):n()},t.ticks=s=>{const P=n();let A=P[0],E=P[P.length-1];const M=E<A;M&&([A,E]=[E,A]);let D=u(A),j=u(E),G,F;const $=s==null?10:+s;let K=[];if(!(a%1)&&j-D<$){if(D=Math.floor(D),j=Math.ceil(j),A>0){for(;D<=j;++D)for(G=1;G<a;++G)if(F=D<0?G/f(-D):G*f(D),!(F<A)){if(F>E)break;K.push(F)}}else for(;D<=j;++D)for(G=a-1;G>=1;--G)if(F=D>0?G/f(-D):G*f(D),!(F<A)){if(F>E)break;K.push(F)}K.length*2<$&&(K=lS(A,E,$))}else K=lS(D,j,Math.min(j-D,$)).map(f);return M?K.reverse():K},t.tickFormat=(s,P)=>{if(s==null&&(s=10),P==null&&(P=a===10?"s":","),typeof P!="function"&&(!(a%1)&&(P=vg(P)).precision==null&&(P.trim=!0),P=Y2(P)),s===1/0)return P;const A=Math.max(1,a*s/t.ticks().length);return E=>{let M=E/f(Math.round(u(E)));return M*a<a-.5&&(M*=a),M<=A?P(E):""}},t.nice=()=>n(Pz(n(),{floor:s=>f(Math.floor(u(s))),ceil:s=>f(Math.ceil(u(s)))})),t}function Tz(){const e=J2(P_()).domain([1,10]);return e.copy=()=>Xg(e,Tz()).base(e.base()),Us.apply(e,arguments),e}function nk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ik(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Q2(e){var t=1,n=e(nk(t),ik(t));return n.constant=function(a){return arguments.length?e(nk(t=+a),ik(t)):t},Dh(n)}function Az(){var e=Q2(P_());return e.copy=function(){return Xg(e,Az()).constant(e.constant())},Us.apply(e,arguments)}function ak(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function mV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function gV(e){return e<0?-e*e:e*e}function eP(e){var t=e(io,io),n=1;function a(){return n===1?e(io,io):n===.5?e(mV,gV):e(ak(n),ak(1/n))}return t.exponent=function(u){return arguments.length?(n=+u,a()):n},Dh(t)}function tP(){var e=eP(P_());return e.copy=function(){return Xg(e,tP()).exponent(e.exponent())},Us.apply(e,arguments),e}function yV(){return tP.apply(null,arguments).exponent(.5)}function ok(e){return Math.sign(e)*e*e}function vV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Cz(){var e=X2(),t=[0,1],n=!1,a;function u(f){var p=vV(e(f));return isNaN(p)?a:n?Math.round(p):p}return u.invert=function(f){return e.invert(ok(f))},u.domain=function(f){return arguments.length?(e.domain(f),u):e.domain()},u.range=function(f){return arguments.length?(e.range((t=Array.from(f,Pv)).map(ok)),u):t.slice()},u.rangeRound=function(f){return u.range(f).round(!0)},u.round=function(f){return arguments.length?(n=!!f,u):n},u.clamp=function(f){return arguments.length?(e.clamp(f),u):e.clamp()},u.unknown=function(f){return arguments.length?(a=f,u):a},u.copy=function(){return Cz(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Us.apply(u,arguments),Dh(u)}function Ez(){var e=[],t=[],n=[],a;function u(){var p=0,s=Math.max(1,t.length);for(n=new Array(s-1);++p<s;)n[p-1]=SU(e,p/s);return f}function f(p){return p==null||isNaN(p=+p)?a:t[Hg(n,p)]}return f.invertExtent=function(p){var s=t.indexOf(p);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},f.domain=function(p){if(!arguments.length)return e.slice();e=[];for(let s of p)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ih),u()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.unknown=function(p){return arguments.length?(a=p,f):a},f.quantiles=function(){return n.slice()},f.copy=function(){return Ez().domain(e).range(t).unknown(a)},Us.apply(f,arguments)}function Mz(){var e=0,t=1,n=1,a=[.5],u=[0,1],f;function p(P){return P!=null&&P<=P?u[Hg(a,P,0,n)]:f}function s(){var P=-1;for(a=new Array(n);++P<n;)a[P]=((P+1)*t-(P-n)*e)/(n+1);return p}return p.domain=function(P){return arguments.length?([e,t]=P,e=+e,t=+t,s()):[e,t]},p.range=function(P){return arguments.length?(n=(u=Array.from(P)).length-1,s()):u.slice()},p.invertExtent=function(P){var A=u.indexOf(P);return A<0?[NaN,NaN]:A<1?[e,a[0]]:A>=n?[a[n-1],t]:[a[A-1],a[A]]},p.unknown=function(P){return arguments.length&&(f=P),p},p.thresholds=function(){return a.slice()},p.copy=function(){return Mz().domain([e,t]).range(u).unknown(f)},Us.apply(Dh(p),arguments)}function kz(){var e=[.5],t=[0,1],n,a=1;function u(f){return f!=null&&f<=f?t[Hg(e,f,0,a)]:n}return u.domain=function(f){return arguments.length?(e=Array.from(f),a=Math.min(e.length,t.length-1),u):e.slice()},u.range=function(f){return arguments.length?(t=Array.from(f),a=Math.min(e.length,t.length-1),u):t.slice()},u.invertExtent=function(f){var p=t.indexOf(f);return[e[p-1],e[p]]},u.unknown=function(f){return arguments.length?(n=f,u):n},u.copy=function(){return kz().domain(e).range(t).unknown(n)},Us.apply(u,arguments)}const U1=new Date,V1=new Date;function Zi(e,t,n,a){function u(f){return e(f=arguments.length===0?new Date:new Date(+f)),f}return u.floor=f=>(e(f=new Date(+f)),f),u.ceil=f=>(e(f=new Date(f-1)),t(f,1),e(f),f),u.round=f=>{const p=u(f),s=u.ceil(f);return f-p<s-f?p:s},u.offset=(f,p)=>(t(f=new Date(+f),p==null?1:Math.floor(p)),f),u.range=(f,p,s)=>{const P=[];if(f=u.ceil(f),s=s==null?1:Math.floor(s),!(f<p)||!(s>0))return P;let A;do P.push(A=new Date(+f)),t(f,s),e(f);while(A<f&&f<p);return P},u.filter=f=>Zi(p=>{if(p>=p)for(;e(p),!f(p);)p.setTime(p-1)},(p,s)=>{if(p>=p)if(s<0)for(;++s<=0;)for(;t(p,-1),!f(p););else for(;--s>=0;)for(;t(p,1),!f(p););}),n&&(u.count=(f,p)=>(U1.setTime(+f),V1.setTime(+p),e(U1),e(V1),Math.floor(n(U1,V1))),u.every=f=>(f=Math.floor(f),!isFinite(f)||!(f>0)?null:f>1?u.filter(a?p=>a(p)%f===0:p=>u.count(0,p)%f===0):u)),u}const Cv=Zi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Cv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zi(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Cv);Cv.range;const Mu=1e3,Bs=Mu*60,ku=Bs*60,Du=ku*24,rP=Du*7,sk=Du*30,q1=Du*365,Nd=Zi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Mu)},(e,t)=>(t-e)/Mu,e=>e.getUTCSeconds());Nd.range;const nP=Zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mu)},(e,t)=>{e.setTime(+e+t*Bs)},(e,t)=>(t-e)/Bs,e=>e.getMinutes());nP.range;const iP=Zi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bs)},(e,t)=>(t-e)/Bs,e=>e.getUTCMinutes());iP.range;const aP=Zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mu-e.getMinutes()*Bs)},(e,t)=>{e.setTime(+e+t*ku)},(e,t)=>(t-e)/ku,e=>e.getHours());aP.range;const oP=Zi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ku)},(e,t)=>(t-e)/ku,e=>e.getUTCHours());oP.range;const Kg=Zi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bs)/Du,e=>e.getDate()-1);Kg.range;const T_=Zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Du,e=>e.getUTCDate()-1);T_.range;const Iz=Zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Du,e=>Math.floor(e/Du));Iz.range;function Jd(e){return Zi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Bs)/rP)}const A_=Jd(0),Ev=Jd(1),_V=Jd(2),xV=Jd(3),_p=Jd(4),bV=Jd(5),wV=Jd(6);A_.range;Ev.range;_V.range;xV.range;_p.range;bV.range;wV.range;function Qd(e){return Zi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/rP)}const C_=Qd(0),Mv=Qd(1),SV=Qd(2),PV=Qd(3),xp=Qd(4),TV=Qd(5),AV=Qd(6);C_.range;Mv.range;SV.range;PV.range;xp.range;TV.range;AV.range;const sP=Zi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());sP.range;const lP=Zi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());lP.range;const zu=Zi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());zu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});zu.range;const ju=Zi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ju.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ju.range;function Oz(e,t,n,a,u,f){const p=[[Nd,1,Mu],[Nd,5,5*Mu],[Nd,15,15*Mu],[Nd,30,30*Mu],[f,1,Bs],[f,5,5*Bs],[f,15,15*Bs],[f,30,30*Bs],[u,1,ku],[u,3,3*ku],[u,6,6*ku],[u,12,12*ku],[a,1,Du],[a,2,2*Du],[n,1,rP],[t,1,sk],[t,3,3*sk],[e,1,q1]];function s(A,E,M){const D=E<A;D&&([A,E]=[E,A]);const j=M&&typeof M.range=="function"?M:P(A,E,M),G=j?j.range(A,+E+1):[];return D?G.reverse():G}function P(A,E,M){const D=Math.abs(E-A)/M,j=q2(([,,$])=>$).right(p,D);if(j===p.length)return e.every(uS(A/q1,E/q1,M));if(j===0)return Cv.every(Math.max(uS(A,E,M),1));const[G,F]=p[D/p[j-1][2]<p[j][2]/D?j-1:j];return G.every(F)}return[s,P]}const[CV,EV]=Oz(ju,lP,C_,Iz,oP,iP),[MV,kV]=Oz(zu,sP,A_,Kg,aP,nP);function G1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function W1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function IV(e){var t=e.dateTime,n=e.date,a=e.time,u=e.periods,f=e.days,p=e.shortDays,s=e.months,P=e.shortMonths,A=$m(u),E=Um(u),M=$m(f),D=Um(f),j=$m(p),G=Um(p),F=$m(s),$=Um(s),K=$m(P),J=Um(P),ee={a:lt,A:Ne,b:tt,B:ut,c:null,d:fk,e:fk,f:eq,g:uq,G:dq,H:YV,I:JV,j:QV,L:Rz,m:tq,M:rq,p:Ce,q:qe,Q:gk,s:yk,S:nq,u:iq,U:aq,V:oq,w:sq,W:lq,x:null,X:null,y:cq,Y:hq,Z:fq,"%":mk},oe={a:yt,A:Rt,b:$t,B:Wt,c:null,d:pk,e:pk,f:yq,g:Cq,G:Mq,H:pq,I:mq,j:gq,L:zz,m:vq,M:_q,p:er,q:tr,Q:gk,s:yk,S:xq,u:bq,U:wq,V:Sq,w:Pq,W:Tq,x:null,X:null,y:Aq,Y:Eq,Z:kq,"%":mk},Y={a:We,A:Re,b:Ve,B:Ye,c:ot,d:hk,e:hk,f:HV,g:uk,G:ck,H:dk,I:dk,j:VV,L:WV,m:UV,M:qV,p:Oe,q:$V,Q:XV,s:KV,S:GV,u:jV,U:LV,V:NV,w:zV,W:BV,x:at,X:st,y:uk,Y:ck,Z:FV,"%":ZV};ee.x=re(n,ee),ee.X=re(a,ee),ee.c=re(t,ee),oe.x=re(n,oe),oe.X=re(a,oe),oe.c=re(t,oe);function re(vt,Ft){return function(ir){var pt=[],dr=-1,rr=0,qr=vt.length,Hr,vn,qn;for(ir instanceof Date||(ir=new Date(+ir));++dr<qr;)vt.charCodeAt(dr)===37&&(pt.push(vt.slice(rr,dr)),(vn=lk[Hr=vt.charAt(++dr)])!=null?Hr=vt.charAt(++dr):vn=Hr==="e"?" ":"0",(qn=Ft[Hr])&&(Hr=qn(ir,vn)),pt.push(Hr),rr=dr+1);return pt.push(vt.slice(rr,dr)),pt.join("")}}function ue(vt,Ft){return function(ir){var pt=Fm(1900,void 0,1),dr=ge(pt,vt,ir+="",0),rr,qr;if(dr!=ir.length)return null;if("Q"in pt)return new Date(pt.Q);if("s"in pt)return new Date(pt.s*1e3+("L"in pt?pt.L:0));if(Ft&&!("Z"in pt)&&(pt.Z=0),"p"in pt&&(pt.H=pt.H%12+pt.p*12),pt.m===void 0&&(pt.m="q"in pt?pt.q:0),"V"in pt){if(pt.V<1||pt.V>53)return null;"w"in pt||(pt.w=1),"Z"in pt?(rr=W1(Fm(pt.y,0,1)),qr=rr.getUTCDay(),rr=qr>4||qr===0?Mv.ceil(rr):Mv(rr),rr=T_.offset(rr,(pt.V-1)*7),pt.y=rr.getUTCFullYear(),pt.m=rr.getUTCMonth(),pt.d=rr.getUTCDate()+(pt.w+6)%7):(rr=G1(Fm(pt.y,0,1)),qr=rr.getDay(),rr=qr>4||qr===0?Ev.ceil(rr):Ev(rr),rr=Kg.offset(rr,(pt.V-1)*7),pt.y=rr.getFullYear(),pt.m=rr.getMonth(),pt.d=rr.getDate()+(pt.w+6)%7)}else("W"in pt||"U"in pt)&&("w"in pt||(pt.w="u"in pt?pt.u%7:"W"in pt?1:0),qr="Z"in pt?W1(Fm(pt.y,0,1)).getUTCDay():G1(Fm(pt.y,0,1)).getDay(),pt.m=0,pt.d="W"in pt?(pt.w+6)%7+pt.W*7-(qr+5)%7:pt.w+pt.U*7-(qr+6)%7);return"Z"in pt?(pt.H+=pt.Z/100|0,pt.M+=pt.Z%100,W1(pt)):G1(pt)}}function ge(vt,Ft,ir,pt){for(var dr=0,rr=Ft.length,qr=ir.length,Hr,vn;dr<rr;){if(pt>=qr)return-1;if(Hr=Ft.charCodeAt(dr++),Hr===37){if(Hr=Ft.charAt(dr++),vn=Y[Hr in lk?Ft.charAt(dr++):Hr],!vn||(pt=vn(vt,ir,pt))<0)return-1}else if(Hr!=ir.charCodeAt(pt++))return-1}return pt}function Oe(vt,Ft,ir){var pt=A.exec(Ft.slice(ir));return pt?(vt.p=E.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function We(vt,Ft,ir){var pt=j.exec(Ft.slice(ir));return pt?(vt.w=G.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function Re(vt,Ft,ir){var pt=M.exec(Ft.slice(ir));return pt?(vt.w=D.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function Ve(vt,Ft,ir){var pt=K.exec(Ft.slice(ir));return pt?(vt.m=J.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function Ye(vt,Ft,ir){var pt=F.exec(Ft.slice(ir));return pt?(vt.m=$.get(pt[0].toLowerCase()),ir+pt[0].length):-1}function ot(vt,Ft,ir){return ge(vt,t,Ft,ir)}function at(vt,Ft,ir){return ge(vt,n,Ft,ir)}function st(vt,Ft,ir){return ge(vt,a,Ft,ir)}function lt(vt){return p[vt.getDay()]}function Ne(vt){return f[vt.getDay()]}function tt(vt){return P[vt.getMonth()]}function ut(vt){return s[vt.getMonth()]}function Ce(vt){return u[+(vt.getHours()>=12)]}function qe(vt){return 1+~~(vt.getMonth()/3)}function yt(vt){return p[vt.getUTCDay()]}function Rt(vt){return f[vt.getUTCDay()]}function $t(vt){return P[vt.getUTCMonth()]}function Wt(vt){return s[vt.getUTCMonth()]}function er(vt){return u[+(vt.getUTCHours()>=12)]}function tr(vt){return 1+~~(vt.getUTCMonth()/3)}return{format:function(vt){var Ft=re(vt+="",ee);return Ft.toString=function(){return vt},Ft},parse:function(vt){var Ft=ue(vt+="",!1);return Ft.toString=function(){return vt},Ft},utcFormat:function(vt){var Ft=re(vt+="",oe);return Ft.toString=function(){return vt},Ft},utcParse:function(vt){var Ft=ue(vt+="",!0);return Ft.toString=function(){return vt},Ft}}}var lk={"-":"",_:" ",0:"0"},aa=/^\s*\d+/,OV=/^%/,RV=/[\\^$*+?|[\]().{}]/g;function an(e,t,n){var a=e<0?"-":"",u=(a?-e:e)+"",f=u.length;return a+(f<n?new Array(n-f+1).join(t)+u:u)}function DV(e){return e.replace(RV,"\\$&")}function $m(e){return new RegExp("^(?:"+e.map(DV).join("|")+")","i")}function Um(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function zV(e,t,n){var a=aa.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function jV(e,t,n){var a=aa.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function LV(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function NV(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function BV(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function ck(e,t,n){var a=aa.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function uk(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function FV(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function $V(e,t,n){var a=aa.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function UV(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function hk(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function VV(e,t,n){var a=aa.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function dk(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function qV(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function GV(e,t,n){var a=aa.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function WV(e,t,n){var a=aa.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function HV(e,t,n){var a=aa.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function ZV(e,t,n){var a=OV.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function XV(e,t,n){var a=aa.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function KV(e,t,n){var a=aa.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function fk(e,t){return an(e.getDate(),t,2)}function YV(e,t){return an(e.getHours(),t,2)}function JV(e,t){return an(e.getHours()%12||12,t,2)}function QV(e,t){return an(1+Kg.count(zu(e),e),t,3)}function Rz(e,t){return an(e.getMilliseconds(),t,3)}function eq(e,t){return Rz(e,t)+"000"}function tq(e,t){return an(e.getMonth()+1,t,2)}function rq(e,t){return an(e.getMinutes(),t,2)}function nq(e,t){return an(e.getSeconds(),t,2)}function iq(e){var t=e.getDay();return t===0?7:t}function aq(e,t){return an(A_.count(zu(e)-1,e),t,2)}function Dz(e){var t=e.getDay();return t>=4||t===0?_p(e):_p.ceil(e)}function oq(e,t){return e=Dz(e),an(_p.count(zu(e),e)+(zu(e).getDay()===4),t,2)}function sq(e){return e.getDay()}function lq(e,t){return an(Ev.count(zu(e)-1,e),t,2)}function cq(e,t){return an(e.getFullYear()%100,t,2)}function uq(e,t){return e=Dz(e),an(e.getFullYear()%100,t,2)}function hq(e,t){return an(e.getFullYear()%1e4,t,4)}function dq(e,t){var n=e.getDay();return e=n>=4||n===0?_p(e):_p.ceil(e),an(e.getFullYear()%1e4,t,4)}function fq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+an(t/60|0,"0",2)+an(t%60,"0",2)}function pk(e,t){return an(e.getUTCDate(),t,2)}function pq(e,t){return an(e.getUTCHours(),t,2)}function mq(e,t){return an(e.getUTCHours()%12||12,t,2)}function gq(e,t){return an(1+T_.count(ju(e),e),t,3)}function zz(e,t){return an(e.getUTCMilliseconds(),t,3)}function yq(e,t){return zz(e,t)+"000"}function vq(e,t){return an(e.getUTCMonth()+1,t,2)}function _q(e,t){return an(e.getUTCMinutes(),t,2)}function xq(e,t){return an(e.getUTCSeconds(),t,2)}function bq(e){var t=e.getUTCDay();return t===0?7:t}function wq(e,t){return an(C_.count(ju(e)-1,e),t,2)}function jz(e){var t=e.getUTCDay();return t>=4||t===0?xp(e):xp.ceil(e)}function Sq(e,t){return e=jz(e),an(xp.count(ju(e),e)+(ju(e).getUTCDay()===4),t,2)}function Pq(e){return e.getUTCDay()}function Tq(e,t){return an(Mv.count(ju(e)-1,e),t,2)}function Aq(e,t){return an(e.getUTCFullYear()%100,t,2)}function Cq(e,t){return e=jz(e),an(e.getUTCFullYear()%100,t,2)}function Eq(e,t){return an(e.getUTCFullYear()%1e4,t,4)}function Mq(e,t){var n=e.getUTCDay();return e=n>=4||n===0?xp(e):xp.ceil(e),an(e.getUTCFullYear()%1e4,t,4)}function kq(){return"+0000"}function mk(){return"%"}function gk(e){return+e}function yk(e){return Math.floor(+e/1e3)}var Jf,Lz,Nz;Iq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Iq(e){return Jf=IV(e),Lz=Jf.format,Jf.parse,Nz=Jf.utcFormat,Jf.utcParse,Jf}function Oq(e){return new Date(e)}function Rq(e){return e instanceof Date?+e:+new Date(+e)}function cP(e,t,n,a,u,f,p,s,P,A){var E=X2(),M=E.invert,D=E.domain,j=A(".%L"),G=A(":%S"),F=A("%I:%M"),$=A("%I %p"),K=A("%a %d"),J=A("%b %d"),ee=A("%B"),oe=A("%Y");function Y(re){return(P(re)<re?j:s(re)<re?G:p(re)<re?F:f(re)<re?$:a(re)<re?u(re)<re?K:J:n(re)<re?ee:oe)(re)}return E.invert=function(re){return new Date(M(re))},E.domain=function(re){return arguments.length?D(Array.from(re,Rq)):D().map(Oq)},E.ticks=function(re){var ue=D();return e(ue[0],ue[ue.length-1],re??10)},E.tickFormat=function(re,ue){return ue==null?Y:A(ue)},E.nice=function(re){var ue=D();return(!re||typeof re.range!="function")&&(re=t(ue[0],ue[ue.length-1],re??10)),re?D(Pz(ue,re)):E},E.copy=function(){return Xg(E,cP(e,t,n,a,u,f,p,s,P,A))},E}function Dq(){return Us.apply(cP(MV,kV,zu,sP,A_,Kg,aP,nP,Nd,Lz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function zq(){return Us.apply(cP(CV,EV,ju,lP,C_,T_,oP,iP,Nd,Nz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function E_(){var e=0,t=1,n,a,u,f,p=io,s=!1,P;function A(M){return M==null||isNaN(M=+M)?P:p(u===0?.5:(M=(f(M)-n)*u,s?Math.max(0,Math.min(1,M)):M))}A.domain=function(M){return arguments.length?([e,t]=M,n=f(e=+e),a=f(t=+t),u=n===a?0:1/(a-n),A):[e,t]},A.clamp=function(M){return arguments.length?(s=!!M,A):s},A.interpolator=function(M){return arguments.length?(p=M,A):p};function E(M){return function(D){var j,G;return arguments.length?([j,G]=D,p=M(j,G),A):[p(0),p(1)]}}return A.range=E(Zp),A.rangeRound=E(Z2),A.unknown=function(M){return arguments.length?(P=M,A):P},function(M){return f=M,n=M(e),a=M(t),u=n===a?0:1/(a-n),A}}function zh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Bz(){var e=Dh(E_()(io));return e.copy=function(){return zh(e,Bz())},Bu.apply(e,arguments)}function Fz(){var e=J2(E_()).domain([1,10]);return e.copy=function(){return zh(e,Fz()).base(e.base())},Bu.apply(e,arguments)}function $z(){var e=Q2(E_());return e.copy=function(){return zh(e,$z()).constant(e.constant())},Bu.apply(e,arguments)}function uP(){var e=eP(E_());return e.copy=function(){return zh(e,uP()).exponent(e.exponent())},Bu.apply(e,arguments)}function jq(){return uP.apply(null,arguments).exponent(.5)}function Uz(){var e=[],t=io;function n(a){if(a!=null&&!isNaN(a=+a))return t((Hg(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let u of a)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ih),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,u)=>t(u/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(u,f)=>wU(e,f/a))},n.copy=function(){return Uz(t).domain(e)},Bu.apply(n,arguments)}function M_(){var e=0,t=.5,n=1,a=1,u,f,p,s,P,A=io,E,M=!1,D;function j(F){return isNaN(F=+F)?D:(F=.5+((F=+E(F))-f)*(a*F<a*f?s:P),A(M?Math.max(0,Math.min(1,F)):F))}j.domain=function(F){return arguments.length?([e,t,n]=F,u=E(e=+e),f=E(t=+t),p=E(n=+n),s=u===f?0:.5/(f-u),P=f===p?0:.5/(p-f),a=f<u?-1:1,j):[e,t,n]},j.clamp=function(F){return arguments.length?(M=!!F,j):M},j.interpolator=function(F){return arguments.length?(A=F,j):A};function G(F){return function($){var K,J,ee;return arguments.length?([K,J,ee]=$,A=ZU(F,[K,J,ee]),j):[A(0),A(.5),A(1)]}}return j.range=G(Zp),j.rangeRound=G(Z2),j.unknown=function(F){return arguments.length?(D=F,j):D},function(F){return E=F,u=F(e),f=F(t),p=F(n),s=u===f?0:.5/(f-u),P=f===p?0:.5/(p-f),a=f<u?-1:1,j}}function Vz(){var e=Dh(M_()(io));return e.copy=function(){return zh(e,Vz())},Bu.apply(e,arguments)}function qz(){var e=J2(M_()).domain([.1,1,10]);return e.copy=function(){return zh(e,qz()).base(e.base())},Bu.apply(e,arguments)}function Gz(){var e=Q2(M_());return e.copy=function(){return zh(e,Gz()).constant(e.constant())},Bu.apply(e,arguments)}function hP(){var e=eP(M_());return e.copy=function(){return zh(e,hP()).exponent(e.exponent())},Bu.apply(e,arguments)}function Lq(){return hP.apply(null,arguments).exponent(.5)}const vk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pg,scaleDiverging:Vz,scaleDivergingLog:qz,scaleDivergingPow:hP,scaleDivergingSqrt:Lq,scaleDivergingSymlog:Gz,scaleIdentity:Sz,scaleImplicit:hS,scaleLinear:Av,scaleLog:Tz,scaleOrdinal:G2,scalePoint:Jm,scalePow:tP,scaleQuantile:Ez,scaleQuantize:Mz,scaleRadial:Cz,scaleSequential:Bz,scaleSequentialLog:Fz,scaleSequentialPow:uP,scaleSequentialQuantile:Uz,scaleSequentialSqrt:jq,scaleSequentialSymlog:$z,scaleSqrt:yV,scaleSymlog:Az,scaleThreshold:kz,scaleTime:Dq,scaleUtc:zq,tickFormat:wz},Symbol.toStringTag,{value:"Module"}));var H1,_k;function k_(){if(_k)return H1;_k=1;var e=qp();function t(n,a,u){for(var f=-1,p=n.length;++f<p;){var s=n[f],P=a(s);if(P!=null&&(A===void 0?P===P&&!e(P):u(P,A)))var A=P,E=s}return E}return H1=t,H1}var Z1,xk;function Wz(){if(xk)return Z1;xk=1;function e(t,n){return t>n}return Z1=e,Z1}var X1,bk;function Nq(){if(bk)return X1;bk=1;var e=k_(),t=Wz(),n=Hp();function a(u){return u&&u.length?e(u,n,t):void 0}return X1=a,X1}var Bq=Nq();const I_=ln(Bq);var K1,wk;function Hz(){if(wk)return K1;wk=1;function e(t,n){return t<n}return K1=e,K1}var Y1,Sk;function Fq(){if(Sk)return Y1;Sk=1;var e=k_(),t=Hz(),n=Hp();function a(u){return u&&u.length?e(u,n,t):void 0}return Y1=a,Y1}var $q=Fq();const O_=ln($q);var J1,Pk;function Uq(){if(Pk)return J1;Pk=1;var e=C2(),t=Oc(),n=rz(),a=To();function u(f,p){var s=a(f)?e:n;return s(f,t(p,3))}return J1=u,J1}var Q1,Tk;function Vq(){if(Tk)return Q1;Tk=1;var e=ez(),t=Uq();function n(a,u){return e(t(a,u),1)}return Q1=n,Q1}var qq=Vq();const Gq=ln(qq);var ew,Ak;function Wq(){if(Ak)return ew;Ak=1;var e=F2();function t(n,a){return e(n,a)}return ew=t,ew}var Hq=Wq();const Yg=ln(Hq);var Xp=1e9,Zq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},fP,Zn=!0,$s="[DecimalError] ",$d=$s+"Invalid argument: ",dP=$s+"Exponent out of range: ",Kp=Math.floor,zd=Math.pow,Xq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,es,na=1e7,Vn=7,Zz=9007199254740991,kv=Kp(Zz/Vn),Zt={};Zt.absoluteValue=Zt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Zt.comparedTo=Zt.cmp=function(e){var t,n,a,u,f=this;if(e=new f.constructor(e),f.s!==e.s)return f.s||-e.s;if(f.e!==e.e)return f.e>e.e^f.s<0?1:-1;for(a=f.d.length,u=e.d.length,t=0,n=a<u?a:u;t<n;++t)if(f.d[t]!==e.d[t])return f.d[t]>e.d[t]^f.s<0?1:-1;return a===u?0:a>u^f.s<0?1:-1};Zt.decimalPlaces=Zt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Vn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Zt.dividedBy=Zt.div=function(e){return Ou(this,new this.constructor(e))};Zt.dividedToIntegerBy=Zt.idiv=function(e){var t=this,n=t.constructor;return wn(Ou(t,new n(e),0,1),n.precision)};Zt.equals=Zt.eq=function(e){return!this.cmp(e)};Zt.exponent=function(){return Mi(this)};Zt.greaterThan=Zt.gt=function(e){return this.cmp(e)>0};Zt.greaterThanOrEqualTo=Zt.gte=function(e){return this.cmp(e)>=0};Zt.isInteger=Zt.isint=function(){return this.e>this.d.length-2};Zt.isNegative=Zt.isneg=function(){return this.s<0};Zt.isPositive=Zt.ispos=function(){return this.s>0};Zt.isZero=function(){return this.s===0};Zt.lessThan=Zt.lt=function(e){return this.cmp(e)<0};Zt.lessThanOrEqualTo=Zt.lte=function(e){return this.cmp(e)<1};Zt.logarithm=Zt.log=function(e){var t,n=this,a=n.constructor,u=a.precision,f=u+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(es))throw Error($s+"NaN");if(n.s<1)throw Error($s+(n.s?"NaN":"-Infinity"));return n.eq(es)?new a(0):(Zn=!1,t=Ou(_g(n,f),_g(e,f),f),Zn=!0,wn(t,u))};Zt.minus=Zt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Yz(t,e):Xz(t,(e.s=-e.s,e))};Zt.modulo=Zt.mod=function(e){var t,n=this,a=n.constructor,u=a.precision;if(e=new a(e),!e.s)throw Error($s+"NaN");return n.s?(Zn=!1,t=Ou(n,e,0,1).times(e),Zn=!0,n.minus(t)):wn(new a(n),u)};Zt.naturalExponential=Zt.exp=function(){return Kz(this)};Zt.naturalLogarithm=Zt.ln=function(){return _g(this)};Zt.negated=Zt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Zt.plus=Zt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Xz(t,e):Yz(t,(e.s=-e.s,e))};Zt.precision=Zt.sd=function(e){var t,n,a,u=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error($d+e);if(t=Mi(u)+1,a=u.d.length-1,n=a*Vn+1,a=u.d[a],a){for(;a%10==0;a/=10)n--;for(a=u.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};Zt.squareRoot=Zt.sqrt=function(){var e,t,n,a,u,f,p,s=this,P=s.constructor;if(s.s<1){if(!s.s)return new P(0);throw Error($s+"NaN")}for(e=Mi(s),Zn=!1,u=Math.sqrt(+s),u==0||u==1/0?(t=Ac(s.d),(t.length+e)%2==0&&(t+="0"),u=Math.sqrt(t),e=Kp((e+1)/2)-(e<0||e%2),u==1/0?t="5e"+e:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new P(t)):a=new P(u.toString()),n=P.precision,u=p=n+3;;)if(f=a,a=f.plus(Ou(s,f,p+2)).times(.5),Ac(f.d).slice(0,p)===(t=Ac(a.d)).slice(0,p)){if(t=t.slice(p-3,p+1),u==p&&t=="4999"){if(wn(f,n+1,0),f.times(f).eq(s)){a=f;break}}else if(t!="9999")break;p+=4}return Zn=!0,wn(a,n)};Zt.times=Zt.mul=function(e){var t,n,a,u,f,p,s,P,A,E=this,M=E.constructor,D=E.d,j=(e=new M(e)).d;if(!E.s||!e.s)return new M(0);for(e.s*=E.s,n=E.e+e.e,P=D.length,A=j.length,P<A&&(f=D,D=j,j=f,p=P,P=A,A=p),f=[],p=P+A,a=p;a--;)f.push(0);for(a=A;--a>=0;){for(t=0,u=P+a;u>a;)s=f[u]+j[a]*D[u-a-1]+t,f[u--]=s%na|0,t=s/na|0;f[u]=(f[u]+t)%na|0}for(;!f[--p];)f.pop();return t?++n:f.shift(),e.d=f,e.e=n,Zn?wn(e,M.precision):e};Zt.toDecimalPlaces=Zt.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Mc(e,0,Xp),t===void 0?t=a.rounding:Mc(t,0,8),wn(n,e+Mi(n)+1,t))};Zt.toExponential=function(e,t){var n,a=this,u=a.constructor;return e===void 0?n=Hd(a,!0):(Mc(e,0,Xp),t===void 0?t=u.rounding:Mc(t,0,8),a=wn(new u(a),e+1,t),n=Hd(a,!0,e+1)),n};Zt.toFixed=function(e,t){var n,a,u=this,f=u.constructor;return e===void 0?Hd(u):(Mc(e,0,Xp),t===void 0?t=f.rounding:Mc(t,0,8),a=wn(new f(u),e+Mi(u)+1,t),n=Hd(a.abs(),!1,e+Mi(a)+1),u.isneg()&&!u.isZero()?"-"+n:n)};Zt.toInteger=Zt.toint=function(){var e=this,t=e.constructor;return wn(new t(e),Mi(e)+1,t.rounding)};Zt.toNumber=function(){return+this};Zt.toPower=Zt.pow=function(e){var t,n,a,u,f,p,s=this,P=s.constructor,A=12,E=+(e=new P(e));if(!e.s)return new P(es);if(s=new P(s),!s.s){if(e.s<1)throw Error($s+"Infinity");return s}if(s.eq(es))return s;if(a=P.precision,e.eq(es))return wn(s,a);if(t=e.e,n=e.d.length-1,p=t>=n,f=s.s,p){if((n=E<0?-E:E)<=Zz){for(u=new P(es),t=Math.ceil(a/Vn+4),Zn=!1;n%2&&(u=u.times(s),Ek(u.d,t)),n=Kp(n/2),n!==0;)s=s.times(s),Ek(s.d,t);return Zn=!0,e.s<0?new P(es).div(u):wn(u,a)}}else if(f<0)throw Error($s+"NaN");return f=f<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,Zn=!1,u=e.times(_g(s,a+A)),Zn=!0,u=Kz(u),u.s=f,u};Zt.toPrecision=function(e,t){var n,a,u=this,f=u.constructor;return e===void 0?(n=Mi(u),a=Hd(u,n<=f.toExpNeg||n>=f.toExpPos)):(Mc(e,1,Xp),t===void 0?t=f.rounding:Mc(t,0,8),u=wn(new f(u),e,t),n=Mi(u),a=Hd(u,e<=n||n<=f.toExpNeg,e)),a};Zt.toSignificantDigits=Zt.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Mc(e,1,Xp),t===void 0?t=a.rounding:Mc(t,0,8)),wn(new a(n),e,t)};Zt.toString=Zt.valueOf=Zt.val=Zt.toJSON=Zt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Mi(e),n=e.constructor;return Hd(e,t<=n.toExpNeg||t>=n.toExpPos)};function Xz(e,t){var n,a,u,f,p,s,P,A,E=e.constructor,M=E.precision;if(!e.s||!t.s)return t.s||(t=new E(e)),Zn?wn(t,M):t;if(P=e.d,A=t.d,p=e.e,u=t.e,P=P.slice(),f=p-u,f){for(f<0?(a=P,f=-f,s=A.length):(a=A,u=p,s=P.length),p=Math.ceil(M/Vn),s=p>s?p+1:s+1,f>s&&(f=s,a.length=1),a.reverse();f--;)a.push(0);a.reverse()}for(s=P.length,f=A.length,s-f<0&&(f=s,a=A,A=P,P=a),n=0;f;)n=(P[--f]=P[f]+A[f]+n)/na|0,P[f]%=na;for(n&&(P.unshift(n),++u),s=P.length;P[--s]==0;)P.pop();return t.d=P,t.e=u,Zn?wn(t,M):t}function Mc(e,t,n){if(e!==~~e||e<t||e>n)throw Error($d+e)}function Ac(e){var t,n,a,u=e.length-1,f="",p=e[0];if(u>0){for(f+=p,t=1;t<u;t++)a=e[t]+"",n=Vn-a.length,n&&(f+=Ah(n)),f+=a;p=e[t],a=p+"",n=Vn-a.length,n&&(f+=Ah(n))}else if(p===0)return"0";for(;p%10===0;)p/=10;return f+p}var Ou=(function(){function e(a,u){var f,p=0,s=a.length;for(a=a.slice();s--;)f=a[s]*u+p,a[s]=f%na|0,p=f/na|0;return p&&a.unshift(p),a}function t(a,u,f,p){var s,P;if(f!=p)P=f>p?1:-1;else for(s=P=0;s<f;s++)if(a[s]!=u[s]){P=a[s]>u[s]?1:-1;break}return P}function n(a,u,f){for(var p=0;f--;)a[f]-=p,p=a[f]<u[f]?1:0,a[f]=p*na+a[f]-u[f];for(;!a[0]&&a.length>1;)a.shift()}return function(a,u,f,p){var s,P,A,E,M,D,j,G,F,$,K,J,ee,oe,Y,re,ue,ge,Oe=a.constructor,We=a.s==u.s?1:-1,Re=a.d,Ve=u.d;if(!a.s)return new Oe(a);if(!u.s)throw Error($s+"Division by zero");for(P=a.e-u.e,ue=Ve.length,Y=Re.length,j=new Oe(We),G=j.d=[],A=0;Ve[A]==(Re[A]||0);)++A;if(Ve[A]>(Re[A]||0)&&--P,f==null?J=f=Oe.precision:p?J=f+(Mi(a)-Mi(u))+1:J=f,J<0)return new Oe(0);if(J=J/Vn+2|0,A=0,ue==1)for(E=0,Ve=Ve[0],J++;(A<Y||E)&&J--;A++)ee=E*na+(Re[A]||0),G[A]=ee/Ve|0,E=ee%Ve|0;else{for(E=na/(Ve[0]+1)|0,E>1&&(Ve=e(Ve,E),Re=e(Re,E),ue=Ve.length,Y=Re.length),oe=ue,F=Re.slice(0,ue),$=F.length;$<ue;)F[$++]=0;ge=Ve.slice(),ge.unshift(0),re=Ve[0],Ve[1]>=na/2&&++re;do E=0,s=t(Ve,F,ue,$),s<0?(K=F[0],ue!=$&&(K=K*na+(F[1]||0)),E=K/re|0,E>1?(E>=na&&(E=na-1),M=e(Ve,E),D=M.length,$=F.length,s=t(M,F,D,$),s==1&&(E--,n(M,ue<D?ge:Ve,D))):(E==0&&(s=E=1),M=Ve.slice()),D=M.length,D<$&&M.unshift(0),n(F,M,$),s==-1&&($=F.length,s=t(Ve,F,ue,$),s<1&&(E++,n(F,ue<$?ge:Ve,$))),$=F.length):s===0&&(E++,F=[0]),G[A++]=E,s&&F[0]?F[$++]=Re[oe]||0:(F=[Re[oe]],$=1);while((oe++<Y||F[0]!==void 0)&&J--)}return G[0]||G.shift(),j.e=P,wn(j,p?f+Mi(j)+1:f)}})();function Kz(e,t){var n,a,u,f,p,s,P=0,A=0,E=e.constructor,M=E.precision;if(Mi(e)>16)throw Error(dP+Mi(e));if(!e.s)return new E(es);for(Zn=!1,s=M,p=new E(.03125);e.abs().gte(.1);)e=e.times(p),A+=5;for(a=Math.log(zd(2,A))/Math.LN10*2+5|0,s+=a,n=u=f=new E(es),E.precision=s;;){if(u=wn(u.times(e),s),n=n.times(++P),p=f.plus(Ou(u,n,s)),Ac(p.d).slice(0,s)===Ac(f.d).slice(0,s)){for(;A--;)f=wn(f.times(f),s);return E.precision=M,t==null?(Zn=!0,wn(f,M)):f}f=p}}function Mi(e){for(var t=e.e*Vn,n=e.d[0];n>=10;n/=10)t++;return t}function tw(e,t,n){if(t>e.LN10.sd())throw Zn=!0,n&&(e.precision=n),Error($s+"LN10 precision limit exceeded");return wn(new e(e.LN10),t)}function Ah(e){for(var t="";e--;)t+="0";return t}function _g(e,t){var n,a,u,f,p,s,P,A,E,M=1,D=10,j=e,G=j.d,F=j.constructor,$=F.precision;if(j.s<1)throw Error($s+(j.s?"NaN":"-Infinity"));if(j.eq(es))return new F(0);if(t==null?(Zn=!1,A=$):A=t,j.eq(10))return t==null&&(Zn=!0),tw(F,A);if(A+=D,F.precision=A,n=Ac(G),a=n.charAt(0),f=Mi(j),Math.abs(f)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)j=j.times(e),n=Ac(j.d),a=n.charAt(0),M++;f=Mi(j),a>1?(j=new F("0."+n),f++):j=new F(a+"."+n.slice(1))}else return P=tw(F,A+2,$).times(f+""),j=_g(new F(a+"."+n.slice(1)),A-D).plus(P),F.precision=$,t==null?(Zn=!0,wn(j,$)):j;for(s=p=j=Ou(j.minus(es),j.plus(es),A),E=wn(j.times(j),A),u=3;;){if(p=wn(p.times(E),A),P=s.plus(Ou(p,new F(u),A)),Ac(P.d).slice(0,A)===Ac(s.d).slice(0,A))return s=s.times(2),f!==0&&(s=s.plus(tw(F,A+2,$).times(f+""))),s=Ou(s,new F(M),A),F.precision=$,t==null?(Zn=!0,wn(s,$)):s;s=P,u+=2}}function Ck(e,t){var n,a,u;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(u=t.length;t.charCodeAt(u-1)===48;)--u;if(t=t.slice(a,u),t){if(u-=a,n=n-a-1,e.e=Kp(n/Vn),e.d=[],a=(n+1)%Vn,n<0&&(a+=Vn),a<u){for(a&&e.d.push(+t.slice(0,a)),u-=Vn;a<u;)e.d.push(+t.slice(a,a+=Vn));t=t.slice(a),a=Vn-t.length}else a-=u;for(;a--;)t+="0";if(e.d.push(+t),Zn&&(e.e>kv||e.e<-kv))throw Error(dP+n)}else e.s=0,e.e=0,e.d=[0];return e}function wn(e,t,n){var a,u,f,p,s,P,A,E,M=e.d;for(p=1,f=M[0];f>=10;f/=10)p++;if(a=t-p,a<0)a+=Vn,u=t,A=M[E=0];else{if(E=Math.ceil((a+1)/Vn),f=M.length,E>=f)return e;for(A=f=M[E],p=1;f>=10;f/=10)p++;a%=Vn,u=a-Vn+p}if(n!==void 0&&(f=zd(10,p-u-1),s=A/f%10|0,P=t<0||M[E+1]!==void 0||A%f,P=n<4?(s||P)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||P||n==6&&(a>0?u>0?A/zd(10,p-u):0:M[E-1])%10&1||n==(e.s<0?8:7))),t<1||!M[0])return P?(f=Mi(e),M.length=1,t=t-f-1,M[0]=zd(10,(Vn-t%Vn)%Vn),e.e=Kp(-t/Vn)||0):(M.length=1,M[0]=e.e=e.s=0),e;if(a==0?(M.length=E,f=1,E--):(M.length=E+1,f=zd(10,Vn-a),M[E]=u>0?(A/zd(10,p-u)%zd(10,u)|0)*f:0),P)for(;;)if(E==0){(M[0]+=f)==na&&(M[0]=1,++e.e);break}else{if(M[E]+=f,M[E]!=na)break;M[E--]=0,f=1}for(a=M.length;M[--a]===0;)M.pop();if(Zn&&(e.e>kv||e.e<-kv))throw Error(dP+Mi(e));return e}function Yz(e,t){var n,a,u,f,p,s,P,A,E,M,D=e.constructor,j=D.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new D(e),Zn?wn(t,j):t;if(P=e.d,M=t.d,a=t.e,A=e.e,P=P.slice(),p=A-a,p){for(E=p<0,E?(n=P,p=-p,s=M.length):(n=M,a=A,s=P.length),u=Math.max(Math.ceil(j/Vn),s)+2,p>u&&(p=u,n.length=1),n.reverse(),u=p;u--;)n.push(0);n.reverse()}else{for(u=P.length,s=M.length,E=u<s,E&&(s=u),u=0;u<s;u++)if(P[u]!=M[u]){E=P[u]<M[u];break}p=0}for(E&&(n=P,P=M,M=n,t.s=-t.s),s=P.length,u=M.length-s;u>0;--u)P[s++]=0;for(u=M.length;u>p;){if(P[--u]<M[u]){for(f=u;f&&P[--f]===0;)P[f]=na-1;--P[f],P[u]+=na}P[u]-=M[u]}for(;P[--s]===0;)P.pop();for(;P[0]===0;P.shift())--a;return P[0]?(t.d=P,t.e=a,Zn?wn(t,j):t):new D(0)}function Hd(e,t,n){var a,u=Mi(e),f=Ac(e.d),p=f.length;return t?(n&&(a=n-p)>0?f=f.charAt(0)+"."+f.slice(1)+Ah(a):p>1&&(f=f.charAt(0)+"."+f.slice(1)),f=f+(u<0?"e":"e+")+u):u<0?(f="0."+Ah(-u-1)+f,n&&(a=n-p)>0&&(f+=Ah(a))):u>=p?(f+=Ah(u+1-p),n&&(a=n-u-1)>0&&(f=f+"."+Ah(a))):((a=u+1)<p&&(f=f.slice(0,a)+"."+f.slice(a)),n&&(a=n-p)>0&&(u+1===p&&(f+="."),f+=Ah(a))),e.s<0?"-"+f:f}function Ek(e,t){if(e.length>t)return e.length=t,!0}function Jz(e){var t,n,a;function u(f){var p=this;if(!(p instanceof u))return new u(f);if(p.constructor=u,f instanceof u){p.s=f.s,p.e=f.e,p.d=(f=f.d)?f.slice():f;return}if(typeof f=="number"){if(f*0!==0)throw Error($d+f);if(f>0)p.s=1;else if(f<0)f=-f,p.s=-1;else{p.s=0,p.e=0,p.d=[0];return}if(f===~~f&&f<1e7){p.e=0,p.d=[f];return}return Ck(p,f.toString())}else if(typeof f!="string")throw Error($d+f);if(f.charCodeAt(0)===45?(f=f.slice(1),p.s=-1):p.s=1,Xq.test(f))Ck(p,f);else throw Error($d+f)}if(u.prototype=Zt,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.clone=Jz,u.config=u.set=Kq,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return u.config(e),u}function Kq(e){if(!e||typeof e!="object")throw Error($s+"Object expected");var t,n,a,u=["precision",1,Xp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<u.length;t+=3)if((a=e[n=u[t]])!==void 0)if(Kp(a)===a&&a>=u[t+1]&&a<=u[t+2])this[n]=a;else throw Error($d+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error($d+n+": "+a);return this}var fP=Jz(Zq);es=new fP(1);const bn=fP;function Yq(e){return t7(e)||e7(e)||Qq(e)||Jq()}function Jq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qq(e,t){if(e){if(typeof e=="string")return mS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mS(e,t)}}function e7(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function t7(e){if(Array.isArray(e))return mS(e)}function mS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var r7=function(t){return t},Qz={},ej=function(t){return t===Qz},Mk=function(t){return function n(){return arguments.length===0||arguments.length===1&&ej(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},n7=function e(t,n){return t===1?n:Mk(function(){for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];var p=u.filter(function(s){return s!==Qz}).length;return p>=t?n.apply(void 0,u):e(t-p,Mk(function(){for(var s=arguments.length,P=new Array(s),A=0;A<s;A++)P[A]=arguments[A];var E=u.map(function(M){return ej(M)?P.shift():M});return n.apply(void 0,Yq(E).concat(P))}))})},R_=function(t){return n7(t.length,t)},gS=function(t,n){for(var a=[],u=t;u<n;++u)a[u-t]=u;return a},i7=R_(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),a7=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return r7;var u=n.reverse(),f=u[0],p=u.slice(1);return function(){return p.reduce(function(s,P){return P(s)},f.apply(void 0,arguments))}},yS=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},tj=function(t){var n=null,a=null;return function(){for(var u=arguments.length,f=new Array(u),p=0;p<u;p++)f[p]=arguments[p];return n&&f.every(function(s,P){return s===n[P]})||(n=f,a=t.apply(void 0,f)),a}};function o7(e){var t;return e===0?t=1:t=Math.floor(new bn(e).abs().log(10).toNumber())+1,t}function s7(e,t,n){for(var a=new bn(e),u=0,f=[];a.lt(t)&&u<1e5;)f.push(a.toNumber()),a=a.add(n),u++;return f}var l7=R_(function(e,t,n){var a=+e,u=+t;return a+n*(u-a)}),c7=R_(function(e,t,n){var a=t-+e;return a=a||1/0,(n-e)/a}),u7=R_(function(e,t,n){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});const D_={rangeStep:s7,getDigitCount:o7,interpolateNumber:l7,uninterpolateNumber:c7,uninterpolateTruncation:u7};function vS(e){return f7(e)||d7(e)||rj(e)||h7()}function h7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d7(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function f7(e){if(Array.isArray(e))return _S(e)}function xg(e,t){return g7(e)||m7(e,t)||rj(e,t)||p7()}function p7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rj(e,t){if(e){if(typeof e=="string")return _S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _S(e,t)}}function _S(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m7(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,u=!1,f=void 0;try{for(var p=e[Symbol.iterator](),s;!(a=(s=p.next()).done)&&(n.push(s.value),!(t&&n.length===t));a=!0);}catch(P){u=!0,f=P}finally{try{!a&&p.return!=null&&p.return()}finally{if(u)throw f}}return n}}function g7(e){if(Array.isArray(e))return e}function nj(e){var t=xg(e,2),n=t[0],a=t[1],u=n,f=a;return n>a&&(u=a,f=n),[u,f]}function ij(e,t,n){if(e.lte(0))return new bn(0);var a=D_.getDigitCount(e.toNumber()),u=new bn(10).pow(a),f=e.div(u),p=a!==1?.05:.1,s=new bn(Math.ceil(f.div(p).toNumber())).add(n).mul(p),P=s.mul(u);return t?P:new bn(Math.ceil(P))}function y7(e,t,n){var a=1,u=new bn(e);if(!u.isint()&&n){var f=Math.abs(e);f<1?(a=new bn(10).pow(D_.getDigitCount(e)-1),u=new bn(Math.floor(u.div(a).toNumber())).mul(a)):f>1&&(u=new bn(Math.floor(e)))}else e===0?u=new bn(Math.floor((t-1)/2)):n||(u=new bn(Math.floor(e)));var p=Math.floor((t-1)/2),s=a7(i7(function(P){return u.add(new bn(P-p).mul(a)).toNumber()}),gS);return s(0,t)}function aj(e,t,n,a){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new bn(0),tickMin:new bn(0),tickMax:new bn(0)};var f=ij(new bn(t).sub(e).div(n-1),a,u),p;e<=0&&t>=0?p=new bn(0):(p=new bn(e).add(t).div(2),p=p.sub(new bn(p).mod(f)));var s=Math.ceil(p.sub(e).div(f).toNumber()),P=Math.ceil(new bn(t).sub(p).div(f).toNumber()),A=s+P+1;return A>n?aj(e,t,n,a,u+1):(A<n&&(P=t>0?P+(n-A):P,s=t>0?s:s+(n-A)),{step:f,tickMin:p.sub(new bn(s).mul(f)),tickMax:p.add(new bn(P).mul(f))})}function v7(e){var t=xg(e,2),n=t[0],a=t[1],u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=Math.max(u,2),s=nj([n,a]),P=xg(s,2),A=P[0],E=P[1];if(A===-1/0||E===1/0){var M=E===1/0?[A].concat(vS(gS(0,u-1).map(function(){return 1/0}))):[].concat(vS(gS(0,u-1).map(function(){return-1/0})),[E]);return n>a?yS(M):M}if(A===E)return y7(A,u,f);var D=aj(A,E,p,f),j=D.step,G=D.tickMin,F=D.tickMax,$=D_.rangeStep(G,F.add(new bn(.1).mul(j)),j);return n>a?yS($):$}function _7(e,t){var n=xg(e,2),a=n[0],u=n[1],f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=nj([a,u]),s=xg(p,2),P=s[0],A=s[1];if(P===-1/0||A===1/0)return[a,u];if(P===A)return[P];var E=Math.max(t,2),M=ij(new bn(A).sub(P).div(E-1),f,0),D=[].concat(vS(D_.rangeStep(new bn(P),new bn(A).sub(new bn(.99).mul(M)),M)),[A]);return a>u?yS(D):D}var x7=tj(v7),b7=tj(_7),w7="Invariant failed";function Zd(e,t){throw new Error(w7)}var S7=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function Iv(){return Iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Iv.apply(this,arguments)}function P7(e,t){return E7(e)||C7(e,t)||A7(e,t)||T7()}function T7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A7(e,t){if(e){if(typeof e=="string")return kk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kk(e,t)}}function kk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function C7(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function E7(e){if(Array.isArray(e))return e}function M7(e,t){if(e==null)return{};var n=k7(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function k7(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function I7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O7(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lj(a.key),a)}}function R7(e,t,n){return t&&O7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function D7(e,t,n){return t=Ov(t),z7(e,oj()?Reflect.construct(t,n||[],Ov(e).constructor):t.apply(e,n))}function z7(e,t){if(t&&(bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j7(e)}function j7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oj=function(){return!!e})()}function Ov(e){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ov(e)}function L7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xS(e,t)}function xS(e,t){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},xS(e,t)}function sj(e,t,n){return t=lj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lj(e){var t=N7(e,"string");return bp(t)=="symbol"?t:t+""}function N7(e,t){if(bp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(bp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Jg=(function(e){function t(){return I7(this,t),D7(this,t,arguments)}return L7(t,e),R7(t,[{key:"render",value:function(){var a=this.props,u=a.offset,f=a.layout,p=a.width,s=a.dataKey,P=a.data,A=a.dataPointFormatter,E=a.xAxis,M=a.yAxis,D=M7(a,S7),j=fr(D,!1);this.props.direction==="x"&&E.type!=="number"&&Zd();var G=P.map(function(F){var $=A(F,s),K=$.x,J=$.y,ee=$.value,oe=$.errorVal;if(!oe)return null;var Y=[],re,ue;if(Array.isArray(oe)){var ge=P7(oe,2);re=ge[0],ue=ge[1]}else re=ue=oe;if(f==="vertical"){var Oe=E.scale,We=J+u,Re=We+p,Ve=We-p,Ye=Oe(ee-re),ot=Oe(ee+ue);Y.push({x1:ot,y1:Re,x2:ot,y2:Ve}),Y.push({x1:Ye,y1:We,x2:ot,y2:We}),Y.push({x1:Ye,y1:Re,x2:Ye,y2:Ve})}else if(f==="horizontal"){var at=M.scale,st=K+u,lt=st-p,Ne=st+p,tt=at(ee-re),ut=at(ee+ue);Y.push({x1:lt,y1:ut,x2:Ne,y2:ut}),Y.push({x1:st,y1:tt,x2:st,y2:ut}),Y.push({x1:lt,y1:tt,x2:Ne,y2:tt})}return Me.createElement(nn,Iv({className:"recharts-errorBar",key:"bar-".concat(Y.map(function(Ce){return"".concat(Ce.x1,"-").concat(Ce.x2,"-").concat(Ce.y1,"-").concat(Ce.y2)}))},j),Y.map(function(Ce){return Me.createElement("line",Iv({},Ce,{key:"line-".concat(Ce.x1,"-").concat(Ce.x2,"-").concat(Ce.y1,"-").concat(Ce.y2)}))}))});return Me.createElement(nn,{className:"recharts-errorBars"},G)}}])})(Me.Component);sj(Jg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});sj(Jg,"displayName","ErrorBar");function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function Ik(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Id(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ik(Object(n),!0).forEach(function(a){B7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ik(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function B7(e,t,n){return t=F7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F7(e){var t=$7(e,"string");return bg(t)=="symbol"?t:t+""}function $7(e,t){if(bg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(bg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cj=function(t){var n=t.children,a=t.formattedGraphicalItems,u=t.legendWidth,f=t.legendContent,p=Jo(n,up);if(!p)return null;var s=up.defaultProps,P=s!==void 0?Id(Id({},s),p.props):{},A;return p.props&&p.props.payload?A=p.props&&p.props.payload:f==="children"?A=(a||[]).reduce(function(E,M){var D=M.item,j=M.props,G=j.sectors||j.data||[];return E.concat(G.map(function(F){return{type:p.props.iconType||D.props.legendType,value:F.name,color:F.fill,payload:F}}))},[]):A=(a||[]).map(function(E){var M=E.item,D=M.type.defaultProps,j=D!==void 0?Id(Id({},D),M.props):{},G=j.dataKey,F=j.name,$=j.legendType,K=j.hide;return{inactive:K,dataKey:G,type:P.iconType||$||"square",color:pP(M),value:F||G,payload:j}}),Id(Id(Id({},P),up.getWithHeight(p,u)),{},{payload:A,item:p})};function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function Ok(e){return G7(e)||q7(e)||V7(e)||U7()}function U7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V7(e,t){if(e){if(typeof e=="string")return bS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bS(e,t)}}function q7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G7(e){if(Array.isArray(e))return bS(e)}function bS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(n),!0).forEach(function(a){dp(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dp(e,t,n){return t=W7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W7(e){var t=H7(e,"string");return wg(t)=="symbol"?t:t+""}function H7(e,t){if(wg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wi(e,t,n){return kr(e)||kr(t)?n:Hi(t)?ts(e,t,n):xr(t)?t(e):n}function Qm(e,t,n,a){var u=Gq(e,function(s){return Wi(s,t)});if(n==="number"){var f=u.filter(function(s){return Dt(s)||parseFloat(s)});return f.length?[O_(f),I_(f)]:[1/0,-1/0]}var p=a?u.filter(function(s){return!kr(s)}):u;return p.map(function(s){return Hi(s)||s instanceof Date?s:""})}var Z7=function(t){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2?arguments[2]:void 0,f=arguments.length>3?arguments[3]:void 0,p=-1,s=(n=a?.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(f&&f.axisType==="angleAxis"&&Math.abs(Math.abs(f.range[1]-f.range[0])-360)<=1e-6)for(var P=f.range,A=0;A<s;A++){var E=A>0?u[A-1].coordinate:u[s-1].coordinate,M=u[A].coordinate,D=A>=s-1?u[0].coordinate:u[A+1].coordinate,j=void 0;if(ro(M-E)!==ro(D-M)){var G=[];if(ro(D-M)===ro(P[1]-P[0])){j=D;var F=M+P[1]-P[0];G[0]=Math.min(F,(F+E)/2),G[1]=Math.max(F,(F+E)/2)}else{j=E;var $=D+P[1]-P[0];G[0]=Math.min(M,($+M)/2),G[1]=Math.max(M,($+M)/2)}var K=[Math.min(M,(j+M)/2),Math.max(M,(j+M)/2)];if(t>K[0]&&t<=K[1]||t>=G[0]&&t<=G[1]){p=u[A].index;break}}else{var J=Math.min(E,D),ee=Math.max(E,D);if(t>(J+M)/2&&t<=(ee+M)/2){p=u[A].index;break}}}else for(var oe=0;oe<s;oe++)if(oe===0&&t<=(a[oe].coordinate+a[oe+1].coordinate)/2||oe>0&&oe<s-1&&t>(a[oe].coordinate+a[oe-1].coordinate)/2&&t<=(a[oe].coordinate+a[oe+1].coordinate)/2||oe===s-1&&t>(a[oe].coordinate+a[oe-1].coordinate)/2){p=a[oe].index;break}return p},pP=function(t){var n,a=t,u=a.type.displayName,f=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ci(ci({},t.type.defaultProps),t.props):t.props,p=f.stroke,s=f.fill,P;switch(u){case"Line":P=p;break;case"Area":case"Radar":P=p&&p!=="none"?p:s;break;default:P=s;break}return P},X7=function(t){var n=t.barSize,a=t.totalSize,u=t.stackGroups,f=u===void 0?{}:u;if(!f)return{};for(var p={},s=Object.keys(f),P=0,A=s.length;P<A;P++)for(var E=f[s[P]].stackGroups,M=Object.keys(E),D=0,j=M.length;D<j;D++){var G=E[M[D]],F=G.items,$=G.cateAxisId,K=F.filter(function(ue){return kh(ue.type).indexOf("Bar")>=0});if(K&&K.length){var J=K[0].type.defaultProps,ee=J!==void 0?ci(ci({},J),K[0].props):K[0].props,oe=ee.barSize,Y=ee[$];p[Y]||(p[Y]=[]);var re=kr(oe)?n:oe;p[Y].push({item:K[0],stackList:K.slice(1),barSize:kr(re)?void 0:no(re,a,0)})}}return p},K7=function(t){var n=t.barGap,a=t.barCategoryGap,u=t.bandSize,f=t.sizeList,p=f===void 0?[]:f,s=t.maxBarSize,P=p.length;if(P<1)return null;var A=no(n,u,0,!0),E,M=[];if(p[0].barSize===+p[0].barSize){var D=!1,j=u/P,G=p.reduce(function(oe,Y){return oe+Y.barSize||0},0);G+=(P-1)*A,G>=u&&(G-=(P-1)*A,A=0),G>=u&&j>0&&(D=!0,j*=.9,G=P*j);var F=(u-G)/2>>0,$={offset:F-A,size:0};E=p.reduce(function(oe,Y){var re={item:Y.item,position:{offset:$.offset+$.size+A,size:D?j:Y.barSize}},ue=[].concat(Ok(oe),[re]);return $=ue[ue.length-1].position,Y.stackList&&Y.stackList.length&&Y.stackList.forEach(function(ge){ue.push({item:ge,position:$})}),ue},M)}else{var K=no(a,u,0,!0);u-2*K-(P-1)*A<=0&&(A=0);var J=(u-2*K-(P-1)*A)/P;J>1&&(J>>=0);var ee=s===+s?Math.min(J,s):J;E=p.reduce(function(oe,Y,re){var ue=[].concat(Ok(oe),[{item:Y.item,position:{offset:K+(J+A)*re+(J-ee)/2,size:ee}}]);return Y.stackList&&Y.stackList.length&&Y.stackList.forEach(function(ge){ue.push({item:ge,position:ue[ue.length-1].position})}),ue},M)}return E},Y7=function(t,n,a,u){var f=a.children,p=a.width,s=a.margin,P=p-(s.left||0)-(s.right||0),A=cj({children:f,legendWidth:P});if(A){var E=u||{},M=E.width,D=E.height,j=A.align,G=A.verticalAlign,F=A.layout;if((F==="vertical"||F==="horizontal"&&G==="middle")&&j!=="center"&&Dt(t[j]))return ci(ci({},t),{},dp({},j,t[j]+(M||0)));if((F==="horizontal"||F==="vertical"&&j==="center")&&G!=="middle"&&Dt(t[G]))return ci(ci({},t),{},dp({},G,t[G]+(D||0)))}return t},J7=function(t,n,a){return kr(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},uj=function(t,n,a,u,f){var p=n.props.children,s=rs(p,Jg).filter(function(A){return J7(u,f,A.props.direction)});if(s&&s.length){var P=s.map(function(A){return A.props.dataKey});return t.reduce(function(A,E){var M=Wi(E,a);if(kr(M))return A;var D=Array.isArray(M)?[O_(M),I_(M)]:[M,M],j=P.reduce(function(G,F){var $=Wi(E,F,0),K=D[0]-Math.abs(Array.isArray($)?$[0]:$),J=D[1]+Math.abs(Array.isArray($)?$[1]:$);return[Math.min(K,G[0]),Math.max(J,G[1])]},[1/0,-1/0]);return[Math.min(j[0],A[0]),Math.max(j[1],A[1])]},[1/0,-1/0])}return null},Q7=function(t,n,a,u,f){var p=n.map(function(s){return uj(t,s,a,f,u)}).filter(function(s){return!kr(s)});return p&&p.length?p.reduce(function(s,P){return[Math.min(s[0],P[0]),Math.max(s[1],P[1])]},[1/0,-1/0]):null},hj=function(t,n,a,u,f){var p=n.map(function(P){var A=P.props.dataKey;return a==="number"&&A&&uj(t,P,A,u)||Qm(t,A,a,f)});if(a==="number")return p.reduce(function(P,A){return[Math.min(P[0],A[0]),Math.max(P[1],A[1])]},[1/0,-1/0]);var s={};return p.reduce(function(P,A){for(var E=0,M=A.length;E<M;E++)s[A[E]]||(s[A[E]]=!0,P.push(A[E]));return P},[])},dj=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},fj=function(t,n,a,u){if(u)return t.map(function(P){return P.coordinate});var f,p,s=t.map(function(P){return P.coordinate===n&&(f=!0),P.coordinate===a&&(p=!0),P.coordinate});return f||s.push(n),p||s.push(a),s},Iu=function(t,n,a){if(!t)return null;var u=t.scale,f=t.duplicateDomain,p=t.type,s=t.range,P=t.realScaleType==="scaleBand"?u.bandwidth()/2:2,A=(n||a)&&p==="category"&&u.bandwidth?u.bandwidth()/P:0;if(A=t.axisType==="angleAxis"&&s?.length>=2?ro(s[0]-s[1])*2*A:A,n&&(t.ticks||t.niceTicks)){var E=(t.ticks||t.niceTicks).map(function(M){var D=f?f.indexOf(M):M;return{coordinate:u(D)+A,value:M,offset:A}});return E.filter(function(M){return!Gg(M.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(M,D){return{coordinate:u(M)+A,value:M,index:D,offset:A}}):u.ticks&&!a?u.ticks(t.tickCount).map(function(M){return{coordinate:u(M)+A,value:M,offset:A}}):u.domain().map(function(M,D){return{coordinate:u(M)+A,value:f?f[M]:M,index:D,offset:A}})},rw=new WeakMap,Ky=function(t,n){if(typeof n!="function")return t;rw.has(t)||rw.set(t,new WeakMap);var a=rw.get(t);if(a.has(n))return a.get(n);var u=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,u),u},pj=function(t,n,a){var u=t.scale,f=t.type,p=t.layout,s=t.axisType;if(u==="auto")return p==="radial"&&s==="radiusAxis"?{scale:pg(),realScaleType:"band"}:p==="radial"&&s==="angleAxis"?{scale:Av(),realScaleType:"linear"}:f==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:Jm(),realScaleType:"point"}:f==="category"?{scale:pg(),realScaleType:"band"}:{scale:Av(),realScaleType:"linear"};if(qd(u)){var P="scale".concat(y_(u));return{scale:(vk[P]||Jm)(),realScaleType:vk[P]?P:"point"}}return xr(u)?{scale:u}:{scale:Jm(),realScaleType:"point"}},Dk=1e-4,mj=function(t){var n=t.domain();if(!(!n||n.length<=2)){var a=n.length,u=t.range(),f=Math.min(u[0],u[1])-Dk,p=Math.max(u[0],u[1])+Dk,s=t(n[0]),P=t(n[a-1]);(s<f||s>p||P<f||P>p)&&t.domain([n[0],n[a-1]])}},e9=function(t,n){if(!t)return null;for(var a=0,u=t.length;a<u;a++)if(t[a].item===n)return t[a].position;return null},t9=function(t,n){if(!n||n.length!==2||!Dt(n[0])||!Dt(n[1]))return t;var a=Math.min(n[0],n[1]),u=Math.max(n[0],n[1]),f=[t[0],t[1]];return(!Dt(t[0])||t[0]<a)&&(f[0]=a),(!Dt(t[1])||t[1]>u)&&(f[1]=u),f[0]>u&&(f[0]=u),f[1]<a&&(f[1]=a),f},r9=function(t){var n=t.length;if(!(n<=0))for(var a=0,u=t[0].length;a<u;++a)for(var f=0,p=0,s=0;s<n;++s){var P=Gg(t[s][a][1])?t[s][a][0]:t[s][a][1];P>=0?(t[s][a][0]=f,t[s][a][1]=f+P,f=t[s][a][1]):(t[s][a][0]=p,t[s][a][1]=p+P,p=t[s][a][1])}},n9=function(t){var n=t.length;if(!(n<=0))for(var a=0,u=t[0].length;a<u;++a)for(var f=0,p=0;p<n;++p){var s=Gg(t[p][a][1])?t[p][a][0]:t[p][a][1];s>=0?(t[p][a][0]=f,t[p][a][1]=f+s,f=t[p][a][1]):(t[p][a][0]=0,t[p][a][1]=0)}},i9={sign:r9,expand:JF,none:fp,silhouette:QF,wiggle:e$,positive:n9},a9=function(t,n,a){var u=n.map(function(s){return s.props.dataKey}),f=i9[a],p=YF().keys(u).value(function(s,P){return+Wi(s,P,0)}).order(Yw).offset(f);return p(t)},o9=function(t,n,a,u,f,p){if(!t)return null;var s=p?n.reverse():n,P={},A=s.reduce(function(M,D){var j,G=(j=D.type)!==null&&j!==void 0&&j.defaultProps?ci(ci({},D.type.defaultProps),D.props):D.props,F=G.stackId,$=G.hide;if($)return M;var K=G[a],J=M[K]||{hasStack:!1,stackGroups:{}};if(Hi(F)){var ee=J.stackGroups[F]||{numericAxisId:a,cateAxisId:u,items:[]};ee.items.push(D),J.hasStack=!0,J.stackGroups[F]=ee}else J.stackGroups[Wp("_stackId_")]={numericAxisId:a,cateAxisId:u,items:[D]};return ci(ci({},M),{},dp({},K,J))},P),E={};return Object.keys(A).reduce(function(M,D){var j=A[D];if(j.hasStack){var G={};j.stackGroups=Object.keys(j.stackGroups).reduce(function(F,$){var K=j.stackGroups[$];return ci(ci({},F),{},dp({},$,{numericAxisId:a,cateAxisId:u,items:K.items,stackedData:a9(t,K.items,f)}))},G)}return ci(ci({},M),{},dp({},D,j))},E)},gj=function(t,n){var a=n.realScaleType,u=n.type,f=n.tickCount,p=n.originalDomain,s=n.allowDecimals,P=a||n.scale;if(P!=="auto"&&P!=="linear")return null;if(f&&u==="number"&&p&&(p[0]==="auto"||p[1]==="auto")){var A=t.domain();if(!A.length)return null;var E=x7(A,f,s);return t.domain([O_(E),I_(E)]),{niceTicks:E}}if(f&&u==="number"){var M=t.domain(),D=b7(M,f,s);return{niceTicks:D}}return null};function zk(e){var t=e.axis,n=e.ticks,a=e.bandSize,u=e.entry,f=e.index,p=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!kr(u[t.dataKey])){var s=lv(n,"value",u[t.dataKey]);if(s)return s.coordinate+a/2}return n[f]?n[f].coordinate+a/2:null}var P=Wi(u,kr(p)?t.dataKey:p);return kr(P)?null:t.scale(P)}var jk=function(t){var n=t.axis,a=t.ticks,u=t.offset,f=t.bandSize,p=t.entry,s=t.index;if(n.type==="category")return a[s]?a[s].coordinate+u:null;var P=Wi(p,n.dataKey,n.domain[s]);return kr(P)?null:n.scale(P)-f/2+u},s9=function(t){var n=t.numericAxis,a=n.scale.domain();if(n.type==="number"){var u=Math.min(a[0],a[1]),f=Math.max(a[0],a[1]);return u<=0&&f>=0?0:f<0?f:u}return a[0]},l9=function(t,n){var a,u=(a=t.type)!==null&&a!==void 0&&a.defaultProps?ci(ci({},t.type.defaultProps),t.props):t.props,f=u.stackId;if(Hi(f)){var p=n[f];if(p){var s=p.items.indexOf(t);return s>=0?p.stackedData[s]:null}}return null},c9=function(t){return t.reduce(function(n,a){return[O_(a.concat([n[0]]).filter(Dt)),I_(a.concat([n[1]]).filter(Dt))]},[1/0,-1/0])},yj=function(t,n,a){return Object.keys(t).reduce(function(u,f){var p=t[f],s=p.stackedData,P=s.reduce(function(A,E){var M=c9(E.slice(n,a+1));return[Math.min(A[0],M[0]),Math.max(A[1],M[1])]},[1/0,-1/0]);return[Math.min(P[0],u[0]),Math.max(P[1],u[1])]},[1/0,-1/0]).map(function(u){return u===1/0||u===-1/0?0:u})},Lk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Nk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wS=function(t,n,a){if(xr(t))return t(n,a);if(!Array.isArray(t))return n;var u=[];if(Dt(t[0]))u[0]=a?t[0]:Math.min(t[0],n[0]);else if(Lk.test(t[0])){var f=+Lk.exec(t[0])[1];u[0]=n[0]-f}else xr(t[0])?u[0]=t[0](n[0]):u[0]=n[0];if(Dt(t[1]))u[1]=a?t[1]:Math.max(t[1],n[1]);else if(Nk.test(t[1])){var p=+Nk.exec(t[1])[1];u[1]=n[1]+p}else xr(t[1])?u[1]=t[1](n[1]):u[1]=n[1];return u},Rv=function(t,n,a){if(t&&t.scale&&t.scale.bandwidth){var u=t.scale.bandwidth();if(!a||u>0)return u}if(t&&n&&n.length>=2){for(var f=U2(n,function(M){return M.coordinate}),p=1/0,s=1,P=f.length;s<P;s++){var A=f[s],E=f[s-1];p=Math.min((A.coordinate||0)-(E.coordinate||0),p)}return p===1/0?0:p}return a?void 0:0},Bk=function(t,n,a){return!t||!t.length||Yg(t,ts(a,"type.defaultProps.domain"))?n:t},vj=function(t,n){var a=t.type.defaultProps?ci(ci({},t.type.defaultProps),t.props):t.props,u=a.dataKey,f=a.name,p=a.unit,s=a.formatter,P=a.tooltipType,A=a.chartType,E=a.hide;return ci(ci({},fr(t,!1)),{},{dataKey:u,unit:p,formatter:s,name:f||u,color:pP(t),value:Wi(n,u),type:P,payload:n,chartType:A,hide:E})};function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function Fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(n),!0).forEach(function(a){_j(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _j(e,t,n){return t=u9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u9(e){var t=h9(e,"string");return Sg(t)=="symbol"?t:t+""}function h9(e,t){if(Sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d9(e,t){return g9(e)||m9(e,t)||p9(e,t)||f9()}function f9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p9(e,t){if(e){if(typeof e=="string")return $k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $k(e,t)}}function $k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m9(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function g9(e){if(Array.isArray(e))return e}var Dv=Math.PI/180,y9=function(t){return t*180/Math.PI},In=function(t,n,a,u){return{x:t+Math.cos(-Dv*u)*a,y:n+Math.sin(-Dv*u)*a}},xj=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},v9=function(t,n,a,u,f){var p=t.width,s=t.height,P=t.startAngle,A=t.endAngle,E=no(t.cx,p,p/2),M=no(t.cy,s,s/2),D=xj(p,s,a),j=no(t.innerRadius,D,0),G=no(t.outerRadius,D,D*.8),F=Object.keys(n);return F.reduce(function($,K){var J=n[K],ee=J.domain,oe=J.reversed,Y;if(kr(J.range))u==="angleAxis"?Y=[P,A]:u==="radiusAxis"&&(Y=[j,G]),oe&&(Y=[Y[1],Y[0]]);else{Y=J.range;var re=Y,ue=d9(re,2);P=ue[0],A=ue[1]}var ge=pj(J,f),Oe=ge.realScaleType,We=ge.scale;We.domain(ee).range(Y),mj(We);var Re=gj(We,Eu(Eu({},J),{},{realScaleType:Oe})),Ve=Eu(Eu(Eu({},J),Re),{},{range:Y,radius:G,realScaleType:Oe,scale:We,cx:E,cy:M,innerRadius:j,outerRadius:G,startAngle:P,endAngle:A});return Eu(Eu({},$),{},_j({},K,Ve))},{})},_9=function(t,n){var a=t.x,u=t.y,f=n.x,p=n.y;return Math.sqrt(Math.pow(a-f,2)+Math.pow(u-p,2))},x9=function(t,n){var a=t.x,u=t.y,f=n.cx,p=n.cy,s=_9({x:a,y:u},{x:f,y:p});if(s<=0)return{radius:s};var P=(a-f)/s,A=Math.acos(P);return u>p&&(A=2*Math.PI-A),{radius:s,angle:y9(A),angleInRadian:A}},b9=function(t){var n=t.startAngle,a=t.endAngle,u=Math.floor(n/360),f=Math.floor(a/360),p=Math.min(u,f);return{startAngle:n-p*360,endAngle:a-p*360}},w9=function(t,n){var a=n.startAngle,u=n.endAngle,f=Math.floor(a/360),p=Math.floor(u/360),s=Math.min(f,p);return t+s*360},Uk=function(t,n){var a=t.x,u=t.y,f=x9({x:a,y:u},n),p=f.radius,s=f.angle,P=n.innerRadius,A=n.outerRadius;if(p<P||p>A)return!1;if(p===0)return!0;var E=b9(n),M=E.startAngle,D=E.endAngle,j=s,G;if(M<=D){for(;j>D;)j-=360;for(;j<M;)j+=360;G=j>=M&&j<=D}else{for(;j>M;)j-=360;for(;j<D;)j+=360;G=j>=D&&j<=M}return G?Eu(Eu({},n),{},{radius:p,angle:w9(j,n)}):null},bj=function(t){return!be.isValidElement(t)&&!xr(t)&&typeof t!="boolean"?t.className:""};function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}var S9=["offset"];function P9(e){return E9(e)||C9(e)||A9(e)||T9()}function T9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A9(e,t){if(e){if(typeof e=="string")return SS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SS(e,t)}}function C9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function E9(e){if(Array.isArray(e))return SS(e)}function SS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function M9(e,t){if(e==null)return{};var n=k9(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function k9(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vk(Object(n),!0).forEach(function(a){I9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function I9(e,t,n){return t=O9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O9(e){var t=R9(e,"string");return Pg(t)=="symbol"?t:t+""}function R9(e,t){if(Pg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tg.apply(this,arguments)}var D9=function(t){var n=t.value,a=t.formatter,u=kr(t.children)?n:t.children;return xr(a)?a(u):u},z9=function(t,n){var a=ro(n-t),u=Math.min(Math.abs(n-t),360);return a*u},j9=function(t,n,a){var u=t.position,f=t.viewBox,p=t.offset,s=t.className,P=f,A=P.cx,E=P.cy,M=P.innerRadius,D=P.outerRadius,j=P.startAngle,G=P.endAngle,F=P.clockWise,$=(M+D)/2,K=z9(j,G),J=K>=0?1:-1,ee,oe;u==="insideStart"?(ee=j+J*p,oe=F):u==="insideEnd"?(ee=G-J*p,oe=!F):u==="end"&&(ee=G+J*p,oe=F),oe=K<=0?oe:!oe;var Y=In(A,E,$,ee),re=In(A,E,$,ee+(oe?1:-1)*359),ue="M".concat(Y.x,",").concat(Y.y,`
    A`).concat($,",").concat($,",0,1,").concat(oe?0:1,`,
    `).concat(re.x,",").concat(re.y),ge=kr(t.id)?Wp("recharts-radial-line-"):t.id;return Me.createElement("text",Tg({},a,{dominantBaseline:"central",className:Or("recharts-radial-bar-label",s)}),Me.createElement("defs",null,Me.createElement("path",{id:ge,d:ue})),Me.createElement("textPath",{xlinkHref:"#".concat(ge)},n))},L9=function(t){var n=t.viewBox,a=t.offset,u=t.position,f=n,p=f.cx,s=f.cy,P=f.innerRadius,A=f.outerRadius,E=f.startAngle,M=f.endAngle,D=(E+M)/2;if(u==="outside"){var j=In(p,s,A+a,D),G=j.x,F=j.y;return{x:G,y:F,textAnchor:G>=p?"start":"end",verticalAnchor:"middle"}}if(u==="center")return{x:p,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(u==="centerTop")return{x:p,y:s,textAnchor:"middle",verticalAnchor:"start"};if(u==="centerBottom")return{x:p,y:s,textAnchor:"middle",verticalAnchor:"end"};var $=(P+A)/2,K=In(p,s,$,D),J=K.x,ee=K.y;return{x:J,y:ee,textAnchor:"middle",verticalAnchor:"middle"}},N9=function(t){var n=t.viewBox,a=t.parentViewBox,u=t.offset,f=t.position,p=n,s=p.x,P=p.y,A=p.width,E=p.height,M=E>=0?1:-1,D=M*u,j=M>0?"end":"start",G=M>0?"start":"end",F=A>=0?1:-1,$=F*u,K=F>0?"end":"start",J=F>0?"start":"end";if(f==="top"){var ee={x:s+A/2,y:P-M*u,textAnchor:"middle",verticalAnchor:j};return Gi(Gi({},ee),a?{height:Math.max(P-a.y,0),width:A}:{})}if(f==="bottom"){var oe={x:s+A/2,y:P+E+D,textAnchor:"middle",verticalAnchor:G};return Gi(Gi({},oe),a?{height:Math.max(a.y+a.height-(P+E),0),width:A}:{})}if(f==="left"){var Y={x:s-$,y:P+E/2,textAnchor:K,verticalAnchor:"middle"};return Gi(Gi({},Y),a?{width:Math.max(Y.x-a.x,0),height:E}:{})}if(f==="right"){var re={x:s+A+$,y:P+E/2,textAnchor:J,verticalAnchor:"middle"};return Gi(Gi({},re),a?{width:Math.max(a.x+a.width-re.x,0),height:E}:{})}var ue=a?{width:A,height:E}:{};return f==="insideLeft"?Gi({x:s+$,y:P+E/2,textAnchor:J,verticalAnchor:"middle"},ue):f==="insideRight"?Gi({x:s+A-$,y:P+E/2,textAnchor:K,verticalAnchor:"middle"},ue):f==="insideTop"?Gi({x:s+A/2,y:P+D,textAnchor:"middle",verticalAnchor:G},ue):f==="insideBottom"?Gi({x:s+A/2,y:P+E-D,textAnchor:"middle",verticalAnchor:j},ue):f==="insideTopLeft"?Gi({x:s+$,y:P+D,textAnchor:J,verticalAnchor:G},ue):f==="insideTopRight"?Gi({x:s+A-$,y:P+D,textAnchor:K,verticalAnchor:G},ue):f==="insideBottomLeft"?Gi({x:s+$,y:P+E-D,textAnchor:J,verticalAnchor:j},ue):f==="insideBottomRight"?Gi({x:s+A-$,y:P+E-D,textAnchor:K,verticalAnchor:j},ue):Gp(f)&&(Dt(f.x)||$w(f.x))&&(Dt(f.y)||$w(f.y))?Gi({x:s+no(f.x,A),y:P+no(f.y,E),textAnchor:"end",verticalAnchor:"end"},ue):Gi({x:s+A/2,y:P+E/2,textAnchor:"middle",verticalAnchor:"middle"},ue)},B9=function(t){return"cx"in t&&Dt(t.cx)};function ia(e){var t=e.offset,n=t===void 0?5:t,a=M9(e,S9),u=Gi({offset:n},a),f=u.viewBox,p=u.position,s=u.value,P=u.children,A=u.content,E=u.className,M=E===void 0?"":E,D=u.textBreakAll;if(!f||kr(s)&&kr(P)&&!be.isValidElement(A)&&!xr(A))return null;if(be.isValidElement(A))return be.cloneElement(A,u);var j;if(xr(A)){if(j=be.createElement(A,u),be.isValidElement(j))return j}else j=D9(u);var G=B9(f),F=fr(u,!0);if(G&&(p==="insideStart"||p==="insideEnd"||p==="end"))return j9(u,j,F);var $=G?L9(u):N9(u);return Me.createElement(Wd,Tg({className:Or("recharts-label",M)},F,$,{breakAll:D}),j)}ia.displayName="Label";var wj=function(t){var n=t.cx,a=t.cy,u=t.angle,f=t.startAngle,p=t.endAngle,s=t.r,P=t.radius,A=t.innerRadius,E=t.outerRadius,M=t.x,D=t.y,j=t.top,G=t.left,F=t.width,$=t.height,K=t.clockWise,J=t.labelViewBox;if(J)return J;if(Dt(F)&&Dt($)){if(Dt(M)&&Dt(D))return{x:M,y:D,width:F,height:$};if(Dt(j)&&Dt(G))return{x:j,y:G,width:F,height:$}}return Dt(M)&&Dt(D)?{x:M,y:D,width:0,height:0}:Dt(n)&&Dt(a)?{cx:n,cy:a,startAngle:f||u||0,endAngle:p||u||0,innerRadius:A||0,outerRadius:E||P||s||0,clockWise:K}:t.viewBox?t.viewBox:{}},F9=function(t,n){return t?t===!0?Me.createElement(ia,{key:"label-implicit",viewBox:n}):Hi(t)?Me.createElement(ia,{key:"label-implicit",viewBox:n,value:t}):be.isValidElement(t)?t.type===ia?be.cloneElement(t,{key:"label-implicit",viewBox:n}):Me.createElement(ia,{key:"label-implicit",content:t,viewBox:n}):xr(t)?Me.createElement(ia,{key:"label-implicit",content:t,viewBox:n}):Gp(t)?Me.createElement(ia,Tg({viewBox:n},t,{key:"label-implicit"})):null:null},$9=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var u=t.children,f=wj(t),p=rs(u,ia).map(function(P,A){return be.cloneElement(P,{viewBox:n||f,key:"label-".concat(A)})});if(!a)return p;var s=F9(t.label,n||f);return[s].concat(P9(p))};ia.parseViewBox=wj;ia.renderCallByParent=$9;var nw,qk;function U9(){if(qk)return nw;qk=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return nw=e,nw}var V9=U9();const q9=ln(V9);function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}var G9=["valueAccessor"],W9=["data","dataKey","clockWise","id","textBreakAll"];function H9(e){return Y9(e)||K9(e)||X9(e)||Z9()}function Z9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X9(e,t){if(e){if(typeof e=="string")return PS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PS(e,t)}}function K9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Y9(e){if(Array.isArray(e))return PS(e)}function PS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zv.apply(this,arguments)}function Gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Wk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(n),!0).forEach(function(a){J9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function J9(e,t,n){return t=Q9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q9(e){var t=eG(e,"string");return Ag(t)=="symbol"?t:t+""}function eG(e,t){if(Ag(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hk(e,t){if(e==null)return{};var n=tG(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function tG(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var rG=function(t){return Array.isArray(t.value)?q9(t.value):t.value};function Ru(e){var t=e.valueAccessor,n=t===void 0?rG:t,a=Hk(e,G9),u=a.data,f=a.dataKey,p=a.clockWise,s=a.id,P=a.textBreakAll,A=Hk(a,W9);return!u||!u.length?null:Me.createElement(nn,{className:"recharts-label-list"},u.map(function(E,M){var D=kr(f)?n(E,M):Wi(E&&E.payload,f),j=kr(s)?{}:{id:"".concat(s,"-").concat(M)};return Me.createElement(ia,zv({},fr(E,!0),A,j,{parentViewBox:E.parentViewBox,value:D,textBreakAll:P,viewBox:ia.parseViewBox(kr(p)?E:Wk(Wk({},E),{},{clockWise:p})),key:"label-".concat(M),index:M}))}))}Ru.displayName="LabelList";function nG(e,t){return e?e===!0?Me.createElement(Ru,{key:"labelList-implicit",data:t}):Me.isValidElement(e)||xr(e)?Me.createElement(Ru,{key:"labelList-implicit",data:t,content:e}):Gp(e)?Me.createElement(Ru,zv({data:t},e,{key:"labelList-implicit"})):null:null}function iG(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,u=rs(a,Ru).map(function(p,s){return be.cloneElement(p,{data:t,key:"labelList-".concat(s)})});if(!n)return u;var f=nG(e.label,t);return[f].concat(H9(u))}Ru.renderCallByParent=iG;function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},TS.apply(this,arguments)}function Zk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Xk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zk(Object(n),!0).forEach(function(a){aG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aG(e,t,n){return t=oG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oG(e){var t=sG(e,"string");return Cg(t)=="symbol"?t:t+""}function sG(e,t){if(Cg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lG=function(t,n){var a=ro(n-t),u=Math.min(Math.abs(n-t),359.999);return a*u},Yy=function(t){var n=t.cx,a=t.cy,u=t.radius,f=t.angle,p=t.sign,s=t.isExternal,P=t.cornerRadius,A=t.cornerIsExternal,E=P*(s?1:-1)+u,M=Math.asin(P/E)/Dv,D=A?f:f+p*M,j=In(n,a,E,D),G=In(n,a,u,D),F=A?f-p*M:f,$=In(n,a,E*Math.cos(M*Dv),F);return{center:j,circleTangency:G,lineTangency:$,theta:M}},Sj=function(t){var n=t.cx,a=t.cy,u=t.innerRadius,f=t.outerRadius,p=t.startAngle,s=t.endAngle,P=lG(p,s),A=p+P,E=In(n,a,f,p),M=In(n,a,f,A),D="M ".concat(E.x,",").concat(E.y,`
    A `).concat(f,",").concat(f,`,0,
    `).concat(+(Math.abs(P)>180),",").concat(+(p>A),`,
    `).concat(M.x,",").concat(M.y,`
  `);if(u>0){var j=In(n,a,u,p),G=In(n,a,u,A);D+="L ".concat(G.x,",").concat(G.y,`
            A `).concat(u,",").concat(u,`,0,
            `).concat(+(Math.abs(P)>180),",").concat(+(p<=A),`,
            `).concat(j.x,",").concat(j.y," Z")}else D+="L ".concat(n,",").concat(a," Z");return D},cG=function(t){var n=t.cx,a=t.cy,u=t.innerRadius,f=t.outerRadius,p=t.cornerRadius,s=t.forceCornerRadius,P=t.cornerIsExternal,A=t.startAngle,E=t.endAngle,M=ro(E-A),D=Yy({cx:n,cy:a,radius:f,angle:A,sign:M,cornerRadius:p,cornerIsExternal:P}),j=D.circleTangency,G=D.lineTangency,F=D.theta,$=Yy({cx:n,cy:a,radius:f,angle:E,sign:-M,cornerRadius:p,cornerIsExternal:P}),K=$.circleTangency,J=$.lineTangency,ee=$.theta,oe=P?Math.abs(A-E):Math.abs(A-E)-F-ee;if(oe<0)return s?"M ".concat(G.x,",").concat(G.y,`
        a`).concat(p,",").concat(p,",0,0,1,").concat(p*2,`,0
        a`).concat(p,",").concat(p,",0,0,1,").concat(-p*2,`,0
      `):Sj({cx:n,cy:a,innerRadius:u,outerRadius:f,startAngle:A,endAngle:E});var Y="M ".concat(G.x,",").concat(G.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(M<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(f,",").concat(f,",0,").concat(+(oe>180),",").concat(+(M<0),",").concat(K.x,",").concat(K.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(M<0),",").concat(J.x,",").concat(J.y,`
  `);if(u>0){var re=Yy({cx:n,cy:a,radius:u,angle:A,sign:M,isExternal:!0,cornerRadius:p,cornerIsExternal:P}),ue=re.circleTangency,ge=re.lineTangency,Oe=re.theta,We=Yy({cx:n,cy:a,radius:u,angle:E,sign:-M,isExternal:!0,cornerRadius:p,cornerIsExternal:P}),Re=We.circleTangency,Ve=We.lineTangency,Ye=We.theta,ot=P?Math.abs(A-E):Math.abs(A-E)-Oe-Ye;if(ot<0&&p===0)return"".concat(Y,"L").concat(n,",").concat(a,"Z");Y+="L".concat(Ve.x,",").concat(Ve.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(M<0),",").concat(Re.x,",").concat(Re.y,`
      A`).concat(u,",").concat(u,",0,").concat(+(ot>180),",").concat(+(M>0),",").concat(ue.x,",").concat(ue.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(M<0),",").concat(ge.x,",").concat(ge.y,"Z")}else Y+="L".concat(n,",").concat(a,"Z");return Y},uG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Pj=function(t){var n=Xk(Xk({},uG),t),a=n.cx,u=n.cy,f=n.innerRadius,p=n.outerRadius,s=n.cornerRadius,P=n.forceCornerRadius,A=n.cornerIsExternal,E=n.startAngle,M=n.endAngle,D=n.className;if(p<f||E===M)return null;var j=Or("recharts-sector",D),G=p-f,F=no(s,G,0,!0),$;return F>0&&Math.abs(E-M)<360?$=cG({cx:a,cy:u,innerRadius:f,outerRadius:p,cornerRadius:Math.min(F,G/2),forceCornerRadius:P,cornerIsExternal:A,startAngle:E,endAngle:M}):$=Sj({cx:a,cy:u,innerRadius:f,outerRadius:p,startAngle:E,endAngle:M}),Me.createElement("path",TS({},fr(n,!0),{className:j,d:$,role:"img"}))};function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function AS(){return AS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},AS.apply(this,arguments)}function Kk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Yk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kk(Object(n),!0).forEach(function(a){hG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hG(e,t,n){return t=dG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dG(e){var t=fG(e,"string");return Eg(t)=="symbol"?t:t+""}function fG(e,t){if(Eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jk={curveBasisClosed:FF,curveBasisOpen:$F,curveBasis:BF,curveBumpX:TF,curveBumpY:AF,curveLinearClosed:UF,curveLinear:__,curveMonotoneX:VF,curveMonotoneY:qF,curveNatural:GF,curveStep:WF,curveStepAfter:ZF,curveStepBefore:HF},Jy=function(t){return t.x===+t.x&&t.y===+t.y},Vm=function(t){return t.x},qm=function(t){return t.y},pG=function(t,n){if(xr(t))return t;var a="curve".concat(y_(t));return(a==="curveMonotone"||a==="curveBump")&&n?Jk["".concat(a).concat(n==="vertical"?"Y":"X")]:Jk[a]||__},mG=function(t){var n=t.type,a=n===void 0?"linear":n,u=t.points,f=u===void 0?[]:u,p=t.baseLine,s=t.layout,P=t.connectNulls,A=P===void 0?!1:P,E=pG(a,s),M=A?f.filter(function(F){return Jy(F)}):f,D;if(Array.isArray(p)){var j=A?p.filter(function(F){return Jy(F)}):p,G=M.map(function(F,$){return Yk(Yk({},F),{},{base:j[$]})});return s==="vertical"?D=qy().y(qm).x1(Vm).x0(function(F){return F.base.x}):D=qy().x(Vm).y1(qm).y0(function(F){return F.base.y}),D.defined(Jy).curve(E),D(G)}return s==="vertical"&&Dt(p)?D=qy().y(qm).x1(Vm).x0(p):Dt(p)?D=qy().x(Vm).y1(qm).y0(p):D=SD().x(Vm).y(qm),D.defined(Jy).curve(E),D(M)},jv=function(t){var n=t.className,a=t.points,u=t.path,f=t.pathRef;if((!a||!a.length)&&!u)return null;var p=a&&a.length?mG(t):u;return be.createElement("path",AS({},fr(t,!1),cv(t),{className:Or("recharts-curve",n),d:p,ref:f}))},iw={exports:{}},aw,Qk;function gG(){if(Qk)return aw;Qk=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return aw=e,aw}var ow,eI;function yG(){if(eI)return ow;eI=1;var e=gG();function t(){}function n(){}return n.resetWarningCache=t,ow=function(){function a(p,s,P,A,E,M){if(M!==e){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}a.isRequired=a;function u(){return a}var f={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:u,element:a,elementType:a,instanceOf:u,node:a,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u,checkPropTypes:n,resetWarningCache:t};return f.PropTypes=f,f},ow}var tI;function vG(){return tI||(tI=1,iw.exports=yG()()),iw.exports}var _G=vG();const mn=ln(_G);var xG=Object.getOwnPropertyNames,bG=Object.getOwnPropertySymbols,wG=Object.prototype.hasOwnProperty;function rI(e,t){return function(a,u,f){return e(a,u,f)&&t(a,u,f)}}function Qy(e){return function(n,a,u){if(!n||!a||typeof n!="object"||typeof a!="object")return e(n,a,u);var f=u.cache,p=f.get(n),s=f.get(a);if(p&&s)return p===a&&s===n;f.set(n,a),f.set(a,n);var P=e(n,a,u);return f.delete(n),f.delete(a),P}}function SG(e){return e?.[Symbol.toStringTag]}function nI(e){return xG(e).concat(bG(e))}var PG=Object.hasOwn||(function(e,t){return wG.call(e,t)});function ef(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var TG="__v",AG="__o",CG="_owner",iI=Object.getOwnPropertyDescriptor,aI=Object.keys;function EG(e,t,n){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function MG(e,t){return ef(e.getTime(),t.getTime())}function kG(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function IG(e,t){return e===t}function oI(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var u=new Array(a),f=e.entries(),p,s,P=0;(p=f.next())&&!p.done;){for(var A=t.entries(),E=!1,M=0;(s=A.next())&&!s.done;){if(u[M]){M++;continue}var D=p.value,j=s.value;if(n.equals(D[0],j[0],P,M,e,t,n)&&n.equals(D[1],j[1],D[0],j[0],e,t,n)){E=u[M]=!0;break}M++}if(!E)return!1;P++}return!0}var OG=ef;function RG(e,t,n){var a=aI(e),u=a.length;if(aI(t).length!==u)return!1;for(;u-- >0;)if(!Tj(e,t,n,a[u]))return!1;return!0}function Gm(e,t,n){var a=nI(e),u=a.length;if(nI(t).length!==u)return!1;for(var f,p,s;u-- >0;)if(f=a[u],!Tj(e,t,n,f)||(p=iI(e,f),s=iI(t,f),(p||s)&&(!p||!s||p.configurable!==s.configurable||p.enumerable!==s.enumerable||p.writable!==s.writable)))return!1;return!0}function DG(e,t){return ef(e.valueOf(),t.valueOf())}function zG(e,t){return e.source===t.source&&e.flags===t.flags}function sI(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var u=new Array(a),f=e.values(),p,s;(p=f.next())&&!p.done;){for(var P=t.values(),A=!1,E=0;(s=P.next())&&!s.done;){if(!u[E]&&n.equals(p.value,s.value,p.value,s.value,e,t,n)){A=u[E]=!0;break}E++}if(!A)return!1}return!0}function jG(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function LG(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Tj(e,t,n,a){return(a===CG||a===AG||a===TG)&&(e.$$typeof||t.$$typeof)?!0:PG(t,a)&&n.equals(e[a],t[a],a,a,e,t,n)}var NG="[object Arguments]",BG="[object Boolean]",FG="[object Date]",$G="[object Error]",UG="[object Map]",VG="[object Number]",qG="[object Object]",GG="[object RegExp]",WG="[object Set]",HG="[object String]",ZG="[object URL]",XG=Array.isArray,lI=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,cI=Object.assign,KG=Object.prototype.toString.call.bind(Object.prototype.toString);function YG(e){var t=e.areArraysEqual,n=e.areDatesEqual,a=e.areErrorsEqual,u=e.areFunctionsEqual,f=e.areMapsEqual,p=e.areNumbersEqual,s=e.areObjectsEqual,P=e.arePrimitiveWrappersEqual,A=e.areRegExpsEqual,E=e.areSetsEqual,M=e.areTypedArraysEqual,D=e.areUrlsEqual,j=e.unknownTagComparators;return function(F,$,K){if(F===$)return!0;if(F==null||$==null)return!1;var J=typeof F;if(J!==typeof $)return!1;if(J!=="object")return J==="number"?p(F,$,K):J==="function"?u(F,$,K):!1;var ee=F.constructor;if(ee!==$.constructor)return!1;if(ee===Object)return s(F,$,K);if(XG(F))return t(F,$,K);if(lI!=null&&lI(F))return M(F,$,K);if(ee===Date)return n(F,$,K);if(ee===RegExp)return A(F,$,K);if(ee===Map)return f(F,$,K);if(ee===Set)return E(F,$,K);var oe=KG(F);if(oe===FG)return n(F,$,K);if(oe===GG)return A(F,$,K);if(oe===UG)return f(F,$,K);if(oe===WG)return E(F,$,K);if(oe===qG)return typeof F.then!="function"&&typeof $.then!="function"&&s(F,$,K);if(oe===ZG)return D(F,$,K);if(oe===$G)return a(F,$,K);if(oe===NG)return s(F,$,K);if(oe===BG||oe===VG||oe===HG)return P(F,$,K);if(j){var Y=j[oe];if(!Y){var re=SG(F);re&&(Y=j[re])}if(Y)return Y(F,$,K)}return!1}}function JG(e){var t=e.circular,n=e.createCustomConfig,a=e.strict,u={areArraysEqual:a?Gm:EG,areDatesEqual:MG,areErrorsEqual:kG,areFunctionsEqual:IG,areMapsEqual:a?rI(oI,Gm):oI,areNumbersEqual:OG,areObjectsEqual:a?Gm:RG,arePrimitiveWrappersEqual:DG,areRegExpsEqual:zG,areSetsEqual:a?rI(sI,Gm):sI,areTypedArraysEqual:a?Gm:jG,areUrlsEqual:LG,unknownTagComparators:void 0};if(n&&(u=cI({},u,n(u))),t){var f=Qy(u.areArraysEqual),p=Qy(u.areMapsEqual),s=Qy(u.areObjectsEqual),P=Qy(u.areSetsEqual);u=cI({},u,{areArraysEqual:f,areMapsEqual:p,areObjectsEqual:s,areSetsEqual:P})}return u}function QG(e){return function(t,n,a,u,f,p,s){return e(t,n,s)}}function eW(e){var t=e.circular,n=e.comparator,a=e.createState,u=e.equals,f=e.strict;if(a)return function(P,A){var E=a(),M=E.cache,D=M===void 0?t?new WeakMap:void 0:M,j=E.meta;return n(P,A,{cache:D,equals:u,meta:j,strict:f})};if(t)return function(P,A){return n(P,A,{cache:new WeakMap,equals:u,meta:void 0,strict:f})};var p={cache:void 0,equals:u,meta:void 0,strict:f};return function(P,A){return n(P,A,p)}}var tW=jh();jh({strict:!0});jh({circular:!0});jh({circular:!0,strict:!0});jh({createInternalComparator:function(){return ef}});jh({strict:!0,createInternalComparator:function(){return ef}});jh({circular:!0,createInternalComparator:function(){return ef}});jh({circular:!0,createInternalComparator:function(){return ef},strict:!0});function jh(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,a=e.createInternalComparator,u=e.createState,f=e.strict,p=f===void 0?!1:f,s=JG(e),P=YG(s),A=a?a(P):QG(P);return eW({circular:n,comparator:P,createState:u,equals:A,strict:p})}function rW(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function uI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function u(f){n<0&&(n=f),f-n>t?(e(f),n=-1):rW(u)};requestAnimationFrame(a)}function CS(e){"@babel/helpers - typeof";return CS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CS(e)}function nW(e){return sW(e)||oW(e)||aW(e)||iW()}function iW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aW(e,t){if(e){if(typeof e=="string")return hI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hI(e,t)}}function hI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function oW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sW(e){if(Array.isArray(e))return e}function lW(){var e={},t=function(){return null},n=!1,a=function u(f){if(!n){if(Array.isArray(f)){if(!f.length)return;var p=f,s=nW(p),P=s[0],A=s.slice(1);if(typeof P=="number"){uI(u.bind(null,A),P);return}u(P),uI(u.bind(null,A));return}CS(f)==="object"&&(e=f,t(e)),typeof f=="function"&&f()}};return{stop:function(){n=!0},start:function(f){n=!1,a(f)},subscribe:function(f){return t=f,function(){t=function(){return null}}}}}function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function dI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function fI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dI(Object(n),!0).forEach(function(a){Aj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Aj(e,t,n){return t=cW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cW(e){var t=uW(e,"string");return Mg(t)==="symbol"?t:String(t)}function uW(e,t){if(Mg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Mg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hW=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(a,u){return a.filter(function(f){return u.includes(f)})})},dW=function(t){return t},fW=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},eg=function(t,n){return Object.keys(n).reduce(function(a,u){return fI(fI({},a),{},Aj({},u,t(u,n[u])))},{})},pI=function(t,n,a){return t.map(function(u){return"".concat(fW(u)," ").concat(n,"ms ").concat(a)}).join(",")};function pW(e,t){return yW(e)||gW(e,t)||Cj(e,t)||mW()}function mW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gW(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function yW(e){if(Array.isArray(e))return e}function vW(e){return bW(e)||xW(e)||Cj(e)||_W()}function _W(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cj(e,t){if(e){if(typeof e=="string")return ES(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ES(e,t)}}function xW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bW(e){if(Array.isArray(e))return ES(e)}function ES(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Lv=1e-4,Ej=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},Mj=function(t,n){return t.map(function(a,u){return a*Math.pow(n,u)}).reduce(function(a,u){return a+u})},mI=function(t,n){return function(a){var u=Ej(t,n);return Mj(u,a)}},wW=function(t,n){return function(a){var u=Ej(t,n),f=[].concat(vW(u.map(function(p,s){return p*s}).slice(1)),[0]);return Mj(f,a)}},gI=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var u=n[0],f=n[1],p=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":u=0,f=0,p=1,s=1;break;case"ease":u=.25,f=.1,p=.25,s=1;break;case"ease-in":u=.42,f=0,p=1,s=1;break;case"ease-out":u=.42,f=0,p=.58,s=1;break;case"ease-in-out":u=0,f=0,p=.58,s=1;break;default:{var P=n[0].split("(");if(P[0]==="cubic-bezier"&&P[1].split(")")[0].split(",").length===4){var A=P[1].split(")")[0].split(",").map(function($){return parseFloat($)}),E=pW(A,4);u=E[0],f=E[1],p=E[2],s=E[3]}}}var M=mI(u,p),D=mI(f,s),j=wW(u,p),G=function(K){return K>1?1:K<0?0:K},F=function(K){for(var J=K>1?1:K,ee=J,oe=0;oe<8;++oe){var Y=M(ee)-J,re=j(ee);if(Math.abs(Y-J)<Lv||re<Lv)return D(ee);ee=G(ee-Y/re)}return D(ee)};return F.isStepper=!1,F},SW=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,a=n===void 0?100:n,u=t.damping,f=u===void 0?8:u,p=t.dt,s=p===void 0?17:p,P=function(E,M,D){var j=-(E-M)*a,G=D*f,F=D+(j-G)*s/1e3,$=D*s/1e3+E;return Math.abs($-M)<Lv&&Math.abs(F)<Lv?[M,0]:[$,F]};return P.isStepper=!0,P.dt=s,P},PW=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var u=n[0];if(typeof u=="string")switch(u){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gI(u);case"spring":return SW();default:if(u.split("(")[0]==="cubic-bezier")return gI(u)}return typeof u=="function"?u:null};function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function yI(e){return CW(e)||AW(e)||kj(e)||TW()}function TW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CW(e){if(Array.isArray(e))return kS(e)}function vI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vI(Object(n),!0).forEach(function(a){MS(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function MS(e,t,n){return t=EW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EW(e){var t=MW(e,"string");return kg(t)==="symbol"?t:String(t)}function MW(e,t){if(kg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(kg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kW(e,t){return RW(e)||OW(e,t)||kj(e,t)||IW()}function IW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kj(e,t){if(e){if(typeof e=="string")return kS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kS(e,t)}}function kS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function OW(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function RW(e){if(Array.isArray(e))return e}var Nv=function(t,n,a){return t+(n-t)*a},IS=function(t){var n=t.from,a=t.to;return n!==a},DW=function e(t,n,a){var u=eg(function(f,p){if(IS(p)){var s=t(p.from,p.to,p.velocity),P=kW(s,2),A=P[0],E=P[1];return wa(wa({},p),{},{from:A,velocity:E})}return p},n);return a<1?eg(function(f,p){return IS(p)?wa(wa({},p),{},{velocity:Nv(p.velocity,u[f].velocity,a),from:Nv(p.from,u[f].from,a)}):p},n):e(t,u,a-1)};const zW=(function(e,t,n,a,u){var f=hW(e,t),p=f.reduce(function($,K){return wa(wa({},$),{},MS({},K,[e[K],t[K]]))},{}),s=f.reduce(function($,K){return wa(wa({},$),{},MS({},K,{from:e[K],velocity:0,to:t[K]}))},{}),P=-1,A,E,M=function(){return null},D=function(){return eg(function(K,J){return J.from},s)},j=function(){return!Object.values(s).filter(IS).length},G=function(K){A||(A=K);var J=K-A,ee=J/n.dt;s=DW(n,s,ee),u(wa(wa(wa({},e),t),D())),A=K,j()||(P=requestAnimationFrame(M))},F=function(K){E||(E=K);var J=(K-E)/a,ee=eg(function(Y,re){return Nv.apply(void 0,yI(re).concat([n(J)]))},p);if(u(wa(wa(wa({},e),t),ee)),J<1)P=requestAnimationFrame(M);else{var oe=eg(function(Y,re){return Nv.apply(void 0,yI(re).concat([n(1)]))},p);u(wa(wa(wa({},e),t),oe))}};return M=n.isStepper?G:F,function(){return requestAnimationFrame(M),function(){cancelAnimationFrame(P)}}});function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}var jW=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function LW(e,t){if(e==null)return{};var n=NW(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function NW(e,t){if(e==null)return{};var n={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}function sw(e){return UW(e)||$W(e)||FW(e)||BW()}function BW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FW(e,t){if(e){if(typeof e=="string")return OS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OS(e,t)}}function $W(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UW(e){if(Array.isArray(e))return OS(e)}function OS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Al(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(n),!0).forEach(function(a){Xm(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Xm(e,t,n){return t=Ij(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qW(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ij(a.key),a)}}function GW(e,t,n){return t&&qW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ij(e){var t=WW(e,"string");return wp(t)==="symbol"?t:String(t)}function WW(e,t){if(wp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(wp(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RS(e,t)}function RS(e,t){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},RS(e,t)}function ZW(e){var t=XW();return function(){var a=Bv(e),u;if(t){var f=Bv(this).constructor;u=Reflect.construct(a,arguments,f)}else u=a.apply(this,arguments);return DS(this,u)}}function DS(e,t){if(t&&(wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zS(e)}function zS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bv(e)}var kc=(function(e){HW(n,e);var t=ZW(n);function n(a,u){var f;VW(this,n),f=t.call(this,a,u);var p=f.props,s=p.isActive,P=p.attributeName,A=p.from,E=p.to,M=p.steps,D=p.children,j=p.duration;if(f.handleStyleChange=f.handleStyleChange.bind(zS(f)),f.changeStyle=f.changeStyle.bind(zS(f)),!s||j<=0)return f.state={style:{}},typeof D=="function"&&(f.state={style:E}),DS(f);if(M&&M.length)f.state={style:M[0].style};else if(A){if(typeof D=="function")return f.state={style:A},DS(f);f.state={style:P?Xm({},P,A):A}}else f.state={style:{}};return f}return GW(n,[{key:"componentDidMount",value:function(){var u=this.props,f=u.isActive,p=u.canBegin;this.mounted=!0,!(!f||!p)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(u){var f=this.props,p=f.isActive,s=f.canBegin,P=f.attributeName,A=f.shouldReAnimate,E=f.to,M=f.from,D=this.state.style;if(s){if(!p){var j={style:P?Xm({},P,E):E};this.state&&D&&(P&&D[P]!==E||!P&&D!==E)&&this.setState(j);return}if(!(tW(u.to,E)&&u.canBegin&&u.isActive)){var G=!u.canBegin||!u.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var F=G||A?M:u.to;if(this.state&&D){var $={style:P?Xm({},P,F):F};(P&&D[P]!==F||!P&&D!==F)&&this.setState($)}this.runAnimation(Al(Al({},this.props),{},{from:F,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var u=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),u&&u()}},{key:"handleStyleChange",value:function(u){this.changeStyle(u)}},{key:"changeStyle",value:function(u){this.mounted&&this.setState({style:u})}},{key:"runJSAnimation",value:function(u){var f=this,p=u.from,s=u.to,P=u.duration,A=u.easing,E=u.begin,M=u.onAnimationEnd,D=u.onAnimationStart,j=zW(p,s,PW(A),P,this.changeStyle),G=function(){f.stopJSAnimation=j()};this.manager.start([D,E,G,P,M])}},{key:"runStepAnimation",value:function(u){var f=this,p=u.steps,s=u.begin,P=u.onAnimationStart,A=p[0],E=A.style,M=A.duration,D=M===void 0?0:M,j=function(F,$,K){if(K===0)return F;var J=$.duration,ee=$.easing,oe=ee===void 0?"ease":ee,Y=$.style,re=$.properties,ue=$.onAnimationEnd,ge=K>0?p[K-1]:$,Oe=re||Object.keys(Y);if(typeof oe=="function"||oe==="spring")return[].concat(sw(F),[f.runJSAnimation.bind(f,{from:ge.style,to:Y,duration:J,easing:oe}),J]);var We=pI(Oe,J,oe),Re=Al(Al(Al({},ge.style),Y),{},{transition:We});return[].concat(sw(F),[Re,J,ue]).filter(dW)};return this.manager.start([P].concat(sw(p.reduce(j,[E,Math.max(D,s)])),[u.onAnimationEnd]))}},{key:"runAnimation",value:function(u){this.manager||(this.manager=lW());var f=u.begin,p=u.duration,s=u.attributeName,P=u.to,A=u.easing,E=u.onAnimationStart,M=u.onAnimationEnd,D=u.steps,j=u.children,G=this.manager;if(this.unSubscribe=G.subscribe(this.handleStyleChange),typeof A=="function"||typeof j=="function"||A==="spring"){this.runJSAnimation(u);return}if(D.length>1){this.runStepAnimation(u);return}var F=s?Xm({},s,P):P,$=pI(Object.keys(F),p,A);G.start([E,f,Al(Al({},F),{},{transition:$}),p,M])}},{key:"render",value:function(){var u=this.props,f=u.children;u.begin;var p=u.duration;u.attributeName,u.easing;var s=u.isActive;u.steps,u.from,u.to,u.canBegin,u.onAnimationEnd,u.shouldReAnimate,u.onAnimationReStart;var P=LW(u,jW),A=be.Children.count(f),E=this.state.style;if(typeof f=="function")return f(E);if(!s||A===0||p<=0)return f;var M=function(j){var G=j.props,F=G.style,$=F===void 0?{}:F,K=G.className,J=be.cloneElement(j,Al(Al({},P),{},{style:Al(Al({},$),E),className:K}));return J};return A===1?M(be.Children.only(f)):Me.createElement("div",null,be.Children.map(f,function(D){return M(D)}))}}]),n})(be.PureComponent);kc.displayName="Animate";kc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};kc.propTypes={from:mn.oneOfType([mn.object,mn.string]),to:mn.oneOfType([mn.object,mn.string]),attributeName:mn.string,duration:mn.number,begin:mn.number,easing:mn.oneOfType([mn.string,mn.func]),steps:mn.arrayOf(mn.shape({duration:mn.number.isRequired,style:mn.object.isRequired,easing:mn.oneOfType([mn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),mn.func]),properties:mn.arrayOf("string"),onAnimationEnd:mn.func})),children:mn.oneOfType([mn.node,mn.func]),isActive:mn.bool,canBegin:mn.bool,onAnimationEnd:mn.func,shouldReAnimate:mn.bool,onAnimationStart:mn.func,onAnimationReStart:mn.func};function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fv.apply(this,arguments)}function KW(e,t){return eH(e)||QW(e,t)||JW(e,t)||YW()}function YW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JW(e,t){if(e){if(typeof e=="string")return xI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xI(e,t)}}function xI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function QW(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function eH(e){if(Array.isArray(e))return e}function bI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function wI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bI(Object(n),!0).forEach(function(a){tH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tH(e,t,n){return t=rH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rH(e){var t=nH(e,"string");return Ig(t)=="symbol"?t:t+""}function nH(e,t){if(Ig(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ig(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SI=function(t,n,a,u,f){var p=Math.min(Math.abs(a)/2,Math.abs(u)/2),s=u>=0?1:-1,P=a>=0?1:-1,A=u>=0&&a>=0||u<0&&a<0?1:0,E;if(p>0&&f instanceof Array){for(var M=[0,0,0,0],D=0,j=4;D<j;D++)M[D]=f[D]>p?p:f[D];E="M".concat(t,",").concat(n+s*M[0]),M[0]>0&&(E+="A ".concat(M[0],",").concat(M[0],",0,0,").concat(A,",").concat(t+P*M[0],",").concat(n)),E+="L ".concat(t+a-P*M[1],",").concat(n),M[1]>0&&(E+="A ".concat(M[1],",").concat(M[1],",0,0,").concat(A,`,
        `).concat(t+a,",").concat(n+s*M[1])),E+="L ".concat(t+a,",").concat(n+u-s*M[2]),M[2]>0&&(E+="A ".concat(M[2],",").concat(M[2],",0,0,").concat(A,`,
        `).concat(t+a-P*M[2],",").concat(n+u)),E+="L ".concat(t+P*M[3],",").concat(n+u),M[3]>0&&(E+="A ".concat(M[3],",").concat(M[3],",0,0,").concat(A,`,
        `).concat(t,",").concat(n+u-s*M[3])),E+="Z"}else if(p>0&&f===+f&&f>0){var G=Math.min(p,f);E="M ".concat(t,",").concat(n+s*G,`
            A `).concat(G,",").concat(G,",0,0,").concat(A,",").concat(t+P*G,",").concat(n,`
            L `).concat(t+a-P*G,",").concat(n,`
            A `).concat(G,",").concat(G,",0,0,").concat(A,",").concat(t+a,",").concat(n+s*G,`
            L `).concat(t+a,",").concat(n+u-s*G,`
            A `).concat(G,",").concat(G,",0,0,").concat(A,",").concat(t+a-P*G,",").concat(n+u,`
            L `).concat(t+P*G,",").concat(n+u,`
            A `).concat(G,",").concat(G,",0,0,").concat(A,",").concat(t,",").concat(n+u-s*G," Z")}else E="M ".concat(t,",").concat(n," h ").concat(a," v ").concat(u," h ").concat(-a," Z");return E},iH=function(t,n){if(!t||!n)return!1;var a=t.x,u=t.y,f=n.x,p=n.y,s=n.width,P=n.height;if(Math.abs(s)>0&&Math.abs(P)>0){var A=Math.min(f,f+s),E=Math.max(f,f+s),M=Math.min(p,p+P),D=Math.max(p,p+P);return a>=A&&a<=E&&u>=M&&u<=D}return!1},aH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mP=function(t){var n=wI(wI({},aH),t),a=be.useRef(),u=be.useState(-1),f=KW(u,2),p=f[0],s=f[1];be.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var oe=a.current.getTotalLength();oe&&s(oe)}catch{}},[]);var P=n.x,A=n.y,E=n.width,M=n.height,D=n.radius,j=n.className,G=n.animationEasing,F=n.animationDuration,$=n.animationBegin,K=n.isAnimationActive,J=n.isUpdateAnimationActive;if(P!==+P||A!==+A||E!==+E||M!==+M||E===0||M===0)return null;var ee=Or("recharts-rectangle",j);return J?Me.createElement(kc,{canBegin:p>0,from:{width:E,height:M,x:P,y:A},to:{width:E,height:M,x:P,y:A},duration:F,animationEasing:G,isActive:J},function(oe){var Y=oe.width,re=oe.height,ue=oe.x,ge=oe.y;return Me.createElement(kc,{canBegin:p>0,from:"0px ".concat(p===-1?1:p,"px"),to:"".concat(p,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:F,isActive:K,easing:G},Me.createElement("path",Fv({},fr(n,!0),{className:ee,d:SI(ue,ge,Y,re,D),ref:a})))}):Me.createElement("path",Fv({},fr(n,!0),{className:ee,d:SI(P,A,E,M,D)}))},oH=["points","className","baseLinePoints","connectNulls"];function ip(){return ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ip.apply(this,arguments)}function sH(e,t){if(e==null)return{};var n=lH(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function lH(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function PI(e){return dH(e)||hH(e)||uH(e)||cH()}function cH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uH(e,t){if(e){if(typeof e=="string")return jS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jS(e,t)}}function hH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dH(e){if(Array.isArray(e))return jS(e)}function jS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var TI=function(t){return t&&t.x===+t.x&&t.y===+t.y},fH=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(a){TI(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),TI(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},tg=function(t,n){var a=fH(t);n&&(a=[a.reduce(function(f,p){return[].concat(PI(f),PI(p))},[])]);var u=a.map(function(f){return f.reduce(function(p,s,P){return"".concat(p).concat(P===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return a.length===1?"".concat(u,"Z"):u},pH=function(t,n,a){var u=tg(t,a);return"".concat(u.slice(-1)==="Z"?u.slice(0,-1):u,"L").concat(tg(n.reverse(),a).slice(1))},mH=function(t){var n=t.points,a=t.className,u=t.baseLinePoints,f=t.connectNulls,p=sH(t,oH);if(!n||!n.length)return null;var s=Or("recharts-polygon",a);if(u&&u.length){var P=p.stroke&&p.stroke!=="none",A=pH(n,u,f);return Me.createElement("g",{className:s},Me.createElement("path",ip({},fr(p,!0),{fill:A.slice(-1)==="Z"?p.fill:"none",stroke:"none",d:A})),P?Me.createElement("path",ip({},fr(p,!0),{fill:"none",d:tg(n,f)})):null,P?Me.createElement("path",ip({},fr(p,!0),{fill:"none",d:tg(u,f)})):null)}var E=tg(n,f);return Me.createElement("path",ip({},fr(p,!0),{fill:E.slice(-1)==="Z"?p.fill:"none",className:s,d:E}))};function LS(){return LS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},LS.apply(this,arguments)}var z_=function(t){var n=t.cx,a=t.cy,u=t.r,f=t.className,p=Or("recharts-dot",f);return n===+n&&a===+a&&u===+u?be.createElement("circle",LS({},fr(t,!1),cv(t),{className:p,cx:n,cy:a,r:u})):null};function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}var gH=["x","y","top","left","width","height","className"];function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},NS.apply(this,arguments)}function AI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function yH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AI(Object(n),!0).forEach(function(a){vH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vH(e,t,n){return t=_H(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _H(e){var t=xH(e,"string");return Og(t)=="symbol"?t:t+""}function xH(e,t){if(Og(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Og(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bH(e,t){if(e==null)return{};var n=wH(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function wH(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var SH=function(t,n,a,u,f,p){return"M".concat(t,",").concat(f,"v").concat(u,"M").concat(p,",").concat(n,"h").concat(a)},PH=function(t){var n=t.x,a=n===void 0?0:n,u=t.y,f=u===void 0?0:u,p=t.top,s=p===void 0?0:p,P=t.left,A=P===void 0?0:P,E=t.width,M=E===void 0?0:E,D=t.height,j=D===void 0?0:D,G=t.className,F=bH(t,gH),$=yH({x:a,y:f,top:s,left:A,width:M,height:j},F);return!Dt(a)||!Dt(f)||!Dt(M)||!Dt(j)||!Dt(s)||!Dt(A)?null:Me.createElement("path",NS({},fr($,!0),{className:Or("recharts-cross",G),d:SH(a,f,M,j,s,A)}))},lw,CI;function TH(){if(CI)return lw;CI=1;var e=k_(),t=Wz(),n=Oc();function a(u,f){return u&&u.length?e(u,n(f,2),t):void 0}return lw=a,lw}var AH=TH();const CH=ln(AH);var cw,EI;function EH(){if(EI)return cw;EI=1;var e=k_(),t=Oc(),n=Hz();function a(u,f){return u&&u.length?e(u,t(f,2),n):void 0}return cw=a,cw}var MH=EH();const kH=ln(MH);var IH=["cx","cy","angle","ticks","axisLine"],OH=["ticks","tick","angle","tickFormatter","stroke"];function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rg.apply(this,arguments)}function MI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Od(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(n),!0).forEach(function(a){j_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kI(e,t){if(e==null)return{};var n=RH(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function RH(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function DH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function II(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Rj(a.key),a)}}function zH(e,t,n){return t&&II(e.prototype,t),n&&II(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jH(e,t,n){return t=$v(t),LH(e,Oj()?Reflect.construct(t,n||[],$v(e).constructor):t.apply(e,n))}function LH(e,t){if(t&&(Sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NH(e)}function NH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oj=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$v(e)}function BH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BS(e,t)}function BS(e,t){return BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},BS(e,t)}function j_(e,t,n){return t=Rj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rj(e){var t=FH(e,"string");return Sp(t)=="symbol"?t:t+""}function FH(e,t){if(Sp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Sp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L_=(function(e){function t(){return DH(this,t),jH(this,t,arguments)}return BH(t,e),zH(t,[{key:"getTickValueCoord",value:function(a){var u=a.coordinate,f=this.props,p=f.angle,s=f.cx,P=f.cy;return In(s,P,u,p)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,u;switch(a){case"left":u="end";break;case"right":u="start";break;default:u="middle";break}return u}},{key:"getViewBox",value:function(){var a=this.props,u=a.cx,f=a.cy,p=a.angle,s=a.ticks,P=CH(s,function(E){return E.coordinate||0}),A=kH(s,function(E){return E.coordinate||0});return{cx:u,cy:f,startAngle:p,endAngle:p,innerRadius:A.coordinate||0,outerRadius:P.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,u=a.cx,f=a.cy,p=a.angle,s=a.ticks,P=a.axisLine,A=kI(a,IH),E=s.reduce(function(G,F){return[Math.min(G[0],F.coordinate),Math.max(G[1],F.coordinate)]},[1/0,-1/0]),M=In(u,f,E[0],p),D=In(u,f,E[1],p),j=Od(Od(Od({},fr(A,!1)),{},{fill:"none"},fr(P,!1)),{},{x1:M.x,y1:M.y,x2:D.x,y2:D.y});return Me.createElement("line",rg({className:"recharts-polar-radius-axis-line"},j))}},{key:"renderTicks",value:function(){var a=this,u=this.props,f=u.ticks,p=u.tick,s=u.angle,P=u.tickFormatter,A=u.stroke,E=kI(u,OH),M=this.getTickTextAnchor(),D=fr(E,!1),j=fr(p,!1),G=f.map(function(F,$){var K=a.getTickValueCoord(F),J=Od(Od(Od(Od({textAnchor:M,transform:"rotate(".concat(90-s,", ").concat(K.x,", ").concat(K.y,")")},D),{},{stroke:"none",fill:A},j),{},{index:$},K),{},{payload:F});return Me.createElement(nn,rg({className:Or("recharts-polar-radius-axis-tick",bj(p)),key:"tick-".concat(F.coordinate)},Gd(a.props,F,$)),t.renderTickItem(p,J,P?P(F.value,$):F.value))});return Me.createElement(nn,{className:"recharts-polar-radius-axis-ticks"},G)}},{key:"render",value:function(){var a=this.props,u=a.ticks,f=a.axisLine,p=a.tick;return!u||!u.length?null:Me.createElement(nn,{className:Or("recharts-polar-radius-axis",this.props.className)},f&&this.renderAxisLine(),p&&this.renderTicks(),ia.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,u,f){var p;return Me.isValidElement(a)?p=Me.cloneElement(a,u):xr(a)?p=a(u):p=Me.createElement(Wd,rg({},u,{className:"recharts-polar-radius-axis-tick-value"}),f),p}}])})(be.PureComponent);j_(L_,"displayName","PolarRadiusAxis");j_(L_,"axisType","radiusAxis");j_(L_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jd.apply(this,arguments)}function OI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(n),!0).forEach(function(a){N_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RI(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,zj(a.key),a)}}function UH(e,t,n){return t&&RI(e.prototype,t),n&&RI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function VH(e,t,n){return t=Uv(t),qH(e,Dj()?Reflect.construct(t,n||[],Uv(e).constructor):t.apply(e,n))}function qH(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GH(e)}function GH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dj=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uv(e)}function WH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FS(e,t)}function FS(e,t){return FS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},FS(e,t)}function N_(e,t,n){return t=zj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zj(e){var t=HH(e,"string");return Pp(t)=="symbol"?t:t+""}function HH(e,t){if(Pp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Pp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZH=Math.PI/180,DI=1e-5,B_=(function(e){function t(){return $H(this,t),VH(this,t,arguments)}return WH(t,e),UH(t,[{key:"getTickLineCoord",value:function(a){var u=this.props,f=u.cx,p=u.cy,s=u.radius,P=u.orientation,A=u.tickSize,E=A||8,M=In(f,p,s,a.coordinate),D=In(f,p,s+(P==="inner"?-1:1)*E,a.coordinate);return{x1:M.x,y1:M.y,x2:D.x,y2:D.y}}},{key:"getTickTextAnchor",value:function(a){var u=this.props.orientation,f=Math.cos(-a.coordinate*ZH),p;return f>DI?p=u==="outer"?"start":"end":f<-DI?p=u==="outer"?"end":"start":p="middle",p}},{key:"renderAxisLine",value:function(){var a=this.props,u=a.cx,f=a.cy,p=a.radius,s=a.axisLine,P=a.axisLineType,A=Rd(Rd({},fr(this.props,!1)),{},{fill:"none"},fr(s,!1));if(P==="circle")return Me.createElement(z_,jd({className:"recharts-polar-angle-axis-line"},A,{cx:u,cy:f,r:p}));var E=this.props.ticks,M=E.map(function(D){return In(u,f,p,D.coordinate)});return Me.createElement(mH,jd({className:"recharts-polar-angle-axis-line"},A,{points:M}))}},{key:"renderTicks",value:function(){var a=this,u=this.props,f=u.ticks,p=u.tick,s=u.tickLine,P=u.tickFormatter,A=u.stroke,E=fr(this.props,!1),M=fr(p,!1),D=Rd(Rd({},E),{},{fill:"none"},fr(s,!1)),j=f.map(function(G,F){var $=a.getTickLineCoord(G),K=a.getTickTextAnchor(G),J=Rd(Rd(Rd({textAnchor:K},E),{},{stroke:"none",fill:A},M),{},{index:F,payload:G,x:$.x2,y:$.y2});return Me.createElement(nn,jd({className:Or("recharts-polar-angle-axis-tick",bj(p)),key:"tick-".concat(G.coordinate)},Gd(a.props,G,F)),s&&Me.createElement("line",jd({className:"recharts-polar-angle-axis-tick-line"},D,$)),p&&t.renderTickItem(p,J,P?P(G.value,F):G.value))});return Me.createElement(nn,{className:"recharts-polar-angle-axis-ticks"},j)}},{key:"render",value:function(){var a=this.props,u=a.ticks,f=a.radius,p=a.axisLine;return f<=0||!u||!u.length?null:Me.createElement(nn,{className:Or("recharts-polar-angle-axis",this.props.className)},p&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,u,f){var p;return Me.isValidElement(a)?p=Me.cloneElement(a,u):xr(a)?p=a(u):p=Me.createElement(Wd,jd({},u,{className:"recharts-polar-angle-axis-tick-value"}),f),p}}])})(be.PureComponent);N_(B_,"displayName","PolarAngleAxis");N_(B_,"axisType","angleAxis");N_(B_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var uw,zI;function XH(){if(zI)return uw;zI=1;var e=WD(),t=e(Object.getPrototypeOf,Object);return uw=t,uw}var hw,jI;function KH(){if(jI)return hw;jI=1;var e=Lu(),t=XH(),n=Nu(),a="[object Object]",u=Function.prototype,f=Object.prototype,p=u.toString,s=f.hasOwnProperty,P=p.call(Object);function A(E){if(!n(E)||e(E)!=a)return!1;var M=t(E);if(M===null)return!0;var D=s.call(M,"constructor")&&M.constructor;return typeof D=="function"&&D instanceof D&&p.call(D)==P}return hw=A,hw}var YH=KH();const JH=ln(YH);var dw,LI;function QH(){if(LI)return dw;LI=1;var e=Lu(),t=Nu(),n="[object Boolean]";function a(u){return u===!0||u===!1||t(u)&&e(u)==n}return dw=a,dw}var eZ=QH();const tZ=ln(eZ);function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vv.apply(this,arguments)}function rZ(e,t){return oZ(e)||aZ(e,t)||iZ(e,t)||nZ()}function nZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iZ(e,t){if(e){if(typeof e=="string")return NI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NI(e,t)}}function NI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function aZ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function oZ(e){if(Array.isArray(e))return e}function BI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function FI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BI(Object(n),!0).forEach(function(a){sZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sZ(e,t,n){return t=lZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lZ(e){var t=cZ(e,"string");return Rg(t)=="symbol"?t:t+""}function cZ(e,t){if(Rg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Rg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $I=function(t,n,a,u,f){var p=a-u,s;return s="M ".concat(t,",").concat(n),s+="L ".concat(t+a,",").concat(n),s+="L ".concat(t+a-p/2,",").concat(n+f),s+="L ".concat(t+a-p/2-u,",").concat(n+f),s+="L ".concat(t,",").concat(n," Z"),s},uZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hZ=function(t){var n=FI(FI({},uZ),t),a=be.useRef(),u=be.useState(-1),f=rZ(u,2),p=f[0],s=f[1];be.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var ee=a.current.getTotalLength();ee&&s(ee)}catch{}},[]);var P=n.x,A=n.y,E=n.upperWidth,M=n.lowerWidth,D=n.height,j=n.className,G=n.animationEasing,F=n.animationDuration,$=n.animationBegin,K=n.isUpdateAnimationActive;if(P!==+P||A!==+A||E!==+E||M!==+M||D!==+D||E===0&&M===0||D===0)return null;var J=Or("recharts-trapezoid",j);return K?Me.createElement(kc,{canBegin:p>0,from:{upperWidth:0,lowerWidth:0,height:D,x:P,y:A},to:{upperWidth:E,lowerWidth:M,height:D,x:P,y:A},duration:F,animationEasing:G,isActive:K},function(ee){var oe=ee.upperWidth,Y=ee.lowerWidth,re=ee.height,ue=ee.x,ge=ee.y;return Me.createElement(kc,{canBegin:p>0,from:"0px ".concat(p===-1?1:p,"px"),to:"".concat(p,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:F,easing:G},Me.createElement("path",Vv({},fr(n,!0),{className:J,d:$I(ue,ge,oe,Y,re),ref:a})))}):Me.createElement("g",null,Me.createElement("path",Vv({},fr(n,!0),{className:J,d:$I(P,A,E,M,D)})))},dZ=["option","shapeType","propTransformer","activeClassName","isActive"];function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function fZ(e,t){if(e==null)return{};var n=pZ(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function pZ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function UI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function qv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(n),!0).forEach(function(a){mZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mZ(e,t,n){return t=gZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gZ(e){var t=yZ(e,"string");return Dg(t)=="symbol"?t:t+""}function yZ(e,t){if(Dg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vZ(e,t){return qv(qv({},t),e)}function _Z(e,t){return e==="symbols"}function VI(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Me.createElement(mP,n);case"trapezoid":return Me.createElement(hZ,n);case"sector":return Me.createElement(Pj,n);case"symbols":if(_Z(t))return Me.createElement(D2,n);break;default:return null}}function xZ(e){return be.isValidElement(e)?e.props:e}function jj(e){var t=e.option,n=e.shapeType,a=e.propTransformer,u=a===void 0?vZ:a,f=e.activeClassName,p=f===void 0?"recharts-active-shape":f,s=e.isActive,P=fZ(e,dZ),A;if(be.isValidElement(t))A=be.cloneElement(t,qv(qv({},P),xZ(t)));else if(xr(t))A=t(P);else if(JH(t)&&!tZ(t)){var E=u(t,P);A=Me.createElement(VI,{shapeType:n,elementProps:E})}else{var M=P;A=Me.createElement(VI,{shapeType:n,elementProps:M})}return s?Me.createElement(nn,{className:p},A):A}function F_(e,t){return t!=null&&"trapezoids"in e.props}function $_(e,t){return t!=null&&"sectors"in e.props}function zg(e,t){return t!=null&&"points"in e.props}function bZ(e,t){var n,a,u=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,f=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return u&&f}function wZ(e,t){var n=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return n&&a}function SZ(e,t){var n=e.x===t.x,a=e.y===t.y,u=e.z===t.z;return n&&a&&u}function PZ(e,t){var n;return F_(e,t)?n=bZ:$_(e,t)?n=wZ:zg(e,t)&&(n=SZ),n}function TZ(e,t){var n;return F_(e,t)?n="trapezoids":$_(e,t)?n="sectors":zg(e,t)&&(n="points"),n}function AZ(e,t){if(F_(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if($_(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return zg(e,t)?t.payload:{}}function CZ(e){var t=e.activeTooltipItem,n=e.graphicalItem,a=e.itemData,u=TZ(n,t),f=AZ(n,t),p=a.filter(function(P,A){var E=Yg(f,P),M=n.props[u].filter(function(G){var F=PZ(n,t);return F(G,t)}),D=n.props[u].indexOf(M[M.length-1]),j=A===D;return E&&j}),s=a.indexOf(p[p.length-1]);return s}var av;function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function ap(){return ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ap.apply(this,arguments)}function qI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qI(Object(n),!0).forEach(function(a){Ns(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function EZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GI(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Nj(a.key),a)}}function MZ(e,t,n){return t&&GI(e.prototype,t),n&&GI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kZ(e,t,n){return t=Gv(t),IZ(e,Lj()?Reflect.construct(t,n||[],Gv(e).constructor):t.apply(e,n))}function IZ(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OZ(e)}function OZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lj=function(){return!!e})()}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gv(e)}function RZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$S(e,t)}function $S(e,t){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},$S(e,t)}function Ns(e,t,n){return t=Nj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nj(e){var t=DZ(e,"string");return Tp(t)=="symbol"?t:t+""}function DZ(e,t){if(Tp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Tp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fu=(function(e){function t(n){var a;return EZ(this,t),a=kZ(this,t,[n]),Ns(a,"pieRef",null),Ns(a,"sectorRefs",[]),Ns(a,"id",Wp("recharts-pie-")),Ns(a,"handleAnimationEnd",function(){var u=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),xr(u)&&u()}),Ns(a,"handleAnimationStart",function(){var u=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),xr(u)&&u()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return RZ(t,e),MZ(t,[{key:"isActiveIndex",value:function(a){var u=this.props.activeIndex;return Array.isArray(u)?u.indexOf(a)!==-1:a===u}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var u=this.props.isAnimationActive;if(u&&!this.state.isAnimationFinished)return null;var f=this.props,p=f.label,s=f.labelLine,P=f.dataKey,A=f.valueKey,E=fr(this.props,!1),M=fr(p,!1),D=fr(s,!1),j=p&&p.offsetRadius||20,G=a.map(function(F,$){var K=(F.startAngle+F.endAngle)/2,J=In(F.cx,F.cy,F.outerRadius+j,K),ee=Mn(Mn(Mn(Mn({},E),F),{},{stroke:"none"},M),{},{index:$,textAnchor:t.getTextAnchor(J.x,F.cx)},J),oe=Mn(Mn(Mn(Mn({},E),F),{},{fill:"none",stroke:F.fill},D),{},{index:$,points:[In(F.cx,F.cy,F.outerRadius,K),J]}),Y=P;return kr(P)&&kr(A)?Y="value":kr(P)&&(Y=A),Me.createElement(nn,{key:"label-".concat(F.startAngle,"-").concat(F.endAngle,"-").concat(F.midAngle,"-").concat($)},s&&t.renderLabelLineItem(s,oe,"line"),t.renderLabelItem(p,ee,Wi(F,Y)))});return Me.createElement(nn,{className:"recharts-pie-labels"},G)}},{key:"renderSectorsStatically",value:function(a){var u=this,f=this.props,p=f.activeShape,s=f.blendStroke,P=f.inactiveShape;return a.map(function(A,E){if(A?.startAngle===0&&A?.endAngle===0&&a.length!==1)return null;var M=u.isActiveIndex(E),D=P&&u.hasActiveIndex()?P:null,j=M?p:D,G=Mn(Mn({},A),{},{stroke:s?A.fill:A.stroke,tabIndex:-1});return Me.createElement(nn,ap({ref:function($){$&&!u.sectorRefs.includes($)&&u.sectorRefs.push($)},tabIndex:-1,className:"recharts-pie-sector"},Gd(u.props,A,E),{key:"sector-".concat(A?.startAngle,"-").concat(A?.endAngle,"-").concat(A.midAngle,"-").concat(E)}),Me.createElement(jj,ap({option:j,isActive:M,shapeType:"sector"},G)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,u=this.props,f=u.sectors,p=u.isAnimationActive,s=u.animationBegin,P=u.animationDuration,A=u.animationEasing,E=u.animationId,M=this.state,D=M.prevSectors,j=M.prevIsAnimationActive;return Me.createElement(kc,{begin:s,duration:P,isActive:p,easing:A,from:{t:0},to:{t:1},key:"pie-".concat(E,"-").concat(j),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(G){var F=G.t,$=[],K=f&&f[0],J=K.startAngle;return f.forEach(function(ee,oe){var Y=D&&D[oe],re=oe>0?ts(ee,"paddingAngle",0):0;if(Y){var ue=Qo(Y.endAngle-Y.startAngle,ee.endAngle-ee.startAngle),ge=Mn(Mn({},ee),{},{startAngle:J+re,endAngle:J+ue(F)+re});$.push(ge),J=ge.endAngle}else{var Oe=ee.endAngle,We=ee.startAngle,Re=Qo(0,Oe-We),Ve=Re(F),Ye=Mn(Mn({},ee),{},{startAngle:J+re,endAngle:J+Ve+re});$.push(Ye),J=Ye.endAngle}}),Me.createElement(nn,null,a.renderSectorsStatically($))})}},{key:"attachKeyboardHandlers",value:function(a){var u=this;a.onkeydown=function(f){if(!f.altKey)switch(f.key){case"ArrowLeft":{var p=++u.state.sectorToFocus%u.sectorRefs.length;u.sectorRefs[p].focus(),u.setState({sectorToFocus:p});break}case"ArrowRight":{var s=--u.state.sectorToFocus<0?u.sectorRefs.length-1:u.state.sectorToFocus%u.sectorRefs.length;u.sectorRefs[s].focus(),u.setState({sectorToFocus:s});break}case"Escape":{u.sectorRefs[u.state.sectorToFocus].blur(),u.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,u=a.sectors,f=a.isAnimationActive,p=this.state.prevSectors;return f&&u&&u.length&&(!p||!Yg(p,u))?this.renderSectorsWithAnimation():this.renderSectorsStatically(u)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,u=this.props,f=u.hide,p=u.sectors,s=u.className,P=u.label,A=u.cx,E=u.cy,M=u.innerRadius,D=u.outerRadius,j=u.isAnimationActive,G=this.state.isAnimationFinished;if(f||!p||!p.length||!Dt(A)||!Dt(E)||!Dt(M)||!Dt(D))return null;var F=Or("recharts-pie",s);return Me.createElement(nn,{tabIndex:this.props.rootTabIndex,className:F,ref:function(K){a.pieRef=K}},this.renderSectors(),P&&this.renderLabels(p),ia.renderCallByParent(this.props,null,!1),(!j||G)&&Ru.renderCallByParent(this.props,p,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,u){return u.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==u.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:u.curSectors,isAnimationFinished:!0}:a.sectors!==u.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,u){return a>u?"start":a<u?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,u,f){if(Me.isValidElement(a))return Me.cloneElement(a,u);if(xr(a))return a(u);var p=Or("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Me.createElement(jv,ap({},u,{key:f,type:"linear",className:p}))}},{key:"renderLabelItem",value:function(a,u,f){if(Me.isValidElement(a))return Me.cloneElement(a,u);var p=f;if(xr(a)&&(p=a(u),Me.isValidElement(p)))return p;var s=Or("recharts-pie-label-text",typeof a!="boolean"&&!xr(a)?a.className:"");return Me.createElement(Wd,ap({},u,{alignmentBaseline:"middle",className:s}),p)}}])})(be.PureComponent);av=Fu;Ns(Fu,"displayName","Pie");Ns(Fu,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Yd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ns(Fu,"parseDeltaAngle",function(e,t){var n=ro(t-e),a=Math.min(Math.abs(t-e),360);return n*a});Ns(Fu,"getRealPieData",function(e){var t=e.data,n=e.children,a=fr(e,!1),u=rs(n,hg);return t&&t.length?t.map(function(f,p){return Mn(Mn(Mn({payload:f},a),f),u&&u[p]&&u[p].props)}):u&&u.length?u.map(function(f){return Mn(Mn({},a),f.props)}):[]});Ns(Fu,"parseCoordinateOfPie",function(e,t){var n=t.top,a=t.left,u=t.width,f=t.height,p=xj(u,f),s=a+no(e.cx,u,u/2),P=n+no(e.cy,f,f/2),A=no(e.innerRadius,p,0),E=no(e.outerRadius,p,p*.8),M=e.maxRadius||Math.sqrt(u*u+f*f)/2;return{cx:s,cy:P,innerRadius:A,outerRadius:E,maxRadius:M}});Ns(Fu,"getComposedData",function(e){var t=e.item,n=e.offset,a=t.type.defaultProps!==void 0?Mn(Mn({},t.type.defaultProps),t.props):t.props,u=av.getRealPieData(a);if(!u||!u.length)return null;var f=a.cornerRadius,p=a.startAngle,s=a.endAngle,P=a.paddingAngle,A=a.dataKey,E=a.nameKey,M=a.valueKey,D=a.tooltipType,j=Math.abs(a.minAngle),G=av.parseCoordinateOfPie(a,n),F=av.parseDeltaAngle(p,s),$=Math.abs(F),K=A;kr(A)&&kr(M)?(Oh(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),K="value"):kr(A)&&(Oh(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),K=M);var J=u.filter(function(ge){return Wi(ge,K,0)!==0}).length,ee=($>=360?J:J-1)*P,oe=$-J*j-ee,Y=u.reduce(function(ge,Oe){var We=Wi(Oe,K,0);return ge+(Dt(We)?We:0)},0),re;if(Y>0){var ue;re=u.map(function(ge,Oe){var We=Wi(ge,K,0),Re=Wi(ge,E,Oe),Ve=(Dt(We)?We:0)/Y,Ye;Oe?Ye=ue.endAngle+ro(F)*P*(We!==0?1:0):Ye=p;var ot=Ye+ro(F)*((We!==0?j:0)+Ve*oe),at=(Ye+ot)/2,st=(G.innerRadius+G.outerRadius)/2,lt=[{name:Re,value:We,payload:ge,dataKey:K,type:D}],Ne=In(G.cx,G.cy,st,at);return ue=Mn(Mn(Mn({percent:Ve,cornerRadius:f,name:Re,tooltipPayload:lt,midAngle:at,middleRadius:st,tooltipPosition:Ne},ge),G),{},{value:Wi(ge,K),startAngle:Ye,endAngle:ot,payload:ge,paddingAngle:ro(F)*P}),ue})}return Mn(Mn({},G),{},{sectors:re,data:u})});var fw,WI;function zZ(){if(WI)return fw;WI=1;var e=Math.ceil,t=Math.max;function n(a,u,f,p){for(var s=-1,P=t(e((u-a)/(f||1)),0),A=Array(P);P--;)A[p?P:++s]=a,a+=f;return A}return fw=n,fw}var pw,HI;function Bj(){if(HI)return pw;HI=1;var e=lz(),t=1/0,n=17976931348623157e292;function a(u){if(!u)return u===0?u:0;if(u=e(u),u===t||u===-t){var f=u<0?-1:1;return f*n}return u===u?u:0}return pw=a,pw}var mw,ZI;function jZ(){if(ZI)return mw;ZI=1;var e=zZ(),t=S_(),n=Bj();function a(u){return function(f,p,s){return s&&typeof s!="number"&&t(f,p,s)&&(p=s=void 0),f=n(f),p===void 0?(p=f,f=0):p=n(p),s=s===void 0?f<p?1:-1:n(s),e(f,p,s,u)}}return mw=a,mw}var gw,XI;function LZ(){if(XI)return gw;XI=1;var e=jZ(),t=e();return gw=t,gw}var NZ=LZ();const Wv=ln(NZ);function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function KI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function YI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KI(Object(n),!0).forEach(function(a){Fj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Fj(e,t,n){return t=BZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BZ(e){var t=FZ(e,"string");return jg(t)=="symbol"?t:t+""}function FZ(e,t){if(jg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(jg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Z=["Webkit","Moz","O","ms"],UZ=function(t,n){var a=t.replace(/(\w)/,function(f){return f.toUpperCase()}),u=$Z.reduce(function(f,p){return YI(YI({},f),{},Fj({},p+a,n))},{});return u[t]=n,u};function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hv.apply(this,arguments)}function JI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function yw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JI(Object(n),!0).forEach(function(a){Yo(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function VZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QI(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Uj(a.key),a)}}function qZ(e,t,n){return t&&QI(e.prototype,t),n&&QI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function GZ(e,t,n){return t=Zv(t),WZ(e,$j()?Reflect.construct(t,n||[],Zv(e).constructor):t.apply(e,n))}function WZ(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HZ(e)}function HZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($j=function(){return!!e})()}function Zv(e){return Zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zv(e)}function ZZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&US(e,t)}function US(e,t){return US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},US(e,t)}function Yo(e,t,n){return t=Uj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uj(e){var t=XZ(e,"string");return Ap(t)=="symbol"?t:t+""}function XZ(e,t){if(Ap(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ap(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var KZ=function(t){var n=t.data,a=t.startIndex,u=t.endIndex,f=t.x,p=t.width,s=t.travellerWidth;if(!n||!n.length)return{};var P=n.length,A=Jm().domain(Wv(0,P)).range([f,f+p-s]),E=A.domain().map(function(M){return A(M)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:A(a),endX:A(u),scale:A,scaleValues:E}},eO=function(t){return t.changedTouches&&!!t.changedTouches.length},Cp=(function(e){function t(n){var a;return VZ(this,t),a=GZ(this,t,[n]),Yo(a,"handleDrag",function(u){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(u):a.state.isSlideMoving&&a.handleSlideDrag(u)}),Yo(a,"handleTouchMove",function(u){u.changedTouches!=null&&u.changedTouches.length>0&&a.handleDrag(u.changedTouches[0])}),Yo(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var u=a.props,f=u.endIndex,p=u.onDragEnd,s=u.startIndex;p?.({endIndex:f,startIndex:s})}),a.detachDragEndListener()}),Yo(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Yo(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Yo(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Yo(a,"handleSlideDragStart",function(u){var f=eO(u)?u.changedTouches[0]:u;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:f.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return ZZ(t,e),qZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var u=a.startX,f=a.endX,p=this.state.scaleValues,s=this.props,P=s.gap,A=s.data,E=A.length-1,M=Math.min(u,f),D=Math.max(u,f),j=t.getIndexInRange(p,M),G=t.getIndexInRange(p,D);return{startIndex:j-j%P,endIndex:G===E?E:G-G%P}}},{key:"getTextOfTick",value:function(a){var u=this.props,f=u.data,p=u.tickFormatter,s=u.dataKey,P=Wi(f[a],s,a);return xr(p)?p(P,a):P}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var u=this.state,f=u.slideMoveStartX,p=u.startX,s=u.endX,P=this.props,A=P.x,E=P.width,M=P.travellerWidth,D=P.startIndex,j=P.endIndex,G=P.onChange,F=a.pageX-f;F>0?F=Math.min(F,A+E-M-s,A+E-M-p):F<0&&(F=Math.max(F,A-p,A-s));var $=this.getIndex({startX:p+F,endX:s+F});($.startIndex!==D||$.endIndex!==j)&&G&&G($),this.setState({startX:p+F,endX:s+F,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,u){var f=eO(u)?u.changedTouches[0]:u;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:f.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var u=this.state,f=u.brushMoveStartX,p=u.movingTravellerId,s=u.endX,P=u.startX,A=this.state[p],E=this.props,M=E.x,D=E.width,j=E.travellerWidth,G=E.onChange,F=E.gap,$=E.data,K={startX:this.state.startX,endX:this.state.endX},J=a.pageX-f;J>0?J=Math.min(J,M+D-j-A):J<0&&(J=Math.max(J,M-A)),K[p]=A+J;var ee=this.getIndex(K),oe=ee.startIndex,Y=ee.endIndex,re=function(){var ge=$.length-1;return p==="startX"&&(s>P?oe%F===0:Y%F===0)||s<P&&Y===ge||p==="endX"&&(s>P?Y%F===0:oe%F===0)||s>P&&Y===ge};this.setState(Yo(Yo({},p,A+J),"brushMoveStartX",a.pageX),function(){G&&re()&&G(ee)})}},{key:"handleTravellerMoveKeyboard",value:function(a,u){var f=this,p=this.state,s=p.scaleValues,P=p.startX,A=p.endX,E=this.state[u],M=s.indexOf(E);if(M!==-1){var D=M+a;if(!(D===-1||D>=s.length)){var j=s[D];u==="startX"&&j>=A||u==="endX"&&j<=P||this.setState(Yo({},u,j),function(){f.props.onChange(f.getIndex({startX:f.state.startX,endX:f.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,u=a.x,f=a.y,p=a.width,s=a.height,P=a.fill,A=a.stroke;return Me.createElement("rect",{stroke:A,fill:P,x:u,y:f,width:p,height:s})}},{key:"renderPanorama",value:function(){var a=this.props,u=a.x,f=a.y,p=a.width,s=a.height,P=a.data,A=a.children,E=a.padding,M=be.Children.only(A);return M?Me.cloneElement(M,{x:u,y:f,width:p,height:s,margin:E,compact:!0,data:P}):null}},{key:"renderTravellerLayer",value:function(a,u){var f,p,s=this,P=this.props,A=P.y,E=P.travellerWidth,M=P.height,D=P.traveller,j=P.ariaLabel,G=P.data,F=P.startIndex,$=P.endIndex,K=Math.max(a,this.props.x),J=yw(yw({},fr(this.props,!1)),{},{x:K,y:A,width:E,height:M}),ee=j||"Min value: ".concat((f=G[F])===null||f===void 0?void 0:f.name,", Max value: ").concat((p=G[$])===null||p===void 0?void 0:p.name);return Me.createElement(nn,{tabIndex:0,role:"slider","aria-label":ee,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[u],onTouchStart:this.travellerDragStartHandlers[u],onKeyDown:function(Y){["ArrowLeft","ArrowRight"].includes(Y.key)&&(Y.preventDefault(),Y.stopPropagation(),s.handleTravellerMoveKeyboard(Y.key==="ArrowRight"?1:-1,u))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(D,J))}},{key:"renderSlide",value:function(a,u){var f=this.props,p=f.y,s=f.height,P=f.stroke,A=f.travellerWidth,E=Math.min(a,u)+A,M=Math.max(Math.abs(u-a)-A,0);return Me.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:P,fillOpacity:.2,x:E,y:p,width:M,height:s})}},{key:"renderText",value:function(){var a=this.props,u=a.startIndex,f=a.endIndex,p=a.y,s=a.height,P=a.travellerWidth,A=a.stroke,E=this.state,M=E.startX,D=E.endX,j=5,G={pointerEvents:"none",fill:A};return Me.createElement(nn,{className:"recharts-brush-texts"},Me.createElement(Wd,Hv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(M,D)-j,y:p+s/2},G),this.getTextOfTick(u)),Me.createElement(Wd,Hv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(M,D)+P+j,y:p+s/2},G),this.getTextOfTick(f)))}},{key:"render",value:function(){var a=this.props,u=a.data,f=a.className,p=a.children,s=a.x,P=a.y,A=a.width,E=a.height,M=a.alwaysShowText,D=this.state,j=D.startX,G=D.endX,F=D.isTextActive,$=D.isSlideMoving,K=D.isTravellerMoving,J=D.isTravellerFocused;if(!u||!u.length||!Dt(s)||!Dt(P)||!Dt(A)||!Dt(E)||A<=0||E<=0)return null;var ee=Or("recharts-brush",f),oe=Me.Children.count(p)===1,Y=UZ("userSelect","none");return Me.createElement(nn,{className:ee,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:Y},this.renderBackground(),oe&&this.renderPanorama(),this.renderSlide(j,G),this.renderTravellerLayer(j,"startX"),this.renderTravellerLayer(G,"endX"),(F||$||K||J||M)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var u=a.x,f=a.y,p=a.width,s=a.height,P=a.stroke,A=Math.floor(f+s/2)-1;return Me.createElement(Me.Fragment,null,Me.createElement("rect",{x:u,y:f,width:p,height:s,fill:P,stroke:"none"}),Me.createElement("line",{x1:u+1,y1:A,x2:u+p-1,y2:A,fill:"none",stroke:"#fff"}),Me.createElement("line",{x1:u+1,y1:A+2,x2:u+p-1,y2:A+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,u){var f;return Me.isValidElement(a)?f=Me.cloneElement(a,u):xr(a)?f=a(u):f=t.renderDefaultTraveller(u),f}},{key:"getDerivedStateFromProps",value:function(a,u){var f=a.data,p=a.width,s=a.x,P=a.travellerWidth,A=a.updateId,E=a.startIndex,M=a.endIndex;if(f!==u.prevData||A!==u.prevUpdateId)return yw({prevData:f,prevTravellerWidth:P,prevUpdateId:A,prevX:s,prevWidth:p},f&&f.length?KZ({data:f,width:p,x:s,travellerWidth:P,startIndex:E,endIndex:M}):{scale:null,scaleValues:null});if(u.scale&&(p!==u.prevWidth||s!==u.prevX||P!==u.prevTravellerWidth)){u.scale.range([s,s+p-P]);var D=u.scale.domain().map(function(j){return u.scale(j)});return{prevData:f,prevTravellerWidth:P,prevUpdateId:A,prevX:s,prevWidth:p,startX:u.scale(a.startIndex),endX:u.scale(a.endIndex),scaleValues:D}}return null}},{key:"getIndexInRange",value:function(a,u){for(var f=a.length,p=0,s=f-1;s-p>1;){var P=Math.floor((p+s)/2);a[P]>u?s=P:p=P}return u>=a[s]?s:p}}])})(be.PureComponent);Yo(Cp,"displayName","Brush");Yo(Cp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var vw,tO;function YZ(){if(tO)return vw;tO=1;var e=$2();function t(n,a){var u;return e(n,function(f,p,s){return u=a(f,p,s),!u}),!!u}return vw=t,vw}var _w,rO;function JZ(){if(rO)return _w;rO=1;var e=BD(),t=Oc(),n=YZ(),a=To(),u=S_();function f(p,s,P){var A=a(p)?e:n;return P&&u(p,s,P)&&(s=void 0),A(p,t(s,3))}return _w=f,_w}var QZ=JZ();const eX=ln(QZ);var Ec=function(t,n){var a=t.alwaysShow,u=t.ifOverflow;return a&&(u="extendDomain"),u===n},xw,nO;function tX(){if(nO)return xw;nO=1;var e=nz();function t(n,a,u){a=="__proto__"&&e?e(n,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):n[a]=u}return xw=t,xw}var bw,iO;function rX(){if(iO)return bw;iO=1;var e=tX(),t=tz(),n=Oc();function a(u,f){var p={};return f=n(f,3),t(u,function(s,P,A){e(p,P,f(s,P,A))}),p}return bw=a,bw}var nX=rX();const iX=ln(nX);var ww,aO;function aX(){if(aO)return ww;aO=1;function e(t,n){for(var a=-1,u=t==null?0:t.length;++a<u;)if(!n(t[a],a,t))return!1;return!0}return ww=e,ww}var Sw,oO;function oX(){if(oO)return Sw;oO=1;var e=$2();function t(n,a){var u=!0;return e(n,function(f,p,s){return u=!!a(f,p,s),u}),u}return Sw=t,Sw}var Pw,sO;function sX(){if(sO)return Pw;sO=1;var e=aX(),t=oX(),n=Oc(),a=To(),u=S_();function f(p,s,P){var A=a(p)?e:t;return P&&u(p,s,P)&&(s=void 0),A(p,n(s,3))}return Pw=f,Pw}var lX=sX();const Vj=ln(lX);var cX=["x","y"];function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function VS(){return VS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},VS.apply(this,arguments)}function lO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Wm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lO(Object(n),!0).forEach(function(a){uX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uX(e,t,n){return t=hX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hX(e){var t=dX(e,"string");return Lg(t)=="symbol"?t:t+""}function dX(e,t){if(Lg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Lg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fX(e,t){if(e==null)return{};var n=pX(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function pX(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function mX(e,t){var n=e.x,a=e.y,u=fX(e,cX),f="".concat(n),p=parseInt(f,10),s="".concat(a),P=parseInt(s,10),A="".concat(t.height||u.height),E=parseInt(A,10),M="".concat(t.width||u.width),D=parseInt(M,10);return Wm(Wm(Wm(Wm(Wm({},t),u),p?{x:p}:{}),P?{y:P}:{}),{},{height:E,width:D,name:t.name,radius:t.radius})}function cO(e){return Me.createElement(jj,VS({shapeType:"rectangle",propTransformer:mX,activeClassName:"recharts-active-bar"},e))}var gX=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,u){if(typeof t=="number")return t;var f=Dt(a)||WB(a);return f?t(a,u):(f||Zd(),n)}},yX=["value","background"],qj;function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function vX(e,t){if(e==null)return{};var n=_X(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _X(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xv.apply(this,arguments)}function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(n),!0).forEach(function(a){Eh(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hO(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Wj(a.key),a)}}function bX(e,t,n){return t&&hO(e.prototype,t),n&&hO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wX(e,t,n){return t=Kv(t),SX(e,Gj()?Reflect.construct(t,n||[],Kv(e).constructor):t.apply(e,n))}function SX(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PX(e)}function PX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gj=function(){return!!e})()}function Kv(e){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(e)}function TX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qS(e,t)}function qS(e,t){return qS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},qS(e,t)}function Eh(e,t,n){return t=Wj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wj(e){var t=AX(e,"string");return Ep(t)=="symbol"?t:t+""}function AX(e,t){if(Ep(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ep(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var tf=(function(e){function t(){var n;xX(this,t);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return n=wX(this,t,[].concat(u)),Eh(n,"state",{isAnimationFinished:!1}),Eh(n,"id",Wp("recharts-bar-")),Eh(n,"handleAnimationEnd",function(){var p=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),p&&p()}),Eh(n,"handleAnimationStart",function(){var p=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),p&&p()}),n}return TX(t,e),bX(t,[{key:"renderRectanglesStatically",value:function(a){var u=this,f=this.props,p=f.shape,s=f.dataKey,P=f.activeIndex,A=f.activeBar,E=fr(this.props,!1);return a&&a.map(function(M,D){var j=D===P,G=j?A:p,F=Ei(Ei(Ei({},E),M),{},{isActive:j,option:G,index:D,dataKey:s,onAnimationStart:u.handleAnimationStart,onAnimationEnd:u.handleAnimationEnd});return Me.createElement(nn,Xv({className:"recharts-bar-rectangle"},Gd(u.props,M,D),{key:"rectangle-".concat(M?.x,"-").concat(M?.y,"-").concat(M?.value,"-").concat(D)}),Me.createElement(cO,F))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,u=this.props,f=u.data,p=u.layout,s=u.isAnimationActive,P=u.animationBegin,A=u.animationDuration,E=u.animationEasing,M=u.animationId,D=this.state.prevData;return Me.createElement(kc,{begin:P,duration:A,isActive:s,easing:E,from:{t:0},to:{t:1},key:"bar-".concat(M),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var G=j.t,F=f.map(function($,K){var J=D&&D[K];if(J){var ee=Qo(J.x,$.x),oe=Qo(J.y,$.y),Y=Qo(J.width,$.width),re=Qo(J.height,$.height);return Ei(Ei({},$),{},{x:ee(G),y:oe(G),width:Y(G),height:re(G)})}if(p==="horizontal"){var ue=Qo(0,$.height),ge=ue(G);return Ei(Ei({},$),{},{y:$.y+$.height-ge,height:ge})}var Oe=Qo(0,$.width),We=Oe(G);return Ei(Ei({},$),{},{width:We})});return Me.createElement(nn,null,a.renderRectanglesStatically(F))})}},{key:"renderRectangles",value:function(){var a=this.props,u=a.data,f=a.isAnimationActive,p=this.state.prevData;return f&&u&&u.length&&(!p||!Yg(p,u))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(u)}},{key:"renderBackground",value:function(){var a=this,u=this.props,f=u.data,p=u.dataKey,s=u.activeIndex,P=fr(this.props.background,!1);return f.map(function(A,E){A.value;var M=A.background,D=vX(A,yX);if(!M)return null;var j=Ei(Ei(Ei(Ei(Ei({},D),{},{fill:"#eee"},M),P),Gd(a.props,A,E)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:p,index:E,className:"recharts-bar-background-rectangle"});return Me.createElement(cO,Xv({key:"background-bar-".concat(E),option:a.props.background,isActive:E===s},j))})}},{key:"renderErrorBar",value:function(a,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var f=this.props,p=f.data,s=f.xAxis,P=f.yAxis,A=f.layout,E=f.children,M=rs(E,Jg);if(!M)return null;var D=A==="vertical"?p[0].height/2:p[0].width/2,j=function($,K){var J=Array.isArray($.value)?$.value[1]:$.value;return{x:$.x,y:$.y,value:J,errorVal:Wi($,K)}},G={clipPath:a?"url(#clipPath-".concat(u,")"):null};return Me.createElement(nn,G,M.map(function(F){return Me.cloneElement(F,{key:"error-bar-".concat(u,"-").concat(F.props.dataKey),data:p,xAxis:s,yAxis:P,layout:A,offset:D,dataPointFormatter:j})}))}},{key:"render",value:function(){var a=this.props,u=a.hide,f=a.data,p=a.className,s=a.xAxis,P=a.yAxis,A=a.left,E=a.top,M=a.width,D=a.height,j=a.isAnimationActive,G=a.background,F=a.id;if(u||!f||!f.length)return null;var $=this.state.isAnimationFinished,K=Or("recharts-bar",p),J=s&&s.allowDataOverflow,ee=P&&P.allowDataOverflow,oe=J||ee,Y=kr(F)?this.id:F;return Me.createElement(nn,{className:K},J||ee?Me.createElement("defs",null,Me.createElement("clipPath",{id:"clipPath-".concat(Y)},Me.createElement("rect",{x:J?A:A-M/2,y:ee?E:E-D/2,width:J?M:M*2,height:ee?D:D*2}))):null,Me.createElement(nn,{className:"recharts-bar-rectangles",clipPath:oe?"url(#clipPath-".concat(Y,")"):null},G?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(oe,Y),(!j||$)&&Ru.renderCallByParent(this.props,f))}}],[{key:"getDerivedStateFromProps",value:function(a,u){return a.animationId!==u.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:u.curData}:a.data!==u.curData?{curData:a.data}:null}}])})(be.PureComponent);qj=tf;Eh(tf,"displayName","Bar");Eh(tf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Yd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Eh(tf,"getComposedData",function(e){var t=e.props,n=e.item,a=e.barPosition,u=e.bandSize,f=e.xAxis,p=e.yAxis,s=e.xAxisTicks,P=e.yAxisTicks,A=e.stackedData,E=e.dataStartIndex,M=e.displayedData,D=e.offset,j=e9(a,n);if(!j)return null;var G=t.layout,F=n.type.defaultProps,$=F!==void 0?Ei(Ei({},F),n.props):n.props,K=$.dataKey,J=$.children,ee=$.minPointSize,oe=G==="horizontal"?p:f,Y=A?oe.scale.domain():null,re=s9({numericAxis:oe}),ue=rs(J,hg),ge=M.map(function(Oe,We){var Re,Ve,Ye,ot,at,st;A?Re=t9(A[E+We],Y):(Re=Wi(Oe,K),Array.isArray(Re)||(Re=[re,Re]));var lt=gX(ee,qj.defaultProps.minPointSize)(Re[1],We);if(G==="horizontal"){var Ne,tt=[p.scale(Re[0]),p.scale(Re[1])],ut=tt[0],Ce=tt[1];Ve=jk({axis:f,ticks:s,bandSize:u,offset:j.offset,entry:Oe,index:We}),Ye=(Ne=Ce??ut)!==null&&Ne!==void 0?Ne:void 0,ot=j.size;var qe=ut-Ce;if(at=Number.isNaN(qe)?0:qe,st={x:Ve,y:p.y,width:ot,height:p.height},Math.abs(lt)>0&&Math.abs(at)<Math.abs(lt)){var yt=ro(at||lt)*(Math.abs(lt)-Math.abs(at));Ye-=yt,at+=yt}}else{var Rt=[f.scale(Re[0]),f.scale(Re[1])],$t=Rt[0],Wt=Rt[1];if(Ve=$t,Ye=jk({axis:p,ticks:P,bandSize:u,offset:j.offset,entry:Oe,index:We}),ot=Wt-$t,at=j.size,st={x:f.x,y:Ye,width:f.width,height:at},Math.abs(lt)>0&&Math.abs(ot)<Math.abs(lt)){var er=ro(ot||lt)*(Math.abs(lt)-Math.abs(ot));ot+=er}}return Ei(Ei(Ei({},Oe),{},{x:Ve,y:Ye,width:ot,height:at,value:A?Re:Re[1],payload:Oe,background:st},ue&&ue[We]&&ue[We].props),{},{tooltipPayload:[vj(n,Oe)],tooltipPosition:{x:Ve+ot/2,y:Ye+at/2}})});return Ei({data:ge,layout:G},D)});function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function CX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dO(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Hj(a.key),a)}}function EX(e,t,n){return t&&dO(e.prototype,t),n&&dO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(n),!0).forEach(function(a){U_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function U_(e,t,n){return t=Hj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hj(e){var t=MX(e,"string");return Ng(t)=="symbol"?t:t+""}function MX(e,t){if(Ng(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zj=function(t,n,a,u,f){var p=t.width,s=t.height,P=t.layout,A=t.children,E=Object.keys(n),M={left:a.left,leftMirror:a.left,right:p-a.right,rightMirror:p-a.right,top:a.top,topMirror:a.top,bottom:s-a.bottom,bottomMirror:s-a.bottom},D=!!Jo(A,tf);return E.reduce(function(j,G){var F=n[G],$=F.orientation,K=F.domain,J=F.padding,ee=J===void 0?{}:J,oe=F.mirror,Y=F.reversed,re="".concat($).concat(oe?"Mirror":""),ue,ge,Oe,We,Re;if(F.type==="number"&&(F.padding==="gap"||F.padding==="no-gap")){var Ve=K[1]-K[0],Ye=1/0,ot=F.categoricalDomain.sort(XB);if(ot.forEach(function(Rt,$t){$t>0&&(Ye=Math.min((Rt||0)-(ot[$t-1]||0),Ye))}),Number.isFinite(Ye)){var at=Ye/Ve,st=F.layout==="vertical"?a.height:a.width;if(F.padding==="gap"&&(ue=at*st/2),F.padding==="no-gap"){var lt=no(t.barCategoryGap,at*st),Ne=at*st/2;ue=Ne-lt-(Ne-lt)/st*lt}}}u==="xAxis"?ge=[a.left+(ee.left||0)+(ue||0),a.left+a.width-(ee.right||0)-(ue||0)]:u==="yAxis"?ge=P==="horizontal"?[a.top+a.height-(ee.bottom||0),a.top+(ee.top||0)]:[a.top+(ee.top||0)+(ue||0),a.top+a.height-(ee.bottom||0)-(ue||0)]:ge=F.range,Y&&(ge=[ge[1],ge[0]]);var tt=pj(F,f,D),ut=tt.scale,Ce=tt.realScaleType;ut.domain(K).range(ge),mj(ut);var qe=gj(ut,El(El({},F),{},{realScaleType:Ce}));u==="xAxis"?(Re=$==="top"&&!oe||$==="bottom"&&oe,Oe=a.left,We=M[re]-Re*F.height):u==="yAxis"&&(Re=$==="left"&&!oe||$==="right"&&oe,Oe=M[re]-Re*F.width,We=a.top);var yt=El(El(El({},F),qe),{},{realScaleType:Ce,x:Oe,y:We,scale:ut,width:u==="xAxis"?a.width:F.width,height:u==="yAxis"?a.height:F.height});return yt.bandSize=Rv(yt,qe),!F.hide&&u==="xAxis"?M[re]+=(Re?-1:1)*yt.height:F.hide||(M[re]+=(Re?-1:1)*yt.width),El(El({},j),{},U_({},G,yt))},{})},Xj=function(t,n){var a=t.x,u=t.y,f=n.x,p=n.y;return{x:Math.min(a,f),y:Math.min(u,p),width:Math.abs(f-a),height:Math.abs(p-u)}},kX=function(t){var n=t.x1,a=t.y1,u=t.x2,f=t.y2;return Xj({x:n,y:a},{x:u,y:f})},Kj=(function(){function e(t){CX(this,e),this.scale=t}return EX(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.bandAware,f=a.position;if(n!==void 0){if(f)switch(f){case"start":return this.scale(n);case"middle":{var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+p}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(u){var P=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+P}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),u=a[0],f=a[a.length-1];return u<=f?n>=u&&n<=f:n>=f&&n<=u}}],[{key:"create",value:function(n){return new e(n)}}])})();U_(Kj,"EPS",1e-4);var gP=function(t){var n=Object.keys(t).reduce(function(a,u){return El(El({},a),{},U_({},u,Kj.create(t[u])))},{});return El(El({},n),{},{apply:function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=f.bandAware,s=f.position;return iX(u,function(P,A){return n[A].apply(P,{bandAware:p,position:s})})},isInRange:function(u){return Vj(u,function(f,p){return n[p].isInRange(f)})}})};function IX(e){return(e%180+180)%180}var OX=function(t){var n=t.width,a=t.height,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=IX(u),p=f*Math.PI/180,s=Math.atan(a/n),P=p>s&&p<Math.PI-s?a/Math.sin(p):n/Math.cos(p);return Math.abs(P)},Tw,pO;function RX(){if(pO)return Tw;pO=1;var e=Oc(),t=Wg(),n=b_();function a(u){return function(f,p,s){var P=Object(f);if(!t(f)){var A=e(p,3);f=n(f),p=function(M){return A(P[M],M,P)}}var E=u(f,p,s);return E>-1?P[A?f[E]:E]:void 0}}return Tw=a,Tw}var Aw,mO;function DX(){if(mO)return Aw;mO=1;var e=Bj();function t(n){var a=e(n),u=a%1;return a===a?u?a-u:a:0}return Aw=t,Aw}var Cw,gO;function zX(){if(gO)return Cw;gO=1;var e=KD(),t=Oc(),n=DX(),a=Math.max;function u(f,p,s){var P=f==null?0:f.length;if(!P)return-1;var A=s==null?0:n(s);return A<0&&(A=a(P+A,0)),e(f,t(p,3),A)}return Cw=u,Cw}var Ew,yO;function jX(){if(yO)return Ew;yO=1;var e=RX(),t=zX(),n=e(t);return Ew=n,Ew}var LX=jX();const NX=ln(LX);var BX=dD();const FX=ln(BX);var $X=FX(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),yP=be.createContext(void 0),vP=be.createContext(void 0),Yj=be.createContext(void 0),Jj=be.createContext({}),Qj=be.createContext(void 0),e3=be.createContext(0),t3=be.createContext(0),vO=function(t){var n=t.state,a=n.xAxisMap,u=n.yAxisMap,f=n.offset,p=t.clipPathId,s=t.children,P=t.width,A=t.height,E=$X(f);return Me.createElement(yP.Provider,{value:a},Me.createElement(vP.Provider,{value:u},Me.createElement(Jj.Provider,{value:f},Me.createElement(Yj.Provider,{value:E},Me.createElement(Qj.Provider,{value:p},Me.createElement(e3.Provider,{value:A},Me.createElement(t3.Provider,{value:P},s)))))))},UX=function(){return be.useContext(Qj)},r3=function(t){var n=be.useContext(yP);n==null&&Zd();var a=n[t];return a==null&&Zd(),a},VX=function(){var t=be.useContext(yP);return Ch(t)},qX=function(){var t=be.useContext(vP),n=NX(t,function(a){return Vj(a.domain,Number.isFinite)});return n||Ch(t)},n3=function(t){var n=be.useContext(vP);n==null&&Zd();var a=n[t];return a==null&&Zd(),a},GX=function(){var t=be.useContext(Yj);return t},WX=function(){return be.useContext(Jj)},_P=function(){return be.useContext(t3)},xP=function(){return be.useContext(e3)};function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function HX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZX(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a3(a.key),a)}}function XX(e,t,n){return t&&ZX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KX(e,t,n){return t=Yv(t),YX(e,i3()?Reflect.construct(t,n||[],Yv(e).constructor):t.apply(e,n))}function YX(e,t){if(t&&(Mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JX(e)}function JX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i3=function(){return!!e})()}function Yv(e){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yv(e)}function QX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GS(e,t)}function GS(e,t){return GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},GS(e,t)}function _O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function xO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(n),!0).forEach(function(a){bP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bP(e,t,n){return t=a3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a3(e){var t=eK(e,"string");return Mp(t)=="symbol"?t:t+""}function eK(e,t){if(Mp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Mp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function tK(e,t){return aK(e)||iK(e,t)||nK(e,t)||rK()}function rK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nK(e,t){if(e){if(typeof e=="string")return bO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bO(e,t)}}function bO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function iK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function aK(e){if(Array.isArray(e))return e}function WS(){return WS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},WS.apply(this,arguments)}var oK=function(t,n){var a;return Me.isValidElement(t)?a=Me.cloneElement(t,n):xr(t)?a=t(n):a=Me.createElement("line",WS({},n,{className:"recharts-reference-line-line"})),a},sK=function(t,n,a,u,f,p,s,P,A){var E=f.x,M=f.y,D=f.width,j=f.height;if(a){var G=A.y,F=t.y.apply(G,{position:p});if(Ec(A,"discard")&&!t.y.isInRange(F))return null;var $=[{x:E+D,y:F},{x:E,y:F}];return P==="left"?$.reverse():$}if(n){var K=A.x,J=t.x.apply(K,{position:p});if(Ec(A,"discard")&&!t.x.isInRange(J))return null;var ee=[{x:J,y:M+j},{x:J,y:M}];return s==="top"?ee.reverse():ee}if(u){var oe=A.segment,Y=oe.map(function(re){return t.apply(re,{position:p})});return Ec(A,"discard")&&eX(Y,function(re){return!t.isInRange(re)})?null:Y}return null};function lK(e){var t=e.x,n=e.y,a=e.segment,u=e.xAxisId,f=e.yAxisId,p=e.shape,s=e.className,P=e.alwaysShow,A=UX(),E=r3(u),M=n3(f),D=GX();if(!A||!D)return null;Oh(P===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var j=gP({x:E.scale,y:M.scale}),G=Hi(t),F=Hi(n),$=a&&a.length===2,K=sK(j,G,F,$,D,e.position,E.orientation,M.orientation,e);if(!K)return null;var J=tK(K,2),ee=J[0],oe=ee.x,Y=ee.y,re=J[1],ue=re.x,ge=re.y,Oe=Ec(e,"hidden")?"url(#".concat(A,")"):void 0,We=xO(xO({clipPath:Oe},fr(e,!0)),{},{x1:oe,y1:Y,x2:ue,y2:ge});return Me.createElement(nn,{className:Or("recharts-reference-line",s)},oK(p,We),ia.renderCallByParent(e,kX({x1:oe,y1:Y,x2:ue,y2:ge})))}var wP=(function(e){function t(){return HX(this,t),KX(this,t,arguments)}return QX(t,e),XX(t,[{key:"render",value:function(){return Me.createElement(lK,this.props)}}])})(Me.Component);bP(wP,"displayName","ReferenceLine");bP(wP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function HS(){return HS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},HS.apply(this,arguments)}function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function wO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function SO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(n),!0).forEach(function(a){V_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uK(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s3(a.key),a)}}function hK(e,t,n){return t&&uK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dK(e,t,n){return t=Jv(t),fK(e,o3()?Reflect.construct(t,n||[],Jv(e).constructor):t.apply(e,n))}function fK(e,t){if(t&&(kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pK(e)}function pK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o3=function(){return!!e})()}function Jv(e){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jv(e)}function mK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZS(e,t)}function ZS(e,t){return ZS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},ZS(e,t)}function V_(e,t,n){return t=s3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s3(e){var t=gK(e,"string");return kp(t)=="symbol"?t:t+""}function gK(e,t){if(kp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(kp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yK=function(t){var n=t.x,a=t.y,u=t.xAxis,f=t.yAxis,p=gP({x:u.scale,y:f.scale}),s=p.apply({x:n,y:a},{bandAware:!0});return Ec(t,"discard")&&!p.isInRange(s)?null:s},q_=(function(e){function t(){return cK(this,t),dK(this,t,arguments)}return mK(t,e),hK(t,[{key:"render",value:function(){var a=this.props,u=a.x,f=a.y,p=a.r,s=a.alwaysShow,P=a.clipPathId,A=Hi(u),E=Hi(f);if(Oh(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!A||!E)return null;var M=yK(this.props);if(!M)return null;var D=M.x,j=M.y,G=this.props,F=G.shape,$=G.className,K=Ec(this.props,"hidden")?"url(#".concat(P,")"):void 0,J=SO(SO({clipPath:K},fr(this.props,!0)),{},{cx:D,cy:j});return Me.createElement(nn,{className:Or("recharts-reference-dot",$)},t.renderDot(F,J),ia.renderCallByParent(this.props,{x:D-p,y:j-p,width:2*p,height:2*p}))}}])})(Me.Component);V_(q_,"displayName","ReferenceDot");V_(q_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});V_(q_,"renderDot",function(e,t){var n;return Me.isValidElement(e)?n=Me.cloneElement(e,t):xr(e)?n=e(t):n=Me.createElement(z_,HS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function XS(){return XS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},XS.apply(this,arguments)}function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function PO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function TO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(n),!0).forEach(function(a){G_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _K(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c3(a.key),a)}}function xK(e,t,n){return t&&_K(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bK(e,t,n){return t=Qv(t),wK(e,l3()?Reflect.construct(t,n||[],Qv(e).constructor):t.apply(e,n))}function wK(e,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SK(e)}function SK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l3=function(){return!!e})()}function Qv(e){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qv(e)}function PK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KS(e,t)}function KS(e,t){return KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},KS(e,t)}function G_(e,t,n){return t=c3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c3(e){var t=TK(e,"string");return Ip(t)=="symbol"?t:t+""}function TK(e,t){if(Ip(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ip(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var AK=function(t,n,a,u,f){var p=f.x1,s=f.x2,P=f.y1,A=f.y2,E=f.xAxis,M=f.yAxis;if(!E||!M)return null;var D=gP({x:E.scale,y:M.scale}),j={x:t?D.x.apply(p,{position:"start"}):D.x.rangeMin,y:a?D.y.apply(P,{position:"start"}):D.y.rangeMin},G={x:n?D.x.apply(s,{position:"end"}):D.x.rangeMax,y:u?D.y.apply(A,{position:"end"}):D.y.rangeMax};return Ec(f,"discard")&&(!D.isInRange(j)||!D.isInRange(G))?null:Xj(j,G)},W_=(function(e){function t(){return vK(this,t),bK(this,t,arguments)}return PK(t,e),xK(t,[{key:"render",value:function(){var a=this.props,u=a.x1,f=a.x2,p=a.y1,s=a.y2,P=a.className,A=a.alwaysShow,E=a.clipPathId;Oh(A===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var M=Hi(u),D=Hi(f),j=Hi(p),G=Hi(s),F=this.props.shape;if(!M&&!D&&!j&&!G&&!F)return null;var $=AK(M,D,j,G,this.props);if(!$&&!F)return null;var K=Ec(this.props,"hidden")?"url(#".concat(E,")"):void 0;return Me.createElement(nn,{className:Or("recharts-reference-area",P)},t.renderRect(F,TO(TO({clipPath:K},fr(this.props,!0)),$)),ia.renderCallByParent(this.props,$))}}])})(Me.Component);G_(W_,"displayName","ReferenceArea");G_(W_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});G_(W_,"renderRect",function(e,t){var n;return Me.isValidElement(e)?n=Me.cloneElement(e,t):xr(e)?n=e(t):n=Me.createElement(mP,XS({},t,{className:"recharts-reference-area-rect"})),n});function u3(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var a=[],u=0;u<e.length;u+=t)a.push(e[u]);return a}function CK(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return OX(a,n)}function EK(e,t,n){var a=n==="width",u=e.x,f=e.y,p=e.width,s=e.height;return t===1?{start:a?u:f,end:a?u+p:f+s}:{start:a?u+p:f+s,end:a?u:f}}function e_(e,t,n,a,u){if(e*t<e*a||e*t>e*u)return!1;var f=n();return e*(t-e*f/2-a)>=0&&e*(t+e*f/2-u)<=0}function MK(e,t){return u3(e,t+1)}function kK(e,t,n,a,u){for(var f=(a||[]).slice(),p=t.start,s=t.end,P=0,A=1,E=p,M=function(){var G=a?.[P];if(G===void 0)return{v:u3(a,A)};var F=P,$,K=function(){return $===void 0&&($=n(G,F)),$},J=G.coordinate,ee=P===0||e_(e,J,K,E,s);ee||(P=0,E=p,A+=1),ee&&(E=J+e*(K()/2+u),P+=A)},D;A<=f.length;)if(D=M(),D)return D.v;return[]}function Bg(e){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bg(e)}function AO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(n),!0).forEach(function(a){IK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function IK(e,t,n){return t=OK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OK(e){var t=RK(e,"string");return Bg(t)=="symbol"?t:t+""}function RK(e,t){if(Bg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Bg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DK(e,t,n,a,u){for(var f=(a||[]).slice(),p=f.length,s=t.start,P=t.end,A=function(D){var j=f[D],G,F=function(){return G===void 0&&(G=n(j,D)),G};if(D===p-1){var $=e*(j.coordinate+e*F()/2-P);f[D]=j=Na(Na({},j),{},{tickCoord:$>0?j.coordinate-$*e:j.coordinate})}else f[D]=j=Na(Na({},j),{},{tickCoord:j.coordinate});var K=e_(e,j.tickCoord,F,s,P);K&&(P=j.tickCoord-e*(F()/2+u),f[D]=Na(Na({},j),{},{isShow:!0}))},E=p-1;E>=0;E--)A(E);return f}function zK(e,t,n,a,u,f){var p=(a||[]).slice(),s=p.length,P=t.start,A=t.end;if(f){var E=a[s-1],M=n(E,s-1),D=e*(E.coordinate+e*M/2-A);p[s-1]=E=Na(Na({},E),{},{tickCoord:D>0?E.coordinate-D*e:E.coordinate});var j=e_(e,E.tickCoord,function(){return M},P,A);j&&(A=E.tickCoord-e*(M/2+u),p[s-1]=Na(Na({},E),{},{isShow:!0}))}for(var G=f?s-1:s,F=function(J){var ee=p[J],oe,Y=function(){return oe===void 0&&(oe=n(ee,J)),oe};if(J===0){var re=e*(ee.coordinate-e*Y()/2-P);p[J]=ee=Na(Na({},ee),{},{tickCoord:re<0?ee.coordinate-re*e:ee.coordinate})}else p[J]=ee=Na(Na({},ee),{},{tickCoord:ee.coordinate});var ue=e_(e,ee.tickCoord,Y,P,A);ue&&(P=ee.tickCoord+e*(Y()/2+u),p[J]=Na(Na({},ee),{},{isShow:!0}))},$=0;$<G;$++)F($);return p}function SP(e,t,n){var a=e.tick,u=e.ticks,f=e.viewBox,p=e.minTickGap,s=e.orientation,P=e.interval,A=e.tickFormatter,E=e.unit,M=e.angle;if(!u||!u.length||!a)return[];if(Dt(P)||Yd.isSsr)return MK(u,typeof P=="number"&&Dt(P)?P:0);var D=[],j=s==="top"||s==="bottom"?"width":"height",G=E&&j==="width"?Ym(E,{fontSize:t,letterSpacing:n}):{width:0,height:0},F=function(ee,oe){var Y=xr(A)?A(ee.value,oe):ee.value;return j==="width"?CK(Ym(Y,{fontSize:t,letterSpacing:n}),G,M):Ym(Y,{fontSize:t,letterSpacing:n})[j]},$=u.length>=2?ro(u[1].coordinate-u[0].coordinate):1,K=EK(f,$,j);return P==="equidistantPreserveStart"?kK($,K,F,u,p):(P==="preserveStart"||P==="preserveStartEnd"?D=zK($,K,F,u,p,P==="preserveStartEnd"):D=DK($,K,F,u,p),D.filter(function(J){return J.isShow}))}var jK=["viewBox"],LK=["viewBox"],NK=["ticks"];function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},op.apply(this,arguments)}function CO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function qi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CO(Object(n),!0).forEach(function(a){PP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Mw(e,t){if(e==null)return{};var n=BK(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function BK(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function FK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EO(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,d3(a.key),a)}}function $K(e,t,n){return t&&EO(e.prototype,t),n&&EO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UK(e,t,n){return t=t_(t),VK(e,h3()?Reflect.construct(t,n||[],t_(e).constructor):t.apply(e,n))}function VK(e,t){if(t&&(Op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qK(e)}function qK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h3=function(){return!!e})()}function t_(e){return t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t_(e)}function GK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YS(e,t)}function YS(e,t){return YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},YS(e,t)}function PP(e,t,n){return t=d3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d3(e){var t=WK(e,"string");return Op(t)=="symbol"?t:t+""}function WK(e,t){if(Op(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Op(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Yp=(function(e){function t(n){var a;return FK(this,t),a=UK(this,t,[n]),a.state={fontSize:"",letterSpacing:""},a}return GK(t,e),$K(t,[{key:"shouldComponentUpdate",value:function(a,u){var f=a.viewBox,p=Mw(a,jK),s=this.props,P=s.viewBox,A=Mw(s,LK);return!cp(f,P)||!cp(p,A)||!cp(u,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var u=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];u&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var u=this.props,f=u.x,p=u.y,s=u.width,P=u.height,A=u.orientation,E=u.tickSize,M=u.mirror,D=u.tickMargin,j,G,F,$,K,J,ee=M?-1:1,oe=a.tickSize||E,Y=Dt(a.tickCoord)?a.tickCoord:a.coordinate;switch(A){case"top":j=G=a.coordinate,$=p+ +!M*P,F=$-ee*oe,J=F-ee*D,K=Y;break;case"left":F=$=a.coordinate,G=f+ +!M*s,j=G-ee*oe,K=j-ee*D,J=Y;break;case"right":F=$=a.coordinate,G=f+ +M*s,j=G+ee*oe,K=j+ee*D,J=Y;break;default:j=G=a.coordinate,$=p+ +M*P,F=$+ee*oe,J=F+ee*D,K=Y;break}return{line:{x1:j,y1:F,x2:G,y2:$},tick:{x:K,y:J}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,u=a.orientation,f=a.mirror,p;switch(u){case"left":p=f?"start":"end";break;case"right":p=f?"end":"start";break;default:p="middle";break}return p}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,u=a.orientation,f=a.mirror,p="end";switch(u){case"left":case"right":p="middle";break;case"top":p=f?"start":"end";break;default:p=f?"end":"start";break}return p}},{key:"renderAxisLine",value:function(){var a=this.props,u=a.x,f=a.y,p=a.width,s=a.height,P=a.orientation,A=a.mirror,E=a.axisLine,M=qi(qi(qi({},fr(this.props,!1)),fr(E,!1)),{},{fill:"none"});if(P==="top"||P==="bottom"){var D=+(P==="top"&&!A||P==="bottom"&&A);M=qi(qi({},M),{},{x1:u,y1:f+D*s,x2:u+p,y2:f+D*s})}else{var j=+(P==="left"&&!A||P==="right"&&A);M=qi(qi({},M),{},{x1:u+j*p,y1:f,x2:u+j*p,y2:f+s})}return Me.createElement("line",op({},M,{className:Or("recharts-cartesian-axis-line",ts(E,"className"))}))}},{key:"renderTicks",value:function(a,u,f){var p=this,s=this.props,P=s.tickLine,A=s.stroke,E=s.tick,M=s.tickFormatter,D=s.unit,j=SP(qi(qi({},this.props),{},{ticks:a}),u,f),G=this.getTickTextAnchor(),F=this.getTickVerticalAnchor(),$=fr(this.props,!1),K=fr(E,!1),J=qi(qi({},$),{},{fill:"none"},fr(P,!1)),ee=j.map(function(oe,Y){var re=p.getTickLineCoord(oe),ue=re.line,ge=re.tick,Oe=qi(qi(qi(qi({textAnchor:G,verticalAnchor:F},$),{},{stroke:"none",fill:A},K),ge),{},{index:Y,payload:oe,visibleTicksCount:j.length,tickFormatter:M});return Me.createElement(nn,op({className:"recharts-cartesian-axis-tick",key:"tick-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},Gd(p.props,oe,Y)),P&&Me.createElement("line",op({},J,ue,{className:Or("recharts-cartesian-axis-tick-line",ts(P,"className"))})),E&&t.renderTickItem(E,Oe,"".concat(xr(M)?M(oe.value,Y):oe.value).concat(D||"")))});return Me.createElement("g",{className:"recharts-cartesian-axis-ticks"},ee)}},{key:"render",value:function(){var a=this,u=this.props,f=u.axisLine,p=u.width,s=u.height,P=u.ticksGenerator,A=u.className,E=u.hide;if(E)return null;var M=this.props,D=M.ticks,j=Mw(M,NK),G=D;return xr(P)&&(G=D&&D.length>0?P(this.props):P(j)),p<=0||s<=0||!G||!G.length?null:Me.createElement(nn,{className:Or("recharts-cartesian-axis",A),ref:function($){a.layerReference=$}},f&&this.renderAxisLine(),this.renderTicks(G,this.state.fontSize,this.state.letterSpacing),ia.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,u,f){var p,s=Or(u.className,"recharts-cartesian-axis-tick-value");return Me.isValidElement(a)?p=Me.cloneElement(a,qi(qi({},u),{},{className:s})):xr(a)?p=a(qi(qi({},u),{},{className:s})):p=Me.createElement(Wd,op({},u,{className:"recharts-cartesian-axis-tick-value"}),f),p}}])})(be.Component);PP(Yp,"displayName","CartesianAxis");PP(Yp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var HK=["x1","y1","x2","y2","key"],ZK=["offset"];function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(n),!0).forEach(function(a){XK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XK(e,t,n){return t=KK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KK(e){var t=YK(e,"string");return Xd(t)=="symbol"?t:t+""}function YK(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Xd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bd.apply(this,arguments)}function kO(e,t){if(e==null)return{};var n=JK(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function JK(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var QK=function(t){var n=t.fill;if(!n||n==="none")return null;var a=t.fillOpacity,u=t.x,f=t.y,p=t.width,s=t.height,P=t.ry;return Me.createElement("rect",{x:u,y:f,ry:P,width:p,height:s,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function f3(e,t){var n;if(Me.isValidElement(e))n=Me.cloneElement(e,t);else if(xr(e))n=e(t);else{var a=t.x1,u=t.y1,f=t.x2,p=t.y2,s=t.key,P=kO(t,HK),A=fr(P,!1);A.offset;var E=kO(A,ZK);n=Me.createElement("line",Bd({},E,{x1:a,y1:u,x2:f,y2:p,fill:"none",key:s}))}return n}function eY(e){var t=e.x,n=e.width,a=e.horizontal,u=a===void 0?!0:a,f=e.horizontalPoints;if(!u||!f||!f.length)return null;var p=f.map(function(s,P){var A=Ba(Ba({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(P),index:P});return f3(u,A)});return Me.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function tY(e){var t=e.y,n=e.height,a=e.vertical,u=a===void 0?!0:a,f=e.verticalPoints;if(!u||!f||!f.length)return null;var p=f.map(function(s,P){var A=Ba(Ba({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(P),index:P});return f3(u,A)});return Me.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function rY(e){var t=e.horizontalFill,n=e.fillOpacity,a=e.x,u=e.y,f=e.width,p=e.height,s=e.horizontalPoints,P=e.horizontal,A=P===void 0?!0:P;if(!A||!t||!t.length)return null;var E=s.map(function(D){return Math.round(D+u-u)}).sort(function(D,j){return D-j});u!==E[0]&&E.unshift(0);var M=E.map(function(D,j){var G=!E[j+1],F=G?u+p-D:E[j+1]-D;if(F<=0)return null;var $=j%t.length;return Me.createElement("rect",{key:"react-".concat(j),y:D,x:a,height:F,width:f,stroke:"none",fill:t[$],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Me.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},M)}function nY(e){var t=e.vertical,n=t===void 0?!0:t,a=e.verticalFill,u=e.fillOpacity,f=e.x,p=e.y,s=e.width,P=e.height,A=e.verticalPoints;if(!n||!a||!a.length)return null;var E=A.map(function(D){return Math.round(D+f-f)}).sort(function(D,j){return D-j});f!==E[0]&&E.unshift(0);var M=E.map(function(D,j){var G=!E[j+1],F=G?f+s-D:E[j+1]-D;if(F<=0)return null;var $=j%a.length;return Me.createElement("rect",{key:"react-".concat(j),x:D,y:p,width:F,height:P,stroke:"none",fill:a[$],fillOpacity:u,className:"recharts-cartesian-grid-bg"})});return Me.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},M)}var iY=function(t,n){var a=t.xAxis,u=t.width,f=t.height,p=t.offset;return fj(SP(Ba(Ba(Ba({},Yp.defaultProps),a),{},{ticks:Iu(a,!0),viewBox:{x:0,y:0,width:u,height:f}})),p.left,p.left+p.width,n)},aY=function(t,n){var a=t.yAxis,u=t.width,f=t.height,p=t.offset;return fj(SP(Ba(Ba(Ba({},Yp.defaultProps),a),{},{ticks:Iu(a,!0),viewBox:{x:0,y:0,width:u,height:f}})),p.top,p.top+p.height,n)},Qf={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function JS(e){var t,n,a,u,f,p,s=_P(),P=xP(),A=WX(),E=Ba(Ba({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Qf.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Qf.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Qf.horizontal,horizontalFill:(u=e.horizontalFill)!==null&&u!==void 0?u:Qf.horizontalFill,vertical:(f=e.vertical)!==null&&f!==void 0?f:Qf.vertical,verticalFill:(p=e.verticalFill)!==null&&p!==void 0?p:Qf.verticalFill,x:Dt(e.x)?e.x:A.left,y:Dt(e.y)?e.y:A.top,width:Dt(e.width)?e.width:A.width,height:Dt(e.height)?e.height:A.height}),M=E.x,D=E.y,j=E.width,G=E.height,F=E.syncWithTicks,$=E.horizontalValues,K=E.verticalValues,J=VX(),ee=qX();if(!Dt(j)||j<=0||!Dt(G)||G<=0||!Dt(M)||M!==+M||!Dt(D)||D!==+D)return null;var oe=E.verticalCoordinatesGenerator||iY,Y=E.horizontalCoordinatesGenerator||aY,re=E.horizontalPoints,ue=E.verticalPoints;if((!re||!re.length)&&xr(Y)){var ge=$&&$.length,Oe=Y({yAxis:ee?Ba(Ba({},ee),{},{ticks:ge?$:ee.ticks}):void 0,width:s,height:P,offset:A},ge?!0:F);Oh(Array.isArray(Oe),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Xd(Oe),"]")),Array.isArray(Oe)&&(re=Oe)}if((!ue||!ue.length)&&xr(oe)){var We=K&&K.length,Re=oe({xAxis:J?Ba(Ba({},J),{},{ticks:We?K:J.ticks}):void 0,width:s,height:P,offset:A},We?!0:F);Oh(Array.isArray(Re),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Xd(Re),"]")),Array.isArray(Re)&&(ue=Re)}return Me.createElement("g",{className:"recharts-cartesian-grid"},Me.createElement(QK,{fill:E.fill,fillOpacity:E.fillOpacity,x:E.x,y:E.y,width:E.width,height:E.height,ry:E.ry}),Me.createElement(eY,Bd({},E,{offset:A,horizontalPoints:re,xAxis:J,yAxis:ee})),Me.createElement(tY,Bd({},E,{offset:A,verticalPoints:ue,xAxis:J,yAxis:ee})),Me.createElement(rY,Bd({},E,{horizontalPoints:re})),Me.createElement(nY,Bd({},E,{verticalPoints:ue})))}JS.displayName="CartesianGrid";var oY=["type","layout","connectNulls","ref"],sY=["key"];function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function IO(e,t){if(e==null)return{};var n=lY(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function lY(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function ng(){return ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ng.apply(this,arguments)}function OO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(n),!0).forEach(function(a){Ml(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ep(e){return dY(e)||hY(e)||uY(e)||cY()}function cY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uY(e,t){if(e){if(typeof e=="string")return QS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QS(e,t)}}function hY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dY(e){if(Array.isArray(e))return QS(e)}function QS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function fY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RO(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,m3(a.key),a)}}function pY(e,t,n){return t&&RO(e.prototype,t),n&&RO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mY(e,t,n){return t=r_(t),gY(e,p3()?Reflect.construct(t,n||[],r_(e).constructor):t.apply(e,n))}function gY(e,t){if(t&&(Rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yY(e)}function yY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p3=function(){return!!e})()}function r_(e){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r_(e)}function vY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e2(e,t)}function e2(e,t){return e2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},e2(e,t)}function Ml(e,t,n){return t=m3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m3(e){var t=_Y(e,"string");return Rp(t)=="symbol"?t:t+""}function _Y(e,t){if(Rp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Rp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qg=(function(e){function t(){var n;fY(this,t);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return n=mY(this,t,[].concat(u)),Ml(n,"state",{isAnimationFinished:!0,totalLength:0}),Ml(n,"generateSimpleStrokeDasharray",function(p,s){return"".concat(s,"px ").concat(p-s,"px")}),Ml(n,"getStrokeDasharray",function(p,s,P){var A=P.reduce(function(K,J){return K+J});if(!A)return n.generateSimpleStrokeDasharray(s,p);for(var E=Math.floor(p/A),M=p%A,D=s-p,j=[],G=0,F=0;G<P.length;F+=P[G],++G)if(F+P[G]>M){j=[].concat(ep(P.slice(0,G)),[M-F]);break}var $=j.length%2===0?[0,D]:[D];return[].concat(ep(t.repeat(P,E)),ep(j),$).map(function(K){return"".concat(K,"px")}).join(", ")}),Ml(n,"id",Wp("recharts-line-")),Ml(n,"pathRef",function(p){n.mainCurve=p}),Ml(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ml(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return vY(t,e),pY(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var f=this.props,p=f.points,s=f.xAxis,P=f.yAxis,A=f.layout,E=f.children,M=rs(E,Jg);if(!M)return null;var D=function(F,$){return{x:F.x,y:F.y,value:F.value,errorVal:Wi(F.payload,$)}},j={clipPath:a?"url(#clipPath-".concat(u,")"):null};return Me.createElement(nn,j,M.map(function(G){return Me.cloneElement(G,{key:"bar-".concat(G.props.dataKey),data:p,xAxis:s,yAxis:P,layout:A,dataPointFormatter:D})}))}},{key:"renderDots",value:function(a,u,f){var p=this.props.isAnimationActive;if(p&&!this.state.isAnimationFinished)return null;var s=this.props,P=s.dot,A=s.points,E=s.dataKey,M=fr(this.props,!1),D=fr(P,!0),j=A.map(function(F,$){var K=Ko(Ko(Ko({key:"dot-".concat($),r:3},M),D),{},{index:$,cx:F.x,cy:F.y,value:F.value,dataKey:E,payload:F.payload,points:A});return t.renderDotItem(P,K)}),G={clipPath:a?"url(#clipPath-".concat(u?"":"dots-").concat(f,")"):null};return Me.createElement(nn,ng({className:"recharts-line-dots",key:"dots"},G),j)}},{key:"renderCurveStatically",value:function(a,u,f,p){var s=this.props,P=s.type,A=s.layout,E=s.connectNulls;s.ref;var M=IO(s,oY),D=Ko(Ko(Ko({},fr(M,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(f,")"):null,points:a},p),{},{type:P,layout:A,connectNulls:E});return Me.createElement(jv,ng({},D,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,u){var f=this,p=this.props,s=p.points,P=p.strokeDasharray,A=p.isAnimationActive,E=p.animationBegin,M=p.animationDuration,D=p.animationEasing,j=p.animationId,G=p.animateNewValues,F=p.width,$=p.height,K=this.state,J=K.prevPoints,ee=K.totalLength;return Me.createElement(kc,{begin:E,duration:M,isActive:A,easing:D,from:{t:0},to:{t:1},key:"line-".concat(j),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(oe){var Y=oe.t;if(J){var re=J.length/s.length,ue=s.map(function(Ve,Ye){var ot=Math.floor(Ye*re);if(J[ot]){var at=J[ot],st=Qo(at.x,Ve.x),lt=Qo(at.y,Ve.y);return Ko(Ko({},Ve),{},{x:st(Y),y:lt(Y)})}if(G){var Ne=Qo(F*2,Ve.x),tt=Qo($/2,Ve.y);return Ko(Ko({},Ve),{},{x:Ne(Y),y:tt(Y)})}return Ko(Ko({},Ve),{},{x:Ve.x,y:Ve.y})});return f.renderCurveStatically(ue,a,u)}var ge=Qo(0,ee),Oe=ge(Y),We;if(P){var Re="".concat(P).split(/[,\s]+/gim).map(function(Ve){return parseFloat(Ve)});We=f.getStrokeDasharray(Oe,ee,Re)}else We=f.generateSimpleStrokeDasharray(ee,Oe);return f.renderCurveStatically(s,a,u,{strokeDasharray:We})})}},{key:"renderCurve",value:function(a,u){var f=this.props,p=f.points,s=f.isAnimationActive,P=this.state,A=P.prevPoints,E=P.totalLength;return s&&p&&p.length&&(!A&&E>0||!Yg(A,p))?this.renderCurveWithAnimation(a,u):this.renderCurveStatically(p,a,u)}},{key:"render",value:function(){var a,u=this.props,f=u.hide,p=u.dot,s=u.points,P=u.className,A=u.xAxis,E=u.yAxis,M=u.top,D=u.left,j=u.width,G=u.height,F=u.isAnimationActive,$=u.id;if(f||!s||!s.length)return null;var K=this.state.isAnimationFinished,J=s.length===1,ee=Or("recharts-line",P),oe=A&&A.allowDataOverflow,Y=E&&E.allowDataOverflow,re=oe||Y,ue=kr($)?this.id:$,ge=(a=fr(p,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},Oe=ge.r,We=Oe===void 0?3:Oe,Re=ge.strokeWidth,Ve=Re===void 0?2:Re,Ye=iF(p)?p:{},ot=Ye.clipDot,at=ot===void 0?!0:ot,st=We*2+Ve;return Me.createElement(nn,{className:ee},oe||Y?Me.createElement("defs",null,Me.createElement("clipPath",{id:"clipPath-".concat(ue)},Me.createElement("rect",{x:oe?D:D-j/2,y:Y?M:M-G/2,width:oe?j:j*2,height:Y?G:G*2})),!at&&Me.createElement("clipPath",{id:"clipPath-dots-".concat(ue)},Me.createElement("rect",{x:D-st/2,y:M-st/2,width:j+st,height:G+st}))):null,!J&&this.renderCurve(re,ue),this.renderErrorBar(re,ue),(J||p)&&this.renderDots(re,at,ue),(!F||K)&&Ru.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,u){return a.animationId!==u.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:u.curPoints}:a.points!==u.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,u){for(var f=a.length%2!==0?[].concat(ep(a),[0]):a,p=[],s=0;s<u;++s)p=[].concat(ep(p),ep(f));return p}},{key:"renderDotItem",value:function(a,u){var f;if(Me.isValidElement(a))f=Me.cloneElement(a,u);else if(xr(a))f=a(u);else{var p=u.key,s=IO(u,sY),P=Or("recharts-line-dot",typeof a!="boolean"?a.className:"");f=Me.createElement(z_,ng({key:p},s,{className:P}))}return f}}])})(be.PureComponent);Ml(Qg,"displayName","Line");Ml(Qg,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Yd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ml(Qg,"getComposedData",function(e){var t=e.props,n=e.xAxis,a=e.yAxis,u=e.xAxisTicks,f=e.yAxisTicks,p=e.dataKey,s=e.bandSize,P=e.displayedData,A=e.offset,E=t.layout,M=P.map(function(D,j){var G=Wi(D,p);return E==="horizontal"?{x:zk({axis:n,ticks:u,bandSize:s,entry:D,index:j}),y:kr(G)?null:a.scale(G),value:G,payload:D}:{x:kr(G)?null:n.scale(G),y:zk({axis:a,ticks:f,bandSize:s,entry:D,index:j}),value:G,payload:D}});return Ko({points:M,layout:E},A)});function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function xY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bY(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,v3(a.key),a)}}function wY(e,t,n){return t&&bY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SY(e,t,n){return t=n_(t),PY(e,g3()?Reflect.construct(t,n||[],n_(e).constructor):t.apply(e,n))}function PY(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TY(e)}function TY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g3=function(){return!!e})()}function n_(e){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n_(e)}function AY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t2(e,t)}function t2(e,t){return t2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},t2(e,t)}function y3(e,t,n){return t=v3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v3(e){var t=CY(e,"string");return Dp(t)=="symbol"?t:t+""}function CY(e,t){if(Dp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Dp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function r2(){return r2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r2.apply(this,arguments)}function EY(e){var t=e.xAxisId,n=_P(),a=xP(),u=r3(t);return u==null?null:be.createElement(Yp,r2({},u,{className:Or("recharts-".concat(u.axisType," ").concat(u.axisType),u.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(p){return Iu(p,!0)}}))}var zp=(function(e){function t(){return xY(this,t),SY(this,t,arguments)}return AY(t,e),wY(t,[{key:"render",value:function(){return be.createElement(EY,this.props)}}])})(be.Component);y3(zp,"displayName","XAxis");y3(zp,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function MY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kY(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,b3(a.key),a)}}function IY(e,t,n){return t&&kY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OY(e,t,n){return t=i_(t),RY(e,_3()?Reflect.construct(t,n||[],i_(e).constructor):t.apply(e,n))}function RY(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DY(e)}function DY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_3=function(){return!!e})()}function i_(e){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},i_(e)}function zY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n2(e,t)}function n2(e,t){return n2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},n2(e,t)}function x3(e,t,n){return t=b3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b3(e){var t=jY(e,"string");return jp(t)=="symbol"?t:t+""}function jY(e,t){if(jp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(jp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function i2(){return i2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i2.apply(this,arguments)}var LY=function(t){var n=t.yAxisId,a=_P(),u=xP(),f=n3(n);return f==null?null:be.createElement(Yp,i2({},f,{className:Or("recharts-".concat(f.axisType," ").concat(f.axisType),f.className),viewBox:{x:0,y:0,width:a,height:u},ticksGenerator:function(s){return Iu(s,!0)}}))},Lp=(function(e){function t(){return MY(this,t),OY(this,t,arguments)}return zY(t,e),IY(t,[{key:"render",value:function(){return be.createElement(LY,this.props)}}])})(be.Component);x3(Lp,"displayName","YAxis");x3(Lp,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function DO(e){return $Y(e)||FY(e)||BY(e)||NY()}function NY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BY(e,t){if(e){if(typeof e=="string")return a2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a2(e,t)}}function FY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Y(e){if(Array.isArray(e))return a2(e)}function a2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var o2=function(t,n,a,u,f){var p=rs(t,wP),s=rs(t,q_),P=[].concat(DO(p),DO(s)),A=rs(t,W_),E="".concat(u,"Id"),M=u[0],D=n;if(P.length&&(D=P.reduce(function(F,$){if($.props[E]===a&&Ec($.props,"extendDomain")&&Dt($.props[M])){var K=$.props[M];return[Math.min(F[0],K),Math.max(F[1],K)]}return F},D)),A.length){var j="".concat(M,"1"),G="".concat(M,"2");D=A.reduce(function(F,$){if($.props[E]===a&&Ec($.props,"extendDomain")&&Dt($.props[j])&&Dt($.props[G])){var K=$.props[j],J=$.props[G];return[Math.min(F[0],K,J),Math.max(F[1],K,J)]}return F},D)}return f&&f.length&&(D=f.reduce(function(F,$){return Dt($)?[Math.min(F[0],$),Math.max(F[1],$)]:F},D)),D},kw={exports:{}},zO;function UY(){return zO||(zO=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function u(P,A,E){this.fn=P,this.context=A,this.once=E||!1}function f(P,A,E,M,D){if(typeof E!="function")throw new TypeError("The listener must be a function");var j=new u(E,M||P,D),G=n?n+A:A;return P._events[G]?P._events[G].fn?P._events[G]=[P._events[G],j]:P._events[G].push(j):(P._events[G]=j,P._eventsCount++),P}function p(P,A){--P._eventsCount===0?P._events=new a:delete P._events[A]}function s(){this._events=new a,this._eventsCount=0}s.prototype.eventNames=function(){var A=[],E,M;if(this._eventsCount===0)return A;for(M in E=this._events)t.call(E,M)&&A.push(n?M.slice(1):M);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(E)):A},s.prototype.listeners=function(A){var E=n?n+A:A,M=this._events[E];if(!M)return[];if(M.fn)return[M.fn];for(var D=0,j=M.length,G=new Array(j);D<j;D++)G[D]=M[D].fn;return G},s.prototype.listenerCount=function(A){var E=n?n+A:A,M=this._events[E];return M?M.fn?1:M.length:0},s.prototype.emit=function(A,E,M,D,j,G){var F=n?n+A:A;if(!this._events[F])return!1;var $=this._events[F],K=arguments.length,J,ee;if($.fn){switch($.once&&this.removeListener(A,$.fn,void 0,!0),K){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,E),!0;case 3:return $.fn.call($.context,E,M),!0;case 4:return $.fn.call($.context,E,M,D),!0;case 5:return $.fn.call($.context,E,M,D,j),!0;case 6:return $.fn.call($.context,E,M,D,j,G),!0}for(ee=1,J=new Array(K-1);ee<K;ee++)J[ee-1]=arguments[ee];$.fn.apply($.context,J)}else{var oe=$.length,Y;for(ee=0;ee<oe;ee++)switch($[ee].once&&this.removeListener(A,$[ee].fn,void 0,!0),K){case 1:$[ee].fn.call($[ee].context);break;case 2:$[ee].fn.call($[ee].context,E);break;case 3:$[ee].fn.call($[ee].context,E,M);break;case 4:$[ee].fn.call($[ee].context,E,M,D);break;default:if(!J)for(Y=1,J=new Array(K-1);Y<K;Y++)J[Y-1]=arguments[Y];$[ee].fn.apply($[ee].context,J)}}return!0},s.prototype.on=function(A,E,M){return f(this,A,E,M,!1)},s.prototype.once=function(A,E,M){return f(this,A,E,M,!0)},s.prototype.removeListener=function(A,E,M,D){var j=n?n+A:A;if(!this._events[j])return this;if(!E)return p(this,j),this;var G=this._events[j];if(G.fn)G.fn===E&&(!D||G.once)&&(!M||G.context===M)&&p(this,j);else{for(var F=0,$=[],K=G.length;F<K;F++)(G[F].fn!==E||D&&!G[F].once||M&&G[F].context!==M)&&$.push(G[F]);$.length?this._events[j]=$.length===1?$[0]:$:p(this,j)}return this},s.prototype.removeAllListeners=function(A){var E;return A?(E=n?n+A:A,this._events[E]&&p(this,E)):(this._events=new a,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(kw)),kw.exports}var VY=UY();const qY=ln(VY);var Iw=new qY,Ow="recharts.syncMouseEvents";function Fg(e){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fg(e)}function GY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WY(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,w3(a.key),a)}}function HY(e,t,n){return t&&WY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rw(e,t,n){return t=w3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w3(e){var t=ZY(e,"string");return Fg(t)=="symbol"?t:t+""}function ZY(e,t){if(Fg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Fg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var XY=(function(){function e(){GY(this,e),Rw(this,"activeIndex",0),Rw(this,"coordinateList",[]),Rw(this,"layout","horizontal")}return HY(e,[{key:"setDetails",value:function(n){var a,u=n.coordinateList,f=u===void 0?null:u,p=n.container,s=p===void 0?null:p,P=n.layout,A=P===void 0?null:P,E=n.offset,M=E===void 0?null:E,D=n.mouseHandlerCallback,j=D===void 0?null:D;this.coordinateList=(a=f??this.coordinateList)!==null&&a!==void 0?a:[],this.container=s??this.container,this.layout=A??this.layout,this.offset=M??this.offset,this.mouseHandlerCallback=j??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var u=this.container.getBoundingClientRect(),f=u.x,p=u.y,s=u.height,P=this.coordinateList[this.activeIndex].coordinate,A=((n=window)===null||n===void 0?void 0:n.scrollX)||0,E=((a=window)===null||a===void 0?void 0:a.scrollY)||0,M=f+P+A,D=p+this.offset.top+s/2+E;this.mouseHandlerCallback({pageX:M,pageY:D})}}}])})();function KY(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],u=e?.[1];if(a&&u&&Dt(a)&&Dt(u))return!0}return!1}function YY(e,t,n,a){var u=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-u:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-u,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function S3(e){var t=e.cx,n=e.cy,a=e.radius,u=e.startAngle,f=e.endAngle,p=In(t,n,a,u),s=In(t,n,a,f);return{points:[p,s],cx:t,cy:n,radius:a,startAngle:u,endAngle:f}}function JY(e,t,n){var a,u,f,p;if(e==="horizontal")a=t.x,f=a,u=n.top,p=n.top+n.height;else if(e==="vertical")u=t.y,p=u,a=n.left,f=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,P=t.cy,A=t.innerRadius,E=t.outerRadius,M=t.angle,D=In(s,P,A,M),j=In(s,P,E,M);a=D.x,u=D.y,f=j.x,p=j.y}else return S3(t);return[{x:a,y:u},{x:f,y:p}]}function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}function jO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function ev(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(n),!0).forEach(function(a){QY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function QY(e,t,n){return t=eJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eJ(e){var t=tJ(e,"string");return $g(t)=="symbol"?t:t+""}function tJ(e,t){if($g(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if($g(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rJ(e){var t,n,a=e.element,u=e.tooltipEventType,f=e.isActive,p=e.activeCoordinate,s=e.activePayload,P=e.offset,A=e.activeTooltipIndex,E=e.tooltipAxisBandSize,M=e.layout,D=e.chartName,j=(t=a.props.cursor)!==null&&t!==void 0?t:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!j||!f||!p||D!=="ScatterChart"&&u!=="axis")return null;var G,F=jv;if(D==="ScatterChart")G=p,F=PH;else if(D==="BarChart")G=YY(M,p,P,E),F=mP;else if(M==="radial"){var $=S3(p),K=$.cx,J=$.cy,ee=$.radius,oe=$.startAngle,Y=$.endAngle;G={cx:K,cy:J,startAngle:oe,endAngle:Y,innerRadius:ee,outerRadius:ee},F=Pj}else G={points:JY(M,p,P)},F=jv;var re=ev(ev(ev(ev({stroke:"#ccc",pointerEvents:"none"},P),G),fr(j,!1)),{},{payload:s,payloadIndex:A,className:Or("recharts-tooltip-cursor",j.className)});return be.isValidElement(j)?be.cloneElement(j,re):be.createElement(F,re)}var nJ=["item"],iJ=["children","className","width","height","style","compact","title","desc"];function Np(e){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sp.apply(this,arguments)}function LO(e,t){return sJ(e)||oJ(e,t)||T3(e,t)||aJ()}function aJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,u,f,p,s=[],P=!0,A=!1;try{if(f=(n=n.call(e)).next,t!==0)for(;!(P=(a=f.call(n)).done)&&(s.push(a.value),s.length!==t);P=!0);}catch(E){A=!0,u=E}finally{try{if(!P&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(A)throw u}}return s}}function sJ(e){if(Array.isArray(e))return e}function NO(e,t){if(e==null)return{};var n=lJ(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function lJ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function cJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uJ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,A3(a.key),a)}}function hJ(e,t,n){return t&&uJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dJ(e,t,n){return t=a_(t),fJ(e,P3()?Reflect.construct(t,n||[],a_(e).constructor):t.apply(e,n))}function fJ(e,t){if(t&&(Np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pJ(e)}function pJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P3=function(){return!!e})()}function a_(e){return a_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a_(e)}function mJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s2(e,t)}function s2(e,t){return s2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},s2(e,t)}function Bp(e){return vJ(e)||yJ(e)||T3(e)||gJ()}function gJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T3(e,t){if(e){if(typeof e=="string")return l2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l2(e,t)}}function yJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vJ(e){if(Array.isArray(e))return l2(e)}function l2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function BO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BO(Object(n),!0).forEach(function(a){yr(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yr(e,t,n){return t=A3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A3(e){var t=_J(e,"string");return Np(t)=="symbol"?t:t+""}function _J(e,t){if(Np(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Np(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xJ={xAxis:["bottom","top"],yAxis:["left","right"]},bJ={width:"100%",height:"100%"},C3={x:0,y:0};function tv(e){return e}var wJ=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},SJ=function(t,n,a,u){var f=n.find(function(E){return E&&E.index===a});if(f){if(t==="horizontal")return{x:f.coordinate,y:u.y};if(t==="vertical")return{x:u.x,y:f.coordinate};if(t==="centric"){var p=f.coordinate,s=u.radius;return ft(ft(ft({},u),In(u.cx,u.cy,s,p)),{},{angle:p,radius:s})}var P=f.coordinate,A=u.angle;return ft(ft(ft({},u),In(u.cx,u.cy,P,A)),{},{angle:A,radius:P})}return C3},H_=function(t,n){var a=n.graphicalItems,u=n.dataStartIndex,f=n.dataEndIndex,p=(a??[]).reduce(function(s,P){var A=P.props.data;return A&&A.length?[].concat(Bp(s),Bp(A)):s},[]);return p.length>0?p:t&&t.length&&Dt(u)&&Dt(f)?t.slice(u,f+1):[]};function E3(e){return e==="number"?[0,"auto"]:void 0}var c2=function(t,n,a,u){var f=t.graphicalItems,p=t.tooltipAxis,s=H_(n,t);return a<0||!f||!f.length||a>=s.length?null:f.reduce(function(P,A){var E,M=(E=A.props.data)!==null&&E!==void 0?E:n;M&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(M=M.slice(t.dataStartIndex,t.dataEndIndex+1));var D;if(p.dataKey&&!p.allowDuplicatedCategory){var j=M===void 0?s:M;D=lv(j,p.dataKey,u)}else D=M&&M[a]||s[a];return D?[].concat(Bp(P),[vj(A,D)]):P},[])},FO=function(t,n,a,u){var f=u||{x:t.chartX,y:t.chartY},p=wJ(f,a),s=t.orderedTooltipTicks,P=t.tooltipAxis,A=t.tooltipTicks,E=Z7(p,s,A,P);if(E>=0&&A){var M=A[E]&&A[E].value,D=c2(t,n,E,M),j=SJ(a,s,E,f);return{activeTooltipIndex:E,activeLabel:M,activePayload:D,activeCoordinate:j}}return null},PJ=function(t,n){var a=n.axes,u=n.graphicalItems,f=n.axisType,p=n.axisIdKey,s=n.stackGroups,P=n.dataStartIndex,A=n.dataEndIndex,E=t.layout,M=t.children,D=t.stackOffset,j=dj(E,f);return a.reduce(function(G,F){var $,K=F.type.defaultProps!==void 0?ft(ft({},F.type.defaultProps),F.props):F.props,J=K.type,ee=K.dataKey,oe=K.allowDataOverflow,Y=K.allowDuplicatedCategory,re=K.scale,ue=K.ticks,ge=K.includeHidden,Oe=K[p];if(G[Oe])return G;var We=H_(t.data,{graphicalItems:u.filter(function(qe){var yt,Rt=p in qe.props?qe.props[p]:(yt=qe.type.defaultProps)===null||yt===void 0?void 0:yt[p];return Rt===Oe}),dataStartIndex:P,dataEndIndex:A}),Re=We.length,Ve,Ye,ot;KY(K.domain,oe,J)&&(Ve=wS(K.domain,null,oe),j&&(J==="number"||re!=="auto")&&(ot=Qm(We,ee,"category")));var at=E3(J);if(!Ve||Ve.length===0){var st,lt=(st=K.domain)!==null&&st!==void 0?st:at;if(ee){if(Ve=Qm(We,ee,J),J==="category"&&j){var Ne=ZB(Ve);Y&&Ne?(Ye=Ve,Ve=Wv(0,Re)):Y||(Ve=Bk(lt,Ve,F).reduce(function(qe,yt){return qe.indexOf(yt)>=0?qe:[].concat(Bp(qe),[yt])},[]))}else if(J==="category")Y?Ve=Ve.filter(function(qe){return qe!==""&&!kr(qe)}):Ve=Bk(lt,Ve,F).reduce(function(qe,yt){return qe.indexOf(yt)>=0||yt===""||kr(yt)?qe:[].concat(Bp(qe),[yt])},[]);else if(J==="number"){var tt=Q7(We,u.filter(function(qe){var yt,Rt,$t=p in qe.props?qe.props[p]:(yt=qe.type.defaultProps)===null||yt===void 0?void 0:yt[p],Wt="hide"in qe.props?qe.props.hide:(Rt=qe.type.defaultProps)===null||Rt===void 0?void 0:Rt.hide;return $t===Oe&&(ge||!Wt)}),ee,f,E);tt&&(Ve=tt)}j&&(J==="number"||re!=="auto")&&(ot=Qm(We,ee,"category"))}else j?Ve=Wv(0,Re):s&&s[Oe]&&s[Oe].hasStack&&J==="number"?Ve=D==="expand"?[0,1]:yj(s[Oe].stackGroups,P,A):Ve=hj(We,u.filter(function(qe){var yt=p in qe.props?qe.props[p]:qe.type.defaultProps[p],Rt="hide"in qe.props?qe.props.hide:qe.type.defaultProps.hide;return yt===Oe&&(ge||!Rt)}),J,E,!0);if(J==="number")Ve=o2(M,Ve,Oe,f,ue),lt&&(Ve=wS(lt,Ve,oe));else if(J==="category"&&lt){var ut=lt,Ce=Ve.every(function(qe){return ut.indexOf(qe)>=0});Ce&&(Ve=ut)}}return ft(ft({},G),{},yr({},Oe,ft(ft({},K),{},{axisType:f,domain:Ve,categoricalDomain:ot,duplicateDomain:Ye,originalDomain:($=K.domain)!==null&&$!==void 0?$:at,isCategorical:j,layout:E})))},{})},TJ=function(t,n){var a=n.graphicalItems,u=n.Axis,f=n.axisType,p=n.axisIdKey,s=n.stackGroups,P=n.dataStartIndex,A=n.dataEndIndex,E=t.layout,M=t.children,D=H_(t.data,{graphicalItems:a,dataStartIndex:P,dataEndIndex:A}),j=D.length,G=dj(E,f),F=-1;return a.reduce(function($,K){var J=K.type.defaultProps!==void 0?ft(ft({},K.type.defaultProps),K.props):K.props,ee=J[p],oe=E3("number");if(!$[ee]){F++;var Y;return G?Y=Wv(0,j):s&&s[ee]&&s[ee].hasStack?(Y=yj(s[ee].stackGroups,P,A),Y=o2(M,Y,ee,f)):(Y=wS(oe,hj(D,a.filter(function(re){var ue,ge,Oe=p in re.props?re.props[p]:(ue=re.type.defaultProps)===null||ue===void 0?void 0:ue[p],We="hide"in re.props?re.props.hide:(ge=re.type.defaultProps)===null||ge===void 0?void 0:ge.hide;return Oe===ee&&!We}),"number",E),u.defaultProps.allowDataOverflow),Y=o2(M,Y,ee,f)),ft(ft({},$),{},yr({},ee,ft(ft({axisType:f},u.defaultProps),{},{hide:!0,orientation:ts(xJ,"".concat(f,".").concat(F%2),null),domain:Y,originalDomain:oe,isCategorical:G,layout:E})))}return $},{})},AJ=function(t,n){var a=n.axisType,u=a===void 0?"xAxis":a,f=n.AxisComp,p=n.graphicalItems,s=n.stackGroups,P=n.dataStartIndex,A=n.dataEndIndex,E=t.children,M="".concat(u,"Id"),D=rs(E,f),j={};return D&&D.length?j=PJ(t,{axes:D,graphicalItems:p,axisType:u,axisIdKey:M,stackGroups:s,dataStartIndex:P,dataEndIndex:A}):p&&p.length&&(j=TJ(t,{Axis:f,graphicalItems:p,axisType:u,axisIdKey:M,stackGroups:s,dataStartIndex:P,dataEndIndex:A})),j},CJ=function(t){var n=Ch(t),a=Iu(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:U2(a,function(u){return u.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Rv(n,a)}},$O=function(t){var n=t.children,a=t.defaultShowTooltip,u=Jo(n,Cp),f=0,p=0;return t.data&&t.data.length!==0&&(p=t.data.length-1),u&&u.props&&(u.props.startIndex>=0&&(f=u.props.startIndex),u.props.endIndex>=0&&(p=u.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:f,dataEndIndex:p,activeTooltipIndex:-1,isTooltipActive:!!a}},EJ=function(t){return!t||!t.length?!1:t.some(function(n){var a=kh(n&&n.type);return a&&a.indexOf("Bar")>=0})},UO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},MJ=function(t,n){var a=t.props,u=t.graphicalItems,f=t.xAxisMap,p=f===void 0?{}:f,s=t.yAxisMap,P=s===void 0?{}:s,A=a.width,E=a.height,M=a.children,D=a.margin||{},j=Jo(M,Cp),G=Jo(M,up),F=Object.keys(P).reduce(function(Y,re){var ue=P[re],ge=ue.orientation;return!ue.mirror&&!ue.hide?ft(ft({},Y),{},yr({},ge,Y[ge]+ue.width)):Y},{left:D.left||0,right:D.right||0}),$=Object.keys(p).reduce(function(Y,re){var ue=p[re],ge=ue.orientation;return!ue.mirror&&!ue.hide?ft(ft({},Y),{},yr({},ge,ts(Y,"".concat(ge))+ue.height)):Y},{top:D.top||0,bottom:D.bottom||0}),K=ft(ft({},$),F),J=K.bottom;j&&(K.bottom+=j.props.height||Cp.defaultProps.height),G&&n&&(K=Y7(K,u,a,n));var ee=A-K.left-K.right,oe=E-K.top-K.bottom;return ft(ft({brushBottom:J},K),{},{width:Math.max(ee,0),height:Math.max(oe,0)})},kJ=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},TP=function(t){var n=t.chartName,a=t.GraphicalChild,u=t.defaultTooltipEventType,f=u===void 0?"axis":u,p=t.validateTooltipEventTypes,s=p===void 0?["axis"]:p,P=t.axisComponents,A=t.legendContent,E=t.formatAxisMap,M=t.defaultProps,D=function(K,J){var ee=J.graphicalItems,oe=J.stackGroups,Y=J.offset,re=J.updateId,ue=J.dataStartIndex,ge=J.dataEndIndex,Oe=K.barSize,We=K.layout,Re=K.barGap,Ve=K.barCategoryGap,Ye=K.maxBarSize,ot=UO(We),at=ot.numericAxisName,st=ot.cateAxisName,lt=EJ(ee),Ne=[];return ee.forEach(function(tt,ut){var Ce=H_(K.data,{graphicalItems:[tt],dataStartIndex:ue,dataEndIndex:ge}),qe=tt.type.defaultProps!==void 0?ft(ft({},tt.type.defaultProps),tt.props):tt.props,yt=qe.dataKey,Rt=qe.maxBarSize,$t=qe["".concat(at,"Id")],Wt=qe["".concat(st,"Id")],er={},tr=P.reduce(function(On,ni){var oa=J["".concat(ni.axisType,"Map")],Fa=qe["".concat(ni.axisType,"Id")];oa&&oa[Fa]||ni.axisType==="zAxis"||Zd();var Pa=oa[Fa];return ft(ft({},On),{},yr(yr({},ni.axisType,Pa),"".concat(ni.axisType,"Ticks"),Iu(Pa)))},er),vt=tr[st],Ft=tr["".concat(st,"Ticks")],ir=oe&&oe[$t]&&oe[$t].hasStack&&l9(tt,oe[$t].stackGroups),pt=kh(tt.type).indexOf("Bar")>=0,dr=Rv(vt,Ft),rr=[],qr=lt&&X7({barSize:Oe,stackGroups:oe,totalSize:kJ(tr,st)});if(pt){var Hr,vn,qn=kr(Rt)?Ye:Rt,Xn=(Hr=(vn=Rv(vt,Ft,!0))!==null&&vn!==void 0?vn:qn)!==null&&Hr!==void 0?Hr:0;rr=K7({barGap:Re,barCategoryGap:Ve,bandSize:Xn!==dr?Xn:dr,sizeList:qr[Wt],maxBarSize:qn}),Xn!==dr&&(rr=rr.map(function(On){return ft(ft({},On),{},{position:ft(ft({},On.position),{},{offset:On.position.offset-Xn/2})})}))}var ki=tt&&tt.type&&tt.type.getComposedData;ki&&Ne.push({props:ft(ft({},ki(ft(ft({},tr),{},{displayedData:Ce,props:K,dataKey:yt,item:tt,bandSize:dr,barPosition:rr,offset:Y,stackedData:ir,layout:We,dataStartIndex:ue,dataEndIndex:ge}))),{},yr(yr(yr({key:tt.key||"item-".concat(ut)},at,tr[at]),st,tr[st]),"animationId",re)),childIndex:sF(tt,K.children),item:tt})}),Ne},j=function(K,J){var ee=K.props,oe=K.dataStartIndex,Y=K.dataEndIndex,re=K.updateId;if(!tC({props:ee}))return null;var ue=ee.children,ge=ee.layout,Oe=ee.stackOffset,We=ee.data,Re=ee.reverseStackOrder,Ve=UO(ge),Ye=Ve.numericAxisName,ot=Ve.cateAxisName,at=rs(ue,a),st=o9(We,at,"".concat(Ye,"Id"),"".concat(ot,"Id"),Oe,Re),lt=P.reduce(function(qe,yt){var Rt="".concat(yt.axisType,"Map");return ft(ft({},qe),{},yr({},Rt,AJ(ee,ft(ft({},yt),{},{graphicalItems:at,stackGroups:yt.axisType===Ye&&st,dataStartIndex:oe,dataEndIndex:Y}))))},{}),Ne=MJ(ft(ft({},lt),{},{props:ee,graphicalItems:at}),J?.legendBBox);Object.keys(lt).forEach(function(qe){lt[qe]=E(ee,lt[qe],Ne,qe.replace("Map",""),n)});var tt=lt["".concat(ot,"Map")],ut=CJ(tt),Ce=D(ee,ft(ft({},lt),{},{dataStartIndex:oe,dataEndIndex:Y,updateId:re,graphicalItems:at,stackGroups:st,offset:Ne}));return ft(ft({formattedGraphicalItems:Ce,graphicalItems:at,offset:Ne,stackGroups:st},ut),lt)},G=(function($){function K(J){var ee,oe,Y;return cJ(this,K),Y=dJ(this,K,[J]),yr(Y,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),yr(Y,"accessibilityManager",new XY),yr(Y,"handleLegendBBoxUpdate",function(re){if(re){var ue=Y.state,ge=ue.dataStartIndex,Oe=ue.dataEndIndex,We=ue.updateId;Y.setState(ft({legendBBox:re},j({props:Y.props,dataStartIndex:ge,dataEndIndex:Oe,updateId:We},ft(ft({},Y.state),{},{legendBBox:re}))))}}),yr(Y,"handleReceiveSyncEvent",function(re,ue,ge){if(Y.props.syncId===re){if(ge===Y.eventEmitterSymbol&&typeof Y.props.syncMethod!="function")return;Y.applySyncEvent(ue)}}),yr(Y,"handleBrushChange",function(re){var ue=re.startIndex,ge=re.endIndex;if(ue!==Y.state.dataStartIndex||ge!==Y.state.dataEndIndex){var Oe=Y.state.updateId;Y.setState(function(){return ft({dataStartIndex:ue,dataEndIndex:ge},j({props:Y.props,dataStartIndex:ue,dataEndIndex:ge,updateId:Oe},Y.state))}),Y.triggerSyncEvent({dataStartIndex:ue,dataEndIndex:ge})}}),yr(Y,"handleMouseEnter",function(re){var ue=Y.getMouseInfo(re);if(ue){var ge=ft(ft({},ue),{},{isTooltipActive:!0});Y.setState(ge),Y.triggerSyncEvent(ge);var Oe=Y.props.onMouseEnter;xr(Oe)&&Oe(ge,re)}}),yr(Y,"triggeredAfterMouseMove",function(re){var ue=Y.getMouseInfo(re),ge=ue?ft(ft({},ue),{},{isTooltipActive:!0}):{isTooltipActive:!1};Y.setState(ge),Y.triggerSyncEvent(ge);var Oe=Y.props.onMouseMove;xr(Oe)&&Oe(ge,re)}),yr(Y,"handleItemMouseEnter",function(re){Y.setState(function(){return{isTooltipActive:!0,activeItem:re,activePayload:re.tooltipPayload,activeCoordinate:re.tooltipPosition||{x:re.cx,y:re.cy}}})}),yr(Y,"handleItemMouseLeave",function(){Y.setState(function(){return{isTooltipActive:!1}})}),yr(Y,"handleMouseMove",function(re){re.persist(),Y.throttleTriggeredAfterMouseMove(re)}),yr(Y,"handleMouseLeave",function(re){Y.throttleTriggeredAfterMouseMove.cancel();var ue={isTooltipActive:!1};Y.setState(ue),Y.triggerSyncEvent(ue);var ge=Y.props.onMouseLeave;xr(ge)&&ge(ue,re)}),yr(Y,"handleOuterEvent",function(re){var ue=oF(re),ge=ts(Y.props,"".concat(ue));if(ue&&xr(ge)){var Oe,We;/.*touch.*/i.test(ue)?We=Y.getMouseInfo(re.changedTouches[0]):We=Y.getMouseInfo(re),ge((Oe=We)!==null&&Oe!==void 0?Oe:{},re)}}),yr(Y,"handleClick",function(re){var ue=Y.getMouseInfo(re);if(ue){var ge=ft(ft({},ue),{},{isTooltipActive:!0});Y.setState(ge),Y.triggerSyncEvent(ge);var Oe=Y.props.onClick;xr(Oe)&&Oe(ge,re)}}),yr(Y,"handleMouseDown",function(re){var ue=Y.props.onMouseDown;if(xr(ue)){var ge=Y.getMouseInfo(re);ue(ge,re)}}),yr(Y,"handleMouseUp",function(re){var ue=Y.props.onMouseUp;if(xr(ue)){var ge=Y.getMouseInfo(re);ue(ge,re)}}),yr(Y,"handleTouchMove",function(re){re.changedTouches!=null&&re.changedTouches.length>0&&Y.throttleTriggeredAfterMouseMove(re.changedTouches[0])}),yr(Y,"handleTouchStart",function(re){re.changedTouches!=null&&re.changedTouches.length>0&&Y.handleMouseDown(re.changedTouches[0])}),yr(Y,"handleTouchEnd",function(re){re.changedTouches!=null&&re.changedTouches.length>0&&Y.handleMouseUp(re.changedTouches[0])}),yr(Y,"handleDoubleClick",function(re){var ue=Y.props.onDoubleClick;if(xr(ue)){var ge=Y.getMouseInfo(re);ue(ge,re)}}),yr(Y,"handleContextMenu",function(re){var ue=Y.props.onContextMenu;if(xr(ue)){var ge=Y.getMouseInfo(re);ue(ge,re)}}),yr(Y,"triggerSyncEvent",function(re){Y.props.syncId!==void 0&&Iw.emit(Ow,Y.props.syncId,re,Y.eventEmitterSymbol)}),yr(Y,"applySyncEvent",function(re){var ue=Y.props,ge=ue.layout,Oe=ue.syncMethod,We=Y.state.updateId,Re=re.dataStartIndex,Ve=re.dataEndIndex;if(re.dataStartIndex!==void 0||re.dataEndIndex!==void 0)Y.setState(ft({dataStartIndex:Re,dataEndIndex:Ve},j({props:Y.props,dataStartIndex:Re,dataEndIndex:Ve,updateId:We},Y.state)));else if(re.activeTooltipIndex!==void 0){var Ye=re.chartX,ot=re.chartY,at=re.activeTooltipIndex,st=Y.state,lt=st.offset,Ne=st.tooltipTicks;if(!lt)return;if(typeof Oe=="function")at=Oe(Ne,re);else if(Oe==="value"){at=-1;for(var tt=0;tt<Ne.length;tt++)if(Ne[tt].value===re.activeLabel){at=tt;break}}var ut=ft(ft({},lt),{},{x:lt.left,y:lt.top}),Ce=Math.min(Ye,ut.x+ut.width),qe=Math.min(ot,ut.y+ut.height),yt=Ne[at]&&Ne[at].value,Rt=c2(Y.state,Y.props.data,at),$t=Ne[at]?{x:ge==="horizontal"?Ne[at].coordinate:Ce,y:ge==="horizontal"?qe:Ne[at].coordinate}:C3;Y.setState(ft(ft({},re),{},{activeLabel:yt,activeCoordinate:$t,activePayload:Rt,activeTooltipIndex:at}))}else Y.setState(re)}),yr(Y,"renderCursor",function(re){var ue,ge=Y.state,Oe=ge.isTooltipActive,We=ge.activeCoordinate,Re=ge.activePayload,Ve=ge.offset,Ye=ge.activeTooltipIndex,ot=ge.tooltipAxisBandSize,at=Y.getTooltipEventType(),st=(ue=re.props.active)!==null&&ue!==void 0?ue:Oe,lt=Y.props.layout,Ne=re.key||"_recharts-cursor";return Me.createElement(rJ,{key:Ne,activeCoordinate:We,activePayload:Re,activeTooltipIndex:Ye,chartName:n,element:re,isActive:st,layout:lt,offset:Ve,tooltipAxisBandSize:ot,tooltipEventType:at})}),yr(Y,"renderPolarAxis",function(re,ue,ge){var Oe=ts(re,"type.axisType"),We=ts(Y.state,"".concat(Oe,"Map")),Re=re.type.defaultProps,Ve=Re!==void 0?ft(ft({},Re),re.props):re.props,Ye=We&&We[Ve["".concat(Oe,"Id")]];return be.cloneElement(re,ft(ft({},Ye),{},{className:Or(Oe,Ye.className),key:re.key||"".concat(ue,"-").concat(ge),ticks:Iu(Ye,!0)}))}),yr(Y,"renderPolarGrid",function(re){var ue=re.props,ge=ue.radialLines,Oe=ue.polarAngles,We=ue.polarRadius,Re=Y.state,Ve=Re.radiusAxisMap,Ye=Re.angleAxisMap,ot=Ch(Ve),at=Ch(Ye),st=at.cx,lt=at.cy,Ne=at.innerRadius,tt=at.outerRadius;return be.cloneElement(re,{polarAngles:Array.isArray(Oe)?Oe:Iu(at,!0).map(function(ut){return ut.coordinate}),polarRadius:Array.isArray(We)?We:Iu(ot,!0).map(function(ut){return ut.coordinate}),cx:st,cy:lt,innerRadius:Ne,outerRadius:tt,key:re.key||"polar-grid",radialLines:ge})}),yr(Y,"renderLegend",function(){var re=Y.state.formattedGraphicalItems,ue=Y.props,ge=ue.children,Oe=ue.width,We=ue.height,Re=Y.props.margin||{},Ve=Oe-(Re.left||0)-(Re.right||0),Ye=cj({children:ge,formattedGraphicalItems:re,legendWidth:Ve,legendContent:A});if(!Ye)return null;var ot=Ye.item,at=NO(Ye,nJ);return be.cloneElement(ot,ft(ft({},at),{},{chartWidth:Oe,chartHeight:We,margin:Re,onBBoxUpdate:Y.handleLegendBBoxUpdate}))}),yr(Y,"renderTooltip",function(){var re,ue=Y.props,ge=ue.children,Oe=ue.accessibilityLayer,We=Jo(ge,Cl);if(!We)return null;var Re=Y.state,Ve=Re.isTooltipActive,Ye=Re.activeCoordinate,ot=Re.activePayload,at=Re.activeLabel,st=Re.offset,lt=(re=We.props.active)!==null&&re!==void 0?re:Ve;return be.cloneElement(We,{viewBox:ft(ft({},st),{},{x:st.left,y:st.top}),active:lt,label:at,payload:lt?ot:[],coordinate:Ye,accessibilityLayer:Oe})}),yr(Y,"renderBrush",function(re){var ue=Y.props,ge=ue.margin,Oe=ue.data,We=Y.state,Re=We.offset,Ve=We.dataStartIndex,Ye=We.dataEndIndex,ot=We.updateId;return be.cloneElement(re,{key:re.key||"_recharts-brush",onChange:Ky(Y.handleBrushChange,re.props.onChange),data:Oe,x:Dt(re.props.x)?re.props.x:Re.left,y:Dt(re.props.y)?re.props.y:Re.top+Re.height+Re.brushBottom-(ge.bottom||0),width:Dt(re.props.width)?re.props.width:Re.width,startIndex:Ve,endIndex:Ye,updateId:"brush-".concat(ot)})}),yr(Y,"renderReferenceElement",function(re,ue,ge){if(!re)return null;var Oe=Y,We=Oe.clipPathId,Re=Y.state,Ve=Re.xAxisMap,Ye=Re.yAxisMap,ot=Re.offset,at=re.type.defaultProps||{},st=re.props,lt=st.xAxisId,Ne=lt===void 0?at.xAxisId:lt,tt=st.yAxisId,ut=tt===void 0?at.yAxisId:tt;return be.cloneElement(re,{key:re.key||"".concat(ue,"-").concat(ge),xAxis:Ve[Ne],yAxis:Ye[ut],viewBox:{x:ot.left,y:ot.top,width:ot.width,height:ot.height},clipPathId:We})}),yr(Y,"renderActivePoints",function(re){var ue=re.item,ge=re.activePoint,Oe=re.basePoint,We=re.childIndex,Re=re.isRange,Ve=[],Ye=ue.props.key,ot=ue.item.type.defaultProps!==void 0?ft(ft({},ue.item.type.defaultProps),ue.item.props):ue.item.props,at=ot.activeDot,st=ot.dataKey,lt=ft(ft({index:We,dataKey:st,cx:ge.x,cy:ge.y,r:4,fill:pP(ue.item),strokeWidth:2,stroke:"#fff",payload:ge.payload,value:ge.value},fr(at,!1)),cv(at));return Ve.push(K.renderActiveDot(at,lt,"".concat(Ye,"-activePoint-").concat(We))),Oe?Ve.push(K.renderActiveDot(at,ft(ft({},lt),{},{cx:Oe.x,cy:Oe.y}),"".concat(Ye,"-basePoint-").concat(We))):Re&&Ve.push(null),Ve}),yr(Y,"renderGraphicChild",function(re,ue,ge){var Oe=Y.filterFormatItem(re,ue,ge);if(!Oe)return null;var We=Y.getTooltipEventType(),Re=Y.state,Ve=Re.isTooltipActive,Ye=Re.tooltipAxis,ot=Re.activeTooltipIndex,at=Re.activeLabel,st=Y.props.children,lt=Jo(st,Cl),Ne=Oe.props,tt=Ne.points,ut=Ne.isRange,Ce=Ne.baseLine,qe=Oe.item.type.defaultProps!==void 0?ft(ft({},Oe.item.type.defaultProps),Oe.item.props):Oe.item.props,yt=qe.activeDot,Rt=qe.hide,$t=qe.activeBar,Wt=qe.activeShape,er=!!(!Rt&&Ve&&lt&&(yt||$t||Wt)),tr={};We!=="axis"&&lt&&lt.props.trigger==="click"?tr={onClick:Ky(Y.handleItemMouseEnter,re.props.onClick)}:We!=="axis"&&(tr={onMouseLeave:Ky(Y.handleItemMouseLeave,re.props.onMouseLeave),onMouseEnter:Ky(Y.handleItemMouseEnter,re.props.onMouseEnter)});var vt=be.cloneElement(re,ft(ft({},Oe.props),tr));function Ft(ni){return typeof Ye.dataKey=="function"?Ye.dataKey(ni.payload):null}if(er)if(ot>=0){var ir,pt;if(Ye.dataKey&&!Ye.allowDuplicatedCategory){var dr=typeof Ye.dataKey=="function"?Ft:"payload.".concat(Ye.dataKey.toString());ir=lv(tt,dr,at),pt=ut&&Ce&&lv(Ce,dr,at)}else ir=tt?.[ot],pt=ut&&Ce&&Ce[ot];if(Wt||$t){var rr=re.props.activeIndex!==void 0?re.props.activeIndex:ot;return[be.cloneElement(re,ft(ft(ft({},Oe.props),tr),{},{activeIndex:rr})),null,null]}if(!kr(ir))return[vt].concat(Bp(Y.renderActivePoints({item:Oe,activePoint:ir,basePoint:pt,childIndex:ot,isRange:ut})))}else{var qr,Hr=(qr=Y.getItemByXY(Y.state.activeCoordinate))!==null&&qr!==void 0?qr:{graphicalItem:vt},vn=Hr.graphicalItem,qn=vn.item,Xn=qn===void 0?re:qn,ki=vn.childIndex,On=ft(ft(ft({},Oe.props),tr),{},{activeIndex:ki});return[be.cloneElement(Xn,On),null,null]}return ut?[vt,null,null]:[vt,null]}),yr(Y,"renderCustomized",function(re,ue,ge){return be.cloneElement(re,ft(ft({key:"recharts-customized-".concat(ge)},Y.props),Y.state))}),yr(Y,"renderMap",{CartesianGrid:{handler:tv,once:!0},ReferenceArea:{handler:Y.renderReferenceElement},ReferenceLine:{handler:tv},ReferenceDot:{handler:Y.renderReferenceElement},XAxis:{handler:tv},YAxis:{handler:tv},Brush:{handler:Y.renderBrush,once:!0},Bar:{handler:Y.renderGraphicChild},Line:{handler:Y.renderGraphicChild},Area:{handler:Y.renderGraphicChild},Radar:{handler:Y.renderGraphicChild},RadialBar:{handler:Y.renderGraphicChild},Scatter:{handler:Y.renderGraphicChild},Pie:{handler:Y.renderGraphicChild},Funnel:{handler:Y.renderGraphicChild},Tooltip:{handler:Y.renderCursor,once:!0},PolarGrid:{handler:Y.renderPolarGrid,once:!0},PolarAngleAxis:{handler:Y.renderPolarAxis},PolarRadiusAxis:{handler:Y.renderPolarAxis},Customized:{handler:Y.renderCustomized}}),Y.clipPathId="".concat((ee=J.id)!==null&&ee!==void 0?ee:Wp("recharts"),"-clip"),Y.throttleTriggeredAfterMouseMove=R8(Y.triggeredAfterMouseMove,(oe=J.throttleDelay)!==null&&oe!==void 0?oe:1e3/60),Y.state={},Y}return mJ(K,$),hJ(K,[{key:"componentDidMount",value:function(){var ee,oe;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(ee=this.props.margin.left)!==null&&ee!==void 0?ee:0,top:(oe=this.props.margin.top)!==null&&oe!==void 0?oe:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var ee=this.props,oe=ee.children,Y=ee.data,re=ee.height,ue=ee.layout,ge=Jo(oe,Cl);if(ge){var Oe=ge.props.defaultIndex;if(!(typeof Oe!="number"||Oe<0||Oe>this.state.tooltipTicks.length-1)){var We=this.state.tooltipTicks[Oe]&&this.state.tooltipTicks[Oe].value,Re=c2(this.state,Y,Oe,We),Ve=this.state.tooltipTicks[Oe].coordinate,Ye=(this.state.offset.top+re)/2,ot=ue==="horizontal",at=ot?{x:Ve,y:Ye}:{y:Ve,x:Ye},st=this.state.formattedGraphicalItems.find(function(Ne){var tt=Ne.item;return tt.type.name==="Scatter"});st&&(at=ft(ft({},at),st.props.points[Oe].tooltipPosition),Re=st.props.points[Oe].tooltipPayload);var lt={activeTooltipIndex:Oe,isTooltipActive:!0,activeLabel:We,activePayload:Re,activeCoordinate:at};this.setState(lt),this.renderCursor(ge),this.accessibilityManager.setIndex(Oe)}}}},{key:"getSnapshotBeforeUpdate",value:function(ee,oe){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==oe.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==ee.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==ee.margin){var Y,re;this.accessibilityManager.setDetails({offset:{left:(Y=this.props.margin.left)!==null&&Y!==void 0?Y:0,top:(re=this.props.margin.top)!==null&&re!==void 0?re:0}})}return null}},{key:"componentDidUpdate",value:function(ee){qw([Jo(ee.children,Cl)],[Jo(this.props.children,Cl)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var ee=Jo(this.props.children,Cl);if(ee&&typeof ee.props.shared=="boolean"){var oe=ee.props.shared?"axis":"item";return s.indexOf(oe)>=0?oe:f}return f}},{key:"getMouseInfo",value:function(ee){if(!this.container)return null;var oe=this.container,Y=oe.getBoundingClientRect(),re=F8(Y),ue={chartX:Math.round(ee.pageX-re.left),chartY:Math.round(ee.pageY-re.top)},ge=Y.width/oe.offsetWidth||1,Oe=this.inRange(ue.chartX,ue.chartY,ge);if(!Oe)return null;var We=this.state,Re=We.xAxisMap,Ve=We.yAxisMap,Ye=this.getTooltipEventType(),ot=FO(this.state,this.props.data,this.props.layout,Oe);if(Ye!=="axis"&&Re&&Ve){var at=Ch(Re).scale,st=Ch(Ve).scale,lt=at&&at.invert?at.invert(ue.chartX):null,Ne=st&&st.invert?st.invert(ue.chartY):null;return ft(ft({},ue),{},{xValue:lt,yValue:Ne},ot)}return ot?ft(ft({},ue),ot):null}},{key:"inRange",value:function(ee,oe){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,re=this.props.layout,ue=ee/Y,ge=oe/Y;if(re==="horizontal"||re==="vertical"){var Oe=this.state.offset,We=ue>=Oe.left&&ue<=Oe.left+Oe.width&&ge>=Oe.top&&ge<=Oe.top+Oe.height;return We?{x:ue,y:ge}:null}var Re=this.state,Ve=Re.angleAxisMap,Ye=Re.radiusAxisMap;if(Ve&&Ye){var ot=Ch(Ve);return Uk({x:ue,y:ge},ot)}return null}},{key:"parseEventsOfWrapper",value:function(){var ee=this.props.children,oe=this.getTooltipEventType(),Y=Jo(ee,Cl),re={};Y&&oe==="axis"&&(Y.props.trigger==="click"?re={onClick:this.handleClick}:re={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var ue=cv(this.props,this.handleOuterEvent);return ft(ft({},ue),re)}},{key:"addListener",value:function(){Iw.on(Ow,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Iw.removeListener(Ow,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(ee,oe,Y){for(var re=this.state.formattedGraphicalItems,ue=0,ge=re.length;ue<ge;ue++){var Oe=re[ue];if(Oe.item===ee||Oe.props.key===ee.key||oe===kh(Oe.item.type)&&Y===Oe.childIndex)return Oe}return null}},{key:"renderClipPath",value:function(){var ee=this.clipPathId,oe=this.state.offset,Y=oe.left,re=oe.top,ue=oe.height,ge=oe.width;return Me.createElement("defs",null,Me.createElement("clipPath",{id:ee},Me.createElement("rect",{x:Y,y:re,height:ue,width:ge})))}},{key:"getXScales",value:function(){var ee=this.state.xAxisMap;return ee?Object.entries(ee).reduce(function(oe,Y){var re=LO(Y,2),ue=re[0],ge=re[1];return ft(ft({},oe),{},yr({},ue,ge.scale))},{}):null}},{key:"getYScales",value:function(){var ee=this.state.yAxisMap;return ee?Object.entries(ee).reduce(function(oe,Y){var re=LO(Y,2),ue=re[0],ge=re[1];return ft(ft({},oe),{},yr({},ue,ge.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(ee){var oe;return(oe=this.state.xAxisMap)===null||oe===void 0||(oe=oe[ee])===null||oe===void 0?void 0:oe.scale}},{key:"getYScaleByAxisId",value:function(ee){var oe;return(oe=this.state.yAxisMap)===null||oe===void 0||(oe=oe[ee])===null||oe===void 0?void 0:oe.scale}},{key:"getItemByXY",value:function(ee){var oe=this.state,Y=oe.formattedGraphicalItems,re=oe.activeItem;if(Y&&Y.length)for(var ue=0,ge=Y.length;ue<ge;ue++){var Oe=Y[ue],We=Oe.props,Re=Oe.item,Ve=Re.type.defaultProps!==void 0?ft(ft({},Re.type.defaultProps),Re.props):Re.props,Ye=kh(Re.type);if(Ye==="Bar"){var ot=(We.data||[]).find(function(Ne){return iH(ee,Ne)});if(ot)return{graphicalItem:Oe,payload:ot}}else if(Ye==="RadialBar"){var at=(We.data||[]).find(function(Ne){return Uk(ee,Ne)});if(at)return{graphicalItem:Oe,payload:at}}else if(F_(Oe,re)||$_(Oe,re)||zg(Oe,re)){var st=CZ({graphicalItem:Oe,activeTooltipItem:re,itemData:Ve.data}),lt=Ve.activeIndex===void 0?st:Ve.activeIndex;return{graphicalItem:ft(ft({},Oe),{},{childIndex:lt}),payload:zg(Oe,re)?Ve.data[st]:Oe.props.data[st]}}}return null}},{key:"render",value:function(){var ee=this;if(!tC(this))return null;var oe=this.props,Y=oe.children,re=oe.className,ue=oe.width,ge=oe.height,Oe=oe.style,We=oe.compact,Re=oe.title,Ve=oe.desc,Ye=NO(oe,iJ),ot=fr(Ye,!1);if(We)return Me.createElement(vO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Me.createElement(Ww,sp({},ot,{width:ue,height:ge,title:Re,desc:Ve}),this.renderClipPath(),nC(Y,this.renderMap)));if(this.props.accessibilityLayer){var at,st;ot.tabIndex=(at=this.props.tabIndex)!==null&&at!==void 0?at:0,ot.role=(st=this.props.role)!==null&&st!==void 0?st:"application",ot.onKeyDown=function(Ne){ee.accessibilityManager.keyboardEvent(Ne)},ot.onFocus=function(){ee.accessibilityManager.focus()}}var lt=this.parseEventsOfWrapper();return Me.createElement(vO,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Me.createElement("div",sp({className:Or("recharts-wrapper",re),style:ft({position:"relative",cursor:"default",width:ue,height:ge},Oe)},lt,{ref:function(tt){ee.container=tt}}),Me.createElement(Ww,sp({},ot,{width:ue,height:ge,title:Re,desc:Ve,style:bJ}),this.renderClipPath(),nC(Y,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(be.Component);yr(G,"displayName",n),yr(G,"defaultProps",ft({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},M)),yr(G,"getDerivedStateFromProps",function($,K){var J=$.dataKey,ee=$.data,oe=$.children,Y=$.width,re=$.height,ue=$.layout,ge=$.stackOffset,Oe=$.margin,We=K.dataStartIndex,Re=K.dataEndIndex;if(K.updateId===void 0){var Ve=$O($);return ft(ft(ft({},Ve),{},{updateId:0},j(ft(ft({props:$},Ve),{},{updateId:0}),K)),{},{prevDataKey:J,prevData:ee,prevWidth:Y,prevHeight:re,prevLayout:ue,prevStackOffset:ge,prevMargin:Oe,prevChildren:oe})}if(J!==K.prevDataKey||ee!==K.prevData||Y!==K.prevWidth||re!==K.prevHeight||ue!==K.prevLayout||ge!==K.prevStackOffset||!cp(Oe,K.prevMargin)){var Ye=$O($),ot={chartX:K.chartX,chartY:K.chartY,isTooltipActive:K.isTooltipActive},at=ft(ft({},FO(K,ee,ue)),{},{updateId:K.updateId+1}),st=ft(ft(ft({},Ye),ot),at);return ft(ft(ft({},st),j(ft({props:$},st),K)),{},{prevDataKey:J,prevData:ee,prevWidth:Y,prevHeight:re,prevLayout:ue,prevStackOffset:ge,prevMargin:Oe,prevChildren:oe})}if(!qw(oe,K.prevChildren)){var lt,Ne,tt,ut,Ce=Jo(oe,Cp),qe=Ce&&(lt=(Ne=Ce.props)===null||Ne===void 0?void 0:Ne.startIndex)!==null&&lt!==void 0?lt:We,yt=Ce&&(tt=(ut=Ce.props)===null||ut===void 0?void 0:ut.endIndex)!==null&&tt!==void 0?tt:Re,Rt=qe!==We||yt!==Re,$t=!kr(ee),Wt=$t&&!Rt?K.updateId:K.updateId+1;return ft(ft({updateId:Wt},j(ft(ft({props:$},K),{},{updateId:Wt,dataStartIndex:qe,dataEndIndex:yt}),K)),{},{prevChildren:oe,dataStartIndex:qe,dataEndIndex:yt})}return null}),yr(G,"renderActiveDot",function($,K,J){var ee;return be.isValidElement($)?ee=be.cloneElement($,K):xr($)?ee=$(K):ee=Me.createElement(z_,K),Me.createElement(nn,{className:"recharts-active-dot",key:J},ee)});var F=be.forwardRef(function(K,J){return Me.createElement(G,sp({},K,{ref:J}))});return F.displayName=G.displayName,F},IJ=TP({chartName:"LineChart",GraphicalChild:Qg,axisComponents:[{axisType:"xAxis",AxisComp:zp},{axisType:"yAxis",AxisComp:Lp}],formatAxisMap:Zj}),OJ=TP({chartName:"BarChart",GraphicalChild:tf,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:zp},{axisType:"yAxis",AxisComp:Lp}],formatAxisMap:Zj}),RJ=TP({chartName:"PieChart",GraphicalChild:Fu,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:B_},{axisType:"radiusAxis",AxisComp:L_}],formatAxisMap:v9,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Au({className:e,...t}){return ce.jsx("div",{"data-slot":"card",className:ao("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function tp({className:e,...t}){return ce.jsx("div",{"data-slot":"card-header",className:ao("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function rp({className:e,...t}){return ce.jsx("h4",{"data-slot":"card-title",className:ao("leading-none",e),...t})}function Cu({className:e,...t}){return ce.jsx("div",{"data-slot":"card-content",className:ao("px-6 [&:last-child]:pb-6",e),...t})}function DJ({analysisResult:e,selectedFilters:t}){return console.log("InsightsView rendering:",{analysisResult:e,selectedFilters:t}),console.log("Analysis result data:",{totalPopulation:Math.round(e?.totalPopulation||0),matchingPopulation:Math.round(e?.matchingPopulation||0),percentage:e?.percentage,stateBreakdown:e?.stateBreakdown}),e?ce.jsxs("div",{className:"space-y-6 p-6",style:{padding:"24px",backgroundColor:"#f8fafc",minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:[ce.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",marginBottom:"32px"},children:[ce.jsx(Au,{style:{border:"2px solid #3b82f6",backgroundColor:"#eff6ff",borderRadius:"16px",boxShadow:"0 8px 25px -5px rgba(59, 130, 246, 0.3)",transition:"all 0.3s ease"},children:ce.jsxs(Cu,{style:{padding:"32px 24px",textAlign:"center"},children:[ce.jsxs("div",{style:{fontSize:"56px",fontWeight:"bold",color:"#1d4ed8",marginBottom:"12px",textShadow:"0 2px 4px rgba(29, 78, 216, 0.1)"},children:[e.percentage.toFixed(2),"%"]}),ce.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1e40af",marginBottom:"8px"},children:"Match Rate"}),ce.jsx("div",{style:{fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:"Population matching your filters"})]})}),ce.jsx(Au,{style:{border:"2px solid #10b981",backgroundColor:"#f0fdf4",borderRadius:"16px",boxShadow:"0 8px 25px -5px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease"},children:ce.jsxs(Cu,{style:{padding:"32px 24px",textAlign:"center"},children:[ce.jsxs("div",{style:{fontSize:"48px",fontWeight:"bold",color:"#059669",marginBottom:"12px",textShadow:"0 2px 4px rgba(5, 150, 105, 0.1)"},children:[Math.round(e.matchingPopulation/1e6),"M"]}),ce.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"#047857",marginBottom:"8px"},children:"Matching Population"}),ce.jsxs("div",{style:{fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:[Math.round(e.matchingPopulation).toLocaleString()," people"]})]})}),ce.jsx(Au,{style:{border:"2px solid #8b5cf6",backgroundColor:"#faf5ff",borderRadius:"16px",boxShadow:"0 8px 25px -5px rgba(139, 92, 246, 0.3)",transition:"all 0.3s ease"},children:ce.jsxs(Cu,{style:{padding:"32px 24px",textAlign:"center"},children:[ce.jsx("div",{style:{fontSize:"56px",fontWeight:"bold",color:"#7c3aed",marginBottom:"12px",textShadow:"0 2px 4px rgba(124, 58, 237, 0.1)"},children:t.size}),ce.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"#6b21a8",marginBottom:"8px"},children:"Filters Applied"}),ce.jsxs("div",{style:{fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:["Active filter",t.size!==1?"s":""]})]})})]}),ce.jsxs(Au,{style:{border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[ce.jsx(tp,{style:{backgroundColor:"#f8fafc",padding:"20px 24px",borderBottom:"1px solid #e5e7eb"},children:ce.jsxs(rp,{className:"flex items-center gap-2",style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[ce.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full",style:{width:"12px",height:"12px",backgroundColor:"#3b82f6",borderRadius:"50%"}}),"Population Distribution"]})}),ce.jsx(Cu,{style:{padding:"24px"},children:ce.jsxs("div",{className:"space-y-6",style:{display:"flex",flexDirection:"column",gap:"24px"},children:[ce.jsx("div",{className:"h-80",style:{height:"320px",display:"flex",justifyContent:"center",alignItems:"center"},children:ce.jsx(RJ,{width:400,height:300,children:ce.jsxs(Fu,{data:[{name:"Matching",value:e.matchingPopulation},{name:"Remaining",value:e.totalPopulation-e.matchingPopulation}],cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,dataKey:"value",children:[ce.jsx(hg,{fill:"#3b82f6"}),ce.jsx(hg,{fill:"#e5e7eb"})]})})}),ce.jsxs("div",{className:"grid grid-cols-2 gap-4",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #dbeafe"},children:[ce.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full",style:{width:"16px",height:"16px",backgroundColor:"#3b82f6",borderRadius:"50%"}}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-sm font-medium text-blue-900",style:{fontSize:"14px",fontWeight:"500",color:"#1e40af"},children:"Matching Population"}),ce.jsx("div",{className:"text-xs text-blue-700",style:{fontSize:"12px",color:"#1d4ed8"},children:Math.round(e.matchingPopulation).toLocaleString()}),ce.jsxs("div",{className:"text-xs text-blue-600 font-semibold",style:{fontSize:"12px",color:"#1e40af",fontWeight:"600"},children:[e.percentage.toFixed(2),"%"]})]})]}),ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[ce.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded-full",style:{width:"16px",height:"16px",backgroundColor:"#9ca3af",borderRadius:"50%"}}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-sm font-medium text-gray-900",style:{fontSize:"14px",fontWeight:"500",color:"#111827"},children:"Remaining Population"}),ce.jsx("div",{className:"text-xs text-gray-700",style:{fontSize:"12px",color:"#4b5563"},children:Math.round(e.totalPopulation-e.matchingPopulation).toLocaleString()}),ce.jsxs("div",{className:"text-xs text-gray-600 font-semibold",style:{fontSize:"12px",color:"#4b5563",fontWeight:"600"},children:[(100-e.percentage).toFixed(2),"%"]})]})]})]})]})})]}),ce.jsxs(Au,{style:{border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[ce.jsx(tp,{style:{backgroundColor:"#f0fdf4",padding:"20px 24px",borderBottom:"1px solid #e5e7eb"},children:ce.jsxs(rp,{className:"flex items-center gap-2",style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[ce.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full",style:{width:"12px",height:"12px",backgroundColor:"#10b981",borderRadius:"50%"}}),"State Performance"]})}),ce.jsx(Cu,{style:{padding:"24px"},children:ce.jsxs("div",{className:"space-y-6",style:{display:"flex",flexDirection:"column",gap:"24px"},children:[ce.jsx("div",{className:"h-80",style:{height:"320px",display:"flex",justifyContent:"center",alignItems:"center"},children:ce.jsxs(OJ,{width:600,height:300,data:e.stateBreakdown.slice(0,5).map((n,a)=>({state:n.state,percentage:n.percentage,matchingPopulation:n.matchingPopulation,population:n.population,rank:a+1})),margin:{top:20,right:30,left:20,bottom:5},children:[ce.jsx(JS,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),ce.jsx(zp,{dataKey:"state",tick:{fontSize:12},axisLine:{stroke:"#e5e7eb"}}),ce.jsx(Lp,{tick:{fontSize:12},axisLine:{stroke:"#e5e7eb"},label:{value:"Match Rate (%)",angle:-90,position:"insideLeft"}}),ce.jsx(Cl,{formatter:(n,a)=>[a==="percentage"?`${n.toFixed(2)}%`:Math.round(n).toLocaleString(),a==="percentage"?"Match Rate":"Population"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),ce.jsx(tf,{dataKey:"percentage",fill:"#3b82f6",radius:[4,4,0,0]})]})}),ce.jsx("div",{className:"space-y-3",children:e.stateBreakdown.slice(0,5).map((n,a)=>{const u=a===0;return ce.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${u?"bg-green-50 border border-green-200":"bg-gray-50"}`,children:[ce.jsxs("div",{className:"flex items-center gap-3",children:[ce.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${u?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a+1}),ce.jsxs("div",{children:[ce.jsx("div",{className:"font-medium",children:n.state}),ce.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(n.population).toLocaleString()," total"]})]})]}),ce.jsxs("div",{className:"text-right",children:[ce.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[n.percentage.toFixed(2),"%"]}),ce.jsx("div",{className:"text-sm text-muted-foreground",children:Math.round(n.matchingPopulation).toLocaleString()})]})]},n.state)})})]})})]}),ce.jsxs(Au,{style:{border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[ce.jsx(tp,{style:{backgroundColor:"#faf5ff",padding:"20px 24px",borderBottom:"1px solid #e5e7eb"},children:ce.jsxs(rp,{className:"flex items-center gap-2",style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[ce.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full",style:{width:"12px",height:"12px",backgroundColor:"#8b5cf6",borderRadius:"50%"}}),"Population Trend Analysis"]})}),ce.jsx(Cu,{style:{padding:"24px"},children:ce.jsxs("div",{className:"space-y-6",style:{display:"flex",flexDirection:"column",gap:"24px"},children:[ce.jsx("div",{className:"h-80",style:{height:"320px",display:"flex",justifyContent:"center",alignItems:"center"},children:ce.jsxs(IJ,{width:600,height:300,data:e.stateBreakdown.slice(0,6).map((n,a)=>({state:n.state,percentage:n.percentage,matchingPopulation:n.matchingPopulation,population:n.population,rank:a+1})),margin:{top:20,right:30,left:20,bottom:5},children:[ce.jsx(JS,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),ce.jsx(zp,{dataKey:"state",tick:{fontSize:12},axisLine:{stroke:"#e5e7eb"}}),ce.jsx(Lp,{tick:{fontSize:12},axisLine:{stroke:"#e5e7eb"},label:{value:"Match Rate (%)",angle:-90,position:"insideLeft"}}),ce.jsx(Cl,{formatter:(n,a)=>[a==="percentage"?`${n.toFixed(2)}%`:Math.round(n).toLocaleString(),a==="percentage"?"Match Rate":"Population"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),ce.jsx(Qg,{type:"monotone",dataKey:"percentage",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:6},activeDot:{r:8,stroke:"#3b82f6",strokeWidth:2}})]})}),ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ce.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[ce.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Average Match Rate"}),ce.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(e.stateBreakdown.reduce((n,a)=>n+a.percentage,0)/e.stateBreakdown.length).toFixed(2),"%"]})]}),ce.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[ce.jsx("div",{className:"text-sm font-medium text-green-900",children:"Top Performer"}),ce.jsxs("div",{className:"text-lg font-bold text-green-600",children:[e.stateBreakdown[0]?.state," (",e.stateBreakdown[0]?.percentage.toFixed(2),"%)"]})]})]})]})})]}),ce.jsxs(Au,{style:{border:"2px solid orange",marginBottom:"20px"},children:[ce.jsx(tp,{style:{backgroundColor:"#f9fafb",padding:"16px"},children:ce.jsxs(rp,{className:"flex items-center gap-2",style:{fontSize:"18px",fontWeight:"600"},children:[ce.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full",style:{width:"8px",height:"8px",backgroundColor:"#f97316",borderRadius:"50%"}}),"Complete State Analysis"]})}),ce.jsx(Cu,{style:{padding:"16px"},children:ce.jsx("div",{className:"overflow-x-auto",style:{overflowX:"auto"},children:ce.jsxs("table",{className:"w-full text-sm",style:{width:"100%",fontSize:"14px"},children:[ce.jsx("thead",{children:ce.jsxs("tr",{className:"border-b",style:{borderBottom:"1px solid #e5e7eb"},children:[ce.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",style:{textAlign:"left",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"State"}),ce.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",style:{textAlign:"right",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"Total Population"}),ce.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",style:{textAlign:"right",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"Matching Population"}),ce.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",style:{textAlign:"right",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"Match Rate"}),ce.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-900",style:{textAlign:"right",padding:"12px 16px",fontWeight:"600",color:"#111827"},children:"Rank"})]})}),ce.jsx("tbody",{children:e.stateBreakdown.map((n,a)=>ce.jsxs("tr",{className:"border-b hover:bg-gray-50",style:{borderBottom:"1px solid #e5e7eb",backgroundColor:a%2===0?"#ffffff":"#f9fafb"},children:[ce.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",style:{padding:"12px 16px",fontWeight:"500",color:"#111827"},children:n.state}),ce.jsx("td",{className:"py-3 px-4 text-right text-gray-600",style:{padding:"12px 16px",textAlign:"right",color:"#4b5563"},children:Math.round(n.population).toLocaleString()}),ce.jsx("td",{className:"py-3 px-4 text-right text-gray-600",style:{padding:"12px 16px",textAlign:"right",color:"#4b5563"},children:Math.round(n.matchingPopulation).toLocaleString()}),ce.jsx("td",{className:"py-3 px-4 text-right",style:{padding:"12px 16px",textAlign:"right"},children:ce.jsxs("span",{className:`font-semibold ${n.percentage>5?"text-green-600":n.percentage>2?"text-yellow-600":"text-red-600"}`,style:{fontWeight:"600",color:n.percentage>5?"#059669":n.percentage>2?"#d97706":"#dc2626"},children:[n.percentage.toFixed(2),"%"]})}),ce.jsx("td",{className:"py-3 px-4 text-right",style:{padding:"12px 16px",textAlign:"right"},children:ce.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a===0?"bg-green-100 text-green-800":a===1?"bg-blue-100 text-blue-800":a===2?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",borderRadius:"9999px",fontSize:"12px",fontWeight:"500",backgroundColor:a===0?"#dcfce7":a===1?"#dbeafe":a===2?"#e9d5ff":"#f3f4f6",color:a===0?"#166534":a===1?"#1e40af":a===2?"#7c3aed":"#374151"},children:["#",a+1]})})]},n.state))})]})})})]}),ce.jsxs(Au,{style:{border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[ce.jsx(tp,{style:{backgroundColor:"#eef2ff",padding:"20px 24px",borderBottom:"1px solid #e5e7eb"},children:ce.jsxs(rp,{className:"flex items-center gap-2",style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[ce.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full",style:{width:"12px",height:"12px",backgroundColor:"#6366f1",borderRadius:"50%"}}),"Filter Impact Analysis"]})}),ce.jsx(Cu,{style:{padding:"24px"},children:ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ce.jsxs("div",{className:"space-y-4",children:[ce.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Filter Categories"}),ce.jsx("div",{className:"space-y-3",children:Array.from(t).slice(0,6).map((n,a)=>{const u=n.split("_")[0],f=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500","bg-indigo-500"],p={voters:"Demographics",commercialdata:"Household",consumerdata:"Consumer",hs:"Political",ethnic:"Ethnicity",state:"Geography"};return ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[ce.jsx("div",{className:`w-4 h-4 rounded-full ${f[a%f.length]}`}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-sm font-medium text-gray-900",children:p[u]||u}),ce.jsx("div",{className:"text-xs text-muted-foreground",children:n.split("_").slice(1).join(" ")})]})]},n)})})]}),ce.jsxs("div",{className:"space-y-4",children:[ce.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Filter Distribution"}),ce.jsx("div",{className:"space-y-3",children:Array.from(t).slice(0,6).map((n,a)=>{const u=1/t.size*100,f=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500","bg-indigo-500"];return ce.jsxs("div",{className:"space-y-2",children:[ce.jsxs("div",{className:"flex justify-between items-center",children:[ce.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.split("_").pop()}),ce.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.toFixed(2),"%"]})]}),ce.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:ce.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${f[a%f.length]}`,style:{width:`${u}%`}})})]},n)})})]})]}),ce.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[ce.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[ce.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.size}),ce.jsx("div",{className:"text-sm text-blue-700",children:"Active Filters"})]}),ce.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[ce.jsx("div",{className:"text-2xl font-bold text-green-600",children:Array.from(t).map(n=>n.split("_")[0]).filter((n,a,u)=>u.indexOf(n)===a).length}),ce.jsx("div",{className:"text-sm text-green-700",children:"Categories"})]}),ce.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[ce.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(e.percentage),"%"]}),ce.jsx("div",{className:"text-sm text-purple-700",children:"Match Rate"})]})]})]})})]}),ce.jsxs(Au,{style:{border:"2px solid pink",marginBottom:"20px"},children:[ce.jsx(tp,{style:{backgroundColor:"#fdf2f8",padding:"16px"},children:ce.jsxs(rp,{className:"flex items-center gap-2",style:{fontSize:"18px",fontWeight:"600"},children:[ce.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full",style:{width:"8px",height:"8px",backgroundColor:"#ec4899",borderRadius:"50%"}}),"Applied Filters"]})}),ce.jsx(Cu,{style:{padding:"16px"},children:ce.jsxs("div",{className:"space-y-4",style:{display:"flex",flexDirection:"column",gap:"16px"},children:[ce.jsxs("div",{className:"text-sm text-gray-600 mb-4",style:{fontSize:"14px",color:"#4b5563",marginBottom:"16px"},children:[t.size," filter",t.size!==1?"s":""," currently applied"]}),ce.jsx("div",{className:"flex flex-wrap gap-2",style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Array.from(t).map((n,a)=>{const u=["bg-blue-100 text-blue-800 border-blue-200","bg-green-100 text-green-800 border-green-200","bg-purple-100 text-purple-800 border-purple-200","bg-orange-100 text-orange-800 border-orange-200","bg-red-100 text-red-800 border-red-200","bg-indigo-100 text-indigo-800 border-indigo-200"];return ce.jsx(ag,{variant:"outline",className:`px-3 py-1 text-sm font-medium border ${u[a%u.length]}`,style:{padding:"8px 12px",fontSize:"14px",fontWeight:"500",border:"1px solid",borderRadius:"6px",backgroundColor:a%6===0?"#dbeafe":a%6===1?"#dcfce7":a%6===2?"#e9d5ff":a%6===3?"#fed7aa":a%6===4?"#fecaca":"#e0e7ff",color:a%6===0?"#1e40af":a%6===1?"#166534":a%6===2?"#7c3aed":a%6===3?"#ea580c":a%6===4?"#dc2626":"#3730a3",borderColor:a%6===0?"#93c5fd":a%6===1?"#86efac":a%6===2?"#c4b5fd":a%6===3?"#fdba74":a%6===4?"#fca5a5":"#a5b4fc"},children:n.split("_").pop()?.replace(/_/g," ")},n)})})]})})]})]}):ce.jsx("div",{className:"h-full flex items-center justify-center",children:ce.jsxs("div",{className:"text-center space-y-4",children:[ce.jsx("div",{className:"text-2xl font-semibold text-muted-foreground",children:"No Analysis Results"}),ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Apply filters to see insights"})]})})}function zJ({selectedFilters:e,analysisResult:t}){const[n,a]=be.useState(null),[u,f]=be.useState(null),p=be.useRef(null),s=be.useRef(null);be.useEffect(()=>(p.current&&!s.current&&(s.current=new WT.Map({container:p.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[-98.5795,39.8283],zoom:4}),s.current.addControl(new WT.NavigationControl),s.current.on("click","voter-heatmap",M=>{const D=M.features[0].properties,j=D.name==="California"?"CA":D.name==="New York"?"NY":D.name==="Wyoming"?"WY":D.name;a({name:D.name,state:j,population:D.density||0,matchingPopulation:D.matchingPopulation||0,percentage:D.percentage||0})}),s.current.on("mouseenter","voter-heatmap",()=>{s.current&&(s.current.getCanvas().style.cursor="pointer")}),s.current.on("mouseleave","voter-heatmap",()=>{s.current&&(s.current.getCanvas().style.cursor="")}),s.current.on("load",()=>{console.log("Map loaded, ready to add state boundaries and heatmap"),P(),A()})),()=>{s.current&&(s.current.remove(),s.current=null)}),[]);const P=()=>{if(s.current){if(console.log("Adding state boundaries..."),!Pu||!Pu.features){console.error("GeoJSON data not available");return}s.current.getSource("state-boundaries")&&(console.log("Removing existing state boundaries..."),s.current.getLayer("state-fill")&&s.current.removeLayer("state-fill"),s.current.getLayer("state-borders")&&s.current.removeLayer("state-borders"),s.current.removeSource("state-boundaries")),s.current.addSource("state-boundaries",{type:"geojson",data:Pu}),s.current.addLayer({id:"state-fill",type:"fill",source:"state-boundaries",paint:{"fill-color":"#e1f5fe","fill-opacity":.3}}),s.current.addLayer({id:"state-borders",type:"line",source:"state-boundaries",paint:{"line-color":"#1976d2","line-width":2}}),console.log("State boundaries added")}},A=()=>{if(!s.current)return;if(console.log("Adding sample heatmap with state boundaries..."),!Pu||!Pu.features){console.error("GeoJSON data not available for sample heatmap");return}const M={type:"FeatureCollection",features:Pu.features.map(D=>{const j=D.properties.name==="California"?"CA":D.properties.name==="New York"?"NY":D.properties.name==="Wyoming"?"WY":D.properties.name;let G=0,F=0;switch(j){case"CA":G=5e6,F=12.6;break;case"NY":G=25e5,F=12.8;break;case"WY":G=75e3,F=13;break}return{...D,properties:{...D.properties,matchingPopulation:G,percentage:F}}})};s.current.getSource("voter-heatmap")&&(s.current.removeLayer("voter-heatmap"),s.current.removeSource("voter-heatmap")),s.current.addSource("voter-heatmap",{type:"geojson",data:M}),s.current.addLayer({id:"voter-heatmap",type:"fill",source:"voter-heatmap",paint:{"fill-color":["interpolate",["linear"],["get","percentage"],0,"#e3f2fd",5,"#90caf9",10,"#64b5f6",15,"#42a5f5",20,"#4caf50",25,"#ff9800",30,"#ff5722"],"fill-opacity":.7}}),console.log("Sample heatmap added to map")},E=M=>{if(!s.current||M.stateBreakdown.length===0)return;if(console.log("Adding heatmap to map with analysis data:",M.stateBreakdown),!Pu||!Pu.features){console.error("GeoJSON data not available for heatmap");return}const D={};M.stateBreakdown.forEach(G=>{D[G.state]=G});const j={type:"FeatureCollection",features:Pu.features.map(G=>{const F=G.properties.name==="California"?"CA":G.properties.name==="New York"?"NY":G.properties.name==="Wyoming"?"WY":G.properties.name,$=D[F];return $?{...G,properties:{...G.properties,matchingPopulation:Math.round($.matchingPopulation),percentage:$.percentage,population:Math.round($.population)}}:{...G,properties:{...G.properties,matchingPopulation:0,percentage:0,population:G.properties.density||0}}})};console.log("Heatmap data for map:",j),s.current.getSource("voter-heatmap")&&(s.current.removeLayer("voter-heatmap"),s.current.removeSource("voter-heatmap")),s.current.addSource("voter-heatmap",{type:"geojson",data:j}),s.current.addLayer({id:"voter-heatmap",type:"fill",source:"voter-heatmap",paint:{"fill-color":["interpolate",["linear"],["get","percentage"],0,"#e3f2fd",5,"#90caf9",10,"#64b5f6",15,"#42a5f5",20,"#4caf50",25,"#ff9800",30,"#ff5722"],"fill-opacity":.7}}),console.log("Heatmap added to map successfully")};return be.useEffect(()=>{s.current&&s.current.isStyleLoaded()&&(t&&t.stateBreakdown.length>0?E(t):A())},[t]),be.useEffect(()=>()=>{s.current&&(s.current.remove(),s.current=null)},[]),ce.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[ce.jsx("div",{className:"p-4 border-b border-border bg-white",children:ce.jsxs("div",{className:"flex justify-between items-center",children:[ce.jsx("h2",{className:"text-lg font-semibold",children:"Interactive Map"}),ce.jsxs(Z4,{children:[ce.jsx(X4,{asChild:!0,children:ce.jsxs(Ph,{variant:"outline",className:"flex items-center gap-2",children:[ce.jsx(yL,{className:"w-4 h-4"}),"View Insights"]})}),ce.jsxs(J4,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[ce.jsx(Q4,{children:ce.jsx(eB,{children:"Analysis Insights"})}),ce.jsx(DJ,{analysisResult:t||null,selectedFilters:e})]})]})]})}),ce.jsxs("div",{className:"flex-1 relative",children:[ce.jsx("div",{ref:p,className:"w-full h-full"}),t&&t.totalPopulation>0&&ce.jsxs("div",{className:"absolute top-4 right-4 bg-white p-4 rounded-lg shadow-lg border border-border max-w-sm",children:[ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.round(t.matchingPopulation).toLocaleString()}),ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Matching Population"}),ce.jsxs("div",{className:"text-lg font-medium mt-1",children:["(",t.percentage.toFixed(2),"%)"]})]}),ce.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),ce.jsxs("span",{className:"text-sm",children:["Total Population: ",Math.round(t.totalPopulation).toLocaleString()]})]})})]}),ce.jsxs("div",{className:"absolute bottom-4 right-4 bg-white p-4 rounded-lg shadow-lg border border-border",children:[ce.jsx("h4",{className:"font-medium mb-3",children:"Voter Segment Heatmap"}),ce.jsxs("div",{className:"space-y-2",children:[ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#ff5722"}}),ce.jsx("span",{className:"text-sm",children:"Very High (25%+)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#ff9800"}}),ce.jsx("span",{className:"text-sm",children:"High (20-25%)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#4caf50"}}),ce.jsx("span",{className:"text-sm",children:"Medium (15-20%)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#42a5f5"}}),ce.jsx("span",{className:"text-sm",children:"Low (10-15%)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#64b5f6"}}),ce.jsx("span",{className:"text-sm",children:"Very Low (5-10%)"})]}),ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#e3f2fd"}}),ce.jsx("span",{className:"text-sm",children:"Minimal (0-5%)"})]})]}),ce.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Showing: CA, NY, WY states"})})]}),e.size>0&&ce.jsxs("div",{className:"absolute top-4 left-4 bg-white p-4 rounded-lg shadow-lg border border-border max-w-sm",children:[ce.jsx("h3",{className:"font-medium mb-2",children:"Active Filters"}),ce.jsxs("div",{className:"space-y-1",children:[Array.from(e).slice(0,3).map(M=>ce.jsx(ag,{variant:"secondary",className:"mr-1 mb-1",children:M.split("-").pop()},M)),e.size>3&&ce.jsxs(ag,{variant:"outline",children:["+",e.size-3," more"]})]})]})]})]})}function jJ(){const[e,t]=be.useState(new Set),[n,a]=be.useState(),[u,f]=be.useState(!1),p=(P,A)=>{const E=new Set(e);A?E.add(P):E.delete(P),t(E)},s=()=>{t(new Set),a(void 0)};return be.useEffect(()=>{if(e.size>0){console.log("Filters changed, scheduling analysis...",Array.from(e));const P=setTimeout(async()=>{console.log("Executing analysis..."),f(!0);try{const A=await Nw.analyzeFilters(e);a(A)}catch(A){console.error("Error analyzing filters:",A)}finally{f(!1)}},500);return()=>clearTimeout(P)}else a(void 0)},[e]),ce.jsxs("div",{className:"h-screen w-full flex bg-background",children:[ce.jsx(CN,{selectedFilters:e,onFilterChange:p,onClearAll:s,analysisResult:n}),ce.jsx(zJ,{selectedFilters:e,analysisResult:n})]})}hL.createRoot(document.getElementById("root")).render(ce.jsx(jJ,{}));
